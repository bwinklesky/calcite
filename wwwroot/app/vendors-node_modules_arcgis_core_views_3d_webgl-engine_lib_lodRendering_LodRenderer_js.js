export const __webpack_id__ = "vendors-node_modules_arcgis_core_views_3d_webgl-engine_lib_lodRendering_LodRenderer_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_views_3d_webgl-engine_lib_lodRendering_LodRenderer_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../webgl/BufferObject.js */ "./node_modules/@arcgis/core/views/webgl/BufferObject.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{constructor(r,i,s){this._elementSize=i,this._buffer=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__.BufferObject.createVertex(r,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.Usage.STATIC_DRAW),this.resize(s)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+this._buffer.usedMemory}copyRange(e,t,r,i=0){const s=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(s)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setSize(t),this._capacity=e}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InstanceData: () => (/* binding */ R),
/* harmony export */   InstanceDataView: () => (/* binding */ C),
/* harmony export */   StateFlags: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/math/mat3.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/mat3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/math/mat4.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/mat4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../geometry/support/buffer/BufferView.js */ "./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js");
/* harmony import */ var _support_mathUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../support/mathUtils.js */ "./node_modules/@arcgis/core/views/3d/support/mathUtils.js");
/* harmony import */ var _support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../support/buffer/InterleavedLayout.js */ "./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js");
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../Util.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../VertexAttribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");
/* harmony import */ var _RenderInstanceData_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./RenderInstanceData.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var S;function b(t){let e=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_16__.newLayout)().mat4f64(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.LOCALTRANSFORM).mat4f64(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.GLOBALTRANSFORM).vec4f64(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.BOUNDINGSPHERE).vec3f64(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.MODELORIGIN).mat3f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.INSTANCEMODEL).mat3f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.INSTANCEMODELNORMAL).vec2f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.MODELSCALEFACTORS);return t.includes(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.FEATUREATTRIBUTE)&&(e=e.vec4f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.FEATUREATTRIBUTE)),t.includes(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.COLOR)&&(e=e.vec4u8(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.COLOR)),t.includes(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.OLIDCOLOR)&&(e=e.vec4u8(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.OLIDCOLOR)),e=e.u8(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.STATE).u8(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.LODLEVEL),e}!function(t){t[t.ALLOCATED=1]="ALLOCATED",t[t.DEFAULT_ACTIVE=2]="DEFAULT_ACTIVE",t[t.VISIBLE=4]="VISIBLE",t[t.HIGHLIGHT=8]="HIGHLIGHT",t[t.HIGHLIGHT_ACTIVE=16]="HIGHLIGHT_ACTIVE",t[t.REMOVE=32]="REMOVE",t[t.TRANSFORM_CHANGED=64]="TRANSFORM_CHANGED",t[t.ACTIVE=18]="ACTIVE"}(S||(S={}));class C{constructor(t){this.localTransform=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.LOCALTRANSFORM,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewMat4f64),this.globalTransform=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.GLOBALTRANSFORM,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewMat4f64),this.modelOrigin=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.MODELORIGIN,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewVec3f64),this.model=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.INSTANCEMODEL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewMat3f),this.modelNormal=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.INSTANCEMODELNORMAL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewMat3f),this.modelScaleFactors=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.MODELSCALEFACTORS,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewVec2f),this.boundingSphere=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.BOUNDINGSPHERE,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewVec4f64),this.featureAttribute=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.FEATUREATTRIBUTE,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewVec4f),this.color=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.COLOR,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewVec4u8),this.objectAndLayerIdColor=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.OLIDCOLOR,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewVec4u8),this.state=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.STATE,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewUint8),this.lodLevel=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_18__.VertexAttribute.LODLEVEL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_14__.BufferViewUint8)}}let R=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(t,e){super(t),this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_3__["default"],this._capacity=0,this._size=0,this._next=0,this._highlightOptionsMap=new Map,this._highlightOptionsMapPrev=new Map,this._layout=b(e),this._capacity=_RenderInstanceData_js__WEBPACK_IMPORTED_MODULE_19__.initialCapacity,this._buffer=this._layout.createBuffer(this._capacity),this._view=new C(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const t=this._findSlot();return this._view.state.set(t,S.ALLOCATED),this._size++,this.events.emit("instances-changed"),t}removeInstance(t){const e=this._view.state;(0,_Util_js__WEBPACK_IMPORTED_MODULE_17__.assert)(t>=0&&t<this._capacity&&0!==(e.get(t)&S.ALLOCATED),"invalid instance handle"),this._getStateFlag(t,S.ACTIVE)?this._setStateFlags(t,S.REMOVE):this.freeInstance(t),this.events.emit("instances-changed")}freeInstance(t){const e=this._view.state;(0,_Util_js__WEBPACK_IMPORTED_MODULE_17__.assert)(t>=0&&t<this._capacity&&0!==(e.get(t)&S.ALLOCATED),"invalid instance handle"),e.set(t,0),this._size--}setLocalTransform(t,e,s=!0){this._view.localTransform.setMat(t,e),s&&this.updateModelTransform(t)}getLocalTransform(t,e){this._view.localTransform.getMat(t,e)}setGlobalTransform(t,e,s=!0){this._view.globalTransform.setMat(t,e),s&&this.updateModelTransform(t)}getGlobalTransform(t,e){this._view.globalTransform.getMat(t,e)}updateModelTransform(t){const e=this._view,s=y,i=H;e.localTransform.getMat(t,N),e.globalTransform.getMat(t,D);const a=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_10__.multiply)(D,D,N);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__.i)(s,a[12],a[13],a[14]),e.modelOrigin.setVec(t,s),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_8__.fromMat4)(i,a),e.model.setMat(t,i);const r=(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_15__.scaleFromMatrix)(y,a);r.sort(),e.modelScaleFactors.set(t,0,r[1]),e.modelScaleFactors.set(t,1,r[2]),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_8__.invert)(i,i),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_8__.transpose)(i,i),e.modelNormal.setMat(t,i),this._setStateFlags(t,S.TRANSFORM_CHANGED),this.events.emit("instance-transform-changed",{index:t})}getModelTransform(t,e){const s=this._view;s.model.getMat(t,H),s.modelOrigin.getVec(t,y),e[0]=H[0],e[1]=H[1],e[2]=H[2],e[3]=0,e[4]=H[3],e[5]=H[4],e[6]=H[5],e[7]=0,e[8]=H[6],e[9]=H[7],e[10]=H[8],e[11]=0,e[12]=y[0],e[13]=y[1],e[14]=y[2],e[15]=1}applyShaderTransformation(t,e){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedModelTransform(t,e){return this.getModelTransform(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e),e}getCombinedLocalTransform(t,e){this._view.localTransform.getMat(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedMaxScaleFactor(t){let e=this._view.modelScaleFactors.get(t,1);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(y,this,t),e*=Math.max(y[0],y[1],y[2])),e}getCombinedMedianScaleFactor(t){let e=this._view.modelScaleFactors.get(t,0);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(y,this,t),e*=w(y[0],y[1],y[2])),e}getModel(t,e){this._view.model.getMat(t,e)}setFeatureAttribute(t,e){this._view.featureAttribute.setVec(t,e)}getFeatureAttribute(t,e){this._view.featureAttribute.getVec(t,e)}setColor(t,e){this._view.color.setVec(t,e)}setObjectAndLayerIdColor(t,e){this._view.objectAndLayerIdColor.setVec(t,e)}setVisible(t,e){e!==this.getVisible(t)&&(this._setStateFlag(t,S.VISIBLE,e),this.events.emit("instance-visibility-changed",{index:t}))}getVisible(t){return this._getStateFlag(t,S.VISIBLE)}setHighlight(t,e){const{_highlightOptionsMap:s}=this,i=s.get(t);e?e!==i&&(s.set(t,e),this._setStateFlag(t,S.HIGHLIGHT,!0),this.events.emit("instance-highlight-changed")):i&&(s.delete(t),this._setStateFlag(t,S.HIGHLIGHT,!1),this.events.emit("instance-highlight-changed"))}get highlightOptionsMap(){return this._highlightOptionsMap}getHighlightStateFlag(t){return this._getStateFlag(t,S.HIGHLIGHT)}geHighlightOptionsPrev(t){const e=this._highlightOptionsMapPrev.get(t)??null;return this._highlightOptionsMapPrev.delete(t),e}getHighlightName(t){const e=this.highlightOptionsMap.get(t)??null;return e?this._highlightOptionsMapPrev.set(t,e):this._highlightOptionsMapPrev.delete(t),e}getState(t){return this._view.state.get(t)}getLodLevel(t){return this._view.lodLevel.get(t)}countFlags(t){let e=0;for(let s=0;s<this._capacity;++s){this.getState(s)&t&&++e}return e}_setStateFlags(t,e){const s=this._view.state;e=s.get(t)|e,s.set(t,e)}_clearStateFlags(t,e){const s=this._view.state;e=s.get(t)&~e,s.set(t,e)}_setStateFlag(t,e,s){s?this._setStateFlags(t,e):this._clearStateFlags(t,e)}_getStateFlag(t,e){return!!(this._view.state.get(t)&e)}_grow(){this._capacity=Math.max(_RenderInstanceData_js__WEBPACK_IMPORTED_MODULE_19__.initialCapacity,Math.floor(this._capacity*_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.reallocGrowthFactor)),this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer),this._view=new C(this._buffer)}_findSlot(){const t=this._view.state;let e=this._next;for(;t.get(e)&S.ALLOCATED;)e=e+1===this._capacity?0:e+1;return this._next=e+1===this._capacity?0:e+1,e}};function w(t,e,s){return Math.max(Math.min(t,e),Math.min(Math.max(t,e),s))}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],R.prototype,"shaderTransformation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],R.prototype,"_size",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],R.prototype,"size",null),R=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.webgl-engine.lib.lodRendering.InstanceData")],R);const y=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_13__.create)(),H=(0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_9__.create)(),N=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_11__.create)(),D=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_11__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InstanceOctree: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/mat4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _support_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../support/mathUtils.js */ "./node_modules/@arcgis/core/views/3d/support/mathUtils.js");
/* harmony import */ var _Octree_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Octree.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends _Octree_js__WEBPACK_IMPORTED_MODULE_4__["default"]{constructor(e,r){super((t=>(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_2__.w)(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_2__.c)(),this._tmpMat4=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__.create)()}addInstance(t){const s=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.t)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_2__.a)(this._tmpSphere),this._boundingSphere.center,i),this._tmpSphere[3]=this._boundingSphere.radius*(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__.maxScale)(i),s.setVec(t,this._tmpSphere),this.add([t])}removeInstance(t){this.remove([t])}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LevelSelector: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LodComponentData: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../support/buffer/glUtil.js */ "./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js");
/* harmony import */ var _DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../DefaultVertexAttributeLocations.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js");
/* harmony import */ var _GLMaterials_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../GLMaterials.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js");
/* harmony import */ var _VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../VertexArrayObject.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js");
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../webgl/BufferObject.js */ "./node_modules/@arcgis/core/views/webgl/BufferObject.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a{constructor(a,n){const m=a.renderContext.rctx,u=n.geometry,f=n.geometry.getRenderGeometry(),g=f.material;this._materials=a.materials,g.setParameters({instancedDoublePrecision:!0}),this.geometry=u,this.material=g,this.glMaterials=new _GLMaterials_js__WEBPACK_IMPORTED_MODULE_2__.GLMaterials(g,this._materials),this.vertexBufferLayout=f.vertexBufferLayout,this.vbo=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_4__.BufferObject.createVertex(m,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__.Usage.STATIC_DRAW,f.buffer),this.vao=new _VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_3__.VertexArrayObject(m,_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_1__.Default3D,new Map([["geometry",(0,_support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_0__.glLayout)(f.vertexBufferLayout)]]),new Map([["geometry",this.vbo]])),this.vertexCount=f.elementCount}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}get usedMemory(){return 128+this.vbo.usedMemory+this.vao.usedMemory}intersect(e,t,r,o,s,i,a,n){return this.geometry.intersect(e,t,r,o,s,i,a,n)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LodLevel: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _LodComponentData_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./LodComponentData.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map((o=>e.controller.schedule((()=>new _LodComponentData_js__WEBPACK_IMPORTED_MODULE_4__.LodComponentData(e,o)),i)))),c=s.map((o=>"fulfilled"===o.status?o.value:null)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome);if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isAborted)(i)||c.length!==s.length){c.forEach((o=>o.destroy())),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAborted)(i);for(const o of s)if("rejected"===o.status)throw o.reason}return new a(r.minScreenSpaceRadius,c)}constructor(o,n){this.minScreenSpaceRadius=o,this.components=n}destroy(){this.components.forEach((o=>o.destroy()))}intersect(o,n,t,e,r,i,s){this.components.forEach((c=>c.intersect(o,n,t,e,r,i,this.boundingSphere,s)))}get boundingBox(){if(null==this._boundingBox){const o=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.empty)();this.components.forEach((n=>{null!=n.boundingInfo&&((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.expandWithVec3)(o,n.boundingInfo.bbMin),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.expandWithVec3)(o,n.boundingInfo.bbMax))})),this._boundingBox=o}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const o=this.boundingBox,n=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.create)();(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.center)(o,n),this._boundingSphere={center:n,radius:.5*(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.diameter)(o)}}return this._boundingSphere}get triangleCount(){return this.components.reduce(((o,n)=>o+n.triangleCount),0)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LodRenderer: () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/mat4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/vec4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../support/debugFlags.js */ "./node_modules/@arcgis/core/views/3d/support/debugFlags.js");
/* harmony import */ var _support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../support/buffer/glUtil.js */ "./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js");
/* harmony import */ var _support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../support/buffer/InterleavedLayout.js */ "./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js");
/* harmony import */ var _webgl_RenderCamera_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../webgl/RenderCamera.js */ "./node_modules/@arcgis/core/views/3d/webgl/RenderCamera.js");
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../core/shaderLibrary/ShaderOutput.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js");
/* harmony import */ var _effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../effects/RenderPlugin.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js");
/* harmony import */ var _DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../DefaultVertexAttributeLocations.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js");
/* harmony import */ var _DepthRange_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../DepthRange.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DepthRange.js");
/* harmony import */ var _IntersectorType_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../IntersectorType.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorType.js");
/* harmony import */ var _Octree_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../Octree.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js");
/* harmony import */ var _RenderSlot_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../RenderSlot.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js");
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../Util.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../VertexAttribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");
/* harmony import */ var _InstanceData_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./InstanceData.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js");
/* harmony import */ var _InstanceOctree_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./InstanceOctree.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js");
/* harmony import */ var _LevelSelector_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./LevelSelector.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js");
/* harmony import */ var _LodLevel_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./LodLevel.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js");
/* harmony import */ var _RenderInstanceData_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./RenderInstanceData.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js");
/* harmony import */ var _materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../materials/internal/MaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js");
/* harmony import */ var _materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../materials/renderers/utils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js");
/* harmony import */ var _shaders_DefaultMaterialTechnique_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../shaders/DefaultMaterialTechnique.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js");
/* harmony import */ var _support_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../../support/HighlightDefaults.js */ "./node_modules/@arcgis/core/views/support/HighlightDefaults.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/* harmony import */ var _webgl_Util_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../../webgl/Util.js */ "./node_modules/@arcgis/core/views/webgl/Util.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const z=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map((e=>e.minScreenSpaceRadius));return new _LevelSelector_js__WEBPACK_IMPORTED_MODULE_29__.LevelSelector(t,r)};let k=class extends _effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_19__.AsyncRenderPlugin{constructor(e,t){super(e),this.type=_IntersectorType_js__WEBPACK_IMPORTED_MODULE_22__.IntersectorType.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=new Array,this._highlightRenderInstanceDataMap=new Map,this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new _webgl_RenderCamera_js__WEBPACK_IMPORTED_MODULE_17__["default"],this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[_RenderSlot_js__WEBPACK_IMPORTED_MODULE_24__.RenderSlot.OPAQUE_MATERIAL,e=>this._produces(e)],[_RenderSlot_js__WEBPACK_IMPORTED_MODULE_24__.RenderSlot.TRANSPARENT_MATERIAL,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new _InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.InstanceData({shaderTransformation:e.shaderTransformation},e.optionalFields),this.addHandles(t.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_36__.TaskPriority.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=Y(this.optionalFields),this._glInstanceBufferLayout=(0,_support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_15__.glLayout)(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on("instances-changed",(()=>this._requestUpdateCycle())),this._instanceData.events.on("instance-transform-changed",(({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)})),this._instanceData.events.on("instance-visibility-changed",(({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)})),this._instanceData.events.on("instance-highlight-changed",(()=>this._requestUpdateCycle(!0)))])}get _allRenderInstanceData(){return[this._defaultRenderInstanceData,...this._highlightRenderInstanceDataMap.values()]}get _allRenderInstanceDataExceptHighlightShadow(){const e=[this._defaultRenderInstanceData];for(const t of this._highlightRenderInstanceDataMap)t[0]!==_support_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_35__.defaultHighlightName&&e.push(t[1]);return e}hasHighlight(e){return this._highlightRenderInstanceDataMap.has(e)}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerViewUid(){return this.metadata.layerViewUid}get instanceData(){return this._instanceData}get hasEmissions(){return this._levels.some((e=>e.components.some((e=>e.material.hasEmissions))))}get usedMemory(){return this._allRenderInstanceData.reduce(((e,t)=>t.reduce(((e,t)=>e+t.usedMemory),e)),this._levels.reduce(((e,t)=>e+t.components.reduce(((e,t)=>e+t.usedMemory),0)),0))}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,r)=>{const n=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,s=e.triangleCount;t.push({renderedInstances:n,renderedTriangles:n*s,trianglesPerInstance:s})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}_createRenderInstanceDataArray(e=[]){const{rctx:t}=this._context.renderContext;return this.symbol.levels.map((r=>{e.push(new _RenderInstanceData_js__WEBPACK_IMPORTED_MODULE_31__.RenderInstanceData(t,this._instanceBufferLayout))})),e}async initializeRenderContext(e,r){this._context=e,this._createRenderInstanceDataArray(this._defaultRenderInstanceData);const n=await Promise.allSettled(this.symbol.levels.map((t=>_LodLevel_js__WEBPACK_IMPORTED_MODULE_30__.LodLevel.create(e,t,r)))),s=n.map((e=>"fulfilled"===e.status?e.value:null)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.isSome);if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAborted)(r)||s.length!==n.length){s.forEach((e=>e.destroy())),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(r);for(const e of n)if("rejected"===e.status)throw e.reason}this._levels=s,this._levelSelector=z(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData.forEach((e=>e.destroy())),this._highlightRenderInstanceDataMap.forEach((e=>e.forEach((e=>e.destroy()))))}_hasTransparentLevels(){return this._levels.some((e=>e.components.some((e=>{const t=e.material.produces.get(_RenderSlot_js__WEBPACK_IMPORTED_MODULE_24__.RenderSlot.TRANSPARENT_MATERIAL);return t?.(_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.Color)}))))}hasHighlights(){return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_3__.someMap)(this._highlightRenderInstanceDataMap,(e=>e.some((e=>e.size>0))))}_produces(e){return(e!==_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.Highlight||this.hasHighlights())&&(e!==_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.ShadowHighlight||this.hasHighlight(_support_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_35__.defaultHighlightName))}prepareRender(e){if(!_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_14__.debugFlags.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bind.contentCamera.equals(this._camera);this._camera.copyFrom(e.bind.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_36__.noBudget),this._needFullCycle=!1)}}acquireTechniques(e){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e);if(!t)return null;const r=new Array,n=this.levels;return t.forEach((t=>n.forEach((({components:n},s)=>n.forEach((n=>r.push(this._beginComponent(e,t[s],n)))))))),r}render(e,t){const r=this._getInstanceDatas(e);if(!r||null==t)return;let n=0;e.rctx.bindVAO();const s=this.levels;r.forEach((r=>s.forEach((({components:s},a)=>s.forEach((s=>this._renderComponent(e,t[n++],r[a],s,a)))))))}_getInstanceDatas(e){const{output:t,bind:r}=e,n=t===_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.Highlight,s=t===_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.ShadowHighlight,a=!n&&!s,i=t!==_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.ShadowExcludeHighlight;if(a)return i?this._allRenderInstanceData:this._allRenderInstanceDataExceptHighlightShadow;const{_highlightRenderInstanceDataMap:o}=this;if(i){if(n){const e=r.highlight?.name;if(!e)return null;const t=o.get(e);return t?[t]:null}const e=o.get(_support_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_35__.defaultHighlightName);return s?e?[e]:null:Array.from(o.values())}return null}intersect(e,t,r,n){if(!this.baseMaterial.visible||null==this._octree)return;const s=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.create)();(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.d)(s,n,r);const a=s=>{this._instanceData.getCombinedModelTransform(s,Z),e.transform.set(Z),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.t)($,r,e.transform.inverse),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.t)(X,n,e.transform.inverse);const a=this._instanceData.getState(s),i=this._instanceData.getLodLevel(s),o=this._levels.length;(0,_Util_js__WEBPACK_IMPORTED_MODULE_25__.assert)(0!==(a&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ACTIVE),"invalid instance state"),(0,_Util_js__WEBPACK_IMPORTED_MODULE_25__.assert)(i>=0&&i<o,"invaid lod level"),this._levels[i].intersect(e,t,$,X,s,this.metadata,o)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(a):this._octree.forEachAlongRay(r,s,a)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new _InstanceOctree_js__WEBPACK_IMPORTED_MODULE_28__.InstanceOctree(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)t.get(r)&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ACTIVE&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return new _DepthRange_js__WEBPACK_IMPORTED_MODULE_21__.DepthRange;const t=e.viewForward,r=this._octree.findClosest(t,_Octree_js__WEBPACK_IMPORTED_MODULE_23__["default"].DepthOrder.FRONT_TO_BACK,e.frustum),n=this._octree.findClosest(t,_Octree_js__WEBPACK_IMPORTED_MODULE_23__["default"].DepthOrder.BACK_TO_FRONT,e.frustum);if(null==r||null==n)return new _DepthRange_js__WEBPACK_IMPORTED_MODULE_21__.DepthRange;const s=e.eye,a=this._instanceData.view;a.boundingSphere.getVec(r,Q),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.d)(Q,Q,s);const i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.e)(Q,t)-Q[3];a.boundingSphere.getVec(n,Q),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.d)(Q,Q,s);const o=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_11__.e)(Q,t)+Q[3];return new _DepthRange_js__WEBPACK_IMPORTED_MODULE_21__.DepthRange(i,o)}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.startUpdateCycle()))))}get running(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:n,_levelSelector:a}=this;this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.beginUpdate()))));const i=this._instanceData,o=i.view;let l=i.size;const c=i.capacity;let h=this._instanceIndex;const d=Math.ceil(c/500),{_highlightRenderInstanceDataMap:u}=this;for(let m=0;m<l&&!e.done;++m){h===this._cycleStartIndex&&this._startUpdateCycle();const m=o.state.get(h);let p=0;if(!(m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ALLOCATED)){h=h+1===c?0:h+1,l++;continue}const f=o.lodLevel.get(h);if(m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[f].freeTail(),m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.HIGHLIGHT_ACTIVE){const e=i.geHighlightOptionsPrev(h);if(e){const t=u.get(e);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("internal:lod-renderer","Internal error in lodRenderer");t[f].freeTail(),t.every((e=>e.isEmpty))&&(t.forEach((e=>e.destroy())),u.delete(e))}}if(m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.REMOVE)i.freeInstance(h);else if(m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.VISIBLE){let e=0;if(t&&(o.modelOrigin.getVec(h,J),e=a.selectLevel(J,i.getCombinedMedianScaleFactor(h),n)),p=m&~(_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ACTIVE|_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.TRANSFORM_CHANGED),e>=0)if(m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.HIGHLIGHT){const t=i.getHighlightName(h);if(t){const n=()=>{const e=this._createRenderInstanceDataArray();return e.forEach((e=>e.beginUpdate())),e},a=(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_3__.getOrCreateMapValue)(u,t,n);if(e>=a.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("internal:lod-renderer",`LodRenderer internal error - missing lodLevel ${e}`);W(a[e],o,h)}p|=_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.HIGHLIGHT_ACTIVE}else W(this._defaultRenderInstanceData[e],o,h),p|=_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.DEFAULT_ACTIVE;o.state.set(h,p),o.lodLevel.set(h,e)}else p=m&~(_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ACTIVE|_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.TRANSFORM_CHANGED),o.state.set(h,p);if(null!=this._octreeCached){const e=!!(m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ACTIVE),t=!!(p&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.ACTIVE);!e&&t?this._octreeCached.addInstance(h):e&&!t?this._octreeCached.removeInstance(h):e&&t&&m&_InstanceData_js__WEBPACK_IMPORTED_MODULE_27__.StateFlags.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(h),this._octreeCached.addInstance(h))}h=h+1===c?0:h+1,h%d===0&&e.madeProgress()}this._instanceIndex=h,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.endUpdate())))),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const n=r.glMaterials.load(e.rctx,e.bind.slot,e.output);return n?.beginSlot(e.bind)}_renderComponent(e,t,r,n,s){if(!t)return;const{bind:a,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,a,n.material.parameters,te);i.bindVAO(n.vao),t.ensureAttributeLocations(n.vao),_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_14__.debugFlags.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&e.output===_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_18__.ShaderOutput.Color&&(o.setUniform4fv("externalColor",ee[Math.min(s,ee.length-1)]),o.setUniform1i("colorMixMode",_materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_32__.colorMixModes.replace));const l=r.capacity,c=r.headIndex,h=r.tailIndex,d=r.firstIndex,u=this._glInstanceBufferLayout,m=(e,s)=>{(0,_webgl_Util_js__WEBPACK_IMPORTED_MODULE_37__.bindVertexBufferLayout)(i,_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_20__.Default3D,r.buffer,u,e),i.drawArraysInstanced(t.primitiveType,0,n.vertexCount,s-e),(0,_webgl_Util_js__WEBPACK_IMPORTED_MODULE_37__.unbindVertexBufferLayout)(i,_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_20__.Default3D,r.buffer,u)};n.material.transparent&&null!=d?c>h?((0,_Util_js__WEBPACK_IMPORTED_MODULE_25__.assert)(d>=h&&d<=c,"invalid firstIndex"),m(d,c),m(h,d)):c<h&&(d<=c?((0,_Util_js__WEBPACK_IMPORTED_MODULE_25__.assert)(d>=0&&d<=c,"invalid firstIndex"),m(d,c),m(h,l),m(0,d)):((0,_Util_js__WEBPACK_IMPORTED_MODULE_25__.assert)(d>=h&&d<=l,"invalid firstIndex"),m(d,l),m(0,c),m(h,d))):c>h?m(h,c):c<h&&(m(0,c),m(h,l)),i.bindVAO(null)}};function W(e,t,r){const n=e.allocateHead();K(t,r,e.view,n)}function K(e,t,r,n){(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_33__.encodeDoubleVec3)(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,n),r.model.copyFrom(n,e.model,t),r.modelNormal.copyFrom(n,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(n,e.color,t),e.objectAndLayerIdColor&&r.objectAndLayerIdColor&&r.objectAndLayerIdColor.copyFrom(n,e.objectAndLayerIdColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(n,e.featureAttribute,t)}function Y(e){let t=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_16__.newLayout)().vec3f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCEMODELORIGINHI).vec3f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCEMODELORIGINLO).mat3f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCEMODEL).mat3f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCEMODELNORMAL);return null!=e&&e.includes("featureAttribute")&&(t=t.vec4f(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCEFEATUREATTRIBUTE)),null!=e&&e.includes("color")&&(t=t.vec4u8(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCECOLOR)),null!=e&&e.includes("objectAndLayerIdColor")&&(t=t.vec4u8(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_26__.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR)),t}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({constructOnly:!0})],k.prototype,"symbol",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({constructOnly:!0})],k.prototype,"optionalFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({constructOnly:!0})],k.prototype,"metadata",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({constructOnly:!0})],k.prototype,"shaderTransformation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],k.prototype,"_instanceData",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],k.prototype,"_cycleStartIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],k.prototype,"_enableLevelSelection",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],k.prototype,"_updateCyclesWithStaticCamera",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],k.prototype,"running",null),k=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer")],k);const J=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.create)(),Q=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__.create)(),Z=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_10__.create)(),$=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.create)(),X=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.create)(),ee=[(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__.fromValues)(1,0,1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__.fromValues)(0,0,1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__.fromValues)(0,1,0,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__.fromValues)(1,1,0,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_13__.fromValues)(1,0,0,1)],te=new _shaders_DefaultMaterialTechnique_js__WEBPACK_IMPORTED_MODULE_34__.DefaultMaterialDrawParameters;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RenderInstanceData: () => (/* binding */ f),
/* harmony export */   RenderInstanceDataView: () => (/* binding */ c),
/* harmony export */   initialCapacity: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../geometry/support/buffer/BufferView.js */ "./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js");
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Util.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js");
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../VertexAttribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");
/* harmony import */ var _BackedBufferObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./BackedBufferObject.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c{constructor(t){this.modelOriginHi=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCEMODELORIGINHI,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewVec3f),this.modelOriginLo=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCEMODELORIGINLO,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewVec3f),this.model=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCEMODEL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewMat3f),this.modelNormal=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCEMODELNORMAL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewMat3f),this.featureAttribute=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCEFEATUREATTRIBUTE,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewVec4f),this.color=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCECOLOR,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewVec4u8),this.objectAndLayerIdColor=t.getField(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__.BufferViewVec4u8)}}class f{constructor(t,i){this._rctx=t,this._instanceBufferLayout=i,this._headIndex=0,this._tailIndex=0,this._firstIndex=null,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const t=this._headIndex,i=this._tailIndex;return t>=i?t-i:t+this._capacity-i}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(!this._updating,"already updating"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._updating,"not updating"),this.size<_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.reallocShrinkThreshold*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._updating,"not updating"),this.isFull&&this._grow();const t=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=t,this._captureFirstIndex=!1),this._incrementHead(),(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._headIndex!==this._tailIndex,"invalid pointers"),t}freeTail(){(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._updating,"not updating"),(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.size>0,"invalid size");const t=this._tailIndex===this._firstIndex;this._incrementTail(),t&&(this._firstIndex=this._tailIndex)}_grow(){const t=Math.max(u,Math.floor(this._capacity*_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.reallocGrowthFactor));this._resize(t)}_shrink(){const t=Math.max(u,Math.floor(this._capacity*_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.reallocShrinkFactor));this._resize(t)}_resize(t){if((0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._updating,"not updating"),t===this._capacity)return;const i=new _BackedBufferObject_js__WEBPACK_IMPORTED_MODULE_4__["default"](this._rctx,this._instanceBufferLayout.stride,t);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const t=this.size,e=this._compactInstances(i);(0,_Util_js__WEBPACK_IMPORTED_MODULE_2__.assert)(e===t,"invalid compaction"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=e,this._prevHeadIndex=0}this._resized=!0,this._capacity=t,this._buffer=i,this._view=new c(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(t){const i=this._headIndex,e=this._tailIndex;return e<i?(this._buffer.copyRange(e,i,t),i-e):e>i?(this._buffer.copyRange(e,this._capacity,t),i>0&&this._buffer.copyRange(0,i,t,this._capacity-e),i+(this._capacity-e)):0}_incrementHead(t=1){this._headIndex=(this._headIndex+t)%this._capacity}_incrementTail(t=1){this._tailIndex=(this._tailIndex+t)%this._capacity}_transferRange(t,i){t<i?this._buffer.transferRange(t,i):t>i&&(i>0&&this._buffer.transferRange(0,i),this._buffer.transferRange(t,this._capacity))}}const u=64;


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfM2Rfd2ViZ2wtZW5naW5lX2xpYl9sb2RSZW5kZXJpbmdfTG9kUmVuZGVyZXJfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ29ILFFBQVEsbUJBQW1CLGlDQUFpQyxnRUFBQyxnQkFBZ0Isa0RBQUMsNkJBQTZCLFVBQVUsdUJBQXVCLGtCQUFrQix5QkFBeUIsZUFBZSxzQkFBc0IsWUFBWSxtQkFBbUIsYUFBYSxvQkFBb0IsaUJBQWlCLHNEQUFzRCxxQkFBcUIsNkVBQTZFLGtEQUFrRCxjQUFjLGtDQUFrQyxtQkFBbUIsa0RBQWtELDJEQUEyRCxVQUFVLGlEQUFpRCwrTkFBb1A7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKMWtDO0FBQ0E7QUFDQTtBQUNBO0FBQ2s4QyxNQUFNLGNBQWMsTUFBTSxnRkFBQyxXQUFXLGlFQUFDLHlCQUF5QixpRUFBQywwQkFBMEIsaUVBQUMseUJBQXlCLGlFQUFDLG9CQUFvQixpRUFBQyxzQkFBc0IsaUVBQUMsNEJBQTRCLGlFQUFDLG9CQUFvQixrQkFBa0IsaUVBQUMsK0JBQStCLGlFQUFDLCtCQUErQixpRUFBQyxxQkFBcUIsaUVBQUMsb0JBQW9CLGlFQUFDLHlCQUF5QixpRUFBQyxvQkFBb0IsaUVBQUMsV0FBVyxpRUFBQyxhQUFhLGFBQWEsb1FBQW9RLFNBQVMsR0FBRyxRQUFRLGVBQWUsK0JBQStCLGlFQUFDLGdCQUFnQixzRkFBQyxrQ0FBa0MsaUVBQUMsaUJBQWlCLHNGQUFDLDhCQUE4QixpRUFBQyxhQUFhLHNGQUFDLHdCQUF3QixpRUFBQyxlQUFlLG9GQUFDLDhCQUE4QixpRUFBQyxxQkFBcUIsb0ZBQUMsb0NBQW9DLGlFQUFDLG1CQUFtQixvRkFBQyxpQ0FBaUMsaUVBQUMsZ0JBQWdCLHNGQUFDLG1DQUFtQyxpRUFBQyxrQkFBa0Isb0ZBQUMsd0JBQXdCLGlFQUFDLE9B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QUF3QixpQkFBaUIsbUNBQW1DLFFBQVEsMERBQTBELG1CQUFtQiwyQkFBMkIsY0FBYyxnREFBQywyRkFBMkYsWUFBWSxnREFBQywwQ0FBMEMsdUVBQUMsc0tBQXNLLGVBQWUsZ0RBQUMsMERBQTBELHVCQUF1QixzR0FBc0csZ0RBQUMseURBQXlELFdBQVcsZ0RBQUMsZ0NBQWdDLGdEQUFDLDZCQUE2QiwyQ0FBMkMsNERBQTRELFFBQVEsNkNBQTZDLG9FQUFDLEdBQUcsZ0JBQWdCLFVBQVUsNkNBQTZDLG9FQUFDLEdBQUcsZ0JBQWdCLFdBQVcsR0FBRyxnREFBQywwREFBMEQsWUFBWSw4REFBQyxpREFBaUQsaUJBQWlCLHNHQUFzRyw4Q0FBOEMsZ0RBQUMsOEdBQThHLDZIQUE2SCxxQkFBcUIsMENBQTBDLDJLQUEySyxvQkFBb0IsbURBQW1ELG9CQUFvQixtREFBbUQsb0JBQW9CLDhIQUE4SCxXQUE0RiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL2xvZFJlbmRlcmluZy9CYWNrZWRCdWZmZXJPYmplY3QuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvbG9kUmVuZGVyaW5nL0luc3RhbmNlRGF0YS5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9sb2RSZW5kZXJpbmcvSW5zdGFuY2VPY3RyZWUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvbG9kUmVuZGVyaW5nL0xldmVsU2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvbG9kUmVuZGVyaW5nL0xvZENvbXBvbmVudERhdGEuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvbG9kUmVuZGVyaW5nL0xvZExldmVsLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL2xvZFJlbmRlcmluZy9Mb2RSZW5kZXJlci5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9sb2RSZW5kZXJpbmcvUmVuZGVySW5zdGFuY2VEYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7QnVmZmVyT2JqZWN0IGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvQnVmZmVyT2JqZWN0LmpzXCI7aW1wb3J0e1VzYWdlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtjbGFzcyBye2NvbnN0cnVjdG9yKHIsaSxzKXt0aGlzLl9lbGVtZW50U2l6ZT1pLHRoaXMuX2J1ZmZlcj1lLmNyZWF0ZVZlcnRleChyLHQuU1RBVElDX0RSQVcpLHRoaXMucmVzaXplKHMpfWRlc3Ryb3koKXt0aGlzLl9idWZmZXIuZGlzcG9zZSgpfWdldCBlbGVtZW50U2l6ZSgpe3JldHVybiB0aGlzLl9lbGVtZW50U2l6ZX1nZXQgY2FwYWNpdHkoKXtyZXR1cm4gdGhpcy5fY2FwYWNpdHl9Z2V0IGFycmF5KCl7cmV0dXJuIHRoaXMuX2FycmF5fWdldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5fYnVmZmVyfWdldCB1c2VkTWVtb3J5KCl7cmV0dXJuIHRoaXMuX2FycmF5LmJ5dGVMZW5ndGgrdGhpcy5fYnVmZmVyLnVzZWRNZW1vcnl9Y29weVJhbmdlKGUsdCxyLGk9MCl7Y29uc3Qgcz1uZXcgVWludDhBcnJheSh0aGlzLmFycmF5LGUqdGhpcy5lbGVtZW50U2l6ZSwodC1lKSp0aGlzLmVsZW1lbnRTaXplKTtuZXcgVWludDhBcnJheShyLmFycmF5LGkqdGhpcy5lbGVtZW50U2l6ZSkuc2V0KHMpfXRyYW5zZmVyQWxsKCl7dGhpcy5fYnVmZmVyLnNldERhdGEodGhpcy5fYXJyYXkpfXRyYW5zZmVyUmFuZ2UoZSx0KXtjb25zdCByPWUqdGhpcy5fZWxlbWVudFNpemUsaT10KnRoaXMuX2VsZW1lbnRTaXplO3RoaXMuX2J1ZmZlci5zZXRTdWJEYXRhKG5ldyBVaW50OEFycmF5KHRoaXMuX2FycmF5KSxyLHIsaSl9cmVzaXplKGUpe2NvbnN0IHQ9ZSp0aGlzLl9lbGVtZW50U2l6ZSxyPW5ldyBBcnJheUJ1ZmZlcih0KTt0aGlzLl9hcnJheSYmKGU+PXRoaXMuX2NhcGFjaXR5P25ldyBVaW50OEFycmF5KHIpLnNldChuZXcgVWludDhBcnJheSh0aGlzLl9hcnJheSkpOm5ldyBVaW50OEFycmF5KHIpLnNldChuZXcgVWludDhBcnJheSh0aGlzLl9hcnJheSkuc3ViYXJyYXkoMCxlKnRoaXMuX2VsZW1lbnRTaXplKSkpLHRoaXMuX2FycmF5PXIsdGhpcy5fYnVmZmVyLnNldFNpemUodCksdGhpcy5fY2FwYWNpdHk9ZX19ZXhwb3J0e3IgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydHtyZWFsbG9jR3Jvd3RoRmFjdG9yIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9FdmVudGVkLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtmcm9tTWF0NCBhcyBvLGludmVydCBhcyBuLHRyYW5zcG9zZSBhcyBofWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9tYXRoL21hdDMuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy9tYXQzZjY0LmpzXCI7aW1wb3J0e211bHRpcGx5IGFzIGN9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL21hdGgvbWF0NC5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgZ31mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL21hdDRmNjQuanNcIjtpbXBvcnR7aSBhcyBtfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgZn1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzNmNjQuanNcIjtpbXBvcnR7QnVmZmVyVmlld01hdDRmNjQgYXMgZCxCdWZmZXJWaWV3VmVjM2Y2NCBhcyBwLEJ1ZmZlclZpZXdNYXQzZiBhcyBfLEJ1ZmZlclZpZXdWZWMyZiBhcyBULEJ1ZmZlclZpZXdWZWM0ZjY0IGFzIHUsQnVmZmVyVmlld1ZlYzRmIGFzIEwsQnVmZmVyVmlld1ZlYzR1OCBhcyBPLEJ1ZmZlclZpZXdVaW50OCBhcyBBfWZyb21cIi4uLy4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYnVmZmVyL0J1ZmZlclZpZXcuanNcIjtpbXBvcnR7c2NhbGVGcm9tTWF0cml4IGFzIEV9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9tYXRoVXRpbHMuanNcIjtpbXBvcnR7bmV3TGF5b3V0IGFzIHZ9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9idWZmZXIvSW50ZXJsZWF2ZWRMYXlvdXQuanNcIjtpbXBvcnR7YXNzZXJ0IGFzIE19ZnJvbVwiLi4vVXRpbC5qc1wiO2ltcG9ydHtWZXJ0ZXhBdHRyaWJ1dGUgYXMgSX1mcm9tXCIuLi9WZXJ0ZXhBdHRyaWJ1dGUuanNcIjtpbXBvcnR7aW5pdGlhbENhcGFjaXR5IGFzIEZ9ZnJvbVwiLi9SZW5kZXJJbnN0YW5jZURhdGEuanNcIjt2YXIgUztmdW5jdGlvbiBiKHQpe2xldCBlPXYoKS5tYXQ0ZjY0KEkuTE9DQUxUUkFOU0ZPUk0pLm1hdDRmNjQoSS5HTE9CQUxUUkFOU0ZPUk0pLnZlYzRmNjQoSS5CT1VORElOR1NQSEVSRSkudmVjM2Y2NChJLk1PREVMT1JJR0lOKS5tYXQzZihJLklOU1RBTkNFTU9ERUwpLm1hdDNmKEkuSU5TVEFOQ0VNT0RFTE5PUk1BTCkudmVjMmYoSS5NT0RFTFNDQUxFRkFDVE9SUyk7cmV0dXJuIHQuaW5jbHVkZXMoSS5GRUFUVVJFQVRUUklCVVRFKSYmKGU9ZS52ZWM0ZihJLkZFQVRVUkVBVFRSSUJVVEUpKSx0LmluY2x1ZGVzKEkuQ09MT1IpJiYoZT1lLnZlYzR1OChJLkNPTE9SKSksdC5pbmNsdWRlcyhJLk9MSURDT0xPUikmJihlPWUudmVjNHU4KEkuT0xJRENPTE9SKSksZT1lLnU4KEkuU1RBVEUpLnU4KEkuTE9ETEVWRUwpLGV9IWZ1bmN0aW9uKHQpe3RbdC5BTExPQ0FURUQ9MV09XCJBTExPQ0FURURcIix0W3QuREVGQVVMVF9BQ1RJVkU9Ml09XCJERUZBVUxUX0FDVElWRVwiLHRbdC5WSVNJQkxFPTRdPVwiVklTSUJMRVwiLHRbdC5ISUdITElHSFQ9OF09XCJISUdITElHSFRcIix0W3QuSElHSExJR0hUX0FDVElWRT0xNl09XCJISUdITElHSFRfQUNUSVZFXCIsdFt0LlJFTU9WRT0zMl09XCJSRU1PVkVcIix0W3QuVFJBTlNGT1JNX0NIQU5HRUQ9NjRdPVwiVFJBTlNGT1JNX0NIQU5HRURcIix0W3QuQUNUSVZFPTE4XT1cIkFDVElWRVwifShTfHwoUz17fSkpO2NsYXNzIEN7Y29uc3RydWN0b3IodCl7dGhpcy5sb2NhbFRyYW5zZm9ybT10LmdldEZpZWxkKEkuTE9DQUxUUkFOU0ZPUk0sZCksdGhpcy5nbG9iYWxUcmFuc2Zvcm09dC5nZXRGaWVsZChJLkdMT0JBTFRSQU5TRk9STSxkKSx0aGlzLm1vZGVsT3JpZ2luPXQuZ2V0RmllbGQoSS5NT0RFTE9SSUdJTixwKSx0aGlzLm1vZGVsPXQuZ2V0RmllbGQoSS5JTlNUQU5DRU1PREVMLF8pLHRoaXMubW9kZWxOb3JtYWw9dC5nZXRGaWVsZChJLklOU1RBTkNFTU9ERUxOT1JNQUwsXyksdGhpcy5tb2RlbFNjYWxlRmFjdG9ycz10LmdldEZpZWxkKEkuTU9ERUxTQ0FMRUZBQ1RPUlMsVCksdGhpcy5ib3VuZGluZ1NwaGVyZT10LmdldEZpZWxkKEkuQk9VTkRJTkdTUEhFUkUsdSksdGhpcy5mZWF0dXJlQXR0cmlidXRlPXQuZ2V0RmllbGQoSS5GRUFUVVJFQVRUUklCVVRFLEwpLHRoaXMuY29sb3I9dC5nZXRGaWVsZChJLkNPTE9SLE8pLHRoaXMub2JqZWN0QW5kTGF5ZXJJZENvbG9yPXQuZ2V0RmllbGQoSS5PTElEQ09MT1IsTyksdGhpcy5zdGF0ZT10LmdldEZpZWxkKEkuU1RBVEUsQSksdGhpcy5sb2RMZXZlbD10LmdldEZpZWxkKEkuTE9ETEVWRUwsQSl9fWxldCBSPWNsYXNzIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQpLHRoaXMuZXZlbnRzPW5ldyBpLHRoaXMuX2NhcGFjaXR5PTAsdGhpcy5fc2l6ZT0wLHRoaXMuX25leHQ9MCx0aGlzLl9oaWdobGlnaHRPcHRpb25zTWFwPW5ldyBNYXAsdGhpcy5faGlnaGxpZ2h0T3B0aW9uc01hcFByZXY9bmV3IE1hcCx0aGlzLl9sYXlvdXQ9YihlKSx0aGlzLl9jYXBhY2l0eT1GLHRoaXMuX2J1ZmZlcj10aGlzLl9sYXlvdXQuY3JlYXRlQnVmZmVyKHRoaXMuX2NhcGFjaXR5KSx0aGlzLl92aWV3PW5ldyBDKHRoaXMuX2J1ZmZlcil9Z2V0IGNhcGFjaXR5KCl7cmV0dXJuIHRoaXMuX2NhcGFjaXR5fWdldCBzaXplKCl7cmV0dXJuIHRoaXMuX3NpemV9Z2V0IHZpZXcoKXtyZXR1cm4gdGhpcy5fdmlld31hZGRJbnN0YW5jZSgpe3RoaXMuX3NpemUrMT50aGlzLl9jYXBhY2l0eSYmdGhpcy5fZ3JvdygpO2NvbnN0IHQ9dGhpcy5fZmluZFNsb3QoKTtyZXR1cm4gdGhpcy5fdmlldy5zdGF0ZS5zZXQodCxTLkFMTE9DQVRFRCksdGhpcy5fc2l6ZSsrLHRoaXMuZXZlbnRzLmVtaXQoXCJpbnN0YW5jZXMtY2hhbmdlZFwiKSx0fXJlbW92ZUluc3RhbmNlKHQpe2NvbnN0IGU9dGhpcy5fdmlldy5zdGF0ZTtNKHQ+PTAmJnQ8dGhpcy5fY2FwYWNpdHkmJjAhPT0oZS5nZXQodCkmUy5BTExPQ0FURUQpLFwiaW52YWxpZCBpbnN0YW5jZSBoYW5kbGVcIiksdGhpcy5fZ2V0U3RhdGVGbGFnKHQsUy5BQ1RJVkUpP3RoaXMuX3NldFN0YXRlRmxhZ3ModCxTLlJFTU9WRSk6dGhpcy5mcmVlSW5zdGFuY2UodCksdGhpcy5ldmVudHMuZW1pdChcImluc3RhbmNlcy1jaGFuZ2VkXCIpfWZyZWVJbnN0YW5jZSh0KXtjb25zdCBlPXRoaXMuX3ZpZXcuc3RhdGU7TSh0Pj0wJiZ0PHRoaXMuX2NhcGFjaXR5JiYwIT09KGUuZ2V0KHQpJlMuQUxMT0NBVEVEKSxcImludmFsaWQgaW5zdGFuY2UgaGFuZGxlXCIpLGUuc2V0KHQsMCksdGhpcy5fc2l6ZS0tfXNldExvY2FsVHJhbnNmb3JtKHQsZSxzPSEwKXt0aGlzLl92aWV3LmxvY2FsVHJhbnNmb3JtLnNldE1hdCh0LGUpLHMmJnRoaXMudXBkYXRlTW9kZWxUcmFuc2Zvcm0odCl9Z2V0TG9jYWxUcmFuc2Zvcm0odCxlKXt0aGlzLl92aWV3LmxvY2FsVHJhbnNmb3JtLmdldE1hdCh0LGUpfXNldEdsb2JhbFRyYW5zZm9ybSh0LGUscz0hMCl7dGhpcy5fdmlldy5nbG9iYWxUcmFuc2Zvcm0uc2V0TWF0KHQsZSkscyYmdGhpcy51cGRhdGVNb2RlbFRyYW5zZm9ybSh0KX1nZXRHbG9iYWxUcmFuc2Zvcm0odCxlKXt0aGlzLl92aWV3Lmdsb2JhbFRyYW5zZm9ybS5nZXRNYXQodCxlKX11cGRhdGVNb2RlbFRyYW5zZm9ybSh0KXtjb25zdCBlPXRoaXMuX3ZpZXcscz15LGk9SDtlLmxvY2FsVHJhbnNmb3JtLmdldE1hdCh0LE4pLGUuZ2xvYmFsVHJhbnNmb3JtLmdldE1hdCh0LEQpO2NvbnN0IGE9YyhELEQsTik7bShzLGFbMTJdLGFbMTNdLGFbMTRdKSxlLm1vZGVsT3JpZ2luLnNldFZlYyh0LHMpLG8oaSxhKSxlLm1vZGVsLnNldE1hdCh0LGkpO2NvbnN0IHI9RSh5LGEpO3Iuc29ydCgpLGUubW9kZWxTY2FsZUZhY3RvcnMuc2V0KHQsMCxyWzFdKSxlLm1vZGVsU2NhbGVGYWN0b3JzLnNldCh0LDEsclsyXSksbihpLGkpLGgoaSxpKSxlLm1vZGVsTm9ybWFsLnNldE1hdCh0LGkpLHRoaXMuX3NldFN0YXRlRmxhZ3ModCxTLlRSQU5TRk9STV9DSEFOR0VEKSx0aGlzLmV2ZW50cy5lbWl0KFwiaW5zdGFuY2UtdHJhbnNmb3JtLWNoYW5nZWRcIix7aW5kZXg6dH0pfWdldE1vZGVsVHJhbnNmb3JtKHQsZSl7Y29uc3Qgcz10aGlzLl92aWV3O3MubW9kZWwuZ2V0TWF0KHQsSCkscy5tb2RlbE9yaWdpbi5nZXRWZWModCx5KSxlWzBdPUhbMF0sZVsxXT1IWzFdLGVbMl09SFsyXSxlWzNdPTAsZVs0XT1IWzNdLGVbNV09SFs0XSxlWzZdPUhbNV0sZVs3XT0wLGVbOF09SFs2XSxlWzldPUhbN10sZVsxMF09SFs4XSxlWzExXT0wLGVbMTJdPXlbMF0sZVsxM109eVsxXSxlWzE0XT15WzJdLGVbMTVdPTF9YXBwbHlTaGFkZXJUcmFuc2Zvcm1hdGlvbih0LGUpe251bGwhPXRoaXMuc2hhZGVyVHJhbnNmb3JtYXRpb24mJnRoaXMuc2hhZGVyVHJhbnNmb3JtYXRpb24uYXBwbHlUcmFuc2Zvcm0odGhpcyx0LGUpfWdldENvbWJpbmVkTW9kZWxUcmFuc2Zvcm0odCxlKXtyZXR1cm4gdGhpcy5nZXRNb2RlbFRyYW5zZm9ybSh0LGUpLG51bGwhPXRoaXMuc2hhZGVyVHJhbnNmb3JtYXRpb24mJnRoaXMuc2hhZGVyVHJhbnNmb3JtYXRpb24uYXBwbHlUcmFuc2Zvcm0odGhpcyx0LGUpLGV9Z2V0Q29tYmluZWRMb2NhbFRyYW5zZm9ybSh0LGUpe3RoaXMuX3ZpZXcubG9jYWxUcmFuc2Zvcm0uZ2V0TWF0KHQsZSksbnVsbCE9dGhpcy5zaGFkZXJUcmFuc2Zvcm1hdGlvbiYmdGhpcy5zaGFkZXJUcmFuc2Zvcm1hdGlvbi5hcHBseVRyYW5zZm9ybSh0aGlzLHQsZSl9Z2V0Q29tYmluZWRNYXhTY2FsZUZhY3Rvcih0KXtsZXQgZT10aGlzLl92aWV3Lm1vZGVsU2NhbGVGYWN0b3JzLmdldCh0LDEpO3JldHVybiBudWxsIT10aGlzLnNoYWRlclRyYW5zZm9ybWF0aW9uJiYodGhpcy5zaGFkZXJUcmFuc2Zvcm1hdGlvbi5zY2FsZUZhY3Rvcih5LHRoaXMsdCksZSo9TWF0aC5tYXgoeVswXSx5WzFdLHlbMl0pKSxlfWdldENvbWJpbmVkTWVkaWFuU2NhbGVGYWN0b3IodCl7bGV0IGU9dGhpcy5fdmlldy5tb2RlbFNjYWxlRmFjdG9ycy5nZXQodCwwKTtyZXR1cm4gbnVsbCE9dGhpcy5zaGFkZXJUcmFuc2Zvcm1hdGlvbiYmKHRoaXMuc2hhZGVyVHJhbnNmb3JtYXRpb24uc2NhbGVGYWN0b3IoeSx0aGlzLHQpLGUqPXcoeVswXSx5WzFdLHlbMl0pKSxlfWdldE1vZGVsKHQsZSl7dGhpcy5fdmlldy5tb2RlbC5nZXRNYXQodCxlKX1zZXRGZWF0dXJlQXR0cmlidXRlKHQsZSl7dGhpcy5fdmlldy5mZWF0dXJlQXR0cmlidXRlLnNldFZlYyh0LGUpfWdldEZlYXR1cmVBdHRyaWJ1dGUodCxlKXt0aGlzLl92aWV3LmZlYXR1cmVBdHRyaWJ1dGUuZ2V0VmVjKHQsZSl9c2V0Q29sb3IodCxlKXt0aGlzLl92aWV3LmNvbG9yLnNldFZlYyh0LGUpfXNldE9iamVjdEFuZExheWVySWRDb2xvcih0LGUpe3RoaXMuX3ZpZXcub2JqZWN0QW5kTGF5ZXJJZENvbG9yLnNldFZlYyh0LGUpfXNldFZpc2libGUodCxlKXtlIT09dGhpcy5nZXRWaXNpYmxlKHQpJiYodGhpcy5fc2V0U3RhdGVGbGFnKHQsUy5WSVNJQkxFLGUpLHRoaXMuZXZlbnRzLmVtaXQoXCJpbnN0YW5jZS12aXNpYmlsaXR5LWNoYW5nZWRcIix7aW5kZXg6dH0pKX1nZXRWaXNpYmxlKHQpe3JldHVybiB0aGlzLl9nZXRTdGF0ZUZsYWcodCxTLlZJU0lCTEUpfXNldEhpZ2hsaWdodCh0LGUpe2NvbnN0e19oaWdobGlnaHRPcHRpb25zTWFwOnN9PXRoaXMsaT1zLmdldCh0KTtlP2UhPT1pJiYocy5zZXQodCxlKSx0aGlzLl9zZXRTdGF0ZUZsYWcodCxTLkhJR0hMSUdIVCwhMCksdGhpcy5ldmVudHMuZW1pdChcImluc3RhbmNlLWhpZ2hsaWdodC1jaGFuZ2VkXCIpKTppJiYocy5kZWxldGUodCksdGhpcy5fc2V0U3RhdGVGbGFnKHQsUy5ISUdITElHSFQsITEpLHRoaXMuZXZlbnRzLmVtaXQoXCJpbnN0YW5jZS1oaWdobGlnaHQtY2hhbmdlZFwiKSl9Z2V0IGhpZ2hsaWdodE9wdGlvbnNNYXAoKXtyZXR1cm4gdGhpcy5faGlnaGxpZ2h0T3B0aW9uc01hcH1nZXRIaWdobGlnaHRTdGF0ZUZsYWcodCl7cmV0dXJuIHRoaXMuX2dldFN0YXRlRmxhZyh0LFMuSElHSExJR0hUKX1nZUhpZ2hsaWdodE9wdGlvbnNQcmV2KHQpe2NvbnN0IGU9dGhpcy5faGlnaGxpZ2h0T3B0aW9uc01hcFByZXYuZ2V0KHQpPz9udWxsO3JldHVybiB0aGlzLl9oaWdobGlnaHRPcHRpb25zTWFwUHJldi5kZWxldGUodCksZX1nZXRIaWdobGlnaHROYW1lKHQpe2NvbnN0IGU9dGhpcy5oaWdobGlnaHRPcHRpb25zTWFwLmdldCh0KT8/bnVsbDtyZXR1cm4gZT90aGlzLl9oaWdobGlnaHRPcHRpb25zTWFwUHJldi5zZXQodCxlKTp0aGlzLl9oaWdobGlnaHRPcHRpb25zTWFwUHJldi5kZWxldGUodCksZX1nZXRTdGF0ZSh0KXtyZXR1cm4gdGhpcy5fdmlldy5zdGF0ZS5nZXQodCl9Z2V0TG9kTGV2ZWwodCl7cmV0dXJuIHRoaXMuX3ZpZXcubG9kTGV2ZWwuZ2V0KHQpfWNvdW50RmxhZ3ModCl7bGV0IGU9MDtmb3IobGV0IHM9MDtzPHRoaXMuX2NhcGFjaXR5Oysrcyl7dGhpcy5nZXRTdGF0ZShzKSZ0JiYrK2V9cmV0dXJuIGV9X3NldFN0YXRlRmxhZ3ModCxlKXtjb25zdCBzPXRoaXMuX3ZpZXcuc3RhdGU7ZT1zLmdldCh0KXxlLHMuc2V0KHQsZSl9X2NsZWFyU3RhdGVGbGFncyh0LGUpe2NvbnN0IHM9dGhpcy5fdmlldy5zdGF0ZTtlPXMuZ2V0KHQpJn5lLHMuc2V0KHQsZSl9X3NldFN0YXRlRmxhZyh0LGUscyl7cz90aGlzLl9zZXRTdGF0ZUZsYWdzKHQsZSk6dGhpcy5fY2xlYXJTdGF0ZUZsYWdzKHQsZSl9X2dldFN0YXRlRmxhZyh0LGUpe3JldHVybiEhKHRoaXMuX3ZpZXcuc3RhdGUuZ2V0KHQpJmUpfV9ncm93KCl7dGhpcy5fY2FwYWNpdHk9TWF0aC5tYXgoRixNYXRoLmZsb29yKHRoaXMuX2NhcGFjaXR5KnMpKSx0aGlzLl9idWZmZXI9dGhpcy5fbGF5b3V0LmNyZWF0ZUJ1ZmZlcih0aGlzLl9jYXBhY2l0eSkuY29weUZyb20odGhpcy5fYnVmZmVyKSx0aGlzLl92aWV3PW5ldyBDKHRoaXMuX2J1ZmZlcil9X2ZpbmRTbG90KCl7Y29uc3QgdD10aGlzLl92aWV3LnN0YXRlO2xldCBlPXRoaXMuX25leHQ7Zm9yKDt0LmdldChlKSZTLkFMTE9DQVRFRDspZT1lKzE9PT10aGlzLl9jYXBhY2l0eT8wOmUrMTtyZXR1cm4gdGhpcy5fbmV4dD1lKzE9PT10aGlzLl9jYXBhY2l0eT8wOmUrMSxlfX07ZnVuY3Rpb24gdyh0LGUscyl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHQsZSksTWF0aC5taW4oTWF0aC5tYXgodCxlKSxzKSl9dChbYSh7Y29uc3RydWN0T25seTohMH0pXSxSLnByb3RvdHlwZSxcInNoYWRlclRyYW5zZm9ybWF0aW9uXCIsdm9pZCAwKSx0KFthKCldLFIucHJvdG90eXBlLFwiX3NpemVcIix2b2lkIDApLHQoW2Eoe3JlYWRPbmx5OiEwfSldLFIucHJvdG90eXBlLFwic2l6ZVwiLG51bGwpLFI9dChbcihcImVzcmkudmlld3MuM2Qud2ViZ2wtZW5naW5lLmxpYi5sb2RSZW5kZXJpbmcuSW5zdGFuY2VEYXRhXCIpXSxSKTtjb25zdCB5PWYoKSxIPWwoKSxOPWcoKSxEPWcoKTtleHBvcnR7UiBhcyBJbnN0YW5jZURhdGEsQyBhcyBJbnN0YW5jZURhdGFWaWV3LFMgYXMgU3RhdGVGbGFnc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvbWF0NGY2NC5qc1wiO2ltcG9ydHt0IGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzMyLmpzXCI7aW1wb3J0e3cgYXMgcyxjIGFzIGksYSBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnR7bWF4U2NhbGUgYXMgYX1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L21hdGhVdGlscy5qc1wiO2ltcG9ydCBoIGZyb21cIi4uL09jdHJlZS5qc1wiO2NsYXNzIG4gZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUscil7c3VwZXIoKHQ9PnModGhpcy5faW5zdGFuY2VEYXRhLnZpZXcuYm91bmRpbmdTcGhlcmUuZ2V0VmVjKHQsdGhpcy5fdG1wU3BoZXJlKSkpLHttYXhpbXVtRGVwdGg6MjV9KSx0aGlzLl9pbnN0YW5jZURhdGE9ZSx0aGlzLl9ib3VuZGluZ1NwaGVyZT1yLHRoaXMuX3RtcFNwaGVyZT1pKCksdGhpcy5fdG1wTWF0ND10KCl9YWRkSW5zdGFuY2UodCl7Y29uc3Qgcz10aGlzLl9pbnN0YW5jZURhdGEudmlldy5ib3VuZGluZ1NwaGVyZSxpPXRoaXMuX2luc3RhbmNlRGF0YS5nZXRDb21iaW5lZE1vZGVsVHJhbnNmb3JtKHQsdGhpcy5fdG1wTWF0NCk7ZShyKHRoaXMuX3RtcFNwaGVyZSksdGhpcy5fYm91bmRpbmdTcGhlcmUuY2VudGVyLGkpLHRoaXMuX3RtcFNwaGVyZVszXT10aGlzLl9ib3VuZGluZ1NwaGVyZS5yYWRpdXMqYShpKSxzLnNldFZlYyh0LHRoaXMuX3RtcFNwaGVyZSksdGhpcy5hZGQoW3RdKX1yZW1vdmVJbnN0YW5jZSh0KXt0aGlzLnJlbW92ZShbdF0pfX1leHBvcnR7biBhcyBJbnN0YW5jZU9jdHJlZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3MgZXtjb25zdHJ1Y3RvcihlLGkpe3RoaXMuX3dvcmxkU3BhY2VSYWRpdXM9ZSx0aGlzLl9taW5TY3JlZW5TcGFjZVJhZGlpPWl9c2VsZWN0TGV2ZWwoZSxpLHQpe2NvbnN0IGM9dC5jb21wdXRlU2NyZWVuUGl4ZWxTaXplQXQoZSkscj10aGlzLl93b3JsZFNwYWNlUmFkaXVzKmkvYztsZXQgcz0wO2ZvcihsZXQgYT0xO2E8dGhpcy5fbWluU2NyZWVuU3BhY2VSYWRpaS5sZW5ndGg7KythKXI+PXRoaXMuX21pblNjcmVlblNwYWNlUmFkaWlbYV0mJihzPWEpO3JldHVybiBzfX1leHBvcnR7ZSBhcyBMZXZlbFNlbGVjdG9yfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2xMYXlvdXQgYXMgZX1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2J1ZmZlci9nbFV0aWwuanNcIjtpbXBvcnR7RGVmYXVsdDNEIGFzIHR9ZnJvbVwiLi4vRGVmYXVsdFZlcnRleEF0dHJpYnV0ZUxvY2F0aW9ucy5qc1wiO2ltcG9ydHtHTE1hdGVyaWFscyBhcyByfWZyb21cIi4uL0dMTWF0ZXJpYWxzLmpzXCI7aW1wb3J0e1ZlcnRleEFycmF5T2JqZWN0IGFzIG99ZnJvbVwiLi4vVmVydGV4QXJyYXlPYmplY3QuanNcIjtpbXBvcnR7QnVmZmVyT2JqZWN0IGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvQnVmZmVyT2JqZWN0LmpzXCI7aW1wb3J0e1VzYWdlIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtjbGFzcyBhe2NvbnN0cnVjdG9yKGEsbil7Y29uc3QgbT1hLnJlbmRlckNvbnRleHQucmN0eCx1PW4uZ2VvbWV0cnksZj1uLmdlb21ldHJ5LmdldFJlbmRlckdlb21ldHJ5KCksZz1mLm1hdGVyaWFsO3RoaXMuX21hdGVyaWFscz1hLm1hdGVyaWFscyxnLnNldFBhcmFtZXRlcnMoe2luc3RhbmNlZERvdWJsZVByZWNpc2lvbjohMH0pLHRoaXMuZ2VvbWV0cnk9dSx0aGlzLm1hdGVyaWFsPWcsdGhpcy5nbE1hdGVyaWFscz1uZXcgcihnLHRoaXMuX21hdGVyaWFscyksdGhpcy52ZXJ0ZXhCdWZmZXJMYXlvdXQ9Zi52ZXJ0ZXhCdWZmZXJMYXlvdXQsdGhpcy52Ym89cy5jcmVhdGVWZXJ0ZXgobSxpLlNUQVRJQ19EUkFXLGYuYnVmZmVyKSx0aGlzLnZhbz1uZXcgbyhtLHQsbmV3IE1hcChbW1wiZ2VvbWV0cnlcIixlKGYudmVydGV4QnVmZmVyTGF5b3V0KV1dKSxuZXcgTWFwKFtbXCJnZW9tZXRyeVwiLHRoaXMudmJvXV0pKSx0aGlzLnZlcnRleENvdW50PWYuZWxlbWVudENvdW50fWRlc3Ryb3koKXt0aGlzLmdsTWF0ZXJpYWxzLmRpc3Bvc2UoKSx0aGlzLnZiby5kaXNwb3NlKCksdGhpcy52YW8uZGlzcG9zZSgpfWdldCBib3VuZGluZ0luZm8oKXtyZXR1cm4gdGhpcy5nZW9tZXRyeS5ib3VuZGluZ0luZm99Z2V0IHRyaWFuZ2xlQ291bnQoKXtyZXR1cm4gdGhpcy52ZXJ0ZXhDb3VudC8zfWdldCB1c2VkTWVtb3J5KCl7cmV0dXJuIDEyOCt0aGlzLnZiby51c2VkTWVtb3J5K3RoaXMudmFvLnVzZWRNZW1vcnl9aW50ZXJzZWN0KGUsdCxyLG8scyxpLGEsbil7cmV0dXJuIHRoaXMuZ2VvbWV0cnkuaW50ZXJzZWN0KGUsdCxyLG8scyxpLGEsbil9fWV4cG9ydHthIGFzIExvZENvbXBvbmVudERhdGF9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtpc1NvbWUgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7aXNBYm9ydGVkIGFzIG4sdGhyb3dJZkFib3J0ZWQgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzNmNjQuanNcIjtpbXBvcnR7ZW1wdHkgYXMgcixleHBhbmRXaXRoVmVjMyBhcyBpLGNlbnRlciBhcyBzLGRpYW1ldGVyIGFzIGN9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e0xvZENvbXBvbmVudERhdGEgYXMgdX1mcm9tXCIuL0xvZENvbXBvbmVudERhdGEuanNcIjtjbGFzcyBhe3N0YXRpYyBhc3luYyBjcmVhdGUoZSxyLGkpe2NvbnN0IHM9YXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHIuY29tcG9uZW50cy5tYXAoKG89PmUuY29udHJvbGxlci5zY2hlZHVsZSgoKCk9Pm5ldyB1KGUsbykpLGkpKSkpLGM9cy5tYXAoKG89PlwiZnVsZmlsbGVkXCI9PT1vLnN0YXR1cz9vLnZhbHVlOm51bGwpKS5maWx0ZXIobyk7aWYobihpKXx8Yy5sZW5ndGghPT1zLmxlbmd0aCl7Yy5mb3JFYWNoKChvPT5vLmRlc3Ryb3koKSkpLHQoaSk7Zm9yKGNvbnN0IG8gb2YgcylpZihcInJlamVjdGVkXCI9PT1vLnN0YXR1cyl0aHJvdyBvLnJlYXNvbn1yZXR1cm4gbmV3IGEoci5taW5TY3JlZW5TcGFjZVJhZGl1cyxjKX1jb25zdHJ1Y3RvcihvLG4pe3RoaXMubWluU2NyZWVuU3BhY2VSYWRpdXM9byx0aGlzLmNvbXBvbmVudHM9bn1kZXN0cm95KCl7dGhpcy5jb21wb25lbnRzLmZvckVhY2goKG89Pm8uZGVzdHJveSgpKSl9aW50ZXJzZWN0KG8sbix0LGUscixpLHMpe3RoaXMuY29tcG9uZW50cy5mb3JFYWNoKChjPT5jLmludGVyc2VjdChvLG4sdCxlLHIsaSx0aGlzLmJvdW5kaW5nU3BoZXJlLHMpKSl9Z2V0IGJvdW5kaW5nQm94KCl7aWYobnVsbD09dGhpcy5fYm91bmRpbmdCb3gpe2NvbnN0IG89cigpO3RoaXMuY29tcG9uZW50cy5mb3JFYWNoKChuPT57bnVsbCE9bi5ib3VuZGluZ0luZm8mJihpKG8sbi5ib3VuZGluZ0luZm8uYmJNaW4pLGkobyxuLmJvdW5kaW5nSW5mby5iYk1heCkpfSkpLHRoaXMuX2JvdW5kaW5nQm94PW99cmV0dXJuIHRoaXMuX2JvdW5kaW5nQm94fWdldCBib3VuZGluZ1NwaGVyZSgpe2lmKG51bGw9PXRoaXMuX2JvdW5kaW5nU3BoZXJlKXtjb25zdCBvPXRoaXMuYm91bmRpbmdCb3gsbj1lKCk7cyhvLG4pLHRoaXMuX2JvdW5kaW5nU3BoZXJlPXtjZW50ZXI6bixyYWRpdXM6LjUqYyhvKX19cmV0dXJuIHRoaXMuX2JvdW5kaW5nU3BoZXJlfWdldCB0cmlhbmdsZUNvdW50KCl7cmV0dXJuIHRoaXMuY29tcG9uZW50cy5yZWR1Y2UoKChvLG4pPT5vK24udHJpYW5nbGVDb3VudCksMCl9fWV4cG9ydHthIGFzIExvZExldmVsfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7aXNTb21lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtzb21lTWFwIGFzIG4sZ2V0T3JDcmVhdGVNYXBWYWx1ZSBhcyBzfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtpc0Fib3J0ZWQgYXMgaSx0aHJvd0lmQWJvcnRlZCBhcyBvfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGN9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgaH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL21hdDRmNjQuanNcIjtpbXBvcnR7ZCxlIGFzIHUsdCBhcyBtfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgcH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzNmNjQuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGYsZnJvbVZhbHVlcyBhcyBffWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjNGY2NC5qc1wiO2ltcG9ydHtkZWJ1Z0ZsYWdzIGFzIGd9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9kZWJ1Z0ZsYWdzLmpzXCI7aW1wb3J0e2dsTGF5b3V0IGFzIEl9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9idWZmZXIvZ2xVdGlsLmpzXCI7aW1wb3J0e25ld0xheW91dCBhcyB5fWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYnVmZmVyL0ludGVybGVhdmVkTGF5b3V0LmpzXCI7aW1wb3J0IHYgZnJvbVwiLi4vLi4vLi4vd2ViZ2wvUmVuZGVyQ2FtZXJhLmpzXCI7aW1wb3J0e1NoYWRlck91dHB1dCBhcyBDfWZyb21cIi4uLy4uL2NvcmUvc2hhZGVyTGlicmFyeS9TaGFkZXJPdXRwdXQuanNcIjtpbXBvcnR7QXN5bmNSZW5kZXJQbHVnaW4gYXMgRX1mcm9tXCIuLi8uLi9lZmZlY3RzL1JlbmRlclBsdWdpbi5qc1wiO2ltcG9ydHtEZWZhdWx0M0QgYXMgUn1mcm9tXCIuLi9EZWZhdWx0VmVydGV4QXR0cmlidXRlTG9jYXRpb25zLmpzXCI7aW1wb3J0e0RlcHRoUmFuZ2UgYXMgRH1mcm9tXCIuLi9EZXB0aFJhbmdlLmpzXCI7aW1wb3J0e0ludGVyc2VjdG9yVHlwZSBhcyBBfWZyb21cIi4uL0ludGVyc2VjdG9yVHlwZS5qc1wiO2ltcG9ydCBiIGZyb21cIi4uL09jdHJlZS5qc1wiO2ltcG9ydHtSZW5kZXJTbG90IGFzIFR9ZnJvbVwiLi4vUmVuZGVyU2xvdC5qc1wiO2ltcG9ydHthc3NlcnQgYXMgTH1mcm9tXCIuLi9VdGlsLmpzXCI7aW1wb3J0e1ZlcnRleEF0dHJpYnV0ZSBhcyBTfWZyb21cIi4uL1ZlcnRleEF0dHJpYnV0ZS5qc1wiO2ltcG9ydHtJbnN0YW5jZURhdGEgYXMgTyxTdGF0ZUZsYWdzIGFzIGp9ZnJvbVwiLi9JbnN0YW5jZURhdGEuanNcIjtpbXBvcnR7SW5zdGFuY2VPY3RyZWUgYXMgeH1mcm9tXCIuL0luc3RhbmNlT2N0cmVlLmpzXCI7aW1wb3J0e0xldmVsU2VsZWN0b3IgYXMgTX1mcm9tXCIuL0xldmVsU2VsZWN0b3IuanNcIjtpbXBvcnR7TG9kTGV2ZWwgYXMgTn1mcm9tXCIuL0xvZExldmVsLmpzXCI7aW1wb3J0e1JlbmRlckluc3RhbmNlRGF0YSBhcyB3fWZyb21cIi4vUmVuZGVySW5zdGFuY2VEYXRhLmpzXCI7aW1wb3J0e2NvbG9yTWl4TW9kZXMgYXMgSH1mcm9tXCIuLi8uLi9tYXRlcmlhbHMvaW50ZXJuYWwvTWF0ZXJpYWxVdGlsLmpzXCI7aW1wb3J0e2VuY29kZURvdWJsZVZlYzMgYXMgVX1mcm9tXCIuLi8uLi9tYXRlcmlhbHMvcmVuZGVyZXJzL3V0aWxzLmpzXCI7aW1wb3J0e0RlZmF1bHRNYXRlcmlhbERyYXdQYXJhbWV0ZXJzIGFzIEZ9ZnJvbVwiLi4vLi4vc2hhZGVycy9EZWZhdWx0TWF0ZXJpYWxUZWNobmlxdWUuanNcIjtpbXBvcnR7ZGVmYXVsdEhpZ2hsaWdodE5hbWUgYXMgVn1mcm9tXCIuLi8uLi8uLi8uLi9zdXBwb3J0L0hpZ2hsaWdodERlZmF1bHRzLmpzXCI7aW1wb3J0e1Rhc2tQcmlvcml0eSBhcyBCLG5vQnVkZ2V0IGFzIHF9ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtpbXBvcnR7YmluZFZlcnRleEJ1ZmZlckxheW91dCBhcyBHLHVuYmluZFZlcnRleEJ1ZmZlckxheW91dCBhcyBQfWZyb21cIi4uLy4uLy4uLy4uL3dlYmdsL1V0aWwuanNcIjtjb25zdCB6PWU9Pntjb25zdCB0PWUuYmFzZUJvdW5kaW5nU3BoZXJlLnJhZGl1cyxyPWUubGV2ZWxzLm1hcCgoZT0+ZS5taW5TY3JlZW5TcGFjZVJhZGl1cykpO3JldHVybiBuZXcgTSh0LHIpfTtsZXQgaz1jbGFzcyBleHRlbmRzIEV7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLnR5cGU9QS5MT0QsdGhpcy5pc0dyb3VuZD0hMSx0aGlzLl9sZXZlbHM9W10sdGhpcy5fZGVmYXVsdFJlbmRlckluc3RhbmNlRGF0YT1uZXcgQXJyYXksdGhpcy5faGlnaGxpZ2h0UmVuZGVySW5zdGFuY2VEYXRhTWFwPW5ldyBNYXAsdGhpcy5faW5zdGFuY2VJbmRleD0wLHRoaXMuX2N5Y2xlU3RhcnRJbmRleD0wLHRoaXMuX3NsaWNlUGxhbmU9ITEsdGhpcy5fY2FtZXJhPW5ldyB2LHRoaXMuX3VwZGF0ZUN5Y2xlc1dpdGhTdGF0aWNDYW1lcmE9LTEsdGhpcy5fbmVlZEZ1bGxDeWNsZT0hMSx0aGlzLnByb2R1Y2VzPW5ldyBNYXAoW1tULk9QQVFVRV9NQVRFUklBTCxlPT50aGlzLl9wcm9kdWNlcyhlKV0sW1QuVFJBTlNQQVJFTlRfTUFURVJJQUwsZT0+ISF0aGlzLl9oYXNUcmFuc3BhcmVudExldmVscygpJiZ0aGlzLl9wcm9kdWNlcyhlKV1dKSx0aGlzLl9pbnN0YW5jZURhdGE9bmV3IE8oe3NoYWRlclRyYW5zZm9ybWF0aW9uOmUuc2hhZGVyVHJhbnNmb3JtYXRpb259LGUub3B0aW9uYWxGaWVsZHMpLHRoaXMuYWRkSGFuZGxlcyh0LnJlZ2lzdGVyVGFzayhCLkxPRF9SRU5ERVJFUix0aGlzKSl9aW5pdGlhbGl6ZSgpe3RoaXMuX2luc3RhbmNlQnVmZmVyTGF5b3V0PVkodGhpcy5vcHRpb25hbEZpZWxkcyksdGhpcy5fZ2xJbnN0YW5jZUJ1ZmZlckxheW91dD1JKHRoaXMuX2luc3RhbmNlQnVmZmVyTGF5b3V0LDEpLHRoaXMuYWRkSGFuZGxlcyhbdGhpcy5faW5zdGFuY2VEYXRhLmV2ZW50cy5vbihcImluc3RhbmNlcy1jaGFuZ2VkXCIsKCgpPT50aGlzLl9yZXF1ZXN0VXBkYXRlQ3ljbGUoKSkpLHRoaXMuX2luc3RhbmNlRGF0YS5ldmVudHMub24oXCJpbnN0YW5jZS10cmFuc2Zvcm0tY2hhbmdlZFwiLCgoe2luZGV4OmV9KT0+e3RoaXMuX3JlcXVlc3RVcGRhdGVDeWNsZSgpLHRoaXMubWV0YWRhdGEubm90aWZ5R3JhcGhpY0dlb21ldHJ5Q2hhbmdlZChlKX0pKSx0aGlzLl9pbnN0YW5jZURhdGEuZXZlbnRzLm9uKFwiaW5zdGFuY2UtdmlzaWJpbGl0eS1jaGFuZ2VkXCIsKCh7aW5kZXg6ZX0pPT57dGhpcy5fcmVxdWVzdFVwZGF0ZUN5Y2xlKCEwKSx0aGlzLm1ldGFkYXRhLm5vdGlmeUdyYXBoaWNWaXNpYmlsaXR5Q2hhbmdlZChlKX0pKSx0aGlzLl9pbnN0YW5jZURhdGEuZXZlbnRzLm9uKFwiaW5zdGFuY2UtaGlnaGxpZ2h0LWNoYW5nZWRcIiwoKCk9PnRoaXMuX3JlcXVlc3RVcGRhdGVDeWNsZSghMCkpKV0pfWdldCBfYWxsUmVuZGVySW5zdGFuY2VEYXRhKCl7cmV0dXJuW3RoaXMuX2RlZmF1bHRSZW5kZXJJbnN0YW5jZURhdGEsLi4udGhpcy5faGlnaGxpZ2h0UmVuZGVySW5zdGFuY2VEYXRhTWFwLnZhbHVlcygpXX1nZXQgX2FsbFJlbmRlckluc3RhbmNlRGF0YUV4Y2VwdEhpZ2hsaWdodFNoYWRvdygpe2NvbnN0IGU9W3RoaXMuX2RlZmF1bHRSZW5kZXJJbnN0YW5jZURhdGFdO2Zvcihjb25zdCB0IG9mIHRoaXMuX2hpZ2hsaWdodFJlbmRlckluc3RhbmNlRGF0YU1hcCl0WzBdIT09ViYmZS5wdXNoKHRbMV0pO3JldHVybiBlfWhhc0hpZ2hsaWdodChlKXtyZXR1cm4gdGhpcy5faGlnaGxpZ2h0UmVuZGVySW5zdGFuY2VEYXRhTWFwLmhhcyhlKX1nZXQgX2VuYWJsZUxldmVsU2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMuc3ltYm9sLmxldmVscy5sZW5ndGg+MX1nZXQgbGV2ZWxzKCl7cmV0dXJuIHRoaXMuX2xldmVsc31nZXQgYmFzZUJvdW5kaW5nQm94KCl7cmV0dXJuIHRoaXMuX2xldmVsc1t0aGlzLl9sZXZlbHMubGVuZ3RoLTFdLmJvdW5kaW5nQm94fWdldCBiYXNlQm91bmRpbmdTcGhlcmUoKXtyZXR1cm4gdGhpcy5fbGV2ZWxzW3RoaXMuX2xldmVscy5sZW5ndGgtMV0uYm91bmRpbmdTcGhlcmV9Z2V0IGJhc2VNYXRlcmlhbCgpe3JldHVybiB0aGlzLl9sZXZlbHNbdGhpcy5fbGV2ZWxzLmxlbmd0aC0xXS5jb21wb25lbnRzWzBdLm1hdGVyaWFsfWdldCBzbGljZVBsYW5lRW5hYmxlZCgpe3JldHVybiB0aGlzLl9zbGljZVBsYW5lfXNldCBzbGljZVBsYW5lRW5hYmxlZChlKXt0aGlzLl9zbGljZVBsYW5lPWV9Z2V0IGxheWVyVmlld1VpZCgpe3JldHVybiB0aGlzLm1ldGFkYXRhLmxheWVyVmlld1VpZH1nZXQgaW5zdGFuY2VEYXRhKCl7cmV0dXJuIHRoaXMuX2luc3RhbmNlRGF0YX1nZXQgaGFzRW1pc3Npb25zKCl7cmV0dXJuIHRoaXMuX2xldmVscy5zb21lKChlPT5lLmNvbXBvbmVudHMuc29tZSgoZT0+ZS5tYXRlcmlhbC5oYXNFbWlzc2lvbnMpKSkpfWdldCB1c2VkTWVtb3J5KCl7cmV0dXJuIHRoaXMuX2FsbFJlbmRlckluc3RhbmNlRGF0YS5yZWR1Y2UoKChlLHQpPT50LnJlZHVjZSgoKGUsdCk9PmUrdC51c2VkTWVtb3J5KSxlKSksdGhpcy5fbGV2ZWxzLnJlZHVjZSgoKGUsdCk9PmUrdC5jb21wb25lbnRzLnJlZHVjZSgoKGUsdCk9PmUrdC51c2VkTWVtb3J5KSwwKSksMCkpfWdldCByZW5kZXJTdGF0cygpe2NvbnN0IGU9dGhpcy5faW5zdGFuY2VEYXRhLnNpemUsdD1bXTtyZXR1cm4gdGhpcy5fbGV2ZWxzLmZvckVhY2goKChlLHIpPT57Y29uc3Qgbj10aGlzLl9hbGxSZW5kZXJJbnN0YW5jZURhdGFbMF1bcl0uc2l6ZSt0aGlzLl9hbGxSZW5kZXJJbnN0YW5jZURhdGFbMV1bcl0uc2l6ZSxzPWUudHJpYW5nbGVDb3VudDt0LnB1c2goe3JlbmRlcmVkSW5zdGFuY2VzOm4scmVuZGVyZWRUcmlhbmdsZXM6bipzLHRyaWFuZ2xlc1Blckluc3RhbmNlOnN9KX0pKSx7dG90YWxJbnN0YW5jZXM6ZSxyZW5kZXJlZEluc3RhbmNlczp0LnJlZHVjZSgoKGUsdCk9PmUrdC5yZW5kZXJlZEluc3RhbmNlcyksMCkscmVuZGVyZWRUcmlhbmdsZXM6dC5yZWR1Y2UoKChlLHQpPT5lK3QucmVuZGVyZWRUcmlhbmdsZXMpLDApLGxldmVsczp0fX1fY3JlYXRlUmVuZGVySW5zdGFuY2VEYXRhQXJyYXkoZT1bXSl7Y29uc3R7cmN0eDp0fT10aGlzLl9jb250ZXh0LnJlbmRlckNvbnRleHQ7cmV0dXJuIHRoaXMuc3ltYm9sLmxldmVscy5tYXAoKHI9PntlLnB1c2gobmV3IHcodCx0aGlzLl9pbnN0YW5jZUJ1ZmZlckxheW91dCkpfSkpLGV9YXN5bmMgaW5pdGlhbGl6ZVJlbmRlckNvbnRleHQoZSxyKXt0aGlzLl9jb250ZXh0PWUsdGhpcy5fY3JlYXRlUmVuZGVySW5zdGFuY2VEYXRhQXJyYXkodGhpcy5fZGVmYXVsdFJlbmRlckluc3RhbmNlRGF0YSk7Y29uc3Qgbj1hd2FpdCBQcm9taXNlLmFsbFNldHRsZWQodGhpcy5zeW1ib2wubGV2ZWxzLm1hcCgodD0+Ti5jcmVhdGUoZSx0LHIpKSkpLHM9bi5tYXAoKGU9PlwiZnVsZmlsbGVkXCI9PT1lLnN0YXR1cz9lLnZhbHVlOm51bGwpKS5maWx0ZXIodCk7aWYoaShyKXx8cy5sZW5ndGghPT1uLmxlbmd0aCl7cy5mb3JFYWNoKChlPT5lLmRlc3Ryb3koKSkpLG8ocik7Zm9yKGNvbnN0IGUgb2YgbilpZihcInJlamVjdGVkXCI9PT1lLnN0YXR1cyl0aHJvdyBlLnJlYXNvbn10aGlzLl9sZXZlbHM9cyx0aGlzLl9sZXZlbFNlbGVjdG9yPXoodGhpcyl9dW5pbml0aWFsaXplUmVuZGVyQ29udGV4dCgpe3RoaXMuX2ludmFsaWRhdGVPY3RyZWUoKSx0aGlzLl9sZXZlbHMuZm9yRWFjaCgoZT0+ZS5kZXN0cm95KCkpKSx0aGlzLl9kZWZhdWx0UmVuZGVySW5zdGFuY2VEYXRhLmZvckVhY2goKGU9PmUuZGVzdHJveSgpKSksdGhpcy5faGlnaGxpZ2h0UmVuZGVySW5zdGFuY2VEYXRhTWFwLmZvckVhY2goKGU9PmUuZm9yRWFjaCgoZT0+ZS5kZXN0cm95KCkpKSkpfV9oYXNUcmFuc3BhcmVudExldmVscygpe3JldHVybiB0aGlzLl9sZXZlbHMuc29tZSgoZT0+ZS5jb21wb25lbnRzLnNvbWUoKGU9Pntjb25zdCB0PWUubWF0ZXJpYWwucHJvZHVjZXMuZ2V0KFQuVFJBTlNQQVJFTlRfTUFURVJJQUwpO3JldHVybiB0Py4oQy5Db2xvcil9KSkpKX1oYXNIaWdobGlnaHRzKCl7cmV0dXJuIG4odGhpcy5faGlnaGxpZ2h0UmVuZGVySW5zdGFuY2VEYXRhTWFwLChlPT5lLnNvbWUoKGU9PmUuc2l6ZT4wKSkpKX1fcHJvZHVjZXMoZSl7cmV0dXJuKGUhPT1DLkhpZ2hsaWdodHx8dGhpcy5oYXNIaWdobGlnaHRzKCkpJiYoZSE9PUMuU2hhZG93SGlnaGxpZ2h0fHx0aGlzLmhhc0hpZ2hsaWdodChWKSl9cHJlcGFyZVJlbmRlcihlKXtpZighZy5MT0RfSU5TVEFOQ0VfUkVOREVSRVJfRElTQUJMRV9VUERBVEVTKXtpZih0aGlzLl9lbmFibGVMZXZlbFNlbGVjdGlvbil7Y29uc3QgdD1lLmJpbmQuY29udGVudENhbWVyYS5lcXVhbHModGhpcy5fY2FtZXJhKTt0aGlzLl9jYW1lcmEuY29weUZyb20oZS5iaW5kLmNvbnRlbnRDYW1lcmEpLHR8fHRoaXMuX3JlcXVlc3RVcGRhdGVDeWNsZSgpfXRoaXMuX25lZWRGdWxsQ3ljbGUmJih0aGlzLnJ1blRhc2socSksdGhpcy5fbmVlZEZ1bGxDeWNsZT0hMSl9fWFjcXVpcmVUZWNobmlxdWVzKGUpe2lmKCF0aGlzLmJhc2VNYXRlcmlhbC52aXNpYmxlfHwhdGhpcy5iYXNlTWF0ZXJpYWwuaXNWaXNpYmxlRm9yT3V0cHV0KGUub3V0cHV0KSlyZXR1cm4gbnVsbDtjb25zdCB0PXRoaXMuX2dldEluc3RhbmNlRGF0YXMoZSk7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3Qgcj1uZXcgQXJyYXksbj10aGlzLmxldmVscztyZXR1cm4gdC5mb3JFYWNoKCh0PT5uLmZvckVhY2goKCh7Y29tcG9uZW50czpufSxzKT0+bi5mb3JFYWNoKChuPT5yLnB1c2godGhpcy5fYmVnaW5Db21wb25lbnQoZSx0W3NdLG4pKSkpKSkpKSxyfXJlbmRlcihlLHQpe2NvbnN0IHI9dGhpcy5fZ2V0SW5zdGFuY2VEYXRhcyhlKTtpZighcnx8bnVsbD09dClyZXR1cm47bGV0IG49MDtlLnJjdHguYmluZFZBTygpO2NvbnN0IHM9dGhpcy5sZXZlbHM7ci5mb3JFYWNoKChyPT5zLmZvckVhY2goKCh7Y29tcG9uZW50czpzfSxhKT0+cy5mb3JFYWNoKChzPT50aGlzLl9yZW5kZXJDb21wb25lbnQoZSx0W24rK10sclthXSxzLGEpKSkpKSkpfV9nZXRJbnN0YW5jZURhdGFzKGUpe2NvbnN0e291dHB1dDp0LGJpbmQ6cn09ZSxuPXQ9PT1DLkhpZ2hsaWdodCxzPXQ9PT1DLlNoYWRvd0hpZ2hsaWdodCxhPSFuJiYhcyxpPXQhPT1DLlNoYWRvd0V4Y2x1ZGVIaWdobGlnaHQ7aWYoYSlyZXR1cm4gaT90aGlzLl9hbGxSZW5kZXJJbnN0YW5jZURhdGE6dGhpcy5fYWxsUmVuZGVySW5zdGFuY2VEYXRhRXhjZXB0SGlnaGxpZ2h0U2hhZG93O2NvbnN0e19oaWdobGlnaHRSZW5kZXJJbnN0YW5jZURhdGFNYXA6b309dGhpcztpZihpKXtpZihuKXtjb25zdCBlPXIuaGlnaGxpZ2h0Py5uYW1lO2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHQ9by5nZXQoZSk7cmV0dXJuIHQ/W3RdOm51bGx9Y29uc3QgZT1vLmdldChWKTtyZXR1cm4gcz9lP1tlXTpudWxsOkFycmF5LmZyb20oby52YWx1ZXMoKSl9cmV0dXJuIG51bGx9aW50ZXJzZWN0KGUsdCxyLG4pe2lmKCF0aGlzLmJhc2VNYXRlcmlhbC52aXNpYmxlfHxudWxsPT10aGlzLl9vY3RyZWUpcmV0dXJuO2NvbnN0IHM9cCgpO2QocyxuLHIpO2NvbnN0IGE9cz0+e3RoaXMuX2luc3RhbmNlRGF0YS5nZXRDb21iaW5lZE1vZGVsVHJhbnNmb3JtKHMsWiksZS50cmFuc2Zvcm0uc2V0KFopLG0oJCxyLGUudHJhbnNmb3JtLmludmVyc2UpLG0oWCxuLGUudHJhbnNmb3JtLmludmVyc2UpO2NvbnN0IGE9dGhpcy5faW5zdGFuY2VEYXRhLmdldFN0YXRlKHMpLGk9dGhpcy5faW5zdGFuY2VEYXRhLmdldExvZExldmVsKHMpLG89dGhpcy5fbGV2ZWxzLmxlbmd0aDtMKDAhPT0oYSZqLkFDVElWRSksXCJpbnZhbGlkIGluc3RhbmNlIHN0YXRlXCIpLEwoaT49MCYmaTxvLFwiaW52YWlkIGxvZCBsZXZlbFwiKSx0aGlzLl9sZXZlbHNbaV0uaW50ZXJzZWN0KGUsdCwkLFgscyx0aGlzLm1ldGFkYXRhLG8pfTt0aGlzLmJhc2VNYXRlcmlhbC5wYXJhbWV0ZXJzLnZlcnRpY2FsT2Zmc2V0P3RoaXMuX29jdHJlZS5mb3JFYWNoKGEpOnRoaXMuX29jdHJlZS5mb3JFYWNoQWxvbmdSYXkocixzLGEpfW5vdGlmeVNoYWRlclRyYW5zZm9ybWF0aW9uQ2hhbmdlZCgpe3RoaXMuX2ludmFsaWRhdGVPY3RyZWUoKSx0aGlzLl9yZXF1ZXN0VXBkYXRlQ3ljbGUoKX1nZXQgX29jdHJlZSgpe2lmKG51bGw9PXRoaXMuX29jdHJlZUNhY2hlZCl7Y29uc3QgZT10aGlzLl9pbnN0YW5jZURhdGEsdD1lLnZpZXc/LnN0YXRlO2lmKCF0KXJldHVybiBudWxsO3RoaXMuX29jdHJlZUNhY2hlZD1uZXcgeChlLHRoaXMuYmFzZUJvdW5kaW5nU3BoZXJlKTtmb3IobGV0IHI9MDtyPGUuY2FwYWNpdHk7KytyKXQuZ2V0KHIpJmouQUNUSVZFJiZ0aGlzLl9vY3RyZWVDYWNoZWQuYWRkSW5zdGFuY2Uocil9cmV0dXJuIHRoaXMuX29jdHJlZUNhY2hlZH1faW52YWxpZGF0ZU9jdHJlZSgpe3RoaXMuX29jdHJlZUNhY2hlZD1hKHRoaXMuX29jdHJlZUNhY2hlZCl9cXVlcnlEZXB0aFJhbmdlKGUpe2lmKG51bGw9PXRoaXMuX29jdHJlZSlyZXR1cm4gbmV3IEQ7Y29uc3QgdD1lLnZpZXdGb3J3YXJkLHI9dGhpcy5fb2N0cmVlLmZpbmRDbG9zZXN0KHQsYi5EZXB0aE9yZGVyLkZST05UX1RPX0JBQ0ssZS5mcnVzdHVtKSxuPXRoaXMuX29jdHJlZS5maW5kQ2xvc2VzdCh0LGIuRGVwdGhPcmRlci5CQUNLX1RPX0ZST05ULGUuZnJ1c3R1bSk7aWYobnVsbD09cnx8bnVsbD09bilyZXR1cm4gbmV3IEQ7Y29uc3Qgcz1lLmV5ZSxhPXRoaXMuX2luc3RhbmNlRGF0YS52aWV3O2EuYm91bmRpbmdTcGhlcmUuZ2V0VmVjKHIsUSksZChRLFEscyk7Y29uc3QgaT11KFEsdCktUVszXTthLmJvdW5kaW5nU3BoZXJlLmdldFZlYyhuLFEpLGQoUSxRLHMpO2NvbnN0IG89dShRLHQpK1FbM107cmV0dXJuIG5ldyBEKGksbyl9X3JlcXVlc3RVcGRhdGVDeWNsZShlPSExKXt0aGlzLl91cGRhdGVDeWNsZXNXaXRoU3RhdGljQ2FtZXJhPS0xLHRoaXMuX2N5Y2xlU3RhcnRJbmRleD10aGlzLl9pbnN0YW5jZUluZGV4LGUmJih0aGlzLl9uZWVkRnVsbEN5Y2xlPSEwLHRoaXMuX2NvbnRleHQucmVxdWVzdFJlbmRlcigpKX1fc3RhcnRVcGRhdGVDeWNsZSgpe3RoaXMuX3VwZGF0ZUN5Y2xlc1dpdGhTdGF0aWNDYW1lcmErKyx0aGlzLl9hbGxSZW5kZXJJbnN0YW5jZURhdGEuZm9yRWFjaCgoZT0+ZS5mb3JFYWNoKChlPT5lLnN0YXJ0VXBkYXRlQ3ljbGUoKSkpKSl9Z2V0IHJ1bm5pbmcoKXtyZXR1cm4gdGhpcy5faW5zdGFuY2VEYXRhLnNpemU+MCYmdGhpcy5fdXBkYXRlQ3ljbGVzV2l0aFN0YXRpY0NhbWVyYTwxfXJ1blRhc2soZSl7Y29uc3R7X2VuYWJsZUxldmVsU2VsZWN0aW9uOnQsX2NhbWVyYTpuLF9sZXZlbFNlbGVjdG9yOmF9PXRoaXM7dGhpcy5fYWxsUmVuZGVySW5zdGFuY2VEYXRhLmZvckVhY2goKGU9PmUuZm9yRWFjaCgoZT0+ZS5iZWdpblVwZGF0ZSgpKSkpKTtjb25zdCBpPXRoaXMuX2luc3RhbmNlRGF0YSxvPWkudmlldztsZXQgbD1pLnNpemU7Y29uc3QgYz1pLmNhcGFjaXR5O2xldCBoPXRoaXMuX2luc3RhbmNlSW5kZXg7Y29uc3QgZD1NYXRoLmNlaWwoYy81MDApLHtfaGlnaGxpZ2h0UmVuZGVySW5zdGFuY2VEYXRhTWFwOnV9PXRoaXM7Zm9yKGxldCBtPTA7bTxsJiYhZS5kb25lOysrbSl7aD09PXRoaXMuX2N5Y2xlU3RhcnRJbmRleCYmdGhpcy5fc3RhcnRVcGRhdGVDeWNsZSgpO2NvbnN0IG09by5zdGF0ZS5nZXQoaCk7bGV0IHA9MDtpZighKG0mai5BTExPQ0FURUQpKXtoPWgrMT09PWM/MDpoKzEsbCsrO2NvbnRpbnVlfWNvbnN0IGY9by5sb2RMZXZlbC5nZXQoaCk7aWYobSZqLkRFRkFVTFRfQUNUSVZFJiZ0aGlzLl9kZWZhdWx0UmVuZGVySW5zdGFuY2VEYXRhW2ZdLmZyZWVUYWlsKCksbSZqLkhJR0hMSUdIVF9BQ1RJVkUpe2NvbnN0IGU9aS5nZUhpZ2hsaWdodE9wdGlvbnNQcmV2KGgpO2lmKGUpe2NvbnN0IHQ9dS5nZXQoZSk7aWYoIXQpdGhyb3cgbmV3IHIoXCJpbnRlcm5hbDpsb2QtcmVuZGVyZXJcIixcIkludGVybmFsIGVycm9yIGluIGxvZFJlbmRlcmVyXCIpO3RbZl0uZnJlZVRhaWwoKSx0LmV2ZXJ5KChlPT5lLmlzRW1wdHkpKSYmKHQuZm9yRWFjaCgoZT0+ZS5kZXN0cm95KCkpKSx1LmRlbGV0ZShlKSl9fWlmKG0mai5SRU1PVkUpaS5mcmVlSW5zdGFuY2UoaCk7ZWxzZSBpZihtJmouVklTSUJMRSl7bGV0IGU9MDtpZih0JiYoby5tb2RlbE9yaWdpbi5nZXRWZWMoaCxKKSxlPWEuc2VsZWN0TGV2ZWwoSixpLmdldENvbWJpbmVkTWVkaWFuU2NhbGVGYWN0b3IoaCksbikpLHA9bSZ+KGouQUNUSVZFfGouVFJBTlNGT1JNX0NIQU5HRUQpLGU+PTApaWYobSZqLkhJR0hMSUdIVCl7Y29uc3QgdD1pLmdldEhpZ2hsaWdodE5hbWUoaCk7aWYodCl7Y29uc3Qgbj0oKT0+e2NvbnN0IGU9dGhpcy5fY3JlYXRlUmVuZGVySW5zdGFuY2VEYXRhQXJyYXkoKTtyZXR1cm4gZS5mb3JFYWNoKChlPT5lLmJlZ2luVXBkYXRlKCkpKSxlfSxhPXModSx0LG4pO2lmKGU+PWEubGVuZ3RoKXRocm93IG5ldyByKFwiaW50ZXJuYWw6bG9kLXJlbmRlcmVyXCIsYExvZFJlbmRlcmVyIGludGVybmFsIGVycm9yIC0gbWlzc2luZyBsb2RMZXZlbCAke2V9YCk7VyhhW2VdLG8saCl9cHw9ai5ISUdITElHSFRfQUNUSVZFfWVsc2UgVyh0aGlzLl9kZWZhdWx0UmVuZGVySW5zdGFuY2VEYXRhW2VdLG8saCkscHw9ai5ERUZBVUxUX0FDVElWRTtvLnN0YXRlLnNldChoLHApLG8ubG9kTGV2ZWwuc2V0KGgsZSl9ZWxzZSBwPW0mfihqLkFDVElWRXxqLlRSQU5TRk9STV9DSEFOR0VEKSxvLnN0YXRlLnNldChoLHApO2lmKG51bGwhPXRoaXMuX29jdHJlZUNhY2hlZCl7Y29uc3QgZT0hIShtJmouQUNUSVZFKSx0PSEhKHAmai5BQ1RJVkUpOyFlJiZ0P3RoaXMuX29jdHJlZUNhY2hlZC5hZGRJbnN0YW5jZShoKTplJiYhdD90aGlzLl9vY3RyZWVDYWNoZWQucmVtb3ZlSW5zdGFuY2UoaCk6ZSYmdCYmbSZqLlRSQU5TRk9STV9DSEFOR0VEJiYodGhpcy5fb2N0cmVlQ2FjaGVkLnJlbW92ZUluc3RhbmNlKGgpLHRoaXMuX29jdHJlZUNhY2hlZC5hZGRJbnN0YW5jZShoKSl9aD1oKzE9PT1jPzA6aCsxLGglZD09PTAmJmUubWFkZVByb2dyZXNzKCl9dGhpcy5faW5zdGFuY2VJbmRleD1oLHRoaXMuX2FsbFJlbmRlckluc3RhbmNlRGF0YS5mb3JFYWNoKChlPT5lLmZvckVhY2goKGU9PmUuZW5kVXBkYXRlKCkpKSkpLHRoaXMuX2NvbnRleHQucmVxdWVzdFJlbmRlcigpfV9iZWdpbkNvbXBvbmVudChlLHQscil7aWYoMD09PXQuc2l6ZSlyZXR1cm4gbnVsbDtjb25zdCBuPXIuZ2xNYXRlcmlhbHMubG9hZChlLnJjdHgsZS5iaW5kLnNsb3QsZS5vdXRwdXQpO3JldHVybiBuPy5iZWdpblNsb3QoZS5iaW5kKX1fcmVuZGVyQ29tcG9uZW50KGUsdCxyLG4scyl7aWYoIXQpcmV0dXJuO2NvbnN0e2JpbmQ6YSxyY3R4Oml9PWU7aS5ydW5BcHBsZUFtZERyaXZlckhlbHBlcigpO2NvbnN0IG89aS5iaW5kVGVjaG5pcXVlKHQsYSxuLm1hdGVyaWFsLnBhcmFtZXRlcnMsdGUpO2kuYmluZFZBTyhuLnZhbyksdC5lbnN1cmVBdHRyaWJ1dGVMb2NhdGlvbnMobi52YW8pLGcuTE9EX0lOU1RBTkNFX1JFTkRFUkVSX0NPTE9SSVpFX0JZX0xFVkVMJiZlLm91dHB1dD09PUMuQ29sb3ImJihvLnNldFVuaWZvcm00ZnYoXCJleHRlcm5hbENvbG9yXCIsZWVbTWF0aC5taW4ocyxlZS5sZW5ndGgtMSldKSxvLnNldFVuaWZvcm0xaShcImNvbG9yTWl4TW9kZVwiLEgucmVwbGFjZSkpO2NvbnN0IGw9ci5jYXBhY2l0eSxjPXIuaGVhZEluZGV4LGg9ci50YWlsSW5kZXgsZD1yLmZpcnN0SW5kZXgsdT10aGlzLl9nbEluc3RhbmNlQnVmZmVyTGF5b3V0LG09KGUscyk9PntHKGksUixyLmJ1ZmZlcix1LGUpLGkuZHJhd0FycmF5c0luc3RhbmNlZCh0LnByaW1pdGl2ZVR5cGUsMCxuLnZlcnRleENvdW50LHMtZSksUChpLFIsci5idWZmZXIsdSl9O24ubWF0ZXJpYWwudHJhbnNwYXJlbnQmJm51bGwhPWQ/Yz5oPyhMKGQ+PWgmJmQ8PWMsXCJpbnZhbGlkIGZpcnN0SW5kZXhcIiksbShkLGMpLG0oaCxkKSk6YzxoJiYoZDw9Yz8oTChkPj0wJiZkPD1jLFwiaW52YWxpZCBmaXJzdEluZGV4XCIpLG0oZCxjKSxtKGgsbCksbSgwLGQpKTooTChkPj1oJiZkPD1sLFwiaW52YWxpZCBmaXJzdEluZGV4XCIpLG0oZCxsKSxtKDAsYyksbShoLGQpKSk6Yz5oP20oaCxjKTpjPGgmJihtKDAsYyksbShoLGwpKSxpLmJpbmRWQU8obnVsbCl9fTtmdW5jdGlvbiBXKGUsdCxyKXtjb25zdCBuPWUuYWxsb2NhdGVIZWFkKCk7Syh0LHIsZS52aWV3LG4pfWZ1bmN0aW9uIEsoZSx0LHIsbil7VShlLm1vZGVsT3JpZ2luLHQsci5tb2RlbE9yaWdpbkhpLHIubW9kZWxPcmlnaW5MbyxuKSxyLm1vZGVsLmNvcHlGcm9tKG4sZS5tb2RlbCx0KSxyLm1vZGVsTm9ybWFsLmNvcHlGcm9tKG4sZS5tb2RlbE5vcm1hbCx0KSxlLmNvbG9yJiZyLmNvbG9yJiZyLmNvbG9yLmNvcHlGcm9tKG4sZS5jb2xvcix0KSxlLm9iamVjdEFuZExheWVySWRDb2xvciYmci5vYmplY3RBbmRMYXllcklkQ29sb3ImJnIub2JqZWN0QW5kTGF5ZXJJZENvbG9yLmNvcHlGcm9tKG4sZS5vYmplY3RBbmRMYXllcklkQ29sb3IsdCksZS5mZWF0dXJlQXR0cmlidXRlJiZyLmZlYXR1cmVBdHRyaWJ1dGUmJnIuZmVhdHVyZUF0dHJpYnV0ZS5jb3B5RnJvbShuLGUuZmVhdHVyZUF0dHJpYnV0ZSx0KX1mdW5jdGlvbiBZKGUpe2xldCB0PXkoKS52ZWMzZihTLklOU1RBTkNFTU9ERUxPUklHSU5ISSkudmVjM2YoUy5JTlNUQU5DRU1PREVMT1JJR0lOTE8pLm1hdDNmKFMuSU5TVEFOQ0VNT0RFTCkubWF0M2YoUy5JTlNUQU5DRU1PREVMTk9STUFMKTtyZXR1cm4gbnVsbCE9ZSYmZS5pbmNsdWRlcyhcImZlYXR1cmVBdHRyaWJ1dGVcIikmJih0PXQudmVjNGYoUy5JTlNUQU5DRUZFQVRVUkVBVFRSSUJVVEUpKSxudWxsIT1lJiZlLmluY2x1ZGVzKFwiY29sb3JcIikmJih0PXQudmVjNHU4KFMuSU5TVEFOQ0VDT0xPUikpLG51bGwhPWUmJmUuaW5jbHVkZXMoXCJvYmplY3RBbmRMYXllcklkQ29sb3JcIikmJih0PXQudmVjNHU4KFMuSU5TVEFOQ0VPQkpFQ1RBTkRMQVlFUklEQ09MT1IpKSx0fWUoW2woe2NvbnN0cnVjdE9ubHk6ITB9KV0say5wcm90b3R5cGUsXCJzeW1ib2xcIix2b2lkIDApLGUoW2woe2NvbnN0cnVjdE9ubHk6ITB9KV0say5wcm90b3R5cGUsXCJvcHRpb25hbEZpZWxkc1wiLHZvaWQgMCksZShbbCh7Y29uc3RydWN0T25seTohMH0pXSxrLnByb3RvdHlwZSxcIm1ldGFkYXRhXCIsdm9pZCAwKSxlKFtsKHtjb25zdHJ1Y3RPbmx5OiEwfSldLGsucHJvdG90eXBlLFwic2hhZGVyVHJhbnNmb3JtYXRpb25cIix2b2lkIDApLGUoW2woKV0say5wcm90b3R5cGUsXCJfaW5zdGFuY2VEYXRhXCIsdm9pZCAwKSxlKFtsKCldLGsucHJvdG90eXBlLFwiX2N5Y2xlU3RhcnRJbmRleFwiLHZvaWQgMCksZShbbCh7cmVhZE9ubHk6ITB9KV0say5wcm90b3R5cGUsXCJfZW5hYmxlTGV2ZWxTZWxlY3Rpb25cIixudWxsKSxlKFtsKCldLGsucHJvdG90eXBlLFwiX3VwZGF0ZUN5Y2xlc1dpdGhTdGF0aWNDYW1lcmFcIix2b2lkIDApLGUoW2woe3JlYWRPbmx5OiEwfSldLGsucHJvdG90eXBlLFwicnVubmluZ1wiLG51bGwpLGs9ZShbYyhcImVzcmkudmlld3MuM2Qud2ViZ2wtZW5naW5lLmxpYi5sb2RSZW5kZXJpbmcuTG9kUmVuZGVyZXJcIildLGspO2NvbnN0IEo9cCgpLFE9ZigpLFo9aCgpLCQ9cCgpLFg9cCgpLGVlPVtfKDEsMCwxLDEpLF8oMCwwLDEsMSksXygwLDEsMCwxKSxfKDEsMSwwLDEpLF8oMSwwLDAsMSldLHRlPW5ldyBGO2V4cG9ydHtrIGFzIExvZFJlbmRlcmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cmVhbGxvY1Nocmlua1RocmVzaG9sZCBhcyB0LHJlYWxsb2NHcm93dGhGYWN0b3IgYXMgaSxyZWFsbG9jU2hyaW5rRmFjdG9yIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e0J1ZmZlclZpZXdWZWMzZiBhcyBzLEJ1ZmZlclZpZXdNYXQzZiBhcyBhLEJ1ZmZlclZpZXdWZWM0ZiBhcyByLEJ1ZmZlclZpZXdWZWM0dTggYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2J1ZmZlci9CdWZmZXJWaWV3LmpzXCI7aW1wb3J0e2Fzc2VydCBhcyBofWZyb21cIi4uL1V0aWwuanNcIjtpbXBvcnR7VmVydGV4QXR0cmlidXRlIGFzIGR9ZnJvbVwiLi4vVmVydGV4QXR0cmlidXRlLmpzXCI7aW1wb3J0IF8gZnJvbVwiLi9CYWNrZWRCdWZmZXJPYmplY3QuanNcIjtjbGFzcyBje2NvbnN0cnVjdG9yKHQpe3RoaXMubW9kZWxPcmlnaW5IaT10LmdldEZpZWxkKGQuSU5TVEFOQ0VNT0RFTE9SSUdJTkhJLHMpLHRoaXMubW9kZWxPcmlnaW5Mbz10LmdldEZpZWxkKGQuSU5TVEFOQ0VNT0RFTE9SSUdJTkxPLHMpLHRoaXMubW9kZWw9dC5nZXRGaWVsZChkLklOU1RBTkNFTU9ERUwsYSksdGhpcy5tb2RlbE5vcm1hbD10LmdldEZpZWxkKGQuSU5TVEFOQ0VNT0RFTE5PUk1BTCxhKSx0aGlzLmZlYXR1cmVBdHRyaWJ1dGU9dC5nZXRGaWVsZChkLklOU1RBTkNFRkVBVFVSRUFUVFJJQlVURSxyKSx0aGlzLmNvbG9yPXQuZ2V0RmllbGQoZC5JTlNUQU5DRUNPTE9SLG4pLHRoaXMub2JqZWN0QW5kTGF5ZXJJZENvbG9yPXQuZ2V0RmllbGQoZC5JTlNUQU5DRU9CSkVDVEFORExBWUVSSURDT0xPUixuKX19Y2xhc3MgZntjb25zdHJ1Y3Rvcih0LGkpe3RoaXMuX3JjdHg9dCx0aGlzLl9pbnN0YW5jZUJ1ZmZlckxheW91dD1pLHRoaXMuX2hlYWRJbmRleD0wLHRoaXMuX3RhaWxJbmRleD0wLHRoaXMuX2ZpcnN0SW5kZXg9bnVsbCx0aGlzLl9jYXB0dXJlRmlyc3RJbmRleD0hMCx0aGlzLl91cGRhdGluZz0hMSx0aGlzLl9wcmV2SGVhZEluZGV4PTAsdGhpcy5fcmVzaXplZD0hMSx0aGlzLl9jYXBhY2l0eT0xfWRlc3Ryb3koKXt0aGlzLl9idWZmZXImJnRoaXMuX2J1ZmZlci5kZXN0cm95KCl9Z2V0IGJ1ZmZlcigpe3JldHVybiB0aGlzLl9idWZmZXIuYnVmZmVyfWdldCB2aWV3KCl7cmV0dXJuIHRoaXMuX3ZpZXd9Z2V0IGNhcGFjaXR5KCl7cmV0dXJuIHRoaXMuX2NhcGFjaXR5fWdldCBzaXplKCl7Y29uc3QgdD10aGlzLl9oZWFkSW5kZXgsaT10aGlzLl90YWlsSW5kZXg7cmV0dXJuIHQ+PWk/dC1pOnQrdGhpcy5fY2FwYWNpdHktaX1nZXQgaXNFbXB0eSgpe3JldHVybiB0aGlzLl9oZWFkSW5kZXg9PT10aGlzLl90YWlsSW5kZXh9Z2V0IGlzRnVsbCgpe3JldHVybiB0aGlzLl90YWlsSW5kZXg9PT0odGhpcy5faGVhZEluZGV4KzEpJXRoaXMuX2NhcGFjaXR5fWdldCBoZWFkSW5kZXgoKXtyZXR1cm4gdGhpcy5faGVhZEluZGV4fWdldCB0YWlsSW5kZXgoKXtyZXR1cm4gdGhpcy5fdGFpbEluZGV4fWdldCBmaXJzdEluZGV4KCl7cmV0dXJuIHRoaXMuX2ZpcnN0SW5kZXh9Z2V0IHVzZWRNZW1vcnkoKXtyZXR1cm4gdGhpcy5fYnVmZmVyPy51c2VkTWVtb3J5Pz8wfXJlc2V0KCl7dGhpcy5faGVhZEluZGV4PTAsdGhpcy5fdGFpbEluZGV4PTAsdGhpcy5fZmlyc3RJbmRleD1udWxsfXN0YXJ0VXBkYXRlQ3ljbGUoKXt0aGlzLl9jYXB0dXJlRmlyc3RJbmRleD0hMH1iZWdpblVwZGF0ZSgpe2goIXRoaXMuX3VwZGF0aW5nLFwiYWxyZWFkeSB1cGRhdGluZ1wiKSx0aGlzLl91cGRhdGluZz0hMCx0aGlzLl9wcmV2SGVhZEluZGV4PXRoaXMuX2hlYWRJbmRleH1lbmRVcGRhdGUoKXtoKHRoaXMuX3VwZGF0aW5nLFwibm90IHVwZGF0aW5nXCIpLHRoaXMuc2l6ZTx0KnRoaXMuY2FwYWNpdHkmJnRoaXMuX3NocmluaygpLHRoaXMuX3Jlc2l6ZWQ/KHRoaXMuX2J1ZmZlci50cmFuc2ZlckFsbCgpLHRoaXMuX3Jlc2l6ZWQ9ITEpOnRoaXMuX3RyYW5zZmVyUmFuZ2UodGhpcy5fcHJldkhlYWRJbmRleCx0aGlzLl9oZWFkSW5kZXgpLHRoaXMuX3VwZGF0aW5nPSExfWFsbG9jYXRlSGVhZCgpe2godGhpcy5fdXBkYXRpbmcsXCJub3QgdXBkYXRpbmdcIiksdGhpcy5pc0Z1bGwmJnRoaXMuX2dyb3coKTtjb25zdCB0PXRoaXMuaGVhZEluZGV4O3JldHVybiB0aGlzLl9jYXB0dXJlRmlyc3RJbmRleCYmKHRoaXMuX2ZpcnN0SW5kZXg9dCx0aGlzLl9jYXB0dXJlRmlyc3RJbmRleD0hMSksdGhpcy5faW5jcmVtZW50SGVhZCgpLGgodGhpcy5faGVhZEluZGV4IT09dGhpcy5fdGFpbEluZGV4LFwiaW52YWxpZCBwb2ludGVyc1wiKSx0fWZyZWVUYWlsKCl7aCh0aGlzLl91cGRhdGluZyxcIm5vdCB1cGRhdGluZ1wiKSxoKHRoaXMuc2l6ZT4wLFwiaW52YWxpZCBzaXplXCIpO2NvbnN0IHQ9dGhpcy5fdGFpbEluZGV4PT09dGhpcy5fZmlyc3RJbmRleDt0aGlzLl9pbmNyZW1lbnRUYWlsKCksdCYmKHRoaXMuX2ZpcnN0SW5kZXg9dGhpcy5fdGFpbEluZGV4KX1fZ3Jvdygpe2NvbnN0IHQ9TWF0aC5tYXgodSxNYXRoLmZsb29yKHRoaXMuX2NhcGFjaXR5KmkpKTt0aGlzLl9yZXNpemUodCl9X3Nocmluaygpe2NvbnN0IHQ9TWF0aC5tYXgodSxNYXRoLmZsb29yKHRoaXMuX2NhcGFjaXR5KmUpKTt0aGlzLl9yZXNpemUodCl9X3Jlc2l6ZSh0KXtpZihoKHRoaXMuX3VwZGF0aW5nLFwibm90IHVwZGF0aW5nXCIpLHQ9PT10aGlzLl9jYXBhY2l0eSlyZXR1cm47Y29uc3QgaT1uZXcgXyh0aGlzLl9yY3R4LHRoaXMuX2luc3RhbmNlQnVmZmVyTGF5b3V0LnN0cmlkZSx0KTtpZih0aGlzLl9idWZmZXIpe3RoaXMuX2ZpcnN0SW5kZXgmJih0aGlzLl9maXJzdEluZGV4PSh0aGlzLl9maXJzdEluZGV4K3RoaXMuX2NhcGFjaXR5LXRoaXMuX3RhaWxJbmRleCkldGhpcy5fY2FwYWNpdHkpO2NvbnN0IHQ9dGhpcy5zaXplLGU9dGhpcy5fY29tcGFjdEluc3RhbmNlcyhpKTtoKGU9PT10LFwiaW52YWxpZCBjb21wYWN0aW9uXCIpLHRoaXMuX2J1ZmZlci5kZXN0cm95KCksdGhpcy5fdGFpbEluZGV4PTAsdGhpcy5faGVhZEluZGV4PWUsdGhpcy5fcHJldkhlYWRJbmRleD0wfXRoaXMuX3Jlc2l6ZWQ9ITAsdGhpcy5fY2FwYWNpdHk9dCx0aGlzLl9idWZmZXI9aSx0aGlzLl92aWV3PW5ldyBjKHRoaXMuX2luc3RhbmNlQnVmZmVyTGF5b3V0LmNyZWF0ZVZpZXcodGhpcy5fYnVmZmVyLmFycmF5KSl9X2NvbXBhY3RJbnN0YW5jZXModCl7Y29uc3QgaT10aGlzLl9oZWFkSW5kZXgsZT10aGlzLl90YWlsSW5kZXg7cmV0dXJuIGU8aT8odGhpcy5fYnVmZmVyLmNvcHlSYW5nZShlLGksdCksaS1lKTplPmk/KHRoaXMuX2J1ZmZlci5jb3B5UmFuZ2UoZSx0aGlzLl9jYXBhY2l0eSx0KSxpPjAmJnRoaXMuX2J1ZmZlci5jb3B5UmFuZ2UoMCxpLHQsdGhpcy5fY2FwYWNpdHktZSksaSsodGhpcy5fY2FwYWNpdHktZSkpOjB9X2luY3JlbWVudEhlYWQodD0xKXt0aGlzLl9oZWFkSW5kZXg9KHRoaXMuX2hlYWRJbmRleCt0KSV0aGlzLl9jYXBhY2l0eX1faW5jcmVtZW50VGFpbCh0PTEpe3RoaXMuX3RhaWxJbmRleD0odGhpcy5fdGFpbEluZGV4K3QpJXRoaXMuX2NhcGFjaXR5fV90cmFuc2ZlclJhbmdlKHQsaSl7dDxpP3RoaXMuX2J1ZmZlci50cmFuc2ZlclJhbmdlKHQsaSk6dD5pJiYoaT4wJiZ0aGlzLl9idWZmZXIudHJhbnNmZXJSYW5nZSgwLGkpLHRoaXMuX2J1ZmZlci50cmFuc2ZlclJhbmdlKHQsdGhpcy5fY2FwYWNpdHkpKX19Y29uc3QgdT02NDtleHBvcnR7ZiBhcyBSZW5kZXJJbnN0YW5jZURhdGEsYyBhcyBSZW5kZXJJbnN0YW5jZURhdGFWaWV3LHUgYXMgaW5pdGlhbENhcGFjaXR5fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==