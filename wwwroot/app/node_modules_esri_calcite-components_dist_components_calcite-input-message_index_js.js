export const __webpack_id__ = "node_modules_esri_calcite-components_dist_components_calcite-input-message_index_js";
export const __webpack_ids__ = ["node_modules_esri_calcite-components_dist_components_calcite-input-message_index_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/logger.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/logger.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ logger)
/* harmony export */ });
/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

const loggedDeprecations = /* @__PURE__ */ new Set();
const logLevels = {
  trace: 0,
  debug: 1,
  info: 2,
  warn: 4,
  error: 8,
  off: 10
};
function willLog(level) {
  return logLevels[level] >= logLevels[_runtime_js__WEBPACK_IMPORTED_MODULE_0__.l];
}
function forwardToConsole(level, ...data) {
  if (!willLog(level)) {
    return;
  }
  const badgeTemplate = "%ccalcite";
  const badgeStyle = "background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;";
  console[level].call(this, badgeTemplate, badgeStyle, ...data);
}
let listFormatter;
const logger = {
  debug: (message) => forwardToConsole("debug", message),
  info: (message) => forwardToConsole("info", message),
  warn: (message) => forwardToConsole("warn", message),
  error: (message) => forwardToConsole("error", message),
  trace: (message) => forwardToConsole("trace", message),
  deprecated
};
function deprecated(context, { component, name, suggested, removalVersion }) {
  const key = `${context}:${context === "component" ? "" : component}${name}`;
  if (loggedDeprecations.has(key)) {
    return;
  }
  loggedDeprecations.add(key);
  const multiSuggestions = Array.isArray(suggested);
  if (multiSuggestions && !listFormatter) {
    listFormatter = new Intl.ListFormat("en", { style: "long", type: "disjunction" });
  }
  const message = `[${name}] ${context} is deprecated and will be removed in ${removalVersion === "future" ? `a future version` : `v${removalVersion}`}.${suggested ? ` Use ${multiSuggestions ? listFormatter.format(suggested.map((suggestion) => `"${suggestion}"`)) : `"${suggested}"`} instead.` : ""}`;
  forwardToConsole("warn", message);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/observers.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/observers.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver),
/* harmony export */   u: () => (/* binding */ updateRefObserver)
/* harmony export */ });
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

function createObserver(type, callback, options) {
  if (lit__WEBPACK_IMPORTED_MODULE_0__.isServer) {
    return void 0;
  }
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return function() {
    return type === "intersection" ? window.IntersectionObserver : type === "mutation" ? ExtendedMutationObserver : window.ResizeObserver;
  }();
}
function updateRefObserver(observer, oldTarget, target, options) {
  if (!observer) {
    return;
  }
  if (oldTarget) {
    observer.unobserve(oldTarget);
  }
  if (!target) {
    return;
  }
  if (observer instanceof MutationObserver) {
    observer.observe(target, options);
    return;
  }
  observer.observe(target);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Icon: () => (/* binding */ Icon)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/logger.js */ "./node_modules/@esri/calcite-components/dist/chunks/logger.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */






const CSS = {
  flipRtl: "flip-rtl",
  svg: "svg"
};
const iconCache = {};
const requestCache = {};
const scaleToPx = {
  s: 16,
  m: 24,
  l: 32
};
function generateIconId({ icon, scale }) {
  const size = scaleToPx[scale];
  const name = normalizeIconName(icon);
  const filled = name.charAt(name.length - 1) === "F";
  const iconName = filled ? name.substring(0, name.length - 1) : name;
  return `${iconName}${size}${filled ? "F" : ""}`;
}
async function fetchIcon(props) {
  const cachedIconKey = generateIconId(props);
  const cachedIconData = getCachedIconDataByKey(cachedIconKey);
  if (cachedIconData) {
    return cachedIconData;
  }
  if (!requestCache[cachedIconKey]) {
    requestCache[cachedIconKey] = fetch((0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.g)(`./assets/icon/${cachedIconKey}.json`)).then((resp) => resp.json()).catch(() => {
      _chunks_logger_js__WEBPACK_IMPORTED_MODULE_5__.l.error(`${props.icon} (${props.scale}) icon failed to load`);
      return "";
    });
  }
  const path = await requestCache[cachedIconKey];
  iconCache[cachedIconKey] = path;
  return path;
}
function getCachedIconData(props) {
  return getCachedIconDataByKey(generateIconId(props));
}
function getCachedIconDataByKey(id) {
  return iconCache[id];
}
function normalizeIconName(name) {
  const numberLeadingName = !isNaN(Number(name.charAt(0)));
  const parts = name.split("-");
  const kebabCased = parts.length > 0;
  if (kebabCased) {
    const firstNonDigitInPartPattern = /[a-z]/i;
    name = parts.map((part, partIndex) => {
      return part.replace(firstNonDigitInPartPattern, function replacer(match, offset) {
        const isFirstCharInName = partIndex === 0 && offset === 0;
        if (isFirstCharInName) {
          return match;
        }
        return match.toUpperCase();
      });
    }).join("");
  }
  return numberLeadingName ? `i${name}` : name;
}
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`;
class Icon extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super(...arguments);
    this.visible = false;
    this.flipRtl = false;
    this.icon = null;
    this.preload = false;
    this.scale = "m";
  }
  static {
    this.properties = { pathData: [16, {}, { state: true }], visible: [16, {}, { state: true }], flipRtl: [7, {}, { reflect: true, type: Boolean }], icon: [3, {}, { reflect: true }], preload: [7, {}, { reflect: true, type: Boolean }], scale: [3, {}, { reflect: true }], textLabel: 1 };
  }
  static {
    this.styles = styles;
  }
  connectedCallback() {
    super.connectedCallback();
    if (this.preload) {
      this.visible = true;
      this.loadIconPathData();
      return;
    }
    if (!this.visible) {
      this.waitUntilVisible(() => {
        this.visible = true;
        this.loadIconPathData();
      });
    }
  }
  willUpdate(changes) {
    if (changes.has("icon") && (this.hasUpdated || this.icon !== null) || changes.has("scale") && (this.hasUpdated || this.scale !== "m")) {
      this.loadIconPathData();
    }
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.intersectionObserver?.disconnect();
    this.intersectionObserver = null;
  }
  async loadIconPathData() {
    const { icon, scale, visible } = this;
    if (lit__WEBPACK_IMPORTED_MODULE_1__.isServer || !icon || !visible) {
      return;
    }
    const fetchIconProps = { icon, scale };
    const pathData = getCachedIconData(fetchIconProps) || await fetchIcon(fetchIconProps);
    if (icon !== this.icon) {
      return;
    }
    this.pathData = pathData;
  }
  waitUntilVisible(callback) {
    this.intersectionObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__.c)("intersection", (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          this.intersectionObserver.disconnect();
          this.intersectionObserver = null;
          callback();
        }
      });
    }, { rootMargin: "50px" });
    if (!this.intersectionObserver) {
      callback();
      return;
    }
    this.intersectionObserver.observe(this.el);
  }
  render() {
    const { el, flipRtl, pathData, scale, textLabel } = this;
    const dir = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.g)(el);
    const size = scaleToPx[scale];
    const semantic = !!textLabel;
    const paths = [].concat(pathData || "");
    this.el.ariaHidden = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.t)(!semantic);
    this.el.ariaLabel = semantic ? textLabel : null;
    this.el.role = semantic ? "img" : null;
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<svg aria-hidden=true class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)({
      [CSS.flipRtl]: dir === "rtl" && flipRtl,
      [CSS.svg]: true
    })} fill=currentColor height=100% viewBox=${`0 0 ${size} ${size}`} width=100% xmlns=http://www.w3.org/2000/svg>${paths.map((path) => typeof path === "string" ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.svg)`<path d=${path ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} />` : (0,lit__WEBPACK_IMPORTED_MODULE_1__.svg)`<path d=${path.d ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} opacity=${("opacity" in path ? path.opacity : 1) ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} />`)}</svg>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-icon", Icon);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Icon: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Icon)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js");


/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-input-message/customElement.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-input-message/customElement.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InputMessage: () => (/* binding */ InputMessage)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */




const StatusIconDefaults = {
  valid: "check-circle",
  invalid: "exclamation-mark-triangle",
  idle: "information"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;display:flex;block-size:auto;inline-size:100%;align-items:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-1);opacity:1;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-block-start:var(--calcite-input-message-spacing, var(--calcite-input-message-spacing-value, var(--calcite-spacing-xxs)))}.calcite-input-message-icon{pointer-events:none;display:inline-flex;flex-shrink:0;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;margin-inline-end:var(--calcite-spacing-sm)}:host([status=invalid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-danger)))}:host([status=valid]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-status-success)))}:host([status=idle]) .calcite-input-message-icon{color:var(--calcite-input-message-icon-color, var(--calcite-icon-color, var(--calcite-color-brand)))}:host([scale=s]){font-size:var(--calcite-font-size--3);line-height:.75rem}:host([scale=m]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([hidden]){display:none}[hidden]{display:none}`;
const CSS = {
  inputMessageIcon: "calcite-input-message-icon"
};
class InputMessage extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super(...arguments);
    this.iconFlipRtl = false;
    this.scale = "m";
    this.status = "idle";
  }
  static {
    this.properties = { icon: [3, { converter: _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.stringOrBoolean }, { reflect: true }], iconFlipRtl: [7, {}, { reflect: true, type: Boolean }], scale: [3, {}, { reflect: true }], status: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  connectedCallback() {
    super.connectedCallback();
    this.requestedIcon = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.v)(StatusIconDefaults, this.icon, this.status);
  }
  willUpdate(changes) {
    if (changes.has("status") && (this.hasUpdated || this.status !== "idle") || changes.has("icon")) {
      this.requestedIcon = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.v)(StatusIconDefaults, this.icon, this.status);
    }
  }
  render() {
    const hidden = this.el.hidden;
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.setAttribute)(this.el, "calcite-hydrated-hidden", hidden);
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`${this.renderIcon(this.requestedIcon)}<slot></slot>`;
  }
  renderIcon(iconName) {
    if (iconName) {
      return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-icon class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.inputMessageIcon)} .flipRtl=${this.iconFlipRtl} .icon=${iconName} scale=s></calcite-icon>`;
    }
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-input-message", InputMessage);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-input-message/index.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-input-message/index.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InputMessage: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_1__.InputMessage)
/* harmony export */ });
/* harmony import */ var _calcite_icon_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-icon/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-input-message/customElement.js");



/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19jYWxjaXRlLWlucHV0LW1lc3NhZ2VfaW5kZXhfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBDQUFRO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxhQUFhLG9CQUFvQixpQkFBaUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0Q0FBNEM7QUFDM0UsaUJBQWlCLFFBQVEsR0FBRyx5Q0FBeUMsRUFBRSxLQUFLO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxvQ0FBb0M7QUFDcEY7QUFDQSxzQkFBc0IsS0FBSyxJQUFJLFNBQVMsdUNBQXVDLHVEQUF1RCxlQUFlLEVBQUUsR0FBRyxvQkFBb0IsMEVBQTBFLFdBQVcsV0FBVyxVQUFVLElBQUksZUFBZTtBQUMzUztBQUNBO0FBR0U7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaERGO0FBQ0E7QUFDQTtBQUMrQjtBQUMvQjtBQUNBLE1BQU0seUNBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckRG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aUQscUdBQXFHLGlCQUFpQixzQ0FBc0MsbUJBQW1CLGlCQUFpQixzQ0FBc0MsaUJBQWlCLGlCQUFpQixzQ0FBc0MsaUJBQWlCLGdCQUFnQixhQUFhLFNBQVMsYUFBYTtBQUM5MUQ7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVksV0FBVywyREFBZSxFQUFFLElBQUksZUFBZSxzQkFBc0IsSUFBSSw4QkFBOEIsZ0JBQWdCLElBQUksZUFBZSxpQkFBaUIsSUFBSSxlQUFlO0FBQ2xOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpREFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFnQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNERBQVk7QUFDaEIsV0FBVyx5Q0FBSSxHQUFHLG9DQUFvQztBQUN0RDtBQUNBO0FBQ0E7QUFDQSxhQUFhLHlDQUFJLHVCQUF1Qiw0REFBWSx3QkFBd0IsV0FBVyxrQkFBa0IsUUFBUSxVQUFVO0FBQzNIO0FBQ0E7QUFDQTtBQUNBLHFEQUFhO0FBR1g7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcERnQyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL29ic2VydmVycy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtaWNvbi9jdXN0b21FbGVtZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1pbnB1dC1tZXNzYWdlL2N1c3RvbUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLWlucHV0LW1lc3NhZ2UvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGwgYXMgbG9nTGV2ZWwgfSBmcm9tIFwiLi9ydW50aW1lLmpzXCI7XG5jb25zdCBsb2dnZWREZXByZWNhdGlvbnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuY29uc3QgbG9nTGV2ZWxzID0ge1xuICB0cmFjZTogMCxcbiAgZGVidWc6IDEsXG4gIGluZm86IDIsXG4gIHdhcm46IDQsXG4gIGVycm9yOiA4LFxuICBvZmY6IDEwXG59O1xuZnVuY3Rpb24gd2lsbExvZyhsZXZlbCkge1xuICByZXR1cm4gbG9nTGV2ZWxzW2xldmVsXSA+PSBsb2dMZXZlbHNbbG9nTGV2ZWxdO1xufVxuZnVuY3Rpb24gZm9yd2FyZFRvQ29uc29sZShsZXZlbCwgLi4uZGF0YSkge1xuICBpZiAoIXdpbGxMb2cobGV2ZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGJhZGdlVGVtcGxhdGUgPSBcIiVjY2FsY2l0ZVwiO1xuICBjb25zdCBiYWRnZVN0eWxlID0gXCJiYWNrZ3JvdW5kOiAjMDA3QUMyOyBjb2xvcjogI2ZmZjsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiAycHggNHB4O1wiO1xuICBjb25zb2xlW2xldmVsXS5jYWxsKHRoaXMsIGJhZGdlVGVtcGxhdGUsIGJhZGdlU3R5bGUsIC4uLmRhdGEpO1xufVxubGV0IGxpc3RGb3JtYXR0ZXI7XG5jb25zdCBsb2dnZXIgPSB7XG4gIGRlYnVnOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcImRlYnVnXCIsIG1lc3NhZ2UpLFxuICBpbmZvOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcImluZm9cIiwgbWVzc2FnZSksXG4gIHdhcm46IChtZXNzYWdlKSA9PiBmb3J3YXJkVG9Db25zb2xlKFwid2FyblwiLCBtZXNzYWdlKSxcbiAgZXJyb3I6IChtZXNzYWdlKSA9PiBmb3J3YXJkVG9Db25zb2xlKFwiZXJyb3JcIiwgbWVzc2FnZSksXG4gIHRyYWNlOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcInRyYWNlXCIsIG1lc3NhZ2UpLFxuICBkZXByZWNhdGVkXG59O1xuZnVuY3Rpb24gZGVwcmVjYXRlZChjb250ZXh0LCB7IGNvbXBvbmVudCwgbmFtZSwgc3VnZ2VzdGVkLCByZW1vdmFsVmVyc2lvbiB9KSB7XG4gIGNvbnN0IGtleSA9IGAke2NvbnRleHR9OiR7Y29udGV4dCA9PT0gXCJjb21wb25lbnRcIiA/IFwiXCIgOiBjb21wb25lbnR9JHtuYW1lfWA7XG4gIGlmIChsb2dnZWREZXByZWNhdGlvbnMuaGFzKGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbG9nZ2VkRGVwcmVjYXRpb25zLmFkZChrZXkpO1xuICBjb25zdCBtdWx0aVN1Z2dlc3Rpb25zID0gQXJyYXkuaXNBcnJheShzdWdnZXN0ZWQpO1xuICBpZiAobXVsdGlTdWdnZXN0aW9ucyAmJiAhbGlzdEZvcm1hdHRlcikge1xuICAgIGxpc3RGb3JtYXR0ZXIgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KFwiZW5cIiwgeyBzdHlsZTogXCJsb25nXCIsIHR5cGU6IFwiZGlzanVuY3Rpb25cIiB9KTtcbiAgfVxuICBjb25zdCBtZXNzYWdlID0gYFske25hbWV9XSAke2NvbnRleHR9IGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAke3JlbW92YWxWZXJzaW9uID09PSBcImZ1dHVyZVwiID8gYGEgZnV0dXJlIHZlcnNpb25gIDogYHYke3JlbW92YWxWZXJzaW9ufWB9LiR7c3VnZ2VzdGVkID8gYCBVc2UgJHttdWx0aVN1Z2dlc3Rpb25zID8gbGlzdEZvcm1hdHRlci5mb3JtYXQoc3VnZ2VzdGVkLm1hcCgoc3VnZ2VzdGlvbikgPT4gYFwiJHtzdWdnZXN0aW9ufVwiYCkpIDogYFwiJHtzdWdnZXN0ZWR9XCJgfSBpbnN0ZWFkLmAgOiBcIlwifWA7XG4gIGZvcndhcmRUb0NvbnNvbGUoXCJ3YXJuXCIsIG1lc3NhZ2UpO1xufVxuZXhwb3J0IHtcbiAgbG9nZ2VyIGFzIGxcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgaXNTZXJ2ZXIgfSBmcm9tIFwibGl0XCI7XG5mdW5jdGlvbiBjcmVhdGVPYnNlcnZlcih0eXBlLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICBpZiAoaXNTZXJ2ZXIpIHtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG4gIGNvbnN0IE9ic2VydmVyID0gZ2V0T2JzZXJ2ZXIodHlwZSk7XG4gIHJldHVybiBuZXcgT2JzZXJ2ZXIoY2FsbGJhY2ssIG9wdGlvbnMpO1xufVxuZnVuY3Rpb24gZ2V0T2JzZXJ2ZXIodHlwZSkge1xuICBjbGFzcyBFeHRlbmRlZE11dGF0aW9uT2JzZXJ2ZXIgZXh0ZW5kcyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2spIHtcbiAgICAgIHN1cGVyKGNhbGxiYWNrKTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBvYnNlcnZlKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5LnB1c2goeyB0YXJnZXQsIG9wdGlvbnMgfSk7XG4gICAgICByZXR1cm4gc3VwZXIub2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICB1bm9ic2VydmUodGFyZ2V0KSB7XG4gICAgICBjb25zdCBuZXdPYnNlcnZlZEVudHJpZXMgPSB0aGlzLm9ic2VydmVkRW50cnkuZmlsdGVyKChvYnNlcnZlZCkgPT4gb2JzZXJ2ZWQudGFyZ2V0ICE9PSB0YXJnZXQpO1xuICAgICAgdGhpcy5vYnNlcnZlZEVudHJ5ID0gW107XG4gICAgICB0aGlzLmNhbGxiYWNrKHN1cGVyLnRha2VSZWNvcmRzKCksIHRoaXMpO1xuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICBuZXdPYnNlcnZlZEVudHJpZXMuZm9yRWFjaCgob2JzZXJ2ZWQpID0+IHRoaXMub2JzZXJ2ZShvYnNlcnZlZC50YXJnZXQsIG9ic2VydmVkLm9wdGlvbnMpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0eXBlID09PSBcImludGVyc2VjdGlvblwiID8gd2luZG93LkludGVyc2VjdGlvbk9ic2VydmVyIDogdHlwZSA9PT0gXCJtdXRhdGlvblwiID8gRXh0ZW5kZWRNdXRhdGlvbk9ic2VydmVyIDogd2luZG93LlJlc2l6ZU9ic2VydmVyO1xuICB9KCk7XG59XG5mdW5jdGlvbiB1cGRhdGVSZWZPYnNlcnZlcihvYnNlcnZlciwgb2xkVGFyZ2V0LCB0YXJnZXQsIG9wdGlvbnMpIHtcbiAgaWYgKCFvYnNlcnZlcikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAob2xkVGFyZ2V0KSB7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlKG9sZFRhcmdldCk7XG4gIH1cbiAgaWYgKCF0YXJnZXQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG9ic2VydmVyIGluc3RhbmNlb2YgTXV0YXRpb25PYnNlcnZlcikge1xuICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0LCBvcHRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cbiAgb2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXQpO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlT2JzZXJ2ZXIgYXMgYyxcbiAgdXBkYXRlUmVmT2JzZXJ2ZXIgYXMgdVxufTtcbiIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBnIGFzIGdldEFzc2V0UGF0aCwgYyBhcyBjdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBjc3MsIGlzU2VydmVyLCBub3RoaW5nLCBzdmcsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGcgYXMgZ2V0RWxlbWVudERpciwgdCBhcyB0b0FyaWFCb29sZWFuIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9kb20uanNcIjtcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL29ic2VydmVycy5qc1wiO1xuaW1wb3J0IHsgbCBhcyBsb2dnZXIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2xvZ2dlci5qc1wiO1xuY29uc3QgQ1NTID0ge1xuICBmbGlwUnRsOiBcImZsaXAtcnRsXCIsXG4gIHN2ZzogXCJzdmdcIlxufTtcbmNvbnN0IGljb25DYWNoZSA9IHt9O1xuY29uc3QgcmVxdWVzdENhY2hlID0ge307XG5jb25zdCBzY2FsZVRvUHggPSB7XG4gIHM6IDE2LFxuICBtOiAyNCxcbiAgbDogMzJcbn07XG5mdW5jdGlvbiBnZW5lcmF0ZUljb25JZCh7IGljb24sIHNjYWxlIH0pIHtcbiAgY29uc3Qgc2l6ZSA9IHNjYWxlVG9QeFtzY2FsZV07XG4gIGNvbnN0IG5hbWUgPSBub3JtYWxpemVJY29uTmFtZShpY29uKTtcbiAgY29uc3QgZmlsbGVkID0gbmFtZS5jaGFyQXQobmFtZS5sZW5ndGggLSAxKSA9PT0gXCJGXCI7XG4gIGNvbnN0IGljb25OYW1lID0gZmlsbGVkID8gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sZW5ndGggLSAxKSA6IG5hbWU7XG4gIHJldHVybiBgJHtpY29uTmFtZX0ke3NpemV9JHtmaWxsZWQgPyBcIkZcIiA6IFwiXCJ9YDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoSWNvbihwcm9wcykge1xuICBjb25zdCBjYWNoZWRJY29uS2V5ID0gZ2VuZXJhdGVJY29uSWQocHJvcHMpO1xuICBjb25zdCBjYWNoZWRJY29uRGF0YSA9IGdldENhY2hlZEljb25EYXRhQnlLZXkoY2FjaGVkSWNvbktleSk7XG4gIGlmIChjYWNoZWRJY29uRGF0YSkge1xuICAgIHJldHVybiBjYWNoZWRJY29uRGF0YTtcbiAgfVxuICBpZiAoIXJlcXVlc3RDYWNoZVtjYWNoZWRJY29uS2V5XSkge1xuICAgIHJlcXVlc3RDYWNoZVtjYWNoZWRJY29uS2V5XSA9IGZldGNoKGdldEFzc2V0UGF0aChgLi9hc3NldHMvaWNvbi8ke2NhY2hlZEljb25LZXl9Lmpzb25gKSkudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpLmNhdGNoKCgpID0+IHtcbiAgICAgIGxvZ2dlci5lcnJvcihgJHtwcm9wcy5pY29ufSAoJHtwcm9wcy5zY2FsZX0pIGljb24gZmFpbGVkIHRvIGxvYWRgKTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IHBhdGggPSBhd2FpdCByZXF1ZXN0Q2FjaGVbY2FjaGVkSWNvbktleV07XG4gIGljb25DYWNoZVtjYWNoZWRJY29uS2V5XSA9IHBhdGg7XG4gIHJldHVybiBwYXRoO1xufVxuZnVuY3Rpb24gZ2V0Q2FjaGVkSWNvbkRhdGEocHJvcHMpIHtcbiAgcmV0dXJuIGdldENhY2hlZEljb25EYXRhQnlLZXkoZ2VuZXJhdGVJY29uSWQocHJvcHMpKTtcbn1cbmZ1bmN0aW9uIGdldENhY2hlZEljb25EYXRhQnlLZXkoaWQpIHtcbiAgcmV0dXJuIGljb25DYWNoZVtpZF07XG59XG5mdW5jdGlvbiBub3JtYWxpemVJY29uTmFtZShuYW1lKSB7XG4gIGNvbnN0IG51bWJlckxlYWRpbmdOYW1lID0gIWlzTmFOKE51bWJlcihuYW1lLmNoYXJBdCgwKSkpO1xuICBjb25zdCBwYXJ0cyA9IG5hbWUuc3BsaXQoXCItXCIpO1xuICBjb25zdCBrZWJhYkNhc2VkID0gcGFydHMubGVuZ3RoID4gMDtcbiAgaWYgKGtlYmFiQ2FzZWQpIHtcbiAgICBjb25zdCBmaXJzdE5vbkRpZ2l0SW5QYXJ0UGF0dGVybiA9IC9bYS16XS9pO1xuICAgIG5hbWUgPSBwYXJ0cy5tYXAoKHBhcnQsIHBhcnRJbmRleCkgPT4ge1xuICAgICAgcmV0dXJuIHBhcnQucmVwbGFjZShmaXJzdE5vbkRpZ2l0SW5QYXJ0UGF0dGVybiwgZnVuY3Rpb24gcmVwbGFjZXIobWF0Y2gsIG9mZnNldCkge1xuICAgICAgICBjb25zdCBpc0ZpcnN0Q2hhckluTmFtZSA9IHBhcnRJbmRleCA9PT0gMCAmJiBvZmZzZXQgPT09IDA7XG4gICAgICAgIGlmIChpc0ZpcnN0Q2hhckluTmFtZSkge1xuICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTtcbiAgICAgIH0pO1xuICAgIH0pLmpvaW4oXCJcIik7XG4gIH1cbiAgcmV0dXJuIG51bWJlckxlYWRpbmdOYW1lID8gYGkke25hbWV9YCA6IG5hbWU7XG59XG5jb25zdCBzdHlsZXMgPSBjc3NgOmhvc3R7LS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzOiB2YXIoIC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpICl9Omhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDtjb2xvcjp2YXIoLS1jYWxjaXRlLWljb24tY29sb3IsIHZhcigtLWNhbGNpdGUtdWktaWNvbi1jb2xvciwgY3VycmVudENvbG9yKSl9Omhvc3QoW3NjYWxlPXNdKXtpbmxpbmUtc2l6ZToxNnB4O2Jsb2NrLXNpemU6MTZweDttaW4taW5saW5lLXNpemU6MTZweDttaW4tYmxvY2stc2l6ZToxNnB4fTpob3N0KFtzY2FsZT1tXSl7aW5saW5lLXNpemU6MjRweDtibG9jay1zaXplOjI0cHg7bWluLWlubGluZS1zaXplOjI0cHg7bWluLWJsb2NrLXNpemU6MjRweH06aG9zdChbc2NhbGU9bF0pe2lubGluZS1zaXplOjMycHg7YmxvY2stc2l6ZTozMnB4O21pbi1pbmxpbmUtc2l6ZTozMnB4O21pbi1ibG9jay1zaXplOjMycHh9LmZsaXAtcnRse3RyYW5zZm9ybTpzY2FsZVgoLTEpfS5zdmd7ZGlzcGxheTpibG9ja306aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1gO1xuY2xhc3MgSWNvbiBleHRlbmRzIExpdEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuZmxpcFJ0bCA9IGZhbHNlO1xuICAgIHRoaXMuaWNvbiA9IG51bGw7XG4gICAgdGhpcy5wcmVsb2FkID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBwYXRoRGF0YTogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgdmlzaWJsZTogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgZmxpcFJ0bDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIGljb246IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBwcmVsb2FkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgc2NhbGU6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCB0ZXh0TGFiZWw6IDEgfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKHRoaXMucHJlbG9hZCkge1xuICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIHRoaXMubG9hZEljb25QYXRoRGF0YSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgdGhpcy53YWl0VW50aWxWaXNpYmxlKCgpID0+IHtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sb2FkSWNvblBhdGhEYXRhKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgd2lsbFVwZGF0ZShjaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwiaWNvblwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuaWNvbiAhPT0gbnVsbCkgfHwgY2hhbmdlcy5oYXMoXCJzY2FsZVwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuc2NhbGUgIT09IFwibVwiKSkge1xuICAgICAgdGhpcy5sb2FkSWNvblBhdGhEYXRhKCk7XG4gICAgfVxuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBudWxsO1xuICB9XG4gIGFzeW5jIGxvYWRJY29uUGF0aERhdGEoKSB7XG4gICAgY29uc3QgeyBpY29uLCBzY2FsZSwgdmlzaWJsZSB9ID0gdGhpcztcbiAgICBpZiAoaXNTZXJ2ZXIgfHwgIWljb24gfHwgIXZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZmV0Y2hJY29uUHJvcHMgPSB7IGljb24sIHNjYWxlIH07XG4gICAgY29uc3QgcGF0aERhdGEgPSBnZXRDYWNoZWRJY29uRGF0YShmZXRjaEljb25Qcm9wcykgfHwgYXdhaXQgZmV0Y2hJY29uKGZldGNoSWNvblByb3BzKTtcbiAgICBpZiAoaWNvbiAhPT0gdGhpcy5pY29uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucGF0aERhdGEgPSBwYXRoRGF0YTtcbiAgfVxuICB3YWl0VW50aWxWaXNpYmxlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwiaW50ZXJzZWN0aW9uXCIsIChlbnRyaWVzKSA9PiB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIHsgcm9vdE1hcmdpbjogXCI1MHB4XCIgfSk7XG4gICAgaWYgKCF0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICBjYWxsYmFjaygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZWwsIGZsaXBSdGwsIHBhdGhEYXRhLCBzY2FsZSwgdGV4dExhYmVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGRpciA9IGdldEVsZW1lbnREaXIoZWwpO1xuICAgIGNvbnN0IHNpemUgPSBzY2FsZVRvUHhbc2NhbGVdO1xuICAgIGNvbnN0IHNlbWFudGljID0gISF0ZXh0TGFiZWw7XG4gICAgY29uc3QgcGF0aHMgPSBbXS5jb25jYXQocGF0aERhdGEgfHwgXCJcIik7XG4gICAgdGhpcy5lbC5hcmlhSGlkZGVuID0gdG9BcmlhQm9vbGVhbighc2VtYW50aWMpO1xuICAgIHRoaXMuZWwuYXJpYUxhYmVsID0gc2VtYW50aWMgPyB0ZXh0TGFiZWwgOiBudWxsO1xuICAgIHRoaXMuZWwucm9sZSA9IHNlbWFudGljID8gXCJpbWdcIiA6IG51bGw7XG4gICAgcmV0dXJuIGh0bWxgPHN2ZyBhcmlhLWhpZGRlbj10cnVlIGNsYXNzPSR7c2FmZUNsYXNzTWFwKHtcbiAgICAgIFtDU1MuZmxpcFJ0bF06IGRpciA9PT0gXCJydGxcIiAmJiBmbGlwUnRsLFxuICAgICAgW0NTUy5zdmddOiB0cnVlXG4gICAgfSl9IGZpbGw9Y3VycmVudENvbG9yIGhlaWdodD0xMDAlIHZpZXdCb3g9JHtgMCAwICR7c2l6ZX0gJHtzaXplfWB9IHdpZHRoPTEwMCUgeG1sbnM9aHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmc+JHtwYXRocy5tYXAoKHBhdGgpID0+IHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiID8gc3ZnYDxwYXRoIGQ9JHtwYXRoID8/IG5vdGhpbmd9IC8+YCA6IHN2Z2A8cGF0aCBkPSR7cGF0aC5kID8/IG5vdGhpbmd9IG9wYWNpdHk9JHsoXCJvcGFjaXR5XCIgaW4gcGF0aCA/IHBhdGgub3BhY2l0eSA6IDEpID8/IG5vdGhpbmd9IC8+YCl9PC9zdmc+YDtcbiAgfVxufVxuY3VzdG9tRWxlbWVudChcImNhbGNpdGUtaWNvblwiLCBJY29uKTtcbmV4cG9ydCB7XG4gIEljb25cbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgYyBhcyBjdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBzdHJpbmdPckJvb2xlYW4sIHNldEF0dHJpYnV0ZSwgc2FmZUNsYXNzTWFwIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyB2IGFzIHNldFJlcXVlc3RlZEljb24gfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2RvbS5qc1wiO1xuY29uc3QgU3RhdHVzSWNvbkRlZmF1bHRzID0ge1xuICB2YWxpZDogXCJjaGVjay1jaXJjbGVcIixcbiAgaW52YWxpZDogXCJleGNsYW1hdGlvbi1tYXJrLXRyaWFuZ2xlXCIsXG4gIGlkbGU6IFwiaW5mb3JtYXRpb25cIlxufTtcbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpmbGV4O2Jsb2NrLXNpemU6YXV0bztpbmxpbmUtc2l6ZToxMDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpO29wYWNpdHk6MTt0cmFuc2l0aW9uLXByb3BlcnR5OmJhY2tncm91bmQtY29sb3IsYmxvY2stc2l6ZSxib3JkZXItY29sb3IsYm94LXNoYWRvdyxjb2xvcixpbnNldC1ibG9jay1lbmQsaW5zZXQtYmxvY2stc3RhcnQsaW5zZXQtaW5saW5lLWVuZCxpbnNldC1pbmxpbmUtc3RhcnQsaW5zZXQtc2l6ZSxvcGFjaXR5LG91dGxpbmUtY29sb3IsdHJhbnNmb3JtO3RyYW5zaXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWluLW91dDttYXJnaW4tYmxvY2stc3RhcnQ6dmFyKC0tY2FsY2l0ZS1pbnB1dC1tZXNzYWdlLXNwYWNpbmcsIHZhcigtLWNhbGNpdGUtaW5wdXQtbWVzc2FnZS1zcGFjaW5nLXZhbHVlLCB2YXIoLS1jYWxjaXRlLXNwYWNpbmcteHhzKSkpfS5jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbntwb2ludGVyLWV2ZW50czpub25lO2Rpc3BsYXk6aW5saW5lLWZsZXg7ZmxleC1zaHJpbms6MDt0cmFuc2l0aW9uLXByb3BlcnR5OmJhY2tncm91bmQtY29sb3IsYmxvY2stc2l6ZSxib3JkZXItY29sb3IsYm94LXNoYWRvdyxjb2xvcixpbnNldC1ibG9jay1lbmQsaW5zZXQtYmxvY2stc3RhcnQsaW5zZXQtaW5saW5lLWVuZCxpbnNldC1pbmxpbmUtc3RhcnQsaW5zZXQtc2l6ZSxvcGFjaXR5LG91dGxpbmUtY29sb3IsdHJhbnNmb3JtO3RyYW5zaXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWluLW91dDttYXJnaW4taW5saW5lLWVuZDp2YXIoLS1jYWxjaXRlLXNwYWNpbmctc20pfTpob3N0KFtzdGF0dXM9aW52YWxpZF0pIC5jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbntjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbi1jb2xvciwgdmFyKC0tY2FsY2l0ZS1pY29uLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpKSl9Omhvc3QoW3N0YXR1cz12YWxpZF0pIC5jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbntjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbi1jb2xvciwgdmFyKC0tY2FsY2l0ZS1pY29uLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1zdWNjZXNzKSkpfTpob3N0KFtzdGF0dXM9aWRsZV0pIC5jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbntjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvbi1jb2xvciwgdmFyKC0tY2FsY2l0ZS1pY29uLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkpfTpob3N0KFtzY2FsZT1zXSl7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0zKTtsaW5lLWhlaWdodDouNzVyZW19Omhvc3QoW3NjYWxlPW1dKXtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTIpO2xpbmUtaGVpZ2h0OjFyZW19Omhvc3QoW3NjYWxlPWxdKXtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpO2xpbmUtaGVpZ2h0OjFyZW19Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9YDtcbmNvbnN0IENTUyA9IHtcbiAgaW5wdXRNZXNzYWdlSWNvbjogXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2UtaWNvblwiXG59O1xuY2xhc3MgSW5wdXRNZXNzYWdlIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5pY29uRmxpcFJ0bCA9IGZhbHNlO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnN0YXR1cyA9IFwiaWRsZVwiO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBpY29uOiBbMywgeyBjb252ZXJ0ZXI6IHN0cmluZ09yQm9vbGVhbiB9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIGljb25GbGlwUnRsOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgc2NhbGU6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBzdGF0dXM6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMucmVxdWVzdGVkSWNvbiA9IHNldFJlcXVlc3RlZEljb24oU3RhdHVzSWNvbkRlZmF1bHRzLCB0aGlzLmljb24sIHRoaXMuc3RhdHVzKTtcbiAgfVxuICB3aWxsVXBkYXRlKGNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJzdGF0dXNcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLnN0YXR1cyAhPT0gXCJpZGxlXCIpIHx8IGNoYW5nZXMuaGFzKFwiaWNvblwiKSkge1xuICAgICAgdGhpcy5yZXF1ZXN0ZWRJY29uID0gc2V0UmVxdWVzdGVkSWNvbihTdGF0dXNJY29uRGVmYXVsdHMsIHRoaXMuaWNvbiwgdGhpcy5zdGF0dXMpO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgaGlkZGVuID0gdGhpcy5lbC5oaWRkZW47XG4gICAgc2V0QXR0cmlidXRlKHRoaXMuZWwsIFwiY2FsY2l0ZS1oeWRyYXRlZC1oaWRkZW5cIiwgaGlkZGVuKTtcbiAgICByZXR1cm4gaHRtbGAke3RoaXMucmVuZGVySWNvbih0aGlzLnJlcXVlc3RlZEljb24pfTxzbG90Pjwvc2xvdD5gO1xuICB9XG4gIHJlbmRlckljb24oaWNvbk5hbWUpIHtcbiAgICBpZiAoaWNvbk5hbWUpIHtcbiAgICAgIHJldHVybiBodG1sYDxjYWxjaXRlLWljb24gY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmlucHV0TWVzc2FnZUljb24pfSAuZmxpcFJ0bD0ke3RoaXMuaWNvbkZsaXBSdGx9IC5pY29uPSR7aWNvbk5hbWV9IHNjYWxlPXM+PC9jYWxjaXRlLWljb24+YDtcbiAgICB9XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLWlucHV0LW1lc3NhZ2VcIiwgSW5wdXRNZXNzYWdlKTtcbmV4cG9ydCB7XG4gIElucHV0TWVzc2FnZVxufTtcbiIsImltcG9ydCBcIi4uL2NhbGNpdGUtaWNvbi9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3VzdG9tRWxlbWVudC5qc1wiOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==