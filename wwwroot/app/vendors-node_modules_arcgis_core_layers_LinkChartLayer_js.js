export const __webpack_id__ = "vendors-node_modules_arcgis_core_layers_LinkChartLayer_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_layers_LinkChartLayer_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/LinkChartLayer.js":
/*!************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/LinkChartLayer.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ J)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _applications_KnowledgeStudio_resourceSerializationUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../applications/KnowledgeStudio/resourceSerializationUtils.js */ "./node_modules/@arcgis/core/applications/KnowledgeStudio/resourceSerializationUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/MultiOriginJSONSupport.js */ "./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../core/accessorSupport/PropertyOrigin.js */ "./node_modules/@arcgis/core/core/accessorSupport/PropertyOrigin.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../geometry/Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/* harmony import */ var _geometry_Polyline_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../geometry/Polyline.js */ "./node_modules/@arcgis/core/geometry/Polyline.js");
/* harmony import */ var _Layer_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Layer.js */ "./node_modules/@arcgis/core/layers/Layer.js");
/* harmony import */ var _graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./knowledgeGraph/constants.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/constants.js");
/* harmony import */ var _knowledgeGraph_IdealEdgeLengthTypeOptions_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./knowledgeGraph/IdealEdgeLengthTypeOptions.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/IdealEdgeLengthTypeOptions.js");
/* harmony import */ var _knowledgeGraph_KnowledgeGraphLayerDataManager_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./knowledgeGraph/KnowledgeGraphLayerDataManager.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/KnowledgeGraphLayerDataManager.js");
/* harmony import */ var _knowledgeGraph_KnowledgeGraphSublayer_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./knowledgeGraph/KnowledgeGraphSublayer.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/KnowledgeGraphSublayer.js");
/* harmony import */ var _knowledgeGraph_layerUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./knowledgeGraph/layerUtils.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/layerUtils.js");
/* harmony import */ var _knowledgeGraph_SessionMemoryStorage_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./knowledgeGraph/SessionMemoryStorage.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/SessionMemoryStorage.js");
/* harmony import */ var _knowledgeGraph_supportUtils_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./knowledgeGraph/supportUtils.js */ "./node_modules/@arcgis/core/layers/knowledgeGraph/supportUtils.js");
/* harmony import */ var _mixins_BlendLayer_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./mixins/BlendLayer.js */ "./node_modules/@arcgis/core/layers/mixins/BlendLayer.js");
/* harmony import */ var _mixins_OperationalLayer_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./mixins/OperationalLayer.js */ "./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js");
/* harmony import */ var _mixins_ScaleRangeLayer_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./mixins/ScaleRangeLayer.js */ "./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js");
/* harmony import */ var _support_commonProperties_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./support/commonProperties.js */ "./node_modules/@arcgis/core/layers/support/commonProperties.js");
/* harmony import */ var _libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../libs/linkchartlayout/LinkChartLayout.js */ "./node_modules/@arcgis/core/libs/linkchartlayout/LinkChartLayout.js");
/* harmony import */ var _rest_knowledgeGraphService_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../rest/knowledgeGraphService.js */ "./node_modules/@arcgis/core/rest/knowledgeGraphService.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let q=class extends((0,_mixins_OperationalLayer_js__WEBPACK_IMPORTED_MODULE_27__.OperationalLayer)((0,_mixins_BlendLayer_js__WEBPACK_IMPORTED_MODULE_26__.BlendLayer)((0,_mixins_ScaleRangeLayer_js__WEBPACK_IMPORTED_MODULE_28__.ScaleRangeLayer)((0,_core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_6__.MultiOriginJSONMixin)(_Layer_js__WEBPACK_IMPORTED_MODULE_17__["default"]))))){constructor(e){if(super(e),this.url=null,this.dataPreloadedInLocalCache=!1,this.initializationLinkChartConfig=null,this.membershipModified=!0,this._currentLinkChartConfig={layoutMode:"organic-standard"},this._graphTypeLookup=new Map,this.dataManager=null,this.knowledgeGraph=null,this.layers=new(_core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"].ofType(_knowledgeGraph_KnowledgeGraphSublayer_js__WEBPACK_IMPORTED_MODULE_22__["default"])),this.entityLinkChartDiagramLookup=new Map,this.relationshipLinkChartDiagramLookup=new Map,this.linkChartExtent=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__["default"]({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7}),this.memberEntityTypes=null,this.memberRelationshipTypes=null,this.operationalLayerType="LinkChartLayer",this.sublayerIdsCache=new Map,this.tables=new(_core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"].ofType(_knowledgeGraph_KnowledgeGraphSublayer_js__WEBPACK_IMPORTED_MODULE_22__["default"])),this.type="link-chart",this.chronologicalAuxiliaryGraphics=null,this._originalInclusionList=e?.initializationInclusionModeDefinition,e?.dataPreloadedInLocalCache&&!e?.initializationInclusionModeDefinition)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("knowledge-graph:linkchart-layer-constructor","If creating a link chart composite layer and configured that data is already loaded in the cache, you must specify an inclusion list so the Composite Layer knows what records belong to it");this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_8__.watch)((()=>this.layers.concat(this.tables)),((e,t)=>this._handleSublayersChange(e,t)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_8__.sync))}normalizeCtorArgs(e){if(!e)return{};const{url:t,title:a,dataPreloadedInLocalCache:i,initializationLinkChartConfig:n}=e;return{url:t,title:a,dataPreloadedInLocalCache:i,initializationLinkChartConfig:n}}_initializeLayerProperties(e){if(!this.title&&this.url){const e=this.url.split("/");this.title=e[e.length-2]}const t=new Set;let a=[],o=[];if(e.inclusionModeDefinition&&(!e.inclusionModeDefinition.namedTypeDefinitions||e.inclusionModeDefinition.namedTypeDefinitions.size<1))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("knowledge-graph:composite-layer-constructor","If an explicit inclusion definition is defined, at least one namedTypeDefinition must also be defined");e.inclusionModeDefinition?.generateAllSublayers?(a=e.knowledgeGraph.dataModel.entityTypes??[],o=e.knowledgeGraph.dataModel.relationshipTypes??[]):e.inclusionModeDefinition?.namedTypeDefinitions&&e.inclusionModeDefinition?.namedTypeDefinitions.size>0?e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((i,s)=>{const r=this._graphTypeLookup.get(s);if(!r)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn(`A named type, ${s}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(s);"relationship"===r.type?t.has(s)||(t.add(s),o.push(r)):"entity"===r.type?t.has(s)||(t.add(s),a.push(r)):(_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn(`A named type, ${s}, was in the inclusion list that wasn't properly modeled and will be removed`),e.inclusionModeDefinition?.namedTypeDefinitions.delete(s))})):(a=e.knowledgeGraph.dataModel.entityTypes??[],o=e.knowledgeGraph.dataModel.relationshipTypes??[]);const s=new _knowledgeGraph_KnowledgeGraphLayerDataManager_js__WEBPACK_IMPORTED_MODULE_21__.KnowledgeGraphLayerDataManager({knowledgeGraph:e.knowledgeGraph,inclusionModeDefinition:e.inclusionModeDefinition});this.knowledgeGraph=e.knowledgeGraph,this.memberEntityTypes=a,this.memberRelationshipTypes=o,this.dataManager=s}load(e){const a=async()=>{const e=[],t=[];this.loadLayerAssumingLocalCache(),this._layersLoadedFromAuthoritativeItem()||await (0,_knowledgeGraph_layerUtils_js__WEBPACK_IMPORTED_MODULE_23__.initializeLayersFromClientData)(this),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach((e=>{e.useAllData=!1})),await this._initializeDiagram(),this.layers.forEach((a=>{t.push(a.refreshCachedQueryEngine()),e.push(new Promise((e=>{a.on("layerview-create",(()=>{e(null)}))})))})),this.tables.forEach((e=>{t.push(e.refreshCachedQueryEngine())})),await Promise.all(t)};return this.addResolvingPromise(new Promise((i=>{(0,_rest_knowledgeGraphService_js__WEBPACK_IMPORTED_MODULE_31__.fetchKnowledgeGraph)(this.url).then((async n=>{n.dataModel.entityTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)})),n.dataModel.relationshipTypes?.forEach((e=>{e.name&&this._graphTypeLookup.set(e.name,e)}));const s=this.linkChart?.linkChartProperties;if(s?.originIdOf("entitiesUrl")===_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.LINK_CHART&&(this.membershipModified=!1,this._originalInclusionList=await _applications_KnowledgeStudio_resourceSerializationUtils_js__WEBPACK_IMPORTED_MODULE_1__.serializationUtilsModuleWrapper.fetchAndConvertSerializedLinkChart({entitiesUrl:s?.entitiesUrl,relationshipsUrl:s?.relationshipsUrl}),this._alignLayersDataModelAndInclusionDefinition(n.dataModel),this.initializationLinkChartConfig={layoutSettings:s?.layoutSettings??void 0,layoutMode:(0,_knowledgeGraph_supportUtils_js__WEBPACK_IMPORTED_MODULE_25__.convertLayoutTypeToWebSupportedFormat)(s.layoutType)}),this._initializeLayerProperties({knowledgeGraph:n,inclusionModeDefinition:this._originalInclusionList}),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.size||(this.dataManager.inclusionModeDefinition={generateAllSublayers:!1,namedTypeDefinitions:new Map},this.dataManager.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})})),this.dataManager.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(e.name,{useAllData:!0})}))),this.dataPreloadedInLocalCache){const e=_knowledgeGraph_SessionMemoryStorage_js__WEBPACK_IMPORTED_MODULE_24__["default"].getInstance();for(const[t,a]of this.dataManager.inclusionModeDefinition?.namedTypeDefinitions??[])for(const i of a.members?.values()??[]){const a=e.readFromStoreById(`${t}__${i.id}`);if(a){(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(this.dataManager.sublayerCaches,t,(()=>new Map)).set(i.id,a)}}await a()}else{const t="geographic-organic-standard"===this.initializationLinkChartConfig?.layoutMode;this.addResolvingPromise(this.dataManager.refreshCacheContent(void 0,!1,t,!0).then((async()=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.throwIfAborted)(e),await a()})))}i(null)}))}))),Promise.resolve(this)}set initializationInclusionModeDefinition(e){"loaded"!==this.loadStatus&&"failed"!==this.loadStatus?this._set("initializationInclusionModeDefinition",e):_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error("#initializationInclusionModeDefinition","initializationInclusionModeDefinition cannot be changed after the layer is loaded.")}get linkChart(){return this.parent}async addRecords(e,t){let a=[];t?.cascadeAddRelationshipEndNodes&&this.dataManager.knowledgeGraph.dataModel&&(a=await (0,_knowledgeGraph_supportUtils_js__WEBPACK_IMPORTED_MODULE_25__.getRelationshipEndNodeIds)(e,this.dataManager.knowledgeGraph));const i=e.concat(a).filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id)));i.length>0&&(this.membershipModified=!0),await this._handleNewRecords(i,t)}async createSublayerForNamedType(e){await this.load();const t=this._graphTypeLookup.get(e);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("knowledge-graph:missing-type","The specified type does not exist in the knowledge graph.");if(this.dataManager.sublayerCaches.has(e))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("knowledge-graph:duplicate-type","The specified type already exists as a sublayer.");this.dataManager.sublayerCaches.set(e,new Map),(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(this.sublayerIdsCache,e,(()=>new Set));const a=this._createSublayer(t);return"entity"===t.type?this.dataManager.entityTypeNames.add(e):this.dataManager.relationshipTypeNames.add(e),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.set(e,{useAllData:!1,members:new Map}),a.geometryType?this.layers.push(a):this.tables.push(a),await (0,_knowledgeGraph_layerUtils_js__WEBPACK_IMPORTED_MODULE_23__.initializeLayersFromClientData)(this,[e]),this._refreshNamedTypes(),a}async removeRecords(e,{cascadeRemoveRelationships:t=!0,recalculateLayout:a=!1,overrideMembershipCheck:i=!1}={cascadeRemoveRelationships:!0,recalculateLayout:!1,overrideMembershipCheck:!1}){let n=[];for(const r of e)(i||!1===this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(r.typeName)?.useAllData&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(r.typeName)?.members?.has(r.id))&&n.push(r);if(t){const e=new Set,t=[];for(const a of n)if(this.dataManager.nodeConnectionsLookup.has(a.id))for(const t of this.dataManager.nodeConnectionsLookup.get(a.id))e.add(t);for(const a of e)if(this.dataManager.memberIdTypeLookup.has(a))for(const e of this.dataManager.memberIdTypeLookup.get(a))this.dataManager.relationshipTypeNames.has(e)&&t.push({id:a,typeName:e});n=n.concat(t)}this.dataManager.removeFromLayer(n);for(const r of n)this.sublayerIdsCache.get(r.typeName)?.delete(r.id),this.dataManager.relationshipTypeNames.has(r.typeName)?this.relationshipLinkChartDiagramLookup.delete(r.id):this.entityLinkChartDiagramLookup.delete(r.id);const o=a?void 0:this.getCurrentNodeLocations();await this._calculateLayoutWithSublayerTimeInfo(this._currentLinkChartConfig.layoutMode,{layoutSettings:this._currentLinkChartConfig.layoutSettings,lockedNodeLocations:o}),n.length>0&&(this.membershipModified=!0);const s=[];return this.layers.forEach((e=>{s.push(e.refreshCachedQueryEngine())})),await Promise.all(s),this._refreshNamedTypes(),n}async expand(e,t){let a=[];try{const i=await this.dataManager.getConnectedRecordIds(e,t?.relationshipTypeNames,t);a=i.filter((e=>!this.sublayerIdsCache.get(e.typeName)?.has(e.id))),await this._handleNewRecords(a,t),i.length>0&&(this.membershipModified=!0),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.throwIfAborted)(t?.signal)}catch(i){throw (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.isAbortError)(i)&&a.length>0&&await this.removeRecords(a,{overrideMembershipCheck:!0}),i}return{records:a}}loadLayerAssumingLocalCache(){const e=[...this.memberRelationshipTypes,...this.memberEntityTypes];this.layers.length||this.originIdOf("tables")===_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.DEFAULTS?this.originIdOf("layers")===_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.DEFAULTS?this._createSublayers(e,this.layers,(e=>!!e.geometryType)):this._updateSublayers(e,this.layers):this.layers=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"],this.tables.length||this.originIdOf("layers")===_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.DEFAULTS?this.originIdOf("tables")===_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.DEFAULTS?this._createSublayers(e,this.tables,(e=>!e.geometryType)):this._updateSublayers(e,this.tables):this.tables=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"],this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{const a=(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(this.sublayerIdsCache,t,(()=>new Set));e.members?.forEach((({id:e,linkChartLocation:i})=>{if(a.add(e),i){const a="coords"in i&&"lengths"in i?i:(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromGeometry)(i);this.dataManager.relationshipTypeNames.has(t)?this.relationshipLinkChartDiagramLookup.set(e,a):this.entityLinkChartDiagramLookup.set(e,a)}}))}))}async calculateLinkChartLayout(e="organic-standard",t){const a=[],s=[],l=[];this.dataManager.sublayerCaches.forEach(((e,t)=>{this.dataManager.entityTypeNames.has(t)?e.forEach((e=>{a.push({typeName:t,feature:e})})):this.dataManager.relationshipTypeNames.has(t)&&e.forEach((e=>{s.push({typeName:t,feature:e})}))})),this.entityLinkChartDiagramLookup=new Map,this.relationshipLinkChartDiagramLookup=new Map;const d=new Map,p=new Map,c=new Map,u=new Map,y=new Uint8Array(a.length),g=new Float64Array(a.length),w=new Float64Array(a.length),D=new Float64Array(a.length),v=new Float64Array(a.length),x=new Uint32Array(s.length),I=new Uint32Array(s.length),E=new Float64Array(s.length),S=new Float64Array(s.length),_=[],A="organic-standard";let R=!1;const j=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_14__["default"]({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7});let G,V="organic-standard",q=0,J=0;const X=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCChronologicalLayout.apply;switch(V="geographic-organic-standard"===e?A:e,V){case"organic-standard":G=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCForceDirectedLayout.apply;break;case"organic-community":G=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCCommunityLayout.apply;break;case"hierarchical-bottom-to-top":G=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCHierarchicalLayout.apply;break;case"radial-root-centric":G=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCRadialTreeLayout.apply;break;case"tree-left-to-right":G=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCSmartTreeLayout.apply;break;default:G=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LCSimpleLayout.apply}let Y=!1;a.forEach((({typeName:a,feature:i})=>{if("chronological-mono-timeline"!==e&&"chronological-multi-timeline"!==e&&t?.lockedNodeLocations?.has(i.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName])){"geographic-organic-standard"===e&&this.dataManager.geographicLookup.has(a)?y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsGeographic:y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.None;const n=t.lockedNodeLocations.get(i.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName]);g[q]=n.x,w[q]=n.y}else if("geographic-organic-standard"===e&&this.dataManager.geographicLookup.has(a)){y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsGeographic;let e=null;const t=i.attributes[this.dataManager.geographicLookup.get(a).name],n=this.dataManager.geographicLookup.get(a)?.geometryType;switch(n){case"esriGeometryPoint":g[q]=t?.x,w[q]=t?.y;break;case"esriGeometryPolygon":e=t?.centroid,null!=e?.x&&null!=e?.y?(g[q]=e.x,w[q]=e.y):y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsMovable;break;case"esriGeometryPolyline":case"esriGeometryMultipoint":e=t?.extent?.center,null!=e?.x&&null!=e?.y?(g[q]=e.x,w[q]=e.y):y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsMovable;break;default:y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsMovable}(null==g[q]||null==w[q]||Number.isNaN(g[q])||Number.isNaN(w[q]))&&(y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsMovable,g[q]=0,w[q]=0)}else if("chronological-mono-timeline"===e||"chronological-multi-timeline"===e){!Y&&t?.lockedNodeLocations?.has(i.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName])&&(Y=!0);const e=t?.timeInfoByTypeName?.get(a),n=e?.startField,o=n&&e?.startField?i.attributes[n]:null;D[q]=o?new Date(o).getTime():NaN;const s=e?.endField,r=s&&e?.endField?i.attributes[s]:null;v[q]=r?new Date(r).getTime():NaN,g[q]=0,w[q]=0,y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsMovable}else y[q]=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.NodeFlag.IsMovable,g[q]=0,w[q]=0;u.set(i.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],q),_[q]={feature:i,typeName:a},q++})),Y&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("Locked node locations are not supported for chronological layout at this time.  Requested node locations were ignored");let Z=!1;const ee=new Map;s.forEach((a=>{const i=a.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOriginIdFieldName],n=a.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemDestinationIdFieldName],o=u.get(i),s=u.get(n),r=t?.timeInfoByTypeName?.get(a.typeName),h=t?.timeInfoByTypeName?r?.startField:null,d=h?a.feature.attributes[h]:null,p=r?.endField,c=p?a.feature.attributes[p]:null;if(void 0!==o&&void 0!==s){let t=i+"-"+n;"chronological-mono-timeline"!==e&&"chronological-multi-timeline"!==e||(t=t+"-"+d+"-"+c);const r=ee.get(t),h=r?.has(a.typeName);h||(x[J]=o,I[J]=s,"chronological-mono-timeline"!==e&&"chronological-multi-timeline"!==e||(E[J]=d?new Date(d).getTime():NaN,S[J]=c?new Date(c).getTime():NaN),void 0===r?ee.set(t,new Map([[a.typeName,J]])):r.set(a.typeName,J),J++),l.push(a)}else Z=!0,this.relationshipLinkChartDiagramLookup.set(i,null)})),Z&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("A relationship is a member of this layer that has either origin or destination entity nodes that are not members. The diagram geometry will be set to null");const te=this._validateOrganicLayoutSettings(e,t?.layoutSettings?.organicLayoutSettings),ae=this._convertValidatedOrganicSettingsToCalculationSettings(te);await (0,_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.load)();let ie=_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.CallStatus.Error,ne=null;if("chronological-mono-timeline"===e||"chronological-multi-timeline"===e){let a;({status:ie,links:ne,graphics:a}=X((()=>t?.signal?.aborted??!1),y,g,w,D,v,x.subarray(0,J),I.subarray(0,J),E.subarray(0,J),S.subarray(0,J),"chronological-multi-timeline"===e,t?.layoutSettings?.chronologicalLayoutSettings)),ie===_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.CallStatus.Success&&(this.chronologicalAuxiliaryGraphics=a)}else({status:ie,links:ne}=G((()=>t?.signal?.aborted??!1),y,g,w,x.subarray(0,J),I.subarray(0,J),ae.computationBudgetTime,ae.idealEdgeLengthMultiplier,ae.repulsionRadiusMultiplier));if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.throwIfAborted)(t?.signal),ie===_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.CallStatus.Error)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("knowledge-graph:layout-failed","Attempting to arrange the records in the specified layout failed");if(ie===_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.CallStatus.Canceled)throw (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.createAbortError)();for(let i=0;i<_.length;i++){if(w[i]>84.9999?w[i]=84.9999:w[i]<-84.9999&&(w[i]=-84.9999),g[i]>179.9999?g[i]=179.9999:g[i]<-179.9999&&(g[i]=-179.9999),_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName]=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_15__["default"](g[i],w[i]),d.has(_[i].typeName)){const e=d.get(_[i].typeName);e?.set(_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],_[i].feature)}else{const e=new Map;e.set(_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],_[i].feature),d.set(_[i].typeName,e)}c.set(_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],_[i].feature);const e=(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromGeometry)(_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName]);this.entityLinkChartDiagramLookup.set(_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName]?e:null);const t=(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(this.dataManager.inclusionModeDefinition.namedTypeDefinitions,_[i].typeName,(()=>({useAllData:!1,members:new Map})));(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(t.members,_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],(()=>({id:_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],linkChartLocation:void 0}))).linkChartLocation=_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName];const{x:a,y:n}=_[i].feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName];if(R)j.xmin=Math.min(j.xmin,a),j.xmax=Math.max(j.xmax,a),j.ymin=Math.min(j.ymin,n),j.ymax=Math.max(j.ymax,n);else{const e=1e-7;j.xmin=a-e,j.xmax=a+e,j.ymin=n-e,j.ymax=n+e,R=!0}}if(this.linkChartExtent.xmin=j.xmin,this.linkChartExtent.xmax=j.xmax,this.linkChartExtent.ymin=j.ymin,this.linkChartExtent.ymax=j.ymax,!ne)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("knowledge-graph:layout-failed","Attempting to retrieve link geometry from diagram engine failed");const oe=new Map,se=new Map,re=new Map,le=new Set;for(let i=0;i<l.length;i++){const a=[],s=l[i],r=s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOriginIdFieldName],h=s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemDestinationIdFieldName];let d=r+"-"+h;if("chronological-mono-timeline"===e||"chronological-multi-timeline"===e){const e=t?.timeInfoByTypeName?.get(s.typeName),a=t?.timeInfoByTypeName?e?.startField:null,i=a?s.feature.attributes[a]:null,n=e?.endField;d+="-"+i+"-"+(n?s.feature.attributes[n]:null)}const y=ee.get(d).get(s.typeName),g=0===y?0:ne?.vertexEndIndex[y-1];if(!le.has(y)){if(le.add(y),ne.types[y]===_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LinkType.Recursive){const e=[ne.vertices[2*g],ne.vertices[2*g+1]],t=[ne.vertices[2*(g+1)],ne.vertices[2*(g+1)+1]],i=[.5*(e[0]+t[0]),.5*(e[1]+t[1])],n=[i[0]-e[0],i[1]-e[1]],o=[i[0]+n[1],i[1]-n[0]],s=[i[0]-n[1],i[1]+n[0]];a.push(e),a.push(o),a.push(t),a.push(s),a.push(e)}else{if(ne.types[y]!==_libs_linkchartlayout_LinkChartLayout_js__WEBPACK_IMPORTED_MODULE_30__.LinkType.Regular){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("A relationship generated an unsupported link geometry type.  It will not be rendered");continue}for(let e=g;e<ne.vertexEndIndex[y];e++)a.push([ne.vertices[2*e],ne.vertices[2*e+1]])}if("chronological-mono-timeline"!==e&&"chronological-multi-timeline"!==e){const e=_[u.get(r)]?.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName],t=_[u.get(h)]?.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName];a[0][0]===e.x&&a[0][1]===e.y||(a[0]=[e.x,e.y]),a[a.length-1][0]===t.x&&a[a.length-1][1]===t.y||(a[a.length-1]=[t.x,t.y])}for(let e=1;e<a.length-1;e++)a[e][1]>85.5?a[e][1]=85.5:a[e][1]<-85.5&&(a[e][1]=-85.5),a[e][0]>179.9999?a[e][0]=179.9999:a[e][0]<-179.9999&&(a[e][0]=-179.9999);oe.has(d)?oe.get(d).push(a):oe.set(d,[a])}const m=oe.get(d);se.has(d)||(se.set(d,new Map),re.set(d,new Map));const f=se.get(d),w=re.get(d);f.has(s.typeName)||(f.set(s.typeName,m.shift()),w.set(s.typeName,0));const N=f.get(s.typeName);w.set(s.typeName,w.get(s.typeName)+1);const D=new _geometry_Polyline_js__WEBPACK_IMPORTED_MODULE_16__["default"]({paths:[N]});if(s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName]=D,p.has(s.typeName)){const e=p.get(s.typeName);e?.set(s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],s.feature)}else{const e=new Map;e.set(s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],s.feature),p.set(s.typeName,e)}c.set(s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],s.feature);const v=(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromGeometry)(s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName]);this.relationshipLinkChartDiagramLookup.set(s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemLayoutGeometryFieldName]?v:null);const x=(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(this.dataManager.inclusionModeDefinition.namedTypeDefinitions,s.typeName,(()=>({useAllData:!1,members:new Map})));(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(x.members,s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],(()=>({id:s.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],linkChartLocation:void 0}))).linkChartLocation=v}for(const i of l)i.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemAggregationCountFieldName]=re.get(i.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOriginIdFieldName]+"-"+i.feature.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemDestinationIdFieldName])?.get(i.typeName)??null;return this._currentLinkChartConfig={layoutMode:e,layoutSettings:t?.layoutSettings?.clone()},{nodes:d,links:p,idMap:c}}async applyNewLinkChartLayout(e="organic-standard",t){const a=[];await this._calculateLayoutWithSublayerTimeInfo(e,t),this.layers.forEach((e=>{a.push(e.refreshCachedQueryEngine())})),this.membershipModified=!0,await Promise.all(a),this._refreshNamedTypes()}getCurrentNodeLocations(){const e=new Map;for(const[t,a]of this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.entries()??[])this.dataManager.relationshipTypeNames.has(t)||a?.members?.forEach((t=>{const a=t.linkChartLocation;let i;const n=t.id;a&&(i="x"in a?{x:a.x,y:a.y}:{x:a.coords[0],y:a.coords[1]},e.set(n,new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_15__["default"]({x:i.x,y:i.y})))}));return e}async refreshLinkChartCache(e){await this.dataManager.refreshCacheContent(e);const t=[];this.layers.forEach((e=>{t.push(e.refreshCachedQueryEngine())})),await Promise.all(t),this._refreshNamedTypes()}async connectBetweenEntities(e,t){if(!e.length)return{records:[]};let a=[];try{let i=[];for(const e of this.dataManager.relationshipTypeNames){const t=this.sublayerIdsCache.get(e);t&&(i=i.concat(Array.from(t.keys())))}a=await this.dataManager.getRelationshipsBetweenNodes(e,i,t),await this._handleNewRecords(a,t),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.throwIfAborted)(t)}catch(i){throw (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.isAbortError)(i)&&this.removeRecords(a),i}return{records:a}}async connectFromEntities(e,t){if(!e.length)return{records:[]};let a=[];try{let i=[];for(const e of this.dataManager.relationshipTypeNames){const t=this.sublayerIdsCache.get(e);t&&(i=i.concat(Array.from(t.keys())))}let n=[];for(const e of this.dataManager.entityTypeNames){const t=this.sublayerIdsCache.get(e);t&&(n=n.concat(Array.from(t)))}a=await this.dataManager.getRelationshipsFromNodes(e,n,i,t),await this._handleNewRecords(a,t),a.length>0&&(this.membershipModified=!0),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.throwIfAborted)(t)}catch(i){throw (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.isAbortError)(i)&&this.removeRecords(a),i}return{records:a}}getCurrentLayout(){return this._currentLinkChartConfig.layoutMode}async _calculateLayoutWithSublayerTimeInfo(e="organic-standard",t){const a=new Map;this.layers.forEach((e=>{a.set(e.objectType.name,e.timeInfo)})),await this.calculateLinkChartLayout(e,{timeInfoByTypeName:a,...t}),this.linkChart?.handleChronologicalOverlay()}async _handleNewRecords(e,t){const a=new Set,i=[],n=this.layers.concat(this.tables);for(const r of e){if(!this._graphTypeLookup.has(r.typeName))continue;!1===n.some((e=>e.objectType.name===r.typeName))&&(this.dataManager.sublayerCaches.set(r.typeName,new Map),a.add(r.typeName));(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_5__.getOrCreateMapValue)(this.sublayerIdsCache,r.typeName,(()=>new Set)).add(r.id),i.push(r)}this.dataManager.addToLayer(i);for(const o of a){const e=this._graphTypeLookup.get(o);if(e){const t=this._createSublayer(e);"entity"===e.type?this.dataManager.entityTypeNames.add(o):this.dataManager.relationshipTypeNames.add(o),t.geometryType?this.layers.push(t):this.tables.push(t)}}await (0,_knowledgeGraph_layerUtils_js__WEBPACK_IMPORTED_MODULE_23__.initializeLayersFromClientData)(this,Array.from(a),t),await this.dataManager.refreshCacheContent(e.map((e=>e.id)),void 0,void 0,void 0,t);const s={layoutSettings:this._currentLinkChartConfig.layoutSettings,lockedNodeLocations:new Map};for(const[o,r]of this.entityLinkChartDiagramLookup.entries())r&&s.lockedNodeLocations.set(o,new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_15__["default"](r.coords[0],r.coords[1]));await this.applyNewLinkChartLayout(this._currentLinkChartConfig.layoutMode,s)}_createSublayers(e,t,a){e.forEach((e=>{const i=this._createSublayer(e);a(i)&&t.push(i),this._updateSublayerCaches(e)}))}_updateSublayers(e,t){t.forEach((t=>{t.parentCompositeLayer=this;const a=e.find((e=>e.type===t.graphType&&e.name===t.graphTypeName));a&&(t.objectType=a,t.read({title:a.name},{origin:"service"}),this._updateSublayerCaches(a))}))}_updateSublayerCaches({name:e}){if(!e)return;const t=this.dataManager.sublayerCaches;t.has(e)||t.set(e,new Map)}_layersLoadedFromAuthoritativeItem(){const e=this.originIdOf("layers");return e>=_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.PORTAL_ITEM&&e<_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.OriginId.USER}async _initializeDiagram(){this.initializationLinkChartConfig?this.initializationLinkChartConfig.doNotRecalculateLayout?(this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e?.members?.forEach((e=>{const a=e.linkChartLocation;let i;const n=e.id;if(!a)return;i="x"in a?{x:a.x,y:a.y}:{x:a.coords[0],y:a.coords[1]};const o=(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromGeometry)(i);this.dataManager.relationshipTypeNames.has(t)?this.relationshipLinkChartDiagramLookup.set(n,o):this.entityLinkChartDiagramLookup.set(n,o),this.linkChartExtent.xmin>i.x&&(this.linkChartExtent.xmin=i.x),this.linkChartExtent.xmax<i.x&&(this.linkChartExtent.xmax=i.x),this.linkChartExtent.ymin>i.y&&(this.linkChartExtent.ymin=i.y),this.linkChartExtent.ymax<i.y&&(this.linkChartExtent.ymax=i.y)}))})),this.memberRelationshipTypes.forEach((e=>{e.name&&this.dataManager.sublayerCaches.get(e.name)?.forEach((e=>{const t=this.relationshipLinkChartDiagramLookup.get(e.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOriginIdFieldName]),a=this.relationshipLinkChartDiagramLookup.get(e.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemDestinationIdFieldName]);if(t&&a){const i=(0,_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromGeometry)(new _geometry_Polyline_js__WEBPACK_IMPORTED_MODULE_16__["default"]({paths:[[[t.coords[0],t.coords[1]],[a.coords[0],a.coords[1]]]]}));this.relationshipLinkChartDiagramLookup.set(e.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],i)}else this.relationshipLinkChartDiagramLookup.set(e.attributes[_knowledgeGraph_constants_js__WEBPACK_IMPORTED_MODULE_19__.systemOidFieldName],null)}))}))):await this._calculateLayoutWithSublayerTimeInfo(this.initializationLinkChartConfig.layoutMode,{lockedNodeLocations:this.getCurrentNodeLocations(),...this.initializationLinkChartConfig||{}}):await this._calculateLayoutWithSublayerTimeInfo("organic-standard",{lockedNodeLocations:this.getCurrentNodeLocations()})}_refreshNamedTypes(){for(const e of this.layers)e.emit("refresh",{dataChanged:!0});for(const e of this.tables)e.emit("refresh",{dataChanged:!0})}_validateOrganicLayoutSettings(e,t){const a=e=>"number"==typeof e&&!isNaN(e),i=e=>a(e)&&e>=1,o=e=>a(e)&&e>=1,s=e=>Object.values(_knowledgeGraph_IdealEdgeLengthTypeOptions_js__WEBPACK_IMPORTED_MODULE_20__.IdealEdgeLengthTypeOptions).includes(e),r=e=>a(e)&&e>=0,l={};if(!new Set(["organic-standard","organic-community","geographic-organic-standard","chronological-multi-timeline","chronological-mono-timeline"]).has(e)||!t)return l;const{computationBudgetTime:h,autoRepulsionRadius:d,repulsionRadiusMultiplier:p,absoluteIdealEdgeLength:c,multiplicativeIdealEdgeLength:u,idealEdgeLengthType:y}=t;return o(h)?l.computationBudgetTime=h:h&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("Invalid layout computationBudgetTime setting, will revert to default setting"),l.autoRepulsionRadius=d,!d&&i(p)?l.repulsionRadiusMultiplier=p:d||(l.autoRepulsionRadius=!0,_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("Invalid layout repulsionRadiusMultiplier setting, will revert to default setting")),"geographic-organic-standard"===e&&(s(y)?l.idealEdgeLengthType=y:void 0!==y&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn('Invalid layout idealEdgeLengthType setting, will revert to "multiplier" setting'),"absolute-value"===y&&r(c)?l.absoluteIdealEdgeLength=c:"absolute-value"===y&&void 0!==c?_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("Invalid layout idealEdgeLength setting, will revert to default setting"):"multiplier"===y&&r(u)?l.multiplicativeIdealEdgeLength=u:"multiplier"===y&&void 0!==u&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("Invalid layout idealEdgeLength setting, will revert to default setting")),l}_convertValidatedOrganicSettingsToCalculationSettings(e){let t=e.idealEdgeLengthType===_knowledgeGraph_IdealEdgeLengthTypeOptions_js__WEBPACK_IMPORTED_MODULE_20__.IdealEdgeLengthTypeOptions.ABSOLUTE?e.absoluteIdealEdgeLength:e.multiplicativeIdealEdgeLength;return e.idealEdgeLengthType===_knowledgeGraph_IdealEdgeLengthTypeOptions_js__WEBPACK_IMPORTED_MODULE_20__.IdealEdgeLengthTypeOptions.ABSOLUTE&&(void 0===t?t=-1:t*=-1),{computationBudgetTime:e.computationBudgetTime??void 0,repulsionRadiusMultiplier:e.repulsionRadiusMultiplier&&!e.autoRepulsionRadius?e.repulsionRadiusMultiplier:void 0,idealEdgeLengthMultiplier:t}}_createSublayer(e){return new _knowledgeGraph_KnowledgeGraphSublayer_js__WEBPACK_IMPORTED_MODULE_22__["default"]({objectType:e,parentCompositeLayer:this,graphType:e.type})}_handleSublayersChange(e,t){t&&(t.forEach((e=>{e.parent=null})),this.removeHandles("sublayers-owner")),e&&(e.forEach((e=>{e.parent=this})),this.addHandles([e.on("after-add",(({item:e})=>{e.parent=this})),e.on("after-remove",(({item:e})=>{e.parent=null}))],"sublayers-owner"))}_alignLayersDataModelAndInclusionDefinition(e){const t=new Set((e.entityTypes??[]).map((e=>e.name)).concat((e.relationshipTypes??[]).map((e=>e.name)))),i=new Set((e.entityTypes??[]).map((e=>e.name))),o=new Set((e.relationshipTypes??[]).map((e=>e.name)));if(this.layers){for(const a of this.layers)!a.graphType&&t.has(a.graphTypeName)&&(a.graphType=i.has(a.graphTypeName)?"entity":"relationship");const e=this.layers.filter((e=>t.has(e.graphTypeName)&&("entity"===e.graphType?i.has(e.graphTypeName):o.has(e.graphTypeName))));this.setAtOrigin("layers",e,(0,_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_13__.idToName)(this.originIdOf("layers")))}else this.layers=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"];if(this.layers&&this._originalInclusionList){const e=new Set(this._originalInclusionList.namedTypeDefinitions.keys()),t=this.tables?.map((e=>e.graphTypeName))??[],a=this.layers.map((e=>e.graphTypeName)).concat(t);for(const n of a)e.has(n)||this._originalInclusionList.namedTypeDefinitions.set(n,{useAllData:!1,members:new Map});const i=[];for(const o of this._originalInclusionList.namedTypeDefinitions.keys())a.includes(o)||(_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn(`A named type, ${o}, was in the serialized feature collection but did not have a sublayer config in the item, so will be removed`),i.push(o));for(const n of i)this._originalInclusionList.namedTypeDefinitions.delete(n)}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)(_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_29__.url)],q.prototype,"url",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"dataPreloadedInLocalCache",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"initializationLinkChartConfig",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"membershipModified",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"dataManager",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"initializationInclusionModeDefinition",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"knowledgeGraph",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({type:_core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"].ofType(_knowledgeGraph_KnowledgeGraphSublayer_js__WEBPACK_IMPORTED_MODULE_22__["default"]),json:{write:{ignoreOrigin:!0}}})],q.prototype,"layers",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],q.prototype,"linkChart",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"entityLinkChartDiagramLookup",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"relationshipLinkChartDiagramLookup",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"linkChartExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"memberEntityTypes",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"memberRelationshipTypes",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({type:["LinkChartLayer"]})],q.prototype,"operationalLayerType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],q.prototype,"sublayerIdsCache",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({type:_core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"].ofType(_knowledgeGraph_KnowledgeGraphSublayer_js__WEBPACK_IMPORTED_MODULE_22__["default"]),json:{write:{ignoreOrigin:!0}}})],q.prototype,"tables",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({json:{read:!1}})],q.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({json:{read:!1}})],q.prototype,"chronologicalAuxiliaryGraphics",void 0),q=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__.subclass)("esri.layers.LinkChartLayer")],q);const J=q;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/knowledgeGraph/IdealEdgeLengthTypeOptions.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/knowledgeGraph/IdealEdgeLengthTypeOptions.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IdealEdgeLengthTypeOptions: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e;!function(e){e.MULTIPLIER="multiplier",e.ABSOLUTE="absolute-value"}(e||(e={}));


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX0xpbmtDaGFydExheWVyX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5eEUsb0JBQW9CLDhFQUFDLENBQUMsa0VBQUMsQ0FBQyw0RUFBQyxDQUFDLHFGQUFDLENBQUMsa0RBQUMsTUFBTSxlQUFlLDZKQUE2Siw4QkFBOEIsOEZBQThGLDJEQUFDLFFBQVEsa0ZBQUMsc0hBQXNILDREQUFDLEVBQUUsMENBQTBDLHlKQUF5SiwyREFBQyxRQUFRLGtGQUFDLDBOQUEwTixzREFBQyw4T0FBOE8sZ0JBQWdCLDZEQUFDLGlGQUFpRix3REFBQyxHQUFHLHFCQUFxQixlQUFlLE1BQU0sMEVBQTBFLEdBQUcsT0FBTywyRUFBMkUsOEJBQThCLDBCQUEwQiw0QkFBNEIseUJBQXlCLGdCQUFnQixjQUFjLGlKQUFpSixzREFBQyx3SkFBd0osMlRBQTJULHFDQUFxQyxhQUFhLHVEQUFDLHVDQUF1QyxFQUFFLCtJQUErSSx5R0FBeUcsdURBQUMsdUNBQXVDLEVBQUUsMElBQTBJLHFHQUFxRyxZQUFZLDhHQUFDLEVBQUUsa0ZBQWtGLEVBQUUsZ0hBQWdILFFBQVEsa0JBQWtCLGdCQUFnQixvRkFBb0YsOEZBQUMsZ01BQWdNLGdCQUFnQiw0REFBNEQsNkRBQTZELDhCQUE4QixRQUFRLEdBQUcsSUFBSSw0QkFBNEIscUNBQXFDLHlCQUF5QixpREFBaUQsb0ZBQUMsMkJBQTJCLHNDQUFzQyw0Q0FBNEMsK0NBQStDLDRDQUE0QyxHQUFHLDRDQUE0QyxrQ0FBa0MsOEVBQUMsMkVBQTJFLHdIQUFDLHFDQUFxQyxnRUFBZ0Usb0dBQW9HLG9EQUFvRCx1R0FBQyxlQUFlLG1DQUFtQyxxRUFBcUUsbUhBQW1ILHFEQUFxRCxxRUFBcUUsbUZBQW1GLGNBQWMsRUFBRSw2RUFBNkUsbUZBQW1GLGNBQWMsRUFBRSxvQ0FB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c0ZBQUMsNkRBQTZELHVEQUFDLEVBQUUsc0ZBQUMsMENBQTBDLHVEQUFDLEVBQUUsc0ZBQUMsNENBQTRDLHVEQUFDLEVBQUUsc0ZBQUMsa0RBQWtELHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSx3QkFBd0IsOENBQThDLHVEQUFDLEVBQUUsc0ZBQUMsMkNBQTJDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxLQUFLLDJEQUFDLFFBQVEsa0ZBQUMsUUFBUSxPQUFPLGtCQUFrQixnQ0FBZ0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLE1BQU0sU0FBUyw4QkFBOEIsdURBQUMsRUFBRSxzRkFBQyxFQUFFLE1BQU0sU0FBUywwREFBMEQsdURBQUMsRUFBRSx1RkFBQyxtQ0FBbUMsVUFBK0I7Ozs7Ozs7Ozs7Ozs7OztBQ0p2dzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxhQUFhLHNEQUFzRCxTQUFTLEdBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9MaW5rQ2hhcnRMYXllci5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2tub3dsZWRnZUdyYXBoL0lkZWFsRWRnZUxlbmd0aFR5cGVPcHRpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7c2VyaWFsaXphdGlvblV0aWxzTW9kdWxlV3JhcHBlciBhcyB0fWZyb21cIi4uL2FwcGxpY2F0aW9ucy9Lbm93bGVkZ2VTdHVkaW8vcmVzb3VyY2VTZXJpYWxpemF0aW9uVXRpbHMuanNcIjtpbXBvcnQgYSBmcm9tXCIuLi9jb3JlL0NvbGxlY3Rpb24uanNcIjtpbXBvcnQgaSBmcm9tXCIuLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IG4gZnJvbVwiLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7Z2V0T3JDcmVhdGVNYXBWYWx1ZSBhcyBvfWZyb21cIi4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7TXVsdGlPcmlnaW5KU09OTWl4aW4gYXMgc31mcm9tXCIuLi9jb3JlL011bHRpT3JpZ2luSlNPTlN1cHBvcnQuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgcixpc0Fib3J0RXJyb3IgYXMgbCxjcmVhdGVBYm9ydEVycm9yIGFzIGh9ZnJvbVwiLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgZCxzeW5jIGFzIHB9ZnJvbVwiLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGN9ZnJvbVwiLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uL2NvcmUvUmFuZG9tTENHLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHV9ZnJvbVwiLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtPcmlnaW5JZCBhcyB5LGlkVG9OYW1lIGFzIGd9ZnJvbVwiLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvUHJvcGVydHlPcmlnaW4uanNcIjtpbXBvcnQgbSBmcm9tXCIuLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnQgZiBmcm9tXCIuLi9nZW9tZXRyeS9Qb2ludC5qc1wiO2ltcG9ydCBMIGZyb21cIi4uL2dlb21ldHJ5L1BvbHlsaW5lLmpzXCI7aW1wb3J0IHcgZnJvbVwiLi9MYXllci5qc1wiO2ltcG9ydHtjb252ZXJ0RnJvbUdlb21ldHJ5IGFzIGJ9ZnJvbVwiLi9ncmFwaGljcy9mZWF0dXJlQ29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0e3N5c3RlbU9pZEZpZWxkTmFtZSBhcyBNLHN5c3RlbU9yaWdpbklkRmllbGROYW1lIGFzIGssc3lzdGVtRGVzdGluYXRpb25JZEZpZWxkTmFtZSBhcyBDLHN5c3RlbUxheW91dEdlb21ldHJ5RmllbGROYW1lIGFzIFQsc3lzdGVtQWdncmVnYXRpb25Db3VudEZpZWxkTmFtZSBhcyBOfWZyb21cIi4va25vd2xlZGdlR3JhcGgvY29uc3RhbnRzLmpzXCI7aW1wb3J0e0lkZWFsRWRnZUxlbmd0aFR5cGVPcHRpb25zIGFzIER9ZnJvbVwiLi9rbm93bGVkZ2VHcmFwaC9JZGVhbEVkZ2VMZW5ndGhUeXBlT3B0aW9ucy5qc1wiO2ltcG9ydHtLbm93bGVkZ2VHcmFwaExheWVyRGF0YU1hbmFnZXIgYXMgdn1mcm9tXCIuL2tub3dsZWRnZUdyYXBoL0tub3dsZWRnZUdyYXBoTGF5ZXJEYXRhTWFuYWdlci5qc1wiO2ltcG9ydCB4IGZyb21cIi4va25vd2xlZGdlR3JhcGgvS25vd2xlZGdlR3JhcGhTdWJsYXllci5qc1wiO2ltcG9ydHtpbml0aWFsaXplTGF5ZXJzRnJvbUNsaWVudERhdGEgYXMgSX1mcm9tXCIuL2tub3dsZWRnZUdyYXBoL2xheWVyVXRpbHMuanNcIjtpbXBvcnQgRSBmcm9tXCIuL2tub3dsZWRnZUdyYXBoL1Nlc3Npb25NZW1vcnlTdG9yYWdlLmpzXCI7aW1wb3J0e2NvbnZlcnRMYXlvdXRUeXBlVG9XZWJTdXBwb3J0ZWRGb3JtYXQgYXMgUyxnZXRSZWxhdGlvbnNoaXBFbmROb2RlSWRzIGFzIF99ZnJvbVwiLi9rbm93bGVkZ2VHcmFwaC9zdXBwb3J0VXRpbHMuanNcIjtpbXBvcnR7QmxlbmRMYXllciBhcyBBfWZyb21cIi4vbWl4aW5zL0JsZW5kTGF5ZXIuanNcIjtpbXBvcnR7T3BlcmF0aW9uYWxMYXllciBhcyBSfWZyb21cIi4vbWl4aW5zL09wZXJhdGlvbmFsTGF5ZXIuanNcIjtpbXBvcnR7U2NhbGVSYW5nZUxheWVyIGFzIGp9ZnJvbVwiLi9taXhpbnMvU2NhbGVSYW5nZUxheWVyLmpzXCI7aW1wb3J0e3VybCBhcyBHfWZyb21cIi4vc3VwcG9ydC9jb21tb25Qcm9wZXJ0aWVzLmpzXCI7aW1wb3J0e0xDQ2hyb25vbG9naWNhbExheW91dCBhcyB6LExDU2ltcGxlTGF5b3V0IGFzIFAsTENTbWFydFRyZWVMYXlvdXQgYXMgRixMQ1JhZGlhbFRyZWVMYXlvdXQgYXMgTyxMQ0hpZXJhcmNoaWNhbExheW91dCBhcyBVLExDQ29tbXVuaXR5TGF5b3V0IGFzIEIsTENGb3JjZURpcmVjdGVkTGF5b3V0IGFzIFEsTm9kZUZsYWcgYXMgVyxsb2FkIGFzICQsQ2FsbFN0YXR1cyBhcyBILExpbmtUeXBlIGFzIEt9ZnJvbVwiLi4vbGlicy9saW5rY2hhcnRsYXlvdXQvTGlua0NoYXJ0TGF5b3V0LmpzXCI7aW1wb3J0e2ZldGNoS25vd2xlZGdlR3JhcGggYXMgVn1mcm9tXCIuLi9yZXN0L2tub3dsZWRnZUdyYXBoU2VydmljZS5qc1wiO2xldCBxPWNsYXNzIGV4dGVuZHMoUihBKGoocyh3KSkpKSl7Y29uc3RydWN0b3IoZSl7aWYoc3VwZXIoZSksdGhpcy51cmw9bnVsbCx0aGlzLmRhdGFQcmVsb2FkZWRJbkxvY2FsQ2FjaGU9ITEsdGhpcy5pbml0aWFsaXphdGlvbkxpbmtDaGFydENvbmZpZz1udWxsLHRoaXMubWVtYmVyc2hpcE1vZGlmaWVkPSEwLHRoaXMuX2N1cnJlbnRMaW5rQ2hhcnRDb25maWc9e2xheW91dE1vZGU6XCJvcmdhbmljLXN0YW5kYXJkXCJ9LHRoaXMuX2dyYXBoVHlwZUxvb2t1cD1uZXcgTWFwLHRoaXMuZGF0YU1hbmFnZXI9bnVsbCx0aGlzLmtub3dsZWRnZUdyYXBoPW51bGwsdGhpcy5sYXllcnM9bmV3KGEub2ZUeXBlKHgpKSx0aGlzLmVudGl0eUxpbmtDaGFydERpYWdyYW1Mb29rdXA9bmV3IE1hcCx0aGlzLnJlbGF0aW9uc2hpcExpbmtDaGFydERpYWdyYW1Mb29rdXA9bmV3IE1hcCx0aGlzLmxpbmtDaGFydEV4dGVudD1uZXcgbSh7eG1pbjotMWUtNyx5bWluOi0xZS03LHhtYXg6MWUtNyx5bWF4OjFlLTd9KSx0aGlzLm1lbWJlckVudGl0eVR5cGVzPW51bGwsdGhpcy5tZW1iZXJSZWxhdGlvbnNoaXBUeXBlcz1udWxsLHRoaXMub3BlcmF0aW9uYWxMYXllclR5cGU9XCJMaW5rQ2hhcnRMYXllclwiLHRoaXMuc3VibGF5ZXJJZHNDYWNoZT1uZXcgTWFwLHRoaXMudGFibGVzPW5ldyhhLm9mVHlwZSh4KSksdGhpcy50eXBlPVwibGluay1jaGFydFwiLHRoaXMuY2hyb25vbG9naWNhbEF1eGlsaWFyeUdyYXBoaWNzPW51bGwsdGhpcy5fb3JpZ2luYWxJbmNsdXNpb25MaXN0PWU/LmluaXRpYWxpemF0aW9uSW5jbHVzaW9uTW9kZURlZmluaXRpb24sZT8uZGF0YVByZWxvYWRlZEluTG9jYWxDYWNoZSYmIWU/LmluaXRpYWxpemF0aW9uSW5jbHVzaW9uTW9kZURlZmluaXRpb24pdGhyb3cgbmV3IGkoXCJrbm93bGVkZ2UtZ3JhcGg6bGlua2NoYXJ0LWxheWVyLWNvbnN0cnVjdG9yXCIsXCJJZiBjcmVhdGluZyBhIGxpbmsgY2hhcnQgY29tcG9zaXRlIGxheWVyIGFuZCBjb25maWd1cmVkIHRoYXQgZGF0YSBpcyBhbHJlYWR5IGxvYWRlZCBpbiB0aGUgY2FjaGUsIHlvdSBtdXN0IHNwZWNpZnkgYW4gaW5jbHVzaW9uIGxpc3Qgc28gdGhlIENvbXBvc2l0ZSBMYXllciBrbm93cyB3aGF0IHJlY29yZHMgYmVsb25nIHRvIGl0XCIpO3RoaXMuYWRkSGFuZGxlcyhkKCgoKT0+dGhpcy5sYXllcnMuY29uY2F0KHRoaXMudGFibGVzKSksKChlLHQpPT50aGlzLl9oYW5kbGVTdWJsYXllcnNDaGFuZ2UoZSx0KSkscCkpfW5vcm1hbGl6ZUN0b3JBcmdzKGUpe2lmKCFlKXJldHVybnt9O2NvbnN0e3VybDp0LHRpdGxlOmEsZGF0YVByZWxvYWRlZEluTG9jYWxDYWNoZTppLGluaXRpYWxpemF0aW9uTGlua0NoYXJ0Q29uZmlnOm59PWU7cmV0dXJue3VybDp0LHRpdGxlOmEsZGF0YVByZWxvYWRlZEluTG9jYWxDYWNoZTppLGluaXRpYWxpemF0aW9uTGlua0NoYXJ0Q29uZmlnOm59fV9pbml0aWFsaXplTGF5ZXJQcm9wZXJ0aWVzKGUpe2lmKCF0aGlzLnRpdGxlJiZ0aGlzLnVybCl7Y29uc3QgZT10aGlzLnVybC5zcGxpdChcIi9cIik7dGhpcy50aXRsZT1lW2UubGVuZ3RoLTJdfWNvbnN0IHQ9bmV3IFNldDtsZXQgYT1bXSxvPVtdO2lmKGUuaW5jbHVzaW9uTW9kZURlZmluaXRpb24mJighZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbi5uYW1lZFR5cGVEZWZpbml0aW9uc3x8ZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbi5uYW1lZFR5cGVEZWZpbml0aW9ucy5zaXplPDEpKXRocm93IG5ldyBpKFwia25vd2xlZGdlLWdyYXBoOmNvbXBvc2l0ZS1sYXllci1jb25zdHJ1Y3RvclwiLFwiSWYgYW4gZXhwbGljaXQgaW5jbHVzaW9uIGRlZmluaXRpb24gaXMgZGVmaW5lZCwgYXQgbGVhc3Qgb25lIG5hbWVkVHlwZURlZmluaXRpb24gbXVzdCBhbHNvIGJlIGRlZmluZWRcIik7ZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbj8uZ2VuZXJhdGVBbGxTdWJsYXllcnM/KGE9ZS5rbm93bGVkZ2VHcmFwaC5kYXRhTW9kZWwuZW50aXR5VHlwZXM/P1tdLG89ZS5rbm93bGVkZ2VHcmFwaC5kYXRhTW9kZWwucmVsYXRpb25zaGlwVHlwZXM/P1tdKTplLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPy5uYW1lZFR5cGVEZWZpbml0aW9ucyYmZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbj8ubmFtZWRUeXBlRGVmaW5pdGlvbnMuc2l6ZT4wP2UuaW5jbHVzaW9uTW9kZURlZmluaXRpb24/Lm5hbWVkVHlwZURlZmluaXRpb25zLmZvckVhY2goKChpLHMpPT57Y29uc3Qgcj10aGlzLl9ncmFwaFR5cGVMb29rdXAuZ2V0KHMpO2lmKCFyKXJldHVybiBuLmdldExvZ2dlcih0aGlzKS53YXJuKGBBIG5hbWVkIHR5cGUsICR7c30sIHdhcyBpbiB0aGUgaW5jbHVzaW9uIGxpc3QgdGhhdCB3YXNuJ3QgaW4gdGhlIGRhdGEgbW9kZWwgYW5kIHdpbGwgYmUgcmVtb3ZlZGApLHZvaWQgZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbj8ubmFtZWRUeXBlRGVmaW5pdGlvbnMuZGVsZXRlKHMpO1wicmVsYXRpb25zaGlwXCI9PT1yLnR5cGU/dC5oYXMocyl8fCh0LmFkZChzKSxvLnB1c2gocikpOlwiZW50aXR5XCI9PT1yLnR5cGU/dC5oYXMocyl8fCh0LmFkZChzKSxhLnB1c2gocikpOihuLmdldExvZ2dlcih0aGlzKS53YXJuKGBBIG5hbWVkIHR5cGUsICR7c30sIHdhcyBpbiB0aGUgaW5jbHVzaW9uIGxpc3QgdGhhdCB3YXNuJ3QgcHJvcGVybHkgbW9kZWxlZCBhbmQgd2lsbCBiZSByZW1vdmVkYCksZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbj8ubmFtZWRUeXBlRGVmaW5pdGlvbnMuZGVsZXRlKHMpKX0pKTooYT1lLmtub3dsZWRnZUdyYXBoLmRhdGFNb2RlbC5lbnRpdHlUeXBlcz8/W10sbz1lLmtub3dsZWRnZUdyYXBoLmRhdGFNb2RlbC5yZWxhdGlvbnNoaXBUeXBlcz8/W10pO2NvbnN0IHM9bmV3IHYoe2tub3dsZWRnZUdyYXBoOmUua25vd2xlZGdlR3JhcGgsaW5jbHVzaW9uTW9kZURlZmluaXRpb246ZS5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbn0pO3RoaXMua25vd2xlZGdlR3JhcGg9ZS5rbm93bGVkZ2VHcmFwaCx0aGlzLm1lbWJlckVudGl0eVR5cGVzPWEsdGhpcy5tZW1iZXJSZWxhdGlvbnNoaXBUeXBlcz1vLHRoaXMuZGF0YU1hbmFnZXI9c31sb2FkKGUpe2NvbnN0IGE9YXN5bmMoKT0+e2NvbnN0IGU9W10sdD1bXTt0aGlzLmxvYWRMYXllckFzc3VtaW5nTG9jYWxDYWNoZSgpLHRoaXMuX2xheWVyc0xvYWRlZEZyb21BdXRob3JpdGF0aXZlSXRlbSgpfHxhd2FpdCBJKHRoaXMpLHRoaXMuZGF0YU1hbmFnZXIuaW5jbHVzaW9uTW9kZURlZmluaXRpb24mJih0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uLmdlbmVyYXRlQWxsU3VibGF5ZXJzPSExKSx0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPy5uYW1lZFR5cGVEZWZpbml0aW9ucy5mb3JFYWNoKChlPT57ZS51c2VBbGxEYXRhPSExfSkpLGF3YWl0IHRoaXMuX2luaXRpYWxpemVEaWFncmFtKCksdGhpcy5sYXllcnMuZm9yRWFjaCgoYT0+e3QucHVzaChhLnJlZnJlc2hDYWNoZWRRdWVyeUVuZ2luZSgpKSxlLnB1c2gobmV3IFByb21pc2UoKGU9PnthLm9uKFwibGF5ZXJ2aWV3LWNyZWF0ZVwiLCgoKT0+e2UobnVsbCl9KSl9KSkpfSkpLHRoaXMudGFibGVzLmZvckVhY2goKGU9Pnt0LnB1c2goZS5yZWZyZXNoQ2FjaGVkUXVlcnlFbmdpbmUoKSl9KSksYXdhaXQgUHJvbWlzZS5hbGwodCl9O3JldHVybiB0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UobmV3IFByb21pc2UoKGk9PntWKHRoaXMudXJsKS50aGVuKChhc3luYyBuPT57bi5kYXRhTW9kZWwuZW50aXR5VHlwZXM/LmZvckVhY2goKGU9PntlLm5hbWUmJnRoaXMuX2dyYXBoVHlwZUxvb2t1cC5zZXQoZS5uYW1lLGUpfSkpLG4uZGF0YU1vZGVsLnJlbGF0aW9uc2hpcFR5cGVzPy5mb3JFYWNoKChlPT57ZS5uYW1lJiZ0aGlzLl9ncmFwaFR5cGVMb29rdXAuc2V0KGUubmFtZSxlKX0pKTtjb25zdCBzPXRoaXMubGlua0NoYXJ0Py5saW5rQ2hhcnRQcm9wZXJ0aWVzO2lmKHM/Lm9yaWdpbklkT2YoXCJlbnRpdGllc1VybFwiKT09PXkuTElOS19DSEFSVCYmKHRoaXMubWVtYmVyc2hpcE1vZGlmaWVkPSExLHRoaXMuX29yaWdpbmFsSW5jbHVzaW9uTGlzdD1hd2FpdCB0LmZldGNoQW5kQ29udmVydFNlcmlhbGl6ZWRMaW5rQ2hhcnQoe2VudGl0aWVzVXJsOnM/LmVudGl0aWVzVXJsLHJlbGF0aW9uc2hpcHNVcmw6cz8ucmVsYXRpb25zaGlwc1VybH0pLHRoaXMuX2FsaWduTGF5ZXJzRGF0YU1vZGVsQW5kSW5jbHVzaW9uRGVmaW5pdGlvbihuLmRhdGFNb2RlbCksdGhpcy5pbml0aWFsaXphdGlvbkxpbmtDaGFydENvbmZpZz17bGF5b3V0U2V0dGluZ3M6cz8ubGF5b3V0U2V0dGluZ3M/P3ZvaWQgMCxsYXlvdXRNb2RlOlMocy5sYXlvdXRUeXBlKX0pLHRoaXMuX2luaXRpYWxpemVMYXllclByb3BlcnRpZXMoe2tub3dsZWRnZUdyYXBoOm4saW5jbHVzaW9uTW9kZURlZmluaXRpb246dGhpcy5fb3JpZ2luYWxJbmNsdXNpb25MaXN0fSksdGhpcy5kYXRhTWFuYWdlci5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbj8ubmFtZWRUeXBlRGVmaW5pdGlvbnM/LnNpemV8fCh0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPXtnZW5lcmF0ZUFsbFN1YmxheWVyczohMSxuYW1lZFR5cGVEZWZpbml0aW9uczpuZXcgTWFwfSx0aGlzLmRhdGFNYW5hZ2VyLmtub3dsZWRnZUdyYXBoLmRhdGFNb2RlbC5lbnRpdHlUeXBlcz8uZm9yRWFjaCgoZT0+e2UubmFtZSYmdGhpcy5kYXRhTWFuYWdlci5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbj8ubmFtZWRUeXBlRGVmaW5pdGlvbnMuc2V0KGUubmFtZSx7dXNlQWxsRGF0YTohMH0pfSkpLHRoaXMuZGF0YU1hbmFnZXIua25vd2xlZGdlR3JhcGguZGF0YU1vZGVsLnJlbGF0aW9uc2hpcFR5cGVzPy5mb3JFYWNoKChlPT57ZS5uYW1lJiZ0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPy5uYW1lZFR5cGVEZWZpbml0aW9ucy5zZXQoZS5uYW1lLHt1c2VBbGxEYXRhOiEwfSl9KSkpLHRoaXMuZGF0YVByZWxvYWRlZEluTG9jYWxDYWNoZSl7Y29uc3QgZT1FLmdldEluc3RhbmNlKCk7Zm9yKGNvbnN0W3QsYV1vZiB0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPy5uYW1lZFR5cGVEZWZpbml0aW9ucz8/W10pZm9yKGNvbnN0IGkgb2YgYS5tZW1iZXJzPy52YWx1ZXMoKT8/W10pe2NvbnN0IGE9ZS5yZWFkRnJvbVN0b3JlQnlJZChgJHt0fV9fJHtpLmlkfWApO2lmKGEpe28odGhpcy5kYXRhTWFuYWdlci5zdWJsYXllckNhY2hlcyx0LCgoKT0+bmV3IE1hcCkpLnNldChpLmlkLGEpfX1hd2FpdCBhKCl9ZWxzZXtjb25zdCB0PVwiZ2VvZ3JhcGhpYy1vcmdhbmljLXN0YW5kYXJkXCI9PT10aGlzLmluaXRpYWxpemF0aW9uTGlua0NoYXJ0Q29uZmlnPy5sYXlvdXRNb2RlO3RoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZSh0aGlzLmRhdGFNYW5hZ2VyLnJlZnJlc2hDYWNoZUNvbnRlbnQodm9pZCAwLCExLHQsITApLnRoZW4oKGFzeW5jKCk9PntyKGUpLGF3YWl0IGEoKX0pKSl9aShudWxsKX0pKX0pKSksUHJvbWlzZS5yZXNvbHZlKHRoaXMpfXNldCBpbml0aWFsaXphdGlvbkluY2x1c2lvbk1vZGVEZWZpbml0aW9uKGUpe1wibG9hZGVkXCIhPT10aGlzLmxvYWRTdGF0dXMmJlwiZmFpbGVkXCIhPT10aGlzLmxvYWRTdGF0dXM/dGhpcy5fc2V0KFwiaW5pdGlhbGl6YXRpb25JbmNsdXNpb25Nb2RlRGVmaW5pdGlvblwiLGUpOm4uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiI2luaXRpYWxpemF0aW9uSW5jbHVzaW9uTW9kZURlZmluaXRpb25cIixcImluaXRpYWxpemF0aW9uSW5jbHVzaW9uTW9kZURlZmluaXRpb24gY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGxheWVyIGlzIGxvYWRlZC5cIil9Z2V0IGxpbmtDaGFydCgpe3JldHVybiB0aGlzLnBhcmVudH1hc3luYyBhZGRSZWNvcmRzKGUsdCl7bGV0IGE9W107dD8uY2FzY2FkZUFkZFJlbGF0aW9uc2hpcEVuZE5vZGVzJiZ0aGlzLmRhdGFNYW5hZ2VyLmtub3dsZWRnZUdyYXBoLmRhdGFNb2RlbCYmKGE9YXdhaXQgXyhlLHRoaXMuZGF0YU1hbmFnZXIua25vd2xlZGdlR3JhcGgpKTtjb25zdCBpPWUuY29uY2F0KGEpLmZpbHRlcigoZT0+IXRoaXMuc3VibGF5ZXJJZHNDYWNoZS5nZXQoZS50eXBlTmFtZSk/LmhhcyhlLmlkKSkpO2kubGVuZ3RoPjAmJih0aGlzLm1lbWJlcnNoaXBNb2RpZmllZD0hMCksYXdhaXQgdGhpcy5faGFuZGxlTmV3UmVjb3JkcyhpLHQpfWFzeW5jIGNyZWF0ZVN1YmxheWVyRm9yTmFtZWRUeXBlKGUpe2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0IHQ9dGhpcy5fZ3JhcGhUeXBlTG9va3VwLmdldChlKTtpZighdCl0aHJvdyBuZXcgaShcImtub3dsZWRnZS1ncmFwaDptaXNzaW5nLXR5cGVcIixcIlRoZSBzcGVjaWZpZWQgdHlwZSBkb2VzIG5vdCBleGlzdCBpbiB0aGUga25vd2xlZGdlIGdyYXBoLlwiKTtpZih0aGlzLmRhdGFNYW5hZ2VyLnN1YmxheWVyQ2FjaGVzLmhhcyhlKSl0aHJvdyBuZXcgaShcImtub3dsZWRnZS1ncmFwaDpkdXBsaWNhdGUtdHlwZVwiLFwiVGhlIHNwZWNpZmllZCB0eXBlIGFscmVhZHkgZXhpc3RzIGFzIGEgc3VibGF5ZXIuXCIpO3RoaXMuZGF0YU1hbmFnZXIuc3VibGF5ZXJDYWNoZXMuc2V0KGUsbmV3IE1hcCksbyh0aGlzLnN1YmxheWVySWRzQ2FjaGUsZSwoKCk9Pm5ldyBTZXQpKTtjb25zdCBhPXRoaXMuX2NyZWF0ZVN1YmxheWVyKHQpO3JldHVyblwiZW50aXR5XCI9PT10LnR5cGU/dGhpcy5kYXRhTWFuYWdlci5lbnRpdHlUeXBlTmFtZXMuYWRkKGUpOnRoaXMuZGF0YU1hbmFnZXIucmVsYXRpb25zaGlwVHlwZU5hbWVzLmFkZChlKSx0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPy5uYW1lZFR5cGVEZWZpbml0aW9ucz8uc2V0KGUse3VzZUFsbERhdGE6ITEsbWVtYmVyczpuZXcgTWFwfSksYS5nZW9tZXRyeVR5cGU/dGhpcy5sYXllcnMucHVzaChhKTp0aGlzLnRhYmxlcy5wdXNoKGEpLGF3YWl0IEkodGhpcyxbZV0pLHRoaXMuX3JlZnJlc2hOYW1lZFR5cGVzKCksYX1hc3luYyByZW1vdmVSZWNvcmRzKGUse2Nhc2NhZGVSZW1vdmVSZWxhdGlvbnNoaXBzOnQ9ITAscmVjYWxjdWxhdGVMYXlvdXQ6YT0hMSxvdmVycmlkZU1lbWJlcnNoaXBDaGVjazppPSExfT17Y2FzY2FkZVJlbW92ZVJlbGF0aW9uc2hpcHM6ITAscmVjYWxjdWxhdGVMYXlvdXQ6ITEsb3ZlcnJpZGVNZW1iZXJzaGlwQ2hlY2s6ITF9KXtsZXQgbj1bXTtmb3IoY29uc3QgciBvZiBlKShpfHwhMT09PXRoaXMuZGF0YU1hbmFnZXIuaW5jbHVzaW9uTW9kZURlZmluaXRpb24/Lm5hbWVkVHlwZURlZmluaXRpb25zPy5nZXQoci50eXBlTmFtZSk/LnVzZUFsbERhdGEmJnRoaXMuZGF0YU1hbmFnZXIuaW5jbHVzaW9uTW9kZURlZmluaXRpb24/Lm5hbWVkVHlwZURlZmluaXRpb25zPy5nZXQoci50eXBlTmFtZSk/Lm1lbWJlcnM/LmhhcyhyLmlkKSkmJm4ucHVzaChyKTtpZih0KXtjb25zdCBlPW5ldyBTZXQsdD1bXTtmb3IoY29uc3QgYSBvZiBuKWlmKHRoaXMuZGF0YU1hbmFnZXIubm9kZUNvbm5lY3Rpb25zTG9va3VwLmhhcyhhLmlkKSlmb3IoY29uc3QgdCBvZiB0aGlzLmRhdGFNYW5hZ2VyLm5vZGVDb25uZWN0aW9uc0xvb2t1cC5nZXQoYS5pZCkpZS5hZGQodCk7Zm9yKGNvbnN0IGEgb2YgZSlpZih0aGlzLmRhdGFNYW5hZ2VyLm1lbWJlcklkVHlwZUxvb2t1cC5oYXMoYSkpZm9yKGNvbnN0IGUgb2YgdGhpcy5kYXRhTWFuYWdlci5tZW1iZXJJZFR5cGVMb29rdXAuZ2V0KGEpKXRoaXMuZGF0YU1hbmFnZXIucmVsYXRpb25zaGlwVHlwZU5hbWVzLmhhcyhlKSYmdC5wdXNoKHtpZDphLHR5cGVOYW1lOmV9KTtuPW4uY29uY2F0KHQpfXRoaXMuZGF0YU1hbmFnZXIucmVtb3ZlRnJvbUxheWVyKG4pO2Zvcihjb25zdCByIG9mIG4pdGhpcy5zdWJsYXllcklkc0NhY2hlLmdldChyLnR5cGVOYW1lKT8uZGVsZXRlKHIuaWQpLHRoaXMuZGF0YU1hbmFnZXIucmVsYXRpb25zaGlwVHlwZU5hbWVzLmhhcyhyLnR5cGVOYW1lKT90aGlzLnJlbGF0aW9uc2hpcExpbmtDaGFydERpYWdyYW1Mb29rdXAuZGVsZXRlKHIuaWQpOnRoaXMuZW50aXR5TGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5kZWxldGUoci5pZCk7Y29uc3Qgbz1hP3ZvaWQgMDp0aGlzLmdldEN1cnJlbnROb2RlTG9jYXRpb25zKCk7YXdhaXQgdGhpcy5fY2FsY3VsYXRlTGF5b3V0V2l0aFN1YmxheWVyVGltZUluZm8odGhpcy5fY3VycmVudExpbmtDaGFydENvbmZpZy5sYXlvdXRNb2RlLHtsYXlvdXRTZXR0aW5nczp0aGlzLl9jdXJyZW50TGlua0NoYXJ0Q29uZmlnLmxheW91dFNldHRpbmdzLGxvY2tlZE5vZGVMb2NhdGlvbnM6b30pLG4ubGVuZ3RoPjAmJih0aGlzLm1lbWJlcnNoaXBNb2RpZmllZD0hMCk7Y29uc3Qgcz1bXTtyZXR1cm4gdGhpcy5sYXllcnMuZm9yRWFjaCgoZT0+e3MucHVzaChlLnJlZnJlc2hDYWNoZWRRdWVyeUVuZ2luZSgpKX0pKSxhd2FpdCBQcm9taXNlLmFsbChzKSx0aGlzLl9yZWZyZXNoTmFtZWRUeXBlcygpLG59YXN5bmMgZXhwYW5kKGUsdCl7bGV0IGE9W107dHJ5e2NvbnN0IGk9YXdhaXQgdGhpcy5kYXRhTWFuYWdlci5nZXRDb25uZWN0ZWRSZWNvcmRJZHMoZSx0Py5yZWxhdGlvbnNoaXBUeXBlTmFtZXMsdCk7YT1pLmZpbHRlcigoZT0+IXRoaXMuc3VibGF5ZXJJZHNDYWNoZS5nZXQoZS50eXBlTmFtZSk/LmhhcyhlLmlkKSkpLGF3YWl0IHRoaXMuX2hhbmRsZU5ld1JlY29yZHMoYSx0KSxpLmxlbmd0aD4wJiYodGhpcy5tZW1iZXJzaGlwTW9kaWZpZWQ9ITApLHIodD8uc2lnbmFsKX1jYXRjaChpKXt0aHJvdyBsKGkpJiZhLmxlbmd0aD4wJiZhd2FpdCB0aGlzLnJlbW92ZVJlY29yZHMoYSx7b3ZlcnJpZGVNZW1iZXJzaGlwQ2hlY2s6ITB9KSxpfXJldHVybntyZWNvcmRzOmF9fWxvYWRMYXllckFzc3VtaW5nTG9jYWxDYWNoZSgpe2NvbnN0IGU9Wy4uLnRoaXMubWVtYmVyUmVsYXRpb25zaGlwVHlwZXMsLi4udGhpcy5tZW1iZXJFbnRpdHlUeXBlc107dGhpcy5sYXllcnMubGVuZ3RofHx0aGlzLm9yaWdpbklkT2YoXCJ0YWJsZXNcIik9PT15LkRFRkFVTFRTP3RoaXMub3JpZ2luSWRPZihcImxheWVyc1wiKT09PXkuREVGQVVMVFM/dGhpcy5fY3JlYXRlU3VibGF5ZXJzKGUsdGhpcy5sYXllcnMsKGU9PiEhZS5nZW9tZXRyeVR5cGUpKTp0aGlzLl91cGRhdGVTdWJsYXllcnMoZSx0aGlzLmxheWVycyk6dGhpcy5sYXllcnM9bmV3IGEsdGhpcy50YWJsZXMubGVuZ3RofHx0aGlzLm9yaWdpbklkT2YoXCJsYXllcnNcIik9PT15LkRFRkFVTFRTP3RoaXMub3JpZ2luSWRPZihcInRhYmxlc1wiKT09PXkuREVGQVVMVFM/dGhpcy5fY3JlYXRlU3VibGF5ZXJzKGUsdGhpcy50YWJsZXMsKGU9PiFlLmdlb21ldHJ5VHlwZSkpOnRoaXMuX3VwZGF0ZVN1YmxheWVycyhlLHRoaXMudGFibGVzKTp0aGlzLnRhYmxlcz1uZXcgYSx0aGlzLmRhdGFNYW5hZ2VyLmluY2x1c2lvbk1vZGVEZWZpbml0aW9uPy5uYW1lZFR5cGVEZWZpbml0aW9ucz8uZm9yRWFjaCgoKGUsdCk9Pntjb25zdCBhPW8odGhpcy5zdWJsYXllcklkc0NhY2hlLHQsKCgpPT5uZXcgU2V0KSk7ZS5tZW1iZXJzPy5mb3JFYWNoKCgoe2lkOmUsbGlua0NoYXJ0TG9jYXRpb246aX0pPT57aWYoYS5hZGQoZSksaSl7Y29uc3QgYT1cImNvb3Jkc1wiaW4gaSYmXCJsZW5ndGhzXCJpbiBpP2k6YihpKTt0aGlzLmRhdGFNYW5hZ2VyLnJlbGF0aW9uc2hpcFR5cGVOYW1lcy5oYXModCk/dGhpcy5yZWxhdGlvbnNoaXBMaW5rQ2hhcnREaWFncmFtTG9va3VwLnNldChlLGEpOnRoaXMuZW50aXR5TGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5zZXQoZSxhKX19KSl9KSl9YXN5bmMgY2FsY3VsYXRlTGlua0NoYXJ0TGF5b3V0KGU9XCJvcmdhbmljLXN0YW5kYXJkXCIsdCl7Y29uc3QgYT1bXSxzPVtdLGw9W107dGhpcy5kYXRhTWFuYWdlci5zdWJsYXllckNhY2hlcy5mb3JFYWNoKCgoZSx0KT0+e3RoaXMuZGF0YU1hbmFnZXIuZW50aXR5VHlwZU5hbWVzLmhhcyh0KT9lLmZvckVhY2goKGU9PnthLnB1c2goe3R5cGVOYW1lOnQsZmVhdHVyZTplfSl9KSk6dGhpcy5kYXRhTWFuYWdlci5yZWxhdGlvbnNoaXBUeXBlTmFtZXMuaGFzKHQpJiZlLmZvckVhY2goKGU9PntzLnB1c2goe3R5cGVOYW1lOnQsZmVhdHVyZTplfSl9KSl9KSksdGhpcy5lbnRpdHlMaW5rQ2hhcnREaWFncmFtTG9va3VwPW5ldyBNYXAsdGhpcy5yZWxhdGlvbnNoaXBMaW5rQ2hhcnREaWFncmFtTG9va3VwPW5ldyBNYXA7Y29uc3QgZD1uZXcgTWFwLHA9bmV3IE1hcCxjPW5ldyBNYXAsdT1uZXcgTWFwLHk9bmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgpLGc9bmV3IEZsb2F0NjRBcnJheShhLmxlbmd0aCksdz1uZXcgRmxvYXQ2NEFycmF5KGEubGVuZ3RoKSxEPW5ldyBGbG9hdDY0QXJyYXkoYS5sZW5ndGgpLHY9bmV3IEZsb2F0NjRBcnJheShhLmxlbmd0aCkseD1uZXcgVWludDMyQXJyYXkocy5sZW5ndGgpLEk9bmV3IFVpbnQzMkFycmF5KHMubGVuZ3RoKSxFPW5ldyBGbG9hdDY0QXJyYXkocy5sZW5ndGgpLFM9bmV3IEZsb2F0NjRBcnJheShzLmxlbmd0aCksXz1bXSxBPVwib3JnYW5pYy1zdGFuZGFyZFwiO2xldCBSPSExO2NvbnN0IGo9bmV3IG0oe3htaW46LTFlLTcseW1pbjotMWUtNyx4bWF4OjFlLTcseW1heDoxZS03fSk7bGV0IEcsVj1cIm9yZ2FuaWMtc3RhbmRhcmRcIixxPTAsSj0wO2NvbnN0IFg9ei5hcHBseTtzd2l0Y2goVj1cImdlb2dyYXBoaWMtb3JnYW5pYy1zdGFuZGFyZFwiPT09ZT9BOmUsVil7Y2FzZVwib3JnYW5pYy1zdGFuZGFyZFwiOkc9US5hcHBseTticmVhaztjYXNlXCJvcmdhbmljLWNvbW11bml0eVwiOkc9Qi5hcHBseTticmVhaztjYXNlXCJoaWVyYXJjaGljYWwtYm90dG9tLXRvLXRvcFwiOkc9VS5hcHBseTticmVhaztjYXNlXCJyYWRpYWwtcm9vdC1jZW50cmljXCI6Rz1PLmFwcGx5O2JyZWFrO2Nhc2VcInRyZWUtbGVmdC10by1yaWdodFwiOkc9Ri5hcHBseTticmVhaztkZWZhdWx0Okc9UC5hcHBseX1sZXQgWT0hMTthLmZvckVhY2goKCh7dHlwZU5hbWU6YSxmZWF0dXJlOml9KT0+e2lmKFwiY2hyb25vbG9naWNhbC1tb25vLXRpbWVsaW5lXCIhPT1lJiZcImNocm9ub2xvZ2ljYWwtbXVsdGktdGltZWxpbmVcIiE9PWUmJnQ/LmxvY2tlZE5vZGVMb2NhdGlvbnM/LmhhcyhpLmF0dHJpYnV0ZXNbTV0pKXtcImdlb2dyYXBoaWMtb3JnYW5pYy1zdGFuZGFyZFwiPT09ZSYmdGhpcy5kYXRhTWFuYWdlci5nZW9ncmFwaGljTG9va3VwLmhhcyhhKT95W3FdPVcuSXNHZW9ncmFwaGljOnlbcV09Vy5Ob25lO2NvbnN0IG49dC5sb2NrZWROb2RlTG9jYXRpb25zLmdldChpLmF0dHJpYnV0ZXNbTV0pO2dbcV09bi54LHdbcV09bi55fWVsc2UgaWYoXCJnZW9ncmFwaGljLW9yZ2FuaWMtc3RhbmRhcmRcIj09PWUmJnRoaXMuZGF0YU1hbmFnZXIuZ2VvZ3JhcGhpY0xvb2t1cC5oYXMoYSkpe3lbcV09Vy5Jc0dlb2dyYXBoaWM7bGV0IGU9bnVsbDtjb25zdCB0PWkuYXR0cmlidXRlc1t0aGlzLmRhdGFNYW5hZ2VyLmdlb2dyYXBoaWNMb29rdXAuZ2V0KGEpLm5hbWVdLG49dGhpcy5kYXRhTWFuYWdlci5nZW9ncmFwaGljTG9va3VwLmdldChhKT8uZ2VvbWV0cnlUeXBlO3N3aXRjaChuKXtjYXNlXCJlc3JpR2VvbWV0cnlQb2ludFwiOmdbcV09dD8ueCx3W3FdPXQ/Lnk7YnJlYWs7Y2FzZVwiZXNyaUdlb21ldHJ5UG9seWdvblwiOmU9dD8uY2VudHJvaWQsbnVsbCE9ZT8ueCYmbnVsbCE9ZT8ueT8oZ1txXT1lLngsd1txXT1lLnkpOnlbcV09Vy5Jc01vdmFibGU7YnJlYWs7Y2FzZVwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIjpjYXNlXCJlc3JpR2VvbWV0cnlNdWx0aXBvaW50XCI6ZT10Py5leHRlbnQ/LmNlbnRlcixudWxsIT1lPy54JiZudWxsIT1lPy55PyhnW3FdPWUueCx3W3FdPWUueSk6eVtxXT1XLklzTW92YWJsZTticmVhaztkZWZhdWx0OnlbcV09Vy5Jc01vdmFibGV9KG51bGw9PWdbcV18fG51bGw9PXdbcV18fE51bWJlci5pc05hTihnW3FdKXx8TnVtYmVyLmlzTmFOKHdbcV0pKSYmKHlbcV09Vy5Jc01vdmFibGUsZ1txXT0wLHdbcV09MCl9ZWxzZSBpZihcImNocm9ub2xvZ2ljYWwtbW9uby10aW1lbGluZVwiPT09ZXx8XCJjaHJvbm9sb2dpY2FsLW11bHRpLXRpbWVsaW5lXCI9PT1lKXshWSYmdD8ubG9ja2VkTm9kZUxvY2F0aW9ucz8uaGFzKGkuYXR0cmlidXRlc1tNXSkmJihZPSEwKTtjb25zdCBlPXQ/LnRpbWVJbmZvQnlUeXBlTmFtZT8uZ2V0KGEpLG49ZT8uc3RhcnRGaWVsZCxvPW4mJmU/LnN0YXJ0RmllbGQ/aS5hdHRyaWJ1dGVzW25dOm51bGw7RFtxXT1vP25ldyBEYXRlKG8pLmdldFRpbWUoKTpOYU47Y29uc3Qgcz1lPy5lbmRGaWVsZCxyPXMmJmU/LmVuZEZpZWxkP2kuYXR0cmlidXRlc1tzXTpudWxsO3ZbcV09cj9uZXcgRGF0ZShyKS5nZXRUaW1lKCk6TmFOLGdbcV09MCx3W3FdPTAseVtxXT1XLklzTW92YWJsZX1lbHNlIHlbcV09Vy5Jc01vdmFibGUsZ1txXT0wLHdbcV09MDt1LnNldChpLmF0dHJpYnV0ZXNbTV0scSksX1txXT17ZmVhdHVyZTppLHR5cGVOYW1lOmF9LHErK30pKSxZJiZuLmdldExvZ2dlcih0aGlzKS53YXJuKFwiTG9ja2VkIG5vZGUgbG9jYXRpb25zIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBjaHJvbm9sb2dpY2FsIGxheW91dCBhdCB0aGlzIHRpbWUuICBSZXF1ZXN0ZWQgbm9kZSBsb2NhdGlvbnMgd2VyZSBpZ25vcmVkXCIpO2xldCBaPSExO2NvbnN0IGVlPW5ldyBNYXA7cy5mb3JFYWNoKChhPT57Y29uc3QgaT1hLmZlYXR1cmUuYXR0cmlidXRlc1trXSxuPWEuZmVhdHVyZS5hdHRyaWJ1dGVzW0NdLG89dS5nZXQoaSkscz11LmdldChuKSxyPXQ/LnRpbWVJbmZvQnlUeXBlTmFtZT8uZ2V0KGEudHlwZU5hbWUpLGg9dD8udGltZUluZm9CeVR5cGVOYW1lP3I/LnN0YXJ0RmllbGQ6bnVsbCxkPWg/YS5mZWF0dXJlLmF0dHJpYnV0ZXNbaF06bnVsbCxwPXI/LmVuZEZpZWxkLGM9cD9hLmZlYXR1cmUuYXR0cmlidXRlc1twXTpudWxsO2lmKHZvaWQgMCE9PW8mJnZvaWQgMCE9PXMpe2xldCB0PWkrXCItXCIrbjtcImNocm9ub2xvZ2ljYWwtbW9uby10aW1lbGluZVwiIT09ZSYmXCJjaHJvbm9sb2dpY2FsLW11bHRpLXRpbWVsaW5lXCIhPT1lfHwodD10K1wiLVwiK2QrXCItXCIrYyk7Y29uc3Qgcj1lZS5nZXQodCksaD1yPy5oYXMoYS50eXBlTmFtZSk7aHx8KHhbSl09byxJW0pdPXMsXCJjaHJvbm9sb2dpY2FsLW1vbm8tdGltZWxpbmVcIiE9PWUmJlwiY2hyb25vbG9naWNhbC1tdWx0aS10aW1lbGluZVwiIT09ZXx8KEVbSl09ZD9uZXcgRGF0ZShkKS5nZXRUaW1lKCk6TmFOLFNbSl09Yz9uZXcgRGF0ZShjKS5nZXRUaW1lKCk6TmFOKSx2b2lkIDA9PT1yP2VlLnNldCh0LG5ldyBNYXAoW1thLnR5cGVOYW1lLEpdXSkpOnIuc2V0KGEudHlwZU5hbWUsSiksSisrKSxsLnB1c2goYSl9ZWxzZSBaPSEwLHRoaXMucmVsYXRpb25zaGlwTGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5zZXQoaSxudWxsKX0pKSxaJiZuLmdldExvZ2dlcih0aGlzKS53YXJuKFwiQSByZWxhdGlvbnNoaXAgaXMgYSBtZW1iZXIgb2YgdGhpcyBsYXllciB0aGF0IGhhcyBlaXRoZXIgb3JpZ2luIG9yIGRlc3RpbmF0aW9uIGVudGl0eSBub2RlcyB0aGF0IGFyZSBub3QgbWVtYmVycy4gVGhlIGRpYWdyYW0gZ2VvbWV0cnkgd2lsbCBiZSBzZXQgdG8gbnVsbFwiKTtjb25zdCB0ZT10aGlzLl92YWxpZGF0ZU9yZ2FuaWNMYXlvdXRTZXR0aW5ncyhlLHQ/LmxheW91dFNldHRpbmdzPy5vcmdhbmljTGF5b3V0U2V0dGluZ3MpLGFlPXRoaXMuX2NvbnZlcnRWYWxpZGF0ZWRPcmdhbmljU2V0dGluZ3NUb0NhbGN1bGF0aW9uU2V0dGluZ3ModGUpO2F3YWl0ICQoKTtsZXQgaWU9SC5FcnJvcixuZT1udWxsO2lmKFwiY2hyb25vbG9naWNhbC1tb25vLXRpbWVsaW5lXCI9PT1lfHxcImNocm9ub2xvZ2ljYWwtbXVsdGktdGltZWxpbmVcIj09PWUpe2xldCBhOyh7c3RhdHVzOmllLGxpbmtzOm5lLGdyYXBoaWNzOmF9PVgoKCgpPT50Py5zaWduYWw/LmFib3J0ZWQ/PyExKSx5LGcsdyxELHYseC5zdWJhcnJheSgwLEopLEkuc3ViYXJyYXkoMCxKKSxFLnN1YmFycmF5KDAsSiksUy5zdWJhcnJheSgwLEopLFwiY2hyb25vbG9naWNhbC1tdWx0aS10aW1lbGluZVwiPT09ZSx0Py5sYXlvdXRTZXR0aW5ncz8uY2hyb25vbG9naWNhbExheW91dFNldHRpbmdzKSksaWU9PT1ILlN1Y2Nlc3MmJih0aGlzLmNocm9ub2xvZ2ljYWxBdXhpbGlhcnlHcmFwaGljcz1hKX1lbHNlKHtzdGF0dXM6aWUsbGlua3M6bmV9PUcoKCgpPT50Py5zaWduYWw/LmFib3J0ZWQ/PyExKSx5LGcsdyx4LnN1YmFycmF5KDAsSiksSS5zdWJhcnJheSgwLEopLGFlLmNvbXB1dGF0aW9uQnVkZ2V0VGltZSxhZS5pZGVhbEVkZ2VMZW5ndGhNdWx0aXBsaWVyLGFlLnJlcHVsc2lvblJhZGl1c011bHRpcGxpZXIpKTtpZihyKHQ/LnNpZ25hbCksaWU9PT1ILkVycm9yKXRocm93IG5ldyBpKFwia25vd2xlZGdlLWdyYXBoOmxheW91dC1mYWlsZWRcIixcIkF0dGVtcHRpbmcgdG8gYXJyYW5nZSB0aGUgcmVjb3JkcyBpbiB0aGUgc3BlY2lmaWVkIGxheW91dCBmYWlsZWRcIik7aWYoaWU9PT1ILkNhbmNlbGVkKXRocm93IGgoKTtmb3IobGV0IGk9MDtpPF8ubGVuZ3RoO2krKyl7aWYod1tpXT44NC45OTk5P3dbaV09ODQuOTk5OTp3W2ldPC04NC45OTk5JiYod1tpXT0tODQuOTk5OSksZ1tpXT4xNzkuOTk5OT9nW2ldPTE3OS45OTk5OmdbaV08LTE3OS45OTk5JiYoZ1tpXT0tMTc5Ljk5OTkpLF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW1RdPW5ldyBmKGdbaV0sd1tpXSksZC5oYXMoX1tpXS50eXBlTmFtZSkpe2NvbnN0IGU9ZC5nZXQoX1tpXS50eXBlTmFtZSk7ZT8uc2V0KF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW01dLF9baV0uZmVhdHVyZSl9ZWxzZXtjb25zdCBlPW5ldyBNYXA7ZS5zZXQoX1tpXS5mZWF0dXJlLmF0dHJpYnV0ZXNbTV0sX1tpXS5mZWF0dXJlKSxkLnNldChfW2ldLnR5cGVOYW1lLGUpfWMuc2V0KF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW01dLF9baV0uZmVhdHVyZSk7Y29uc3QgZT1iKF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW1RdKTt0aGlzLmVudGl0eUxpbmtDaGFydERpYWdyYW1Mb29rdXAuc2V0KF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW01dLF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW1RdP2U6bnVsbCk7Y29uc3QgdD1vKHRoaXMuZGF0YU1hbmFnZXIuaW5jbHVzaW9uTW9kZURlZmluaXRpb24ubmFtZWRUeXBlRGVmaW5pdGlvbnMsX1tpXS50eXBlTmFtZSwoKCk9Pih7dXNlQWxsRGF0YTohMSxtZW1iZXJzOm5ldyBNYXB9KSkpO28odC5tZW1iZXJzLF9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW01dLCgoKT0+KHtpZDpfW2ldLmZlYXR1cmUuYXR0cmlidXRlc1tNXSxsaW5rQ2hhcnRMb2NhdGlvbjp2b2lkIDB9KSkpLmxpbmtDaGFydExvY2F0aW9uPV9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW1RdO2NvbnN0e3g6YSx5Om59PV9baV0uZmVhdHVyZS5hdHRyaWJ1dGVzW1RdO2lmKFIpai54bWluPU1hdGgubWluKGoueG1pbixhKSxqLnhtYXg9TWF0aC5tYXgoai54bWF4LGEpLGoueW1pbj1NYXRoLm1pbihqLnltaW4sbiksai55bWF4PU1hdGgubWF4KGoueW1heCxuKTtlbHNle2NvbnN0IGU9MWUtNztqLnhtaW49YS1lLGoueG1heD1hK2Usai55bWluPW4tZSxqLnltYXg9bitlLFI9ITB9fWlmKHRoaXMubGlua0NoYXJ0RXh0ZW50LnhtaW49ai54bWluLHRoaXMubGlua0NoYXJ0RXh0ZW50LnhtYXg9ai54bWF4LHRoaXMubGlua0NoYXJ0RXh0ZW50LnltaW49ai55bWluLHRoaXMubGlua0NoYXJ0RXh0ZW50LnltYXg9ai55bWF4LCFuZSl0aHJvdyBuZXcgaShcImtub3dsZWRnZS1ncmFwaDpsYXlvdXQtZmFpbGVkXCIsXCJBdHRlbXB0aW5nIHRvIHJldHJpZXZlIGxpbmsgZ2VvbWV0cnkgZnJvbSBkaWFncmFtIGVuZ2luZSBmYWlsZWRcIik7Y29uc3Qgb2U9bmV3IE1hcCxzZT1uZXcgTWFwLHJlPW5ldyBNYXAsbGU9bmV3IFNldDtmb3IobGV0IGk9MDtpPGwubGVuZ3RoO2krKyl7Y29uc3QgYT1bXSxzPWxbaV0scj1zLmZlYXR1cmUuYXR0cmlidXRlc1trXSxoPXMuZmVhdHVyZS5hdHRyaWJ1dGVzW0NdO2xldCBkPXIrXCItXCIraDtpZihcImNocm9ub2xvZ2ljYWwtbW9uby10aW1lbGluZVwiPT09ZXx8XCJjaHJvbm9sb2dpY2FsLW11bHRpLXRpbWVsaW5lXCI9PT1lKXtjb25zdCBlPXQ/LnRpbWVJbmZvQnlUeXBlTmFtZT8uZ2V0KHMudHlwZU5hbWUpLGE9dD8udGltZUluZm9CeVR5cGVOYW1lP2U/LnN0YXJ0RmllbGQ6bnVsbCxpPWE/cy5mZWF0dXJlLmF0dHJpYnV0ZXNbYV06bnVsbCxuPWU/LmVuZEZpZWxkO2QrPVwiLVwiK2krXCItXCIrKG4/cy5mZWF0dXJlLmF0dHJpYnV0ZXNbbl06bnVsbCl9Y29uc3QgeT1lZS5nZXQoZCkuZ2V0KHMudHlwZU5hbWUpLGc9MD09PXk/MDpuZT8udmVydGV4RW5kSW5kZXhbeS0xXTtpZighbGUuaGFzKHkpKXtpZihsZS5hZGQoeSksbmUudHlwZXNbeV09PT1LLlJlY3Vyc2l2ZSl7Y29uc3QgZT1bbmUudmVydGljZXNbMipnXSxuZS52ZXJ0aWNlc1syKmcrMV1dLHQ9W25lLnZlcnRpY2VzWzIqKGcrMSldLG5lLnZlcnRpY2VzWzIqKGcrMSkrMV1dLGk9Wy41KihlWzBdK3RbMF0pLC41KihlWzFdK3RbMV0pXSxuPVtpWzBdLWVbMF0saVsxXS1lWzFdXSxvPVtpWzBdK25bMV0saVsxXS1uWzBdXSxzPVtpWzBdLW5bMV0saVsxXStuWzBdXTthLnB1c2goZSksYS5wdXNoKG8pLGEucHVzaCh0KSxhLnB1c2gocyksYS5wdXNoKGUpfWVsc2V7aWYobmUudHlwZXNbeV0hPT1LLlJlZ3VsYXIpe24uZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCJBIHJlbGF0aW9uc2hpcCBnZW5lcmF0ZWQgYW4gdW5zdXBwb3J0ZWQgbGluayBnZW9tZXRyeSB0eXBlLiAgSXQgd2lsbCBub3QgYmUgcmVuZGVyZWRcIik7Y29udGludWV9Zm9yKGxldCBlPWc7ZTxuZS52ZXJ0ZXhFbmRJbmRleFt5XTtlKyspYS5wdXNoKFtuZS52ZXJ0aWNlc1syKmVdLG5lLnZlcnRpY2VzWzIqZSsxXV0pfWlmKFwiY2hyb25vbG9naWNhbC1tb25vLXRpbWVsaW5lXCIhPT1lJiZcImNocm9ub2xvZ2ljYWwtbXVsdGktdGltZWxpbmVcIiE9PWUpe2NvbnN0IGU9X1t1LmdldChyKV0/LmZlYXR1cmUuYXR0cmlidXRlc1tUXSx0PV9bdS5nZXQoaCldPy5mZWF0dXJlLmF0dHJpYnV0ZXNbVF07YVswXVswXT09PWUueCYmYVswXVsxXT09PWUueXx8KGFbMF09W2UueCxlLnldKSxhW2EubGVuZ3RoLTFdWzBdPT09dC54JiZhW2EubGVuZ3RoLTFdWzFdPT09dC55fHwoYVthLmxlbmd0aC0xXT1bdC54LHQueV0pfWZvcihsZXQgZT0xO2U8YS5sZW5ndGgtMTtlKyspYVtlXVsxXT44NS41P2FbZV1bMV09ODUuNTphW2VdWzFdPC04NS41JiYoYVtlXVsxXT0tODUuNSksYVtlXVswXT4xNzkuOTk5OT9hW2VdWzBdPTE3OS45OTk5OmFbZV1bMF08LTE3OS45OTk5JiYoYVtlXVswXT0tMTc5Ljk5OTkpO29lLmhhcyhkKT9vZS5nZXQoZCkucHVzaChhKTpvZS5zZXQoZCxbYV0pfWNvbnN0IG09b2UuZ2V0KGQpO3NlLmhhcyhkKXx8KHNlLnNldChkLG5ldyBNYXApLHJlLnNldChkLG5ldyBNYXApKTtjb25zdCBmPXNlLmdldChkKSx3PXJlLmdldChkKTtmLmhhcyhzLnR5cGVOYW1lKXx8KGYuc2V0KHMudHlwZU5hbWUsbS5zaGlmdCgpKSx3LnNldChzLnR5cGVOYW1lLDApKTtjb25zdCBOPWYuZ2V0KHMudHlwZU5hbWUpO3cuc2V0KHMudHlwZU5hbWUsdy5nZXQocy50eXBlTmFtZSkrMSk7Y29uc3QgRD1uZXcgTCh7cGF0aHM6W05dfSk7aWYocy5mZWF0dXJlLmF0dHJpYnV0ZXNbVF09RCxwLmhhcyhzLnR5cGVOYW1lKSl7Y29uc3QgZT1wLmdldChzLnR5cGVOYW1lKTtlPy5zZXQocy5mZWF0dXJlLmF0dHJpYnV0ZXNbTV0scy5mZWF0dXJlKX1lbHNle2NvbnN0IGU9bmV3IE1hcDtlLnNldChzLmZlYXR1cmUuYXR0cmlidXRlc1tNXSxzLmZlYXR1cmUpLHAuc2V0KHMudHlwZU5hbWUsZSl9Yy5zZXQocy5mZWF0dXJlLmF0dHJpYnV0ZXNbTV0scy5mZWF0dXJlKTtjb25zdCB2PWIocy5mZWF0dXJlLmF0dHJpYnV0ZXNbVF0pO3RoaXMucmVsYXRpb25zaGlwTGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5zZXQocy5mZWF0dXJlLmF0dHJpYnV0ZXNbTV0scy5mZWF0dXJlLmF0dHJpYnV0ZXNbVF0/djpudWxsKTtjb25zdCB4PW8odGhpcy5kYXRhTWFuYWdlci5pbmNsdXNpb25Nb2RlRGVmaW5pdGlvbi5uYW1lZFR5cGVEZWZpbml0aW9ucyxzLnR5cGVOYW1lLCgoKT0+KHt1c2VBbGxEYXRhOiExLG1lbWJlcnM6bmV3IE1hcH0pKSk7byh4Lm1lbWJlcnMscy5mZWF0dXJlLmF0dHJpYnV0ZXNbTV0sKCgpPT4oe2lkOnMuZmVhdHVyZS5hdHRyaWJ1dGVzW01dLGxpbmtDaGFydExvY2F0aW9uOnZvaWQgMH0pKSkubGlua0NoYXJ0TG9jYXRpb249dn1mb3IoY29uc3QgaSBvZiBsKWkuZmVhdHVyZS5hdHRyaWJ1dGVzW05dPXJlLmdldChpLmZlYXR1cmUuYXR0cmlidXRlc1trXStcIi1cIitpLmZlYXR1cmUuYXR0cmlidXRlc1tDXSk/LmdldChpLnR5cGVOYW1lKT8/bnVsbDtyZXR1cm4gdGhpcy5fY3VycmVudExpbmtDaGFydENvbmZpZz17bGF5b3V0TW9kZTplLGxheW91dFNldHRpbmdzOnQ/LmxheW91dFNldHRpbmdzPy5jbG9uZSgpfSx7bm9kZXM6ZCxsaW5rczpwLGlkTWFwOmN9fWFzeW5jIGFwcGx5TmV3TGlua0NoYXJ0TGF5b3V0KGU9XCJvcmdhbmljLXN0YW5kYXJkXCIsdCl7Y29uc3QgYT1bXTthd2FpdCB0aGlzLl9jYWxjdWxhdGVMYXlvdXRXaXRoU3VibGF5ZXJUaW1lSW5mbyhlLHQpLHRoaXMubGF5ZXJzLmZvckVhY2goKGU9PnthLnB1c2goZS5yZWZyZXNoQ2FjaGVkUXVlcnlFbmdpbmUoKSl9KSksdGhpcy5tZW1iZXJzaGlwTW9kaWZpZWQ9ITAsYXdhaXQgUHJvbWlzZS5hbGwoYSksdGhpcy5fcmVmcmVzaE5hbWVkVHlwZXMoKX1nZXRDdXJyZW50Tm9kZUxvY2F0aW9ucygpe2NvbnN0IGU9bmV3IE1hcDtmb3IoY29uc3RbdCxhXW9mIHRoaXMuZGF0YU1hbmFnZXIuaW5jbHVzaW9uTW9kZURlZmluaXRpb24/Lm5hbWVkVHlwZURlZmluaXRpb25zLmVudHJpZXMoKT8/W10pdGhpcy5kYXRhTWFuYWdlci5yZWxhdGlvbnNoaXBUeXBlTmFtZXMuaGFzKHQpfHxhPy5tZW1iZXJzPy5mb3JFYWNoKCh0PT57Y29uc3QgYT10LmxpbmtDaGFydExvY2F0aW9uO2xldCBpO2NvbnN0IG49dC5pZDthJiYoaT1cInhcImluIGE/e3g6YS54LHk6YS55fTp7eDphLmNvb3Jkc1swXSx5OmEuY29vcmRzWzFdfSxlLnNldChuLG5ldyBmKHt4OmkueCx5OmkueX0pKSl9KSk7cmV0dXJuIGV9YXN5bmMgcmVmcmVzaExpbmtDaGFydENhY2hlKGUpe2F3YWl0IHRoaXMuZGF0YU1hbmFnZXIucmVmcmVzaENhY2hlQ29udGVudChlKTtjb25zdCB0PVtdO3RoaXMubGF5ZXJzLmZvckVhY2goKGU9Pnt0LnB1c2goZS5yZWZyZXNoQ2FjaGVkUXVlcnlFbmdpbmUoKSl9KSksYXdhaXQgUHJvbWlzZS5hbGwodCksdGhpcy5fcmVmcmVzaE5hbWVkVHlwZXMoKX1hc3luYyBjb25uZWN0QmV0d2VlbkVudGl0aWVzKGUsdCl7aWYoIWUubGVuZ3RoKXJldHVybntyZWNvcmRzOltdfTtsZXQgYT1bXTt0cnl7bGV0IGk9W107Zm9yKGNvbnN0IGUgb2YgdGhpcy5kYXRhTWFuYWdlci5yZWxhdGlvbnNoaXBUeXBlTmFtZXMpe2NvbnN0IHQ9dGhpcy5zdWJsYXllcklkc0NhY2hlLmdldChlKTt0JiYoaT1pLmNvbmNhdChBcnJheS5mcm9tKHQua2V5cygpKSkpfWE9YXdhaXQgdGhpcy5kYXRhTWFuYWdlci5nZXRSZWxhdGlvbnNoaXBzQmV0d2Vlbk5vZGVzKGUsaSx0KSxhd2FpdCB0aGlzLl9oYW5kbGVOZXdSZWNvcmRzKGEsdCkscih0KX1jYXRjaChpKXt0aHJvdyBsKGkpJiZ0aGlzLnJlbW92ZVJlY29yZHMoYSksaX1yZXR1cm57cmVjb3JkczphfX1hc3luYyBjb25uZWN0RnJvbUVudGl0aWVzKGUsdCl7aWYoIWUubGVuZ3RoKXJldHVybntyZWNvcmRzOltdfTtsZXQgYT1bXTt0cnl7bGV0IGk9W107Zm9yKGNvbnN0IGUgb2YgdGhpcy5kYXRhTWFuYWdlci5yZWxhdGlvbnNoaXBUeXBlTmFtZXMpe2NvbnN0IHQ9dGhpcy5zdWJsYXllcklkc0NhY2hlLmdldChlKTt0JiYoaT1pLmNvbmNhdChBcnJheS5mcm9tKHQua2V5cygpKSkpfWxldCBuPVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuZGF0YU1hbmFnZXIuZW50aXR5VHlwZU5hbWVzKXtjb25zdCB0PXRoaXMuc3VibGF5ZXJJZHNDYWNoZS5nZXQoZSk7dCYmKG49bi5jb25jYXQoQXJyYXkuZnJvbSh0KSkpfWE9YXdhaXQgdGhpcy5kYXRhTWFuYWdlci5nZXRSZWxhdGlvbnNoaXBzRnJvbU5vZGVzKGUsbixpLHQpLGF3YWl0IHRoaXMuX2hhbmRsZU5ld1JlY29yZHMoYSx0KSxhLmxlbmd0aD4wJiYodGhpcy5tZW1iZXJzaGlwTW9kaWZpZWQ9ITApLHIodCl9Y2F0Y2goaSl7dGhyb3cgbChpKSYmdGhpcy5yZW1vdmVSZWNvcmRzKGEpLGl9cmV0dXJue3JlY29yZHM6YX19Z2V0Q3VycmVudExheW91dCgpe3JldHVybiB0aGlzLl9jdXJyZW50TGlua0NoYXJ0Q29uZmlnLmxheW91dE1vZGV9YXN5bmMgX2NhbGN1bGF0ZUxheW91dFdpdGhTdWJsYXllclRpbWVJbmZvKGU9XCJvcmdhbmljLXN0YW5kYXJkXCIsdCl7Y29uc3QgYT1uZXcgTWFwO3RoaXMubGF5ZXJzLmZvckVhY2goKGU9PnthLnNldChlLm9iamVjdFR5cGUubmFtZSxlLnRpbWVJbmZvKX0pKSxhd2FpdCB0aGlzLmNhbGN1bGF0ZUxpbmtDaGFydExheW91dChlLHt0aW1lSW5mb0J5VHlwZU5hbWU6YSwuLi50fSksdGhpcy5saW5rQ2hhcnQ/LmhhbmRsZUNocm9ub2xvZ2ljYWxPdmVybGF5KCl9YXN5bmMgX2hhbmRsZU5ld1JlY29yZHMoZSx0KXtjb25zdCBhPW5ldyBTZXQsaT1bXSxuPXRoaXMubGF5ZXJzLmNvbmNhdCh0aGlzLnRhYmxlcyk7Zm9yKGNvbnN0IHIgb2YgZSl7aWYoIXRoaXMuX2dyYXBoVHlwZUxvb2t1cC5oYXMoci50eXBlTmFtZSkpY29udGludWU7ITE9PT1uLnNvbWUoKGU9PmUub2JqZWN0VHlwZS5uYW1lPT09ci50eXBlTmFtZSkpJiYodGhpcy5kYXRhTWFuYWdlci5zdWJsYXllckNhY2hlcy5zZXQoci50eXBlTmFtZSxuZXcgTWFwKSxhLmFkZChyLnR5cGVOYW1lKSk7byh0aGlzLnN1YmxheWVySWRzQ2FjaGUsci50eXBlTmFtZSwoKCk9Pm5ldyBTZXQpKS5hZGQoci5pZCksaS5wdXNoKHIpfXRoaXMuZGF0YU1hbmFnZXIuYWRkVG9MYXllcihpKTtmb3IoY29uc3QgbyBvZiBhKXtjb25zdCBlPXRoaXMuX2dyYXBoVHlwZUxvb2t1cC5nZXQobyk7aWYoZSl7Y29uc3QgdD10aGlzLl9jcmVhdGVTdWJsYXllcihlKTtcImVudGl0eVwiPT09ZS50eXBlP3RoaXMuZGF0YU1hbmFnZXIuZW50aXR5VHlwZU5hbWVzLmFkZChvKTp0aGlzLmRhdGFNYW5hZ2VyLnJlbGF0aW9uc2hpcFR5cGVOYW1lcy5hZGQobyksdC5nZW9tZXRyeVR5cGU/dGhpcy5sYXllcnMucHVzaCh0KTp0aGlzLnRhYmxlcy5wdXNoKHQpfX1hd2FpdCBJKHRoaXMsQXJyYXkuZnJvbShhKSx0KSxhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnJlZnJlc2hDYWNoZUNvbnRlbnQoZS5tYXAoKGU9PmUuaWQpKSx2b2lkIDAsdm9pZCAwLHZvaWQgMCx0KTtjb25zdCBzPXtsYXlvdXRTZXR0aW5nczp0aGlzLl9jdXJyZW50TGlua0NoYXJ0Q29uZmlnLmxheW91dFNldHRpbmdzLGxvY2tlZE5vZGVMb2NhdGlvbnM6bmV3IE1hcH07Zm9yKGNvbnN0W28scl1vZiB0aGlzLmVudGl0eUxpbmtDaGFydERpYWdyYW1Mb29rdXAuZW50cmllcygpKXImJnMubG9ja2VkTm9kZUxvY2F0aW9ucy5zZXQobyxuZXcgZihyLmNvb3Jkc1swXSxyLmNvb3Jkc1sxXSkpO2F3YWl0IHRoaXMuYXBwbHlOZXdMaW5rQ2hhcnRMYXlvdXQodGhpcy5fY3VycmVudExpbmtDaGFydENvbmZpZy5sYXlvdXRNb2RlLHMpfV9jcmVhdGVTdWJsYXllcnMoZSx0LGEpe2UuZm9yRWFjaCgoZT0+e2NvbnN0IGk9dGhpcy5fY3JlYXRlU3VibGF5ZXIoZSk7YShpKSYmdC5wdXNoKGkpLHRoaXMuX3VwZGF0ZVN1YmxheWVyQ2FjaGVzKGUpfSkpfV91cGRhdGVTdWJsYXllcnMoZSx0KXt0LmZvckVhY2goKHQ9Pnt0LnBhcmVudENvbXBvc2l0ZUxheWVyPXRoaXM7Y29uc3QgYT1lLmZpbmQoKGU9PmUudHlwZT09PXQuZ3JhcGhUeXBlJiZlLm5hbWU9PT10LmdyYXBoVHlwZU5hbWUpKTthJiYodC5vYmplY3RUeXBlPWEsdC5yZWFkKHt0aXRsZTphLm5hbWV9LHtvcmlnaW46XCJzZXJ2aWNlXCJ9KSx0aGlzLl91cGRhdGVTdWJsYXllckNhY2hlcyhhKSl9KSl9X3VwZGF0ZVN1YmxheWVyQ2FjaGVzKHtuYW1lOmV9KXtpZighZSlyZXR1cm47Y29uc3QgdD10aGlzLmRhdGFNYW5hZ2VyLnN1YmxheWVyQ2FjaGVzO3QuaGFzKGUpfHx0LnNldChlLG5ldyBNYXApfV9sYXllcnNMb2FkZWRGcm9tQXV0aG9yaXRhdGl2ZUl0ZW0oKXtjb25zdCBlPXRoaXMub3JpZ2luSWRPZihcImxheWVyc1wiKTtyZXR1cm4gZT49eS5QT1JUQUxfSVRFTSYmZTx5LlVTRVJ9YXN5bmMgX2luaXRpYWxpemVEaWFncmFtKCl7dGhpcy5pbml0aWFsaXphdGlvbkxpbmtDaGFydENvbmZpZz90aGlzLmluaXRpYWxpemF0aW9uTGlua0NoYXJ0Q29uZmlnLmRvTm90UmVjYWxjdWxhdGVMYXlvdXQ/KHRoaXMuZGF0YU1hbmFnZXIuaW5jbHVzaW9uTW9kZURlZmluaXRpb24/Lm5hbWVkVHlwZURlZmluaXRpb25zPy5mb3JFYWNoKCgoZSx0KT0+e2U/Lm1lbWJlcnM/LmZvckVhY2goKGU9Pntjb25zdCBhPWUubGlua0NoYXJ0TG9jYXRpb247bGV0IGk7Y29uc3Qgbj1lLmlkO2lmKCFhKXJldHVybjtpPVwieFwiaW4gYT97eDphLngseTphLnl9Ont4OmEuY29vcmRzWzBdLHk6YS5jb29yZHNbMV19O2NvbnN0IG89YihpKTt0aGlzLmRhdGFNYW5hZ2VyLnJlbGF0aW9uc2hpcFR5cGVOYW1lcy5oYXModCk/dGhpcy5yZWxhdGlvbnNoaXBMaW5rQ2hhcnREaWFncmFtTG9va3VwLnNldChuLG8pOnRoaXMuZW50aXR5TGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5zZXQobixvKSx0aGlzLmxpbmtDaGFydEV4dGVudC54bWluPmkueCYmKHRoaXMubGlua0NoYXJ0RXh0ZW50LnhtaW49aS54KSx0aGlzLmxpbmtDaGFydEV4dGVudC54bWF4PGkueCYmKHRoaXMubGlua0NoYXJ0RXh0ZW50LnhtYXg9aS54KSx0aGlzLmxpbmtDaGFydEV4dGVudC55bWluPmkueSYmKHRoaXMubGlua0NoYXJ0RXh0ZW50LnltaW49aS55KSx0aGlzLmxpbmtDaGFydEV4dGVudC55bWF4PGkueSYmKHRoaXMubGlua0NoYXJ0RXh0ZW50LnltYXg9aS55KX0pKX0pKSx0aGlzLm1lbWJlclJlbGF0aW9uc2hpcFR5cGVzLmZvckVhY2goKGU9PntlLm5hbWUmJnRoaXMuZGF0YU1hbmFnZXIuc3VibGF5ZXJDYWNoZXMuZ2V0KGUubmFtZSk/LmZvckVhY2goKGU9Pntjb25zdCB0PXRoaXMucmVsYXRpb25zaGlwTGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5nZXQoZS5hdHRyaWJ1dGVzW2tdKSxhPXRoaXMucmVsYXRpb25zaGlwTGlua0NoYXJ0RGlhZ3JhbUxvb2t1cC5nZXQoZS5hdHRyaWJ1dGVzW0NdKTtpZih0JiZhKXtjb25zdCBpPWIobmV3IEwoe3BhdGhzOltbW3QuY29vcmRzWzBdLHQuY29vcmRzWzFdXSxbYS5jb29yZHNbMF0sYS5jb29yZHNbMV1dXV19KSk7dGhpcy5yZWxhdGlvbnNoaXBMaW5rQ2hhcnREaWFncmFtTG9va3VwLnNldChlLmF0dHJpYnV0ZXNbTV0saSl9ZWxzZSB0aGlzLnJlbGF0aW9uc2hpcExpbmtDaGFydERpYWdyYW1Mb29rdXAuc2V0KGUuYXR0cmlidXRlc1tNXSxudWxsKX0pKX0pKSk6YXdhaXQgdGhpcy5fY2FsY3VsYXRlTGF5b3V0V2l0aFN1YmxheWVyVGltZUluZm8odGhpcy5pbml0aWFsaXphdGlvbkxpbmtDaGFydENvbmZpZy5sYXlvdXRNb2RlLHtsb2NrZWROb2RlTG9jYXRpb25zOnRoaXMuZ2V0Q3VycmVudE5vZGVMb2NhdGlvbnMoKSwuLi50aGlzLmluaXRpYWxpemF0aW9uTGlua0NoYXJ0Q29uZmlnfHx7fX0pOmF3YWl0IHRoaXMuX2NhbGN1bGF0ZUxheW91dFdpdGhTdWJsYXllclRpbWVJbmZvKFwib3JnYW5pYy1zdGFuZGFyZFwiLHtsb2NrZWROb2RlTG9jYXRpb25zOnRoaXMuZ2V0Q3VycmVudE5vZGVMb2NhdGlvbnMoKX0pfV9yZWZyZXNoTmFtZWRUeXBlcygpe2Zvcihjb25zdCBlIG9mIHRoaXMubGF5ZXJzKWUuZW1pdChcInJlZnJlc2hcIix7ZGF0YUNoYW5nZWQ6ITB9KTtmb3IoY29uc3QgZSBvZiB0aGlzLnRhYmxlcyllLmVtaXQoXCJyZWZyZXNoXCIse2RhdGFDaGFuZ2VkOiEwfSl9X3ZhbGlkYXRlT3JnYW5pY0xheW91dFNldHRpbmdzKGUsdCl7Y29uc3QgYT1lPT5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpLGk9ZT0+YShlKSYmZT49MSxvPWU9PmEoZSkmJmU+PTEscz1lPT5PYmplY3QudmFsdWVzKEQpLmluY2x1ZGVzKGUpLHI9ZT0+YShlKSYmZT49MCxsPXt9O2lmKCFuZXcgU2V0KFtcIm9yZ2FuaWMtc3RhbmRhcmRcIixcIm9yZ2FuaWMtY29tbXVuaXR5XCIsXCJnZW9ncmFwaGljLW9yZ2FuaWMtc3RhbmRhcmRcIixcImNocm9ub2xvZ2ljYWwtbXVsdGktdGltZWxpbmVcIixcImNocm9ub2xvZ2ljYWwtbW9uby10aW1lbGluZVwiXSkuaGFzKGUpfHwhdClyZXR1cm4gbDtjb25zdHtjb21wdXRhdGlvbkJ1ZGdldFRpbWU6aCxhdXRvUmVwdWxzaW9uUmFkaXVzOmQscmVwdWxzaW9uUmFkaXVzTXVsdGlwbGllcjpwLGFic29sdXRlSWRlYWxFZGdlTGVuZ3RoOmMsbXVsdGlwbGljYXRpdmVJZGVhbEVkZ2VMZW5ndGg6dSxpZGVhbEVkZ2VMZW5ndGhUeXBlOnl9PXQ7cmV0dXJuIG8oaCk/bC5jb21wdXRhdGlvbkJ1ZGdldFRpbWU9aDpoJiZuLmdldExvZ2dlcih0aGlzKS53YXJuKFwiSW52YWxpZCBsYXlvdXQgY29tcHV0YXRpb25CdWRnZXRUaW1lIHNldHRpbmcsIHdpbGwgcmV2ZXJ0IHRvIGRlZmF1bHQgc2V0dGluZ1wiKSxsLmF1dG9SZXB1bHNpb25SYWRpdXM9ZCwhZCYmaShwKT9sLnJlcHVsc2lvblJhZGl1c011bHRpcGxpZXI9cDpkfHwobC5hdXRvUmVwdWxzaW9uUmFkaXVzPSEwLG4uZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCJJbnZhbGlkIGxheW91dCByZXB1bHNpb25SYWRpdXNNdWx0aXBsaWVyIHNldHRpbmcsIHdpbGwgcmV2ZXJ0IHRvIGRlZmF1bHQgc2V0dGluZ1wiKSksXCJnZW9ncmFwaGljLW9yZ2FuaWMtc3RhbmRhcmRcIj09PWUmJihzKHkpP2wuaWRlYWxFZGdlTGVuZ3RoVHlwZT15OnZvaWQgMCE9PXkmJm4uZ2V0TG9nZ2VyKHRoaXMpLndhcm4oJ0ludmFsaWQgbGF5b3V0IGlkZWFsRWRnZUxlbmd0aFR5cGUgc2V0dGluZywgd2lsbCByZXZlcnQgdG8gXCJtdWx0aXBsaWVyXCIgc2V0dGluZycpLFwiYWJzb2x1dGUtdmFsdWVcIj09PXkmJnIoYyk/bC5hYnNvbHV0ZUlkZWFsRWRnZUxlbmd0aD1jOlwiYWJzb2x1dGUtdmFsdWVcIj09PXkmJnZvaWQgMCE9PWM/bi5nZXRMb2dnZXIodGhpcykud2FybihcIkludmFsaWQgbGF5b3V0IGlkZWFsRWRnZUxlbmd0aCBzZXR0aW5nLCB3aWxsIHJldmVydCB0byBkZWZhdWx0IHNldHRpbmdcIik6XCJtdWx0aXBsaWVyXCI9PT15JiZyKHUpP2wubXVsdGlwbGljYXRpdmVJZGVhbEVkZ2VMZW5ndGg9dTpcIm11bHRpcGxpZXJcIj09PXkmJnZvaWQgMCE9PXUmJm4uZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCJJbnZhbGlkIGxheW91dCBpZGVhbEVkZ2VMZW5ndGggc2V0dGluZywgd2lsbCByZXZlcnQgdG8gZGVmYXVsdCBzZXR0aW5nXCIpKSxsfV9jb252ZXJ0VmFsaWRhdGVkT3JnYW5pY1NldHRpbmdzVG9DYWxjdWxhdGlvblNldHRpbmdzKGUpe2xldCB0PWUuaWRlYWxFZGdlTGVuZ3RoVHlwZT09PUQuQUJTT0xVVEU/ZS5hYnNvbHV0ZUlkZWFsRWRnZUxlbmd0aDplLm11bHRpcGxpY2F0aXZlSWRlYWxFZGdlTGVuZ3RoO3JldHVybiBlLmlkZWFsRWRnZUxlbmd0aFR5cGU9PT1ELkFCU09MVVRFJiYodm9pZCAwPT09dD90PS0xOnQqPS0xKSx7Y29tcHV0YXRpb25CdWRnZXRUaW1lOmUuY29tcHV0YXRpb25CdWRnZXRUaW1lPz92b2lkIDAscmVwdWxzaW9uUmFkaXVzTXVsdGlwbGllcjplLnJlcHVsc2lvblJhZGl1c011bHRpcGxpZXImJiFlLmF1dG9SZXB1bHNpb25SYWRpdXM/ZS5yZXB1bHNpb25SYWRpdXNNdWx0aXBsaWVyOnZvaWQgMCxpZGVhbEVkZ2VMZW5ndGhNdWx0aXBsaWVyOnR9fV9jcmVhdGVTdWJsYXllcihlKXtyZXR1cm4gbmV3IHgoe29iamVjdFR5cGU6ZSxwYXJlbnRDb21wb3NpdGVMYXllcjp0aGlzLGdyYXBoVHlwZTplLnR5cGV9KX1faGFuZGxlU3VibGF5ZXJzQ2hhbmdlKGUsdCl7dCYmKHQuZm9yRWFjaCgoZT0+e2UucGFyZW50PW51bGx9KSksdGhpcy5yZW1vdmVIYW5kbGVzKFwic3VibGF5ZXJzLW93bmVyXCIpKSxlJiYoZS5mb3JFYWNoKChlPT57ZS5wYXJlbnQ9dGhpc30pKSx0aGlzLmFkZEhhbmRsZXMoW2Uub24oXCJhZnRlci1hZGRcIiwoKHtpdGVtOmV9KT0+e2UucGFyZW50PXRoaXN9KSksZS5vbihcImFmdGVyLXJlbW92ZVwiLCgoe2l0ZW06ZX0pPT57ZS5wYXJlbnQ9bnVsbH0pKV0sXCJzdWJsYXllcnMtb3duZXJcIikpfV9hbGlnbkxheWVyc0RhdGFNb2RlbEFuZEluY2x1c2lvbkRlZmluaXRpb24oZSl7Y29uc3QgdD1uZXcgU2V0KChlLmVudGl0eVR5cGVzPz9bXSkubWFwKChlPT5lLm5hbWUpKS5jb25jYXQoKGUucmVsYXRpb25zaGlwVHlwZXM/P1tdKS5tYXAoKGU9PmUubmFtZSkpKSksaT1uZXcgU2V0KChlLmVudGl0eVR5cGVzPz9bXSkubWFwKChlPT5lLm5hbWUpKSksbz1uZXcgU2V0KChlLnJlbGF0aW9uc2hpcFR5cGVzPz9bXSkubWFwKChlPT5lLm5hbWUpKSk7aWYodGhpcy5sYXllcnMpe2Zvcihjb25zdCBhIG9mIHRoaXMubGF5ZXJzKSFhLmdyYXBoVHlwZSYmdC5oYXMoYS5ncmFwaFR5cGVOYW1lKSYmKGEuZ3JhcGhUeXBlPWkuaGFzKGEuZ3JhcGhUeXBlTmFtZSk/XCJlbnRpdHlcIjpcInJlbGF0aW9uc2hpcFwiKTtjb25zdCBlPXRoaXMubGF5ZXJzLmZpbHRlcigoZT0+dC5oYXMoZS5ncmFwaFR5cGVOYW1lKSYmKFwiZW50aXR5XCI9PT1lLmdyYXBoVHlwZT9pLmhhcyhlLmdyYXBoVHlwZU5hbWUpOm8uaGFzKGUuZ3JhcGhUeXBlTmFtZSkpKSk7dGhpcy5zZXRBdE9yaWdpbihcImxheWVyc1wiLGUsZyh0aGlzLm9yaWdpbklkT2YoXCJsYXllcnNcIikpKX1lbHNlIHRoaXMubGF5ZXJzPW5ldyBhO2lmKHRoaXMubGF5ZXJzJiZ0aGlzLl9vcmlnaW5hbEluY2x1c2lvbkxpc3Qpe2NvbnN0IGU9bmV3IFNldCh0aGlzLl9vcmlnaW5hbEluY2x1c2lvbkxpc3QubmFtZWRUeXBlRGVmaW5pdGlvbnMua2V5cygpKSx0PXRoaXMudGFibGVzPy5tYXAoKGU9PmUuZ3JhcGhUeXBlTmFtZSkpPz9bXSxhPXRoaXMubGF5ZXJzLm1hcCgoZT0+ZS5ncmFwaFR5cGVOYW1lKSkuY29uY2F0KHQpO2Zvcihjb25zdCBuIG9mIGEpZS5oYXMobil8fHRoaXMuX29yaWdpbmFsSW5jbHVzaW9uTGlzdC5uYW1lZFR5cGVEZWZpbml0aW9ucy5zZXQobix7dXNlQWxsRGF0YTohMSxtZW1iZXJzOm5ldyBNYXB9KTtjb25zdCBpPVtdO2Zvcihjb25zdCBvIG9mIHRoaXMuX29yaWdpbmFsSW5jbHVzaW9uTGlzdC5uYW1lZFR5cGVEZWZpbml0aW9ucy5rZXlzKCkpYS5pbmNsdWRlcyhvKXx8KG4uZ2V0TG9nZ2VyKHRoaXMpLndhcm4oYEEgbmFtZWQgdHlwZSwgJHtvfSwgd2FzIGluIHRoZSBzZXJpYWxpemVkIGZlYXR1cmUgY29sbGVjdGlvbiBidXQgZGlkIG5vdCBoYXZlIGEgc3VibGF5ZXIgY29uZmlnIGluIHRoZSBpdGVtLCBzbyB3aWxsIGJlIHJlbW92ZWRgKSxpLnB1c2gobykpO2Zvcihjb25zdCBuIG9mIGkpdGhpcy5fb3JpZ2luYWxJbmNsdXNpb25MaXN0Lm5hbWVkVHlwZURlZmluaXRpb25zLmRlbGV0ZShuKX19fTtlKFtjKEcpXSxxLnByb3RvdHlwZSxcInVybFwiLHZvaWQgMCksZShbYygpXSxxLnByb3RvdHlwZSxcImRhdGFQcmVsb2FkZWRJbkxvY2FsQ2FjaGVcIix2b2lkIDApLGUoW2MoKV0scS5wcm90b3R5cGUsXCJpbml0aWFsaXphdGlvbkxpbmtDaGFydENvbmZpZ1wiLHZvaWQgMCksZShbYygpXSxxLnByb3RvdHlwZSxcIm1lbWJlcnNoaXBNb2RpZmllZFwiLHZvaWQgMCksZShbYygpXSxxLnByb3RvdHlwZSxcImRhdGFNYW5hZ2VyXCIsdm9pZCAwKSxlKFtjKCldLHEucHJvdG90eXBlLFwiaW5pdGlhbGl6YXRpb25JbmNsdXNpb25Nb2RlRGVmaW5pdGlvblwiLG51bGwpLGUoW2MoKV0scS5wcm90b3R5cGUsXCJrbm93bGVkZ2VHcmFwaFwiLHZvaWQgMCksZShbYyh7dHlwZTphLm9mVHlwZSh4KSxqc29uOnt3cml0ZTp7aWdub3JlT3JpZ2luOiEwfX19KV0scS5wcm90b3R5cGUsXCJsYXllcnNcIix2b2lkIDApLGUoW2Moe3JlYWRPbmx5OiEwfSldLHEucHJvdG90eXBlLFwibGlua0NoYXJ0XCIsbnVsbCksZShbYygpXSxxLnByb3RvdHlwZSxcImVudGl0eUxpbmtDaGFydERpYWdyYW1Mb29rdXBcIix2b2lkIDApLGUoW2MoKV0scS5wcm90b3R5cGUsXCJyZWxhdGlvbnNoaXBMaW5rQ2hhcnREaWFncmFtTG9va3VwXCIsdm9pZCAwKSxlKFtjKCldLHEucHJvdG90eXBlLFwibGlua0NoYXJ0RXh0ZW50XCIsdm9pZCAwKSxlKFtjKCldLHEucHJvdG90eXBlLFwibWVtYmVyRW50aXR5VHlwZXNcIix2b2lkIDApLGUoW2MoKV0scS5wcm90b3R5cGUsXCJtZW1iZXJSZWxhdGlvbnNoaXBUeXBlc1wiLHZvaWQgMCksZShbYyh7dHlwZTpbXCJMaW5rQ2hhcnRMYXllclwiXX0pXSxxLnByb3RvdHlwZSxcIm9wZXJhdGlvbmFsTGF5ZXJUeXBlXCIsdm9pZCAwKSxlKFtjKCldLHEucHJvdG90eXBlLFwic3VibGF5ZXJJZHNDYWNoZVwiLHZvaWQgMCksZShbYyh7dHlwZTphLm9mVHlwZSh4KSxqc29uOnt3cml0ZTp7aWdub3JlT3JpZ2luOiEwfX19KV0scS5wcm90b3R5cGUsXCJ0YWJsZXNcIix2b2lkIDApLGUoW2Moe2pzb246e3JlYWQ6ITF9fSldLHEucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksZShbYyh7anNvbjp7cmVhZDohMX19KV0scS5wcm90b3R5cGUsXCJjaHJvbm9sb2dpY2FsQXV4aWxpYXJ5R3JhcGhpY3NcIix2b2lkIDApLHE9ZShbdShcImVzcmkubGF5ZXJzLkxpbmtDaGFydExheWVyXCIpXSxxKTtjb25zdCBKPXE7ZXhwb3J0e0ogYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGU7IWZ1bmN0aW9uKGUpe2UuTVVMVElQTElFUj1cIm11bHRpcGxpZXJcIixlLkFCU09MVVRFPVwiYWJzb2x1dGUtdmFsdWVcIn0oZXx8KGU9e30pKTtleHBvcnR7ZSBhcyBJZGVhbEVkZ2VMZW5ndGhUeXBlT3B0aW9uc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=