export const __webpack_id__ = "node_modules_arcgis_core_symbols_support_previewCIMSymbol_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_symbols_support_previewCIMSymbol_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCIMSymbolPreviewSize: () => (/* binding */ g),
/* harmony export */   previewCIMSymbol: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cim/CIMSymbolHelper.js */ "./node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js");
/* harmony import */ var _cim_CIMSymbolRasterizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../cim/CIMSymbolRasterizer.js */ "./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js");
/* harmony import */ var _cim_OverrideHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../cim/OverrideHelper.js */ "./node_modules/@arcgis/core/symbols/cim/OverrideHelper.js");
/* harmony import */ var _cim_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../cim/utils.js */ "./node_modules/@arcgis/core/symbols/cim/utils.js");
/* harmony import */ var _previewUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./previewUtils.js */ "./node_modules/@arcgis/core/symbols/support/previewUtils.js");
/* harmony import */ var _renderUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./renderUtils.js */ "./node_modules/@arcgis/core/symbols/support/renderUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=new _cim_CIMSymbolRasterizer_js__WEBPACK_IMPORTED_MODULE_2__.CIMSymbolRasterizer(null),m=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(_previewUtils_js__WEBPACK_IMPORTED_MODULE_5__.SymbolSizeDefaults.size),h=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(_previewUtils_js__WEBPACK_IMPORTED_MODULE_5__.SymbolSizeDefaults.maxSize),c=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(_previewUtils_js__WEBPACK_IMPORTED_MODULE_5__.SymbolSizeDefaults.lineWidth),y=1;async function u(e,t,i){const o=t?.size;let l=null!=o&&"object"==typeof o&&"width"in o?o.width:o,r=null!=o&&"object"==typeof o&&"height"in o?o.height:o;if(!l||!r)if("esriGeometryPolygon"===i)l=r=t.maxSize?Math.min(t.maxSize,m):m;else{const o=await g(e,t,i);o&&(l=o.width,r=o.height),"esriGeometryPolyline"===i&&(l=t.maxSize?Math.min(t.maxSize,c):c),l=null!=l&&isFinite(l)?Math.min(l,h):m,r=null!=r&&isFinite(r)?Math.max(Math.min(r,h),y):m}return"legend"===t.style&&"esriGeometryPolyline"===i&&(l=c),{width:l,height:r}}async function g(e,t={},o){const n=t.cimOptions||t;o??=n.geometryType||(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_4__.mapCIMSymbolToGeometryType)(e?.data?.symbol);const{feature:a,fieldMap:m,viewParams:h}=n,c=await _cim_OverrideHelper_js__WEBPACK_IMPORTED_MODULE_3__.OverrideHelper.resolveSymbolOverrides(e.data,a,null,m,o,null,h);if(!c)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:c},e.data.primitiveOverrides=void 0;const y=[];return _cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_1__.CIMSymbolHelper.fetchResources(c,s.resourceManager,y),_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_1__.CIMSymbolHelper.fetchFonts(c,s.resourceManager,y),y.length>0&&await Promise.all(y),_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_1__.CIMSymbolHelper.getEnvelope(c,null,s.resourceManager)}async function d(i,o={}){const{node:l,opacity:n,symbolConfig:m}=o,h=null!=m&&"object"==typeof m&&"isSquareFill"in m&&m.isSquareFill,c=o.cimOptions||o,y=c.geometryType||(0,_cim_utils_js__WEBPACK_IMPORTED_MODULE_4__.mapCIMSymbolToGeometryType)(i?.data?.symbol),g=await u(i,o,y),{feature:d,fieldMap:f}=c,p=o?.geometry||h||"esriGeometryPolygon"!==y?"preview":"legend";let w=g;const b=g;if(o?.geometry&&("esriGeometryPolygon"===y||"esriGeometryPolyline"===y)){const i=200;if((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(g.width)<i||(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(g.height)<i){const e=g.width>g.height?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(i)*g.height/g.width:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(i);w={width:g.width>g.height?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(i):(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.px2pt)(i)*g.width/g.height,height:e}}}const M=await s.rasterizeCIMSymbolAsync(i,d,w,p,f,y,null,c.viewParams,c.allowScalingUp,o?.geometry?.toJSON());if(!M)return null;const{width:S,height:v}=M,j=document.createElement("canvas");j.width=S,j.height=v;j.getContext("2d").putImageData(M,0,0);const x=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(b.width),z=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(b.height),P=new Image(x,z);P.src=j.toDataURL(),P.ariaLabel=o.ariaLabel??null,P.alt=o.ariaLabel??"",null!=n&&(P.style.opacity=`${n}`);let C=P;if(null!=o.effectView){const e={shape:{type:"image",x:0,y:0,width:x,height:z,src:P.src},fill:null,stroke:null,offset:[0,0]};C=(0,_renderUtils_js__WEBPACK_IMPORTED_MODULE_6__.renderSymbol)([[e]],[x,z],o)}return l&&C&&l.appendChild(C),C}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3N5bWJvbHNfc3VwcG9ydF9wcmV2aWV3Q0lNU3ltYm9sX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUMyWixZQUFZLDRFQUFDLFNBQVMsMkRBQUMsQ0FBQyxnRUFBQyxTQUFTLDJEQUFDLENBQUMsZ0VBQUMsWUFBWSwyREFBQyxDQUFDLGdFQUFDLGdCQUFnQix3QkFBd0IsZ0JBQWdCLGdIQUFnSCw2RUFBNkUsS0FBSyx1QkFBdUIsc0xBQXNMLDZEQUE2RCxrQkFBa0IsdUJBQXVCLElBQUksd0JBQXdCLG9CQUFvQix5RUFBQyxrQkFBa0IsTUFBTSxrQ0FBa0MsV0FBVyxrRUFBQyxrREFBa0Qsa0JBQWtCLG9CQUFvQixtQ0FBbUMsa0NBQWtDLFdBQVcsT0FBTyxvRUFBQyx1Q0FBdUMsb0VBQUMsb0VBQW9FLG9FQUFDLHVDQUF1Qyx1QkFBdUIsRUFBRSxNQUFNLGdDQUFnQyx5R0FBeUcseUVBQUMsb0NBQW9DLHFCQUFxQixrRUFBa0UsUUFBUSxVQUFVLHlFQUF5RSxZQUFZLEdBQUcsMkRBQUMsYUFBYSwyREFBQyxjQUFjLHlCQUF5QiwyREFBQyxxQkFBcUIsMkRBQUMsSUFBSSxHQUFHLHVCQUF1QiwyREFBQyxJQUFJLDJEQUFDLGdDQUFnQyw4R0FBOEcsa0JBQWtCLE1BQU0saUJBQWlCLHNDQUFzQyxxQkFBcUIsdUNBQXVDLFFBQVEsMkRBQUMsWUFBWSwyREFBQyw0QkFBNEIscUdBQXFHLEVBQUUsR0FBRyxRQUFRLHVCQUF1QixTQUFTLE9BQU8sZ0RBQWdELHFDQUFxQyxFQUFFLDZEQUFDLGdCQUFnQixnQ0FBMkYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvc3ltYm9scy9zdXBwb3J0L3ByZXZpZXdDSU1TeW1ib2wuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtwdDJweCBhcyBlLHB4MnB0IGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9zY3JlZW5VdGlscy5qc1wiO2ltcG9ydHtDSU1TeW1ib2xIZWxwZXIgYXMgaX1mcm9tXCIuLi9jaW0vQ0lNU3ltYm9sSGVscGVyLmpzXCI7aW1wb3J0e0NJTVN5bWJvbFJhc3Rlcml6ZXIgYXMgb31mcm9tXCIuLi9jaW0vQ0lNU3ltYm9sUmFzdGVyaXplci5qc1wiO2ltcG9ydHtPdmVycmlkZUhlbHBlciBhcyBsfWZyb21cIi4uL2NpbS9PdmVycmlkZUhlbHBlci5qc1wiO2ltcG9ydHttYXBDSU1TeW1ib2xUb0dlb21ldHJ5VHlwZSBhcyByfWZyb21cIi4uL2NpbS91dGlscy5qc1wiO2ltcG9ydHtTeW1ib2xTaXplRGVmYXVsdHMgYXMgbn1mcm9tXCIuL3ByZXZpZXdVdGlscy5qc1wiO2ltcG9ydHtyZW5kZXJTeW1ib2wgYXMgYX1mcm9tXCIuL3JlbmRlclV0aWxzLmpzXCI7Y29uc3Qgcz1uZXcgbyhudWxsKSxtPXQobi5zaXplKSxoPXQobi5tYXhTaXplKSxjPXQobi5saW5lV2lkdGgpLHk9MTthc3luYyBmdW5jdGlvbiB1KGUsdCxpKXtjb25zdCBvPXQ/LnNpemU7bGV0IGw9bnVsbCE9byYmXCJvYmplY3RcIj09dHlwZW9mIG8mJlwid2lkdGhcImluIG8/by53aWR0aDpvLHI9bnVsbCE9byYmXCJvYmplY3RcIj09dHlwZW9mIG8mJlwiaGVpZ2h0XCJpbiBvP28uaGVpZ2h0Om87aWYoIWx8fCFyKWlmKFwiZXNyaUdlb21ldHJ5UG9seWdvblwiPT09aSlsPXI9dC5tYXhTaXplP01hdGgubWluKHQubWF4U2l6ZSxtKTptO2Vsc2V7Y29uc3Qgbz1hd2FpdCBnKGUsdCxpKTtvJiYobD1vLndpZHRoLHI9by5oZWlnaHQpLFwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIj09PWkmJihsPXQubWF4U2l6ZT9NYXRoLm1pbih0Lm1heFNpemUsYyk6YyksbD1udWxsIT1sJiZpc0Zpbml0ZShsKT9NYXRoLm1pbihsLGgpOm0scj1udWxsIT1yJiZpc0Zpbml0ZShyKT9NYXRoLm1heChNYXRoLm1pbihyLGgpLHkpOm19cmV0dXJuXCJsZWdlbmRcIj09PXQuc3R5bGUmJlwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIj09PWkmJihsPWMpLHt3aWR0aDpsLGhlaWdodDpyfX1hc3luYyBmdW5jdGlvbiBnKGUsdD17fSxvKXtjb25zdCBuPXQuY2ltT3B0aW9uc3x8dDtvPz89bi5nZW9tZXRyeVR5cGV8fHIoZT8uZGF0YT8uc3ltYm9sKTtjb25zdHtmZWF0dXJlOmEsZmllbGRNYXA6bSx2aWV3UGFyYW1zOmh9PW4sYz1hd2FpdCBsLnJlc29sdmVTeW1ib2xPdmVycmlkZXMoZS5kYXRhLGEsbnVsbCxtLG8sbnVsbCxoKTtpZighYylyZXR1cm4gbnVsbDsoZT1lLmNsb25lKCkpLmRhdGE9e3R5cGU6XCJDSU1TeW1ib2xSZWZlcmVuY2VcIixzeW1ib2w6Y30sZS5kYXRhLnByaW1pdGl2ZU92ZXJyaWRlcz12b2lkIDA7Y29uc3QgeT1bXTtyZXR1cm4gaS5mZXRjaFJlc291cmNlcyhjLHMucmVzb3VyY2VNYW5hZ2VyLHkpLGkuZmV0Y2hGb250cyhjLHMucmVzb3VyY2VNYW5hZ2VyLHkpLHkubGVuZ3RoPjAmJmF3YWl0IFByb21pc2UuYWxsKHkpLGkuZ2V0RW52ZWxvcGUoYyxudWxsLHMucmVzb3VyY2VNYW5hZ2VyKX1hc3luYyBmdW5jdGlvbiBkKGksbz17fSl7Y29uc3R7bm9kZTpsLG9wYWNpdHk6bixzeW1ib2xDb25maWc6bX09byxoPW51bGwhPW0mJlwib2JqZWN0XCI9PXR5cGVvZiBtJiZcImlzU3F1YXJlRmlsbFwiaW4gbSYmbS5pc1NxdWFyZUZpbGwsYz1vLmNpbU9wdGlvbnN8fG8seT1jLmdlb21ldHJ5VHlwZXx8cihpPy5kYXRhPy5zeW1ib2wpLGc9YXdhaXQgdShpLG8seSkse2ZlYXR1cmU6ZCxmaWVsZE1hcDpmfT1jLHA9bz8uZ2VvbWV0cnl8fGh8fFwiZXNyaUdlb21ldHJ5UG9seWdvblwiIT09eT9cInByZXZpZXdcIjpcImxlZ2VuZFwiO2xldCB3PWc7Y29uc3QgYj1nO2lmKG8/Lmdlb21ldHJ5JiYoXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI9PT15fHxcImVzcmlHZW9tZXRyeVBvbHlsaW5lXCI9PT15KSl7Y29uc3QgaT0yMDA7aWYoZShnLndpZHRoKTxpfHxlKGcuaGVpZ2h0KTxpKXtjb25zdCBlPWcud2lkdGg+Zy5oZWlnaHQ/dChpKSpnLmhlaWdodC9nLndpZHRoOnQoaSk7dz17d2lkdGg6Zy53aWR0aD5nLmhlaWdodD90KGkpOnQoaSkqZy53aWR0aC9nLmhlaWdodCxoZWlnaHQ6ZX19fWNvbnN0IE09YXdhaXQgcy5yYXN0ZXJpemVDSU1TeW1ib2xBc3luYyhpLGQsdyxwLGYseSxudWxsLGMudmlld1BhcmFtcyxjLmFsbG93U2NhbGluZ1VwLG8/Lmdlb21ldHJ5Py50b0pTT04oKSk7aWYoIU0pcmV0dXJuIG51bGw7Y29uc3R7d2lkdGg6UyxoZWlnaHQ6dn09TSxqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7ai53aWR0aD1TLGouaGVpZ2h0PXY7ai5nZXRDb250ZXh0KFwiMmRcIikucHV0SW1hZ2VEYXRhKE0sMCwwKTtjb25zdCB4PWUoYi53aWR0aCksej1lKGIuaGVpZ2h0KSxQPW5ldyBJbWFnZSh4LHopO1Auc3JjPWoudG9EYXRhVVJMKCksUC5hcmlhTGFiZWw9by5hcmlhTGFiZWw/P251bGwsUC5hbHQ9by5hcmlhTGFiZWw/P1wiXCIsbnVsbCE9biYmKFAuc3R5bGUub3BhY2l0eT1gJHtufWApO2xldCBDPVA7aWYobnVsbCE9by5lZmZlY3RWaWV3KXtjb25zdCBlPXtzaGFwZTp7dHlwZTpcImltYWdlXCIseDowLHk6MCx3aWR0aDp4LGhlaWdodDp6LHNyYzpQLnNyY30sZmlsbDpudWxsLHN0cm9rZTpudWxsLG9mZnNldDpbMCwwXX07Qz1hKFtbZV1dLFt4LHpdLG8pfXJldHVybiBsJiZDJiZsLmFwcGVuZENoaWxkKEMpLEN9ZXhwb3J0e2cgYXMgZ2V0Q0lNU3ltYm9sUHJldmlld1NpemUsZCBhcyBwcmV2aWV3Q0lNU3ltYm9sfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==