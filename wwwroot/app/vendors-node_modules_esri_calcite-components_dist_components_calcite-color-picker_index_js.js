export const __webpack_id__ = "vendors-node_modules_esri_calcite-components_dist_components_calcite-color-picker_index_js";
export const __webpack_ids__ = ["vendors-node_modules_esri_calcite-components_dist_components_calcite-color-picker_index_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/XButton.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/XButton.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   X: () => (/* binding */ XButton)
/* harmony export */ });
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _component_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component.js */ "./node_modules/@esri/calcite-components/dist/chunks/component.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */





const CSS = {
  button: "x-button",
  buttonRound: "x-button--round"
};
const XButton = ({ disabled, focusable, key, label, onClick, ref: ref$1, round = true, scale, title }) => (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__.keyed)(key, (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<button .ariaLabel=${label} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)({
  [((scale2) => `x-button--${scale2}`)(scale)]: true,
  [CSS.button]: true,
  [CSS.buttonRound]: round
})} .disabled=${disabled} @click=${onClick} .tabIndex=${focusable ? 0 : -1} title=${title ?? lit_html__WEBPACK_IMPORTED_MODULE_2__.nothing} type=button ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_0__.ref)(ref$1)}><calcite-icon icon=x .scale=${(0,_component_js__WEBPACK_IMPORTED_MODULE_4__.g)(scale)}></calcite-icon></button>`);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/core.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/core.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ calciteSize32),
/* harmony export */   b: () => (/* binding */ calciteSize44),
/* harmony export */   c: () => (/* binding */ calciteSize24),
/* harmony export */   d: () => (/* binding */ calciteSize48)
/* harmony export */ });
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */
const calciteSize24 = "24px";
const calciteSize32 = "32px";
const calciteSize44 = "44px";
const calciteSize48 = "48px";



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/math.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/math.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ closeToRangeEdge),
/* harmony export */   c: () => (/* binding */ clamp),
/* harmony export */   d: () => (/* binding */ decimalPlaces),
/* harmony export */   g: () => (/* binding */ getDecimals),
/* harmony export */   r: () => (/* binding */ remap)
/* harmony export */ });
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */
const clamp = (value, min, max) => Math.max(min, Math.min(value, max));
const decimalNumberRegex = new RegExp(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
const decimalPlaces = (value) => {
  const match = ("" + value).match(decimalNumberRegex);
  if (!match || parseInt(match[1]) === 0) {
    return 0;
  }
  return Math.max(
    0,
    // Number of digits right of decimal point.
    (match[1] ? match[1].length : 0) - // Adjust for scientific notation.
    (match[2] ? +match[2] : 0)
  );
};
function getDecimals(value) {
  if (decimalPlaces(value) > 0 && value > 0) {
    return parseFloat(`0.${value.toString().split(".")[1]}`);
  }
  return value;
}
function remap(value, fromMin, fromMax, toMin, toMax) {
  return (value - fromMin) * (toMax - toMin) / (fromMax - fromMin) + toMin;
}
function closeToRangeEdge(value, range, threshold) {
  return value < threshold ? -1 : value > range - threshold ? 1 : 0;
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/useCancelable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/useCancelable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ useCancelable)
/* harmony export */ });
/* harmony import */ var _arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/lumina/controllers */ "./node_modules/@arcgis/lumina/dist/controllers/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

const useCancelable = () => {
  return (0,_arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__.makeGenericController)((_, controller) => {
    const resources = /* @__PURE__ */ new Set();
    controller.onDisconnected(() => {
      resources.forEach((resource) => resource.cancel());
    });
    return {
      add: (resourceOrResources) => {
        [resourceOrResources].flat().forEach((resource) => resources.add(resource));
      },
      resources
    };
  });
};



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/utils.js":
/*!********************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/utils.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSSColorMode),
/* harmony export */   D: () => (/* binding */ DEFAULT_COLOR),
/* harmony export */   H: () => (/* binding */ HSV_LIMITS),
/* harmony export */   I: () => (/* binding */ ICONS),
/* harmony export */   O: () => (/* binding */ OPACITY_LIMITS),
/* harmony export */   R: () => (/* binding */ RGB_LIMITS),
/* harmony export */   S: () => (/* binding */ STATIC_DIMENSIONS),
/* harmony export */   a: () => (/* binding */ isLonghandHex),
/* harmony export */   b: () => (/* binding */ isShorthandHex),
/* harmony export */   c: () => (/* binding */ alphaToOpacity),
/* harmony export */   d: () => (/* binding */ hexChar),
/* harmony export */   e: () => (/* binding */ getColorFieldDimensions),
/* harmony export */   f: () => (/* binding */ DEFAULT_STORAGE_KEY_PREFIX),
/* harmony export */   g: () => (/* binding */ getSliderWidth),
/* harmony export */   h: () => (/* binding */ hexify),
/* harmony export */   i: () => (/* binding */ isValidHex),
/* harmony export */   j: () => (/* binding */ alphaCompatible),
/* harmony export */   k: () => (/* binding */ colorEqual),
/* harmony export */   l: () => (/* binding */ normalizeColor),
/* harmony export */   m: () => (/* binding */ CSS),
/* harmony export */   n: () => (/* binding */ normalizeHex),
/* harmony export */   o: () => (/* binding */ opacityToAlpha),
/* harmony export */   p: () => (/* binding */ parseMode),
/* harmony export */   q: () => (/* binding */ toNonAlphaMode),
/* harmony export */   r: () => (/* binding */ rgbToHex),
/* harmony export */   s: () => (/* binding */ HUE_LIMIT_CONSTRAINED),
/* harmony export */   t: () => (/* binding */ toAlphaMode),
/* harmony export */   u: () => (/* binding */ normalizeAlpha),
/* harmony export */   v: () => (/* binding */ SCOPE_SIZE),
/* harmony export */   w: () => (/* binding */ hexToRGB)
/* harmony export */ });
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var _global_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./global.js */ "./node_modules/@esri/calcite-components/dist/chunks/global.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */


const CSS = {
  channel: "channel",
  channels: "channels",
  colorField: "color-field",
  colorFieldScope: "scope--color-field",
  colorMode: "color-mode",
  colorModeContainer: "color-mode-container",
  container: "container",
  control: "control",
  controlAndScope: "control-and-scope",
  controlSection: "control-section",
  deleteColor: "delete-color",
  header: "header",
  hexAndChannelsGroup: "hex-and-channels-group",
  hexOptions: "color-hex-options",
  hueScope: "scope--hue",
  hueSlider: "hue-slider",
  opacityScope: "scope--opacity",
  opacitySlider: "opacity-slider",
  preview: "preview",
  previewAndSliders: "preview-and-sliders",
  saveColor: "save-color",
  savedColor: "saved-color",
  savedColorsButtons: "saved-colors-buttons",
  savedColorsSection: "saved-colors-section",
  scope: "scope",
  section: "section",
  slider: "slider",
  sliders: "sliders",
  splitSection: "section--split",
  swatchGroup: "swatch-group"
};
const DEFAULT_COLOR = (0,color__WEBPACK_IMPORTED_MODULE_1__["default"])("#007AC2");
const DEFAULT_STORAGE_KEY_PREFIX = "calcite-color-";
const RGB_LIMITS = {
  r: 255,
  g: 255,
  b: 255
};
const HSV_LIMITS = {
  h: 360,
  s: 100,
  v: 100
};
const HUE_LIMIT_CONSTRAINED = HSV_LIMITS.h - 1;
const OPACITY_LIMITS = {
  min: 0,
  max: 100
};
const STATIC_DIMENSIONS = {
  s: {
    gap: parseInt(_global_js__WEBPACK_IMPORTED_MODULE_0__.b),
    slider: {
      height: 12
    },
    thumb: {
      radius: 7
    },
    preview: {
      size: 20
    },
    minWidth: 200
  },
  m: {
    gap: parseInt(_global_js__WEBPACK_IMPORTED_MODULE_0__.a),
    slider: {
      height: 12
    },
    thumb: {
      radius: 7
    },
    preview: {
      size: 24
    },
    minWidth: 240
  },
  l: {
    gap: parseInt(_global_js__WEBPACK_IMPORTED_MODULE_0__.c),
    slider: {
      height: 12
    },
    thumb: {
      radius: 7
    },
    preview: {
      size: 32
    },
    minWidth: 304
  }
};
const SCOPE_SIZE = 1;
const ICONS = {
  minus: "minus",
  plus: "plus"
};
const hexChar = /^[0-9A-F]$/i;
const shorthandHex = /^#[0-9A-F]{3}$/i;
const longhandHex = /^#[0-9A-F]{6}$/i;
const shorthandHexWithAlpha = /^#[0-9A-F]{4}$/i;
const longhandHexWithAlpha = /^#[0-9A-F]{8}$/i;
const alphaToOpacity = (alpha) => Number((alpha * 100).toFixed());
const opacityToAlpha = (opacity) => Number((opacity / 100).toFixed(2));
function isValidHex(hex, hasAlpha = false) {
  return isShorthandHex(hex, hasAlpha) || isLonghandHex(hex, hasAlpha);
}
function evaluateHex(hex, length, pattern) {
  if (!hex) {
    return false;
  }
  return hex.length === length && pattern.test(hex);
}
function isShorthandHex(hex, hasAlpha = false) {
  const hexLength = hasAlpha ? 5 : 4;
  const hexPattern = hasAlpha ? shorthandHexWithAlpha : shorthandHex;
  return evaluateHex(hex, hexLength, hexPattern);
}
function isLonghandHex(hex, hasAlpha = false) {
  const hexLength = hasAlpha ? 9 : 7;
  const hexPattern = hasAlpha ? longhandHexWithAlpha : longhandHex;
  return evaluateHex(hex, hexLength, hexPattern);
}
function normalizeHex(hex, hasAlpha = false, convertFromHexToHexa = false) {
  hex = hex.toLowerCase();
  if (!hex.startsWith("#")) {
    hex = `#${hex}`;
  }
  if (isShorthandHex(hex, hasAlpha)) {
    return rgbToHex(hexToRGB(hex, hasAlpha));
  }
  if (hasAlpha && convertFromHexToHexa && isValidHex(
    hex,
    false
    /* we only care about RGB hex for conversion */
  )) {
    const isShorthand = isShorthandHex(hex, false);
    return rgbToHex(hexToRGB(`${hex}${isShorthand ? "f" : "ff"}`, true));
  }
  return hex;
}
function hexify(color, hasAlpha = false) {
  return hasAlpha ? color.hexa() : color.hex();
}
function rgbToHex(color) {
  const { r, g, b } = color;
  const rChars = numToHex(r);
  const gChars = numToHex(g);
  const bChars = numToHex(b);
  const alphaChars = "a" in color ? numToHex(color.a * 255) : "";
  return `#${rChars}${gChars}${bChars}${alphaChars}`.toLowerCase();
}
function numToHex(num) {
  return num.toString(16).padStart(2, "0");
}
function normalizeAlpha(colorObject) {
  const normalized = {
    ...colorObject,
    a: colorObject.alpha ?? 1
    /* Color() will omit alpha if 1 */
  };
  delete normalized.alpha;
  return normalized;
}
function normalizeColor(alphaColorObject) {
  const normalized = { ...alphaColorObject, alpha: alphaColorObject.a ?? 1 };
  delete normalized.a;
  return normalized;
}
function hexToRGB(hex, hasAlpha = false) {
  if (!isValidHex(hex, hasAlpha)) {
    return null;
  }
  hex = hex.replace("#", "");
  let r;
  let g;
  let b;
  let a;
  const isShorthand = hex.length === 3 || hex.length === 4;
  if (isShorthand) {
    const [first, second, third, fourth] = hex.split("");
    r = parseInt(`${first}${first}`, 16);
    g = parseInt(`${second}${second}`, 16);
    b = parseInt(`${third}${third}`, 16);
    a = parseInt(`${fourth}${fourth}`, 16) / 255;
  } else {
    r = parseInt(hex.slice(0, 2), 16);
    g = parseInt(hex.slice(2, 4), 16);
    b = parseInt(hex.slice(4, 6), 16);
    a = parseInt(hex.slice(6, 8), 16) / 255;
  }
  return isNaN(a) ? { r, g, b } : { r, g, b, a };
}
const enumify = (x) => x;
const CSSColorMode = enumify({
  HEX: "hex",
  HEXA: "hexa",
  RGB_CSS: "rgb-css",
  RGBA_CSS: "rgba-css",
  HSL_CSS: "hsl-css",
  HSLA_CSS: "hsla-css"
});
const ObjectColorMode = enumify({
  RGB: "rgb",
  RGBA: "rgba",
  HSL: "hsl",
  HSLA: "hsla",
  HSV: "hsv",
  HSVA: "hsva"
});
function parseMode(colorValue) {
  if (typeof colorValue === "string") {
    if (colorValue.startsWith("#")) {
      const { length } = colorValue;
      if (length === 4 || length === 7) {
        return CSSColorMode.HEX;
      }
      if (length === 5 || length === 9) {
        return CSSColorMode.HEXA;
      }
    }
    if (colorValue.startsWith("rgba(")) {
      return CSSColorMode.RGBA_CSS;
    }
    if (colorValue.startsWith("rgb(")) {
      return CSSColorMode.RGB_CSS;
    }
    if (colorValue.startsWith("hsl(")) {
      return CSSColorMode.HSL_CSS;
    }
    if (colorValue.startsWith("hsla(")) {
      return CSSColorMode.HSLA_CSS;
    }
  }
  if (typeof colorValue === "object") {
    if (hasChannels(colorValue, "r", "g", "b")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.RGBA : ObjectColorMode.RGB;
    }
    if (hasChannels(colorValue, "h", "s", "l")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.HSLA : ObjectColorMode.HSL;
    }
    if (hasChannels(colorValue, "h", "s", "v")) {
      return hasChannels(colorValue, "a") ? ObjectColorMode.HSVA : ObjectColorMode.HSV;
    }
  }
  return null;
}
function hasChannels(colorObject, ...channels) {
  return channels.every((channel) => channel && colorObject && `${channel}` in colorObject);
}
function colorEqual(value1, value2) {
  return value1?.rgb().array().toString() === value2?.rgb().array().toString();
}
function alphaCompatible(mode) {
  return mode === CSSColorMode.HEXA || mode === CSSColorMode.RGBA_CSS || mode === CSSColorMode.HSLA_CSS || mode === ObjectColorMode.RGBA || mode === ObjectColorMode.HSLA || mode === ObjectColorMode.HSVA;
}
function toAlphaMode(mode) {
  const alphaMode = mode === CSSColorMode.HEX ? CSSColorMode.HEXA : mode === CSSColorMode.RGB_CSS ? CSSColorMode.RGBA_CSS : mode === CSSColorMode.HSL_CSS ? CSSColorMode.HSLA_CSS : mode === ObjectColorMode.RGB ? ObjectColorMode.RGBA : mode === ObjectColorMode.HSL ? ObjectColorMode.HSLA : mode === ObjectColorMode.HSV ? ObjectColorMode.HSVA : mode;
  return alphaMode;
}
function toNonAlphaMode(mode) {
  const nonAlphaMode = mode === CSSColorMode.HEXA ? CSSColorMode.HEX : mode === CSSColorMode.RGBA_CSS ? CSSColorMode.RGB_CSS : mode === CSSColorMode.HSLA_CSS ? CSSColorMode.HSL_CSS : mode === ObjectColorMode.RGBA ? ObjectColorMode.RGB : mode === ObjectColorMode.HSLA ? ObjectColorMode.HSL : mode === ObjectColorMode.HSVA ? ObjectColorMode.HSV : mode;
  return nonAlphaMode;
}
const borderWidthInPx = 1;
const inlineSizeBorderTotalWidth = borderWidthInPx * 2;
function getSliderWidth(availableWidth, activeStaticDimensions, hasAlpha) {
  const previewWidth = hasAlpha ? STATIC_DIMENSIONS["l"].preview.size : activeStaticDimensions.preview.size;
  const effectiveWidth = availableWidth - inlineSizeBorderTotalWidth;
  const inlineSpaceAroundElements = activeStaticDimensions.gap * 3;
  return Math.max(effectiveWidth - inlineSpaceAroundElements - previewWidth, 0);
}
function getColorFieldDimensions(availableWidth) {
  const colorFieldAspectRatio = 1.8;
  const effectiveWidth = availableWidth - inlineSizeBorderTotalWidth;
  return {
    width: Math.max(effectiveWidth, 0),
    height: Math.max(Math.floor(effectiveWidth / colorFieldAspectRatio), 0)
  };
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-hex-input/customElement.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-hex-input/customElement.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColorPickerHexInput: () => (/* binding */ ColorPickerHexInput)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var _chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/utils.js */ "./node_modules/@esri/calcite-components/dist/chunks/utils.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */








const CSS = {
  container: "container",
  hexInput: "hex-input",
  opacityInput: "opacity-input"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_2__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}.hex-input{--calcite-input-text-background-color: var(--calcite-color-picker-input-background-color);--calcite-input-text-border-color: var(--calcite-color-picker-input-border-color);--calcite-input-text-text-color: var(--calcite-color-picker-input-text-color);--calcite-input-prefix-background-color: var(--calcite-color-picker-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-color-picker-input-prefix-text-color)}.opacity-input{--calcite-input-number-background-color: var(--calcite-color-picker-input-background-color);--calcite-input-number-border-color: var(--calcite-color-picker-input-border-color);--calcite-input-number-text-color: var(--calcite-color-picker-input-text-color);--calcite-input-suffix-background-color: var(--calcite-color-picker-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-color-picker-input-suffix-text-color)}:host{display:block}.container{display:flex;inline-size:100%;flex-wrap:nowrap;align-items:center}.hex-input{flex-grow:1;text-transform:uppercase}.opacity-input{inline-size:100px;margin-inline-start:-1px}:host([hidden]){display:none}[hidden]{display:none}`;
const DEFAULT_COLOR = (0,color__WEBPACK_IMPORTED_MODULE_7__["default"])();
class ColorPickerHexInput extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.LitElement {
  constructor() {
    super(...arguments);
    this.hexInputRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_4__.createRef)();
    this.opacityInputRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_4__.createRef)();
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_6__.u)()(this);
    this.internalColor = DEFAULT_COLOR;
    this.alphaChannel = false;
    this.allowEmpty = false;
    this.hexLabel = "Hex";
    this.scale = "m";
    this.value = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.h)(DEFAULT_COLOR, this.alphaChannel), this.alphaChannel, true);
    this.calciteColorPickerHexInputChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)({ cancelable: false });
  }
  static {
    this.properties = { internalColor: [16, {}, { state: true }], alphaChannel: [5, {}, { type: Boolean }], allowEmpty: [5, {}, { type: Boolean }], hexLabel: 1, messages: [0, {}, { attribute: false }], numberingSystem: 1, scale: [3, {}, { reflect: true }], value: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  async setFocus(options) {
    return this.focusSetter(() => this.hexInputRef.value, options);
  }
  connectedCallback() {
    super.connectedCallback();
    this.previousNonNullValue = this.value;
    const { allowEmpty, alphaChannel, value } = this;
    if (value) {
      const normalized = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)(value, alphaChannel);
      if ((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.i)(normalized, alphaChannel)) {
        this.internalSetValue(normalized, normalized, false);
      }
      return;
    }
    if (allowEmpty) {
      this.internalSetValue(void 0, void 0, false);
    }
  }
  willUpdate(changes) {
    if (changes.has("value") && (this.hasUpdated || this.value !== (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.h)(DEFAULT_COLOR, this.alphaChannel), this.alphaChannel, true))) {
      this.internalSetValue(this.value, changes.get("value"), false);
    }
  }
  onHexInputBlur() {
    const node = this.hexInputRef.value;
    const inputValue = node.value;
    const hex = `#${inputValue}`;
    const { allowEmpty, internalColor } = this;
    const willClearValue = allowEmpty && !inputValue;
    const isLonghand = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.a)(hex);
    const anyShorthand = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.b)(hex, true) || (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.b)(hex, false);
    if (anyShorthand) {
      this.onHexInputChange();
    }
    if (willClearValue || (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.i)(hex) && isLonghand) {
      return;
    }
    node.value = allowEmpty && !internalColor ? "" : this.formatHexForInternalInput((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.r)(
      // always display hex input in RRGGBB format
      internalColor.object()
    ));
  }
  onOpacityInputBlur() {
    const node = this.opacityInputRef.value;
    const inputValue = node.value;
    const { allowEmpty, internalColor } = this;
    const willClearValue = allowEmpty && !inputValue;
    if (willClearValue) {
      return;
    }
    node.value = allowEmpty && !internalColor ? "" : this.formatOpacityForInternalInput(internalColor);
  }
  onOpacityInputInput() {
    this.onOpacityInputChange();
  }
  onHexInputChange() {
    const nodeValue = this.hexInputRef.value.value;
    let value = nodeValue;
    if (value) {
      const normalized = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)(value, false);
      const preserveExistingAlpha = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.i)(normalized) && this.alphaChannel;
      if (preserveExistingAlpha && this.internalColor) {
        const alphaHex = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)(this.internalColor.hexa(), true).slice(-2);
        value = `${normalized + alphaHex}`;
      }
    }
    this.internalSetValue(value, this.value);
  }
  onOpacityInputChange() {
    const node = this.opacityInputRef.value;
    let value;
    if (!node.value) {
      value = node.value;
    } else {
      const alpha = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.o)(Number(node.value));
      value = this.internalColor?.alpha(alpha).hexa();
    }
    this.internalSetValue(value, this.value);
  }
  onInputFocus(event) {
    const focusTarget = event.type === "calciteInternalInputTextFocus" ? this.hexInputRef : this.opacityInputRef;
    focusTarget.value.selectText();
  }
  onHexInputInput() {
    const hexInputValue = `#${this.hexInputRef.value.value}`;
    const oldValue = this.value;
    if ((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.i)(hexInputValue, this.alphaChannel) && (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.a)(hexInputValue, this.alphaChannel)) {
      this.internalSetValue(hexInputValue, oldValue);
    }
  }
  onInputKeyDown(event) {
    const { altKey, ctrlKey, metaKey, shiftKey } = event;
    const { alphaChannel, hexInputRef, internalColor, value } = this;
    const { key } = event;
    const composedPath = event.composedPath();
    if (key === "Tab" && (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.b)(value, this.alphaChannel) || key === "Enter") {
      if (composedPath.includes(hexInputRef.value)) {
        this.onHexInputChange();
      } else {
        this.onOpacityInputChange();
      }
      if (key === "Enter") {
        event.preventDefault();
      }
      return;
    }
    const isNudgeKey = key === "ArrowDown" || key === "ArrowUp";
    const oldValue = this.value;
    if (isNudgeKey) {
      if (!value) {
        this.internalSetValue(this.previousNonNullValue, oldValue);
        event.preventDefault();
        return;
      }
      const direction = key === "ArrowUp" ? 1 : -1;
      const bump = shiftKey ? 10 : 1;
      this.internalSetValue((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.h)(this.nudgeRGBChannels(internalColor, bump * direction, composedPath.includes(hexInputRef.value) ? "rgb" : "a"), alphaChannel), oldValue);
      event.preventDefault();
      return;
    }
    const withModifiers = altKey || ctrlKey || metaKey;
    const singleChar = key.length === 1;
    const validHexChar = _chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.d.test(key);
    if (singleChar && !withModifiers && !validHexChar) {
      event.preventDefault();
    }
  }
  onHexInputPaste(event) {
    const hex = event.clipboardData.getData("text");
    if ((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.i)(hex, this.alphaChannel) && (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.a)(hex, this.alphaChannel)) {
      event.preventDefault();
      this.hexInputRef.value.value = hex.slice(1);
      this.internalSetValue(hex, this.value);
    }
  }
  internalSetValue(value, oldValue, emit = true) {
    if (value) {
      const { alphaChannel } = this;
      const normalized = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)(value, alphaChannel, alphaChannel);
      if ((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.i)(normalized, alphaChannel)) {
        const { internalColor: currentColor } = this;
        const nextColor = (0,color__WEBPACK_IMPORTED_MODULE_7__["default"])(normalized);
        const normalizedLonghand = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.h)(nextColor, alphaChannel), alphaChannel);
        const changed = !currentColor || normalizedLonghand !== (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.h)(currentColor, alphaChannel), alphaChannel);
        this.internalColor = nextColor;
        this.previousNonNullValue = normalizedLonghand;
        this.value = normalizedLonghand;
        if (changed && emit) {
          this.calciteColorPickerHexInputChange.emit();
        }
        return;
      }
    } else if (this.allowEmpty) {
      this.internalColor = void 0;
      this.value = void 0;
      if (emit) {
        this.calciteColorPickerHexInputChange.emit();
      }
      return;
    }
    this.value = oldValue;
  }
  formatHexForInternalInput(hex) {
    return hex ? hex.replace("#", "").slice(0, 6) : "";
  }
  formatOpacityForInternalInput(color) {
    return color ? `${(0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.c)(color.alpha())}` : "";
  }
  nudgeRGBChannels(color, amount, context) {
    let nudgedChannels;
    const channels = color.array();
    const rgbChannels = channels.slice(0, 3);
    if (context === "rgb") {
      const nudgedRGBChannels = rgbChannels.map((channel) => channel + amount);
      nudgedChannels = [
        ...nudgedRGBChannels,
        this.alphaChannel ? channels[3] : void 0
      ];
    } else {
      const nudgedAlpha = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.o)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.c)(color.alpha()) + amount);
      nudgedChannels = [...rgbChannels, nudgedAlpha];
    }
    return (0,color__WEBPACK_IMPORTED_MODULE_7__["default"])(nudgedChannels);
  }
  render() {
    const { alphaChannel, hexLabel, internalColor, messages, scale, value } = this;
    const hexInputValue = this.formatHexForInternalInput(value);
    const opacityInputValue = this.formatOpacityForInternalInput(internalColor);
    const inputScale = scale === "l" ? "m" : "s";
    return (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)(CSS.container)}><calcite-input-text class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)(CSS.hexInput)} .label=${messages?.hex || hexLabel} .maxLength=${this.alphaChannel ? 8 : 6} @keydown=${this.onInputKeyDown} @paste=${this.onHexInputPaste} @calciteInputTextChange=${this.onHexInputChange} @calciteInputTextInput=${this.onHexInputInput} @calciteInternalInputTextBlur=${this.onHexInputBlur} @calciteInternalInputTextFocus=${this.onInputFocus} prefix-text=# .scale=${inputScale} .value=${hexInputValue} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_4__.ref)(this.hexInputRef)}></calcite-input-text>${alphaChannel ? (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__.keyed)("opacity-input", (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<calcite-input-number class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)(CSS.opacityInput)} .label=${messages?.opacity} .max=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.O.max} max-length=3 .min=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_5__.O.min} number-button-type=none .numberingSystem=${this.numberingSystem} @keydown=${this.onInputKeyDown} @calciteInputNumberInput=${this.onOpacityInputInput} @calciteInternalInputNumberBlur=${this.onOpacityInputBlur} @calciteInternalInputNumberFocus=${this.onInputFocus} .scale=${inputScale} suffix-text=% .value=${opacityInputValue} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_4__.ref)(this.opacityInputRef)}></calcite-input-number>`) : null}</div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-color-picker-hex-input", ColorPickerHexInput);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-hex-input/index.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-hex-input/index.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColorPickerHexInput: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_2__.ColorPickerHexInput)
/* harmony export */ });
/* harmony import */ var _calcite_input_text_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-input-text/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-input-text/index.js");
/* harmony import */ var _calcite_input_number_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../calcite-input-number/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-input-number/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-hex-input/customElement.js");




/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker/customElement.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-color-picker/customElement.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColorPicker: () => (/* binding */ ColorPicker)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit_directives_repeat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/repeat.js */ "./node_modules/lit/directives/repeat.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var es_toolkit__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! es-toolkit */ "./node_modules/es-toolkit/dist/function/throttle.mjs");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_interactive_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/interactive.js */ "./node_modules/@esri/calcite-components/dist/chunks/interactive.js");
/* harmony import */ var _chunks_key_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/key.js */ "./node_modules/@esri/calcite-components/dist/chunks/key.js");
/* harmony import */ var _chunks_math_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../chunks/math.js */ "./node_modules/@esri/calcite-components/dist/chunks/math.js");
/* harmony import */ var _chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../chunks/useT9n.js */ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js");
/* harmony import */ var _chunks_useCancelable_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../chunks/useCancelable.js */ "./node_modules/@esri/calcite-components/dist/chunks/useCancelable.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/* harmony import */ var _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../chunks/utils.js */ "./node_modules/@esri/calcite-components/dist/chunks/utils.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

















const styles = (0,lit__WEBPACK_IMPORTED_MODULE_3__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}calcite-input-number{--calcite-input-number-background-color: var(--calcite-color-picker-input-background-color);--calcite-input-number-border-color: var(--calcite-color-picker-input-border-color);--calcite-input-number-text-color: var(--calcite-color-picker-input-text-color);--calcite-input-prefix-background-color: var(--calcite-color-picker-input-prefix-background-color);--calcite-input-prefix-text-color: var(--calcite-color-picker-input-prefix-text-color);--calcite-input-suffix-background-color: var(--calcite-color-picker-input-suffix-background-color);--calcite-input-suffix-text-color: var(--calcite-color-picker-input-suffix-text-color)}calcite-button{--calcite-button-text-color: var(--calcite-color-picker-action-text-color);--calcite-button-text-color-press: var(--calcite-color-picker-action-text-color-press)}calcite-button:hover,calcite-button:focus{--calcite-button-text-color: var(--calcite-color-picker-action-text-color-hover)}calcite-button:active{--calcite-button-text-color: var(--calcite-color-picker-action-text-color-press)}calcite-tabs{--calcite-tab-border-color: var(--calcite-color-picker-tab-border-color);--calcite-tab-accent-color-press: var(--calcite-color-picker-tab-accent-color);--calcite-swatch-corner-radius: var(--calcite-color-picker-swatch-corner-radius);--calcite-tab-text-color: var(--calcite-color-picker-tab-text-color)}calcite-tab-title:hover{--calcite-color-text-1: var(--calcite-color-picker-tab-text-color-hover)}calcite-swatch{--calcite-swatch-corner-radius: var(--calcite-color-picker-swatch-corner-radius)}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal);inline-size:var(--calcite-internal-color-picker-min-width);min-inline-size:var(--calcite-internal-color-picker-min-width)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale=s]){--calcite-internal-color-picker-min-width: 200px;--calcite-color-picker-spacing: var(--calcite-spacing-sm)}:host([scale=m]){--calcite-internal-color-picker-min-width: 240px;--calcite-color-picker-spacing: var(--calcite-spacing-md)}:host([scale=l]){--calcite-internal-color-picker-min-width: 304px;--calcite-color-picker-spacing: var(--calcite-spacing-lg);font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale=l]) .control-section{display:flex;flex-direction:column;flex-wrap:wrap;align-items:baseline}:host([scale=l]) .color-hex-options{inline-size:100%;display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{display:flex;flex-direction:column;block-size:min-content;border:1px solid var(--calcite-color-picker-border-color, var(--calcite-color-border-1));background-color:var(--calcite-color-picker-background-color, var(--calcite-color-foreground-1));border-radius:var(--calcite-color-picker-corner-radius, var(--calcite-corner-radius-none));box-shadow:var(--calcite-color-picker-shadow, var(--calcite-shadow-none))}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.color-field,.control-and-scope{-webkit-user-select:none;user-select:none;border-radius:var(--calcite-color-picker-corner-radius, var(--calcite-corner-radius-none)) var(--calcite-color-picker-corner-radius, var(--calcite-corner-radius-none)) var(--calcite-corner-radius-none) var(--calcite-corner-radius-none)}.scope{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);block-size:1px;inline-size:1px;border-radius:9999px;background-color:transparent;font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))));outline-offset:6px}.hex-and-channels-group{display:flex;inline-size:100%;flex-direction:column;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing);gap:var(--calcite-spacing-xxs)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-color-picker-text-color, var(--calcite-color-text-1))}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex}.channel{flex-grow:1}.channel[data-channel-index="3"]{margin-inline-start:-1px;min-inline-size:81px}:host([scale=s]) .channel[data-channel-index="3"]{min-inline-size:68px}:host([scale=l]) .channel[data-channel-index="3"]{min-inline-size:88px}.saved-colors-buttons{display:flex}.swatch-group{margin-block-start:var(--calcite-color-picker-spacing)}:host([hidden]){display:none}[hidden]{display:none}`;
const throttleFor60FpsInMs = 16;
class ColorPicker extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.LitElement {
  constructor() {
    super();
    this._color = _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D;
    this.colorFieldScopeRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.createRef)();
    this.hueScopeRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.createRef)();
    this.internalColorUpdateContext = null;
    this.isActiveChannelInputEmpty = false;
    this.mode = _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.C.HEX;
    this.opacityScopeRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.createRef)();
    this.resizeObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_12__.c)("resize", (entries) => this.resizeCanvas(entries));
    this.shiftKeyChannelAdjustment = 0;
    this.upOrDownArrowKeyTracker = null;
    this._valueWasSet = false;
    this.messages = (0,_chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_10__.u)({ blocking: true });
    this.captureColorFieldColor = (x, y, skipEqual = true) => {
      const { width, height } = this.dynamicDimensions.colorField;
      const saturation = Math.round(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.s / width * x);
      const value = Math.round(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.v / height * (height - y));
      this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(saturation).value(value), skipEqual);
    };
    this.cancelable = (0,_chunks_useCancelable_js__WEBPACK_IMPORTED_MODULE_11__.u)()(this);
    this.drawColorControls = (0,es_toolkit__WEBPACK_IMPORTED_MODULE_15__.throttle)((type = "all") => {
      if ((type === "all" || type === "color-field") && this.colorFieldRenderingContext) {
        this.drawColorField();
      }
      if ((type === "all" || type === "hue-slider") && this.hueSliderRenderingContext) {
        this.drawHueSlider();
      }
      if (this.alphaChannel && (type === "all" || type === "opacity-slider") && this.opacitySliderRenderingContext) {
        this.drawOpacitySlider();
      }
    }, throttleFor60FpsInMs);
    this.globalPointerMoveHandler = (event) => {
      const { activeCanvasInfo, el } = this;
      if (!el.isConnected || !activeCanvasInfo) {
        return;
      }
      const { context, bounds } = activeCanvasInfo;
      let samplingX;
      let samplingY;
      const { clientX, clientY } = event;
      if (context.canvas.matches(":hover")) {
        samplingX = clientX - bounds.x;
        samplingY = clientY - bounds.y;
      } else {
        if (clientX < bounds.x + bounds.width && clientX > bounds.x) {
          samplingX = clientX - bounds.x;
        } else if (clientX < bounds.x) {
          samplingX = 0;
        } else {
          samplingX = bounds.width;
        }
        if (clientY < bounds.y + bounds.height && clientY > bounds.y) {
          samplingY = clientY - bounds.y;
        } else if (clientY < bounds.y) {
          samplingY = 0;
        } else {
          samplingY = bounds.height;
        }
      }
      if (context === this.colorFieldRenderingContext) {
        this.captureColorFieldColor(samplingX, samplingY, false);
      } else if (context === this.hueSliderRenderingContext) {
        this.captureHueSliderColor(samplingX);
      } else if (context === this.opacitySliderRenderingContext) {
        this.captureOpacitySliderValue(samplingX);
      }
    };
    this.globalPointerUpHandler = (event) => {
      if (!(0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.i)(event)) {
        return;
      }
      const previouslyDragging = this.activeCanvasInfo;
      this.activeCanvasInfo = null;
      this.drawColorControls();
      if (previouslyDragging) {
        this.calciteColorPickerChange.emit();
      }
    };
    this.resizeCanvas = (0,es_toolkit__WEBPACK_IMPORTED_MODULE_15__.throttle)((entries) => {
      if (!this.hasUpdated) {
        return;
      }
      const [first] = entries;
      const availableWidth = Math.floor(first.contentBoxSize[0].inlineSize);
      if (this.dynamicDimensions.colorField.width === availableWidth) {
        return;
      }
      this.updateDynamicDimensions(availableWidth);
      this.updateCanvasSize();
      this.drawColorControls();
    }, throttleFor60FpsInMs);
    this.updateDynamicDimensions = (width) => {
      const sliderDims = {
        width: (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.g)(width, this.staticDimensions, this.alphaChannel),
        height: this.staticDimensions.slider.height
      };
      this.dynamicDimensions = {
        colorField: (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.e)(width),
        slider: sliderDims
      };
    };
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_13__.u)()(this);
    this.channelMode = "rgb";
    this.channels = this.toChannels(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D);
    this.staticDimensions = _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.S.m;
    this.savedColors = [];
    this.allowEmpty = false;
    this.alphaChannel = false;
    this.channelsDisabled = false;
    this.clearable = false;
    this.disabled = false;
    this.fieldDisabled = false;
    this.format = "auto";
    this.hexDisabled = false;
    this.savedDisabled = false;
    this.scale = "m";
    this.calciteColorPickerChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteColorPickerInput = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.listen("keydown", this.handleChannelKeyUpOrDown, { capture: true });
    this.listen("keyup", this.handleChannelKeyUpOrDown, { capture: true });
  }
  static {
    this.properties = { channelMode: [16, {}, { state: true }], channels: [16, {}, { state: true }], colorFieldScopeLeft: [16, {}, { state: true }], colorFieldScopeTop: [16, {}, { state: true }], staticDimensions: [16, {}, { state: true }], hueScopeLeft: [16, {}, { state: true }], opacityScopeLeft: [16, {}, { state: true }], savedColors: [16, {}, { state: true }], scopeOrientation: [16, {}, { state: true }], allowEmpty: [7, {}, { reflect: true, type: Boolean }], alphaChannel: [5, {}, { type: Boolean }], channelsDisabled: [5, {}, { type: Boolean }], clearable: [7, {}, { reflect: true, type: Boolean }], color: [0, {}, { attribute: false }], disabled: [7, {}, { reflect: true, type: Boolean }], fieldDisabled: [7, {}, { reflect: true, type: Boolean }], format: [3, {}, { reflect: true }], hexDisabled: [5, {}, { type: Boolean }], messageOverrides: [0, {}, { attribute: false }], numberingSystem: [3, {}, { reflect: true }], savedDisabled: [7, {}, { reflect: true, type: Boolean }], scale: [3, {}, { reflect: true }], storageId: [3, {}, { reflect: true }], value: 1 };
  }
  static {
    this.styles = styles;
  }
  get color() {
    return this._color;
  }
  set color(color) {
    const oldColor = this._color;
    this._color = color;
    this.handleColorChange(color, oldColor);
  }
  get value() {
    return this._value;
  }
  set value(value) {
    const oldValue = this._value;
    this._value = value;
    this.handleValueChange(value, oldValue);
    this._valueWasSet = true;
  }
  async setFocus(options) {
    return this.focusSetter(() => this.el, options);
  }
  connectedCallback() {
    super.connectedCallback();
    this.observeResize();
    this.cancelable.add([this.drawColorControls, this.resizeCanvas]);
  }
  async load() {
    if (!this._valueWasSet) {
      this._value ??= (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.h)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D, this.alphaChannel));
    }
    this.handleAllowEmptyOrClearableChange();
    const { isClearable, color, format, value } = this;
    const willSetNoColor = isClearable && !value;
    const parsedMode = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.p)(value);
    const valueIsCompatible = willSetNoColor || format === "auto" && parsedMode || format === parsedMode;
    const initialColor = willSetNoColor ? null : valueIsCompatible ? this.colorFromValue(value, isClearable, parsedMode) : color;
    if (!valueIsCompatible) {
      this.showIncompatibleColorWarning(value, format);
    }
    this.setMode(format, false);
    this.internalColorSet(initialColor, false, "initial");
    this.updateStaticDimensions(this.scale);
    this.updateDynamicDimensions(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.S[this.scale].minWidth);
    const storageKey = `${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.f}${this.storageId}`;
    if (this.storageId && localStorage.getItem(storageKey)) {
      this.savedColors = JSON.parse(localStorage.getItem(storageKey));
    }
  }
  willUpdate(changes) {
    if (changes.has("allowEmpty") && (this.hasUpdated || this.allowEmpty !== false) || changes.has("clearable") && (this.hasUpdated || this.clearable !== false)) {
      this.handleAllowEmptyOrClearableChange();
    }
    if (changes.has("alphaChannel") && (this.hasUpdated || this.alphaChannel !== false)) {
      this.handleAlphaChannelChange(this.alphaChannel);
    }
    if (this.hasUpdated && (changes.has("alphaChannel") && this.alphaChannel !== false || changes.has("staticDimensions") && this.staticDimensions !== _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.S.m)) {
      this.handleAlphaChannelDimensionsChange();
    }
    if (changes.has("alphaChannel") && (this.hasUpdated || this.alphaChannel !== false) || changes.has("format") && (this.hasUpdated || this.format !== "auto")) {
      this.handleFormatOrAlphaChannelChange();
    }
    if (changes.has("scale") && (this.hasUpdated || this.scale !== "m")) {
      this.handleScaleChange(this.scale);
    }
  }
  updated() {
    (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_7__.u)(this);
  }
  loaded() {
    this.handleAlphaChannelDimensionsChange();
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    window.removeEventListener("pointermove", this.globalPointerMoveHandler);
    window.removeEventListener("pointerup", this.globalPointerUpHandler);
    this.resizeObserver?.disconnect();
  }
  get baseColorFieldColor() {
    return this.color || this.previousColor || _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D;
  }
  get effectiveSliderWidth() {
    return this.dynamicDimensions.slider.width;
  }
  observeResize() {
    this.resizeObserver?.observe(this.el);
  }
  handleAllowEmptyOrClearableChange() {
    this.isClearable = this.clearable || this.allowEmpty;
  }
  handleAlphaChannelChange(alphaChannel) {
    const { format } = this;
    if (alphaChannel && format !== "auto" && !(0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.j)(format)) {
      console.warn(`ignoring alphaChannel as the current format (${format}) does not support alpha`);
      this.alphaChannel = false;
    }
  }
  handleAlphaChannelDimensionsChange() {
    this.drawColorControls();
  }
  handleColorChange(color, oldColor) {
    this.drawColorControls();
    this.updateChannelsFromColor(color);
    this.previousColor = oldColor;
  }
  handleFormatOrAlphaChannelChange() {
    this.setMode(this.format);
    this.internalColorSet(this.color, false, "internal");
  }
  handleScaleChange(scale = "m") {
    this.updateStaticDimensions(scale);
    this.updateCanvasSize();
    this.drawColorControls();
  }
  handleValueChange(value, oldValue) {
    const { isClearable, format } = this;
    const checkMode = !isClearable || value;
    let modeChanged = false;
    if (checkMode) {
      const nextMode = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.p)(value);
      if (!nextMode || format !== "auto" && nextMode !== format) {
        this.showIncompatibleColorWarning(value, format);
        this._value = oldValue;
        return;
      }
      modeChanged = this.mode !== nextMode;
      this.setMode(nextMode, this.internalColorUpdateContext === null);
    }
    const dragging = this.activeCanvasInfo;
    if (this.internalColorUpdateContext === "initial") {
      return;
    }
    if (this.internalColorUpdateContext === "user-interaction") {
      this.calciteColorPickerInput.emit();
      if (!dragging) {
        this.calciteColorPickerChange.emit();
      }
      return;
    }
    const color = this.colorFromValue(value, isClearable, this.mode);
    const colorChanged = !(0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.k)(color, this.color);
    if (modeChanged || colorChanged) {
      this.internalColorSet(color, this.alphaChannel && !(this.mode.endsWith("a") || this.mode.endsWith("a-css")) || this.internalColorUpdateContext === "internal", "internal");
    }
  }
  colorFromValue(value, clearable = false, mode) {
    if (clearable && !value) {
      return null;
    }
    return (0,color__WEBPACK_IMPORTED_MODULE_16__["default"])(value != null && typeof value === "object" && (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.j)(mode) ? (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.l)(value) : value);
  }
  handleTabActivate(event) {
    this.channelMode = event.currentTarget.getAttribute("data-color-mode");
    this.updateChannelsFromColor(this.color);
  }
  handleColorFieldScopeKeyDown(event) {
    const { key } = event;
    const arrowKeyToXYOffset = {
      ArrowUp: { x: 0, y: -10 },
      ArrowRight: { x: 10, y: 0 },
      ArrowDown: { x: 0, y: 10 },
      ArrowLeft: { x: -10, y: 0 }
    };
    if (arrowKeyToXYOffset[key]) {
      event.preventDefault();
      this.scopeOrientation = key === "ArrowDown" || key === "ArrowUp" ? "vertical" : "horizontal";
      this.captureColorFieldColor(this.colorFieldScopeLeft + arrowKeyToXYOffset[key].x || 0, this.colorFieldScopeTop + arrowKeyToXYOffset[key].y || 0, false);
    }
  }
  handleHueScopeKeyDown(event) {
    const modifier = event.shiftKey ? 10 : 1;
    const { key } = event;
    const arrowKeyToXOffset = {
      ArrowUp: 1,
      ArrowRight: 1,
      ArrowDown: -1,
      ArrowLeft: -1
    };
    if (arrowKeyToXOffset[key]) {
      event.preventDefault();
      const delta = arrowKeyToXOffset[key] * modifier;
      const hue = this.baseColorFieldColor.hue();
      const color = this.baseColorFieldColor.hue(hue + delta);
      this.internalColorSet(color, false);
    }
  }
  handleHexInputChange(event) {
    event.stopPropagation();
    const { isClearable, color } = this;
    const input = event.target;
    const hex = input.value;
    if (isClearable && !hex) {
      this.internalColorSet(null);
      return;
    }
    const normalizedHex = color && (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.h)(color, (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.j)(this.mode)));
    if (hex !== normalizedHex) {
      this.internalColorSet((0,color__WEBPACK_IMPORTED_MODULE_16__["default"])(hex));
    }
  }
  handleSavedColorSelect(event) {
    const swatch = event.currentTarget;
    this.internalColorSet((0,color__WEBPACK_IMPORTED_MODULE_16__["default"])(swatch.color));
  }
  handleChannelInput(event) {
    const input = event.currentTarget;
    const channelIndex = Number(input.getAttribute("data-channel-index"));
    const isAlphaChannel = channelIndex === 3;
    const limit = isAlphaChannel ? _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.O.max : this.channelMode === "rgb" ? _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.R[Object.keys(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.R)[channelIndex]] : _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H[Object.keys(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H)[channelIndex]];
    let inputValue;
    if (!input.value) {
      inputValue = "";
      this.isActiveChannelInputEmpty = true;
      this.upOrDownArrowKeyTracker = null;
    } else {
      const value = Number(input.value);
      const adjustedValue = value + this.shiftKeyChannelAdjustment;
      const clamped = (0,_chunks_math_js__WEBPACK_IMPORTED_MODULE_9__.c)(adjustedValue, 0, limit);
      inputValue = clamped.toString();
    }
    input.value = inputValue;
    if (inputValue !== "" && this.shiftKeyChannelAdjustment !== 0) {
      this.handleChannelChange(event);
    } else if (inputValue !== "") {
      this.handleChannelChange(event);
    }
  }
  handleChannelBlur(event) {
    const input = event.currentTarget;
    const channelIndex = Number(input.getAttribute("data-channel-index"));
    const channels = [...this.channels];
    const restoreValueDueToEmptyInput = !input.value && !this.isClearable;
    if (restoreValueDueToEmptyInput) {
      input.value = channels[channelIndex]?.toString();
    }
  }
  handleChannelFocus(event) {
    const input = event.currentTarget;
    input.selectText();
  }
  handleChannelKeyUpOrDown(event) {
    this.shiftKeyChannelAdjustment = 0;
    const { key } = event;
    if (key !== "ArrowUp" && key !== "ArrowDown" || !event.composedPath().some((node) => node.classList?.contains(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.channel))) {
      return;
    }
    const { shiftKey } = event;
    event.preventDefault();
    if (!this.color) {
      this.internalColorSet(this.previousColor);
      event.stopPropagation();
      return;
    }
    const complementaryBump = 9;
    this.shiftKeyChannelAdjustment = key === "ArrowUp" && shiftKey ? complementaryBump : key === "ArrowDown" && shiftKey ? -complementaryBump : 0;
    if (key === "ArrowUp") {
      this.upOrDownArrowKeyTracker = "up";
    }
    if (key === "ArrowDown") {
      this.upOrDownArrowKeyTracker = "down";
    }
  }
  getChannelInputLimit(channelIndex) {
    return this.channelMode === "rgb" ? _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.R[Object.keys(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.R)[channelIndex]] : _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H[Object.keys(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H)[channelIndex]];
  }
  handleChannelChange(event) {
    const input = event.currentTarget;
    const channelIndex = Number(input.getAttribute("data-channel-index"));
    const channels = [...this.channels];
    const shouldClearChannels = this.isClearable && !input.value;
    if (shouldClearChannels) {
      this.channels = [null, null, null, null];
      this.internalColorSet(null);
      return;
    }
    const isAlphaChannel = channelIndex === 3;
    if (this.isActiveChannelInputEmpty && this.upOrDownArrowKeyTracker) {
      input.value = this.upOrDownArrowKeyTracker === "up" ? (channels[channelIndex] + 1 <= this.getChannelInputLimit(channelIndex) ? channels[channelIndex] + 1 : this.getChannelInputLimit(channelIndex)).toString() : (channels[channelIndex] - 1 >= 0 ? channels[channelIndex] - 1 : 0).toString();
      this.isActiveChannelInputEmpty = false;
      this.upOrDownArrowKeyTracker = null;
    }
    const value = input.value ? Number(input.value) : channels[channelIndex];
    channels[channelIndex] = isAlphaChannel ? (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.o)(value) : value;
    this.updateColorFromChannels(channels);
  }
  handleSavedColorKeyDown(event) {
    if ((0,_chunks_key_js__WEBPACK_IMPORTED_MODULE_8__.i)(event.key)) {
      event.preventDefault();
      this.handleSavedColorSelect(event);
    }
  }
  handleColorFieldPointerDown(event) {
    this.handleCanvasControlPointerDown(event, this.colorFieldRenderingContext, this.captureColorFieldColor, this.colorFieldScopeRef.value);
  }
  focusScope(focusEl) {
    requestAnimationFrame(() => {
      focusEl.focus();
    });
  }
  handleHueSliderPointerDown(event) {
    this.handleCanvasControlPointerDown(event, this.hueSliderRenderingContext, this.captureHueSliderColor, this.hueScopeRef.value);
  }
  handleOpacitySliderPointerDown(event) {
    this.handleCanvasControlPointerDown(event, this.opacitySliderRenderingContext, this.captureOpacitySliderValue, this.opacityScopeRef.value);
  }
  handleCanvasControlPointerDown(event, renderingContext, captureValue, scopeNode) {
    if (!(0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.i)(event)) {
      return;
    }
    window.addEventListener("pointermove", this.globalPointerMoveHandler);
    window.addEventListener("pointerup", this.globalPointerUpHandler, {
      once: true
    });
    this.activeCanvasInfo = {
      context: renderingContext,
      bounds: renderingContext.canvas.getBoundingClientRect()
    };
    captureValue.call(this, event.offsetX, event.offsetY);
    this.focusScope(scopeNode);
  }
  handleKeyDown(event) {
    if (event.key === "Enter") {
      event.preventDefault();
    }
  }
  showIncompatibleColorWarning(value, format) {
    console.warn(`ignoring color value (${value}) as it is not compatible with the current format (${format})`);
  }
  setMode(format, warn = true) {
    const mode = format === "auto" ? this.mode : format;
    this.mode = this.ensureCompatibleMode(mode, warn);
  }
  ensureCompatibleMode(mode, warn) {
    const { alphaChannel } = this;
    const isAlphaCompatible = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.j)(mode);
    if (alphaChannel && !isAlphaCompatible) {
      const alphaMode = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.t)(mode);
      if (warn) {
        console.warn(`setting format to (${alphaMode}) as the provided one (${mode}) does not support alpha`);
      }
      return alphaMode;
    }
    if (!alphaChannel && isAlphaCompatible) {
      const nonAlphaMode = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.q)(mode);
      if (warn) {
        console.warn(`setting format to (${nonAlphaMode}) as the provided one (${mode}) does not support alpha`);
      }
      return nonAlphaMode;
    }
    return mode;
  }
  captureHueSliderColor(x) {
    const hue = _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.s / this.effectiveSliderWidth * x;
    this.internalColorSet(this.baseColorFieldColor.hue(hue), false);
  }
  captureOpacitySliderValue(x) {
    const alpha = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.o)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.O.max / this.effectiveSliderWidth * x);
    this.internalColorSet(this.baseColorFieldColor.alpha(alpha), false);
  }
  internalColorSet(color, skipEqual = true, context = "user-interaction") {
    if (skipEqual && (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.k)(color, this.color)) {
      return;
    }
    this.internalColorUpdateContext = context;
    this.color = color;
    this.value = this.toValue(color);
    this.internalColorUpdateContext = null;
  }
  toValue(color, format = this.mode) {
    if (!color) {
      return null;
    }
    const hexMode = "hex";
    if (format.includes(hexMode)) {
      const hasAlpha = format === _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.C.HEXA;
      return (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.n)((0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.h)(color.round(), hasAlpha), hasAlpha);
    }
    if (format.includes("-css")) {
      const value = color[format.replace("-css", "").replace("a", "")]().round().string();
      const needToInjectAlpha = (format.endsWith("a") || format.endsWith("a-css")) && color.alpha() === 1;
      if (needToInjectAlpha) {
        const model = value.slice(0, 3);
        const values = value.slice(4, -1);
        return `${model}a(${values}, ${color.alpha()})`;
      }
      return value;
    }
    const colorObject = (
      /* Color() does not support hsva, hsla nor rgba, so we use the non-alpha mode */
      color[(0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.q)(format)]().round().object()
    );
    if (format.endsWith("a")) {
      return (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.u)(colorObject);
    }
    return colorObject;
  }
  getSliderCapSpacing() {
    const { staticDimensions: { slider: { height }, thumb: { radius } } } = this;
    return radius * 2 - height;
  }
  updateStaticDimensions(scale = "m") {
    this.staticDimensions = _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.S[scale];
  }
  deleteColor() {
    const colorToDelete = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.h)(this.color, this.alphaChannel);
    const inStorage = this.savedColors.indexOf(colorToDelete) > -1;
    if (!inStorage) {
      return;
    }
    const savedColors = this.savedColors.filter((color) => color !== colorToDelete);
    this.savedColors = savedColors;
    const storageKey = `${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.f}${this.storageId}`;
    if (this.storageId) {
      localStorage.setItem(storageKey, JSON.stringify(savedColors));
    }
  }
  saveColor() {
    const colorToSave = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.h)(this.color, this.alphaChannel);
    const alreadySaved = this.savedColors.indexOf(colorToSave) > -1;
    if (alreadySaved) {
      return;
    }
    const savedColors = [...this.savedColors, colorToSave];
    this.savedColors = savedColors;
    const storageKey = `${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.f}${this.storageId}`;
    if (this.storageId) {
      localStorage.setItem(storageKey, JSON.stringify(savedColors));
    }
  }
  drawColorField() {
    const context = this.colorFieldRenderingContext;
    const { width, height } = this.dynamicDimensions.colorField;
    context.fillStyle = this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string();
    context.fillRect(0, 0, width, height);
    const whiteGradient = context.createLinearGradient(0, 0, width, 0);
    whiteGradient.addColorStop(0, "rgba(255,255,255,1)");
    whiteGradient.addColorStop(1, "rgba(255,255,255,0)");
    context.fillStyle = whiteGradient;
    context.fillRect(0, 0, width, height);
    const blackGradient = context.createLinearGradient(0, 0, 0, height);
    blackGradient.addColorStop(0, "rgba(0,0,0,0)");
    blackGradient.addColorStop(1, "rgba(0,0,0,1)");
    context.fillStyle = blackGradient;
    context.fillRect(0, 0, width, height);
    this.drawActiveColorFieldColor();
  }
  setCanvasContextSize(canvas, { height, width }) {
    if (!canvas) {
      return;
    }
    const devicePixelRatio = window.devicePixelRatio || 1;
    canvas.width = width * devicePixelRatio;
    canvas.height = height * devicePixelRatio;
    canvas.style.height = `${height}px`;
    canvas.style.width = `${width}px`;
    const context = canvas.getContext("2d");
    context.scale(devicePixelRatio, devicePixelRatio);
  }
  initColorField(canvas) {
    if (!canvas) {
      return;
    }
    this.colorFieldRenderingContext = canvas.getContext("2d");
    this.updateCanvasSize("color-field");
    this.drawColorControls();
  }
  initHueSlider(canvas) {
    if (!canvas) {
      return;
    }
    this.hueSliderRenderingContext = canvas.getContext("2d");
    this.updateCanvasSize("hue-slider");
    this.drawHueSlider();
  }
  initOpacitySlider(canvas) {
    if (!canvas) {
      return;
    }
    this.opacitySliderRenderingContext = canvas.getContext("2d");
    this.updateCanvasSize("opacity-slider");
    this.drawOpacitySlider();
  }
  updateCanvasSize(context = "all") {
    const { dynamicDimensions, staticDimensions } = this;
    if (context === "all" || context === "color-field") {
      this.setCanvasContextSize(this.colorFieldRenderingContext?.canvas, dynamicDimensions.colorField);
    }
    const adjustedSliderDimensions = {
      width: this.effectiveSliderWidth,
      height: staticDimensions.slider.height + (staticDimensions.thumb.radius - dynamicDimensions.slider.height / 2) * 2
    };
    if (context === "all" || context === "hue-slider") {
      this.setCanvasContextSize(this.hueSliderRenderingContext?.canvas, adjustedSliderDimensions);
    }
    if (context === "all" || context === "opacity-slider") {
      this.setCanvasContextSize(this.opacitySliderRenderingContext?.canvas, adjustedSliderDimensions);
    }
  }
  drawActiveColorFieldColor() {
    const { color } = this;
    if (!color) {
      return;
    }
    const hsvColor = color.hsv();
    const { staticDimensions: { thumb: { radius } } } = this;
    const { width, height } = this.dynamicDimensions.colorField;
    const x = hsvColor.saturationv() / (_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.s / width);
    const y = height - hsvColor.value() / (_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.v / height);
    requestAnimationFrame(() => {
      this.colorFieldScopeLeft = x;
      this.colorFieldScopeTop = y;
    });
    this.drawThumb(this.colorFieldRenderingContext, radius, x, y, hsvColor, false);
  }
  drawThumb(context, radius, x, y, color, applyAlpha) {
    const startAngle = 0;
    const endAngle = 2 * Math.PI;
    const outlineWidth = 1;
    context.beginPath();
    context.arc(x, y, radius, startAngle, endAngle);
    context.fillStyle = "#fff";
    context.fill();
    context.strokeStyle = "rgba(0,0,0,0.3)";
    context.lineWidth = outlineWidth;
    context.stroke();
    if (applyAlpha && color.alpha() < 1) {
      const pattern = context.createPattern(this.getCheckeredBackgroundPattern(), "repeat");
      context.beginPath();
      context.arc(x, y, radius - 3, startAngle, endAngle);
      context.fillStyle = pattern;
      context.fill();
    }
    context.globalCompositeOperation = "source-atop";
    context.beginPath();
    context.arc(x, y, radius - 3, startAngle, endAngle);
    const alpha = applyAlpha ? color.alpha() : 1;
    context.fillStyle = color.rgb().alpha(alpha).string();
    context.fill();
    context.globalCompositeOperation = "source-over";
  }
  drawActiveHueSliderColor() {
    const { color } = this;
    if (!color) {
      return;
    }
    const hsvColor = color.hsv().saturationv(100).value(100);
    const { staticDimensions: { thumb: { radius } } } = this;
    const width = this.effectiveSliderWidth;
    const x = hsvColor.hue() / (_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.s / width);
    const y = radius;
    const sliderBoundX = this.getSliderBoundX(x, width, radius);
    requestAnimationFrame(() => {
      this.hueScopeLeft = sliderBoundX;
    });
    this.drawThumb(this.hueSliderRenderingContext, radius, sliderBoundX, y, hsvColor, false);
  }
  drawHueSlider() {
    const context = this.hueSliderRenderingContext;
    const { staticDimensions: { slider: { height }, thumb: { radius: thumbRadius } } } = this;
    const x = 0;
    const y = thumbRadius - height / 2;
    const width = this.effectiveSliderWidth;
    const gradient = context.createLinearGradient(0, 0, width, 0);
    const hueSliderColorStopKeywords = [
      "red",
      "yellow",
      "lime",
      "cyan",
      "blue",
      "magenta",
      "#ff0004"
    ];
    const offset = 1 / (hueSliderColorStopKeywords.length - 1);
    let currentOffset = 0;
    hueSliderColorStopKeywords.forEach((keyword) => {
      gradient.addColorStop(currentOffset, (0,color__WEBPACK_IMPORTED_MODULE_16__["default"])(keyword).string());
      currentOffset += offset;
    });
    context.clearRect(0, 0, width, height + this.getSliderCapSpacing() * 2);
    this.drawSliderPath(context, height, width, x, y);
    context.fillStyle = gradient;
    context.fill();
    context.strokeStyle = "rgba(0,0,0,0.3)";
    context.lineWidth = 1;
    context.stroke();
    this.drawActiveHueSliderColor();
  }
  drawOpacitySlider() {
    const context = this.opacitySliderRenderingContext;
    const { baseColorFieldColor: previousColor, staticDimensions: { slider: { height }, thumb: { radius: thumbRadius } } } = this;
    const x = 0;
    const y = thumbRadius - height / 2;
    const width = this.effectiveSliderWidth;
    context.clearRect(0, 0, width, height + this.getSliderCapSpacing() * 2);
    const gradient = context.createLinearGradient(0, y, width, 0);
    const startColor = previousColor.rgb().alpha(0);
    const midColor = previousColor.rgb().alpha(0.5);
    const endColor = previousColor.rgb().alpha(1);
    gradient.addColorStop(0, startColor.string());
    gradient.addColorStop(0.5, midColor.string());
    gradient.addColorStop(1, endColor.string());
    this.drawSliderPath(context, height, width, x, y);
    const pattern = context.createPattern(this.getCheckeredBackgroundPattern(), "repeat");
    context.fillStyle = pattern;
    context.fill();
    context.fillStyle = gradient;
    context.fill();
    context.strokeStyle = "rgba(0,0,0,0.3)";
    context.lineWidth = 1;
    context.stroke();
    this.drawActiveOpacitySliderColor();
  }
  drawSliderPath(context, height, width, x, y) {
    const radius = height / 2 + 1;
    context.beginPath();
    context.moveTo(x + radius, y);
    context.lineTo(x + width - radius, y);
    context.quadraticCurveTo(x + width, y, x + width, y + radius);
    context.lineTo(x + width, y + height - radius);
    context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
    context.lineTo(x + radius, y + height);
    context.quadraticCurveTo(x, y + height, x, y + height - radius);
    context.lineTo(x, y + radius);
    context.quadraticCurveTo(x, y, x + radius, y);
    context.closePath();
  }
  getCheckeredBackgroundPattern() {
    if (this.checkerPattern) {
      return this.checkerPattern;
    }
    const pattern = document.createElement("canvas");
    pattern.width = 10;
    pattern.height = 10;
    const patternContext = pattern.getContext("2d");
    patternContext.fillStyle = "#ccc";
    patternContext.fillRect(0, 0, 10, 10);
    patternContext.fillStyle = "#fff";
    patternContext.fillRect(0, 0, 5, 5);
    patternContext.fillRect(5, 5, 5, 5);
    this.checkerPattern = pattern;
    return pattern;
  }
  drawActiveOpacitySliderColor() {
    const { color } = this;
    if (!color) {
      return;
    }
    const hsvColor = color;
    const { staticDimensions: { thumb: { radius } } } = this;
    const width = this.effectiveSliderWidth;
    const x = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.c)(hsvColor.alpha()) / (_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.O.max / width);
    const y = radius;
    const sliderBoundX = this.getSliderBoundX(x, width, radius);
    requestAnimationFrame(() => {
      this.opacityScopeLeft = sliderBoundX;
    });
    this.drawThumb(this.opacitySliderRenderingContext, radius, sliderBoundX, y, hsvColor, true);
  }
  getSliderBoundX(x, width, radius) {
    const closeToEdge = (0,_chunks_math_js__WEBPACK_IMPORTED_MODULE_9__.a)(x, width, radius);
    return closeToEdge === 0 ? x : closeToEdge === -1 ? (0,_chunks_math_js__WEBPACK_IMPORTED_MODULE_9__.r)(x, 0, width, radius, radius * 2) : (0,_chunks_math_js__WEBPACK_IMPORTED_MODULE_9__.r)(x, 0, width, width - radius * 2, width - radius);
  }
  handleOpacityScopeKeyDown(event) {
    const modifier = event.shiftKey ? 10 : 1;
    const { key } = event;
    const arrowKeyToXOffset = {
      ArrowUp: 0.01,
      ArrowRight: 0.01,
      ArrowDown: -0.01,
      ArrowLeft: -0.01
    };
    if (arrowKeyToXOffset[key]) {
      event.preventDefault();
      const delta = arrowKeyToXOffset[key] * modifier;
      const alpha = this.baseColorFieldColor.alpha();
      const color = this.baseColorFieldColor.alpha(alpha + delta);
      this.internalColorSet(color, false);
    }
  }
  updateColorFromChannels(channels) {
    this.internalColorSet((0,color__WEBPACK_IMPORTED_MODULE_16__["default"])(channels, this.channelMode));
  }
  updateChannelsFromColor(color) {
    this.channels = color ? this.toChannels(color) : [null, null, null, null];
  }
  toChannels(color) {
    const { channelMode } = this;
    const channels = color[channelMode]().round().array();
    if (channels.length === 3) {
      channels.push(1);
    }
    return channels;
  }
  getAdjustedScopePosition(left, top) {
    return [left - _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.v / 2, top - _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.v / 2];
  }
  render() {
    const { channelsDisabled, color, colorFieldScopeLeft, colorFieldScopeTop, staticDimensions: { thumb: { radius: thumbRadius } }, fieldDisabled, hexDisabled, hueScopeLeft, messages, alphaChannel, opacityScopeLeft, savedColors, savedDisabled, scale, scopeOrientation } = this;
    const sliderWidth = this.effectiveSliderWidth;
    const selectedColorInHex = color ? (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.h)(color, alphaChannel) : null;
    const hueTop = thumbRadius;
    const hueLeft = hueScopeLeft ?? sliderWidth * _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D.hue() / _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.h;
    const opacityTop = thumbRadius;
    const opacityLeft = opacityScopeLeft ?? sliderWidth * (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.c)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D.alpha()) / _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.O.max;
    const noColor = color === void 0;
    const vertical = scopeOrientation === "vertical";
    const [adjustedColorFieldScopeLeft, adjustedColorFieldScopeTop] = this.getAdjustedScopePosition(colorFieldScopeLeft, colorFieldScopeTop);
    const [adjustedHueScopeLeft, adjustedHueScopeTop] = this.getAdjustedScopePosition(hueLeft, hueTop);
    const [adjustedOpacityScopeLeft, adjustedOpacityScopeTop] = this.getAdjustedScopePosition(opacityLeft, opacityTop);
    return (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_7__.I)({ disabled: this.disabled, children: (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.container)}>${fieldDisabled ? null : (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.controlAndScope)}><canvas class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.colorField)} @pointerdown=${this.handleColorFieldPointerDown} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.ref)(this.initColorField)}></canvas><div .ariaLabel=${vertical ? messages.value : messages.saturation} .ariaValueMax=${vertical ? _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.v : _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.s} aria-valuemin=0 .ariaValueNow=${(vertical ? color?.saturationv() : color?.value()) || "0"} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.scope]: true, [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.colorFieldScope]: true })} @keydown=${this.handleColorFieldScopeKeyDown} role=slider style=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeStyleMap)({
      top: `${adjustedColorFieldScopeTop || 0}px`,
      left: `${adjustedColorFieldScopeLeft || 0}px`
    })} tabindex=0 ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.ref)(this.colorFieldScopeRef)}></div></div>`}<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.previewAndSliders)}><calcite-swatch class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.preview)} .color=${selectedColorInHex} .label=${selectedColorInHex} .scale=${this.alphaChannel ? "l" : this.scale}></calcite-swatch><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.sliders)}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.controlAndScope)}><canvas class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.slider]: true, [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.hueSlider]: true })} @pointerdown=${this.handleHueSliderPointerDown} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.ref)(this.initHueSlider)}></canvas><div .ariaLabel=${messages.hue} .ariaValueMax=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.H.h} aria-valuemin=0 .ariaValueNow=${color?.round().hue() || _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D.round().hue()} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.scope]: true, [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.hueScope]: true })} @keydown=${this.handleHueScopeKeyDown} role=slider style=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeStyleMap)({
      top: `${adjustedHueScopeTop}px`,
      left: `${adjustedHueScopeLeft}px`
    })} tabindex=0 ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.ref)(this.hueScopeRef)}></div></div>${alphaChannel ? (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.controlAndScope)}><canvas class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.slider]: true, [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.opacitySlider]: true })} @pointerdown=${this.handleOpacitySliderPointerDown} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.ref)(this.initOpacitySlider)}></canvas><div .ariaLabel=${messages.opacity} .ariaValueMax=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.O.max} .ariaValueMin=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.O.min} .ariaValueNow=${(color || _chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.D).round().alpha()} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.scope]: true, [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.opacityScope]: true })} @keydown=${this.handleOpacityScopeKeyDown} role=slider style=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeStyleMap)({
      top: `${adjustedOpacityScopeTop}px`,
      left: `${adjustedOpacityScopeLeft}px`
    })} tabindex=0 ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_5__.ref)(this.opacityScopeRef)}></div></div>` : null}</div></div>${hexDisabled && channelsDisabled ? null : (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({
      [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.controlSection]: true,
      [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.section]: true
    })}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.hexAndChannelsGroup)}>${hexDisabled ? null : (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.hexOptions)}><calcite-color-picker-hex-input .allowEmpty=${this.isClearable} .alphaChannel=${alphaChannel} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.control)} .messages=${messages} .numberingSystem=${this.numberingSystem} @calciteColorPickerHexInputChange=${this.handleHexInputChange} .scale=${scale} .value=${selectedColorInHex}></calcite-color-picker-hex-input></div>`}${channelsDisabled ? null : (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<calcite-tabs class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({
      [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.colorModeContainer]: true,
      [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.splitSection]: true
    })} .scale=${scale === "l" ? "m" : "s"}><calcite-tab-nav slot=title-group>${this.renderChannelsTabTitle("rgb")}${this.renderChannelsTabTitle("hsv")}</calcite-tab-nav>${this.renderChannelsTab("rgb")}${this.renderChannelsTab("hsv")}</calcite-tabs>`}</div></div>`}${savedDisabled ? null : (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.savedColorsSection]: true, [_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.section]: true })}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.header)}><label>${messages.saved}</label><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.savedColorsButtons)}><calcite-button appearance=transparent class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.deleteColor)} .disabled=${noColor} .iconStart=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.I.minus} kind=neutral .label=${messages.deleteColor} @click=${this.deleteColor} .scale=${scale} type=button></calcite-button><calcite-button appearance=transparent class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.saveColor)} .disabled=${noColor} .iconStart=${_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.I.plus} kind=neutral .label=${messages.saveColor} @click=${this.saveColor} .scale=${scale} type=button></calcite-button></div></div>${savedColors.length > 0 ? (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<calcite-swatch-group class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.swatchGroup)} .label=${messages.saved} .scale=${scale} selection-mode=none>${(0,lit_directives_repeat_js__WEBPACK_IMPORTED_MODULE_1__.repeat)(savedColors, (color2) => color2, (color2) => (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<calcite-swatch class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.savedColor)} .color=${color2} .label=${color2} @click=${this.handleSavedColorSelect} @keydown=${this.handleSavedColorKeyDown} .scale=${scale} tabindex=0></calcite-swatch>`)}</calcite-swatch-group>` : null}</div>`}</div>` });
  }
  renderChannelsTabTitle(channelMode) {
    const { channelMode: activeChannelMode, messages } = this;
    const selected = channelMode === activeChannelMode;
    const label = channelMode === "rgb" ? messages.rgb : messages.hsv;
    return (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_2__.keyed)(channelMode, (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<calcite-tab-title class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.colorMode)} data-color-mode=${channelMode ?? lit__WEBPACK_IMPORTED_MODULE_3__.nothing} @calciteTabsActivate=${this.handleTabActivate} .selected=${selected}>${label}</calcite-tab-title>`);
  }
  renderChannelsTab(channelMode) {
    const { isClearable, channelMode: activeChannelMode, channels, messages, alphaChannel } = this;
    const selected = channelMode === activeChannelMode;
    const isRgb = channelMode === "rgb";
    const channelAriaLabels = isRgb ? [messages.red, messages.green, messages.blue] : [messages.hue, messages.saturation, messages.value];
    const direction = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.g)(this.el);
    const channelsToRender = alphaChannel ? channels : channels.slice(0, 3);
    return (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_2__.keyed)(channelMode, (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<calcite-tab class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.control)} .selected=${selected}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.channels)} dir=ltr>${channelsToRender.map((channelValue, index) => {
      const isAlphaChannel = index === 3;
      if (isAlphaChannel) {
        channelValue = isClearable && !channelValue ? channelValue : (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.c)(channelValue);
      }
      return this.renderChannel(channelValue, index, channelAriaLabels[index], direction, isAlphaChannel ? "%" : "");
    })}</div></calcite-tab>`);
  }
  renderChannel(value, index, ariaLabel, direction, suffix) {
    return (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_2__.keyed)(index, (0,lit__WEBPACK_IMPORTED_MODULE_3__.html)`<calcite-input-number class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(_chunks_utils_js__WEBPACK_IMPORTED_MODULE_14__.m.channel)} data-channel-index=${index ?? lit__WEBPACK_IMPORTED_MODULE_3__.nothing} dir=${direction ?? lit__WEBPACK_IMPORTED_MODULE_3__.nothing} .label=${ariaLabel} lang=${this.messages._lang ?? lit__WEBPACK_IMPORTED_MODULE_3__.nothing} number-button-type=none .numberingSystem=${this.numberingSystem} @keydown=${this.handleKeyDown} @calciteInputNumberChange=${this.handleChannelChange} @calciteInputNumberInput=${this.handleChannelInput} @calciteInternalInputNumberBlur=${this.handleChannelBlur} @calciteInternalInputNumberFocus=${this.handleChannelFocus} .scale=${this.scale === "l" ? "m" : "s"} style=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeStyleMap)({
      marginLeft: index > 0 && !(this.scale === "s" && this.alphaChannel && index === 3) ? "-1px" : ""
    })} .suffixText=${suffix} .value=${value?.toString()}></calcite-input-number>`);
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-color-picker", ColorPicker);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-color-picker/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColorPicker: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_9__.ColorPicker)
/* harmony export */ });
/* harmony import */ var _calcite_swatch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-swatch/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch/index.js");
/* harmony import */ var _calcite_color_picker_hex_input_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../calcite-color-picker-hex-input/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-hex-input/index.js");
/* harmony import */ var _calcite_tabs_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../calcite-tabs/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tabs/index.js");
/* harmony import */ var _calcite_tab_nav_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../calcite-tab-nav/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-nav/index.js");
/* harmony import */ var _calcite_button_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../calcite-button/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-button/index.js");
/* harmony import */ var _calcite_swatch_group_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../calcite-swatch-group/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch-group/index.js");
/* harmony import */ var _calcite_tab_title_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../calcite-tab-title/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-title/index.js");
/* harmony import */ var _calcite_tab_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../calcite-tab/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tab/index.js");
/* harmony import */ var _calcite_input_number_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../calcite-input-number/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-input-number/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker/customElement.js");











/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-input-text/customElement.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-input-text/customElement.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InputText: () => (/* binding */ InputText)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit_directives_live_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/live.js */ "./node_modules/lit/directives/live.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/lumina/controllers */ "./node_modules/@arcgis/lumina/dist/controllers/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_form_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/form.js */ "./node_modules/@esri/calcite-components/dist/chunks/form.js");
/* harmony import */ var _chunks_interactive_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/interactive.js */ "./node_modules/@esri/calcite-components/dist/chunks/interactive.js");
/* harmony import */ var _chunks_label_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../chunks/label.js */ "./node_modules/@esri/calcite-components/dist/chunks/label.js");
/* harmony import */ var _chunks_component_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../chunks/component.js */ "./node_modules/@esri/calcite-components/dist/chunks/component.js");
/* harmony import */ var _chunks_InternalLabel_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../chunks/InternalLabel.js */ "./node_modules/@esri/calcite-components/dist/chunks/InternalLabel.js");
/* harmony import */ var _chunks_Validation_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../chunks/Validation.js */ "./node_modules/@esri/calcite-components/dist/chunks/Validation.js");
/* harmony import */ var _chunks_input_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../chunks/input.js */ "./node_modules/@esri/calcite-components/dist/chunks/input.js");
/* harmony import */ var _chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../chunks/useT9n.js */ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */
















const CSS = {
  loader: "loader",
  clearable: "clearable",
  clearButton: "clear-button",
  editingEnabled: "editing-enabled",
  inlineChild: "inline-child",
  inputIcon: "icon",
  prefix: "prefix",
  suffix: "suffix",
  wrapper: "element-wrapper",
  inputWrapper: "wrapper",
  actionWrapper: "action-wrapper"
};
const IDS = {
  validationMessage: "inputTextValidationMessage"
};
const SLOTS = {
  action: "action"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_2__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input{padding-inline-start:.5rem;padding-inline-end:var(--calcite-internal-input-text-input-padding-inline-end, .5rem)}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .prefix,:host([scale=s]) .suffix{padding-inline:.5rem}:host([scale=s]) .action-wrapper{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=m]) input{padding-inline-start:.75rem;padding-inline-end:var(--calcite-internal-input-text-input-padding-inline-end, .75rem)}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .prefix,:host([scale=m]) .suffix{padding-inline:.75rem}:host([scale=m]) .action-wrapper{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=l]) input{padding-inline-start:1rem;padding-inline-end:var(--calcite-internal-input-text-input-padding-inline-end, 1rem)}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .prefix,:host([scale=l]) .suffix{padding-inline:1rem}:host([scale=l]) .action-wrapper{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}input{transition:var(--calcite-animation-timing),block-size 0,outline-offset 0s;-webkit-appearance:none;position:relative;margin:0;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;text-overflow:ellipsis;border-width:1px;border-style:solid;font-family:inherit;font-weight:var(--calcite-font-weight-normal);background-color:var(--calcite-input-text-background-color, var(--calcite-color-foreground-1));color:var(--calcite-input-text-text-color, var(--calcite-color-text-1));border-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp));border-color:var(--calcite-input-text-border-color, var(--calcite-color-border-input));text-align:var(--calcite-internal-input-text-alignment)}input:placeholder-shown{text-overflow:ellipsis}input::placeholder,input:-ms-input-placeholder,input::-ms-input-placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-number-placeholder-text-color, var(--calcite-color-text-3))}input:focus{border-color:var(--calcite-color-brand);color:var(--calcite-input-text-text-color-focus, var(--calcite-color-text-1))}input[readonly]{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-input-text-background-color, var(--calcite-color-background))}input[readonly]:focus{color:var(--calcite-input-text-text-color-focus, var(--calcite-color-text-1))}calcite-icon{color:var(--calcite-input-action-icon-color, var(--calcite-color-text-3))}input{outline-color:transparent}input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([status=invalid]) input{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) input:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([scale=s]) .icon{inset-inline-start:.5rem}:host([scale=m]) .icon{inset-inline-start:.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center;isolation:isolate}.icon{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);display:block;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-text-icon-color, var(--calcite-color-text-3))}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}.clear-button{pointer-events:initial;order:4;margin:0;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;outline-color:transparent;border-color:var(--calcite-input-text-border-color, var(--calcite-color-border-input));background-color:var(--calcite-input-action-background-color, var(--calcite-color-foreground-1));border-inline-start-width:0px}.clear-button:hover{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;background-color:var(--calcite-input-action-background-color-hover, var(--calcite-color-foreground-2))}.clear-button:hover calcite-icon{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;color:var(--calcite-input-action-icon-color-hover, var(--calcite-color-text-1))}.clear-button:active{background-color:var(--calcite-input-action-background-color-press, var(--calcite-color-foreground-3))}.clear-button:active calcite-icon{color:var(--calcite-input-action-icon-color-press, --calcite-color-text-1)}.clear-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.clear-button:disabled{opacity:var(--calcite-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.loader calcite-progress{--calcite-progress-background-color: var(--calcite-input-loading-background-color);--calcite-progress-fill-color: var(--calcite-input-loading-fill-color)}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;font-weight:var(--calcite-font-weight-medium);line-height:1;border-color:var(--calcite-input-text-border-color, var(--calcite-color-border-input))}.prefix{order:2;border-inline-end-width:0px;inline-size:var(--calcite-input-prefix-size-x, auto);background-color:var(--calcite-input-prefix-background-color, var(--calcite-color-background));color:var(--calcite-input-prefix-text-color, var(--calcite-color-text-2));border-start-start-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp));border-end-start-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp))}.suffix{order:5;border-inline-start-width:0px;inline-size:var(--calcite-input-suffix-size-x, auto);background-color:var(--calcite-input-suffix-background-color, var(--calcite-color-background));color:var(--calcite-input-suffix-text-color, var(--calcite-color-text-2));border-start-end-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp))}:host([prefix-text]:not([prefix-text=""])) input{border-start-start-radius:0;border-end-start-radius:0}:host([suffix-text]:not([suffix-text=""])) input,:host .clearable input{border-start-end-radius:0;border-end-end-radius:0}:host(:not([suffix-text])) .clear-button,:host([suffix-text=""]) .clear-button{border-start-end-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp));border-end-end-radius:var(--calcite-input-text-corner-radius, var(--calcite-corner-radius-sharp))}:host([alignment=start]){--calcite-internal-input-text-alignment: start}:host([alignment=center]){--calcite-internal-input-text-alignment: center}:host([alignment=end]){--calcite-internal-input-text-alignment: end}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:host(.input--no-bottom-border) input{border-block-end-width:0px}:host(.input--no-top-border) input{border-block-start-width:0px}:host(.input--no-right-border) input{border-inline-end:0}:host(.input--no-left-border) input{border-inline-start:0}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-color-border-1)}input.inline-child{background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}input.inline-child .editing-enabled{background-color:inherit}input.inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}:host([hidden]){display:none}[hidden]{display:none}::placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-input-placeholder-text-color, var(--calcite-color-text-3))}`;
class InputText extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.LitElement {
  constructor() {
    super();
    this.actionWrapperRef = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.attributeWatch = (0,_arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_5__.useWatchAttributes)(["autofocus", "enterkeyhint", "inputmode", "spellcheck"], this.handleGlobalAttributesChanged);
    this.childRef = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.inputWrapperRef = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.onHiddenFormInputInput = (event) => {
      if (event.target.name === this.name) {
        this.setValue({
          value: event.target.value,
          origin: "direct"
        });
      }
      this.setFocus();
      event.stopPropagation();
    };
    this.previousValueOrigin = "initial";
    this.userChangedValue = false;
    this._value = "";
    this.messages = (0,_chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_14__.u)();
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_15__.u)()(this);
    this.slottedActionElDisabledInternally = false;
    this.alignment = "start";
    this.clearable = false;
    this.disabled = false;
    this.editingEnabled = false;
    this.iconFlipRtl = false;
    this.loading = false;
    this.readOnly = false;
    this.required = false;
    this.scale = "m";
    this.status = "idle";
    this.validity = {
      valid: false,
      badInput: false,
      customError: false,
      patternMismatch: false,
      rangeOverflow: false,
      rangeUnderflow: false,
      stepMismatch: false,
      tooLong: false,
      tooShort: false,
      typeMismatch: false,
      valueMissing: false
    };
    this.calciteInputTextChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)();
    this.calciteInputTextInput = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)();
    this.calciteInternalInputTextBlur = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)();
    this.calciteInternalInputTextFocus = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)();
    this.listen("click", this.clickHandler);
    this.listen("keydown", this.keyDownHandler);
  }
  static {
    this.properties = { slottedActionElDisabledInternally: [16, {}, { state: true }], alignment: [3, {}, { reflect: true }], autocomplete: [0, {}, { attribute: false }], clearable: [7, {}, { reflect: true, type: Boolean }], disabled: [7, {}, { reflect: true, type: Boolean }], editingEnabled: [7, {}, { reflect: true, type: Boolean }], form: [3, {}, { reflect: true }], icon: [3, { converter: _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.stringOrBoolean }, { reflect: true }], iconFlipRtl: [7, {}, { reflect: true, type: Boolean }], label: 1, labelText: 1, loading: [7, {}, { reflect: true, type: Boolean }], maxLength: [11, {}, { reflect: true, type: Number }], messageOverrides: [0, {}, { attribute: false }], minLength: [11, {}, { reflect: true, type: Number }], name: [3, {}, { reflect: true }], pattern: 1, placeholder: 1, prefixText: 1, readOnly: [7, {}, { reflect: true, type: Boolean }], required: [7, {}, { reflect: true, type: Boolean }], scale: [3, {}, { reflect: true }], status: [3, {}, { reflect: true }], suffixText: 1, validationIcon: [3, { converter: _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.stringOrBoolean }, { reflect: true }], validationMessage: 1, validity: [0, {}, { attribute: false }], value: 1 };
  }
  static {
    this.styles = styles;
  }
  get value() {
    return this._value;
  }
  set value(value) {
    const oldValue = this._value;
    if (value !== oldValue) {
      this._value = value;
      this.valueWatcher(value, oldValue);
    }
  }
  async selectText() {
    this.childRef.value?.select();
  }
  async setFocus(options) {
    return this.focusSetter(() => this.childRef.value, options);
  }
  connectedCallback() {
    super.connectedCallback();
    this.inlineEditableEl = this.el.closest("calcite-inline-editable");
    if (this.inlineEditableEl) {
      this.editingEnabled = this.inlineEditableEl.editingEnabled || false;
    }
    (0,_chunks_label_js__WEBPACK_IMPORTED_MODULE_9__.c)(this);
    (0,_chunks_form_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
    this.el.addEventListener(_chunks_form_js__WEBPACK_IMPORTED_MODULE_7__.i, this.onHiddenFormInputInput);
  }
  async load() {
    this.requestedIcon = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.v)({}, this.icon, "text");
    this.setPreviousEmittedValue(this.value);
    this.setPreviousValue(this.value);
  }
  willUpdate(changes) {
    if (changes.has("icon")) {
      this.requestedIcon = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.v)({}, this.icon, "text");
    }
  }
  updated() {
    (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_8__.u)(this);
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    (0,_chunks_label_js__WEBPACK_IMPORTED_MODULE_9__.d)(this);
    (0,_chunks_form_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
    this.el.removeEventListener(_chunks_form_js__WEBPACK_IMPORTED_MODULE_7__.i, this.onHiddenFormInputInput);
  }
  get isClearable() {
    return this.clearable && this.value.length > 0;
  }
  handleGlobalAttributesChanged() {
    this.requestUpdate();
  }
  valueWatcher(newValue, previousValue) {
    if (!this.userChangedValue) {
      this.setValue({
        origin: "direct",
        previousValue,
        value: !newValue ? "" : newValue
      });
    }
    this.userChangedValue = false;
  }
  keyDownHandler(event) {
    if (this.readOnly || this.disabled || event.defaultPrevented) {
      return;
    }
    if (this.isClearable && event.key === "Escape") {
      this.clearInputTextValue(event);
      event.preventDefault();
    }
    if (event.key === "Enter") {
      if ((0,_chunks_form_js__WEBPACK_IMPORTED_MODULE_7__.s)(this)) {
        event.preventDefault();
      }
    }
  }
  onLabelClick() {
    this.setFocus();
  }
  clearInputTextValue(nativeEvent) {
    this.setValue({
      committing: true,
      nativeEvent,
      origin: "user",
      value: ""
    });
  }
  emitChangeIfUserModified() {
    if (this.previousValueOrigin === "user" && this.value !== this.previousEmittedValue) {
      this.calciteInputTextChange.emit();
      this.setPreviousEmittedValue(this.value);
    }
  }
  inputTextBlurHandler() {
    this.calciteInternalInputTextBlur.emit({
      element: this.childRef.value,
      value: this.value
    });
    this.emitChangeIfUserModified();
  }
  clickHandler(event) {
    if (this.disabled) {
      return;
    }
    const composedPath = event.composedPath();
    if (!composedPath.includes(this.inputWrapperRef.value) || composedPath.includes(this.actionWrapperRef.value)) {
      return;
    }
    this.setFocus();
  }
  inputTextFocusHandler() {
    this.calciteInternalInputTextFocus.emit({
      element: this.childRef.value,
      value: this.value
    });
  }
  inputTextInputHandler(nativeEvent) {
    if (this.disabled || this.readOnly) {
      return;
    }
    this.setValue({
      nativeEvent,
      origin: "user",
      value: nativeEvent.target.value
    });
  }
  inputTextKeyDownHandler(event) {
    if (this.disabled || this.readOnly) {
      return;
    }
    if (event.key === "Enter") {
      this.emitChangeIfUserModified();
    }
  }
  syncHiddenFormInput(input) {
    (0,_chunks_input_js__WEBPACK_IMPORTED_MODULE_13__.s)("text", this, input);
  }
  setInputValue(newInputValue) {
    if (!this.childRef.value) {
      return;
    }
    this.childRef.value.value = newInputValue;
  }
  setPreviousEmittedValue(value) {
    this.previousEmittedValue = value;
  }
  setPreviousValue(value) {
    this.previousValue = value;
  }
  setValue({ committing = false, nativeEvent, origin, previousValue, value }) {
    this.setPreviousValue(previousValue ?? this.value);
    this.previousValueOrigin = origin;
    this.userChangedValue = origin === "user" && value !== this.value;
    this.value = value;
    if (origin === "direct") {
      this.setInputValue(value);
      this.setPreviousEmittedValue(value);
    }
    if (nativeEvent) {
      const calciteInputTextInputEvent = this.calciteInputTextInput.emit();
      if (calciteInputTextInputEvent.defaultPrevented) {
        this.value = this.previousValue;
      } else if (committing) {
        this.emitChangeIfUserModified();
      }
    }
  }
  render() {
    const dir = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.g)(this.el);
    const loader = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.loader)}><calcite-progress .label=${this.messages.loading} type=indeterminate></calcite-progress></div>`;
    const inputClearButton = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<button .ariaLabel=${this.messages.clear} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.clearButton)} .disabled=${this.disabled || this.readOnly} @click=${this.clearInputTextValue} tabindex=-1 type=button><calcite-icon icon=x .scale=${(0,_chunks_component_js__WEBPACK_IMPORTED_MODULE_10__.g)(this.scale)}></calcite-icon></button>`;
    const iconEl = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<calcite-icon class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.inputIcon)} .flipRtl=${this.iconFlipRtl} .icon=${this.requestedIcon} .scale=${(0,_chunks_component_js__WEBPACK_IMPORTED_MODULE_10__.g)(this.scale)}></calcite-icon>`;
    const prefixText = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.prefix)}>${this.prefixText}</div>`;
    const suffixText = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.suffix)}>${this.suffixText}</div>`;
    const childEl = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<input aria-errormessage=${IDS.validationMessage} .ariaInvalid=${this.status === "invalid"} .ariaLabel=${(0,_chunks_label_js__WEBPACK_IMPORTED_MODULE_9__.g)(this)} autocomplete=${this.autocomplete ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} .autofocus=${this.el.autofocus} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({
      [CSS.editingEnabled]: this.editingEnabled,
      [CSS.inlineChild]: !!this.inlineEditableEl
    })} value=${this.defaultValue ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} .disabled=${this.disabled ? true : null} enterkeyhint=${this.el.enterKeyHint ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} inputmode=${this.el.inputMode ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} maxlength=${this.maxLength ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} minlength=${this.minLength ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} name=${this.name ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} @blur=${this.inputTextBlurHandler} @focus=${this.inputTextFocusHandler} @input=${this.inputTextInputHandler} @keydown=${this.inputTextKeyDownHandler} pattern=${this.pattern ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} placeholder=${(this.placeholder || "") ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} .readOnly=${this.readOnly} .required=${this.required ? true : null} spellcheck=${this.el.spellcheck ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} tabindex=${(this.disabled || this.inlineEditableEl && !this.editingEnabled ? -1 : null) ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} type=text .value=${(0,lit_directives_live_js__WEBPACK_IMPORTED_MODULE_1__.live)(this.value ?? "")} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.childRef)}>`;
    return (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_8__.I)({ disabled: this.disabled, children: (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`${this.labelText && (0,_chunks_InternalLabel_js__WEBPACK_IMPORTED_MODULE_11__.I)({ labelText: this.labelText, onClick: this.onLabelClick, required: this.required, tooltipText: this.messages.required }) || ""}<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({
      [CSS.inputWrapper]: true,
      [_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.C.rtl]: dir === "rtl",
      [CSS.clearable]: this.isClearable
    })} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.inputWrapperRef)}>${this.prefixText ? prefixText : null}<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.wrapper)}>${childEl}${this.isClearable ? inputClearButton : null}${this.requestedIcon ? iconEl : null}${this.loading ? loader : null}</div><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.actionWrapper)} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.actionWrapperRef)}><slot name=${SLOTS.action}></slot></div>${this.suffixText ? suffixText : null}${(0,_chunks_form_js__WEBPACK_IMPORTED_MODULE_7__.H)({ component: this })}</div>${this.validationMessage && this.status === "invalid" ? (0,_chunks_Validation_js__WEBPACK_IMPORTED_MODULE_12__.V)({ icon: this.validationIcon, id: IDS.validationMessage, message: this.validationMessage, scale: this.scale, status: this.status }) : null}` });
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-input-text", InputText);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-input-text/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-input-text/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InputText: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_3__.InputText)
/* harmony export */ });
/* harmony import */ var _calcite_input_message_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-input-message/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-input-message/index.js");
/* harmony import */ var _calcite_progress_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../calcite-progress/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-progress/index.js");
/* harmony import */ var _calcite_icon_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../calcite-icon/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-input-text/customElement.js");





/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch-group/customElement.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-swatch-group/customElement.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SwatchGroup: () => (/* binding */ SwatchGroup)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_interactive_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/interactive.js */ "./node_modules/@esri/calcite-components/dist/chunks/interactive.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */







const CSS = {
  container: "container"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.container{display:flex;flex-wrap:wrap;gap:var(--calcite-swatch-group-space, var(--calcite-spacing-sm))}:host([scale=s]) .container{gap:var(--calcite-swatch-group-space, var(--calcite-spacing-xs))}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`;
class SwatchGroup extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.LitElement {
  constructor() {
    super();
    this.items = [];
    this.slotRefEl = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.createRef)();
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_6__.u)()(this);
    this.disabled = false;
    this.scale = "m";
    this.selectedItems = [];
    this.selectionMode = "none";
    this.calciteSwatchGroupSelect = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)({ cancelable: false });
    this.listen("calciteInternalSwatchKeyEvent", this.calciteInternalSwatchKeyEventListener);
    this.listen("calciteSwatchSelect", this.calciteSwatchSelectListener);
    this.listen("calciteInternalSwatchSelect", this.calciteInternalSwatchSelectListener);
    this.listen("calciteInternalSyncSelectedSwatches", this.calciteInternalSyncSelectedSwatches);
  }
  static {
    this.properties = { disabled: [7, {}, { reflect: true, type: Boolean }], label: 1, scale: [3, {}, { reflect: true }], selectedItems: [0, {}, { attribute: false }], selectionMode: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  async setFocus(options) {
    return this.focusSetter(() => {
      return this.el;
    }, options);
  }
  willUpdate(changes) {
    if (changes.has("selectionMode") && (this.hasUpdated || this.selectionMode !== "none")) {
      this.updateItems();
    }
  }
  updated() {
    (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_5__.u)(this);
  }
  calciteInternalSwatchKeyEventListener(event) {
    if (event.composedPath().includes(this.el)) {
      const interactiveItems = this.items?.filter((el) => !el.disabled);
      switch (event.detail.key) {
        case "ArrowRight":
          (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.d)(interactiveItems, event.detail.target, "next");
          break;
        case "ArrowLeft":
          (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.d)(interactiveItems, event.detail.target, "previous");
          break;
        case "Home":
          (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.d)(interactiveItems, event.detail.target, "first");
          break;
        case "End":
          (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.d)(interactiveItems, event.detail.target, "last");
          break;
      }
    }
    event.stopPropagation();
  }
  calciteSwatchSelectListener(event) {
    if (event.composedPath().includes(this.el)) {
      this.setSelectedItems(true, event.target);
    }
    event.stopPropagation();
  }
  calciteInternalSwatchSelectListener(event) {
    if (event.composedPath().includes(this.el)) {
      this.setSelectedItems(false, event.target);
    }
    event.stopPropagation();
  }
  calciteInternalSyncSelectedSwatches(event) {
    if (event.composedPath().includes(this.el)) {
      this.updateSelectedItems();
      if (this.selectionMode === "single" && this.selectedItems.length > 1) {
        this.setSelectedItems(false, event.target);
      }
    }
    event.stopPropagation();
  }
  updateItems(event) {
    const itemsFromSlot = this.slotRefEl.value?.assignedElements({ flatten: true }).filter((el) => el?.matches("calcite-swatch"));
    this.items = !event ? itemsFromSlot : (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.s)(event);
    if (this.items?.length < 1) {
      return;
    }
    this.items?.forEach((el) => {
      el.interactive = true;
      el.scale = this.scale;
      el.selectionMode = this.selectionMode;
      el.parentSwatchGroup = this.el;
    });
    this.setSelectedItems(false);
  }
  updateSelectedItems() {
    this.selectedItems = this.items?.filter((el) => el.selected);
  }
  setSelectedItems(emit, elToMatch) {
    if (elToMatch) {
      this.items?.forEach((el) => {
        const matchingEl = elToMatch === el;
        switch (this.selectionMode) {
          case "multiple":
            if (matchingEl) {
              el.selected = !el.selected;
            }
            break;
          case "single":
            el.selected = matchingEl ? !el.selected : false;
            break;
          case "single-persist":
            el.selected = !!matchingEl;
            break;
        }
      });
    }
    this.updateSelectedItems();
    if (emit) {
      this.calciteSwatchGroupSelect.emit();
    }
  }
  render() {
    const role = this.selectionMode === "none" || this.selectionMode === "multiple" ? "group" : "radiogroup";
    const { disabled } = this;
    return (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_5__.I)({ disabled, children: (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div .ariaLabel=${this.label} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)(CSS.container)} .role=${role}><slot @slotchange=${this.updateItems} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.ref)(this.slotRefEl)}></slot></div>` });
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-swatch-group", SwatchGroup);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch-group/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-swatch-group/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SwatchGroup: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.SwatchGroup)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch-group/customElement.js");


/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch/customElement.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-swatch/customElement.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Swatch: () => (/* binding */ Swatch)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var color__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! color */ "./node_modules/color/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_interactive_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/interactive.js */ "./node_modules/@esri/calcite-components/dist/chunks/interactive.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/* harmony import */ var _chunks_utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/utils.js */ "./node_modules/@esri/calcite-components/dist/chunks/utils.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */










const CSS = {
  imageContainer: "image-container",
  container: "container",
  selectable: "selectable",
  nonInteractive: "non-interactive",
  selected: "selected",
  internalSvgContainer: "internal-svg-container",
  internalSvgDisabled: "internal-svg-disabled",
  internalSvgEmpty: "internal-svg-empty",
  swatch: "swatch",
  checker: "checker",
  noColorSwatch: "swatch--no-color"
};
const SLOTS = {
  image: "image"
};
const checkerSquareSize = 4;
const CHECKER_DIMENSIONS = {
  squareSize: checkerSquareSize,
  size: checkerSquareSize * 2
};
const IDS = {
  checker: "checker",
  shape: "shape",
  swatchRect: "swatch-rect",
  swatchSolid: "swatch-solid",
  swatchTransparent: "swatch-transparent"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_2__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:block;--calcite-internal-swatch-inset: var(--calcite-spacing-xxs)}:host([scale=s]) .container{--calcite-internal-swatch-size: var(--calcite-spacing-xl)}:host([scale=m]) .container{--calcite-internal-swatch-size: var(--calcite-spacing-xxl)}:host([scale=l]) .container{--calcite-internal-swatch-size: var(--calcite-spacing-xxxl)}.container{position:relative;box-sizing:border-box;justify-content:center;overflow:hidden;outline-color:transparent;font-size:var(--calcite-internal-swatch-font-size, var(--calcite-font-size));block-size:var(--calcite-internal-swatch-size, auto);inline-size:var(--calcite-internal-swatch-size, auto);min-inline-size:var(--calcite-internal-swatch-size, auto);border-radius:var(--calcite-swatch-corner-radius, 0)}.container:not(.non-interactive):hover{cursor:pointer;box-shadow:0 0 0 var(--calcite-border-width-md) var(--calcite-color-border-2)}.container.selectable{cursor:pointer}.container:not(.non-interactive):focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(var(--calcite-spacing-base) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.swatch{position:absolute;display:inline-flex;overflow:hidden;z-index:calc(var(--calcite-z-index) + 1);block-size:var(--calcite-internal-swatch-size, auto);inline-size:var(--calcite-internal-swatch-size, auto);min-inline-size:var(--calcite-internal-swatch-size, auto);border-radius:var(--calcite-swatch-corner-radius, 0)}:host([selected]) .swatch{inset:var(--calcite-internal-swatch-inset);block-size:calc(var(--calcite-internal-swatch-size, auto) - 2 * var(--calcite-internal-swatch-inset));inline-size:calc(var(--calcite-internal-swatch-size, auto) - 2 * var(--calcite-internal-swatch-inset));min-inline-size:calc(var(--calcite-internal-swatch-size, auto) - 2 * var(--calcite-internal-swatch-inset))}:host([selected]) .container{box-shadow:inset 0 0 0 var(--calcite-border-width-md) var(--calcite-color-text-1),inset 0 0 0 var(--calcite-border-width-lg) var(--calcite-color-foreground-1)}:host([selected]) .image-container{inset:var(--calcite-internal-swatch-inset)}.image-container{position:absolute;display:inline-flex;overflow:hidden;z-index:calc(var(--calcite-z-index) + 2);inset:var(--calcite-spacing-px);display:flex;align-items:center;justify-content:center;pointer-events:none;border-radius:var(--calcite-swatch-corner-radius, 0)}.internal-svg-container{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;z-index:calc(var(--calcite-z-index) + 2)}.swatch{overflow:hidden;block-size:inherit;inline-size:inherit}.swatch--no-color rect{fill:var(--calcite-color-foreground-1)}:host([selected]) #swatch-rect,:host([selected]) #swatch-solid,:host([selected]) #swatch-transparent{stroke-width:0}#swatch-rect,#swatch-solid,#swatch-transparent{stroke:var(--calcite-color-text-1);stroke-width:var(--calcite-border-width-md);stroke-opacity:.3;rx:var(--calcite-swatch-corner-radius)}.internal-svg-disabled{stroke:#6a6a6a;fill:#fff}.internal-svg-empty{stroke:var(--calcite-color-status-danger);stroke-width:3}.checker{fill:#cacaca}:host([hidden]){display:none}[hidden]{display:none}`;
class Swatch extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.LitElement {
  constructor() {
    super();
    this.containerEl = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_7__.u)()(this);
    this.hasImage = false;
    this.disabled = false;
    this.interactive = false;
    this.scale = "m";
    this.selected = false;
    this.selectionMode = "none";
    this.calciteInternalSwatchKeyEvent = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalSwatchSelect = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalSyncSelectedSwatches = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteSwatchSelect = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.listen("keydown", this.keyDownHandler);
  }
  static {
    this.properties = { hasImage: [16, {}, { state: true }], color: 1, disabled: [7, {}, { reflect: true, type: Boolean }], interactive: [5, {}, { type: Boolean }], label: 1, parentSwatchGroup: [0, {}, { attribute: false }], scale: [3, {}, { reflect: true }], selected: [7, {}, { reflect: true, type: Boolean }], selectionMode: 1, value: 1 };
  }
  static {
    this.styles = styles;
  }
  async setFocus(options) {
    return this.focusSetter(() => {
      return this.el;
    }, options);
  }
  async load() {
    this.handleColorChange(this.color);
  }
  willUpdate(changes) {
    if (changes.has("selected") && this.hasUpdated) {
      this.watchSelected(this.selected);
    }
    if (changes.has("color")) {
      this.handleColorChange(this.color);
    }
  }
  updated() {
    (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_6__.u)(this);
  }
  loaded() {
    if (this.selectionMode !== "none" && this.interactive && this.selected) {
      this.handleSelectionPropertyChange(this.selected);
    }
  }
  watchSelected(selected) {
    if (this.selectionMode === "none") {
      return;
    }
    this.handleSelectionPropertyChange(selected);
  }
  keyDownHandler(event) {
    if (event.target === this.el) {
      switch (event.key) {
        case " ":
        case "Enter":
          this.handleEmittingEvent();
          event.preventDefault();
          break;
        case "ArrowRight":
        case "ArrowLeft":
        case "Home":
        case "End":
          this.calciteInternalSwatchKeyEvent.emit(event);
          event.preventDefault();
          break;
      }
    }
  }
  handleSlotImageChange(event) {
    this.hasImage = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__.a)(event);
  }
  handleEmittingEvent() {
    if (this.interactive) {
      this.calciteSwatchSelect.emit();
    }
  }
  handleSelectionPropertyChange(selected) {
    if (this.selectionMode === "single") {
      this.calciteInternalSyncSelectedSwatches.emit();
    }
    const selectedInParent = this.parentSwatchGroup.selectedItems.includes(this.el);
    if (!selectedInParent && selected && this.selectionMode !== "multiple") {
      this.calciteInternalSwatchSelect.emit();
    }
    if (this.selectionMode !== "single") {
      this.calciteInternalSyncSelectedSwatches.emit();
    }
  }
  handleColorChange(color) {
    this.internalColor = color ? (0,color__WEBPACK_IMPORTED_MODULE_9__["default"])(color) : null;
  }
  renderSwatchImage() {
    return (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.imageContainer)}><slot name=${SLOTS.image} @slotchange=${this.handleSlotImageChange}></slot></div>`;
  }
  renderEmptyDisplay() {
    const scale = this.scale === "s" ? "12" : this.scale === "m" ? "16" : "20";
    return (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.internalSvgContainer)}><svg fill=none height=${scale} viewBox=${`0 0 ${scale} ${scale}`} width=${scale} xmlns=http://www.w3.org/2000/svg>${(0,lit__WEBPACK_IMPORTED_MODULE_2__.svg)`<path class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.internalSvgEmpty)} d=${`M${scale} 0L0 ${scale}`} />`}</svg></div>`;
  }
  renderDisabledDisplay() {
    const svgSmMdPath = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<svg fill=none height=14 viewBox="0 0 14 14" width=14 xmlns=http://www.w3.org/2000/svg>${(0,lit__WEBPACK_IMPORTED_MODULE_2__.svg)`<path class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.internalSvgDisabled)} d="M7 0.5C10.5899 0.5 13.5 3.41015 13.5 7C13.5 10.5899 10.5899 13.5 7 13.5C3.41015 13.5 0.5 10.5899 0.5 7C0.5 3.41015 3.41015 0.5 7 0.5ZM4.78906 10.917C5.44221 11.2866 6.19529 11.5 7 11.5C9.48528 11.5 11.5 9.48528 11.5 7C11.5 6.19529 11.2866 5.44221 10.917 4.78906L4.78906 10.917ZM7 2.5C4.51472 2.5 2.5 4.51472 2.5 7C2.5 7.95644 2.79808 8.84235 3.30664 9.57129L9.57129 3.30664C8.84235 2.79808 7.95644 2.5 7 2.5Z" />`}</svg>`;
    const svgLgPath = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<svg fill=none height=18 viewBox="0 0 18 18" width=18 xmlns=http://www.w3.org/2000/svg>${(0,lit__WEBPACK_IMPORTED_MODULE_2__.svg)`<path class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.internalSvgDisabled)} d="M9 0.5C13.6944 0.5 17.5 4.30558 17.5 9C17.5 13.6944 13.6944 17.5 9 17.5C4.30558 17.5 0.5 13.6944 0.5 9C0.5 4.30558 4.30558 0.5 9 0.5ZM5.78125 14.2588C6.71828 14.8337 7.81941 15.167 9 15.167C12.4058 15.167 15.167 12.4058 15.167 9C15.167 7.81941 14.8337 6.71828 14.2588 5.78125L5.78125 14.2588ZM9 2.83301C5.59424 2.83301 2.83301 5.59424 2.83301 9C2.83301 10.3817 3.28731 11.6565 4.05469 12.6846L12.6846 4.05469C11.6565 3.28731 10.3817 2.83301 9 2.83301Z" />`}</svg>`;
    return (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.internalSvgContainer)}>${this.scale === "l" ? svgLgPath : svgSmMdPath}</div>`;
  }
  renderSwatch() {
    const { internalColor } = this;
    const borderRadius = "0";
    const isEmpty = !internalColor;
    const commonSwatchProps = {
      height: "100%",
      rx: borderRadius,
      width: "100%"
    };
    if (isEmpty) {
      return (0,lit__WEBPACK_IMPORTED_MODULE_2__.svg)`<clipPath id=${IDS.shape}><rect height=100% rx=${borderRadius} width=100% /></clipPath>${this.renderSwatchRect({
        clipPath: `inset(0 round "${borderRadius}")`,
        ...commonSwatchProps
      })}<line clip-path=url(#shape) x1=100% x2=0 y1=0 y2=100% />`;
    }
    const alpha = internalColor.alpha();
    const hex = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_8__.h)(internalColor);
    const hexa = (0,_chunks_utils_js__WEBPACK_IMPORTED_MODULE_8__.h)(internalColor, alpha < 1);
    return (0,lit__WEBPACK_IMPORTED_MODULE_2__.svg)`<defs><pattern height=${CHECKER_DIMENSIONS.size} id=${IDS.checker} patternUnits=userSpaceOnUse width=${CHECKER_DIMENSIONS.size} x=0 y=0><rect class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.checker)} height=${CHECKER_DIMENSIONS.squareSize} width=${CHECKER_DIMENSIONS.squareSize} x=0 y=0 /><rect class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.checker)} height=${CHECKER_DIMENSIONS.squareSize} width=${CHECKER_DIMENSIONS.squareSize} x=${CHECKER_DIMENSIONS.squareSize} y=${CHECKER_DIMENSIONS.squareSize} /></pattern></defs>${this.renderSwatchRect({
      fill: "url(#checker)",
      rx: commonSwatchProps.rx,
      height: commonSwatchProps.height,
      width: commonSwatchProps.width
    })}${this.renderSwatchRect({
      clipPath: alpha < 1 ? "polygon(100% 0, 0 0, 0 100%)" : `inset(0 round "${borderRadius}")`,
      fill: hex,
      id: IDS.swatchSolid,
      ...commonSwatchProps
    })}${alpha < 1 ? this.renderSwatchRect({
      clipPath: "polygon(100% 0, 100% 100%, 0 100%)",
      fill: hexa,
      id: IDS.swatchTransparent,
      key: "opacity-fill",
      ...commonSwatchProps
    }) : null}`;
  }
  renderSwatchRect({ clipPath, fill, height, key, rx, stroke, strokeWidth, width, id }) {
    return (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__.keyed)(key, (0,lit__WEBPACK_IMPORTED_MODULE_2__.svg)`<rect clip-path=${clipPath ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} fill=${fill ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} height=${height ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} id=${(id ? id : IDS.swatchRect) ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} rx=${rx ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} stroke=${stroke ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} stroke-width=${strokeWidth ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} width=${width ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} />`);
  }
  render() {
    const { disabled } = this;
    const disableInteraction = disabled || !disabled && !this.interactive;
    const role = this.selectionMode === "multiple" && this.interactive ? "checkbox" : this.selectionMode !== "none" && this.interactive ? "radio" : this.interactive ? "button" : "presentation";
    const isEmpty = !this.internalColor;
    const classes = {
      [CSS.swatch]: true,
      [CSS.noColorSwatch]: isEmpty || this.hasImage && !this.internalColor
    };
    return (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_6__.I)({ disabled, children: (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div .ariaChecked=${this.selectionMode !== "none" && this.interactive ? this.selected : void 0} .ariaLabel=${role !== "presentation" ? this.label : ""} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({
      [CSS.container]: true,
      [CSS.selectable]: this.selectionMode !== "none",
      [CSS.selected]: this.selected,
      [CSS.nonInteractive]: !this.interactive
    })} @click=${this.handleEmittingEvent} .role=${role} .tabIndex=${disableInteraction ? -1 : 0} title=${this.label ?? lit__WEBPACK_IMPORTED_MODULE_2__.nothing} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.containerEl)}>${this.renderSwatchImage()}${!this.internalColor && !this.hasImage && this.renderEmptyDisplay() || ""}${this.disabled && this.renderDisabledDisplay() || ""}<svg class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(classes)} role=presentation xmlns=http://www.w3.org/2000/svg>${this.renderSwatch()}</svg></div>` });
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-swatch", Swatch);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch/index.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-swatch/index.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Swatch: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Swatch)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-swatch/customElement.js");


/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-nav/customElement.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tab-nav/customElement.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TabNav: () => (/* binding */ TabNav)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var _chunks_core_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/core.js */ "./node_modules/@esri/calcite-components/dist/chunks/core.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/useT9n.js */ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */









const ICON = {
  chevronRight: "chevron-right",
  chevronLeft: "chevron-left"
};
const CSS = {
  container: "container",
  containerHasEndTabTitleOverflow: "container--end-overflow",
  containerHasStartTabTitleOverflow: "container--start-overflow",
  scrollButton: "scroll-button",
  scrollButtonContainer: "scroll-button-container",
  scrollBackwardContainerButton: "scroll-button-container--backward",
  scrollForwardContainerButton: "scroll-button-container--forward",
  tabTitleSlotWrapper: "tab-titles-slot-wrapper",
  scale: (scale) => `scale-${scale}`,
  position: (position) => `position-${position}`
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_4__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{--calcite-internal-tab-nav-gradient-start-side: left;--calcite-internal-tab-nav-gradient-end-side: right;position:relative;display:flex}:host([bordered]):not([selected]) .container{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) calcite-button{--calcite-button-border-color: var(--calcite-tab-border-color, var(--calcite-color-border-1))}.scale-s{--calcite-internal-tab-nav-button-width: 24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-button-width: 32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-button-width: 44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side: right;--calcite-internal-tab-nav-gradient-end-side: left}.container--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%)}.container--start-overflow.container--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%),linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side),transparent,transparent var(--calcite-internal-tab-nav-button-width),white var(--calcite-internal-tab-nav-button-width),white 51%,transparent 51%)}.container::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap: var(--calcite-spacing-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap: var(--calcite-spacing-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xl)}.container,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-button-text-color: var(--calcite-tab-text-color, var(--calcite-color-text-3));--calcite-button-background-color: var(--calcite-color-transparent);--calcite-offset-invert-focus: 1;block-size:var(--calcite-container-size-content-fluid)}.scroll-button-container calcite-button:hover .scroll-button-container calcite-button:focus{--calcite-button-background-color: var(--calcite-color-transparent-hover)}.scroll-button-container calcite-button:active{--calcite-button-background-color: var(--calcite-color-transparent-press)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward:before,:host(:not([bordered])) .scroll-button-container--forward:before{background-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));opacity:.5;content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward:before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward:before{inset-inline-start:0}:host([hidden]){display:none}[hidden]{display:none}`;
class TabNav extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.LitElement {
  constructor() {
    super();
    this.effectiveDir = "ltr";
    this.lastScrollWheelAxis = "x";
    this.resizeObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_7__.c)("resize", () => {
      this.updateScrollingState();
    });
    this.makeFirstVisibleTabClosable = false;
    this.messages = (0,_chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_8__.u)();
    this.hasOverflowingEndTabTitle = false;
    this.hasOverflowingStartTabTitle = false;
    this.bordered = false;
    this.layout = "inline";
    this.position = "bottom";
    this.scale = "m";
    this.selectedTitle = null;
    this.calciteInternalTabChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.createEvent)({ cancelable: false });
    this.calciteInternalTabNavSlotChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.createEvent)();
    this.calciteTabChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.createEvent)({ cancelable: false });
    this.listen("calciteInternalTabsFocusPrevious", this.focusPreviousTabHandler);
    this.listen("calciteInternalTabsFocusNext", this.focusNextTabHandler);
    this.listen("calciteInternalTabsFocusFirst", this.focusFirstTabHandler);
    this.listen("calciteInternalTabsFocusLast", this.focusLastTabHandler);
    this.listen("calciteInternalTabsActivate", this.internalActivateTabHandler);
    this.listen("calciteInternalTabsClose", this.internalCloseTabHandler);
    this.listen("calciteInternalTabTitleRegister", this.updateTabTitles);
    this.listenOn(document.body, "calciteInternalTabChange", this.globalInternalTabChangeHandler);
  }
  static {
    this.properties = { hasOverflowingEndTabTitle: [16, {}, { state: true }], hasOverflowingStartTabTitle: [16, {}, { state: true }], selectedTabId: [16, {}, { state: true }], bordered: [7, {}, { reflect: true, type: Boolean }], layout: [3, {}, { reflect: true }], messageOverrides: [0, {}, { attribute: false }], position: 1, scale: 1, selectedTitle: [0, {}, { attribute: false }], storageId: [3, {}, { reflect: true }], syncId: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  connectedCallback() {
    super.connectedCallback();
    this.parentTabsEl = this.el.closest("calcite-tabs");
    this.resizeObserver?.observe(this.el);
  }
  async load() {
    const storageKey = `calcite-tab-nav-${this.storageId}`;
    if (localStorage && this.storageId && localStorage.getItem(storageKey)) {
      const storedTab = JSON.parse(localStorage.getItem(storageKey));
      this.selectedTabId = storedTab;
    }
  }
  willUpdate(changes) {
    if (changes.has("selectedTitle") && (this.hasUpdated || this.selectedTitle !== null)) {
      this.calciteInternalTabChange.emit({
        tab: this.selectedTabId
      });
    }
    if (changes.has("selectedTabId")) {
      this.selectedTabIdChanged();
    }
    const { parentTabsEl } = this;
    this.layout = parentTabsEl?.layout;
    this.bordered = parentTabsEl?.bordered;
    this.effectiveDir = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.g)(this.el);
  }
  loaded() {
    this.scrollTabTitleIntoView(this.selectedTitle, "instant");
    if (this.tabTitles.length && this.tabTitles.every((title) => !title.selected) && !this.selectedTabId) {
      this.tabTitles[0].getTabIdentifier().then((tab) => {
        this.calciteInternalTabChange.emit({
          tab
        });
      });
    }
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.resizeObserver?.disconnect();
  }
  get enabledTabTitles() {
    return (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.f)(this.el, "calcite-tab-title:not([disabled])").filter((tabTitle) => !tabTitle.closed);
  }
  get scrollerButtonWidth() {
    const { scale } = this;
    return parseInt(scale === "s" ? _chunks_core_js__WEBPACK_IMPORTED_MODULE_3__.c : scale === "m" ? _chunks_core_js__WEBPACK_IMPORTED_MODULE_3__.a : _chunks_core_js__WEBPACK_IMPORTED_MODULE_3__.b);
  }
  get tabTitles() {
    return (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.f)(this.el, "calcite-tab-title");
  }
  focusPreviousTabHandler(event) {
    this.handleTabFocus(event, event.target, "previous");
  }
  focusNextTabHandler(event) {
    this.handleTabFocus(event, event.target, "next");
  }
  focusFirstTabHandler(event) {
    this.handleTabFocus(event, event.target, "first");
  }
  focusLastTabHandler(event) {
    this.handleTabFocus(event, event.target, "last");
  }
  internalActivateTabHandler(event) {
    const activatedTabTitle = event.target;
    const currentSelectedTabTitle = this.selectedTitle;
    this.selectedTabId = event.detail.tab ? event.detail.tab : this.getIndexOfTabTitle(activatedTabTitle);
    event.stopPropagation();
    this.selectedTitle = activatedTabTitle;
    if (currentSelectedTabTitle?.id !== activatedTabTitle.id && event.detail.userTriggered) {
      this.calciteTabChange.emit();
    }
    this.scrollTabTitleIntoView(activatedTabTitle);
  }
  scrollTabTitleIntoView(activatedTabTitle, behavior = "smooth") {
    if (!activatedTabTitle) {
      return;
    }
    requestAnimationFrame(() => {
      const isLTR = this.effectiveDir === "ltr";
      const tabTitleContainer = this.tabTitleContainerEl;
      const containerBounds = tabTitleContainer.getBoundingClientRect();
      const tabTitleBounds = activatedTabTitle.getBoundingClientRect();
      const scrollPosition = tabTitleContainer.scrollLeft;
      const overflowingStartTabTitle = isLTR ? this.hasOverflowingStartTabTitle : this.hasOverflowingEndTabTitle;
      const overflowingEndTabTitle = isLTR ? this.hasOverflowingEndTabTitle : this.hasOverflowingStartTabTitle;
      if (tabTitleBounds.left < containerBounds.left + (overflowingStartTabTitle ? this.scrollerButtonWidth : 0)) {
        const left = scrollPosition + (tabTitleBounds.left - containerBounds.left) - this.scrollerButtonWidth;
        tabTitleContainer.scrollTo({ left, behavior });
      } else if (tabTitleBounds.right > containerBounds.right - (overflowingEndTabTitle ? this.scrollerButtonWidth : 0)) {
        const left = scrollPosition + (tabTitleBounds.right - containerBounds.right) + this.scrollerButtonWidth;
        tabTitleContainer.scrollTo({ left, behavior });
      }
    });
  }
  internalCloseTabHandler(event) {
    const closedTabTitleEl = event.target;
    this.handleTabTitleClose(closedTabTitleEl);
    event.stopPropagation();
  }
  async updateTabTitles(event) {
    if (event.target.selected) {
      this.selectedTabId = event.detail;
      this.selectedTitle = await this.getTabTitleById(this.selectedTabId);
    }
  }
  globalInternalTabChangeHandler(event) {
    if (this.syncId && event.target !== this.el && event.target.syncId === this.syncId && this.selectedTabId !== event.detail.tab) {
      this.selectedTabId = event.detail.tab;
    }
    event.stopPropagation();
  }
  async selectedTabIdChanged() {
    await this.componentOnReady();
    if (localStorage && this.storageId && this.selectedTabId !== void 0 && this.selectedTabId !== null) {
      localStorage.setItem(`calcite-tab-nav-${this.storageId}`, JSON.stringify(this.selectedTabId));
    }
    this.calciteInternalTabChange.emit({
      tab: this.selectedTabId
    });
  }
  onTabTitleWheel(event) {
    event.preventDefault();
    const { deltaX, deltaY } = event;
    const x = Math.abs(deltaX);
    const y = Math.abs(deltaY);
    let scrollBy;
    if (x === y) {
      scrollBy = this.lastScrollWheelAxis === "x" ? deltaX : deltaY;
    } else if (x > y) {
      scrollBy = deltaX;
      this.lastScrollWheelAxis = "x";
    } else {
      scrollBy = deltaY;
      this.lastScrollWheelAxis = "y";
    }
    const scrollByX = (this.effectiveDir === "rtl" ? -1 : 1) * scrollBy;
    event.currentTarget.scrollBy(scrollByX, 0);
  }
  onSlotChange() {
    this.intersectionObserver?.disconnect();
    const tabTitles = this.tabTitles;
    tabTitles.forEach((child) => {
      this.intersectionObserver?.observe(child);
    });
    const visibleTabTitlesIndices = this.getVisibleTabTitlesIndices(tabTitles);
    const totalVisibleTabTitles = visibleTabTitlesIndices.length;
    if (totalVisibleTabTitles > 1 && this.makeFirstVisibleTabClosable) {
      tabTitles[visibleTabTitlesIndices[0]].closable = true;
      this.makeFirstVisibleTabClosable = false;
    }
    this.calciteInternalTabNavSlotChange.emit(tabTitles);
  }
  storeTabTitleWrapperRef(el) {
    if (!el) {
      return;
    }
    this.tabTitleContainerEl = el;
    this.intersectionObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_7__.c)("intersection", () => this.updateScrollingState(), {
      root: el,
      threshold: [0, 0.5, 1]
    });
  }
  updateScrollingState() {
    const tabTitleContainer = this.tabTitleContainerEl;
    if (!tabTitleContainer) {
      return;
    }
    let isOverflowStart;
    let isOverflowEnd;
    const scrollPosition = tabTitleContainer.scrollLeft;
    const visibleWidth = tabTitleContainer.clientWidth;
    const totalContentWidth = tabTitleContainer.scrollWidth;
    if (this.effectiveDir === "ltr") {
      isOverflowStart = scrollPosition > 0;
      isOverflowEnd = scrollPosition + visibleWidth < totalContentWidth;
    } else {
      isOverflowStart = scrollPosition < 0;
      isOverflowEnd = scrollPosition !== -(totalContentWidth - visibleWidth);
    }
    this.hasOverflowingStartTabTitle = isOverflowStart;
    this.hasOverflowingEndTabTitle = isOverflowEnd;
  }
  scrollToTabTitles(direction) {
    requestAnimationFrame(() => {
      const tabTitleContainer = this.tabTitleContainerEl;
      const containerBounds = tabTitleContainer.getBoundingClientRect();
      const tabTitles = Array.from(this.el.querySelectorAll("calcite-tab-title"));
      const { effectiveDir } = this;
      if (direction === "forward") {
        tabTitles.reverse();
      }
      let closestToEdge = null;
      tabTitles.forEach((tabTitle) => {
        const tabTitleBounds = tabTitle.getBoundingClientRect();
        const containerEndX = containerBounds.x + containerBounds.width;
        const tabTitleEndX = tabTitleBounds.x + tabTitleBounds.width;
        if (direction === "forward" && effectiveDir === "ltr" || direction === "backward" && effectiveDir === "rtl") {
          const afterContainerEnd = tabTitleBounds.x > containerEndX;
          if (afterContainerEnd) {
            closestToEdge = tabTitle;
          } else {
            const crossingContainerEnd = tabTitleEndX > containerEndX && tabTitleBounds.x > containerBounds.x;
            if (crossingContainerEnd) {
              closestToEdge = tabTitle;
            }
          }
        } else {
          const beforeContainerStart = tabTitleEndX < containerBounds.x;
          if (beforeContainerStart) {
            closestToEdge = tabTitle;
          } else {
            const crossingContainerStart = tabTitleEndX < containerEndX && tabTitleBounds.x < containerBounds.x;
            if (crossingContainerStart) {
              closestToEdge = tabTitle;
            }
          }
        }
      });
      if (closestToEdge) {
        const { scrollerButtonWidth } = this;
        const offsetAdjustment = direction === "forward" && effectiveDir === "ltr" || direction === "backward" && effectiveDir === "rtl" ? -scrollerButtonWidth : closestToEdge.offsetWidth - tabTitleContainer.clientWidth + scrollerButtonWidth;
        const scrollTo = closestToEdge.offsetLeft + offsetAdjustment;
        tabTitleContainer.scrollTo({
          left: scrollTo,
          behavior: "smooth"
        });
      }
    });
  }
  scrollToNextTabTitles() {
    this.scrollToTabTitles("forward");
  }
  scrollToPreviousTabTitles() {
    this.scrollToTabTitles("backward");
  }
  handleTabFocus(event, el, destination) {
    const focused = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_6__.d)(this.enabledTabTitles, el, destination);
    this.scrollTabTitleIntoView(focused, "instant");
    event.stopPropagation();
  }
  getIndexOfTabTitle(el, tabTitles = this.tabTitles) {
    return tabTitles.indexOf(el);
  }
  onTabTitleScroll() {
    this.updateScrollingState();
  }
  async getTabTitleById(id) {
    return Promise.all(this.tabTitles.map((el) => el.getTabIdentifier())).then((ids) => {
      return this.tabTitles[ids.indexOf(id)];
    });
  }
  getVisibleTabTitlesIndices(tabTitles) {
    return tabTitles.reduce((tabTitleIndices, tabTitle, index) => !tabTitle.closed ? [...tabTitleIndices, index] : tabTitleIndices, []);
  }
  handleTabTitleClose(closedTabTitleEl) {
    const { tabTitles } = this;
    const selectionModified = closedTabTitleEl.selected;
    const visibleTabTitlesIndices = this.getVisibleTabTitlesIndices(tabTitles);
    const totalVisibleTabTitles = visibleTabTitlesIndices.length;
    if (totalVisibleTabTitles === 1 && tabTitles[visibleTabTitlesIndices[0]].closable) {
      this.makeFirstVisibleTabClosable = true;
      tabTitles[visibleTabTitlesIndices[0]].closable = false;
      this.selectedTabId = visibleTabTitlesIndices[0];
      if (selectionModified) {
        tabTitles[visibleTabTitlesIndices[0]].activateTab();
      }
    } else if (totalVisibleTabTitles > 1) {
      const closedTabTitleIndex = tabTitles.findIndex((el) => el === closedTabTitleEl);
      const nextTabTitleIndex = visibleTabTitlesIndices.find((value) => value > closedTabTitleIndex);
      if (this.selectedTabId === closedTabTitleIndex) {
        this.selectedTabId = nextTabTitleIndex ? nextTabTitleIndex : totalVisibleTabTitles - 1;
        tabTitles[this.selectedTabId].activateTab();
      }
    }
    requestAnimationFrame(() => {
      tabTitles[this.selectedTabId].focus();
    });
  }
  render() {
    this.el.role = "tablist";
    return (0,lit__WEBPACK_IMPORTED_MODULE_4__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.safeClassMap)({
      [CSS.container]: true,
      [CSS.containerHasStartTabTitleOverflow]: !!this.hasOverflowingStartTabTitle,
      [CSS.containerHasEndTabTitleOverflow]: !!this.hasOverflowingEndTabTitle,
      [CSS.scale(this.scale)]: true,
      [CSS.position(this.position)]: true,
      [_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.C.rtl]: this.effectiveDir === "rtl"
    })}>${this.renderScrollButton("start")}<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.safeClassMap)({
      [CSS.tabTitleSlotWrapper]: true
    })} @scroll=${this.onTabTitleScroll} @wheel=${this.onTabTitleWheel} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_1__.ref)(this.storeTabTitleWrapperRef)}><slot @slotchange=${this.onSlotChange}></slot></div>${this.renderScrollButton("end")}</div>`;
  }
  renderScrollButton(overflowDirection) {
    const { bordered, messages, hasOverflowingStartTabTitle, hasOverflowingEndTabTitle, scale } = this;
    const isEnd = overflowDirection === "end";
    return (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_2__.keyed)(overflowDirection, (0,lit__WEBPACK_IMPORTED_MODULE_4__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.safeClassMap)({
      [CSS.scrollButtonContainer]: true,
      [CSS.scrollBackwardContainerButton]: !isEnd,
      [CSS.scrollForwardContainerButton]: isEnd
    })} .hidden=${isEnd && !hasOverflowingEndTabTitle || !isEnd && !hasOverflowingStartTabTitle}><calcite-button .appearance=${bordered ? "outline-fill" : "transparent"} .ariaLabel=${isEnd ? messages.nextTabTitles : messages.previousTabTitles} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.safeClassMap)({
      [CSS.scrollButton]: true
    })} icon-flip-rtl=both .iconStart=${isEnd ? ICON.chevronRight : ICON.chevronLeft} kind=neutral @click=${isEnd ? this.scrollToNextTabTitles : this.scrollToPreviousTabTitles} .scale=${scale} tabindex=-1></calcite-button></div>`);
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-tab-nav", TabNav);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-nav/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tab-nav/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TabNav: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_1__.TabNav)
/* harmony export */ });
/* harmony import */ var _calcite_button_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-button/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-button/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-nav/customElement.js");



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-title/customElement.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tab-title/customElement.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TabTitle: () => (/* binding */ TabTitle)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_guid_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/guid.js */ "./node_modules/@esri/calcite-components/dist/chunks/guid.js");
/* harmony import */ var _chunks_interactive_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/interactive.js */ "./node_modules/@esri/calcite-components/dist/chunks/interactive.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_component_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../chunks/component.js */ "./node_modules/@esri/calcite-components/dist/chunks/component.js");
/* harmony import */ var _chunks_XButton_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../chunks/XButton.js */ "./node_modules/@esri/calcite-components/dist/chunks/XButton.js");
/* harmony import */ var _chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../chunks/useT9n.js */ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */












const CSS = {
  container: "container",
  containerBottom: "container--bottom",
  content: "content",
  contentHasText: "content--has-text",
  iconEnd: "icon-end",
  iconPresent: "icon-present",
  iconStart: "icon-start",
  titleIcon: "calcite-tab-title--icon",
  scale: (scale) => `scale-${scale}`,
  selectedIndicator: "selected-indicator"
};
const idPrefix = "calcite-tab-title";
const IDS = {
  host: (id) => `${idPrefix}-${id}`
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_2__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px}:host([layout=inline]){flex:0 1 auto}:host([layout=center]){flex:1 1 auto}.content{position:relative;margin-block-end:.125rem;box-sizing:border-box;display:flex;block-size:100%;align-items:center;justify-content:center}.scale-s .content{padding-block:.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}.scale-s .x-button{inline-size:1.25rem}.scale-m .content{padding-block:.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}.scale-m .x-button{inline-size:1.75rem}.scale-l .content{padding-block:.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.scale-l .x-button{inline-size:2rem}:host([closable]) .content{border-block-end-color:transparent}:host([layout=inline]) .content,:host([layout=center]) .content{padding-inline:.25rem}:host([layout=center]) .scale-s,:host([layout=center]) .scale-m,:host([layout=center]) .scale-l{margin-block:0px;justify-content:center;text-align:center}:host([layout=center]) .scale-s .content,:host([layout=center]) .scale-m .content,:host([layout=center]) .scale-l .content{flex:1 1 auto;flex-grow:1}.container{position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;align-content:center;justify-content:space-between;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-background-color, transparent)}.selected-indicator{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:0;inset-inline-start:0;inset-inline-end:0;inline-size:100%}:host([bordered][selected]) .container:after{position:absolute;display:block;block-size:.125rem;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;inset-block-end:-1px;inset-inline-start:0;inset-inline-end:0;inline-size:100%;content:""}:host([bordered][selected]) .container.container--bottom:after{inset-block-start:-1px}:host([bordered][selected]:focus) .container:after{background:transparent}.container--bottom .selected-indicator{inset-block-end:unset;inset-block-start:0}:host(:not([bordered])) .container:hover,:host(:not([bordered])) .container:active{color:var(--calcite-color-text-1)}:host([bordered]:not([selected]):hover:not(:focus)) .selected-indicator{background-color:var(--calcite-color-foreground-2)}:host([bordered]:not([selected]):hover:not(:focus)) .container:not(.container--bottom) .selected-indicator{box-shadow:inset 0 1px var(--calcite-color-border-1)}:host([bordered]:not([selected]):hover:not(:focus)) .container.container--bottom .selected-indicator{box-shadow:inset 0 -1px var(--calcite-color-border-1)}:host([selected]:focus) .selected-indicator{block-size:4px}.calcite-tab-title--icon{position:relative;margin:0;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out}.content--has-text .icon-start,.content--has-text .calcite-tab-title--icon.icon-start{color:var(--calcite-tab-icon-color-start, var(--calcite-icon-color))}.content--has-text .calcite-tab-title--icon.icon-start .icon-end,.content--has-text .calcite-tab-title--icon.icon-end{color:var(--calcite-tab-icon-color-end, var(--calcite-icon-color))}.content--has-text{padding:.25rem}.content--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:var(--calcite-spacing-sm)}.content--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:var(--calcite-spacing-sm)}.x-button{display:flex;block-size:100%;cursor:pointer;appearance:none;align-content:center;align-items:center;justify-content:center;align-self:center;border-style:none;background-color:transparent;transition-property:background-color,block-size,border-color,box-shadow,color,inset-block-end,inset-block-start,inset-inline-end,inset-inline-start,inset-size,opacity,outline-color,transform;transition-duration:var(--calcite-animation-timing);transition-timing-function:ease-in-out;outline-color:transparent;margin-inline-start:var(--calcite-spacing-sm);margin-inline-end:var(--calcite-spacing-px);block-size:calc(100% - var(--calcite-spacing-xxs));color:var(--calcite-tab-close-icon-color, var(--calcite-color-text-3));background-color:var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}.x-button:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus)}.x-button:focus,.x-button:hover,.x-button:active{color:var(--calcite-tab-close-icon-color-press, var(--calcite-color-text-1));background-color:var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container{border-color:transparent;border-inline-width:var(--calcite-spacing-px);border-inline-style:solid}:host([bordered]) .container:hover,:host([bordered]) .container:active{color:var(--calcite-color-text-1)}:host([bordered]) .container .x-button calcite-icon{margin-block-start:var(--calcite-spacing-px)}:host([bordered]) .container .x-button:focus,:host([bordered]) .container .x-button:hover,:host([bordered]) .container .x-button:active{box-shadow:0 2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom{border-block-start-style:solid;border-block-start-width:1px}:host([bordered]) .container.container--bottom .selected-indicator{inset-block-start:unset;inset-block-end:0}:host([bordered]) .container.container--bottom .x-button{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color, var(--calcite-color-transparent))}:host([bordered]) .container.container--bottom .x-button:focus,:host([bordered]) .container.container--bottom .x-button:hover,:host([bordered]) .container.container--bottom .x-button:active{box-shadow:0 -2px 0 0 var(--calcite-tab-close-icon-background-color-press, var(--calcite-color-foreground-3))}:host([bordered]) .container.container--bottom .x-button calcite-icon{margin-block-end:var(--calcite-spacing-px)}:host([bordered]) .container:not(.container--bottom){border-block-end-style:solid;border-block-end-width:1px}:host([bordered]) .container:not(.container--bottom) .x-button{block-size:calc(100% - var(--calcite-spacing-px));margin-block-start:-1px}:host([bordered]) .container .selected-indicator{inset-block-start:0;inset-block-end:unset;inset-inline-start:-1px;inset-inline-end:0;inline-size:calc(100% + var(--calcite-spacing-base))}:host([bordered]) .container:host(:not([selected])) .container .x-button{box-shadow:0 2px 0 0 transparent}:host([bordered]) .container:host(:not([selected])):host(:hover) .container:not(.container--bottom){border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .selected-indicator{box-shadow:inset 0 var(--calcite-internal-tab-shadow-length) var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) :not(.container--bottom){--calcite-internal-tab-shadow-length: 1px}:host([bordered]) .container:host(:not([selected])):host(:hover):host(:not(:focus)) .container--bottom{--calcite-internal-tab-shadow-length: -1px}:host([bordered]) .container:hover{background-color:var(--calcite-tab-background-color-hover, var(--calcite-color-foreground-2));border-block-end-color:var(--calcite-color-border-1)}:host(:hover) .selected-indicator{background-color:var(--calcite-color-border-3)}:host([selected]) .selected-indicator,:host([selected]:hover) .selected-indicator,:host(:focus) .selected-indicator,:host(:active) .selected-indicator{background-color:var(--calcite-tab-accent-color-press, var(--calcite-color-brand))}:host([closed]){display:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-tab-text-color, var(--calcite-color-text-1))}:host([selected][bordered]) .container{border-inline-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([selected][bordered]) .container:after{background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([selected][bordered]) .container:hover,:host([selected][bordered]) .container:active{background:transparent}:host(:focus) .container{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host(:focus) .container:focus-within{outline-color:transparent}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:var(--calcite-spacing-sm)}:host([layout=inline][bordered]) .scale-m .content,:host([layout=center][bordered]) .scale-m .content{padding-inline:.75rem}:host([layout=inline][bordered]) .scale-s .content,:host([layout=center][bordered]) .scale-s .content{padding-inline:.5rem}:host([layout=inline][bordered]) .scale-l .content,:host([layout=center][bordered]) .scale-l .content{padding-inline:1rem}:host([layout=inline][closable]) .scale-s .content,:host([layout=inline][closable]) .scale-m .content,:host([layout=inline][closable]) .scale-l .content{padding-inline-end:0}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][selected]) .container--bottom{border-block-start-style:none}.x-button{z-index:var(--calcite-z-index)}.selected-indicator{background-color:highlight}}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) .container{pointer-events:none;opacity:.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}`;
class TabTitle extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.LitElement {
  constructor() {
    super();
    this.closeButtonRef = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.guid = IDS.host((0,_chunks_guid_js__WEBPACK_IMPORTED_MODULE_6__.g)());
    this.mutationObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_8__.c)("mutation", () => this.updateHasText());
    this.resizeObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_8__.c)("resize", () => {
      this.calciteInternalTabIconChanged.emit();
    });
    this.messages = (0,_chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_11__.u)();
    this.hasText = false;
    this.bordered = false;
    this.closable = false;
    this.closed = false;
    this.disabled = false;
    this.position = "top";
    this.scale = "m";
    this.selected = false;
    this.calciteInternalTabIconChanged = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabTitleRegister = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabsActivate = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabsClose = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabsFocusFirst = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabsFocusLast = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabsFocusNext = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteInternalTabsFocusPrevious = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteTabsActivate = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.calciteTabsClose = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)({ cancelable: false });
    this.listenOn(document.body, "calciteInternalTabChange", this.internalTabChangeHandler);
    this.listen("click", this.onClick);
    this.listen("keydown", this.keyDownHandler);
  }
  static {
    this.properties = { controls: [16, {}, { state: true }], hasText: [16, {}, { state: true }], bordered: [7, {}, { reflect: true, type: Boolean }], closable: [7, {}, { reflect: true, type: Boolean }], closed: [7, {}, { reflect: true, type: Boolean }], disabled: [7, {}, { reflect: true, type: Boolean }], iconEnd: [3, {}, { reflect: true }], iconFlipRtl: [3, {}, { reflect: true }], iconStart: [3, {}, { reflect: true }], layout: [3, {}, { reflect: true }], messageOverrides: [0, {}, { attribute: false }], position: 1, scale: 1, selected: [7, {}, { reflect: true, type: Boolean }], tab: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  async activateTab(userTriggered = true) {
    if (this.disabled || this.closed) {
      return;
    }
    const payload = { tab: this.tab, userTriggered };
    this.calciteInternalTabsActivate.emit(payload);
    if (userTriggered) {
      requestAnimationFrame(() => this.calciteTabsActivate.emit());
    }
  }
  async getTabIdentifier() {
    return this.tab ? this.tab : this.getTabIndex();
  }
  async getTabIndex() {
    return Array.prototype.indexOf.call((0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__.n)(this.el.parentElement.children).filter((el) => el.matches("calcite-tab-title")), this.el);
  }
  _updateAriaInfo(tabIds = [], titleIds = []) {
    this.controls = tabIds[titleIds.indexOf(this.el.id)] || null;
  }
  connectedCallback() {
    super.connectedCallback();
    this.setupTextContentObserver();
    this.parentTabsEl = this.el.closest("calcite-tabs");
  }
  async load() {
    if (!lit__WEBPACK_IMPORTED_MODULE_2__.isServer) {
      this.updateHasText();
    }
    if (this.tab && this.selected) {
      this.activateTab(false);
    }
  }
  willUpdate(changes) {
    if (changes.has("selected") && (this.hasUpdated || this.selected !== false)) {
      this.selectedHandler();
    }
    if (this.parentTabsEl) {
      this.layout = this.parentTabsEl.layout;
      this.bordered = this.parentTabsEl.bordered;
    }
  }
  updated() {
    (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_7__.u)(this);
  }
  async loaded() {
    this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier());
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.mutationObserver?.disconnect();
    document.body?.dispatchEvent(new CustomEvent("calciteTabTitleUnregister", {
      detail: this.el
    }));
    this.resizeObserver?.disconnect();
  }
  selectedHandler() {
    if (this.selected) {
      this.activateTab(false);
    }
  }
  internalTabChangeHandler(event) {
    const targetTabsEl = event.composedPath().find((el) => el.tagName === "CALCITE-TABS");
    if (targetTabsEl !== this.parentTabsEl) {
      return;
    }
    if (this.tab) {
      this.selected = this.tab === event.detail.tab;
    } else {
      this.getTabIndex().then((index) => {
        this.selected = index === event.detail.tab;
      });
    }
    event.stopPropagation();
  }
  onClick() {
    this.activateTab();
  }
  keyDownHandler(event) {
    switch (event.key) {
      case " ":
      case "Enter":
        if (!event.composedPath().includes(this.closeButtonRef.value)) {
          this.activateTab();
          event.preventDefault();
        }
        break;
      case "ArrowRight":
        event.preventDefault();
        if ((0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.el) === "ltr") {
          this.calciteInternalTabsFocusNext.emit();
        } else {
          this.calciteInternalTabsFocusPrevious.emit();
        }
        break;
      case "ArrowLeft":
        event.preventDefault();
        if ((0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__.g)(this.el) === "ltr") {
          this.calciteInternalTabsFocusPrevious.emit();
        } else {
          this.calciteInternalTabsFocusNext.emit();
        }
        break;
      case "Home":
        event.preventDefault();
        this.calciteInternalTabsFocusFirst.emit();
        break;
      case "End":
        event.preventDefault();
        this.calciteInternalTabsFocusLast.emit();
        break;
    }
  }
  closeClickHandler() {
    this.closeTabTitleAndNotify();
  }
  updateHasText() {
    this.hasText = this.el.textContent.trim().length > 0;
  }
  setContainerRef(el) {
    (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_8__.u)(this.resizeObserver, this.containerEl, el);
    this.containerEl = el;
  }
  setupTextContentObserver() {
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
  }
  closeTabTitleAndNotify() {
    this.closed = true;
    this.calciteInternalTabsClose.emit({ tab: this.tab });
    this.calciteTabsClose.emit();
  }
  render() {
    const { el, closed } = this;
    const id = el.id || this.guid;
    const iconStartEl = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<calcite-icon class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [CSS.titleIcon]: true, [CSS.iconStart]: true })} .flipRtl=${this.iconFlipRtl === "start" || this.iconFlipRtl === "both"} .icon=${this.iconStart} .scale=${(0,_chunks_component_js__WEBPACK_IMPORTED_MODULE_9__.g)(this.scale)}></calcite-icon>`;
    const iconEndEl = (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<calcite-icon class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [CSS.titleIcon]: true, [CSS.iconEnd]: true })} .flipRtl=${this.iconFlipRtl === "end" || this.iconFlipRtl === "both"} .icon=${this.iconEnd} .scale=${(0,_chunks_component_js__WEBPACK_IMPORTED_MODULE_9__.g)(this.scale)}></calcite-icon>`;
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.setAttribute)(this.el, "aria-controls", this.controls);
    this.el.ariaSelected = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_5__.t)(this.selected);
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.setAttribute)(this.el, "id", id);
    this.el.role = "tab";
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.setAttribute)(this.el, "tabIndex", this.selected && !this.disabled ? 0 : -1);
    return (0,_chunks_interactive_js__WEBPACK_IMPORTED_MODULE_7__.I)({ disabled: this.disabled, children: (0,lit__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({
      [CSS.container]: true,
      [CSS.containerBottom]: this.position === "bottom",
      [CSS.iconPresent]: !!this.iconStart || !!this.iconEnd,
      [CSS.scale(this.scale)]: true
    })} .hidden=${closed} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.setContainerRef)}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)({ [CSS.content]: true, [CSS.contentHasText]: this.hasText })}>${this.iconStart ? iconStartEl : null}<slot></slot>${this.iconEnd ? iconEndEl : null}</div>${this.renderCloseButton()}<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.safeClassMap)(CSS.selectedIndicator)}></div></div>` });
  }
  renderCloseButton() {
    const { closable, messages } = this;
    return closable ? (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__.keyed)("close-button", (0,_chunks_XButton_js__WEBPACK_IMPORTED_MODULE_10__.X)({ disabled: false, focusable: true, label: messages.close, onClick: this.closeClickHandler, ref: this.closeButtonRef, round: false, scale: this.scale, title: messages.close })) : null;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-tab-title", TabTitle);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-title/index.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tab-title/index.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TabTitle: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_1__.TabTitle)
/* harmony export */ });
/* harmony import */ var _calcite_icon_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-icon/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tab-title/customElement.js");



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tab/customElement.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tab/customElement.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tab: () => (/* binding */ Tab)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_guid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/guid.js */ "./node_modules/@esri/calcite-components/dist/chunks/guid.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */





const CSS = {
  container: "container",
  content: "content",
  scale: (scale) => `scale-${scale}`
};
const IDS = {
  tabTitleId: (id) => `calcite-tab-title-${id}`
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:none}:host,.container,.content{block-size:100%;inline-size:100%}:host([selected]),:host([selected]) .container{display:flex;flex-direction:column}.content{box-sizing:border-box;padding-block:var(--calcite-tab-content-space-y, var(--calcite-tab-content-block-padding, var(--calcite-internal-tab-content-space-y)))}.scale-s{--calcite-internal-tab-content-space-y: .25rem;font-size:var(--calcite-font-size-sm);line-height:1rem}.scale-m{--calcite-internal-tab-content-space-y: .5rem;font-size:var(--calcite-font-size);line-height:1rem}.scale-l{--calcite-internal-tab-content-space-y: .625rem;font-size:var(--calcite-font-size-md);line-height:1.25rem}.container{display:none;block-size:100%;inline-size:100%;overflow:auto;outline-color:transparent}.container:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}:host([hidden]){display:none}[hidden]{display:none}`;
class Tab extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super();
    this.guid = IDS.tabTitleId((0,_chunks_guid_js__WEBPACK_IMPORTED_MODULE_4__.g)());
    this.scale = "m";
    this.selected = false;
    this.listenOn(document.body, "calciteInternalTabChange", this.internalTabChangeHandler);
  }
  static {
    this.properties = { labeledBy: [16, {}, { state: true }], scale: 1, selected: [7, {}, { reflect: true, type: Boolean }], tab: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  async getTabIndex() {
    return Array.prototype.indexOf.call((0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.n)(this.el.parentElement.children).filter((el) => el.matches("calcite-tab")), this.el);
  }
  _updateAriaInfo(tabIds = [], titleIds = []) {
    this.labeledBy = titleIds[tabIds.indexOf(this.el.id)] || null;
  }
  connectedCallback() {
    super.connectedCallback();
    this.parentTabsEl = this.el.closest("calcite-tabs");
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    document.body?.dispatchEvent(new CustomEvent("calciteTabUnregister", {
      detail: this.el
    }));
  }
  internalTabChangeHandler(event) {
    const targetTabsEl = event.composedPath().find((el) => el.tagName === "CALCITE-TABS");
    if (targetTabsEl !== this.parentTabsEl) {
      return;
    }
    if (this.tab) {
      this.selected = this.tab === event.detail.tab;
    } else {
      this.getTabIndex().then((index) => {
        this.selected = index === event.detail.tab;
      });
    }
    event.stopPropagation();
  }
  render() {
    const id = this.el.id || this.guid;
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.setAttribute)(this.el, "aria-labelledby", this.labeledBy);
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.setAttribute)(this.el, "id", id);
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)({ [CSS.container]: true, [CSS.scale(this.scale)]: true })} role=tabpanel .tabIndex=${this.selected ? 0 : -1}><section class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.content)}><slot></slot></section></div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-tab", Tab);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tab/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tab/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tab: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Tab)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tab/customElement.js");


/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tabs/customElement.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tabs/customElement.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tabs: () => (/* binding */ Tabs)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */





const CSS = {
  section: "section"
};
const SLOTS = {
  titleGroup: "title-group"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1));background-color:var(--calcite-tab-background-color, var(--calcite-color-foreground-1))}:host([bordered]) section{border-color:var(--calcite-tab-border-color, var(--calcite-color-border-1));border-style:solid}section{display:flex;flex-grow:1;overflow:hidden;border-width:1px;border-block-start-style:solid;border-block-start-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1)),inset 0 -1px 0 var(--calcite-tab-border-color, var(--calcite-color-border-1))}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([position=bottom]){flex-direction:column-reverse}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px}:host([bordered][scale=s]) section{padding:.75rem}:host([bordered][scale=m]) section{padding:.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid;border-block-end-color:var(--calcite-tab-border-color, var(--calcite-color-border-1))}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}:host([hidden]){display:none}[hidden]{display:none}`;
class Tabs extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super();
    this.slotRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.tabs = [];
    this.titles = [];
    this.bordered = false;
    this.layout = "inline";
    this.position = "top";
    this.scale = "m";
    this.listen("calciteInternalTabNavSlotChange", this.calciteInternalTabNavSlotChangeHandler);
  }
  static {
    this.properties = { tabs: [16, {}, { state: true }], titles: [16, {}, { state: true }], bordered: [5, {}, { type: Boolean }], layout: [3, {}, { reflect: true }], position: [3, {}, { reflect: true }], scale: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  connectedCallback() {
    super.connectedCallback();
    this.updateItems();
  }
  load() {
    this.updateItems();
  }
  willUpdate(changes) {
    if (changes.has("position") && (this.hasUpdated || this.position !== "top") || changes.has("scale") && (this.hasUpdated || this.scale !== "m")) {
      this.updateItems();
    }
    if ((changes.has("titles") || changes.has("tabs")) && this.hasUpdated && this.titles?.length > 0 && this.tabs?.length > 0) {
      this.updateAriaSettings();
      this.updateItems();
    }
  }
  calciteInternalTabNavSlotChangeHandler(event) {
    event.stopPropagation();
    if (event.detail.length !== this.titles.length) {
      this.titles = event.detail;
    }
  }
  defaultSlotChangeHandler(event) {
    this.tabs = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.s)(event, "calcite-tab");
  }
  async updateAriaSettings() {
    await this.componentOnReady();
    if (!this.slotRef.value) {
      return;
    }
    let tabIds;
    let titleIds;
    const tabs = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.e)(this.slotRef.value, "calcite-tab");
    if (tabs.some((el) => el.tab) || this.titles.some((el) => el.tab)) {
      tabIds = tabs.sort((a, b) => a.tab.localeCompare(b.tab)).map((el) => el.id);
      titleIds = this.titles.sort((a, b) => a.tab.localeCompare(b.tab)).map((el) => el.id);
    } else {
      const tabDomIndexes = await Promise.all(tabs.map((el) => el.getTabIndex()));
      const titleDomIndexes = await Promise.all(this.titles.map((el) => el.getTabIndex()));
      tabIds = tabDomIndexes.reduce((ids, indexInDOM, registryIndex) => {
        ids[indexInDOM] = tabs[registryIndex].id;
        return ids;
      }, []);
      titleIds = titleDomIndexes.reduce((ids, indexInDOM, registryIndex) => {
        ids[indexInDOM] = this.titles[registryIndex].id;
        return ids;
      }, []);
    }
    tabs.forEach((el) => el._updateAriaInfo(tabIds, titleIds));
    this.titles.forEach((el) => el._updateAriaInfo(tabIds, titleIds));
  }
  updateItems() {
    const { position, scale } = this;
    const nav = this.el.querySelector("calcite-tab-nav");
    if (nav) {
      nav.position = position;
      nav.scale = scale;
    }
    Array.from(this.el.querySelectorAll("calcite-tab")).forEach((tab) => {
      if (tab.parentElement === this.el) {
        tab.scale = scale;
      }
    });
    Array.from(this.el.querySelectorAll("calcite-tab-nav > calcite-tab-title")).forEach((title) => {
      title.position = position;
      title.scale = scale;
    });
  }
  render() {
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<slot name=${SLOTS.titleGroup}></slot><section class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.section)}><slot @slotchange=${this.defaultSlotChangeHandler} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.slotRef)}></slot></section>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-tabs", Tabs);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tabs/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tabs/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tabs: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Tabs)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tabs/customElement.js");


/***/ }),

/***/ "./node_modules/color-string/index.js":
/*!********************************************!*\
  !*** ./node_modules/color-string/index.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var color_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color-name */ "./node_modules/color-string/node_modules/color-name/index.js");


const reverseNames = Object.create(null);

// Create a list of reverse color names
for (const name in color_name__WEBPACK_IMPORTED_MODULE_0__["default"]) {
	if (Object.hasOwn(color_name__WEBPACK_IMPORTED_MODULE_0__["default"], name)) {
		reverseNames[color_name__WEBPACK_IMPORTED_MODULE_0__["default"][name]] = name;
	}
}

const cs = {
	to: {},
	get: {},
};

cs.get = function (string) {
	const prefix = string.slice(0, 3).toLowerCase();
	let value;
	let model;
	switch (prefix) {
		case 'hsl': {
			value = cs.get.hsl(string);
			model = 'hsl';
			break;
		}

		case 'hwb': {
			value = cs.get.hwb(string);
			model = 'hwb';
			break;
		}

		default: {
			value = cs.get.rgb(string);
			model = 'rgb';
			break;
		}
	}

	if (!value) {
		return null;
	}

	return {model, value};
};

cs.get.rgb = function (string) {
	if (!string) {
		return null;
	}

	const abbr = /^#([a-f\d]{3,4})$/i;
	const hex = /^#([a-f\d]{6})([a-f\d]{2})?$/i;
	const rgba = /^rgba?\(\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)(?=[\s,])\s*(?:,\s*)?([+-]?(?:\d*\.)?\d+(?:e\d+)?)\s*(?:[\s,|/]\s*([+-]?(?:\d*\.)?\d+(?:e\d+)?)(%?)\s*)?\)$/i;
	const per = /^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/i;
	const keyword = /^(\w+)$/;

	let rgb = [0, 0, 0, 1];
	let match;
	let i;
	let hexAlpha;

	if (match = string.match(hex)) {
		hexAlpha = match[2];
		match = match[1];

		for (i = 0; i < 3; i++) {
			// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19
			const i2 = i * 2;
			rgb[i] = Number.parseInt(match.slice(i2, i2 + 2), 16);
		}

		if (hexAlpha) {
			rgb[3] = Number.parseInt(hexAlpha, 16) / 255;
		}
	} else if (match = string.match(abbr)) {
		match = match[1];
		hexAlpha = match[3];

		for (i = 0; i < 3; i++) {
			rgb[i] = Number.parseInt(match[i] + match[i], 16);
		}

		if (hexAlpha) {
			rgb[3] = Number.parseInt(hexAlpha + hexAlpha, 16) / 255;
		}
	} else if (match = string.match(rgba)) {
		for (i = 0; i < 3; i++) {
			rgb[i] = Number.parseFloat(match[i + 1]);
		}

		if (match[4]) {
			rgb[3] = match[5] ? Number.parseFloat(match[4]) * 0.01 : Number.parseFloat(match[4]);
		}
	} else if (match = string.match(per)) {
		for (i = 0; i < 3; i++) {
			rgb[i] = Math.round(Number.parseFloat(match[i + 1]) * 2.55);
		}

		if (match[4]) {
			rgb[3] = match[5] ? Number.parseFloat(match[4]) * 0.01 : Number.parseFloat(match[4]);
		}
	} else if (match = string.toLowerCase().match(keyword)) {
		if (match[1] === 'transparent') {
			return [0, 0, 0, 0];
		}

		if (!Object.hasOwn(color_name__WEBPACK_IMPORTED_MODULE_0__["default"], match[1])) {
			return null;
		}

		// eslint-disable-next-line unicorn/prefer-spread
		rgb = color_name__WEBPACK_IMPORTED_MODULE_0__["default"][match[1]].slice();
		rgb[3] = 1;

		return rgb;
	} else {
		return null;
	}

	for (i = 0; i < 3; i++) {
		rgb[i] = clamp(rgb[i], 0, 255);
	}

	rgb[3] = clamp(rgb[3], 0, 1);

	return rgb;
};

cs.get.hsl = function (string) {
	if (!string) {
		return null;
	}

	const hsl = /^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i;
	const match = string.match(hsl);

	if (match) {
		const alpha = Number.parseFloat(match[4]);
		const h = ((Number.parseFloat(match[1]) % 360) + 360) % 360;
		const s = clamp(Number.parseFloat(match[2]), 0, 100);
		const l = clamp(Number.parseFloat(match[3]), 0, 100);
		const a = clamp(Number.isNaN(alpha) ? 1 : alpha, 0, 1);

		return [h, s, l, a];
	}

	return null;
};

cs.get.hwb = function (string) {
	if (!string) {
		return null;
	}

	const hwb = /^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:e[+-]?\d+)?)\s*)?\)$/i;
	const match = string.match(hwb);

	if (match) {
		const alpha = Number.parseFloat(match[4]);
		const h = ((Number.parseFloat(match[1]) % 360) + 360) % 360;
		const w = clamp(Number.parseFloat(match[2]), 0, 100);
		const b = clamp(Number.parseFloat(match[3]), 0, 100);
		const a = clamp(Number.isNaN(alpha) ? 1 : alpha, 0, 1);
		return [h, w, b, a];
	}

	return null;
};

cs.to.hex = function (...rgba) {
	return (
		'#' +
		hexDouble(rgba[0]) +
		hexDouble(rgba[1]) +
		hexDouble(rgba[2]) +
		(rgba[3] < 1
			? (hexDouble(Math.round(rgba[3] * 255)))
			: '')
	);
};

cs.to.rgb = function (...rgba) {
	return rgba.length < 4 || rgba[3] === 1
		? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'
		: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';
};

cs.to.rgb.percent = function (...rgba) {
	const r = Math.round(rgba[0] / 255 * 100);
	const g = Math.round(rgba[1] / 255 * 100);
	const b = Math.round(rgba[2] / 255 * 100);

	return rgba.length < 4 || rgba[3] === 1
		? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'
		: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';
};

cs.to.hsl = function (...hsla) {
	return hsla.length < 4 || hsla[3] === 1
		? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'
		: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';
};

// Hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax
// (hwb have alpha optional & 1 is default value)
cs.to.hwb = function (...hwba) {
	let a = '';
	if (hwba.length >= 4 && hwba[3] !== 1) {
		a = ', ' + hwba[3];
	}

	return 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';
};

cs.to.keyword = function (...rgb) {
	return reverseNames[rgb.slice(0, 3)];
};

// Helpers
function clamp(number_, min, max) {
	return Math.min(Math.max(min, number_), max);
}

function hexDouble(number_) {
	const string_ = Math.round(number_).toString(16).toUpperCase();
	return (string_.length < 2) ? '0' + string_ : string_;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (cs);


/***/ }),

/***/ "./node_modules/color-string/node_modules/color-name/index.js":
/*!********************************************************************!*\
  !*** ./node_modules/color-string/node_modules/color-name/index.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const colors = {
	aliceblue: [240, 248, 255],
	antiquewhite: [250, 235, 215],
	aqua: [0, 255, 255],
	aquamarine: [127, 255, 212],
	azure: [240, 255, 255],
	beige: [245, 245, 220],
	bisque: [255, 228, 196],
	black: [0, 0, 0],
	blanchedalmond: [255, 235, 205],
	blue: [0, 0, 255],
	blueviolet: [138, 43, 226],
	brown: [165, 42, 42],
	burlywood: [222, 184, 135],
	cadetblue: [95, 158, 160],
	chartreuse: [127, 255, 0],
	chocolate: [210, 105, 30],
	coral: [255, 127, 80],
	cornflowerblue: [100, 149, 237],
	cornsilk: [255, 248, 220],
	crimson: [220, 20, 60],
	cyan: [0, 255, 255],
	darkblue: [0, 0, 139],
	darkcyan: [0, 139, 139],
	darkgoldenrod: [184, 134, 11],
	darkgray: [169, 169, 169],
	darkgreen: [0, 100, 0],
	darkgrey: [169, 169, 169],
	darkkhaki: [189, 183, 107],
	darkmagenta: [139, 0, 139],
	darkolivegreen: [85, 107, 47],
	darkorange: [255, 140, 0],
	darkorchid: [153, 50, 204],
	darkred: [139, 0, 0],
	darksalmon: [233, 150, 122],
	darkseagreen: [143, 188, 143],
	darkslateblue: [72, 61, 139],
	darkslategray: [47, 79, 79],
	darkslategrey: [47, 79, 79],
	darkturquoise: [0, 206, 209],
	darkviolet: [148, 0, 211],
	deeppink: [255, 20, 147],
	deepskyblue: [0, 191, 255],
	dimgray: [105, 105, 105],
	dimgrey: [105, 105, 105],
	dodgerblue: [30, 144, 255],
	firebrick: [178, 34, 34],
	floralwhite: [255, 250, 240],
	forestgreen: [34, 139, 34],
	fuchsia: [255, 0, 255],
	gainsboro: [220, 220, 220],
	ghostwhite: [248, 248, 255],
	gold: [255, 215, 0],
	goldenrod: [218, 165, 32],
	gray: [128, 128, 128],
	green: [0, 128, 0],
	greenyellow: [173, 255, 47],
	grey: [128, 128, 128],
	honeydew: [240, 255, 240],
	hotpink: [255, 105, 180],
	indianred: [205, 92, 92],
	indigo: [75, 0, 130],
	ivory: [255, 255, 240],
	khaki: [240, 230, 140],
	lavender: [230, 230, 250],
	lavenderblush: [255, 240, 245],
	lawngreen: [124, 252, 0],
	lemonchiffon: [255, 250, 205],
	lightblue: [173, 216, 230],
	lightcoral: [240, 128, 128],
	lightcyan: [224, 255, 255],
	lightgoldenrodyellow: [250, 250, 210],
	lightgray: [211, 211, 211],
	lightgreen: [144, 238, 144],
	lightgrey: [211, 211, 211],
	lightpink: [255, 182, 193],
	lightsalmon: [255, 160, 122],
	lightseagreen: [32, 178, 170],
	lightskyblue: [135, 206, 250],
	lightslategray: [119, 136, 153],
	lightslategrey: [119, 136, 153],
	lightsteelblue: [176, 196, 222],
	lightyellow: [255, 255, 224],
	lime: [0, 255, 0],
	limegreen: [50, 205, 50],
	linen: [250, 240, 230],
	magenta: [255, 0, 255],
	maroon: [128, 0, 0],
	mediumaquamarine: [102, 205, 170],
	mediumblue: [0, 0, 205],
	mediumorchid: [186, 85, 211],
	mediumpurple: [147, 112, 219],
	mediumseagreen: [60, 179, 113],
	mediumslateblue: [123, 104, 238],
	mediumspringgreen: [0, 250, 154],
	mediumturquoise: [72, 209, 204],
	mediumvioletred: [199, 21, 133],
	midnightblue: [25, 25, 112],
	mintcream: [245, 255, 250],
	mistyrose: [255, 228, 225],
	moccasin: [255, 228, 181],
	navajowhite: [255, 222, 173],
	navy: [0, 0, 128],
	oldlace: [253, 245, 230],
	olive: [128, 128, 0],
	olivedrab: [107, 142, 35],
	orange: [255, 165, 0],
	orangered: [255, 69, 0],
	orchid: [218, 112, 214],
	palegoldenrod: [238, 232, 170],
	palegreen: [152, 251, 152],
	paleturquoise: [175, 238, 238],
	palevioletred: [219, 112, 147],
	papayawhip: [255, 239, 213],
	peachpuff: [255, 218, 185],
	peru: [205, 133, 63],
	pink: [255, 192, 203],
	plum: [221, 160, 221],
	powderblue: [176, 224, 230],
	purple: [128, 0, 128],
	rebeccapurple: [102, 51, 153],
	red: [255, 0, 0],
	rosybrown: [188, 143, 143],
	royalblue: [65, 105, 225],
	saddlebrown: [139, 69, 19],
	salmon: [250, 128, 114],
	sandybrown: [244, 164, 96],
	seagreen: [46, 139, 87],
	seashell: [255, 245, 238],
	sienna: [160, 82, 45],
	silver: [192, 192, 192],
	skyblue: [135, 206, 235],
	slateblue: [106, 90, 205],
	slategray: [112, 128, 144],
	slategrey: [112, 128, 144],
	snow: [255, 250, 250],
	springgreen: [0, 255, 127],
	steelblue: [70, 130, 180],
	tan: [210, 180, 140],
	teal: [0, 128, 128],
	thistle: [216, 191, 216],
	tomato: [255, 99, 71],
	turquoise: [64, 224, 208],
	violet: [238, 130, 238],
	wheat: [245, 222, 179],
	white: [255, 255, 255],
	whitesmoke: [245, 245, 245],
	yellow: [255, 255, 0],
	yellowgreen: [154, 205, 50],
}

for (const key in colors) Object.freeze(colors[key]);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.freeze(colors));

/***/ }),

/***/ "./node_modules/color/index.js":
/*!*************************************!*\
  !*** ./node_modules/color/index.js ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var color_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color-string */ "./node_modules/color-string/index.js");
/* harmony import */ var color_convert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! color-convert */ "./node_modules/color/node_modules/color-convert/index.js");



const skippedModels = [
	// To be honest, I don't really feel like keyword belongs in color convert, but eh.
	'keyword',

	// Gray conflicts with some method names, and has its own method defined.
	'gray',

	// Shouldn't really be in color-convert either...
	'hex',
];

const hashedModelKeys = {};
for (const model of Object.keys(color_convert__WEBPACK_IMPORTED_MODULE_1__["default"])) {
	hashedModelKeys[[...color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][model].labels].sort().join('')] = model;
}

const limiters = {};

function Color(object, model) {
	if (!(this instanceof Color)) {
		return new Color(object, model);
	}

	if (model && model in skippedModels) {
		model = null;
	}

	if (model && !(model in color_convert__WEBPACK_IMPORTED_MODULE_1__["default"])) {
		throw new Error('Unknown model: ' + model);
	}

	let i;
	let channels;

	if (object == null) { // eslint-disable-line no-eq-null,eqeqeq
		this.model = 'rgb';
		this.color = [0, 0, 0];
		this.valpha = 1;
	} else if (object instanceof Color) {
		this.model = object.model;
		this.color = [...object.color];
		this.valpha = object.valpha;
	} else if (typeof object === 'string') {
		const result = color_string__WEBPACK_IMPORTED_MODULE_0__["default"].get(object);
		if (result === null) {
			throw new Error('Unable to parse color from string: ' + object);
		}

		this.model = result.model;
		channels = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model].channels;
		this.color = result.value.slice(0, channels);
		this.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;
	} else if (object.length > 0) {
		this.model = model || 'rgb';
		channels = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model].channels;
		const newArray = Array.prototype.slice.call(object, 0, channels);
		this.color = zeroArray(newArray, channels);
		this.valpha = typeof object[channels] === 'number' ? object[channels] : 1;
	} else if (typeof object === 'number') {
		// This is always RGB - can be converted later on.
		this.model = 'rgb';
		this.color = [
			(object >> 16) & 0xFF,
			(object >> 8) & 0xFF,
			object & 0xFF,
		];
		this.valpha = 1;
	} else {
		this.valpha = 1;

		const keys = Object.keys(object);
		if ('alpha' in object) {
			keys.splice(keys.indexOf('alpha'), 1);
			this.valpha = typeof object.alpha === 'number' ? object.alpha : 0;
		}

		const hashedKeys = keys.sort().join('');
		if (!(hashedKeys in hashedModelKeys)) {
			throw new Error('Unable to parse color from object: ' + JSON.stringify(object));
		}

		this.model = hashedModelKeys[hashedKeys];

		const {labels} = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model];
		const color = [];
		for (i = 0; i < labels.length; i++) {
			color.push(object[labels[i]]);
		}

		this.color = zeroArray(color);
	}

	// Perform limitations (clamping, etc.)
	if (limiters[this.model]) {
		channels = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model].channels;
		for (i = 0; i < channels; i++) {
			const limit = limiters[this.model][i];
			if (limit) {
				this.color[i] = limit(this.color[i]);
			}
		}
	}

	this.valpha = Math.max(0, Math.min(1, this.valpha));

	if (Object.freeze) {
		Object.freeze(this);
	}
}

Color.prototype = {
	toString() {
		return this.string();
	},

	toJSON() {
		return this[this.model]();
	},

	string(places) {
		let self = this.model in color_string__WEBPACK_IMPORTED_MODULE_0__["default"].to ? this : this.rgb();
		self = self.round(typeof places === 'number' ? places : 1);
		const arguments_ = self.valpha === 1 ? self.color : [...self.color, this.valpha];
		return color_string__WEBPACK_IMPORTED_MODULE_0__["default"].to[self.model](...arguments_);
	},

	percentString(places) {
		const self = this.rgb().round(typeof places === 'number' ? places : 1);
		const arguments_ = self.valpha === 1 ? self.color : [...self.color, this.valpha];
		return color_string__WEBPACK_IMPORTED_MODULE_0__["default"].to.rgb.percent(...arguments_);
	},

	array() {
		return this.valpha === 1 ? [...this.color] : [...this.color, this.valpha];
	},

	object() {
		const result = {};
		const {channels} = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model];
		const {labels} = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model];

		for (let i = 0; i < channels; i++) {
			result[labels[i]] = this.color[i];
		}

		if (this.valpha !== 1) {
			result.alpha = this.valpha;
		}

		return result;
	},

	unitArray() {
		const rgb = this.rgb().color;
		rgb[0] /= 255;
		rgb[1] /= 255;
		rgb[2] /= 255;

		if (this.valpha !== 1) {
			rgb.push(this.valpha);
		}

		return rgb;
	},

	unitObject() {
		const rgb = this.rgb().object();
		rgb.r /= 255;
		rgb.g /= 255;
		rgb.b /= 255;

		if (this.valpha !== 1) {
			rgb.alpha = this.valpha;
		}

		return rgb;
	},

	round(places) {
		places = Math.max(places || 0, 0);
		return new Color([...this.color.map(roundToPlace(places)), this.valpha], this.model);
	},

	alpha(value) {
		if (value !== undefined) {
			return new Color([...this.color, Math.max(0, Math.min(1, value))], this.model);
		}

		return this.valpha;
	},

	// Rgb
	red: getset('rgb', 0, maxfn(255)),
	green: getset('rgb', 1, maxfn(255)),
	blue: getset('rgb', 2, maxfn(255)),

	hue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, value => ((value % 360) + 360) % 360),

	saturationl: getset('hsl', 1, maxfn(100)),
	lightness: getset('hsl', 2, maxfn(100)),

	saturationv: getset('hsv', 1, maxfn(100)),
	value: getset('hsv', 2, maxfn(100)),

	chroma: getset('hcg', 1, maxfn(100)),
	gray: getset('hcg', 2, maxfn(100)),

	white: getset('hwb', 1, maxfn(100)),
	wblack: getset('hwb', 2, maxfn(100)),

	cyan: getset('cmyk', 0, maxfn(100)),
	magenta: getset('cmyk', 1, maxfn(100)),
	yellow: getset('cmyk', 2, maxfn(100)),
	black: getset('cmyk', 3, maxfn(100)),

	x: getset('xyz', 0, maxfn(95.047)),
	y: getset('xyz', 1, maxfn(100)),
	z: getset('xyz', 2, maxfn(108.833)),

	l: getset('lab', 0, maxfn(100)),
	a: getset('lab', 1),
	b: getset('lab', 2),

	keyword(value) {
		if (value !== undefined) {
			return new Color(value);
		}

		return color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model].keyword(this.color);
	},

	hex(value) {
		if (value !== undefined) {
			return new Color(value);
		}

		return color_string__WEBPACK_IMPORTED_MODULE_0__["default"].to.hex(...this.rgb().round().color);
	},

	hexa(value) {
		if (value !== undefined) {
			return new Color(value);
		}

		const rgbArray = this.rgb().round().color;

		let alphaHex = Math.round(this.valpha * 255).toString(16).toUpperCase();
		if (alphaHex.length === 1) {
			alphaHex = '0' + alphaHex;
		}

		return color_string__WEBPACK_IMPORTED_MODULE_0__["default"].to.hex(...rgbArray) + alphaHex;
	},

	rgbNumber() {
		const rgb = this.rgb().color;
		return ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);
	},

	luminosity() {
		// http://www.w3.org/TR/WCAG20/#relativeluminancedef
		const rgb = this.rgb().color;

		const lum = [];
		for (const [i, element] of rgb.entries()) {
			const chan = element / 255;
			lum[i] = (chan <= 0.04045) ? chan / 12.92 : ((chan + 0.055) / 1.055) ** 2.4;
		}

		return 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];
	},

	contrast(color2) {
		// http://www.w3.org/TR/WCAG20/#contrast-ratiodef
		const lum1 = this.luminosity();
		const lum2 = color2.luminosity();

		if (lum1 > lum2) {
			return (lum1 + 0.05) / (lum2 + 0.05);
		}

		return (lum2 + 0.05) / (lum1 + 0.05);
	},

	level(color2) {
		// https://www.w3.org/TR/WCAG/#contrast-enhanced
		const contrastRatio = this.contrast(color2);
		if (contrastRatio >= 7) {
			return 'AAA';
		}

		return (contrastRatio >= 4.5) ? 'AA' : '';
	},

	isDark() {
		// YIQ equation from http://24ways.org/2010/calculating-color-contrast
		const rgb = this.rgb().color;
		const yiq = (rgb[0] * 2126 + rgb[1] * 7152 + rgb[2] * 722) / 10000;
		return yiq < 128;
	},

	isLight() {
		return !this.isDark();
	},

	negate() {
		const rgb = this.rgb();
		for (let i = 0; i < 3; i++) {
			rgb.color[i] = 255 - rgb.color[i];
		}

		return rgb;
	},

	lighten(ratio) {
		const hsl = this.hsl();
		hsl.color[2] += hsl.color[2] * ratio;
		return hsl;
	},

	darken(ratio) {
		const hsl = this.hsl();
		hsl.color[2] -= hsl.color[2] * ratio;
		return hsl;
	},

	saturate(ratio) {
		const hsl = this.hsl();
		hsl.color[1] += hsl.color[1] * ratio;
		return hsl;
	},

	desaturate(ratio) {
		const hsl = this.hsl();
		hsl.color[1] -= hsl.color[1] * ratio;
		return hsl;
	},

	whiten(ratio) {
		const hwb = this.hwb();
		hwb.color[1] += hwb.color[1] * ratio;
		return hwb;
	},

	blacken(ratio) {
		const hwb = this.hwb();
		hwb.color[2] += hwb.color[2] * ratio;
		return hwb;
	},

	grayscale() {
		// http://en.wikipedia.org/wiki/Grayscale#Converting_colour_to_grayscale
		const rgb = this.rgb().color;
		const value = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;
		return Color.rgb(value, value, value);
	},

	fade(ratio) {
		return this.alpha(this.valpha - (this.valpha * ratio));
	},

	opaquer(ratio) {
		return this.alpha(this.valpha + (this.valpha * ratio));
	},

	rotate(degrees) {
		const hsl = this.hsl();
		let hue = hsl.color[0];
		hue = (hue + degrees) % 360;
		hue = hue < 0 ? 360 + hue : hue;
		hsl.color[0] = hue;
		return hsl;
	},

	mix(mixinColor, weight) {
		// Ported from sass implementation in C
		// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209
		if (!mixinColor || !mixinColor.rgb) {
			throw new Error('Argument to "mix" was not a Color instance, but rather an instance of ' + typeof mixinColor);
		}

		const color1 = mixinColor.rgb();
		const color2 = this.rgb();
		const p = weight === undefined ? 0.5 : weight;

		const w = 2 * p - 1;
		const a = color1.alpha() - color2.alpha();

		const w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2;
		const w2 = 1 - w1;

		return Color.rgb(
			w1 * color1.red() + w2 * color2.red(),
			w1 * color1.green() + w2 * color2.green(),
			w1 * color1.blue() + w2 * color2.blue(),
			color1.alpha() * p + color2.alpha() * (1 - p));
	},
};

// Model conversion methods and static constructors
for (const model of Object.keys(color_convert__WEBPACK_IMPORTED_MODULE_1__["default"])) {
	if (skippedModels.includes(model)) {
		continue;
	}

	const {channels} = color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][model];

	// Conversion methods
	Color.prototype[model] = function (...arguments_) {
		if (this.model === model) {
			return new Color(this);
		}

		if (arguments_.length > 0) {
			return new Color(arguments_, model);
		}

		return new Color([...assertArray(color_convert__WEBPACK_IMPORTED_MODULE_1__["default"][this.model][model].raw(this.color)), this.valpha], model);
	};

	// 'static' construction methods
	Color[model] = function (...arguments_) {
		let color = arguments_[0];
		if (typeof color === 'number') {
			color = zeroArray(arguments_, channels);
		}

		return new Color(color, model);
	};
}

function roundTo(number, places) {
	return Number(number.toFixed(places));
}

function roundToPlace(places) {
	return function (number) {
		return roundTo(number, places);
	};
}

function getset(model, channel, modifier) {
	model = Array.isArray(model) ? model : [model];

	for (const m of model) {
		(limiters[m] ||= [])[channel] = modifier;
	}

	model = model[0];

	return function (value) {
		let result;

		if (value !== undefined) {
			if (modifier) {
				value = modifier(value);
			}

			result = this[model]();
			result.color[channel] = value;
			return result;
		}

		result = this[model]().color[channel];
		if (modifier) {
			result = modifier(result);
		}

		return result;
	};
}

function maxfn(max) {
	return function (v) {
		return Math.max(0, Math.min(max, v));
	};
}

function assertArray(value) {
	return Array.isArray(value) ? value : [value];
}

function zeroArray(array, length) {
	for (let i = 0; i < length; i++) {
		if (typeof array[i] !== 'number') {
			array[i] = 0;
		}
	}

	return array;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Color);


/***/ }),

/***/ "./node_modules/color/node_modules/color-convert/conversions.js":
/*!**********************************************************************!*\
  !*** ./node_modules/color/node_modules/color-convert/conversions.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var color_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! color-name */ "./node_modules/color/node_modules/color-name/index.js");
/* MIT license */
/* eslint-disable no-mixed-operators */


// NOTE: conversions should only return primitive values (i.e. arrays, or
//       values that give correct `typeof` results).
//       do not use box values types (i.e. Number(), String(), etc.)

const reverseKeywords = {};
for (const key of Object.keys(color_name__WEBPACK_IMPORTED_MODULE_0__["default"])) {
	reverseKeywords[color_name__WEBPACK_IMPORTED_MODULE_0__["default"][key]] = key;
}

const convert = {
	rgb: {channels: 3, labels: 'rgb'},
	hsl: {channels: 3, labels: 'hsl'},
	hsv: {channels: 3, labels: 'hsv'},
	hwb: {channels: 3, labels: 'hwb'},
	cmyk: {channels: 4, labels: 'cmyk'},
	xyz: {channels: 3, labels: 'xyz'},
	lab: {channels: 3, labels: 'lab'},
	oklab: {channels: 3, labels: ['okl', 'oka', 'okb']},
	lch: {channels: 3, labels: 'lch'},
	oklch: {channels: 3, labels: ['okl', 'okc', 'okh']},
	hex: {channels: 1, labels: ['hex']},
	keyword: {channels: 1, labels: ['keyword']},
	ansi16: {channels: 1, labels: ['ansi16']},
	ansi256: {channels: 1, labels: ['ansi256']},
	hcg: {channels: 3, labels: ['h', 'c', 'g']},
	apple: {channels: 3, labels: ['r16', 'g16', 'b16']},
	gray: {channels: 1, labels: ['gray']},
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (convert);

// LAB f(t) constant
const LAB_FT = (6 / 29) ** 3;

// SRGB non-linear transform functions
function srgbNonlinearTransform(c) {
	const cc = c > 0.003_130_8
		? ((1.055 * (c ** (1 / 2.4))) - 0.055)
		: c * 12.92;
	return Math.min(Math.max(0, cc), 1);
}

function srgbNonlinearTransformInv(c) {
	return c > 0.040_45 ? (((c + 0.055) / 1.055) ** 2.4) : (c / 12.92);
}

// Hide .channels and .labels properties
for (const model of Object.keys(convert)) {
	if (!('channels' in convert[model])) {
		throw new Error('missing channels property: ' + model);
	}

	if (!('labels' in convert[model])) {
		throw new Error('missing channel labels property: ' + model);
	}

	if (convert[model].labels.length !== convert[model].channels) {
		throw new Error('channel and label counts mismatch: ' + model);
	}

	const {channels, labels} = convert[model];
	delete convert[model].channels;
	delete convert[model].labels;
	Object.defineProperty(convert[model], 'channels', {value: channels});
	Object.defineProperty(convert[model], 'labels', {value: labels});
}

convert.rgb.hsl = function (rgb) {
	const r = rgb[0] / 255;
	const g = rgb[1] / 255;
	const b = rgb[2] / 255;
	const min = Math.min(r, g, b);
	const max = Math.max(r, g, b);
	const delta = max - min;
	let h;
	let s;

	switch (max) {
		case min: {
			h = 0;

			break;
		}

		case r: {
			h = (g - b) / delta;

			break;
		}

		case g: {
			h = 2 + (b - r) / delta;

			break;
		}

		case b: {
			h = 4 + (r - g) / delta;

			break;
		}
	// No default
	}

	h = Math.min(h * 60, 360);

	if (h < 0) {
		h += 360;
	}

	const l = (min + max) / 2;

	if (max === min) {
		s = 0;
	} else if (l <= 0.5) {
		s = delta / (max + min);
	} else {
		s = delta / (2 - max - min);
	}

	return [h, s * 100, l * 100];
};

convert.rgb.hsv = function (rgb) {
	let rdif;
	let gdif;
	let bdif;
	let h;
	let s;

	const r = rgb[0] / 255;
	const g = rgb[1] / 255;
	const b = rgb[2] / 255;
	const v = Math.max(r, g, b);
	const diff = v - Math.min(r, g, b);
	const diffc = function (c) {
		return (v - c) / 6 / diff + 1 / 2;
	};

	if (diff === 0) {
		h = 0;
		s = 0;
	} else {
		s = diff / v;
		rdif = diffc(r);
		gdif = diffc(g);
		bdif = diffc(b);

		switch (v) {
			case r: {
				h = bdif - gdif;

				break;
			}

			case g: {
				h = (1 / 3) + rdif - bdif;

				break;
			}

			case b: {
				h = (2 / 3) + gdif - rdif;

				break;
			}
		// No default
		}

		if (h < 0) {
			h += 1;
		} else if (h > 1) {
			h -= 1;
		}
	}

	return [
		h * 360,
		s * 100,
		v * 100,
	];
};

convert.rgb.hwb = function (rgb) {
	const r = rgb[0];
	const g = rgb[1];
	let b = rgb[2];
	const h = convert.rgb.hsl(rgb)[0];
	const w = 1 / 255 * Math.min(r, Math.min(g, b));

	b = 1 - 1 / 255 * Math.max(r, Math.max(g, b));

	return [h, w * 100, b * 100];
};

convert.rgb.oklab = function (rgb) {
	// Assume sRGB
	const r = srgbNonlinearTransformInv(rgb[0] / 255);
	const g = srgbNonlinearTransformInv(rgb[1] / 255);
	const b = srgbNonlinearTransformInv(rgb[2] / 255);

	const lp = Math.cbrt(0.412_221_470_8 * r + 0.536_332_536_3 * g + 0.051_445_992_9 * b);
	const mp = Math.cbrt(0.211_903_498_2 * r + 0.680_699_545_1 * g + 0.107_396_956_6 * b);
	const sp = Math.cbrt(0.088_302_461_9 * r + 0.281_718_837_6 * g + 0.629_978_700_5 * b);

	const l = 0.210_454_255_3 * lp + 0.793_617_785 * mp - 0.004_072_046_8 * sp;
	const aa = 1.977_998_495_1 * lp - 2.428_592_205 * mp + 0.450_593_709_9 * sp;
	const bb = 0.025_904_037_1 * lp + 0.782_771_766_2 * mp - 0.808_675_766 * sp;

	return [l * 100, aa * 100, bb * 100];
};

convert.rgb.cmyk = function (rgb) {
	const r = rgb[0] / 255;
	const g = rgb[1] / 255;
	const b = rgb[2] / 255;

	const k = Math.min(1 - r, 1 - g, 1 - b);
	const c = (1 - r - k) / (1 - k) || 0;
	const m = (1 - g - k) / (1 - k) || 0;
	const y = (1 - b - k) / (1 - k) || 0;

	return [c * 100, m * 100, y * 100, k * 100];
};

function comparativeDistance(x, y) {
	/*
		See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance
	*/
	return (
		((x[0] - y[0]) ** 2) +
		((x[1] - y[1]) ** 2) +
		((x[2] - y[2]) ** 2)
	);
}

convert.rgb.keyword = function (rgb) {
	const reversed = reverseKeywords[rgb];
	if (reversed) {
		return reversed;
	}

	let currentClosestDistance = Number.POSITIVE_INFINITY;
	let currentClosestKeyword;

	for (const keyword of Object.keys(color_name__WEBPACK_IMPORTED_MODULE_0__["default"])) {
		const value = color_name__WEBPACK_IMPORTED_MODULE_0__["default"][keyword];

		// Compute comparative distance
		const distance = comparativeDistance(rgb, value);

		// Check if its less, if so set as closest
		if (distance < currentClosestDistance) {
			currentClosestDistance = distance;
			currentClosestKeyword = keyword;
		}
	}

	return currentClosestKeyword;
};

convert.keyword.rgb = function (keyword) {
	return [...color_name__WEBPACK_IMPORTED_MODULE_0__["default"][keyword]];
};

convert.rgb.xyz = function (rgb) {
	// Assume sRGB
	const r = srgbNonlinearTransformInv(rgb[0] / 255);
	const g = srgbNonlinearTransformInv(rgb[1] / 255);
	const b = srgbNonlinearTransformInv(rgb[2] / 255);

	const x = (r * 0.412_456_4) + (g * 0.357_576_1) + (b * 0.180_437_5);
	const y = (r * 0.212_672_9) + (g * 0.715_152_2) + (b * 0.072_175);
	const z = (r * 0.019_333_9) + (g * 0.119_192) + (b * 0.950_304_1);

	return [x * 100, y * 100, z * 100];
};

convert.rgb.lab = function (rgb) {
	const xyz = convert.rgb.xyz(rgb);
	let x = xyz[0];
	let y = xyz[1];
	let z = xyz[2];

	x /= 95.047;
	y /= 100;
	z /= 108.883;

	x = x > LAB_FT ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);
	y = y > LAB_FT ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);
	z = z > LAB_FT ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);

	const l = (116 * y) - 16;
	const a = 500 * (x - y);
	const b = 200 * (y - z);

	return [l, a, b];
};

convert.hsl.rgb = function (hsl) {
	const h = hsl[0] / 360;
	const s = hsl[1] / 100;
	const l = hsl[2] / 100;
	let t3;
	let value;

	if (s === 0) {
		value = l * 255;
		return [value, value, value];
	}

	const t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;

	const t1 = 2 * l - t2;

	const rgb = [0, 0, 0];
	for (let i = 0; i < 3; i++) {
		t3 = h + 1 / 3 * -(i - 1);
		if (t3 < 0) {
			t3++;
		}

		if (t3 > 1) {
			t3--;
		}

		if (6 * t3 < 1) {
			value = t1 + (t2 - t1) * 6 * t3;
		} else if (2 * t3 < 1) {
			value = t2;
		} else if (3 * t3 < 2) {
			value = t1 + (t2 - t1) * (2 / 3 - t3) * 6;
		} else {
			value = t1;
		}

		rgb[i] = value * 255;
	}

	return rgb;
};

convert.hsl.hsv = function (hsl) {
	const h = hsl[0];
	let s = hsl[1] / 100;
	let l = hsl[2] / 100;
	let smin = s;
	const lmin = Math.max(l, 0.01);

	l *= 2;
	s *= (l <= 1) ? l : 2 - l;
	smin *= lmin <= 1 ? lmin : 2 - lmin;
	const v = (l + s) / 2;
	const sv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);

	return [h, sv * 100, v * 100];
};

convert.hsv.rgb = function (hsv) {
	const h = hsv[0] / 60;
	const s = hsv[1] / 100;
	let v = hsv[2] / 100;
	const hi = Math.floor(h) % 6;

	const f = h - Math.floor(h);
	const p = 255 * v * (1 - s);
	const q = 255 * v * (1 - (s * f));
	const t = 255 * v * (1 - (s * (1 - f)));
	v *= 255;

	switch (hi) {
		case 0: {
			return [v, t, p];
		}

		case 1: {
			return [q, v, p];
		}

		case 2: {
			return [p, v, t];
		}

		case 3: {
			return [p, q, v];
		}

		case 4: {
			return [t, p, v];
		}

		case 5: {
			return [v, p, q];
		}
	}
};

convert.hsv.hsl = function (hsv) {
	const h = hsv[0];
	const s = hsv[1] / 100;
	const v = hsv[2] / 100;
	const vmin = Math.max(v, 0.01);
	let sl;
	let l;

	l = (2 - s) * v;
	const lmin = (2 - s) * vmin;
	sl = s * vmin;
	sl /= (lmin <= 1) ? lmin : 2 - lmin;
	sl = sl || 0;
	l /= 2;

	return [h, sl * 100, l * 100];
};

// http://dev.w3.org/csswg/css-color/#hwb-to-rgb
convert.hwb.rgb = function (hwb) {
	const h = hwb[0] / 360;
	let wh = hwb[1] / 100;
	let bl = hwb[2] / 100;
	const ratio = wh + bl;
	let f;

	// Wh + bl cant be > 1
	if (ratio > 1) {
		wh /= ratio;
		bl /= ratio;
	}

	const i = Math.floor(6 * h);
	const v = 1 - bl;
	f = 6 * h - i;

	// eslint-disable-next-line no-bitwise
	if ((i & 0x01) !== 0) {
		f = 1 - f;
	}

	const n = wh + f * (v - wh); // Linear interpolation

	let r;
	let g;
	let b;
	/* eslint-disable max-statements-per-line,no-multi-spaces, default-case-last */
	switch (i) {
		default:
		case 6:
		case 0: { r = v;  g = n;  b = wh; break;
		}

		case 1: { r = n;  g = v;  b = wh; break;
		}

		case 2: { r = wh; g = v;  b = n; break;
		}

		case 3: { r = wh; g = n;  b = v; break;
		}

		case 4: { r = n;  g = wh; b = v; break;
		}

		case 5: { r = v;  g = wh; b = n; break;
		}
	}
	/* eslint-enable max-statements-per-line,no-multi-spaces, default-case-last */

	return [r * 255, g * 255, b * 255];
};

convert.cmyk.rgb = function (cmyk) {
	const c = cmyk[0] / 100;
	const m = cmyk[1] / 100;
	const y = cmyk[2] / 100;
	const k = cmyk[3] / 100;

	const r = 1 - Math.min(1, c * (1 - k) + k);
	const g = 1 - Math.min(1, m * (1 - k) + k);
	const b = 1 - Math.min(1, y * (1 - k) + k);

	return [r * 255, g * 255, b * 255];
};

convert.xyz.rgb = function (xyz) {
	const x = xyz[0] / 100;
	const y = xyz[1] / 100;
	const z = xyz[2] / 100;
	let r;
	let g;
	let b;

	r = (x * 3.240_454_2) + (y * -1.537_138_5) + (z * -0.498_531_4);
	g = (x * -0.969_266) + (y * 1.876_010_8) + (z * 0.041_556);
	b = (x * 0.055_643_4) + (y * -0.204_025_9) + (z * 1.057_225_2);

	// Assume sRGB
	r = srgbNonlinearTransform(r);
	g = srgbNonlinearTransform(g);
	b = srgbNonlinearTransform(b);

	return [r * 255, g * 255, b * 255];
};

convert.xyz.lab = function (xyz) {
	let x = xyz[0];
	let y = xyz[1];
	let z = xyz[2];

	x /= 95.047;
	y /= 100;
	z /= 108.883;

	x = x > LAB_FT ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);
	y = y > LAB_FT ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);
	z = z > LAB_FT ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);

	const l = (116 * y) - 16;
	const a = 500 * (x - y);
	const b = 200 * (y - z);

	return [l, a, b];
};

convert.xyz.oklab = function (xyz) {
	const x = xyz[0] / 100;
	const y = xyz[1] / 100;
	const z = xyz[2] / 100;

	const lp = Math.cbrt(0.818_933_010_1 * x + 0.361_866_742_4 * y - 0.128_859_713_7 * z);
	const mp = Math.cbrt(0.032_984_543_6 * x + 0.929_311_871_5 * y + 0.036_145_638_7 * z);
	const sp = Math.cbrt(0.048_200_301_8 * x + 0.264_366_269_1 * y + 0.633_851_707 * z);

	const l = 0.210_454_255_3 * lp + 0.793_617_785 * mp - 0.004_072_046_8 * sp;
	const a = 1.977_998_495_1 * lp - 2.428_592_205 * mp + 0.450_593_709_9 * sp;
	const b = 0.025_904_037_1 * lp + 0.782_771_766_2 * mp - 0.808_675_766 * sp;

	return [l * 100, a * 100, b * 100];
};

convert.oklab.oklch = function (oklab) {
	return convert.lab.lch(oklab);
};

convert.oklab.xyz = function (oklab) {
	const ll = oklab[0] / 100;
	const a = oklab[1] / 100;
	const b = oklab[2] / 100;

	const l = (0.999_999_998 * ll + 0.396_337_792 * a + 0.215_803_758 * b) ** 3;
	const m = (1.000_000_008 * ll - 0.105_561_342 * a - 0.063_854_175 * b) ** 3;
	const s = (1.000_000_055 * ll - 0.089_484_182 * a - 1.291_485_538 * b) ** 3;

	const x = 1.227_013_851 * l - 0.557_799_98 * m + 0.281_256_149 * s;
	const y = -0.040_580_178 * l + 1.112_256_87 * m - 0.071_676_679 * s;
	const z = -0.076_381_285 * l - 0.421_481_978 * m + 1.586_163_22 * s;

	return [x * 100, y * 100, z * 100];
};

convert.oklab.rgb = function (oklab) {
	const ll = oklab[0] / 100;
	const aa = oklab[1] / 100;
	const bb = oklab[2] / 100;

	const l = (ll + 0.396_337_777_4 * aa + 0.215_803_757_3 * bb) ** 3;
	const m = (ll - 0.105_561_345_8 * aa - 0.063_854_172_8 * bb) ** 3;
	const s = (ll - 0.089_484_177_5 * aa - 1.291_485_548 * bb) ** 3;

	// Assume sRGB
	const r = srgbNonlinearTransform(4.076_741_662_1 * l - 3.307_711_591_3 * m + 0.230_969_929_2 * s);
	const g = srgbNonlinearTransform(-1.268_438_004_6 * l + 2.609_757_401_1 * m - 0.341_319_396_5 * s);
	const b = srgbNonlinearTransform(-0.004_196_086_3 * l - 0.703_418_614_7 * m + 1.707_614_701 * s);

	return [r * 255, g * 255, b * 255];
};

convert.oklch.oklab = function (oklch) {
	return convert.lch.lab(oklch);
};

convert.lab.xyz = function (lab) {
	const l = lab[0];
	const a = lab[1];
	const b = lab[2];
	let x;
	let y;
	let z;

	y = (l + 16) / 116;
	x = a / 500 + y;
	z = y - b / 200;

	const y2 = y ** 3;
	const x2 = x ** 3;
	const z2 = z ** 3;
	y = y2 > LAB_FT ? y2 : (y - 16 / 116) / 7.787;
	x = x2 > LAB_FT ? x2 : (x - 16 / 116) / 7.787;
	z = z2 > LAB_FT ? z2 : (z - 16 / 116) / 7.787;

	// Illuminant D65 XYZ Tristrimulus Values
	// https://en.wikipedia.org/wiki/CIE_1931_color_space
	x *= 95.047;
	y *= 100;
	z *= 108.883;

	return [x, y, z];
};

convert.lab.lch = function (lab) {
	const l = lab[0];
	const a = lab[1];
	const b = lab[2];
	let h;

	const hr = Math.atan2(b, a);
	h = hr * 360 / 2 / Math.PI;

	if (h < 0) {
		h += 360;
	}

	const c = Math.sqrt(a * a + b * b);

	return [l, c, h];
};

convert.lch.lab = function (lch) {
	const l = lch[0];
	const c = lch[1];
	const h = lch[2];

	const hr = h / 360 * 2 * Math.PI;
	const a = c * Math.cos(hr);
	const b = c * Math.sin(hr);

	return [l, a, b];
};

convert.rgb.ansi16 = function (args, saturation = null) {
	const [r, g, b] = args;
	let value = saturation === null ? convert.rgb.hsv(args)[2] : saturation; // Hsv -> ansi16 optimization

	value = Math.round(value / 50);

	if (value === 0) {
		return 30;
	}

	let ansi = 30
		/* eslint-disable no-bitwise */
		+ ((Math.round(b / 255) << 2)
		| (Math.round(g / 255) << 1)
		| Math.round(r / 255));
		/* eslint-enable no-bitwise */

	if (value === 2) {
		ansi += 60;
	}

	return ansi;
};

convert.hsv.ansi16 = function (args) {
	// Optimization here; we already know the value and don't need to get
	// it converted for us.
	return convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);
};

convert.rgb.ansi256 = function (args) {
	const r = args[0];
	const g = args[1];
	const b = args[2];

	// We use the extended greyscale palette here, with the exception of
	// black and white. normal palette only has 4 greyscale shades.
	// eslint-disable-next-line no-bitwise
	if (r >> 4 === g >> 4 && g >> 4 === b >> 4) {
		if (r < 8) {
			return 16;
		}

		if (r > 248) {
			return 231;
		}

		return Math.round(((r - 8) / 247) * 24) + 232;
	}

	const ansi = 16
		+ (36 * Math.round(r / 255 * 5))
		+ (6 * Math.round(g / 255 * 5))
		+ Math.round(b / 255 * 5);

	return ansi;
};

convert.ansi16.rgb = function (args) {
	args = args[0];

	let color = args % 10;

	// Handle greyscale
	if (color === 0 || color === 7) {
		if (args > 50) {
			color += 3.5;
		}

		color = color / 10.5 * 255;

		return [color, color, color];
	}

	const mult = (Math.trunc(args > 50) + 1) * 0.5;
	/* eslint-disable no-bitwise */
	const r = ((color & 1) * mult) * 255;
	const g = (((color >> 1) & 1) * mult) * 255;
	const b = (((color >> 2) & 1) * mult) * 255;
	/* eslint-enable no-bitwise */

	return [r, g, b];
};

convert.ansi256.rgb = function (args) {
	args = args[0];

	// Handle greyscale
	if (args >= 232) {
		const c = (args - 232) * 10 + 8;
		return [c, c, c];
	}

	args -= 16;

	let rem;
	const r = Math.floor(args / 36) / 5 * 255;
	const g = Math.floor((rem = args % 36) / 6) / 5 * 255;
	const b = (rem % 6) / 5 * 255;

	return [r, g, b];
};

convert.rgb.hex = function (args) {
	/* eslint-disable no-bitwise */
	const integer = ((Math.round(args[0]) & 0xFF) << 16)
		+ ((Math.round(args[1]) & 0xFF) << 8)
		+ (Math.round(args[2]) & 0xFF);
	/* eslint-enable no-bitwise */

	const string = integer.toString(16).toUpperCase();
	return '000000'.slice(string.length) + string;
};

convert.hex.rgb = function (args) {
	const match = args.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);
	if (!match) {
		return [0, 0, 0];
	}

	let colorString = match[0];

	if (match[0].length === 3) {
		colorString = [...colorString].map(char => char + char).join('');
	}

	const integer = Number.parseInt(colorString, 16);
	/* eslint-disable no-bitwise */
	const r = (integer >> 16) & 0xFF;
	const g = (integer >> 8) & 0xFF;
	const b = integer & 0xFF;
	/* eslint-enable no-bitwise */

	return [r, g, b];
};

convert.rgb.hcg = function (rgb) {
	const r = rgb[0] / 255;
	const g = rgb[1] / 255;
	const b = rgb[2] / 255;
	const max = Math.max(Math.max(r, g), b);
	const min = Math.min(Math.min(r, g), b);
	const chroma = (max - min);
	let hue;

	const grayscale = chroma < 1 ? min / (1 - chroma) : 0;

	if (chroma <= 0) {
		hue = 0;
	} else if (max === r) {
		hue = ((g - b) / chroma) % 6;
	} else if (max === g) {
		hue = 2 + (b - r) / chroma;
	} else {
		hue = 4 + (r - g) / chroma;
	}

	hue /= 6;
	hue %= 1;

	return [hue * 360, chroma * 100, grayscale * 100];
};

convert.hsl.hcg = function (hsl) {
	const s = hsl[1] / 100;
	const l = hsl[2] / 100;

	const c = l < 0.5 ? (2 * s * l) : (2 * s * (1 - l));

	let f = 0;
	if (c < 1) {
		f = (l - 0.5 * c) / (1 - c);
	}

	return [hsl[0], c * 100, f * 100];
};

convert.hsv.hcg = function (hsv) {
	const s = hsv[1] / 100;
	const v = hsv[2] / 100;

	const c = s * v;
	let f = 0;

	if (c < 1) {
		f = (v - c) / (1 - c);
	}

	return [hsv[0], c * 100, f * 100];
};

convert.hcg.rgb = function (hcg) {
	const h = hcg[0] / 360;
	const c = hcg[1] / 100;
	const g = hcg[2] / 100;

	if (c === 0) {
		return [g * 255, g * 255, g * 255];
	}

	const pure = [0, 0, 0];
	const hi = (h % 1) * 6;
	const v = hi % 1;
	const w = 1 - v;
	let mg = 0;

	/* eslint-disable max-statements-per-line */
	switch (Math.floor(hi)) {
		case 0: {
			pure[0] = 1; pure[1] = v; pure[2] = 0; break;
		}

		case 1: {
			pure[0] = w; pure[1] = 1; pure[2] = 0; break;
		}

		case 2: {
			pure[0] = 0; pure[1] = 1; pure[2] = v; break;
		}

		case 3: {
			pure[0] = 0; pure[1] = w; pure[2] = 1; break;
		}

		case 4: {
			pure[0] = v; pure[1] = 0; pure[2] = 1; break;
		}

		default: {
			pure[0] = 1; pure[1] = 0; pure[2] = w;
		}
	}
	/* eslint-enable max-statements-per-line */

	mg = (1 - c) * g;

	return [
		(c * pure[0] + mg) * 255,
		(c * pure[1] + mg) * 255,
		(c * pure[2] + mg) * 255,
	];
};

convert.hcg.hsv = function (hcg) {
	const c = hcg[1] / 100;
	const g = hcg[2] / 100;

	const v = c + g * (1 - c);
	let f = 0;

	if (v > 0) {
		f = c / v;
	}

	return [hcg[0], f * 100, v * 100];
};

convert.hcg.hsl = function (hcg) {
	const c = hcg[1] / 100;
	const g = hcg[2] / 100;

	const l = g * (1 - c) + 0.5 * c;
	let s = 0;

	if (l > 0 && l < 0.5) {
		s = c / (2 * l);
	} else if (l >= 0.5 && l < 1) {
		s = c / (2 * (1 - l));
	}

	return [hcg[0], s * 100, l * 100];
};

convert.hcg.hwb = function (hcg) {
	const c = hcg[1] / 100;
	const g = hcg[2] / 100;
	const v = c + g * (1 - c);
	return [hcg[0], (v - c) * 100, (1 - v) * 100];
};

convert.hwb.hcg = function (hwb) {
	const w = hwb[1] / 100;
	const b = hwb[2] / 100;
	const v = 1 - b;
	const c = v - w;
	let g = 0;

	if (c < 1) {
		g = (v - c) / (1 - c);
	}

	return [hwb[0], c * 100, g * 100];
};

convert.apple.rgb = function (apple) {
	return [(apple[0] / 65_535) * 255, (apple[1] / 65_535) * 255, (apple[2] / 65_535) * 255];
};

convert.rgb.apple = function (rgb) {
	return [(rgb[0] / 255) * 65_535, (rgb[1] / 255) * 65_535, (rgb[2] / 255) * 65_535];
};

convert.gray.rgb = function (args) {
	return [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];
};

convert.gray.hsl = function (args) {
	return [0, 0, args[0]];
};

convert.gray.hsv = convert.gray.hsl;

convert.gray.hwb = function (gray) {
	return [0, 100, gray[0]];
};

convert.gray.cmyk = function (gray) {
	return [0, 0, 0, gray[0]];
};

convert.gray.lab = function (gray) {
	return [gray[0], 0, 0];
};

convert.gray.hex = function (gray) {
	/* eslint-disable no-bitwise */
	const value = Math.round(gray[0] / 100 * 255) & 0xFF;
	const integer = (value << 16) + (value << 8) + value;
	/* eslint-enable no-bitwise */

	const string = integer.toString(16).toUpperCase();
	return '000000'.slice(string.length) + string;
};

convert.rgb.gray = function (rgb) {
	const value = (rgb[0] + rgb[1] + rgb[2]) / 3;
	return [value / 255 * 100];
};


/***/ }),

/***/ "./node_modules/color/node_modules/color-convert/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/color/node_modules/color-convert/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _conversions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./conversions.js */ "./node_modules/color/node_modules/color-convert/conversions.js");
/* harmony import */ var _route_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./route.js */ "./node_modules/color/node_modules/color-convert/route.js");



const convert = {};

const models = Object.keys(_conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

function wrapRaw(fn) {
	const wrappedFn = function (...args) {
		const arg0 = args[0];
		if (arg0 === undefined || arg0 === null) {
			return arg0;
		}

		if (arg0.length > 1) {
			args = arg0;
		}

		return fn(args);
	};

	// Preserve .conversion property if there is one
	if ('conversion' in fn) {
		wrappedFn.conversion = fn.conversion;
	}

	return wrappedFn;
}

function wrapRounded(fn) {
	const wrappedFn = function (...args) {
		const arg0 = args[0];

		if (arg0 === undefined || arg0 === null) {
			return arg0;
		}

		if (arg0.length > 1) {
			args = arg0;
		}

		const result = fn(args);

		// We're assuming the result is an array here.
		// see notice in conversions.js; don't use box types
		// in conversion functions.
		if (typeof result === 'object') {
			for (let {length} = result, i = 0; i < length; i++) {
				result[i] = Math.round(result[i]);
			}
		}

		return result;
	};

	// Preserve .conversion property if there is one
	if ('conversion' in fn) {
		wrappedFn.conversion = fn.conversion;
	}

	return wrappedFn;
}

for (const fromModel of models) {
	convert[fromModel] = {};

	Object.defineProperty(convert[fromModel], 'channels', {value: _conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"][fromModel].channels});
	Object.defineProperty(convert[fromModel], 'labels', {value: _conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"][fromModel].labels});

	const routes = (0,_route_js__WEBPACK_IMPORTED_MODULE_1__["default"])(fromModel);
	const routeModels = Object.keys(routes);

	for (const toModel of routeModels) {
		const fn = routes[toModel];

		convert[fromModel][toModel] = wrapRounded(fn);
		convert[fromModel][toModel].raw = wrapRaw(fn);
	}
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (convert);


/***/ }),

/***/ "./node_modules/color/node_modules/color-convert/route.js":
/*!****************************************************************!*\
  !*** ./node_modules/color/node_modules/color-convert/route.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _conversions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./conversions.js */ "./node_modules/color/node_modules/color-convert/conversions.js");


/*
	This function routes a model to all other models.

	all functions that are routed have a property `.conversion` attached
	to the returned synthetic function. This property is an array
	of strings, each with the steps in between the 'from' and 'to'
	color models (inclusive).

	conversions that are not possible simply are not included.
*/

function buildGraph() {
	const graph = {};
	// https://jsperf.com/object-keys-vs-for-in-with-closure/3
	const models = Object.keys(_conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

	for (let {length} = models, i = 0; i < length; i++) {
		graph[models[i]] = {
			// http://jsperf.com/1-vs-infinity
			// micro-opt, but this is simple.
			distance: -1,
			parent: null,
		};
	}

	return graph;
}

// https://en.wikipedia.org/wiki/Breadth-first_search
function deriveBFS(fromModel) {
	const graph = buildGraph();
	const queue = [fromModel]; // Unshift -> queue -> pop

	graph[fromModel].distance = 0;

	while (queue.length > 0) {
		const current = queue.pop();
		const adjacents = Object.keys(_conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"][current]);

		for (let {length} = adjacents, i = 0; i < length; i++) {
			const adjacent = adjacents[i];
			const node = graph[adjacent];

			if (node.distance === -1) {
				node.distance = graph[current].distance + 1;
				node.parent = current;
				queue.unshift(adjacent);
			}
		}
	}

	return graph;
}

function link(from, to) {
	return function (args) {
		return to(from(args));
	};
}

function wrapConversion(toModel, graph) {
	const path = [graph[toModel].parent, toModel];
	let fn = _conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"][graph[toModel].parent][toModel];

	let cur = graph[toModel].parent;
	while (graph[cur].parent) {
		path.unshift(graph[cur].parent);
		fn = link(_conversions_js__WEBPACK_IMPORTED_MODULE_0__["default"][graph[cur].parent][cur], fn);
		cur = graph[cur].parent;
	}

	fn.conversion = path;
	return fn;
}

function route(fromModel) {
	const graph = deriveBFS(fromModel);
	const conversion = {};

	const models = Object.keys(graph);
	for (let {length} = models, i = 0; i < length; i++) {
		const toModel = models[i];
		const node = graph[toModel];

		if (node.parent === null) {
			// No possible conversion, or this node is the source model.
			continue;
		}

		conversion[toModel] = wrapConversion(toModel, graph);
	}

	return conversion;
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (route);


/***/ }),

/***/ "./node_modules/color/node_modules/color-name/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/color/node_modules/color-name/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const colors = {
	aliceblue: [240, 248, 255],
	antiquewhite: [250, 235, 215],
	aqua: [0, 255, 255],
	aquamarine: [127, 255, 212],
	azure: [240, 255, 255],
	beige: [245, 245, 220],
	bisque: [255, 228, 196],
	black: [0, 0, 0],
	blanchedalmond: [255, 235, 205],
	blue: [0, 0, 255],
	blueviolet: [138, 43, 226],
	brown: [165, 42, 42],
	burlywood: [222, 184, 135],
	cadetblue: [95, 158, 160],
	chartreuse: [127, 255, 0],
	chocolate: [210, 105, 30],
	coral: [255, 127, 80],
	cornflowerblue: [100, 149, 237],
	cornsilk: [255, 248, 220],
	crimson: [220, 20, 60],
	cyan: [0, 255, 255],
	darkblue: [0, 0, 139],
	darkcyan: [0, 139, 139],
	darkgoldenrod: [184, 134, 11],
	darkgray: [169, 169, 169],
	darkgreen: [0, 100, 0],
	darkgrey: [169, 169, 169],
	darkkhaki: [189, 183, 107],
	darkmagenta: [139, 0, 139],
	darkolivegreen: [85, 107, 47],
	darkorange: [255, 140, 0],
	darkorchid: [153, 50, 204],
	darkred: [139, 0, 0],
	darksalmon: [233, 150, 122],
	darkseagreen: [143, 188, 143],
	darkslateblue: [72, 61, 139],
	darkslategray: [47, 79, 79],
	darkslategrey: [47, 79, 79],
	darkturquoise: [0, 206, 209],
	darkviolet: [148, 0, 211],
	deeppink: [255, 20, 147],
	deepskyblue: [0, 191, 255],
	dimgray: [105, 105, 105],
	dimgrey: [105, 105, 105],
	dodgerblue: [30, 144, 255],
	firebrick: [178, 34, 34],
	floralwhite: [255, 250, 240],
	forestgreen: [34, 139, 34],
	fuchsia: [255, 0, 255],
	gainsboro: [220, 220, 220],
	ghostwhite: [248, 248, 255],
	gold: [255, 215, 0],
	goldenrod: [218, 165, 32],
	gray: [128, 128, 128],
	green: [0, 128, 0],
	greenyellow: [173, 255, 47],
	grey: [128, 128, 128],
	honeydew: [240, 255, 240],
	hotpink: [255, 105, 180],
	indianred: [205, 92, 92],
	indigo: [75, 0, 130],
	ivory: [255, 255, 240],
	khaki: [240, 230, 140],
	lavender: [230, 230, 250],
	lavenderblush: [255, 240, 245],
	lawngreen: [124, 252, 0],
	lemonchiffon: [255, 250, 205],
	lightblue: [173, 216, 230],
	lightcoral: [240, 128, 128],
	lightcyan: [224, 255, 255],
	lightgoldenrodyellow: [250, 250, 210],
	lightgray: [211, 211, 211],
	lightgreen: [144, 238, 144],
	lightgrey: [211, 211, 211],
	lightpink: [255, 182, 193],
	lightsalmon: [255, 160, 122],
	lightseagreen: [32, 178, 170],
	lightskyblue: [135, 206, 250],
	lightslategray: [119, 136, 153],
	lightslategrey: [119, 136, 153],
	lightsteelblue: [176, 196, 222],
	lightyellow: [255, 255, 224],
	lime: [0, 255, 0],
	limegreen: [50, 205, 50],
	linen: [250, 240, 230],
	magenta: [255, 0, 255],
	maroon: [128, 0, 0],
	mediumaquamarine: [102, 205, 170],
	mediumblue: [0, 0, 205],
	mediumorchid: [186, 85, 211],
	mediumpurple: [147, 112, 219],
	mediumseagreen: [60, 179, 113],
	mediumslateblue: [123, 104, 238],
	mediumspringgreen: [0, 250, 154],
	mediumturquoise: [72, 209, 204],
	mediumvioletred: [199, 21, 133],
	midnightblue: [25, 25, 112],
	mintcream: [245, 255, 250],
	mistyrose: [255, 228, 225],
	moccasin: [255, 228, 181],
	navajowhite: [255, 222, 173],
	navy: [0, 0, 128],
	oldlace: [253, 245, 230],
	olive: [128, 128, 0],
	olivedrab: [107, 142, 35],
	orange: [255, 165, 0],
	orangered: [255, 69, 0],
	orchid: [218, 112, 214],
	palegoldenrod: [238, 232, 170],
	palegreen: [152, 251, 152],
	paleturquoise: [175, 238, 238],
	palevioletred: [219, 112, 147],
	papayawhip: [255, 239, 213],
	peachpuff: [255, 218, 185],
	peru: [205, 133, 63],
	pink: [255, 192, 203],
	plum: [221, 160, 221],
	powderblue: [176, 224, 230],
	purple: [128, 0, 128],
	rebeccapurple: [102, 51, 153],
	red: [255, 0, 0],
	rosybrown: [188, 143, 143],
	royalblue: [65, 105, 225],
	saddlebrown: [139, 69, 19],
	salmon: [250, 128, 114],
	sandybrown: [244, 164, 96],
	seagreen: [46, 139, 87],
	seashell: [255, 245, 238],
	sienna: [160, 82, 45],
	silver: [192, 192, 192],
	skyblue: [135, 206, 235],
	slateblue: [106, 90, 205],
	slategray: [112, 128, 144],
	slategrey: [112, 128, 144],
	snow: [255, 250, 250],
	springgreen: [0, 255, 127],
	steelblue: [70, 130, 180],
	tan: [210, 180, 140],
	teal: [0, 128, 128],
	thistle: [216, 191, 216],
	tomato: [255, 99, 71],
	turquoise: [64, 224, 208],
	violet: [238, 130, 238],
	wheat: [245, 222, 179],
	white: [255, 255, 255],
	whitesmoke: [245, 245, 245],
	yellow: [255, 255, 0],
	yellowgreen: [154, 205, 50],
}

for (const key in colors) Object.freeze(colors[key]);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.freeze(colors));

/***/ }),

/***/ "./node_modules/es-toolkit/dist/function/debounce.mjs":
/*!************************************************************!*\
  !*** ./node_modules/es-toolkit/dist/function/debounce.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   debounce: () => (/* binding */ debounce)
/* harmony export */ });
function debounce(func, debounceMs, { signal, edges } = {}) {
    let pendingThis = undefined;
    let pendingArgs = null;
    const leading = edges != null && edges.includes('leading');
    const trailing = edges == null || edges.includes('trailing');
    const invoke = () => {
        if (pendingArgs !== null) {
            func.apply(pendingThis, pendingArgs);
            pendingThis = undefined;
            pendingArgs = null;
        }
    };
    const onTimerEnd = () => {
        if (trailing) {
            invoke();
        }
        cancel();
    };
    let timeoutId = null;
    const schedule = () => {
        if (timeoutId != null) {
            clearTimeout(timeoutId);
        }
        timeoutId = setTimeout(() => {
            timeoutId = null;
            onTimerEnd();
        }, debounceMs);
    };
    const cancelTimer = () => {
        if (timeoutId !== null) {
            clearTimeout(timeoutId);
            timeoutId = null;
        }
    };
    const cancel = () => {
        cancelTimer();
        pendingThis = undefined;
        pendingArgs = null;
    };
    const flush = () => {
        invoke();
    };
    const debounced = function (...args) {
        if (signal?.aborted) {
            return;
        }
        pendingThis = this;
        pendingArgs = args;
        const isFirstCall = timeoutId == null;
        schedule();
        if (leading && isFirstCall) {
            invoke();
        }
    };
    debounced.schedule = schedule;
    debounced.cancel = cancel;
    debounced.flush = flush;
    signal?.addEventListener('abort', cancel, { once: true });
    return debounced;
}




/***/ }),

/***/ "./node_modules/es-toolkit/dist/function/throttle.mjs":
/*!************************************************************!*\
  !*** ./node_modules/es-toolkit/dist/function/throttle.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   throttle: () => (/* binding */ throttle)
/* harmony export */ });
/* harmony import */ var _debounce_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debounce.mjs */ "./node_modules/es-toolkit/dist/function/debounce.mjs");


function throttle(func, throttleMs, { signal, edges = ['leading', 'trailing'] } = {}) {
    let pendingAt = null;
    const debounced = (0,_debounce_mjs__WEBPACK_IMPORTED_MODULE_0__.debounce)(function (...args) {
        pendingAt = Date.now();
        func.apply(this, args);
    }, throttleMs, { signal, edges });
    const throttled = function (...args) {
        if (pendingAt == null) {
            pendingAt = Date.now();
        }
        if (Date.now() - pendingAt >= throttleMs) {
            pendingAt = Date.now();
            func.apply(this, args);
            debounced.cancel();
            debounced.schedule();
            return;
        }
        debounced.apply(this, args);
    };
    throttled.cancel = debounced.cancel;
    throttled.flush = debounced.flush;
    return throttled;
}




/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX2NhbGNpdGUtY29sb3ItcGlja2VyX2luZGV4X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzRDO0FBQ0k7QUFDUDtBQUNLO0FBQ0s7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0ZBQWtGLEtBQUssOERBQUssTUFBTSw4Q0FBSSxzQkFBc0IsT0FBTyxRQUFRLDREQUFZO0FBQzFLLDZCQUE2QixPQUFPO0FBQ3BDO0FBQ0E7QUFDQSxDQUFDLEdBQUcsWUFBWSxVQUFVLFNBQVMsU0FBUyxZQUFZLG9CQUFvQixRQUFRLFNBQVMsNkNBQU8sRUFBRSxjQUFjLDBEQUFHLFFBQVEsK0JBQStCLGdEQUFZLFFBQVE7QUFJaEw7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3BCRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1FOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0JBQStCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU9FOzs7Ozs7Ozs7Ozs7Ozs7O0FDbkNGO0FBQ0E7QUFDQTtBQUNtRTtBQUNuRTtBQUNBLFNBQVMsaUZBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUdFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJGO0FBQ0E7QUFDQTtBQUMwQjtBQUN1RjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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RUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsRUFBRSxFQUFDOzs7Ozs7Ozs7Ozs7Ozs7QUN0T2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlFQUFlLHFCQUFxQixFOzs7Ozs7Ozs7Ozs7Ozs7O0FDeEpHO0FBQ0g7O0FBRXBDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdDQUFnQyxxREFBTztBQUN2QyxxQkFBcUIscURBQU87QUFDNUI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixxREFBTztBQUNoQztBQUNBOztBQUVBO0FBQ0E7O0FBRUEsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLG9EQUFXO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEscURBQU87QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGFBQWEscURBQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxTQUFTLFFBQVEsRUFBRSxxREFBTztBQUMxQjtBQUNBLGNBQWMsbUJBQW1CO0FBQ2pDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxxREFBTztBQUNwQixjQUFjLGNBQWM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSwyQkFBMkIsb0RBQVc7QUFDdEM7QUFDQTtBQUNBLFNBQVMsb0RBQVc7QUFDcEIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9EQUFXO0FBQ3BCLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLFNBQVMsVUFBVSxFQUFFLHFEQUFPO0FBQzVCLFNBQVMsUUFBUSxFQUFFLHFEQUFPOztBQUUxQixrQkFBa0IsY0FBYztBQUNoQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxxREFBTztBQUNoQixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVMsb0RBQVc7QUFDcEIsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLG9EQUFXO0FBQ3BCLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxrQkFBa0IsT0FBTztBQUN6QjtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4Qjs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsUUFBUSxRQUFRO0FBQ3BDOztBQUVBLFlBQVksUUFBUSxRQUFRLFFBQVE7QUFDcEM7O0FBRUEsWUFBWSxRQUFRLFFBQVEsT0FBTztBQUNuQzs7QUFFQSxZQUFZLFFBQVEsUUFBUSxPQUFPO0FBQ25DOztBQUVBLFlBQVksUUFBUSxRQUFRLE9BQU87QUFDbkM7O0FBRUEsWUFBWSxRQUFRLFFBQVEsT0FBTztBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMEVBQTBFOztBQUUxRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0QsRUFBRSxTQUFTLEVBQUU7QUFDN0Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWEsYUFBYTtBQUMxQzs7QUFFQTtBQUNBLGdCQUFnQixhQUFhLGFBQWE7QUFDMUM7O0FBRUE7QUFDQSxnQkFBZ0IsYUFBYSxhQUFhO0FBQzFDOztBQUVBO0FBQ0EsZ0JBQWdCLGFBQWEsYUFBYTtBQUMxQzs7QUFFQTtBQUNBLGdCQUFnQixhQUFhLGFBQWE7QUFDMUM7O0FBRUE7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OztBQ245QjJDO0FBQ1o7O0FBRS9COztBQUVBLDJCQUEyQix1REFBVzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBLGFBQWEsUUFBUSxpQkFBaUIsWUFBWTtBQUNsRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsd0RBQXdELE9BQU8sdURBQVcscUJBQXFCO0FBQy9GLHNEQUFzRCxPQUFPLHVEQUFXLG1CQUFtQjs7QUFFM0YsZ0JBQWdCLHFEQUFLO0FBQ3JCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsT0FBTyxFQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FDaEZvQjs7QUFFM0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix1REFBVzs7QUFFdkMsV0FBVyxRQUFRLGlCQUFpQixZQUFZO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCOztBQUU1Qjs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLHVEQUFXOztBQUUzQyxZQUFZLFFBQVEsb0JBQW9CLFlBQVk7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsdURBQVc7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQVc7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsV0FBVyxRQUFRLGlCQUFpQixZQUFZO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlFQUFlLEtBQUssRUFBQzs7Ozs7Ozs7Ozs7Ozs7O0FDakdyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpRUFBZSxxQkFBcUIsRTs7Ozs7Ozs7Ozs7Ozs7QUN4SnBDLHNDQUFzQyxnQkFBZ0IsSUFBSTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsWUFBWTtBQUM1RDtBQUNBOztBQUVvQjs7Ozs7Ozs7Ozs7Ozs7OztBQzdEc0I7O0FBRTFDLHNDQUFzQywwQ0FBMEMsSUFBSTtBQUNwRjtBQUNBLHNCQUFzQix1REFBUTtBQUM5QjtBQUNBO0FBQ0EsS0FBSyxnQkFBZ0IsZUFBZTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9YQnV0dG9uLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9jb3JlLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9tYXRoLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy91c2VDYW5jZWxhYmxlLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy91dGlscy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtY29sb3ItcGlja2VyLWhleC1pbnB1dC9jdXN0b21FbGVtZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1jb2xvci1waWNrZXItaGV4LWlucHV0L2luZGV4LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1jb2xvci1waWNrZXIvY3VzdG9tRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtY29sb3ItcGlja2VyL2luZGV4LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1pbnB1dC10ZXh0L2N1c3RvbUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLWlucHV0LXRleHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXN3YXRjaC1ncm91cC9jdXN0b21FbGVtZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1zd2F0Y2gtZ3JvdXAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXN3YXRjaC9jdXN0b21FbGVtZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1zd2F0Y2gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXRhYi1uYXYvY3VzdG9tRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtdGFiLW5hdi9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtdGFiLXRpdGxlL2N1c3RvbUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXRhYi10aXRsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtdGFiL2N1c3RvbUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXRhYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtdGFicy9jdXN0b21FbGVtZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS10YWJzL2luZGV4LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL2NvbG9yLXN0cmluZy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9jb2xvci1zdHJpbmcvbm9kZV9tb2R1bGVzL2NvbG9yLW5hbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvY29sb3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvY29sb3Ivbm9kZV9tb2R1bGVzL2NvbG9yLWNvbnZlcnQvY29udmVyc2lvbnMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvY29sb3Ivbm9kZV9tb2R1bGVzL2NvbG9yLWNvbnZlcnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvY29sb3Ivbm9kZV9tb2R1bGVzL2NvbG9yLWNvbnZlcnQvcm91dGUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvY29sb3Ivbm9kZV9tb2R1bGVzL2NvbG9yLW5hbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvZXMtdG9vbGtpdC9kaXN0L2Z1bmN0aW9uL2RlYm91bmNlLm1qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9lcy10b29sa2l0L2Rpc3QvZnVuY3Rpb24vdGhyb3R0bGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyByZWYgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvcmVmLmpzXCI7XG5pbXBvcnQgeyBrZXllZCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9rZXllZC5qc1wiO1xuaW1wb3J0IHsgbm90aGluZywgaHRtbCB9IGZyb20gXCJsaXQtaHRtbFwiO1xuaW1wb3J0IHsgc2FmZUNsYXNzTWFwIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBnIGFzIGdldEljb25TY2FsZSB9IGZyb20gXCIuL2NvbXBvbmVudC5qc1wiO1xuY29uc3QgQ1NTID0ge1xuICBidXR0b246IFwieC1idXR0b25cIixcbiAgYnV0dG9uUm91bmQ6IFwieC1idXR0b24tLXJvdW5kXCJcbn07XG5jb25zdCBYQnV0dG9uID0gKHsgZGlzYWJsZWQsIGZvY3VzYWJsZSwga2V5LCBsYWJlbCwgb25DbGljaywgcmVmOiByZWYkMSwgcm91bmQgPSB0cnVlLCBzY2FsZSwgdGl0bGUgfSkgPT4ga2V5ZWQoa2V5LCBodG1sYDxidXR0b24gLmFyaWFMYWJlbD0ke2xhYmVsfSBjbGFzcz0ke3NhZmVDbGFzc01hcCh7XG4gIFsoKHNjYWxlMikgPT4gYHgtYnV0dG9uLS0ke3NjYWxlMn1gKShzY2FsZSldOiB0cnVlLFxuICBbQ1NTLmJ1dHRvbl06IHRydWUsXG4gIFtDU1MuYnV0dG9uUm91bmRdOiByb3VuZFxufSl9IC5kaXNhYmxlZD0ke2Rpc2FibGVkfSBAY2xpY2s9JHtvbkNsaWNrfSAudGFiSW5kZXg9JHtmb2N1c2FibGUgPyAwIDogLTF9IHRpdGxlPSR7dGl0bGUgPz8gbm90aGluZ30gdHlwZT1idXR0b24gJHtyZWYocmVmJDEpfT48Y2FsY2l0ZS1pY29uIGljb249eCAuc2NhbGU9JHtnZXRJY29uU2NhbGUoc2NhbGUpfT48L2NhbGNpdGUtaWNvbj48L2J1dHRvbj5gKTtcbmV4cG9ydCB7XG4gIENTUyBhcyBDLFxuICBYQnV0dG9uIGFzIFhcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuY29uc3QgY2FsY2l0ZVNpemUyNCA9IFwiMjRweFwiO1xuY29uc3QgY2FsY2l0ZVNpemUzMiA9IFwiMzJweFwiO1xuY29uc3QgY2FsY2l0ZVNpemU0NCA9IFwiNDRweFwiO1xuY29uc3QgY2FsY2l0ZVNpemU0OCA9IFwiNDhweFwiO1xuZXhwb3J0IHtcbiAgY2FsY2l0ZVNpemUzMiBhcyBhLFxuICBjYWxjaXRlU2l6ZTQ0IGFzIGIsXG4gIGNhbGNpdGVTaXplMjQgYXMgYyxcbiAgY2FsY2l0ZVNpemU0OCBhcyBkXG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmNvbnN0IGNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4gTWF0aC5tYXgobWluLCBNYXRoLm1pbih2YWx1ZSwgbWF4KSk7XG5jb25zdCBkZWNpbWFsTnVtYmVyUmVnZXggPSBuZXcgUmVnRXhwKC8oPzpcXC4oXFxkKykpPyg/OltlRV0oWystXT9cXGQrKSk/JC8pO1xuY29uc3QgZGVjaW1hbFBsYWNlcyA9ICh2YWx1ZSkgPT4ge1xuICBjb25zdCBtYXRjaCA9IChcIlwiICsgdmFsdWUpLm1hdGNoKGRlY2ltYWxOdW1iZXJSZWdleCk7XG4gIGlmICghbWF0Y2ggfHwgcGFyc2VJbnQobWF0Y2hbMV0pID09PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIE1hdGgubWF4KFxuICAgIDAsXG4gICAgLy8gTnVtYmVyIG9mIGRpZ2l0cyByaWdodCBvZiBkZWNpbWFsIHBvaW50LlxuICAgIChtYXRjaFsxXSA/IG1hdGNoWzFdLmxlbmd0aCA6IDApIC0gLy8gQWRqdXN0IGZvciBzY2llbnRpZmljIG5vdGF0aW9uLlxuICAgIChtYXRjaFsyXSA/ICttYXRjaFsyXSA6IDApXG4gICk7XG59O1xuZnVuY3Rpb24gZ2V0RGVjaW1hbHModmFsdWUpIHtcbiAgaWYgKGRlY2ltYWxQbGFjZXModmFsdWUpID4gMCAmJiB2YWx1ZSA+IDApIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChgMC4ke3ZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdfWApO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHJlbWFwKHZhbHVlLCBmcm9tTWluLCBmcm9tTWF4LCB0b01pbiwgdG9NYXgpIHtcbiAgcmV0dXJuICh2YWx1ZSAtIGZyb21NaW4pICogKHRvTWF4IC0gdG9NaW4pIC8gKGZyb21NYXggLSBmcm9tTWluKSArIHRvTWluO1xufVxuZnVuY3Rpb24gY2xvc2VUb1JhbmdlRWRnZSh2YWx1ZSwgcmFuZ2UsIHRocmVzaG9sZCkge1xuICByZXR1cm4gdmFsdWUgPCB0aHJlc2hvbGQgPyAtMSA6IHZhbHVlID4gcmFuZ2UgLSB0aHJlc2hvbGQgPyAxIDogMDtcbn1cbmV4cG9ydCB7XG4gIGNsb3NlVG9SYW5nZUVkZ2UgYXMgYSxcbiAgY2xhbXAgYXMgYyxcbiAgZGVjaW1hbFBsYWNlcyBhcyBkLFxuICBnZXREZWNpbWFscyBhcyBnLFxuICByZW1hcCBhcyByXG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IG1ha2VHZW5lcmljQ29udHJvbGxlciB9IGZyb20gXCJAYXJjZ2lzL2x1bWluYS9jb250cm9sbGVyc1wiO1xuY29uc3QgdXNlQ2FuY2VsYWJsZSA9ICgpID0+IHtcbiAgcmV0dXJuIG1ha2VHZW5lcmljQ29udHJvbGxlcigoXywgY29udHJvbGxlcikgPT4ge1xuICAgIGNvbnN0IHJlc291cmNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29udHJvbGxlci5vbkRpc2Nvbm5lY3RlZCgoKSA9PiB7XG4gICAgICByZXNvdXJjZXMuZm9yRWFjaCgocmVzb3VyY2UpID0+IHJlc291cmNlLmNhbmNlbCgpKTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgYWRkOiAocmVzb3VyY2VPclJlc291cmNlcykgPT4ge1xuICAgICAgICBbcmVzb3VyY2VPclJlc291cmNlc10uZmxhdCgpLmZvckVhY2goKHJlc291cmNlKSA9PiByZXNvdXJjZXMuYWRkKHJlc291cmNlKSk7XG4gICAgICB9LFxuICAgICAgcmVzb3VyY2VzXG4gICAgfTtcbiAgfSk7XG59O1xuZXhwb3J0IHtcbiAgdXNlQ2FuY2VsYWJsZSBhcyB1XG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCBDb2xvciBmcm9tIFwiY29sb3JcIjtcbmltcG9ydCB7IGMgYXMgY2FsY2l0ZVNwYWNpbmdGaXhlZFhsLCBhIGFzIGNhbGNpdGVTcGFjaW5nRml4ZWRNZCwgYiBhcyBjYWxjaXRlU3BhY2luZ0ZpeGVkU20gfSBmcm9tIFwiLi9nbG9iYWwuanNcIjtcbmNvbnN0IENTUyA9IHtcbiAgY2hhbm5lbDogXCJjaGFubmVsXCIsXG4gIGNoYW5uZWxzOiBcImNoYW5uZWxzXCIsXG4gIGNvbG9yRmllbGQ6IFwiY29sb3ItZmllbGRcIixcbiAgY29sb3JGaWVsZFNjb3BlOiBcInNjb3BlLS1jb2xvci1maWVsZFwiLFxuICBjb2xvck1vZGU6IFwiY29sb3ItbW9kZVwiLFxuICBjb2xvck1vZGVDb250YWluZXI6IFwiY29sb3ItbW9kZS1jb250YWluZXJcIixcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICBjb250cm9sOiBcImNvbnRyb2xcIixcbiAgY29udHJvbEFuZFNjb3BlOiBcImNvbnRyb2wtYW5kLXNjb3BlXCIsXG4gIGNvbnRyb2xTZWN0aW9uOiBcImNvbnRyb2wtc2VjdGlvblwiLFxuICBkZWxldGVDb2xvcjogXCJkZWxldGUtY29sb3JcIixcbiAgaGVhZGVyOiBcImhlYWRlclwiLFxuICBoZXhBbmRDaGFubmVsc0dyb3VwOiBcImhleC1hbmQtY2hhbm5lbHMtZ3JvdXBcIixcbiAgaGV4T3B0aW9uczogXCJjb2xvci1oZXgtb3B0aW9uc1wiLFxuICBodWVTY29wZTogXCJzY29wZS0taHVlXCIsXG4gIGh1ZVNsaWRlcjogXCJodWUtc2xpZGVyXCIsXG4gIG9wYWNpdHlTY29wZTogXCJzY29wZS0tb3BhY2l0eVwiLFxuICBvcGFjaXR5U2xpZGVyOiBcIm9wYWNpdHktc2xpZGVyXCIsXG4gIHByZXZpZXc6IFwicHJldmlld1wiLFxuICBwcmV2aWV3QW5kU2xpZGVyczogXCJwcmV2aWV3LWFuZC1zbGlkZXJzXCIsXG4gIHNhdmVDb2xvcjogXCJzYXZlLWNvbG9yXCIsXG4gIHNhdmVkQ29sb3I6IFwic2F2ZWQtY29sb3JcIixcbiAgc2F2ZWRDb2xvcnNCdXR0b25zOiBcInNhdmVkLWNvbG9ycy1idXR0b25zXCIsXG4gIHNhdmVkQ29sb3JzU2VjdGlvbjogXCJzYXZlZC1jb2xvcnMtc2VjdGlvblwiLFxuICBzY29wZTogXCJzY29wZVwiLFxuICBzZWN0aW9uOiBcInNlY3Rpb25cIixcbiAgc2xpZGVyOiBcInNsaWRlclwiLFxuICBzbGlkZXJzOiBcInNsaWRlcnNcIixcbiAgc3BsaXRTZWN0aW9uOiBcInNlY3Rpb24tLXNwbGl0XCIsXG4gIHN3YXRjaEdyb3VwOiBcInN3YXRjaC1ncm91cFwiXG59O1xuY29uc3QgREVGQVVMVF9DT0xPUiA9IENvbG9yKFwiIzAwN0FDMlwiKTtcbmNvbnN0IERFRkFVTFRfU1RPUkFHRV9LRVlfUFJFRklYID0gXCJjYWxjaXRlLWNvbG9yLVwiO1xuY29uc3QgUkdCX0xJTUlUUyA9IHtcbiAgcjogMjU1LFxuICBnOiAyNTUsXG4gIGI6IDI1NVxufTtcbmNvbnN0IEhTVl9MSU1JVFMgPSB7XG4gIGg6IDM2MCxcbiAgczogMTAwLFxuICB2OiAxMDBcbn07XG5jb25zdCBIVUVfTElNSVRfQ09OU1RSQUlORUQgPSBIU1ZfTElNSVRTLmggLSAxO1xuY29uc3QgT1BBQ0lUWV9MSU1JVFMgPSB7XG4gIG1pbjogMCxcbiAgbWF4OiAxMDBcbn07XG5jb25zdCBTVEFUSUNfRElNRU5TSU9OUyA9IHtcbiAgczoge1xuICAgIGdhcDogcGFyc2VJbnQoY2FsY2l0ZVNwYWNpbmdGaXhlZFNtKSxcbiAgICBzbGlkZXI6IHtcbiAgICAgIGhlaWdodDogMTJcbiAgICB9LFxuICAgIHRodW1iOiB7XG4gICAgICByYWRpdXM6IDdcbiAgICB9LFxuICAgIHByZXZpZXc6IHtcbiAgICAgIHNpemU6IDIwXG4gICAgfSxcbiAgICBtaW5XaWR0aDogMjAwXG4gIH0sXG4gIG06IHtcbiAgICBnYXA6IHBhcnNlSW50KGNhbGNpdGVTcGFjaW5nRml4ZWRNZCksXG4gICAgc2xpZGVyOiB7XG4gICAgICBoZWlnaHQ6IDEyXG4gICAgfSxcbiAgICB0aHVtYjoge1xuICAgICAgcmFkaXVzOiA3XG4gICAgfSxcbiAgICBwcmV2aWV3OiB7XG4gICAgICBzaXplOiAyNFxuICAgIH0sXG4gICAgbWluV2lkdGg6IDI0MFxuICB9LFxuICBsOiB7XG4gICAgZ2FwOiBwYXJzZUludChjYWxjaXRlU3BhY2luZ0ZpeGVkWGwpLFxuICAgIHNsaWRlcjoge1xuICAgICAgaGVpZ2h0OiAxMlxuICAgIH0sXG4gICAgdGh1bWI6IHtcbiAgICAgIHJhZGl1czogN1xuICAgIH0sXG4gICAgcHJldmlldzoge1xuICAgICAgc2l6ZTogMzJcbiAgICB9LFxuICAgIG1pbldpZHRoOiAzMDRcbiAgfVxufTtcbmNvbnN0IFNDT1BFX1NJWkUgPSAxO1xuY29uc3QgSUNPTlMgPSB7XG4gIG1pbnVzOiBcIm1pbnVzXCIsXG4gIHBsdXM6IFwicGx1c1wiXG59O1xuY29uc3QgaGV4Q2hhciA9IC9eWzAtOUEtRl0kL2k7XG5jb25zdCBzaG9ydGhhbmRIZXggPSAvXiNbMC05QS1GXXszfSQvaTtcbmNvbnN0IGxvbmdoYW5kSGV4ID0gL14jWzAtOUEtRl17Nn0kL2k7XG5jb25zdCBzaG9ydGhhbmRIZXhXaXRoQWxwaGEgPSAvXiNbMC05QS1GXXs0fSQvaTtcbmNvbnN0IGxvbmdoYW5kSGV4V2l0aEFscGhhID0gL14jWzAtOUEtRl17OH0kL2k7XG5jb25zdCBhbHBoYVRvT3BhY2l0eSA9IChhbHBoYSkgPT4gTnVtYmVyKChhbHBoYSAqIDEwMCkudG9GaXhlZCgpKTtcbmNvbnN0IG9wYWNpdHlUb0FscGhhID0gKG9wYWNpdHkpID0+IE51bWJlcigob3BhY2l0eSAvIDEwMCkudG9GaXhlZCgyKSk7XG5mdW5jdGlvbiBpc1ZhbGlkSGV4KGhleCwgaGFzQWxwaGEgPSBmYWxzZSkge1xuICByZXR1cm4gaXNTaG9ydGhhbmRIZXgoaGV4LCBoYXNBbHBoYSkgfHwgaXNMb25naGFuZEhleChoZXgsIGhhc0FscGhhKTtcbn1cbmZ1bmN0aW9uIGV2YWx1YXRlSGV4KGhleCwgbGVuZ3RoLCBwYXR0ZXJuKSB7XG4gIGlmICghaGV4KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBoZXgubGVuZ3RoID09PSBsZW5ndGggJiYgcGF0dGVybi50ZXN0KGhleCk7XG59XG5mdW5jdGlvbiBpc1Nob3J0aGFuZEhleChoZXgsIGhhc0FscGhhID0gZmFsc2UpIHtcbiAgY29uc3QgaGV4TGVuZ3RoID0gaGFzQWxwaGEgPyA1IDogNDtcbiAgY29uc3QgaGV4UGF0dGVybiA9IGhhc0FscGhhID8gc2hvcnRoYW5kSGV4V2l0aEFscGhhIDogc2hvcnRoYW5kSGV4O1xuICByZXR1cm4gZXZhbHVhdGVIZXgoaGV4LCBoZXhMZW5ndGgsIGhleFBhdHRlcm4pO1xufVxuZnVuY3Rpb24gaXNMb25naGFuZEhleChoZXgsIGhhc0FscGhhID0gZmFsc2UpIHtcbiAgY29uc3QgaGV4TGVuZ3RoID0gaGFzQWxwaGEgPyA5IDogNztcbiAgY29uc3QgaGV4UGF0dGVybiA9IGhhc0FscGhhID8gbG9uZ2hhbmRIZXhXaXRoQWxwaGEgOiBsb25naGFuZEhleDtcbiAgcmV0dXJuIGV2YWx1YXRlSGV4KGhleCwgaGV4TGVuZ3RoLCBoZXhQYXR0ZXJuKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUhleChoZXgsIGhhc0FscGhhID0gZmFsc2UsIGNvbnZlcnRGcm9tSGV4VG9IZXhhID0gZmFsc2UpIHtcbiAgaGV4ID0gaGV4LnRvTG93ZXJDYXNlKCk7XG4gIGlmICghaGV4LnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgaGV4ID0gYCMke2hleH1gO1xuICB9XG4gIGlmIChpc1Nob3J0aGFuZEhleChoZXgsIGhhc0FscGhhKSkge1xuICAgIHJldHVybiByZ2JUb0hleChoZXhUb1JHQihoZXgsIGhhc0FscGhhKSk7XG4gIH1cbiAgaWYgKGhhc0FscGhhICYmIGNvbnZlcnRGcm9tSGV4VG9IZXhhICYmIGlzVmFsaWRIZXgoXG4gICAgaGV4LFxuICAgIGZhbHNlXG4gICAgLyogd2Ugb25seSBjYXJlIGFib3V0IFJHQiBoZXggZm9yIGNvbnZlcnNpb24gKi9cbiAgKSkge1xuICAgIGNvbnN0IGlzU2hvcnRoYW5kID0gaXNTaG9ydGhhbmRIZXgoaGV4LCBmYWxzZSk7XG4gICAgcmV0dXJuIHJnYlRvSGV4KGhleFRvUkdCKGAke2hleH0ke2lzU2hvcnRoYW5kID8gXCJmXCIgOiBcImZmXCJ9YCwgdHJ1ZSkpO1xuICB9XG4gIHJldHVybiBoZXg7XG59XG5mdW5jdGlvbiBoZXhpZnkoY29sb3IsIGhhc0FscGhhID0gZmFsc2UpIHtcbiAgcmV0dXJuIGhhc0FscGhhID8gY29sb3IuaGV4YSgpIDogY29sb3IuaGV4KCk7XG59XG5mdW5jdGlvbiByZ2JUb0hleChjb2xvcikge1xuICBjb25zdCB7IHIsIGcsIGIgfSA9IGNvbG9yO1xuICBjb25zdCByQ2hhcnMgPSBudW1Ub0hleChyKTtcbiAgY29uc3QgZ0NoYXJzID0gbnVtVG9IZXgoZyk7XG4gIGNvbnN0IGJDaGFycyA9IG51bVRvSGV4KGIpO1xuICBjb25zdCBhbHBoYUNoYXJzID0gXCJhXCIgaW4gY29sb3IgPyBudW1Ub0hleChjb2xvci5hICogMjU1KSA6IFwiXCI7XG4gIHJldHVybiBgIyR7ckNoYXJzfSR7Z0NoYXJzfSR7YkNoYXJzfSR7YWxwaGFDaGFyc31gLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiBudW1Ub0hleChudW0pIHtcbiAgcmV0dXJuIG51bS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplQWxwaGEoY29sb3JPYmplY3QpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICAuLi5jb2xvck9iamVjdCxcbiAgICBhOiBjb2xvck9iamVjdC5hbHBoYSA/PyAxXG4gICAgLyogQ29sb3IoKSB3aWxsIG9taXQgYWxwaGEgaWYgMSAqL1xuICB9O1xuICBkZWxldGUgbm9ybWFsaXplZC5hbHBoYTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5mdW5jdGlvbiBub3JtYWxpemVDb2xvcihhbHBoYUNvbG9yT2JqZWN0KSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7IC4uLmFscGhhQ29sb3JPYmplY3QsIGFscGhhOiBhbHBoYUNvbG9yT2JqZWN0LmEgPz8gMSB9O1xuICBkZWxldGUgbm9ybWFsaXplZC5hO1xuICByZXR1cm4gbm9ybWFsaXplZDtcbn1cbmZ1bmN0aW9uIGhleFRvUkdCKGhleCwgaGFzQWxwaGEgPSBmYWxzZSkge1xuICBpZiAoIWlzVmFsaWRIZXgoaGV4LCBoYXNBbHBoYSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBoZXggPSBoZXgucmVwbGFjZShcIiNcIiwgXCJcIik7XG4gIGxldCByO1xuICBsZXQgZztcbiAgbGV0IGI7XG4gIGxldCBhO1xuICBjb25zdCBpc1Nob3J0aGFuZCA9IGhleC5sZW5ndGggPT09IDMgfHwgaGV4Lmxlbmd0aCA9PT0gNDtcbiAgaWYgKGlzU2hvcnRoYW5kKSB7XG4gICAgY29uc3QgW2ZpcnN0LCBzZWNvbmQsIHRoaXJkLCBmb3VydGhdID0gaGV4LnNwbGl0KFwiXCIpO1xuICAgIHIgPSBwYXJzZUludChgJHtmaXJzdH0ke2ZpcnN0fWAsIDE2KTtcbiAgICBnID0gcGFyc2VJbnQoYCR7c2Vjb25kfSR7c2Vjb25kfWAsIDE2KTtcbiAgICBiID0gcGFyc2VJbnQoYCR7dGhpcmR9JHt0aGlyZH1gLCAxNik7XG4gICAgYSA9IHBhcnNlSW50KGAke2ZvdXJ0aH0ke2ZvdXJ0aH1gLCAxNikgLyAyNTU7XG4gIH0gZWxzZSB7XG4gICAgciA9IHBhcnNlSW50KGhleC5zbGljZSgwLCAyKSwgMTYpO1xuICAgIGcgPSBwYXJzZUludChoZXguc2xpY2UoMiwgNCksIDE2KTtcbiAgICBiID0gcGFyc2VJbnQoaGV4LnNsaWNlKDQsIDYpLCAxNik7XG4gICAgYSA9IHBhcnNlSW50KGhleC5zbGljZSg2LCA4KSwgMTYpIC8gMjU1O1xuICB9XG4gIHJldHVybiBpc05hTihhKSA/IHsgciwgZywgYiB9IDogeyByLCBnLCBiLCBhIH07XG59XG5jb25zdCBlbnVtaWZ5ID0gKHgpID0+IHg7XG5jb25zdCBDU1NDb2xvck1vZGUgPSBlbnVtaWZ5KHtcbiAgSEVYOiBcImhleFwiLFxuICBIRVhBOiBcImhleGFcIixcbiAgUkdCX0NTUzogXCJyZ2ItY3NzXCIsXG4gIFJHQkFfQ1NTOiBcInJnYmEtY3NzXCIsXG4gIEhTTF9DU1M6IFwiaHNsLWNzc1wiLFxuICBIU0xBX0NTUzogXCJoc2xhLWNzc1wiXG59KTtcbmNvbnN0IE9iamVjdENvbG9yTW9kZSA9IGVudW1pZnkoe1xuICBSR0I6IFwicmdiXCIsXG4gIFJHQkE6IFwicmdiYVwiLFxuICBIU0w6IFwiaHNsXCIsXG4gIEhTTEE6IFwiaHNsYVwiLFxuICBIU1Y6IFwiaHN2XCIsXG4gIEhTVkE6IFwiaHN2YVwiXG59KTtcbmZ1bmN0aW9uIHBhcnNlTW9kZShjb2xvclZhbHVlKSB7XG4gIGlmICh0eXBlb2YgY29sb3JWYWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgICBjb25zdCB7IGxlbmd0aCB9ID0gY29sb3JWYWx1ZTtcbiAgICAgIGlmIChsZW5ndGggPT09IDQgfHwgbGVuZ3RoID09PSA3KSB7XG4gICAgICAgIHJldHVybiBDU1NDb2xvck1vZGUuSEVYO1xuICAgICAgfVxuICAgICAgaWYgKGxlbmd0aCA9PT0gNSB8fCBsZW5ndGggPT09IDkpIHtcbiAgICAgICAgcmV0dXJuIENTU0NvbG9yTW9kZS5IRVhBO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29sb3JWYWx1ZS5zdGFydHNXaXRoKFwicmdiYShcIikpIHtcbiAgICAgIHJldHVybiBDU1NDb2xvck1vZGUuUkdCQV9DU1M7XG4gICAgfVxuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCJyZ2IoXCIpKSB7XG4gICAgICByZXR1cm4gQ1NTQ29sb3JNb2RlLlJHQl9DU1M7XG4gICAgfVxuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCJoc2woXCIpKSB7XG4gICAgICByZXR1cm4gQ1NTQ29sb3JNb2RlLkhTTF9DU1M7XG4gICAgfVxuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoXCJoc2xhKFwiKSkge1xuICAgICAgcmV0dXJuIENTU0NvbG9yTW9kZS5IU0xBX0NTUztcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGVvZiBjb2xvclZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgaWYgKGhhc0NoYW5uZWxzKGNvbG9yVmFsdWUsIFwiclwiLCBcImdcIiwgXCJiXCIpKSB7XG4gICAgICByZXR1cm4gaGFzQ2hhbm5lbHMoY29sb3JWYWx1ZSwgXCJhXCIpID8gT2JqZWN0Q29sb3JNb2RlLlJHQkEgOiBPYmplY3RDb2xvck1vZGUuUkdCO1xuICAgIH1cbiAgICBpZiAoaGFzQ2hhbm5lbHMoY29sb3JWYWx1ZSwgXCJoXCIsIFwic1wiLCBcImxcIikpIHtcbiAgICAgIHJldHVybiBoYXNDaGFubmVscyhjb2xvclZhbHVlLCBcImFcIikgPyBPYmplY3RDb2xvck1vZGUuSFNMQSA6IE9iamVjdENvbG9yTW9kZS5IU0w7XG4gICAgfVxuICAgIGlmIChoYXNDaGFubmVscyhjb2xvclZhbHVlLCBcImhcIiwgXCJzXCIsIFwidlwiKSkge1xuICAgICAgcmV0dXJuIGhhc0NoYW5uZWxzKGNvbG9yVmFsdWUsIFwiYVwiKSA/IE9iamVjdENvbG9yTW9kZS5IU1ZBIDogT2JqZWN0Q29sb3JNb2RlLkhTVjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBoYXNDaGFubmVscyhjb2xvck9iamVjdCwgLi4uY2hhbm5lbHMpIHtcbiAgcmV0dXJuIGNoYW5uZWxzLmV2ZXJ5KChjaGFubmVsKSA9PiBjaGFubmVsICYmIGNvbG9yT2JqZWN0ICYmIGAke2NoYW5uZWx9YCBpbiBjb2xvck9iamVjdCk7XG59XG5mdW5jdGlvbiBjb2xvckVxdWFsKHZhbHVlMSwgdmFsdWUyKSB7XG4gIHJldHVybiB2YWx1ZTE/LnJnYigpLmFycmF5KCkudG9TdHJpbmcoKSA9PT0gdmFsdWUyPy5yZ2IoKS5hcnJheSgpLnRvU3RyaW5nKCk7XG59XG5mdW5jdGlvbiBhbHBoYUNvbXBhdGlibGUobW9kZSkge1xuICByZXR1cm4gbW9kZSA9PT0gQ1NTQ29sb3JNb2RlLkhFWEEgfHwgbW9kZSA9PT0gQ1NTQ29sb3JNb2RlLlJHQkFfQ1NTIHx8IG1vZGUgPT09IENTU0NvbG9yTW9kZS5IU0xBX0NTUyB8fCBtb2RlID09PSBPYmplY3RDb2xvck1vZGUuUkdCQSB8fCBtb2RlID09PSBPYmplY3RDb2xvck1vZGUuSFNMQSB8fCBtb2RlID09PSBPYmplY3RDb2xvck1vZGUuSFNWQTtcbn1cbmZ1bmN0aW9uIHRvQWxwaGFNb2RlKG1vZGUpIHtcbiAgY29uc3QgYWxwaGFNb2RlID0gbW9kZSA9PT0gQ1NTQ29sb3JNb2RlLkhFWCA/IENTU0NvbG9yTW9kZS5IRVhBIDogbW9kZSA9PT0gQ1NTQ29sb3JNb2RlLlJHQl9DU1MgPyBDU1NDb2xvck1vZGUuUkdCQV9DU1MgOiBtb2RlID09PSBDU1NDb2xvck1vZGUuSFNMX0NTUyA/IENTU0NvbG9yTW9kZS5IU0xBX0NTUyA6IG1vZGUgPT09IE9iamVjdENvbG9yTW9kZS5SR0IgPyBPYmplY3RDb2xvck1vZGUuUkdCQSA6IG1vZGUgPT09IE9iamVjdENvbG9yTW9kZS5IU0wgPyBPYmplY3RDb2xvck1vZGUuSFNMQSA6IG1vZGUgPT09IE9iamVjdENvbG9yTW9kZS5IU1YgPyBPYmplY3RDb2xvck1vZGUuSFNWQSA6IG1vZGU7XG4gIHJldHVybiBhbHBoYU1vZGU7XG59XG5mdW5jdGlvbiB0b05vbkFscGhhTW9kZShtb2RlKSB7XG4gIGNvbnN0IG5vbkFscGhhTW9kZSA9IG1vZGUgPT09IENTU0NvbG9yTW9kZS5IRVhBID8gQ1NTQ29sb3JNb2RlLkhFWCA6IG1vZGUgPT09IENTU0NvbG9yTW9kZS5SR0JBX0NTUyA/IENTU0NvbG9yTW9kZS5SR0JfQ1NTIDogbW9kZSA9PT0gQ1NTQ29sb3JNb2RlLkhTTEFfQ1NTID8gQ1NTQ29sb3JNb2RlLkhTTF9DU1MgOiBtb2RlID09PSBPYmplY3RDb2xvck1vZGUuUkdCQSA/IE9iamVjdENvbG9yTW9kZS5SR0IgOiBtb2RlID09PSBPYmplY3RDb2xvck1vZGUuSFNMQSA/IE9iamVjdENvbG9yTW9kZS5IU0wgOiBtb2RlID09PSBPYmplY3RDb2xvck1vZGUuSFNWQSA/IE9iamVjdENvbG9yTW9kZS5IU1YgOiBtb2RlO1xuICByZXR1cm4gbm9uQWxwaGFNb2RlO1xufVxuY29uc3QgYm9yZGVyV2lkdGhJblB4ID0gMTtcbmNvbnN0IGlubGluZVNpemVCb3JkZXJUb3RhbFdpZHRoID0gYm9yZGVyV2lkdGhJblB4ICogMjtcbmZ1bmN0aW9uIGdldFNsaWRlcldpZHRoKGF2YWlsYWJsZVdpZHRoLCBhY3RpdmVTdGF0aWNEaW1lbnNpb25zLCBoYXNBbHBoYSkge1xuICBjb25zdCBwcmV2aWV3V2lkdGggPSBoYXNBbHBoYSA/IFNUQVRJQ19ESU1FTlNJT05TW1wibFwiXS5wcmV2aWV3LnNpemUgOiBhY3RpdmVTdGF0aWNEaW1lbnNpb25zLnByZXZpZXcuc2l6ZTtcbiAgY29uc3QgZWZmZWN0aXZlV2lkdGggPSBhdmFpbGFibGVXaWR0aCAtIGlubGluZVNpemVCb3JkZXJUb3RhbFdpZHRoO1xuICBjb25zdCBpbmxpbmVTcGFjZUFyb3VuZEVsZW1lbnRzID0gYWN0aXZlU3RhdGljRGltZW5zaW9ucy5nYXAgKiAzO1xuICByZXR1cm4gTWF0aC5tYXgoZWZmZWN0aXZlV2lkdGggLSBpbmxpbmVTcGFjZUFyb3VuZEVsZW1lbnRzIC0gcHJldmlld1dpZHRoLCAwKTtcbn1cbmZ1bmN0aW9uIGdldENvbG9yRmllbGREaW1lbnNpb25zKGF2YWlsYWJsZVdpZHRoKSB7XG4gIGNvbnN0IGNvbG9yRmllbGRBc3BlY3RSYXRpbyA9IDEuODtcbiAgY29uc3QgZWZmZWN0aXZlV2lkdGggPSBhdmFpbGFibGVXaWR0aCAtIGlubGluZVNpemVCb3JkZXJUb3RhbFdpZHRoO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiBNYXRoLm1heChlZmZlY3RpdmVXaWR0aCwgMCksXG4gICAgaGVpZ2h0OiBNYXRoLm1heChNYXRoLmZsb29yKGVmZmVjdGl2ZVdpZHRoIC8gY29sb3JGaWVsZEFzcGVjdFJhdGlvKSwgMClcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIENTU0NvbG9yTW9kZSBhcyBDLFxuICBERUZBVUxUX0NPTE9SIGFzIEQsXG4gIEhTVl9MSU1JVFMgYXMgSCxcbiAgSUNPTlMgYXMgSSxcbiAgT1BBQ0lUWV9MSU1JVFMgYXMgTyxcbiAgUkdCX0xJTUlUUyBhcyBSLFxuICBTVEFUSUNfRElNRU5TSU9OUyBhcyBTLFxuICBpc0xvbmdoYW5kSGV4IGFzIGEsXG4gIGlzU2hvcnRoYW5kSGV4IGFzIGIsXG4gIGFscGhhVG9PcGFjaXR5IGFzIGMsXG4gIGhleENoYXIgYXMgZCxcbiAgZ2V0Q29sb3JGaWVsZERpbWVuc2lvbnMgYXMgZSxcbiAgREVGQVVMVF9TVE9SQUdFX0tFWV9QUkVGSVggYXMgZixcbiAgZ2V0U2xpZGVyV2lkdGggYXMgZyxcbiAgaGV4aWZ5IGFzIGgsXG4gIGlzVmFsaWRIZXggYXMgaSxcbiAgYWxwaGFDb21wYXRpYmxlIGFzIGosXG4gIGNvbG9yRXF1YWwgYXMgayxcbiAgbm9ybWFsaXplQ29sb3IgYXMgbCxcbiAgQ1NTIGFzIG0sXG4gIG5vcm1hbGl6ZUhleCBhcyBuLFxuICBvcGFjaXR5VG9BbHBoYSBhcyBvLFxuICBwYXJzZU1vZGUgYXMgcCxcbiAgdG9Ob25BbHBoYU1vZGUgYXMgcSxcbiAgcmdiVG9IZXggYXMgcixcbiAgSFVFX0xJTUlUX0NPTlNUUkFJTkVEIGFzIHMsXG4gIHRvQWxwaGFNb2RlIGFzIHQsXG4gIG5vcm1hbGl6ZUFscGhhIGFzIHUsXG4gIFNDT1BFX1NJWkUgYXMgdixcbiAgaGV4VG9SR0IgYXMgd1xufTtcbiIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBjIGFzIGN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGtleWVkIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2tleWVkLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcImNvbG9yXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBjcmVhdGVFdmVudCwgc2FmZUNsYXNzTWFwIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBjcmVhdGVSZWYsIHJlZiB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9yZWYuanNcIjtcbmltcG9ydCB7IG4gYXMgbm9ybWFsaXplSGV4LCBoIGFzIGhleGlmeSwgaSBhcyBpc1ZhbGlkSGV4LCBhIGFzIGlzTG9uZ2hhbmRIZXgsIGIgYXMgaXNTaG9ydGhhbmRIZXgsIHIgYXMgcmdiVG9IZXgsIG8gYXMgb3BhY2l0eVRvQWxwaGEsIGMgYXMgYWxwaGFUb09wYWNpdHksIE8gYXMgT1BBQ0lUWV9MSU1JVFMsIGQgYXMgaGV4Q2hhciB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXRpbHMuanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlU2V0Rm9jdXMgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3VzZVNldEZvY3VzLmpzXCI7XG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgaGV4SW5wdXQ6IFwiaGV4LWlucHV0XCIsXG4gIG9wYWNpdHlJbnB1dDogXCJvcGFjaXR5LWlucHV0XCJcbn07XG5jb25zdCBzdHlsZXMgPSBjc3NgOmhvc3R7LS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzOiB2YXIoIC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpICl9LmhleC1pbnB1dHstLWNhbGNpdGUtaW5wdXQtdGV4dC1iYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1pbnB1dC1iYWNrZ3JvdW5kLWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtdGV4dC1ib3JkZXItY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LWJvcmRlci1jb2xvcik7LS1jYWxjaXRlLWlucHV0LXRleHQtdGV4dC1jb2xvcjogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItaW5wdXQtdGV4dC1jb2xvcik7LS1jYWxjaXRlLWlucHV0LXByZWZpeC1iYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1pbnB1dC1wcmVmaXgtYmFja2dyb3VuZC1jb2xvcik7LS1jYWxjaXRlLWlucHV0LXByZWZpeC10ZXh0LWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1pbnB1dC1wcmVmaXgtdGV4dC1jb2xvcil9Lm9wYWNpdHktaW5wdXR7LS1jYWxjaXRlLWlucHV0LW51bWJlci1iYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1pbnB1dC1iYWNrZ3JvdW5kLWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtbnVtYmVyLWJvcmRlci1jb2xvcjogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItaW5wdXQtYm9yZGVyLWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtbnVtYmVyLXRleHQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LXRleHQtY29sb3IpOy0tY2FsY2l0ZS1pbnB1dC1zdWZmaXgtYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItaW5wdXQtc3VmZml4LWJhY2tncm91bmQtY29sb3IpOy0tY2FsY2l0ZS1pbnB1dC1zdWZmaXgtdGV4dC1jb2xvcjogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItaW5wdXQtc3VmZml4LXRleHQtY29sb3IpfTpob3N0e2Rpc3BsYXk6YmxvY2t9LmNvbnRhaW5lcntkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6MTAwJTtmbGV4LXdyYXA6bm93cmFwO2FsaWduLWl0ZW1zOmNlbnRlcn0uaGV4LWlucHV0e2ZsZXgtZ3JvdzoxO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZX0ub3BhY2l0eS1pbnB1dHtpbmxpbmUtc2l6ZToxMDBweDttYXJnaW4taW5saW5lLXN0YXJ0Oi0xcHh9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9YDtcbmNvbnN0IERFRkFVTFRfQ09MT1IgPSBDb2xvcigpO1xuY2xhc3MgQ29sb3JQaWNrZXJIZXhJbnB1dCBleHRlbmRzIExpdEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIHRoaXMuaGV4SW5wdXRSZWYgPSBjcmVhdGVSZWYoKTtcbiAgICB0aGlzLm9wYWNpdHlJbnB1dFJlZiA9IGNyZWF0ZVJlZigpO1xuICAgIHRoaXMuZm9jdXNTZXR0ZXIgPSB1c2VTZXRGb2N1cygpKHRoaXMpO1xuICAgIHRoaXMuaW50ZXJuYWxDb2xvciA9IERFRkFVTFRfQ09MT1I7XG4gICAgdGhpcy5hbHBoYUNoYW5uZWwgPSBmYWxzZTtcbiAgICB0aGlzLmFsbG93RW1wdHkgPSBmYWxzZTtcbiAgICB0aGlzLmhleExhYmVsID0gXCJIZXhcIjtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy52YWx1ZSA9IG5vcm1hbGl6ZUhleChoZXhpZnkoREVGQVVMVF9DT0xPUiwgdGhpcy5hbHBoYUNoYW5uZWwpLCB0aGlzLmFscGhhQ2hhbm5lbCwgdHJ1ZSk7XG4gICAgdGhpcy5jYWxjaXRlQ29sb3JQaWNrZXJIZXhJbnB1dENoYW5nZSA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGludGVybmFsQ29sb3I6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIGFscGhhQ2hhbm5lbDogWzUsIHt9LCB7IHR5cGU6IEJvb2xlYW4gfV0sIGFsbG93RW1wdHk6IFs1LCB7fSwgeyB0eXBlOiBCb29sZWFuIH1dLCBoZXhMYWJlbDogMSwgbWVzc2FnZXM6IFswLCB7fSwgeyBhdHRyaWJ1dGU6IGZhbHNlIH1dLCBudW1iZXJpbmdTeXN0ZW06IDEsIHNjYWxlOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgdmFsdWU6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBhc3luYyBzZXRGb2N1cyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNTZXR0ZXIoKCkgPT4gdGhpcy5oZXhJbnB1dFJlZi52YWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLnByZXZpb3VzTm9uTnVsbFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICBjb25zdCB7IGFsbG93RW1wdHksIGFscGhhQ2hhbm5lbCwgdmFsdWUgfSA9IHRoaXM7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplSGV4KHZhbHVlLCBhbHBoYUNoYW5uZWwpO1xuICAgICAgaWYgKGlzVmFsaWRIZXgobm9ybWFsaXplZCwgYWxwaGFDaGFubmVsKSkge1xuICAgICAgICB0aGlzLmludGVybmFsU2V0VmFsdWUobm9ybWFsaXplZCwgbm9ybWFsaXplZCwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoYWxsb3dFbXB0eSkge1xuICAgICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKHZvaWQgMCwgdm9pZCAwLCBmYWxzZSk7XG4gICAgfVxuICB9XG4gIHdpbGxVcGRhdGUoY2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmhhcyhcInZhbHVlXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy52YWx1ZSAhPT0gbm9ybWFsaXplSGV4KGhleGlmeShERUZBVUxUX0NPTE9SLCB0aGlzLmFscGhhQ2hhbm5lbCksIHRoaXMuYWxwaGFDaGFubmVsLCB0cnVlKSkpIHtcbiAgICAgIHRoaXMuaW50ZXJuYWxTZXRWYWx1ZSh0aGlzLnZhbHVlLCBjaGFuZ2VzLmdldChcInZhbHVlXCIpLCBmYWxzZSk7XG4gICAgfVxuICB9XG4gIG9uSGV4SW5wdXRCbHVyKCkge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLmhleElucHV0UmVmLnZhbHVlO1xuICAgIGNvbnN0IGlucHV0VmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIGNvbnN0IGhleCA9IGAjJHtpbnB1dFZhbHVlfWA7XG4gICAgY29uc3QgeyBhbGxvd0VtcHR5LCBpbnRlcm5hbENvbG9yIH0gPSB0aGlzO1xuICAgIGNvbnN0IHdpbGxDbGVhclZhbHVlID0gYWxsb3dFbXB0eSAmJiAhaW5wdXRWYWx1ZTtcbiAgICBjb25zdCBpc0xvbmdoYW5kID0gaXNMb25naGFuZEhleChoZXgpO1xuICAgIGNvbnN0IGFueVNob3J0aGFuZCA9IGlzU2hvcnRoYW5kSGV4KGhleCwgdHJ1ZSkgfHwgaXNTaG9ydGhhbmRIZXgoaGV4LCBmYWxzZSk7XG4gICAgaWYgKGFueVNob3J0aGFuZCkge1xuICAgICAgdGhpcy5vbkhleElucHV0Q2hhbmdlKCk7XG4gICAgfVxuICAgIGlmICh3aWxsQ2xlYXJWYWx1ZSB8fCBpc1ZhbGlkSGV4KGhleCkgJiYgaXNMb25naGFuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBub2RlLnZhbHVlID0gYWxsb3dFbXB0eSAmJiAhaW50ZXJuYWxDb2xvciA/IFwiXCIgOiB0aGlzLmZvcm1hdEhleEZvckludGVybmFsSW5wdXQocmdiVG9IZXgoXG4gICAgICAvLyBhbHdheXMgZGlzcGxheSBoZXggaW5wdXQgaW4gUlJHR0JCIGZvcm1hdFxuICAgICAgaW50ZXJuYWxDb2xvci5vYmplY3QoKVxuICAgICkpO1xuICB9XG4gIG9uT3BhY2l0eUlucHV0Qmx1cigpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5vcGFjaXR5SW5wdXRSZWYudmFsdWU7XG4gICAgY29uc3QgaW5wdXRWYWx1ZSA9IG5vZGUudmFsdWU7XG4gICAgY29uc3QgeyBhbGxvd0VtcHR5LCBpbnRlcm5hbENvbG9yIH0gPSB0aGlzO1xuICAgIGNvbnN0IHdpbGxDbGVhclZhbHVlID0gYWxsb3dFbXB0eSAmJiAhaW5wdXRWYWx1ZTtcbiAgICBpZiAod2lsbENsZWFyVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbm9kZS52YWx1ZSA9IGFsbG93RW1wdHkgJiYgIWludGVybmFsQ29sb3IgPyBcIlwiIDogdGhpcy5mb3JtYXRPcGFjaXR5Rm9ySW50ZXJuYWxJbnB1dChpbnRlcm5hbENvbG9yKTtcbiAgfVxuICBvbk9wYWNpdHlJbnB1dElucHV0KCkge1xuICAgIHRoaXMub25PcGFjaXR5SW5wdXRDaGFuZ2UoKTtcbiAgfVxuICBvbkhleElucHV0Q2hhbmdlKCkge1xuICAgIGNvbnN0IG5vZGVWYWx1ZSA9IHRoaXMuaGV4SW5wdXRSZWYudmFsdWUudmFsdWU7XG4gICAgbGV0IHZhbHVlID0gbm9kZVZhbHVlO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUhleCh2YWx1ZSwgZmFsc2UpO1xuICAgICAgY29uc3QgcHJlc2VydmVFeGlzdGluZ0FscGhhID0gaXNWYWxpZEhleChub3JtYWxpemVkKSAmJiB0aGlzLmFscGhhQ2hhbm5lbDtcbiAgICAgIGlmIChwcmVzZXJ2ZUV4aXN0aW5nQWxwaGEgJiYgdGhpcy5pbnRlcm5hbENvbG9yKSB7XG4gICAgICAgIGNvbnN0IGFscGhhSGV4ID0gbm9ybWFsaXplSGV4KHRoaXMuaW50ZXJuYWxDb2xvci5oZXhhKCksIHRydWUpLnNsaWNlKC0yKTtcbiAgICAgICAgdmFsdWUgPSBgJHtub3JtYWxpemVkICsgYWxwaGFIZXh9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKHZhbHVlLCB0aGlzLnZhbHVlKTtcbiAgfVxuICBvbk9wYWNpdHlJbnB1dENoYW5nZSgpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5vcGFjaXR5SW5wdXRSZWYudmFsdWU7XG4gICAgbGV0IHZhbHVlO1xuICAgIGlmICghbm9kZS52YWx1ZSkge1xuICAgICAgdmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhbHBoYSA9IG9wYWNpdHlUb0FscGhhKE51bWJlcihub2RlLnZhbHVlKSk7XG4gICAgICB2YWx1ZSA9IHRoaXMuaW50ZXJuYWxDb2xvcj8uYWxwaGEoYWxwaGEpLmhleGEoKTtcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKHZhbHVlLCB0aGlzLnZhbHVlKTtcbiAgfVxuICBvbklucHV0Rm9jdXMoZXZlbnQpIHtcbiAgICBjb25zdCBmb2N1c1RhcmdldCA9IGV2ZW50LnR5cGUgPT09IFwiY2FsY2l0ZUludGVybmFsSW5wdXRUZXh0Rm9jdXNcIiA/IHRoaXMuaGV4SW5wdXRSZWYgOiB0aGlzLm9wYWNpdHlJbnB1dFJlZjtcbiAgICBmb2N1c1RhcmdldC52YWx1ZS5zZWxlY3RUZXh0KCk7XG4gIH1cbiAgb25IZXhJbnB1dElucHV0KCkge1xuICAgIGNvbnN0IGhleElucHV0VmFsdWUgPSBgIyR7dGhpcy5oZXhJbnB1dFJlZi52YWx1ZS52YWx1ZX1gO1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICBpZiAoaXNWYWxpZEhleChoZXhJbnB1dFZhbHVlLCB0aGlzLmFscGhhQ2hhbm5lbCkgJiYgaXNMb25naGFuZEhleChoZXhJbnB1dFZhbHVlLCB0aGlzLmFscGhhQ2hhbm5lbCkpIHtcbiAgICAgIHRoaXMuaW50ZXJuYWxTZXRWYWx1ZShoZXhJbnB1dFZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgfVxuICB9XG4gIG9uSW5wdXRLZXlEb3duKGV2ZW50KSB7XG4gICAgY29uc3QgeyBhbHRLZXksIGN0cmxLZXksIG1ldGFLZXksIHNoaWZ0S2V5IH0gPSBldmVudDtcbiAgICBjb25zdCB7IGFscGhhQ2hhbm5lbCwgaGV4SW5wdXRSZWYsIGludGVybmFsQ29sb3IsIHZhbHVlIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcbiAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICBpZiAoa2V5ID09PSBcIlRhYlwiICYmIGlzU2hvcnRoYW5kSGV4KHZhbHVlLCB0aGlzLmFscGhhQ2hhbm5lbCkgfHwga2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGlmIChjb21wb3NlZFBhdGguaW5jbHVkZXMoaGV4SW5wdXRSZWYudmFsdWUpKSB7XG4gICAgICAgIHRoaXMub25IZXhJbnB1dENoYW5nZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vbk9wYWNpdHlJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlzTnVkZ2VLZXkgPSBrZXkgPT09IFwiQXJyb3dEb3duXCIgfHwga2V5ID09PSBcIkFycm93VXBcIjtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgaWYgKGlzTnVkZ2VLZXkpIHtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKHRoaXMucHJldmlvdXNOb25OdWxsVmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZGlyZWN0aW9uID0ga2V5ID09PSBcIkFycm93VXBcIiA/IDEgOiAtMTtcbiAgICAgIGNvbnN0IGJ1bXAgPSBzaGlmdEtleSA/IDEwIDogMTtcbiAgICAgIHRoaXMuaW50ZXJuYWxTZXRWYWx1ZShoZXhpZnkodGhpcy5udWRnZVJHQkNoYW5uZWxzKGludGVybmFsQ29sb3IsIGJ1bXAgKiBkaXJlY3Rpb24sIGNvbXBvc2VkUGF0aC5pbmNsdWRlcyhoZXhJbnB1dFJlZi52YWx1ZSkgPyBcInJnYlwiIDogXCJhXCIpLCBhbHBoYUNoYW5uZWwpLCBvbGRWYWx1ZSk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3aXRoTW9kaWZpZXJzID0gYWx0S2V5IHx8IGN0cmxLZXkgfHwgbWV0YUtleTtcbiAgICBjb25zdCBzaW5nbGVDaGFyID0ga2V5Lmxlbmd0aCA9PT0gMTtcbiAgICBjb25zdCB2YWxpZEhleENoYXIgPSBoZXhDaGFyLnRlc3Qoa2V5KTtcbiAgICBpZiAoc2luZ2xlQ2hhciAmJiAhd2l0aE1vZGlmaWVycyAmJiAhdmFsaWRIZXhDaGFyKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuICBvbkhleElucHV0UGFzdGUoZXZlbnQpIHtcbiAgICBjb25zdCBoZXggPSBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJ0ZXh0XCIpO1xuICAgIGlmIChpc1ZhbGlkSGV4KGhleCwgdGhpcy5hbHBoYUNoYW5uZWwpICYmIGlzTG9uZ2hhbmRIZXgoaGV4LCB0aGlzLmFscGhhQ2hhbm5lbCkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhleElucHV0UmVmLnZhbHVlLnZhbHVlID0gaGV4LnNsaWNlKDEpO1xuICAgICAgdGhpcy5pbnRlcm5hbFNldFZhbHVlKGhleCwgdGhpcy52YWx1ZSk7XG4gICAgfVxuICB9XG4gIGludGVybmFsU2V0VmFsdWUodmFsdWUsIG9sZFZhbHVlLCBlbWl0ID0gdHJ1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgY29uc3QgeyBhbHBoYUNoYW5uZWwgfSA9IHRoaXM7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplSGV4KHZhbHVlLCBhbHBoYUNoYW5uZWwsIGFscGhhQ2hhbm5lbCk7XG4gICAgICBpZiAoaXNWYWxpZEhleChub3JtYWxpemVkLCBhbHBoYUNoYW5uZWwpKSB7XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxDb2xvcjogY3VycmVudENvbG9yIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBuZXh0Q29sb3IgPSBDb2xvcihub3JtYWxpemVkKTtcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZExvbmdoYW5kID0gbm9ybWFsaXplSGV4KGhleGlmeShuZXh0Q29sb3IsIGFscGhhQ2hhbm5lbCksIGFscGhhQ2hhbm5lbCk7XG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSAhY3VycmVudENvbG9yIHx8IG5vcm1hbGl6ZWRMb25naGFuZCAhPT0gbm9ybWFsaXplSGV4KGhleGlmeShjdXJyZW50Q29sb3IsIGFscGhhQ2hhbm5lbCksIGFscGhhQ2hhbm5lbCk7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxDb2xvciA9IG5leHRDb2xvcjtcbiAgICAgICAgdGhpcy5wcmV2aW91c05vbk51bGxWYWx1ZSA9IG5vcm1hbGl6ZWRMb25naGFuZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG5vcm1hbGl6ZWRMb25naGFuZDtcbiAgICAgICAgaWYgKGNoYW5nZWQgJiYgZW1pdCkge1xuICAgICAgICAgIHRoaXMuY2FsY2l0ZUNvbG9yUGlja2VySGV4SW5wdXRDaGFuZ2UuZW1pdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuYWxsb3dFbXB0eSkge1xuICAgICAgdGhpcy5pbnRlcm5hbENvbG9yID0gdm9pZCAwO1xuICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgIGlmIChlbWl0KSB7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUNvbG9yUGlja2VySGV4SW5wdXRDaGFuZ2UuZW1pdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnZhbHVlID0gb2xkVmFsdWU7XG4gIH1cbiAgZm9ybWF0SGV4Rm9ySW50ZXJuYWxJbnB1dChoZXgpIHtcbiAgICByZXR1cm4gaGV4ID8gaGV4LnJlcGxhY2UoXCIjXCIsIFwiXCIpLnNsaWNlKDAsIDYpIDogXCJcIjtcbiAgfVxuICBmb3JtYXRPcGFjaXR5Rm9ySW50ZXJuYWxJbnB1dChjb2xvcikge1xuICAgIHJldHVybiBjb2xvciA/IGAke2FscGhhVG9PcGFjaXR5KGNvbG9yLmFscGhhKCkpfWAgOiBcIlwiO1xuICB9XG4gIG51ZGdlUkdCQ2hhbm5lbHMoY29sb3IsIGFtb3VudCwgY29udGV4dCkge1xuICAgIGxldCBudWRnZWRDaGFubmVscztcbiAgICBjb25zdCBjaGFubmVscyA9IGNvbG9yLmFycmF5KCk7XG4gICAgY29uc3QgcmdiQ2hhbm5lbHMgPSBjaGFubmVscy5zbGljZSgwLCAzKTtcbiAgICBpZiAoY29udGV4dCA9PT0gXCJyZ2JcIikge1xuICAgICAgY29uc3QgbnVkZ2VkUkdCQ2hhbm5lbHMgPSByZ2JDaGFubmVscy5tYXAoKGNoYW5uZWwpID0+IGNoYW5uZWwgKyBhbW91bnQpO1xuICAgICAgbnVkZ2VkQ2hhbm5lbHMgPSBbXG4gICAgICAgIC4uLm51ZGdlZFJHQkNoYW5uZWxzLFxuICAgICAgICB0aGlzLmFscGhhQ2hhbm5lbCA/IGNoYW5uZWxzWzNdIDogdm9pZCAwXG4gICAgICBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBudWRnZWRBbHBoYSA9IG9wYWNpdHlUb0FscGhhKGFscGhhVG9PcGFjaXR5KGNvbG9yLmFscGhhKCkpICsgYW1vdW50KTtcbiAgICAgIG51ZGdlZENoYW5uZWxzID0gWy4uLnJnYkNoYW5uZWxzLCBudWRnZWRBbHBoYV07XG4gICAgfVxuICAgIHJldHVybiBDb2xvcihudWRnZWRDaGFubmVscyk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgYWxwaGFDaGFubmVsLCBoZXhMYWJlbCwgaW50ZXJuYWxDb2xvciwgbWVzc2FnZXMsIHNjYWxlLCB2YWx1ZSB9ID0gdGhpcztcbiAgICBjb25zdCBoZXhJbnB1dFZhbHVlID0gdGhpcy5mb3JtYXRIZXhGb3JJbnRlcm5hbElucHV0KHZhbHVlKTtcbiAgICBjb25zdCBvcGFjaXR5SW5wdXRWYWx1ZSA9IHRoaXMuZm9ybWF0T3BhY2l0eUZvckludGVybmFsSW5wdXQoaW50ZXJuYWxDb2xvcik7XG4gICAgY29uc3QgaW5wdXRTY2FsZSA9IHNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCI7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY29udGFpbmVyKX0+PGNhbGNpdGUtaW5wdXQtdGV4dCBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaGV4SW5wdXQpfSAubGFiZWw9JHttZXNzYWdlcz8uaGV4IHx8IGhleExhYmVsfSAubWF4TGVuZ3RoPSR7dGhpcy5hbHBoYUNoYW5uZWwgPyA4IDogNn0gQGtleWRvd249JHt0aGlzLm9uSW5wdXRLZXlEb3dufSBAcGFzdGU9JHt0aGlzLm9uSGV4SW5wdXRQYXN0ZX0gQGNhbGNpdGVJbnB1dFRleHRDaGFuZ2U9JHt0aGlzLm9uSGV4SW5wdXRDaGFuZ2V9IEBjYWxjaXRlSW5wdXRUZXh0SW5wdXQ9JHt0aGlzLm9uSGV4SW5wdXRJbnB1dH0gQGNhbGNpdGVJbnRlcm5hbElucHV0VGV4dEJsdXI9JHt0aGlzLm9uSGV4SW5wdXRCbHVyfSBAY2FsY2l0ZUludGVybmFsSW5wdXRUZXh0Rm9jdXM9JHt0aGlzLm9uSW5wdXRGb2N1c30gcHJlZml4LXRleHQ9IyAuc2NhbGU9JHtpbnB1dFNjYWxlfSAudmFsdWU9JHtoZXhJbnB1dFZhbHVlfSAke3JlZih0aGlzLmhleElucHV0UmVmKX0+PC9jYWxjaXRlLWlucHV0LXRleHQ+JHthbHBoYUNoYW5uZWwgPyBrZXllZChcIm9wYWNpdHktaW5wdXRcIiwgaHRtbGA8Y2FsY2l0ZS1pbnB1dC1udW1iZXIgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLm9wYWNpdHlJbnB1dCl9IC5sYWJlbD0ke21lc3NhZ2VzPy5vcGFjaXR5fSAubWF4PSR7T1BBQ0lUWV9MSU1JVFMubWF4fSBtYXgtbGVuZ3RoPTMgLm1pbj0ke09QQUNJVFlfTElNSVRTLm1pbn0gbnVtYmVyLWJ1dHRvbi10eXBlPW5vbmUgLm51bWJlcmluZ1N5c3RlbT0ke3RoaXMubnVtYmVyaW5nU3lzdGVtfSBAa2V5ZG93bj0ke3RoaXMub25JbnB1dEtleURvd259IEBjYWxjaXRlSW5wdXROdW1iZXJJbnB1dD0ke3RoaXMub25PcGFjaXR5SW5wdXRJbnB1dH0gQGNhbGNpdGVJbnRlcm5hbElucHV0TnVtYmVyQmx1cj0ke3RoaXMub25PcGFjaXR5SW5wdXRCbHVyfSBAY2FsY2l0ZUludGVybmFsSW5wdXROdW1iZXJGb2N1cz0ke3RoaXMub25JbnB1dEZvY3VzfSAuc2NhbGU9JHtpbnB1dFNjYWxlfSBzdWZmaXgtdGV4dD0lIC52YWx1ZT0ke29wYWNpdHlJbnB1dFZhbHVlfSAke3JlZih0aGlzLm9wYWNpdHlJbnB1dFJlZil9PjwvY2FsY2l0ZS1pbnB1dC1udW1iZXI+YCkgOiBudWxsfTwvZGl2PmA7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLWNvbG9yLXBpY2tlci1oZXgtaW5wdXRcIiwgQ29sb3JQaWNrZXJIZXhJbnB1dCk7XG5leHBvcnQge1xuICBDb2xvclBpY2tlckhleElucHV0XG59O1xuIiwiaW1wb3J0IFwiLi4vY2FsY2l0ZS1pbnB1dC10ZXh0L2luZGV4LmpzXCI7XG5pbXBvcnQgXCIuLi9jYWxjaXRlLWlucHV0LW51bWJlci9pbmRleC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3VzdG9tRWxlbWVudC5qc1wiOyIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBjIGFzIGN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IHJlcGVhdCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9yZXBlYXQuanNcIjtcbmltcG9ydCB7IGtleWVkIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2tleWVkLmpzXCI7XG5pbXBvcnQgQ29sb3IgZnJvbSBcImNvbG9yXCI7XG5pbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gXCJlcy10b29sa2l0XCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwsIG5vdGhpbmcgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBjcmVhdGVFdmVudCwgc2FmZUNsYXNzTWFwLCBzYWZlU3R5bGVNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGNyZWF0ZVJlZiwgcmVmIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgaSBhcyBpc1ByaW1hcnlQb2ludGVyQnV0dG9uLCBnIGFzIGdldEVsZW1lbnREaXIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2RvbS5qc1wiO1xuaW1wb3J0IHsgdSBhcyB1cGRhdGVIb3N0SW50ZXJhY3Rpb24sIEkgYXMgSW50ZXJhY3RpdmVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2ludGVyYWN0aXZlLmpzXCI7XG5pbXBvcnQgeyBpIGFzIGlzQWN0aXZhdGlvbktleSB9IGZyb20gXCIuLi8uLi9jaHVua3Mva2V5LmpzXCI7XG5pbXBvcnQgeyBjIGFzIGNsYW1wLCByIGFzIHJlbWFwLCBhIGFzIGNsb3NlVG9SYW5nZUVkZ2UgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL21hdGguanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlVDluIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VUOW4uanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlQ2FuY2VsYWJsZSB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXNlQ2FuY2VsYWJsZS5qc1wiO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gXCIuLi8uLi9jaHVua3Mvb2JzZXJ2ZXJzLmpzXCI7XG5pbXBvcnQgeyB1IGFzIHVzZVNldEZvY3VzIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VTZXRGb2N1cy5qc1wiO1xuaW1wb3J0IHsgRCBhcyBERUZBVUxUX0NPTE9SLCBDIGFzIENTU0NvbG9yTW9kZSwgZyBhcyBnZXRTbGlkZXJXaWR0aCwgZSBhcyBnZXRDb2xvckZpZWxkRGltZW5zaW9ucywgUyBhcyBTVEFUSUNfRElNRU5TSU9OUywgbiBhcyBub3JtYWxpemVIZXgsIGggYXMgaGV4aWZ5LCBwIGFzIHBhcnNlTW9kZSwgZiBhcyBERUZBVUxUX1NUT1JBR0VfS0VZX1BSRUZJWCwgaiBhcyBhbHBoYUNvbXBhdGlibGUsIGsgYXMgY29sb3JFcXVhbCwgbCBhcyBub3JtYWxpemVDb2xvciwgTyBhcyBPUEFDSVRZX0xJTUlUUywgUiBhcyBSR0JfTElNSVRTLCBIIGFzIEhTVl9MSU1JVFMsIG0gYXMgQ1NTLCBvIGFzIG9wYWNpdHlUb0FscGhhLCB0IGFzIHRvQWxwaGFNb2RlLCBxIGFzIHRvTm9uQWxwaGFNb2RlLCBzIGFzIEhVRV9MSU1JVF9DT05TVFJBSU5FRCwgdSBhcyBub3JtYWxpemVBbHBoYSwgYyBhcyBhbHBoYVRvT3BhY2l0eSwgdiBhcyBTQ09QRV9TSVpFLCBJIGFzIElDT05TIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91dGlscy5qc1wiO1xuY29uc3Qgc3R5bGVzID0gY3NzYDpob3N0ey0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1mb2N1czogdmFyKCAtLWNhbGNpdGUtY29sb3ItZm9jdXMsIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpKSApfTpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfWNhbGNpdGUtaW5wdXQtbnVtYmVyey0tY2FsY2l0ZS1pbnB1dC1udW1iZXItYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItaW5wdXQtYmFja2dyb3VuZC1jb2xvcik7LS1jYWxjaXRlLWlucHV0LW51bWJlci1ib3JkZXItY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LWJvcmRlci1jb2xvcik7LS1jYWxjaXRlLWlucHV0LW51bWJlci10ZXh0LWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1pbnB1dC10ZXh0LWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtcHJlZml4LWJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LXByZWZpeC1iYWNrZ3JvdW5kLWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtcHJlZml4LXRleHQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LXByZWZpeC10ZXh0LWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtc3VmZml4LWJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LXN1ZmZpeC1iYWNrZ3JvdW5kLWNvbG9yKTstLWNhbGNpdGUtaW5wdXQtc3VmZml4LXRleHQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWlucHV0LXN1ZmZpeC10ZXh0LWNvbG9yKX1jYWxjaXRlLWJ1dHRvbnstLWNhbGNpdGUtYnV0dG9uLXRleHQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWFjdGlvbi10ZXh0LWNvbG9yKTstLWNhbGNpdGUtYnV0dG9uLXRleHQtY29sb3ItcHJlc3M6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWFjdGlvbi10ZXh0LWNvbG9yLXByZXNzKX1jYWxjaXRlLWJ1dHRvbjpob3ZlcixjYWxjaXRlLWJ1dHRvbjpmb2N1c3stLWNhbGNpdGUtYnV0dG9uLXRleHQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWFjdGlvbi10ZXh0LWNvbG9yLWhvdmVyKX1jYWxjaXRlLWJ1dHRvbjphY3RpdmV7LS1jYWxjaXRlLWJ1dHRvbi10ZXh0LWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1hY3Rpb24tdGV4dC1jb2xvci1wcmVzcyl9Y2FsY2l0ZS10YWJzey0tY2FsY2l0ZS10YWItYm9yZGVyLWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci10YWItYm9yZGVyLWNvbG9yKTstLWNhbGNpdGUtdGFiLWFjY2VudC1jb2xvci1wcmVzczogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItdGFiLWFjY2VudC1jb2xvcik7LS1jYWxjaXRlLXN3YXRjaC1jb3JuZXItcmFkaXVzOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zd2F0Y2gtY29ybmVyLXJhZGl1cyk7LS1jYWxjaXRlLXRhYi10ZXh0LWNvbG9yOiB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci10YWItdGV4dC1jb2xvcil9Y2FsY2l0ZS10YWItdGl0bGU6aG92ZXJ7LS1jYWxjaXRlLWNvbG9yLXRleHQtMTogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItdGFiLXRleHQtY29sb3ItaG92ZXIpfWNhbGNpdGUtc3dhdGNoey0tY2FsY2l0ZS1zd2F0Y2gtY29ybmVyLXJhZGl1czogdmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItc3dhdGNoLWNvcm5lci1yYWRpdXMpfTpob3N0e2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbTtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW5vcm1hbCk7aW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1waWNrZXItbWluLXdpZHRoKTttaW4taW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1waWNrZXItbWluLXdpZHRoKX06aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9LmludGVyYWN0aW9uLWNvbnRhaW5lcntkaXNwbGF5OmNvbnRlbnRzfTpob3N0KFtzY2FsZT1zXSl7LS1jYWxjaXRlLWludGVybmFsLWNvbG9yLXBpY2tlci1taW4td2lkdGg6IDIwMHB4Oy0tY2FsY2l0ZS1jb2xvci1waWNrZXItc3BhY2luZzogdmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXNtKX06aG9zdChbc2NhbGU9bV0pey0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1waWNrZXItbWluLXdpZHRoOiAyNDBweDstLWNhbGNpdGUtY29sb3ItcGlja2VyLXNwYWNpbmc6IHZhcigtLWNhbGNpdGUtc3BhY2luZy1tZCl9Omhvc3QoW3NjYWxlPWxdKXstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItcGlja2VyLW1pbi13aWR0aDogMzA0cHg7LS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zcGFjaW5nOiB2YXIoLS1jYWxjaXRlLXNwYWNpbmctbGcpO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbX06aG9zdChbc2NhbGU9bF0pIC5zZWN0aW9uOmZpcnN0LW9mLXR5cGV7cGFkZGluZy1ibG9jay1zdGFydDp2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zcGFjaW5nKX06aG9zdChbc2NhbGU9bF0pIC5jb250cm9sLXNlY3Rpb257ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpiYXNlbGluZX06aG9zdChbc2NhbGU9bF0pIC5jb2xvci1oZXgtb3B0aW9uc3tpbmxpbmUtc2l6ZToxMDAlO2Rpc3BsYXk6ZmxleDtmbGV4LXNocmluazoxO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfTpob3N0KFtzY2FsZT1sXSkgLmNvbG9yLW1vZGUtY29udGFpbmVye2ZsZXgtc2hyaW5rOjN9LmNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2Jsb2NrLXNpemU6bWluLWNvbnRlbnQ7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLWJhY2tncm91bmQtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1jb3JuZXItcmFkaXVzLCB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtbm9uZSkpO2JveC1zaGFkb3c6dmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItc2hhZG93LCB2YXIoLS1jYWxjaXRlLXNoYWRvdy1ub25lKSl9LmNvbnRyb2wtYW5kLXNjb3Ble3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtjdXJzb3I6cG9pbnRlcjt0b3VjaC1hY3Rpb246bm9uZX0uY29sb3ItZmllbGQsLmNvbnRyb2wtYW5kLXNjb3Bley13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO2JvcmRlci1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItY29ybmVyLXJhZGl1cywgdmFyKC0tY2FsY2l0ZS1jb3JuZXItcmFkaXVzLW5vbmUpKSB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1jb3JuZXItcmFkaXVzLCB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtbm9uZSkpIHZhcigtLWNhbGNpdGUtY29ybmVyLXJhZGl1cy1ub25lKSB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtbm9uZSl9LnNjb3Ble3BvaW50ZXItZXZlbnRzOm5vbmU7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXotaW5kZXgpO2Jsb2NrLXNpemU6MXB4O2lubGluZS1zaXplOjFweDtib3JkZXItcmFkaXVzOjk5OTlweDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudH0uc2NvcGU6Zm9jdXN7b3V0bGluZTp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCkgc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpKTtvdXRsaW5lOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKSBzb2xpZCB2YXIoLS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzKTtvdXRsaW5lLW9mZnNldDpjYWxjKHZhcigtLWNhbGNpdGUtc3BhY2luZy1iYXNlKSAqIGNhbGMoMSAtICgyKmNsYW1wKDAsdmFyKC0tY2FsY2l0ZS1vZmZzZXQtaW52ZXJ0LWZvY3VzKSwxKSkpKTtvdXRsaW5lLW9mZnNldDo2cHh9LmhleC1hbmQtY2hhbm5lbHMtZ3JvdXB7ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjEwMCU7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtd3JhcDp3cmFwfS5zZWN0aW9ue3BhZGRpbmctYmxvY2s6MCB2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zcGFjaW5nKTtwYWRkaW5nLWlubGluZTp2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zcGFjaW5nKX0uc2VjdGlvbjpmaXJzdC1vZi10eXBle3BhZGRpbmctYmxvY2stc3RhcnQ6dmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItc3BhY2luZyl9LnNsaWRlcnN7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4taW5saW5lLXN0YXJ0OnZhcigtLWNhbGNpdGUtY29sb3ItcGlja2VyLXNwYWNpbmcpO2dhcDp2YXIoLS1jYWxjaXRlLXNwYWNpbmcteHhzKX0ucHJldmlldy1hbmQtc2xpZGVyc3tkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmc6dmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItc3BhY2luZyl9LmNvbG9yLWhleC1vcHRpb25zLC5zZWN0aW9uLS1zcGxpdHtmbGV4LWdyb3c6MX0uaGVhZGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1waWNrZXItdGV4dC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpKX0uY29sb3ItbW9kZS1jb250YWluZXJ7cGFkZGluZy1ibG9jay1zdGFydDp2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zcGFjaW5nKX0uY2hhbm5lbHN7ZGlzcGxheTpmbGV4fS5jaGFubmVse2ZsZXgtZ3JvdzoxfS5jaGFubmVsW2RhdGEtY2hhbm5lbC1pbmRleD1cIjNcIl17bWFyZ2luLWlubGluZS1zdGFydDotMXB4O21pbi1pbmxpbmUtc2l6ZTo4MXB4fTpob3N0KFtzY2FsZT1zXSkgLmNoYW5uZWxbZGF0YS1jaGFubmVsLWluZGV4PVwiM1wiXXttaW4taW5saW5lLXNpemU6NjhweH06aG9zdChbc2NhbGU9bF0pIC5jaGFubmVsW2RhdGEtY2hhbm5lbC1pbmRleD1cIjNcIl17bWluLWlubGluZS1zaXplOjg4cHh9LnNhdmVkLWNvbG9ycy1idXR0b25ze2Rpc3BsYXk6ZmxleH0uc3dhdGNoLWdyb3Vwe21hcmdpbi1ibG9jay1zdGFydDp2YXIoLS1jYWxjaXRlLWNvbG9yLXBpY2tlci1zcGFjaW5nKX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1gO1xuY29uc3QgdGhyb3R0bGVGb3I2MEZwc0luTXMgPSAxNjtcbmNsYXNzIENvbG9yUGlja2VyIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY29sb3IgPSBERUZBVUxUX0NPTE9SO1xuICAgIHRoaXMuY29sb3JGaWVsZFNjb3BlUmVmID0gY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5odWVTY29wZVJlZiA9IGNyZWF0ZVJlZigpO1xuICAgIHRoaXMuaW50ZXJuYWxDb2xvclVwZGF0ZUNvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuaXNBY3RpdmVDaGFubmVsSW5wdXRFbXB0eSA9IGZhbHNlO1xuICAgIHRoaXMubW9kZSA9IENTU0NvbG9yTW9kZS5IRVg7XG4gICAgdGhpcy5vcGFjaXR5U2NvcGVSZWYgPSBjcmVhdGVSZWYoKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKGVudHJpZXMpID0+IHRoaXMucmVzaXplQ2FudmFzKGVudHJpZXMpKTtcbiAgICB0aGlzLnNoaWZ0S2V5Q2hhbm5lbEFkanVzdG1lbnQgPSAwO1xuICAgIHRoaXMudXBPckRvd25BcnJvd0tleVRyYWNrZXIgPSBudWxsO1xuICAgIHRoaXMuX3ZhbHVlV2FzU2V0ID0gZmFsc2U7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVzZVQ5bih7IGJsb2NraW5nOiB0cnVlIH0pO1xuICAgIHRoaXMuY2FwdHVyZUNvbG9yRmllbGRDb2xvciA9ICh4LCB5LCBza2lwRXF1YWwgPSB0cnVlKSA9PiB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZHluYW1pY0RpbWVuc2lvbnMuY29sb3JGaWVsZDtcbiAgICAgIGNvbnN0IHNhdHVyYXRpb24gPSBNYXRoLnJvdW5kKEhTVl9MSU1JVFMucyAvIHdpZHRoICogeCk7XG4gICAgICBjb25zdCB2YWx1ZSA9IE1hdGgucm91bmQoSFNWX0xJTUlUUy52IC8gaGVpZ2h0ICogKGhlaWdodCAtIHkpKTtcbiAgICAgIHRoaXMuaW50ZXJuYWxDb2xvclNldCh0aGlzLmJhc2VDb2xvckZpZWxkQ29sb3IuaHN2KCkuc2F0dXJhdGlvbnYoc2F0dXJhdGlvbikudmFsdWUodmFsdWUpLCBza2lwRXF1YWwpO1xuICAgIH07XG4gICAgdGhpcy5jYW5jZWxhYmxlID0gdXNlQ2FuY2VsYWJsZSgpKHRoaXMpO1xuICAgIHRoaXMuZHJhd0NvbG9yQ29udHJvbHMgPSB0aHJvdHRsZSgodHlwZSA9IFwiYWxsXCIpID0+IHtcbiAgICAgIGlmICgodHlwZSA9PT0gXCJhbGxcIiB8fCB0eXBlID09PSBcImNvbG9yLWZpZWxkXCIpICYmIHRoaXMuY29sb3JGaWVsZFJlbmRlcmluZ0NvbnRleHQpIHtcbiAgICAgICAgdGhpcy5kcmF3Q29sb3JGaWVsZCgpO1xuICAgICAgfVxuICAgICAgaWYgKCh0eXBlID09PSBcImFsbFwiIHx8IHR5cGUgPT09IFwiaHVlLXNsaWRlclwiKSAmJiB0aGlzLmh1ZVNsaWRlclJlbmRlcmluZ0NvbnRleHQpIHtcbiAgICAgICAgdGhpcy5kcmF3SHVlU2xpZGVyKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hbHBoYUNoYW5uZWwgJiYgKHR5cGUgPT09IFwiYWxsXCIgfHwgdHlwZSA9PT0gXCJvcGFjaXR5LXNsaWRlclwiKSAmJiB0aGlzLm9wYWNpdHlTbGlkZXJSZW5kZXJpbmdDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuZHJhd09wYWNpdHlTbGlkZXIoKTtcbiAgICAgIH1cbiAgICB9LCB0aHJvdHRsZUZvcjYwRnBzSW5Ncyk7XG4gICAgdGhpcy5nbG9iYWxQb2ludGVyTW92ZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgYWN0aXZlQ2FudmFzSW5mbywgZWwgfSA9IHRoaXM7XG4gICAgICBpZiAoIWVsLmlzQ29ubmVjdGVkIHx8ICFhY3RpdmVDYW52YXNJbmZvKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgY29udGV4dCwgYm91bmRzIH0gPSBhY3RpdmVDYW52YXNJbmZvO1xuICAgICAgbGV0IHNhbXBsaW5nWDtcbiAgICAgIGxldCBzYW1wbGluZ1k7XG4gICAgICBjb25zdCB7IGNsaWVudFgsIGNsaWVudFkgfSA9IGV2ZW50O1xuICAgICAgaWYgKGNvbnRleHQuY2FudmFzLm1hdGNoZXMoXCI6aG92ZXJcIikpIHtcbiAgICAgICAgc2FtcGxpbmdYID0gY2xpZW50WCAtIGJvdW5kcy54O1xuICAgICAgICBzYW1wbGluZ1kgPSBjbGllbnRZIC0gYm91bmRzLnk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY2xpZW50WCA8IGJvdW5kcy54ICsgYm91bmRzLndpZHRoICYmIGNsaWVudFggPiBib3VuZHMueCkge1xuICAgICAgICAgIHNhbXBsaW5nWCA9IGNsaWVudFggLSBib3VuZHMueDtcbiAgICAgICAgfSBlbHNlIGlmIChjbGllbnRYIDwgYm91bmRzLngpIHtcbiAgICAgICAgICBzYW1wbGluZ1ggPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNhbXBsaW5nWCA9IGJvdW5kcy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xpZW50WSA8IGJvdW5kcy55ICsgYm91bmRzLmhlaWdodCAmJiBjbGllbnRZID4gYm91bmRzLnkpIHtcbiAgICAgICAgICBzYW1wbGluZ1kgPSBjbGllbnRZIC0gYm91bmRzLnk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2xpZW50WSA8IGJvdW5kcy55KSB7XG4gICAgICAgICAgc2FtcGxpbmdZID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYW1wbGluZ1kgPSBib3VuZHMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY29udGV4dCA9PT0gdGhpcy5jb2xvckZpZWxkUmVuZGVyaW5nQ29udGV4dCkge1xuICAgICAgICB0aGlzLmNhcHR1cmVDb2xvckZpZWxkQ29sb3Ioc2FtcGxpbmdYLCBzYW1wbGluZ1ksIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY29udGV4dCA9PT0gdGhpcy5odWVTbGlkZXJSZW5kZXJpbmdDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY2FwdHVyZUh1ZVNsaWRlckNvbG9yKHNhbXBsaW5nWCk7XG4gICAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT09IHRoaXMub3BhY2l0eVNsaWRlclJlbmRlcmluZ0NvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jYXB0dXJlT3BhY2l0eVNsaWRlclZhbHVlKHNhbXBsaW5nWCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmdsb2JhbFBvaW50ZXJVcEhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJldmlvdXNseURyYWdnaW5nID0gdGhpcy5hY3RpdmVDYW52YXNJbmZvO1xuICAgICAgdGhpcy5hY3RpdmVDYW52YXNJbmZvID0gbnVsbDtcbiAgICAgIHRoaXMuZHJhd0NvbG9yQ29udHJvbHMoKTtcbiAgICAgIGlmIChwcmV2aW91c2x5RHJhZ2dpbmcpIHtcbiAgICAgICAgdGhpcy5jYWxjaXRlQ29sb3JQaWNrZXJDaGFuZ2UuZW1pdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5yZXNpemVDYW52YXMgPSB0aHJvdHRsZSgoZW50cmllcykgPT4ge1xuICAgICAgaWYgKCF0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgW2ZpcnN0XSA9IGVudHJpZXM7XG4gICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IE1hdGguZmxvb3IoZmlyc3QuY29udGVudEJveFNpemVbMF0uaW5saW5lU2l6ZSk7XG4gICAgICBpZiAodGhpcy5keW5hbWljRGltZW5zaW9ucy5jb2xvckZpZWxkLndpZHRoID09PSBhdmFpbGFibGVXaWR0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZUR5bmFtaWNEaW1lbnNpb25zKGF2YWlsYWJsZVdpZHRoKTtcbiAgICAgIHRoaXMudXBkYXRlQ2FudmFzU2l6ZSgpO1xuICAgICAgdGhpcy5kcmF3Q29sb3JDb250cm9scygpO1xuICAgIH0sIHRocm90dGxlRm9yNjBGcHNJbk1zKTtcbiAgICB0aGlzLnVwZGF0ZUR5bmFtaWNEaW1lbnNpb25zID0gKHdpZHRoKSA9PiB7XG4gICAgICBjb25zdCBzbGlkZXJEaW1zID0ge1xuICAgICAgICB3aWR0aDogZ2V0U2xpZGVyV2lkdGgod2lkdGgsIHRoaXMuc3RhdGljRGltZW5zaW9ucywgdGhpcy5hbHBoYUNoYW5uZWwpLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGljRGltZW5zaW9ucy5zbGlkZXIuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgdGhpcy5keW5hbWljRGltZW5zaW9ucyA9IHtcbiAgICAgICAgY29sb3JGaWVsZDogZ2V0Q29sb3JGaWVsZERpbWVuc2lvbnMod2lkdGgpLFxuICAgICAgICBzbGlkZXI6IHNsaWRlckRpbXNcbiAgICAgIH07XG4gICAgfTtcbiAgICB0aGlzLmZvY3VzU2V0dGVyID0gdXNlU2V0Rm9jdXMoKSh0aGlzKTtcbiAgICB0aGlzLmNoYW5uZWxNb2RlID0gXCJyZ2JcIjtcbiAgICB0aGlzLmNoYW5uZWxzID0gdGhpcy50b0NoYW5uZWxzKERFRkFVTFRfQ09MT1IpO1xuICAgIHRoaXMuc3RhdGljRGltZW5zaW9ucyA9IFNUQVRJQ19ESU1FTlNJT05TLm07XG4gICAgdGhpcy5zYXZlZENvbG9ycyA9IFtdO1xuICAgIHRoaXMuYWxsb3dFbXB0eSA9IGZhbHNlO1xuICAgIHRoaXMuYWxwaGFDaGFubmVsID0gZmFsc2U7XG4gICAgdGhpcy5jaGFubmVsc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5jbGVhcmFibGUgPSBmYWxzZTtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5maWVsZERpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5mb3JtYXQgPSBcImF1dG9cIjtcbiAgICB0aGlzLmhleERpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5zYXZlZERpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuY2FsY2l0ZUNvbG9yUGlja2VyQ2hhbmdlID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVDb2xvclBpY2tlcklucHV0ID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmxpc3RlbihcImtleWRvd25cIiwgdGhpcy5oYW5kbGVDaGFubmVsS2V5VXBPckRvd24sIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICB0aGlzLmxpc3RlbihcImtleXVwXCIsIHRoaXMuaGFuZGxlQ2hhbm5lbEtleVVwT3JEb3duLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGNoYW5uZWxNb2RlOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBjaGFubmVsczogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgY29sb3JGaWVsZFNjb3BlTGVmdDogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgY29sb3JGaWVsZFNjb3BlVG9wOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBzdGF0aWNEaW1lbnNpb25zOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBodWVTY29wZUxlZnQ6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIG9wYWNpdHlTY29wZUxlZnQ6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIHNhdmVkQ29sb3JzOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBzY29wZU9yaWVudGF0aW9uOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBhbGxvd0VtcHR5OiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgYWxwaGFDaGFubmVsOiBbNSwge30sIHsgdHlwZTogQm9vbGVhbiB9XSwgY2hhbm5lbHNEaXNhYmxlZDogWzUsIHt9LCB7IHR5cGU6IEJvb2xlYW4gfV0sIGNsZWFyYWJsZTogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIGNvbG9yOiBbMCwge30sIHsgYXR0cmlidXRlOiBmYWxzZSB9XSwgZGlzYWJsZWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBmaWVsZERpc2FibGVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgZm9ybWF0OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgaGV4RGlzYWJsZWQ6IFs1LCB7fSwgeyB0eXBlOiBCb29sZWFuIH1dLCBtZXNzYWdlT3ZlcnJpZGVzOiBbMCwge30sIHsgYXR0cmlidXRlOiBmYWxzZSB9XSwgbnVtYmVyaW5nU3lzdGVtOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgc2F2ZWREaXNhYmxlZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIHNjYWxlOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgc3RvcmFnZUlkOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgdmFsdWU6IDEgfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3I7XG4gIH1cbiAgc2V0IGNvbG9yKGNvbG9yKSB7XG4gICAgY29uc3Qgb2xkQ29sb3IgPSB0aGlzLl9jb2xvcjtcbiAgICB0aGlzLl9jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuaGFuZGxlQ29sb3JDaGFuZ2UoY29sb3IsIG9sZENvbG9yKTtcbiAgfVxuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG4gIHNldCB2YWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fdmFsdWU7XG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICB0aGlzLmhhbmRsZVZhbHVlQ2hhbmdlKHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgdGhpcy5fdmFsdWVXYXNTZXQgPSB0cnVlO1xuICB9XG4gIGFzeW5jIHNldEZvY3VzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c1NldHRlcigoKSA9PiB0aGlzLmVsLCBvcHRpb25zKTtcbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMub2JzZXJ2ZVJlc2l6ZSgpO1xuICAgIHRoaXMuY2FuY2VsYWJsZS5hZGQoW3RoaXMuZHJhd0NvbG9yQ29udHJvbHMsIHRoaXMucmVzaXplQ2FudmFzXSk7XG4gIH1cbiAgYXN5bmMgbG9hZCgpIHtcbiAgICBpZiAoIXRoaXMuX3ZhbHVlV2FzU2V0KSB7XG4gICAgICB0aGlzLl92YWx1ZSA/Pz0gbm9ybWFsaXplSGV4KGhleGlmeShERUZBVUxUX0NPTE9SLCB0aGlzLmFscGhhQ2hhbm5lbCkpO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZUFsbG93RW1wdHlPckNsZWFyYWJsZUNoYW5nZSgpO1xuICAgIGNvbnN0IHsgaXNDbGVhcmFibGUsIGNvbG9yLCBmb3JtYXQsIHZhbHVlIH0gPSB0aGlzO1xuICAgIGNvbnN0IHdpbGxTZXROb0NvbG9yID0gaXNDbGVhcmFibGUgJiYgIXZhbHVlO1xuICAgIGNvbnN0IHBhcnNlZE1vZGUgPSBwYXJzZU1vZGUodmFsdWUpO1xuICAgIGNvbnN0IHZhbHVlSXNDb21wYXRpYmxlID0gd2lsbFNldE5vQ29sb3IgfHwgZm9ybWF0ID09PSBcImF1dG9cIiAmJiBwYXJzZWRNb2RlIHx8IGZvcm1hdCA9PT0gcGFyc2VkTW9kZTtcbiAgICBjb25zdCBpbml0aWFsQ29sb3IgPSB3aWxsU2V0Tm9Db2xvciA/IG51bGwgOiB2YWx1ZUlzQ29tcGF0aWJsZSA/IHRoaXMuY29sb3JGcm9tVmFsdWUodmFsdWUsIGlzQ2xlYXJhYmxlLCBwYXJzZWRNb2RlKSA6IGNvbG9yO1xuICAgIGlmICghdmFsdWVJc0NvbXBhdGlibGUpIHtcbiAgICAgIHRoaXMuc2hvd0luY29tcGF0aWJsZUNvbG9yV2FybmluZyh2YWx1ZSwgZm9ybWF0KTtcbiAgICB9XG4gICAgdGhpcy5zZXRNb2RlKGZvcm1hdCwgZmFsc2UpO1xuICAgIHRoaXMuaW50ZXJuYWxDb2xvclNldChpbml0aWFsQ29sb3IsIGZhbHNlLCBcImluaXRpYWxcIik7XG4gICAgdGhpcy51cGRhdGVTdGF0aWNEaW1lbnNpb25zKHRoaXMuc2NhbGUpO1xuICAgIHRoaXMudXBkYXRlRHluYW1pY0RpbWVuc2lvbnMoU1RBVElDX0RJTUVOU0lPTlNbdGhpcy5zY2FsZV0ubWluV2lkdGgpO1xuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSBgJHtERUZBVUxUX1NUT1JBR0VfS0VZX1BSRUZJWH0ke3RoaXMuc3RvcmFnZUlkfWA7XG4gICAgaWYgKHRoaXMuc3RvcmFnZUlkICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkpKSB7XG4gICAgICB0aGlzLnNhdmVkQ29sb3JzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yYWdlS2V5KSk7XG4gICAgfVxuICB9XG4gIHdpbGxVcGRhdGUoY2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmhhcyhcImFsbG93RW1wdHlcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLmFsbG93RW1wdHkgIT09IGZhbHNlKSB8fCBjaGFuZ2VzLmhhcyhcImNsZWFyYWJsZVwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuY2xlYXJhYmxlICE9PSBmYWxzZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlQWxsb3dFbXB0eU9yQ2xlYXJhYmxlQ2hhbmdlKCk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmhhcyhcImFscGhhQ2hhbm5lbFwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuYWxwaGFDaGFubmVsICE9PSBmYWxzZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlQWxwaGFDaGFubmVsQ2hhbmdlKHRoaXMuYWxwaGFDaGFubmVsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVXBkYXRlZCAmJiAoY2hhbmdlcy5oYXMoXCJhbHBoYUNoYW5uZWxcIikgJiYgdGhpcy5hbHBoYUNoYW5uZWwgIT09IGZhbHNlIHx8IGNoYW5nZXMuaGFzKFwic3RhdGljRGltZW5zaW9uc1wiKSAmJiB0aGlzLnN0YXRpY0RpbWVuc2lvbnMgIT09IFNUQVRJQ19ESU1FTlNJT05TLm0pKSB7XG4gICAgICB0aGlzLmhhbmRsZUFscGhhQ2hhbm5lbERpbWVuc2lvbnNDaGFuZ2UoKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwiYWxwaGFDaGFubmVsXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5hbHBoYUNoYW5uZWwgIT09IGZhbHNlKSB8fCBjaGFuZ2VzLmhhcyhcImZvcm1hdFwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuZm9ybWF0ICE9PSBcImF1dG9cIikpIHtcbiAgICAgIHRoaXMuaGFuZGxlRm9ybWF0T3JBbHBoYUNoYW5uZWxDaGFuZ2UoKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwic2NhbGVcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLnNjYWxlICE9PSBcIm1cIikpIHtcbiAgICAgIHRoaXMuaGFuZGxlU2NhbGVDaGFuZ2UodGhpcy5zY2FsZSk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZWQoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIGxvYWRlZCgpIHtcbiAgICB0aGlzLmhhbmRsZUFscGhhQ2hhbm5lbERpbWVuc2lvbnNDaGFuZ2UoKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5nbG9iYWxQb2ludGVyTW92ZUhhbmRsZXIpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMuZ2xvYmFsUG9pbnRlclVwSGFuZGxlcik7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICB9XG4gIGdldCBiYXNlQ29sb3JGaWVsZENvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLmNvbG9yIHx8IHRoaXMucHJldmlvdXNDb2xvciB8fCBERUZBVUxUX0NPTE9SO1xuICB9XG4gIGdldCBlZmZlY3RpdmVTbGlkZXJXaWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5keW5hbWljRGltZW5zaW9ucy5zbGlkZXIud2lkdGg7XG4gIH1cbiAgb2JzZXJ2ZVJlc2l6ZSgpIHtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5vYnNlcnZlKHRoaXMuZWwpO1xuICB9XG4gIGhhbmRsZUFsbG93RW1wdHlPckNsZWFyYWJsZUNoYW5nZSgpIHtcbiAgICB0aGlzLmlzQ2xlYXJhYmxlID0gdGhpcy5jbGVhcmFibGUgfHwgdGhpcy5hbGxvd0VtcHR5O1xuICB9XG4gIGhhbmRsZUFscGhhQ2hhbm5lbENoYW5nZShhbHBoYUNoYW5uZWwpIHtcbiAgICBjb25zdCB7IGZvcm1hdCB9ID0gdGhpcztcbiAgICBpZiAoYWxwaGFDaGFubmVsICYmIGZvcm1hdCAhPT0gXCJhdXRvXCIgJiYgIWFscGhhQ29tcGF0aWJsZShmb3JtYXQpKSB7XG4gICAgICBjb25zb2xlLndhcm4oYGlnbm9yaW5nIGFscGhhQ2hhbm5lbCBhcyB0aGUgY3VycmVudCBmb3JtYXQgKCR7Zm9ybWF0fSkgZG9lcyBub3Qgc3VwcG9ydCBhbHBoYWApO1xuICAgICAgdGhpcy5hbHBoYUNoYW5uZWwgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlQWxwaGFDaGFubmVsRGltZW5zaW9uc0NoYW5nZSgpIHtcbiAgICB0aGlzLmRyYXdDb2xvckNvbnRyb2xzKCk7XG4gIH1cbiAgaGFuZGxlQ29sb3JDaGFuZ2UoY29sb3IsIG9sZENvbG9yKSB7XG4gICAgdGhpcy5kcmF3Q29sb3JDb250cm9scygpO1xuICAgIHRoaXMudXBkYXRlQ2hhbm5lbHNGcm9tQ29sb3IoY29sb3IpO1xuICAgIHRoaXMucHJldmlvdXNDb2xvciA9IG9sZENvbG9yO1xuICB9XG4gIGhhbmRsZUZvcm1hdE9yQWxwaGFDaGFubmVsQ2hhbmdlKCkge1xuICAgIHRoaXMuc2V0TW9kZSh0aGlzLmZvcm1hdCk7XG4gICAgdGhpcy5pbnRlcm5hbENvbG9yU2V0KHRoaXMuY29sb3IsIGZhbHNlLCBcImludGVybmFsXCIpO1xuICB9XG4gIGhhbmRsZVNjYWxlQ2hhbmdlKHNjYWxlID0gXCJtXCIpIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXRpY0RpbWVuc2lvbnMoc2NhbGUpO1xuICAgIHRoaXMudXBkYXRlQ2FudmFzU2l6ZSgpO1xuICAgIHRoaXMuZHJhd0NvbG9yQ29udHJvbHMoKTtcbiAgfVxuICBoYW5kbGVWYWx1ZUNoYW5nZSh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICBjb25zdCB7IGlzQ2xlYXJhYmxlLCBmb3JtYXQgfSA9IHRoaXM7XG4gICAgY29uc3QgY2hlY2tNb2RlID0gIWlzQ2xlYXJhYmxlIHx8IHZhbHVlO1xuICAgIGxldCBtb2RlQ2hhbmdlZCA9IGZhbHNlO1xuICAgIGlmIChjaGVja01vZGUpIHtcbiAgICAgIGNvbnN0IG5leHRNb2RlID0gcGFyc2VNb2RlKHZhbHVlKTtcbiAgICAgIGlmICghbmV4dE1vZGUgfHwgZm9ybWF0ICE9PSBcImF1dG9cIiAmJiBuZXh0TW9kZSAhPT0gZm9ybWF0KSB7XG4gICAgICAgIHRoaXMuc2hvd0luY29tcGF0aWJsZUNvbG9yV2FybmluZyh2YWx1ZSwgZm9ybWF0KTtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBvbGRWYWx1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbW9kZUNoYW5nZWQgPSB0aGlzLm1vZGUgIT09IG5leHRNb2RlO1xuICAgICAgdGhpcy5zZXRNb2RlKG5leHRNb2RlLCB0aGlzLmludGVybmFsQ29sb3JVcGRhdGVDb250ZXh0ID09PSBudWxsKTtcbiAgICB9XG4gICAgY29uc3QgZHJhZ2dpbmcgPSB0aGlzLmFjdGl2ZUNhbnZhc0luZm87XG4gICAgaWYgKHRoaXMuaW50ZXJuYWxDb2xvclVwZGF0ZUNvbnRleHQgPT09IFwiaW5pdGlhbFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmludGVybmFsQ29sb3JVcGRhdGVDb250ZXh0ID09PSBcInVzZXItaW50ZXJhY3Rpb25cIikge1xuICAgICAgdGhpcy5jYWxjaXRlQ29sb3JQaWNrZXJJbnB1dC5lbWl0KCk7XG4gICAgICBpZiAoIWRyYWdnaW5nKSB7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUNvbG9yUGlja2VyQ2hhbmdlLmVtaXQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29sb3IgPSB0aGlzLmNvbG9yRnJvbVZhbHVlKHZhbHVlLCBpc0NsZWFyYWJsZSwgdGhpcy5tb2RlKTtcbiAgICBjb25zdCBjb2xvckNoYW5nZWQgPSAhY29sb3JFcXVhbChjb2xvciwgdGhpcy5jb2xvcik7XG4gICAgaWYgKG1vZGVDaGFuZ2VkIHx8IGNvbG9yQ2hhbmdlZCkge1xuICAgICAgdGhpcy5pbnRlcm5hbENvbG9yU2V0KGNvbG9yLCB0aGlzLmFscGhhQ2hhbm5lbCAmJiAhKHRoaXMubW9kZS5lbmRzV2l0aChcImFcIikgfHwgdGhpcy5tb2RlLmVuZHNXaXRoKFwiYS1jc3NcIikpIHx8IHRoaXMuaW50ZXJuYWxDb2xvclVwZGF0ZUNvbnRleHQgPT09IFwiaW50ZXJuYWxcIiwgXCJpbnRlcm5hbFwiKTtcbiAgICB9XG4gIH1cbiAgY29sb3JGcm9tVmFsdWUodmFsdWUsIGNsZWFyYWJsZSA9IGZhbHNlLCBtb2RlKSB7XG4gICAgaWYgKGNsZWFyYWJsZSAmJiAhdmFsdWUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gQ29sb3IodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgYWxwaGFDb21wYXRpYmxlKG1vZGUpID8gbm9ybWFsaXplQ29sb3IodmFsdWUpIDogdmFsdWUpO1xuICB9XG4gIGhhbmRsZVRhYkFjdGl2YXRlKGV2ZW50KSB7XG4gICAgdGhpcy5jaGFubmVsTW9kZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb2xvci1tb2RlXCIpO1xuICAgIHRoaXMudXBkYXRlQ2hhbm5lbHNGcm9tQ29sb3IodGhpcy5jb2xvcik7XG4gIH1cbiAgaGFuZGxlQ29sb3JGaWVsZFNjb3BlS2V5RG93bihldmVudCkge1xuICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcbiAgICBjb25zdCBhcnJvd0tleVRvWFlPZmZzZXQgPSB7XG4gICAgICBBcnJvd1VwOiB7IHg6IDAsIHk6IC0xMCB9LFxuICAgICAgQXJyb3dSaWdodDogeyB4OiAxMCwgeTogMCB9LFxuICAgICAgQXJyb3dEb3duOiB7IHg6IDAsIHk6IDEwIH0sXG4gICAgICBBcnJvd0xlZnQ6IHsgeDogLTEwLCB5OiAwIH1cbiAgICB9O1xuICAgIGlmIChhcnJvd0tleVRvWFlPZmZzZXRba2V5XSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuc2NvcGVPcmllbnRhdGlvbiA9IGtleSA9PT0gXCJBcnJvd0Rvd25cIiB8fCBrZXkgPT09IFwiQXJyb3dVcFwiID8gXCJ2ZXJ0aWNhbFwiIDogXCJob3Jpem9udGFsXCI7XG4gICAgICB0aGlzLmNhcHR1cmVDb2xvckZpZWxkQ29sb3IodGhpcy5jb2xvckZpZWxkU2NvcGVMZWZ0ICsgYXJyb3dLZXlUb1hZT2Zmc2V0W2tleV0ueCB8fCAwLCB0aGlzLmNvbG9yRmllbGRTY29wZVRvcCArIGFycm93S2V5VG9YWU9mZnNldFtrZXldLnkgfHwgMCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVIdWVTY29wZUtleURvd24oZXZlbnQpIHtcbiAgICBjb25zdCBtb2RpZmllciA9IGV2ZW50LnNoaWZ0S2V5ID8gMTAgOiAxO1xuICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcbiAgICBjb25zdCBhcnJvd0tleVRvWE9mZnNldCA9IHtcbiAgICAgIEFycm93VXA6IDEsXG4gICAgICBBcnJvd1JpZ2h0OiAxLFxuICAgICAgQXJyb3dEb3duOiAtMSxcbiAgICAgIEFycm93TGVmdDogLTFcbiAgICB9O1xuICAgIGlmIChhcnJvd0tleVRvWE9mZnNldFtrZXldKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgZGVsdGEgPSBhcnJvd0tleVRvWE9mZnNldFtrZXldICogbW9kaWZpZXI7XG4gICAgICBjb25zdCBodWUgPSB0aGlzLmJhc2VDb2xvckZpZWxkQ29sb3IuaHVlKCk7XG4gICAgICBjb25zdCBjb2xvciA9IHRoaXMuYmFzZUNvbG9yRmllbGRDb2xvci5odWUoaHVlICsgZGVsdGEpO1xuICAgICAgdGhpcy5pbnRlcm5hbENvbG9yU2V0KGNvbG9yLCBmYWxzZSk7XG4gICAgfVxuICB9XG4gIGhhbmRsZUhleElucHV0Q2hhbmdlKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgY29uc3QgeyBpc0NsZWFyYWJsZSwgY29sb3IgfSA9IHRoaXM7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgaGV4ID0gaW5wdXQudmFsdWU7XG4gICAgaWYgKGlzQ2xlYXJhYmxlICYmICFoZXgpIHtcbiAgICAgIHRoaXMuaW50ZXJuYWxDb2xvclNldChudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZEhleCA9IGNvbG9yICYmIG5vcm1hbGl6ZUhleChoZXhpZnkoY29sb3IsIGFscGhhQ29tcGF0aWJsZSh0aGlzLm1vZGUpKSk7XG4gICAgaWYgKGhleCAhPT0gbm9ybWFsaXplZEhleCkge1xuICAgICAgdGhpcy5pbnRlcm5hbENvbG9yU2V0KENvbG9yKGhleCkpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVTYXZlZENvbG9yU2VsZWN0KGV2ZW50KSB7XG4gICAgY29uc3Qgc3dhdGNoID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICB0aGlzLmludGVybmFsQ29sb3JTZXQoQ29sb3Ioc3dhdGNoLmNvbG9yKSk7XG4gIH1cbiAgaGFuZGxlQ2hhbm5lbElucHV0KGV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IGNoYW5uZWxJbmRleCA9IE51bWJlcihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNoYW5uZWwtaW5kZXhcIikpO1xuICAgIGNvbnN0IGlzQWxwaGFDaGFubmVsID0gY2hhbm5lbEluZGV4ID09PSAzO1xuICAgIGNvbnN0IGxpbWl0ID0gaXNBbHBoYUNoYW5uZWwgPyBPUEFDSVRZX0xJTUlUUy5tYXggOiB0aGlzLmNoYW5uZWxNb2RlID09PSBcInJnYlwiID8gUkdCX0xJTUlUU1tPYmplY3Qua2V5cyhSR0JfTElNSVRTKVtjaGFubmVsSW5kZXhdXSA6IEhTVl9MSU1JVFNbT2JqZWN0LmtleXMoSFNWX0xJTUlUUylbY2hhbm5lbEluZGV4XV07XG4gICAgbGV0IGlucHV0VmFsdWU7XG4gICAgaWYgKCFpbnB1dC52YWx1ZSkge1xuICAgICAgaW5wdXRWYWx1ZSA9IFwiXCI7XG4gICAgICB0aGlzLmlzQWN0aXZlQ2hhbm5lbElucHV0RW1wdHkgPSB0cnVlO1xuICAgICAgdGhpcy51cE9yRG93bkFycm93S2V5VHJhY2tlciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcbiAgICAgIGNvbnN0IGFkanVzdGVkVmFsdWUgPSB2YWx1ZSArIHRoaXMuc2hpZnRLZXlDaGFubmVsQWRqdXN0bWVudDtcbiAgICAgIGNvbnN0IGNsYW1wZWQgPSBjbGFtcChhZGp1c3RlZFZhbHVlLCAwLCBsaW1pdCk7XG4gICAgICBpbnB1dFZhbHVlID0gY2xhbXBlZC50b1N0cmluZygpO1xuICAgIH1cbiAgICBpbnB1dC52YWx1ZSA9IGlucHV0VmFsdWU7XG4gICAgaWYgKGlucHV0VmFsdWUgIT09IFwiXCIgJiYgdGhpcy5zaGlmdEtleUNoYW5uZWxBZGp1c3RtZW50ICE9PSAwKSB7XG4gICAgICB0aGlzLmhhbmRsZUNoYW5uZWxDaGFuZ2UoZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoaW5wdXRWYWx1ZSAhPT0gXCJcIikge1xuICAgICAgdGhpcy5oYW5kbGVDaGFubmVsQ2hhbmdlKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlQ2hhbm5lbEJsdXIoZXZlbnQpIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3QgY2hhbm5lbEluZGV4ID0gTnVtYmVyKGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtY2hhbm5lbC1pbmRleFwiKSk7XG4gICAgY29uc3QgY2hhbm5lbHMgPSBbLi4udGhpcy5jaGFubmVsc107XG4gICAgY29uc3QgcmVzdG9yZVZhbHVlRHVlVG9FbXB0eUlucHV0ID0gIWlucHV0LnZhbHVlICYmICF0aGlzLmlzQ2xlYXJhYmxlO1xuICAgIGlmIChyZXN0b3JlVmFsdWVEdWVUb0VtcHR5SW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gY2hhbm5lbHNbY2hhbm5lbEluZGV4XT8udG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlQ2hhbm5lbEZvY3VzKGV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgIGlucHV0LnNlbGVjdFRleHQoKTtcbiAgfVxuICBoYW5kbGVDaGFubmVsS2V5VXBPckRvd24oZXZlbnQpIHtcbiAgICB0aGlzLnNoaWZ0S2V5Q2hhbm5lbEFkanVzdG1lbnQgPSAwO1xuICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcbiAgICBpZiAoa2V5ICE9PSBcIkFycm93VXBcIiAmJiBrZXkgIT09IFwiQXJyb3dEb3duXCIgfHwgIWV2ZW50LmNvbXBvc2VkUGF0aCgpLnNvbWUoKG5vZGUpID0+IG5vZGUuY2xhc3NMaXN0Py5jb250YWlucyhDU1MuY2hhbm5lbCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgc2hpZnRLZXkgfSA9IGV2ZW50O1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCF0aGlzLmNvbG9yKSB7XG4gICAgICB0aGlzLmludGVybmFsQ29sb3JTZXQodGhpcy5wcmV2aW91c0NvbG9yKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wbGVtZW50YXJ5QnVtcCA9IDk7XG4gICAgdGhpcy5zaGlmdEtleUNoYW5uZWxBZGp1c3RtZW50ID0ga2V5ID09PSBcIkFycm93VXBcIiAmJiBzaGlmdEtleSA/IGNvbXBsZW1lbnRhcnlCdW1wIDoga2V5ID09PSBcIkFycm93RG93blwiICYmIHNoaWZ0S2V5ID8gLWNvbXBsZW1lbnRhcnlCdW1wIDogMDtcbiAgICBpZiAoa2V5ID09PSBcIkFycm93VXBcIikge1xuICAgICAgdGhpcy51cE9yRG93bkFycm93S2V5VHJhY2tlciA9IFwidXBcIjtcbiAgICB9XG4gICAgaWYgKGtleSA9PT0gXCJBcnJvd0Rvd25cIikge1xuICAgICAgdGhpcy51cE9yRG93bkFycm93S2V5VHJhY2tlciA9IFwiZG93blwiO1xuICAgIH1cbiAgfVxuICBnZXRDaGFubmVsSW5wdXRMaW1pdChjaGFubmVsSW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFubmVsTW9kZSA9PT0gXCJyZ2JcIiA/IFJHQl9MSU1JVFNbT2JqZWN0LmtleXMoUkdCX0xJTUlUUylbY2hhbm5lbEluZGV4XV0gOiBIU1ZfTElNSVRTW09iamVjdC5rZXlzKEhTVl9MSU1JVFMpW2NoYW5uZWxJbmRleF1dO1xuICB9XG4gIGhhbmRsZUNoYW5uZWxDaGFuZ2UoZXZlbnQpIHtcbiAgICBjb25zdCBpbnB1dCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3QgY2hhbm5lbEluZGV4ID0gTnVtYmVyKGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtY2hhbm5lbC1pbmRleFwiKSk7XG4gICAgY29uc3QgY2hhbm5lbHMgPSBbLi4udGhpcy5jaGFubmVsc107XG4gICAgY29uc3Qgc2hvdWxkQ2xlYXJDaGFubmVscyA9IHRoaXMuaXNDbGVhcmFibGUgJiYgIWlucHV0LnZhbHVlO1xuICAgIGlmIChzaG91bGRDbGVhckNoYW5uZWxzKSB7XG4gICAgICB0aGlzLmNoYW5uZWxzID0gW251bGwsIG51bGwsIG51bGwsIG51bGxdO1xuICAgICAgdGhpcy5pbnRlcm5hbENvbG9yU2V0KG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpc0FscGhhQ2hhbm5lbCA9IGNoYW5uZWxJbmRleCA9PT0gMztcbiAgICBpZiAodGhpcy5pc0FjdGl2ZUNoYW5uZWxJbnB1dEVtcHR5ICYmIHRoaXMudXBPckRvd25BcnJvd0tleVRyYWNrZXIpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gdGhpcy51cE9yRG93bkFycm93S2V5VHJhY2tlciA9PT0gXCJ1cFwiID8gKGNoYW5uZWxzW2NoYW5uZWxJbmRleF0gKyAxIDw9IHRoaXMuZ2V0Q2hhbm5lbElucHV0TGltaXQoY2hhbm5lbEluZGV4KSA/IGNoYW5uZWxzW2NoYW5uZWxJbmRleF0gKyAxIDogdGhpcy5nZXRDaGFubmVsSW5wdXRMaW1pdChjaGFubmVsSW5kZXgpKS50b1N0cmluZygpIDogKGNoYW5uZWxzW2NoYW5uZWxJbmRleF0gLSAxID49IDAgPyBjaGFubmVsc1tjaGFubmVsSW5kZXhdIC0gMSA6IDApLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLmlzQWN0aXZlQ2hhbm5lbElucHV0RW1wdHkgPSBmYWxzZTtcbiAgICAgIHRoaXMudXBPckRvd25BcnJvd0tleVRyYWNrZXIgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZSA9IGlucHV0LnZhbHVlID8gTnVtYmVyKGlucHV0LnZhbHVlKSA6IGNoYW5uZWxzW2NoYW5uZWxJbmRleF07XG4gICAgY2hhbm5lbHNbY2hhbm5lbEluZGV4XSA9IGlzQWxwaGFDaGFubmVsID8gb3BhY2l0eVRvQWxwaGEodmFsdWUpIDogdmFsdWU7XG4gICAgdGhpcy51cGRhdGVDb2xvckZyb21DaGFubmVscyhjaGFubmVscyk7XG4gIH1cbiAgaGFuZGxlU2F2ZWRDb2xvcktleURvd24oZXZlbnQpIHtcbiAgICBpZiAoaXNBY3RpdmF0aW9uS2V5KGV2ZW50LmtleSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmhhbmRsZVNhdmVkQ29sb3JTZWxlY3QoZXZlbnQpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVDb2xvckZpZWxkUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgICB0aGlzLmhhbmRsZUNhbnZhc0NvbnRyb2xQb2ludGVyRG93bihldmVudCwgdGhpcy5jb2xvckZpZWxkUmVuZGVyaW5nQ29udGV4dCwgdGhpcy5jYXB0dXJlQ29sb3JGaWVsZENvbG9yLCB0aGlzLmNvbG9yRmllbGRTY29wZVJlZi52YWx1ZSk7XG4gIH1cbiAgZm9jdXNTY29wZShmb2N1c0VsKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGZvY3VzRWwuZm9jdXMoKTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVIdWVTbGlkZXJQb2ludGVyRG93bihldmVudCkge1xuICAgIHRoaXMuaGFuZGxlQ2FudmFzQ29udHJvbFBvaW50ZXJEb3duKGV2ZW50LCB0aGlzLmh1ZVNsaWRlclJlbmRlcmluZ0NvbnRleHQsIHRoaXMuY2FwdHVyZUh1ZVNsaWRlckNvbG9yLCB0aGlzLmh1ZVNjb3BlUmVmLnZhbHVlKTtcbiAgfVxuICBoYW5kbGVPcGFjaXR5U2xpZGVyUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgICB0aGlzLmhhbmRsZUNhbnZhc0NvbnRyb2xQb2ludGVyRG93bihldmVudCwgdGhpcy5vcGFjaXR5U2xpZGVyUmVuZGVyaW5nQ29udGV4dCwgdGhpcy5jYXB0dXJlT3BhY2l0eVNsaWRlclZhbHVlLCB0aGlzLm9wYWNpdHlTY29wZVJlZi52YWx1ZSk7XG4gIH1cbiAgaGFuZGxlQ2FudmFzQ29udHJvbFBvaW50ZXJEb3duKGV2ZW50LCByZW5kZXJpbmdDb250ZXh0LCBjYXB0dXJlVmFsdWUsIHNjb3BlTm9kZSkge1xuICAgIGlmICghaXNQcmltYXJ5UG9pbnRlckJ1dHRvbihldmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLmdsb2JhbFBvaW50ZXJNb3ZlSGFuZGxlcik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy5nbG9iYWxQb2ludGVyVXBIYW5kbGVyLCB7XG4gICAgICBvbmNlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5hY3RpdmVDYW52YXNJbmZvID0ge1xuICAgICAgY29udGV4dDogcmVuZGVyaW5nQ29udGV4dCxcbiAgICAgIGJvdW5kczogcmVuZGVyaW5nQ29udGV4dC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICB9O1xuICAgIGNhcHR1cmVWYWx1ZS5jYWxsKHRoaXMsIGV2ZW50Lm9mZnNldFgsIGV2ZW50Lm9mZnNldFkpO1xuICAgIHRoaXMuZm9jdXNTY29wZShzY29wZU5vZGUpO1xuICB9XG4gIGhhbmRsZUtleURvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG4gIHNob3dJbmNvbXBhdGlibGVDb2xvcldhcm5pbmcodmFsdWUsIGZvcm1hdCkge1xuICAgIGNvbnNvbGUud2FybihgaWdub3JpbmcgY29sb3IgdmFsdWUgKCR7dmFsdWV9KSBhcyBpdCBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IGZvcm1hdCAoJHtmb3JtYXR9KWApO1xuICB9XG4gIHNldE1vZGUoZm9ybWF0LCB3YXJuID0gdHJ1ZSkge1xuICAgIGNvbnN0IG1vZGUgPSBmb3JtYXQgPT09IFwiYXV0b1wiID8gdGhpcy5tb2RlIDogZm9ybWF0O1xuICAgIHRoaXMubW9kZSA9IHRoaXMuZW5zdXJlQ29tcGF0aWJsZU1vZGUobW9kZSwgd2Fybik7XG4gIH1cbiAgZW5zdXJlQ29tcGF0aWJsZU1vZGUobW9kZSwgd2Fybikge1xuICAgIGNvbnN0IHsgYWxwaGFDaGFubmVsIH0gPSB0aGlzO1xuICAgIGNvbnN0IGlzQWxwaGFDb21wYXRpYmxlID0gYWxwaGFDb21wYXRpYmxlKG1vZGUpO1xuICAgIGlmIChhbHBoYUNoYW5uZWwgJiYgIWlzQWxwaGFDb21wYXRpYmxlKSB7XG4gICAgICBjb25zdCBhbHBoYU1vZGUgPSB0b0FscGhhTW9kZShtb2RlKTtcbiAgICAgIGlmICh3YXJuKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihgc2V0dGluZyBmb3JtYXQgdG8gKCR7YWxwaGFNb2RlfSkgYXMgdGhlIHByb3ZpZGVkIG9uZSAoJHttb2RlfSkgZG9lcyBub3Qgc3VwcG9ydCBhbHBoYWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFscGhhTW9kZTtcbiAgICB9XG4gICAgaWYgKCFhbHBoYUNoYW5uZWwgJiYgaXNBbHBoYUNvbXBhdGlibGUpIHtcbiAgICAgIGNvbnN0IG5vbkFscGhhTW9kZSA9IHRvTm9uQWxwaGFNb2RlKG1vZGUpO1xuICAgICAgaWYgKHdhcm4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBzZXR0aW5nIGZvcm1hdCB0byAoJHtub25BbHBoYU1vZGV9KSBhcyB0aGUgcHJvdmlkZWQgb25lICgke21vZGV9KSBkb2VzIG5vdCBzdXBwb3J0IGFscGhhYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbm9uQWxwaGFNb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZTtcbiAgfVxuICBjYXB0dXJlSHVlU2xpZGVyQ29sb3IoeCkge1xuICAgIGNvbnN0IGh1ZSA9IEhVRV9MSU1JVF9DT05TVFJBSU5FRCAvIHRoaXMuZWZmZWN0aXZlU2xpZGVyV2lkdGggKiB4O1xuICAgIHRoaXMuaW50ZXJuYWxDb2xvclNldCh0aGlzLmJhc2VDb2xvckZpZWxkQ29sb3IuaHVlKGh1ZSksIGZhbHNlKTtcbiAgfVxuICBjYXB0dXJlT3BhY2l0eVNsaWRlclZhbHVlKHgpIHtcbiAgICBjb25zdCBhbHBoYSA9IG9wYWNpdHlUb0FscGhhKE9QQUNJVFlfTElNSVRTLm1heCAvIHRoaXMuZWZmZWN0aXZlU2xpZGVyV2lkdGggKiB4KTtcbiAgICB0aGlzLmludGVybmFsQ29sb3JTZXQodGhpcy5iYXNlQ29sb3JGaWVsZENvbG9yLmFscGhhKGFscGhhKSwgZmFsc2UpO1xuICB9XG4gIGludGVybmFsQ29sb3JTZXQoY29sb3IsIHNraXBFcXVhbCA9IHRydWUsIGNvbnRleHQgPSBcInVzZXItaW50ZXJhY3Rpb25cIikge1xuICAgIGlmIChza2lwRXF1YWwgJiYgY29sb3JFcXVhbChjb2xvciwgdGhpcy5jb2xvcikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hbENvbG9yVXBkYXRlQ29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMudmFsdWUgPSB0aGlzLnRvVmFsdWUoY29sb3IpO1xuICAgIHRoaXMuaW50ZXJuYWxDb2xvclVwZGF0ZUNvbnRleHQgPSBudWxsO1xuICB9XG4gIHRvVmFsdWUoY29sb3IsIGZvcm1hdCA9IHRoaXMubW9kZSkge1xuICAgIGlmICghY29sb3IpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBoZXhNb2RlID0gXCJoZXhcIjtcbiAgICBpZiAoZm9ybWF0LmluY2x1ZGVzKGhleE1vZGUpKSB7XG4gICAgICBjb25zdCBoYXNBbHBoYSA9IGZvcm1hdCA9PT0gQ1NTQ29sb3JNb2RlLkhFWEE7XG4gICAgICByZXR1cm4gbm9ybWFsaXplSGV4KGhleGlmeShjb2xvci5yb3VuZCgpLCBoYXNBbHBoYSksIGhhc0FscGhhKTtcbiAgICB9XG4gICAgaWYgKGZvcm1hdC5pbmNsdWRlcyhcIi1jc3NcIikpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY29sb3JbZm9ybWF0LnJlcGxhY2UoXCItY3NzXCIsIFwiXCIpLnJlcGxhY2UoXCJhXCIsIFwiXCIpXSgpLnJvdW5kKCkuc3RyaW5nKCk7XG4gICAgICBjb25zdCBuZWVkVG9JbmplY3RBbHBoYSA9IChmb3JtYXQuZW5kc1dpdGgoXCJhXCIpIHx8IGZvcm1hdC5lbmRzV2l0aChcImEtY3NzXCIpKSAmJiBjb2xvci5hbHBoYSgpID09PSAxO1xuICAgICAgaWYgKG5lZWRUb0luamVjdEFscGhhKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gdmFsdWUuc2xpY2UoMCwgMyk7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHZhbHVlLnNsaWNlKDQsIC0xKTtcbiAgICAgICAgcmV0dXJuIGAke21vZGVsfWEoJHt2YWx1ZXN9LCAke2NvbG9yLmFscGhhKCl9KWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IGNvbG9yT2JqZWN0ID0gKFxuICAgICAgLyogQ29sb3IoKSBkb2VzIG5vdCBzdXBwb3J0IGhzdmEsIGhzbGEgbm9yIHJnYmEsIHNvIHdlIHVzZSB0aGUgbm9uLWFscGhhIG1vZGUgKi9cbiAgICAgIGNvbG9yW3RvTm9uQWxwaGFNb2RlKGZvcm1hdCldKCkucm91bmQoKS5vYmplY3QoKVxuICAgICk7XG4gICAgaWYgKGZvcm1hdC5lbmRzV2l0aChcImFcIikpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemVBbHBoYShjb2xvck9iamVjdCk7XG4gICAgfVxuICAgIHJldHVybiBjb2xvck9iamVjdDtcbiAgfVxuICBnZXRTbGlkZXJDYXBTcGFjaW5nKCkge1xuICAgIGNvbnN0IHsgc3RhdGljRGltZW5zaW9uczogeyBzbGlkZXI6IHsgaGVpZ2h0IH0sIHRodW1iOiB7IHJhZGl1cyB9IH0gfSA9IHRoaXM7XG4gICAgcmV0dXJuIHJhZGl1cyAqIDIgLSBoZWlnaHQ7XG4gIH1cbiAgdXBkYXRlU3RhdGljRGltZW5zaW9ucyhzY2FsZSA9IFwibVwiKSB7XG4gICAgdGhpcy5zdGF0aWNEaW1lbnNpb25zID0gU1RBVElDX0RJTUVOU0lPTlNbc2NhbGVdO1xuICB9XG4gIGRlbGV0ZUNvbG9yKCkge1xuICAgIGNvbnN0IGNvbG9yVG9EZWxldGUgPSBoZXhpZnkodGhpcy5jb2xvciwgdGhpcy5hbHBoYUNoYW5uZWwpO1xuICAgIGNvbnN0IGluU3RvcmFnZSA9IHRoaXMuc2F2ZWRDb2xvcnMuaW5kZXhPZihjb2xvclRvRGVsZXRlKSA+IC0xO1xuICAgIGlmICghaW5TdG9yYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhdmVkQ29sb3JzID0gdGhpcy5zYXZlZENvbG9ycy5maWx0ZXIoKGNvbG9yKSA9PiBjb2xvciAhPT0gY29sb3JUb0RlbGV0ZSk7XG4gICAgdGhpcy5zYXZlZENvbG9ycyA9IHNhdmVkQ29sb3JzO1xuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSBgJHtERUZBVUxUX1NUT1JBR0VfS0VZX1BSRUZJWH0ke3RoaXMuc3RvcmFnZUlkfWA7XG4gICAgaWYgKHRoaXMuc3RvcmFnZUlkKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeShzYXZlZENvbG9ycykpO1xuICAgIH1cbiAgfVxuICBzYXZlQ29sb3IoKSB7XG4gICAgY29uc3QgY29sb3JUb1NhdmUgPSBoZXhpZnkodGhpcy5jb2xvciwgdGhpcy5hbHBoYUNoYW5uZWwpO1xuICAgIGNvbnN0IGFscmVhZHlTYXZlZCA9IHRoaXMuc2F2ZWRDb2xvcnMuaW5kZXhPZihjb2xvclRvU2F2ZSkgPiAtMTtcbiAgICBpZiAoYWxyZWFkeVNhdmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhdmVkQ29sb3JzID0gWy4uLnRoaXMuc2F2ZWRDb2xvcnMsIGNvbG9yVG9TYXZlXTtcbiAgICB0aGlzLnNhdmVkQ29sb3JzID0gc2F2ZWRDb2xvcnM7XG4gICAgY29uc3Qgc3RvcmFnZUtleSA9IGAke0RFRkFVTFRfU1RPUkFHRV9LRVlfUFJFRklYfSR7dGhpcy5zdG9yYWdlSWR9YDtcbiAgICBpZiAodGhpcy5zdG9yYWdlSWQpIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KHNhdmVkQ29sb3JzKSk7XG4gICAgfVxuICB9XG4gIGRyYXdDb2xvckZpZWxkKCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbG9yRmllbGRSZW5kZXJpbmdDb250ZXh0O1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5keW5hbWljRGltZW5zaW9ucy5jb2xvckZpZWxkO1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gdGhpcy5iYXNlQ29sb3JGaWVsZENvbG9yLmhzdigpLnNhdHVyYXRpb252KDEwMCkudmFsdWUoMTAwKS5hbHBoYSgxKS5zdHJpbmcoKTtcbiAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnN0IHdoaXRlR3JhZGllbnQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIHdpZHRoLCAwKTtcbiAgICB3aGl0ZUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcInJnYmEoMjU1LDI1NSwyNTUsMSlcIik7XG4gICAgd2hpdGVHcmFkaWVudC5hZGRDb2xvclN0b3AoMSwgXCJyZ2JhKDI1NSwyNTUsMjU1LDApXCIpO1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gd2hpdGVHcmFkaWVudDtcbiAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnN0IGJsYWNrR3JhZGllbnQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGhlaWdodCk7XG4gICAgYmxhY2tHcmFkaWVudC5hZGRDb2xvclN0b3AoMCwgXCJyZ2JhKDAsMCwwLDApXCIpO1xuICAgIGJsYWNrR3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwicmdiYSgwLDAsMCwxKVwiKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGJsYWNrR3JhZGllbnQ7XG4gICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB0aGlzLmRyYXdBY3RpdmVDb2xvckZpZWxkQ29sb3IoKTtcbiAgfVxuICBzZXRDYW52YXNDb250ZXh0U2l6ZShjYW52YXMsIHsgaGVpZ2h0LCB3aWR0aCB9KSB7XG4gICAgaWYgKCFjYW52YXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQgKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBjb250ZXh0LnNjYWxlKGRldmljZVBpeGVsUmF0aW8sIGRldmljZVBpeGVsUmF0aW8pO1xuICB9XG4gIGluaXRDb2xvckZpZWxkKGNhbnZhcykge1xuICAgIGlmICghY2FudmFzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29sb3JGaWVsZFJlbmRlcmluZ0NvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIHRoaXMudXBkYXRlQ2FudmFzU2l6ZShcImNvbG9yLWZpZWxkXCIpO1xuICAgIHRoaXMuZHJhd0NvbG9yQ29udHJvbHMoKTtcbiAgfVxuICBpbml0SHVlU2xpZGVyKGNhbnZhcykge1xuICAgIGlmICghY2FudmFzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaHVlU2xpZGVyUmVuZGVyaW5nQ29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdGhpcy51cGRhdGVDYW52YXNTaXplKFwiaHVlLXNsaWRlclwiKTtcbiAgICB0aGlzLmRyYXdIdWVTbGlkZXIoKTtcbiAgfVxuICBpbml0T3BhY2l0eVNsaWRlcihjYW52YXMpIHtcbiAgICBpZiAoIWNhbnZhcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm9wYWNpdHlTbGlkZXJSZW5kZXJpbmdDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICB0aGlzLnVwZGF0ZUNhbnZhc1NpemUoXCJvcGFjaXR5LXNsaWRlclwiKTtcbiAgICB0aGlzLmRyYXdPcGFjaXR5U2xpZGVyKCk7XG4gIH1cbiAgdXBkYXRlQ2FudmFzU2l6ZShjb250ZXh0ID0gXCJhbGxcIikge1xuICAgIGNvbnN0IHsgZHluYW1pY0RpbWVuc2lvbnMsIHN0YXRpY0RpbWVuc2lvbnMgfSA9IHRoaXM7XG4gICAgaWYgKGNvbnRleHQgPT09IFwiYWxsXCIgfHwgY29udGV4dCA9PT0gXCJjb2xvci1maWVsZFwiKSB7XG4gICAgICB0aGlzLnNldENhbnZhc0NvbnRleHRTaXplKHRoaXMuY29sb3JGaWVsZFJlbmRlcmluZ0NvbnRleHQ/LmNhbnZhcywgZHluYW1pY0RpbWVuc2lvbnMuY29sb3JGaWVsZCk7XG4gICAgfVxuICAgIGNvbnN0IGFkanVzdGVkU2xpZGVyRGltZW5zaW9ucyA9IHtcbiAgICAgIHdpZHRoOiB0aGlzLmVmZmVjdGl2ZVNsaWRlcldpZHRoLFxuICAgICAgaGVpZ2h0OiBzdGF0aWNEaW1lbnNpb25zLnNsaWRlci5oZWlnaHQgKyAoc3RhdGljRGltZW5zaW9ucy50aHVtYi5yYWRpdXMgLSBkeW5hbWljRGltZW5zaW9ucy5zbGlkZXIuaGVpZ2h0IC8gMikgKiAyXG4gICAgfTtcbiAgICBpZiAoY29udGV4dCA9PT0gXCJhbGxcIiB8fCBjb250ZXh0ID09PSBcImh1ZS1zbGlkZXJcIikge1xuICAgICAgdGhpcy5zZXRDYW52YXNDb250ZXh0U2l6ZSh0aGlzLmh1ZVNsaWRlclJlbmRlcmluZ0NvbnRleHQ/LmNhbnZhcywgYWRqdXN0ZWRTbGlkZXJEaW1lbnNpb25zKTtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQgPT09IFwiYWxsXCIgfHwgY29udGV4dCA9PT0gXCJvcGFjaXR5LXNsaWRlclwiKSB7XG4gICAgICB0aGlzLnNldENhbnZhc0NvbnRleHRTaXplKHRoaXMub3BhY2l0eVNsaWRlclJlbmRlcmluZ0NvbnRleHQ/LmNhbnZhcywgYWRqdXN0ZWRTbGlkZXJEaW1lbnNpb25zKTtcbiAgICB9XG4gIH1cbiAgZHJhd0FjdGl2ZUNvbG9yRmllbGRDb2xvcigpIHtcbiAgICBjb25zdCB7IGNvbG9yIH0gPSB0aGlzO1xuICAgIGlmICghY29sb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaHN2Q29sb3IgPSBjb2xvci5oc3YoKTtcbiAgICBjb25zdCB7IHN0YXRpY0RpbWVuc2lvbnM6IHsgdGh1bWI6IHsgcmFkaXVzIH0gfSB9ID0gdGhpcztcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuZHluYW1pY0RpbWVuc2lvbnMuY29sb3JGaWVsZDtcbiAgICBjb25zdCB4ID0gaHN2Q29sb3Iuc2F0dXJhdGlvbnYoKSAvIChIU1ZfTElNSVRTLnMgLyB3aWR0aCk7XG4gICAgY29uc3QgeSA9IGhlaWdodCAtIGhzdkNvbG9yLnZhbHVlKCkgLyAoSFNWX0xJTUlUUy52IC8gaGVpZ2h0KTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5jb2xvckZpZWxkU2NvcGVMZWZ0ID0geDtcbiAgICAgIHRoaXMuY29sb3JGaWVsZFNjb3BlVG9wID0geTtcbiAgICB9KTtcbiAgICB0aGlzLmRyYXdUaHVtYih0aGlzLmNvbG9yRmllbGRSZW5kZXJpbmdDb250ZXh0LCByYWRpdXMsIHgsIHksIGhzdkNvbG9yLCBmYWxzZSk7XG4gIH1cbiAgZHJhd1RodW1iKGNvbnRleHQsIHJhZGl1cywgeCwgeSwgY29sb3IsIGFwcGx5QWxwaGEpIHtcbiAgICBjb25zdCBzdGFydEFuZ2xlID0gMDtcbiAgICBjb25zdCBlbmRBbmdsZSA9IDIgKiBNYXRoLlBJO1xuICAgIGNvbnN0IG91dGxpbmVXaWR0aCA9IDE7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb250ZXh0LmFyYyh4LCB5LCByYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwiI2ZmZlwiO1xuICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMC4zKVwiO1xuICAgIGNvbnRleHQubGluZVdpZHRoID0gb3V0bGluZVdpZHRoO1xuICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgaWYgKGFwcGx5QWxwaGEgJiYgY29sb3IuYWxwaGEoKSA8IDEpIHtcbiAgICAgIGNvbnN0IHBhdHRlcm4gPSBjb250ZXh0LmNyZWF0ZVBhdHRlcm4odGhpcy5nZXRDaGVja2VyZWRCYWNrZ3JvdW5kUGF0dGVybigpLCBcInJlcGVhdFwiKTtcbiAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICBjb250ZXh0LmFyYyh4LCB5LCByYWRpdXMgLSAzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSk7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHBhdHRlcm47XG4gICAgICBjb250ZXh0LmZpbGwoKTtcbiAgICB9XG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1hdG9wXCI7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb250ZXh0LmFyYyh4LCB5LCByYWRpdXMgLSAzLCBzdGFydEFuZ2xlLCBlbmRBbmdsZSk7XG4gICAgY29uc3QgYWxwaGEgPSBhcHBseUFscGhhID8gY29sb3IuYWxwaGEoKSA6IDE7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBjb2xvci5yZ2IoKS5hbHBoYShhbHBoYSkuc3RyaW5nKCk7XG4gICAgY29udGV4dC5maWxsKCk7XG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XG4gIH1cbiAgZHJhd0FjdGl2ZUh1ZVNsaWRlckNvbG9yKCkge1xuICAgIGNvbnN0IHsgY29sb3IgfSA9IHRoaXM7XG4gICAgaWYgKCFjb2xvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoc3ZDb2xvciA9IGNvbG9yLmhzdigpLnNhdHVyYXRpb252KDEwMCkudmFsdWUoMTAwKTtcbiAgICBjb25zdCB7IHN0YXRpY0RpbWVuc2lvbnM6IHsgdGh1bWI6IHsgcmFkaXVzIH0gfSB9ID0gdGhpcztcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuZWZmZWN0aXZlU2xpZGVyV2lkdGg7XG4gICAgY29uc3QgeCA9IGhzdkNvbG9yLmh1ZSgpIC8gKEhVRV9MSU1JVF9DT05TVFJBSU5FRCAvIHdpZHRoKTtcbiAgICBjb25zdCB5ID0gcmFkaXVzO1xuICAgIGNvbnN0IHNsaWRlckJvdW5kWCA9IHRoaXMuZ2V0U2xpZGVyQm91bmRYKHgsIHdpZHRoLCByYWRpdXMpO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB0aGlzLmh1ZVNjb3BlTGVmdCA9IHNsaWRlckJvdW5kWDtcbiAgICB9KTtcbiAgICB0aGlzLmRyYXdUaHVtYih0aGlzLmh1ZVNsaWRlclJlbmRlcmluZ0NvbnRleHQsIHJhZGl1cywgc2xpZGVyQm91bmRYLCB5LCBoc3ZDb2xvciwgZmFsc2UpO1xuICB9XG4gIGRyYXdIdWVTbGlkZXIoKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuaHVlU2xpZGVyUmVuZGVyaW5nQ29udGV4dDtcbiAgICBjb25zdCB7IHN0YXRpY0RpbWVuc2lvbnM6IHsgc2xpZGVyOiB7IGhlaWdodCB9LCB0aHVtYjogeyByYWRpdXM6IHRodW1iUmFkaXVzIH0gfSB9ID0gdGhpcztcbiAgICBjb25zdCB4ID0gMDtcbiAgICBjb25zdCB5ID0gdGh1bWJSYWRpdXMgLSBoZWlnaHQgLyAyO1xuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5lZmZlY3RpdmVTbGlkZXJXaWR0aDtcbiAgICBjb25zdCBncmFkaWVudCA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgd2lkdGgsIDApO1xuICAgIGNvbnN0IGh1ZVNsaWRlckNvbG9yU3RvcEtleXdvcmRzID0gW1xuICAgICAgXCJyZWRcIixcbiAgICAgIFwieWVsbG93XCIsXG4gICAgICBcImxpbWVcIixcbiAgICAgIFwiY3lhblwiLFxuICAgICAgXCJibHVlXCIsXG4gICAgICBcIm1hZ2VudGFcIixcbiAgICAgIFwiI2ZmMDAwNFwiXG4gICAgXTtcbiAgICBjb25zdCBvZmZzZXQgPSAxIC8gKGh1ZVNsaWRlckNvbG9yU3RvcEtleXdvcmRzLmxlbmd0aCAtIDEpO1xuICAgIGxldCBjdXJyZW50T2Zmc2V0ID0gMDtcbiAgICBodWVTbGlkZXJDb2xvclN0b3BLZXl3b3Jkcy5mb3JFYWNoKChrZXl3b3JkKSA9PiB7XG4gICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoY3VycmVudE9mZnNldCwgQ29sb3Ioa2V5d29yZCkuc3RyaW5nKCkpO1xuICAgICAgY3VycmVudE9mZnNldCArPSBvZmZzZXQ7XG4gICAgfSk7XG4gICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCArIHRoaXMuZ2V0U2xpZGVyQ2FwU3BhY2luZygpICogMik7XG4gICAgdGhpcy5kcmF3U2xpZGVyUGF0aChjb250ZXh0LCBoZWlnaHQsIHdpZHRoLCB4LCB5KTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMC4zKVwiO1xuICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIHRoaXMuZHJhd0FjdGl2ZUh1ZVNsaWRlckNvbG9yKCk7XG4gIH1cbiAgZHJhd09wYWNpdHlTbGlkZXIoKSB7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMub3BhY2l0eVNsaWRlclJlbmRlcmluZ0NvbnRleHQ7XG4gICAgY29uc3QgeyBiYXNlQ29sb3JGaWVsZENvbG9yOiBwcmV2aW91c0NvbG9yLCBzdGF0aWNEaW1lbnNpb25zOiB7IHNsaWRlcjogeyBoZWlnaHQgfSwgdGh1bWI6IHsgcmFkaXVzOiB0aHVtYlJhZGl1cyB9IH0gfSA9IHRoaXM7XG4gICAgY29uc3QgeCA9IDA7XG4gICAgY29uc3QgeSA9IHRodW1iUmFkaXVzIC0gaGVpZ2h0IC8gMjtcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuZWZmZWN0aXZlU2xpZGVyV2lkdGg7XG4gICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCArIHRoaXMuZ2V0U2xpZGVyQ2FwU3BhY2luZygpICogMik7XG4gICAgY29uc3QgZ3JhZGllbnQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIHksIHdpZHRoLCAwKTtcbiAgICBjb25zdCBzdGFydENvbG9yID0gcHJldmlvdXNDb2xvci5yZ2IoKS5hbHBoYSgwKTtcbiAgICBjb25zdCBtaWRDb2xvciA9IHByZXZpb3VzQ29sb3IucmdiKCkuYWxwaGEoMC41KTtcbiAgICBjb25zdCBlbmRDb2xvciA9IHByZXZpb3VzQ29sb3IucmdiKCkuYWxwaGEoMSk7XG4gICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIHN0YXJ0Q29sb3Iuc3RyaW5nKCkpO1xuICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsIG1pZENvbG9yLnN0cmluZygpKTtcbiAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgZW5kQ29sb3Iuc3RyaW5nKCkpO1xuICAgIHRoaXMuZHJhd1NsaWRlclBhdGgoY29udGV4dCwgaGVpZ2h0LCB3aWR0aCwgeCwgeSk7XG4gICAgY29uc3QgcGF0dGVybiA9IGNvbnRleHQuY3JlYXRlUGF0dGVybih0aGlzLmdldENoZWNrZXJlZEJhY2tncm91bmRQYXR0ZXJuKCksIFwicmVwZWF0XCIpO1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gcGF0dGVybjtcbiAgICBjb250ZXh0LmZpbGwoKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuICAgIGNvbnRleHQuZmlsbCgpO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcInJnYmEoMCwwLDAsMC4zKVwiO1xuICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIHRoaXMuZHJhd0FjdGl2ZU9wYWNpdHlTbGlkZXJDb2xvcigpO1xuICB9XG4gIGRyYXdTbGlkZXJQYXRoKGNvbnRleHQsIGhlaWdodCwgd2lkdGgsIHgsIHkpIHtcbiAgICBjb25zdCByYWRpdXMgPSBoZWlnaHQgLyAyICsgMTtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQubW92ZVRvKHggKyByYWRpdXMsIHkpO1xuICAgIGNvbnRleHQubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cywgeSk7XG4gICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSwgeCArIHdpZHRoLCB5ICsgcmFkaXVzKTtcbiAgICBjb250ZXh0LmxpbmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQgLSByYWRpdXMpO1xuICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHkgKyBoZWlnaHQsIHggKyB3aWR0aCAtIHJhZGl1cywgeSArIGhlaWdodCk7XG4gICAgY29udGV4dC5saW5lVG8oeCArIHJhZGl1cywgeSArIGhlaWdodCk7XG4gICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHkgKyBoZWlnaHQsIHgsIHkgKyBoZWlnaHQgLSByYWRpdXMpO1xuICAgIGNvbnRleHQubGluZVRvKHgsIHkgKyByYWRpdXMpO1xuICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4LCB5LCB4ICsgcmFkaXVzLCB5KTtcbiAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICB9XG4gIGdldENoZWNrZXJlZEJhY2tncm91bmRQYXR0ZXJuKCkge1xuICAgIGlmICh0aGlzLmNoZWNrZXJQYXR0ZXJuKSB7XG4gICAgICByZXR1cm4gdGhpcy5jaGVja2VyUGF0dGVybjtcbiAgICB9XG4gICAgY29uc3QgcGF0dGVybiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgcGF0dGVybi53aWR0aCA9IDEwO1xuICAgIHBhdHRlcm4uaGVpZ2h0ID0gMTA7XG4gICAgY29uc3QgcGF0dGVybkNvbnRleHQgPSBwYXR0ZXJuLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBwYXR0ZXJuQ29udGV4dC5maWxsU3R5bGUgPSBcIiNjY2NcIjtcbiAgICBwYXR0ZXJuQ29udGV4dC5maWxsUmVjdCgwLCAwLCAxMCwgMTApO1xuICAgIHBhdHRlcm5Db250ZXh0LmZpbGxTdHlsZSA9IFwiI2ZmZlwiO1xuICAgIHBhdHRlcm5Db250ZXh0LmZpbGxSZWN0KDAsIDAsIDUsIDUpO1xuICAgIHBhdHRlcm5Db250ZXh0LmZpbGxSZWN0KDUsIDUsIDUsIDUpO1xuICAgIHRoaXMuY2hlY2tlclBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgIHJldHVybiBwYXR0ZXJuO1xuICB9XG4gIGRyYXdBY3RpdmVPcGFjaXR5U2xpZGVyQ29sb3IoKSB7XG4gICAgY29uc3QgeyBjb2xvciB9ID0gdGhpcztcbiAgICBpZiAoIWNvbG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGhzdkNvbG9yID0gY29sb3I7XG4gICAgY29uc3QgeyBzdGF0aWNEaW1lbnNpb25zOiB7IHRodW1iOiB7IHJhZGl1cyB9IH0gfSA9IHRoaXM7XG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLmVmZmVjdGl2ZVNsaWRlcldpZHRoO1xuICAgIGNvbnN0IHggPSBhbHBoYVRvT3BhY2l0eShoc3ZDb2xvci5hbHBoYSgpKSAvIChPUEFDSVRZX0xJTUlUUy5tYXggLyB3aWR0aCk7XG4gICAgY29uc3QgeSA9IHJhZGl1cztcbiAgICBjb25zdCBzbGlkZXJCb3VuZFggPSB0aGlzLmdldFNsaWRlckJvdW5kWCh4LCB3aWR0aCwgcmFkaXVzKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgdGhpcy5vcGFjaXR5U2NvcGVMZWZ0ID0gc2xpZGVyQm91bmRYO1xuICAgIH0pO1xuICAgIHRoaXMuZHJhd1RodW1iKHRoaXMub3BhY2l0eVNsaWRlclJlbmRlcmluZ0NvbnRleHQsIHJhZGl1cywgc2xpZGVyQm91bmRYLCB5LCBoc3ZDb2xvciwgdHJ1ZSk7XG4gIH1cbiAgZ2V0U2xpZGVyQm91bmRYKHgsIHdpZHRoLCByYWRpdXMpIHtcbiAgICBjb25zdCBjbG9zZVRvRWRnZSA9IGNsb3NlVG9SYW5nZUVkZ2UoeCwgd2lkdGgsIHJhZGl1cyk7XG4gICAgcmV0dXJuIGNsb3NlVG9FZGdlID09PSAwID8geCA6IGNsb3NlVG9FZGdlID09PSAtMSA/IHJlbWFwKHgsIDAsIHdpZHRoLCByYWRpdXMsIHJhZGl1cyAqIDIpIDogcmVtYXAoeCwgMCwgd2lkdGgsIHdpZHRoIC0gcmFkaXVzICogMiwgd2lkdGggLSByYWRpdXMpO1xuICB9XG4gIGhhbmRsZU9wYWNpdHlTY29wZUtleURvd24oZXZlbnQpIHtcbiAgICBjb25zdCBtb2RpZmllciA9IGV2ZW50LnNoaWZ0S2V5ID8gMTAgOiAxO1xuICAgIGNvbnN0IHsga2V5IH0gPSBldmVudDtcbiAgICBjb25zdCBhcnJvd0tleVRvWE9mZnNldCA9IHtcbiAgICAgIEFycm93VXA6IDAuMDEsXG4gICAgICBBcnJvd1JpZ2h0OiAwLjAxLFxuICAgICAgQXJyb3dEb3duOiAtMC4wMSxcbiAgICAgIEFycm93TGVmdDogLTAuMDFcbiAgICB9O1xuICAgIGlmIChhcnJvd0tleVRvWE9mZnNldFtrZXldKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgZGVsdGEgPSBhcnJvd0tleVRvWE9mZnNldFtrZXldICogbW9kaWZpZXI7XG4gICAgICBjb25zdCBhbHBoYSA9IHRoaXMuYmFzZUNvbG9yRmllbGRDb2xvci5hbHBoYSgpO1xuICAgICAgY29uc3QgY29sb3IgPSB0aGlzLmJhc2VDb2xvckZpZWxkQ29sb3IuYWxwaGEoYWxwaGEgKyBkZWx0YSk7XG4gICAgICB0aGlzLmludGVybmFsQ29sb3JTZXQoY29sb3IsIGZhbHNlKTtcbiAgICB9XG4gIH1cbiAgdXBkYXRlQ29sb3JGcm9tQ2hhbm5lbHMoY2hhbm5lbHMpIHtcbiAgICB0aGlzLmludGVybmFsQ29sb3JTZXQoQ29sb3IoY2hhbm5lbHMsIHRoaXMuY2hhbm5lbE1vZGUpKTtcbiAgfVxuICB1cGRhdGVDaGFubmVsc0Zyb21Db2xvcihjb2xvcikge1xuICAgIHRoaXMuY2hhbm5lbHMgPSBjb2xvciA/IHRoaXMudG9DaGFubmVscyhjb2xvcikgOiBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF07XG4gIH1cbiAgdG9DaGFubmVscyhjb2xvcikge1xuICAgIGNvbnN0IHsgY2hhbm5lbE1vZGUgfSA9IHRoaXM7XG4gICAgY29uc3QgY2hhbm5lbHMgPSBjb2xvcltjaGFubmVsTW9kZV0oKS5yb3VuZCgpLmFycmF5KCk7XG4gICAgaWYgKGNoYW5uZWxzLmxlbmd0aCA9PT0gMykge1xuICAgICAgY2hhbm5lbHMucHVzaCgxKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5uZWxzO1xuICB9XG4gIGdldEFkanVzdGVkU2NvcGVQb3NpdGlvbihsZWZ0LCB0b3ApIHtcbiAgICByZXR1cm4gW2xlZnQgLSBTQ09QRV9TSVpFIC8gMiwgdG9wIC0gU0NPUEVfU0laRSAvIDJdO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNoYW5uZWxzRGlzYWJsZWQsIGNvbG9yLCBjb2xvckZpZWxkU2NvcGVMZWZ0LCBjb2xvckZpZWxkU2NvcGVUb3AsIHN0YXRpY0RpbWVuc2lvbnM6IHsgdGh1bWI6IHsgcmFkaXVzOiB0aHVtYlJhZGl1cyB9IH0sIGZpZWxkRGlzYWJsZWQsIGhleERpc2FibGVkLCBodWVTY29wZUxlZnQsIG1lc3NhZ2VzLCBhbHBoYUNoYW5uZWwsIG9wYWNpdHlTY29wZUxlZnQsIHNhdmVkQ29sb3JzLCBzYXZlZERpc2FibGVkLCBzY2FsZSwgc2NvcGVPcmllbnRhdGlvbiB9ID0gdGhpcztcbiAgICBjb25zdCBzbGlkZXJXaWR0aCA9IHRoaXMuZWZmZWN0aXZlU2xpZGVyV2lkdGg7XG4gICAgY29uc3Qgc2VsZWN0ZWRDb2xvckluSGV4ID0gY29sb3IgPyBoZXhpZnkoY29sb3IsIGFscGhhQ2hhbm5lbCkgOiBudWxsO1xuICAgIGNvbnN0IGh1ZVRvcCA9IHRodW1iUmFkaXVzO1xuICAgIGNvbnN0IGh1ZUxlZnQgPSBodWVTY29wZUxlZnQgPz8gc2xpZGVyV2lkdGggKiBERUZBVUxUX0NPTE9SLmh1ZSgpIC8gSFNWX0xJTUlUUy5oO1xuICAgIGNvbnN0IG9wYWNpdHlUb3AgPSB0aHVtYlJhZGl1cztcbiAgICBjb25zdCBvcGFjaXR5TGVmdCA9IG9wYWNpdHlTY29wZUxlZnQgPz8gc2xpZGVyV2lkdGggKiBhbHBoYVRvT3BhY2l0eShERUZBVUxUX0NPTE9SLmFscGhhKCkpIC8gT1BBQ0lUWV9MSU1JVFMubWF4O1xuICAgIGNvbnN0IG5vQ29sb3IgPSBjb2xvciA9PT0gdm9pZCAwO1xuICAgIGNvbnN0IHZlcnRpY2FsID0gc2NvcGVPcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiO1xuICAgIGNvbnN0IFthZGp1c3RlZENvbG9yRmllbGRTY29wZUxlZnQsIGFkanVzdGVkQ29sb3JGaWVsZFNjb3BlVG9wXSA9IHRoaXMuZ2V0QWRqdXN0ZWRTY29wZVBvc2l0aW9uKGNvbG9yRmllbGRTY29wZUxlZnQsIGNvbG9yRmllbGRTY29wZVRvcCk7XG4gICAgY29uc3QgW2FkanVzdGVkSHVlU2NvcGVMZWZ0LCBhZGp1c3RlZEh1ZVNjb3BlVG9wXSA9IHRoaXMuZ2V0QWRqdXN0ZWRTY29wZVBvc2l0aW9uKGh1ZUxlZnQsIGh1ZVRvcCk7XG4gICAgY29uc3QgW2FkanVzdGVkT3BhY2l0eVNjb3BlTGVmdCwgYWRqdXN0ZWRPcGFjaXR5U2NvcGVUb3BdID0gdGhpcy5nZXRBZGp1c3RlZFNjb3BlUG9zaXRpb24ob3BhY2l0eUxlZnQsIG9wYWNpdHlUb3ApO1xuICAgIHJldHVybiBJbnRlcmFjdGl2ZUNvbnRhaW5lcih7IGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLCBjaGlsZHJlbjogaHRtbGA8ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250YWluZXIpfT4ke2ZpZWxkRGlzYWJsZWQgPyBudWxsIDogaHRtbGA8ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250cm9sQW5kU2NvcGUpfT48Y2FudmFzIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb2xvckZpZWxkKX0gQHBvaW50ZXJkb3duPSR7dGhpcy5oYW5kbGVDb2xvckZpZWxkUG9pbnRlckRvd259ICR7cmVmKHRoaXMuaW5pdENvbG9yRmllbGQpfT48L2NhbnZhcz48ZGl2IC5hcmlhTGFiZWw9JHt2ZXJ0aWNhbCA/IG1lc3NhZ2VzLnZhbHVlIDogbWVzc2FnZXMuc2F0dXJhdGlvbn0gLmFyaWFWYWx1ZU1heD0ke3ZlcnRpY2FsID8gSFNWX0xJTUlUUy52IDogSFNWX0xJTUlUUy5zfSBhcmlhLXZhbHVlbWluPTAgLmFyaWFWYWx1ZU5vdz0keyh2ZXJ0aWNhbCA/IGNvbG9yPy5zYXR1cmF0aW9udigpIDogY29sb3I/LnZhbHVlKCkpIHx8IFwiMFwifSBjbGFzcz0ke3NhZmVDbGFzc01hcCh7IFtDU1Muc2NvcGVdOiB0cnVlLCBbQ1NTLmNvbG9yRmllbGRTY29wZV06IHRydWUgfSl9IEBrZXlkb3duPSR7dGhpcy5oYW5kbGVDb2xvckZpZWxkU2NvcGVLZXlEb3dufSByb2xlPXNsaWRlciBzdHlsZT0ke3NhZmVTdHlsZU1hcCh7XG4gICAgICB0b3A6IGAke2FkanVzdGVkQ29sb3JGaWVsZFNjb3BlVG9wIHx8IDB9cHhgLFxuICAgICAgbGVmdDogYCR7YWRqdXN0ZWRDb2xvckZpZWxkU2NvcGVMZWZ0IHx8IDB9cHhgXG4gICAgfSl9IHRhYmluZGV4PTAgJHtyZWYodGhpcy5jb2xvckZpZWxkU2NvcGVSZWYpfT48L2Rpdj48L2Rpdj5gfTxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLnByZXZpZXdBbmRTbGlkZXJzKX0+PGNhbGNpdGUtc3dhdGNoIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5wcmV2aWV3KX0gLmNvbG9yPSR7c2VsZWN0ZWRDb2xvckluSGV4fSAubGFiZWw9JHtzZWxlY3RlZENvbG9ySW5IZXh9IC5zY2FsZT0ke3RoaXMuYWxwaGFDaGFubmVsID8gXCJsXCIgOiB0aGlzLnNjYWxlfT48L2NhbGNpdGUtc3dhdGNoPjxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLnNsaWRlcnMpfT48ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250cm9sQW5kU2NvcGUpfT48Y2FudmFzIGNsYXNzPSR7c2FmZUNsYXNzTWFwKHsgW0NTUy5zbGlkZXJdOiB0cnVlLCBbQ1NTLmh1ZVNsaWRlcl06IHRydWUgfSl9IEBwb2ludGVyZG93bj0ke3RoaXMuaGFuZGxlSHVlU2xpZGVyUG9pbnRlckRvd259ICR7cmVmKHRoaXMuaW5pdEh1ZVNsaWRlcil9PjwvY2FudmFzPjxkaXYgLmFyaWFMYWJlbD0ke21lc3NhZ2VzLmh1ZX0gLmFyaWFWYWx1ZU1heD0ke0hTVl9MSU1JVFMuaH0gYXJpYS12YWx1ZW1pbj0wIC5hcmlhVmFsdWVOb3c9JHtjb2xvcj8ucm91bmQoKS5odWUoKSB8fCBERUZBVUxUX0NPTE9SLnJvdW5kKCkuaHVlKCl9IGNsYXNzPSR7c2FmZUNsYXNzTWFwKHsgW0NTUy5zY29wZV06IHRydWUsIFtDU1MuaHVlU2NvcGVdOiB0cnVlIH0pfSBAa2V5ZG93bj0ke3RoaXMuaGFuZGxlSHVlU2NvcGVLZXlEb3dufSByb2xlPXNsaWRlciBzdHlsZT0ke3NhZmVTdHlsZU1hcCh7XG4gICAgICB0b3A6IGAke2FkanVzdGVkSHVlU2NvcGVUb3B9cHhgLFxuICAgICAgbGVmdDogYCR7YWRqdXN0ZWRIdWVTY29wZUxlZnR9cHhgXG4gICAgfSl9IHRhYmluZGV4PTAgJHtyZWYodGhpcy5odWVTY29wZVJlZil9PjwvZGl2PjwvZGl2PiR7YWxwaGFDaGFubmVsID8gaHRtbGA8ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250cm9sQW5kU2NvcGUpfT48Y2FudmFzIGNsYXNzPSR7c2FmZUNsYXNzTWFwKHsgW0NTUy5zbGlkZXJdOiB0cnVlLCBbQ1NTLm9wYWNpdHlTbGlkZXJdOiB0cnVlIH0pfSBAcG9pbnRlcmRvd249JHt0aGlzLmhhbmRsZU9wYWNpdHlTbGlkZXJQb2ludGVyRG93bn0gJHtyZWYodGhpcy5pbml0T3BhY2l0eVNsaWRlcil9PjwvY2FudmFzPjxkaXYgLmFyaWFMYWJlbD0ke21lc3NhZ2VzLm9wYWNpdHl9IC5hcmlhVmFsdWVNYXg9JHtPUEFDSVRZX0xJTUlUUy5tYXh9IC5hcmlhVmFsdWVNaW49JHtPUEFDSVRZX0xJTUlUUy5taW59IC5hcmlhVmFsdWVOb3c9JHsoY29sb3IgfHwgREVGQVVMVF9DT0xPUikucm91bmQoKS5hbHBoYSgpfSBjbGFzcz0ke3NhZmVDbGFzc01hcCh7IFtDU1Muc2NvcGVdOiB0cnVlLCBbQ1NTLm9wYWNpdHlTY29wZV06IHRydWUgfSl9IEBrZXlkb3duPSR7dGhpcy5oYW5kbGVPcGFjaXR5U2NvcGVLZXlEb3dufSByb2xlPXNsaWRlciBzdHlsZT0ke3NhZmVTdHlsZU1hcCh7XG4gICAgICB0b3A6IGAke2FkanVzdGVkT3BhY2l0eVNjb3BlVG9wfXB4YCxcbiAgICAgIGxlZnQ6IGAke2FkanVzdGVkT3BhY2l0eVNjb3BlTGVmdH1weGBcbiAgICB9KX0gdGFiaW5kZXg9MCAke3JlZih0aGlzLm9wYWNpdHlTY29wZVJlZil9PjwvZGl2PjwvZGl2PmAgOiBudWxsfTwvZGl2PjwvZGl2PiR7aGV4RGlzYWJsZWQgJiYgY2hhbm5lbHNEaXNhYmxlZCA/IG51bGwgOiBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoe1xuICAgICAgW0NTUy5jb250cm9sU2VjdGlvbl06IHRydWUsXG4gICAgICBbQ1NTLnNlY3Rpb25dOiB0cnVlXG4gICAgfSl9PjxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmhleEFuZENoYW5uZWxzR3JvdXApfT4ke2hleERpc2FibGVkID8gbnVsbCA6IGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaGV4T3B0aW9ucyl9PjxjYWxjaXRlLWNvbG9yLXBpY2tlci1oZXgtaW5wdXQgLmFsbG93RW1wdHk9JHt0aGlzLmlzQ2xlYXJhYmxlfSAuYWxwaGFDaGFubmVsPSR7YWxwaGFDaGFubmVsfSBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY29udHJvbCl9IC5tZXNzYWdlcz0ke21lc3NhZ2VzfSAubnVtYmVyaW5nU3lzdGVtPSR7dGhpcy5udW1iZXJpbmdTeXN0ZW19IEBjYWxjaXRlQ29sb3JQaWNrZXJIZXhJbnB1dENoYW5nZT0ke3RoaXMuaGFuZGxlSGV4SW5wdXRDaGFuZ2V9IC5zY2FsZT0ke3NjYWxlfSAudmFsdWU9JHtzZWxlY3RlZENvbG9ySW5IZXh9PjwvY2FsY2l0ZS1jb2xvci1waWNrZXItaGV4LWlucHV0PjwvZGl2PmB9JHtjaGFubmVsc0Rpc2FibGVkID8gbnVsbCA6IGh0bWxgPGNhbGNpdGUtdGFicyBjbGFzcz0ke3NhZmVDbGFzc01hcCh7XG4gICAgICBbQ1NTLmNvbG9yTW9kZUNvbnRhaW5lcl06IHRydWUsXG4gICAgICBbQ1NTLnNwbGl0U2VjdGlvbl06IHRydWVcbiAgICB9KX0gLnNjYWxlPSR7c2NhbGUgPT09IFwibFwiID8gXCJtXCIgOiBcInNcIn0+PGNhbGNpdGUtdGFiLW5hdiBzbG90PXRpdGxlLWdyb3VwPiR7dGhpcy5yZW5kZXJDaGFubmVsc1RhYlRpdGxlKFwicmdiXCIpfSR7dGhpcy5yZW5kZXJDaGFubmVsc1RhYlRpdGxlKFwiaHN2XCIpfTwvY2FsY2l0ZS10YWItbmF2PiR7dGhpcy5yZW5kZXJDaGFubmVsc1RhYihcInJnYlwiKX0ke3RoaXMucmVuZGVyQ2hhbm5lbHNUYWIoXCJoc3ZcIil9PC9jYWxjaXRlLXRhYnM+YH08L2Rpdj48L2Rpdj5gfSR7c2F2ZWREaXNhYmxlZCA/IG51bGwgOiBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoeyBbQ1NTLnNhdmVkQ29sb3JzU2VjdGlvbl06IHRydWUsIFtDU1Muc2VjdGlvbl06IHRydWUgfSl9PjxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmhlYWRlcil9PjxsYWJlbD4ke21lc3NhZ2VzLnNhdmVkfTwvbGFiZWw+PGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1Muc2F2ZWRDb2xvcnNCdXR0b25zKX0+PGNhbGNpdGUtYnV0dG9uIGFwcGVhcmFuY2U9dHJhbnNwYXJlbnQgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmRlbGV0ZUNvbG9yKX0gLmRpc2FibGVkPSR7bm9Db2xvcn0gLmljb25TdGFydD0ke0lDT05TLm1pbnVzfSBraW5kPW5ldXRyYWwgLmxhYmVsPSR7bWVzc2FnZXMuZGVsZXRlQ29sb3J9IEBjbGljaz0ke3RoaXMuZGVsZXRlQ29sb3J9IC5zY2FsZT0ke3NjYWxlfSB0eXBlPWJ1dHRvbj48L2NhbGNpdGUtYnV0dG9uPjxjYWxjaXRlLWJ1dHRvbiBhcHBlYXJhbmNlPXRyYW5zcGFyZW50IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5zYXZlQ29sb3IpfSAuZGlzYWJsZWQ9JHtub0NvbG9yfSAuaWNvblN0YXJ0PSR7SUNPTlMucGx1c30ga2luZD1uZXV0cmFsIC5sYWJlbD0ke21lc3NhZ2VzLnNhdmVDb2xvcn0gQGNsaWNrPSR7dGhpcy5zYXZlQ29sb3J9IC5zY2FsZT0ke3NjYWxlfSB0eXBlPWJ1dHRvbj48L2NhbGNpdGUtYnV0dG9uPjwvZGl2PjwvZGl2PiR7c2F2ZWRDb2xvcnMubGVuZ3RoID4gMCA/IGh0bWxgPGNhbGNpdGUtc3dhdGNoLWdyb3VwIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5zd2F0Y2hHcm91cCl9IC5sYWJlbD0ke21lc3NhZ2VzLnNhdmVkfSAuc2NhbGU9JHtzY2FsZX0gc2VsZWN0aW9uLW1vZGU9bm9uZT4ke3JlcGVhdChzYXZlZENvbG9ycywgKGNvbG9yMikgPT4gY29sb3IyLCAoY29sb3IyKSA9PiBodG1sYDxjYWxjaXRlLXN3YXRjaCBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1Muc2F2ZWRDb2xvcil9IC5jb2xvcj0ke2NvbG9yMn0gLmxhYmVsPSR7Y29sb3IyfSBAY2xpY2s9JHt0aGlzLmhhbmRsZVNhdmVkQ29sb3JTZWxlY3R9IEBrZXlkb3duPSR7dGhpcy5oYW5kbGVTYXZlZENvbG9yS2V5RG93bn0gLnNjYWxlPSR7c2NhbGV9IHRhYmluZGV4PTA+PC9jYWxjaXRlLXN3YXRjaD5gKX08L2NhbGNpdGUtc3dhdGNoLWdyb3VwPmAgOiBudWxsfTwvZGl2PmB9PC9kaXY+YCB9KTtcbiAgfVxuICByZW5kZXJDaGFubmVsc1RhYlRpdGxlKGNoYW5uZWxNb2RlKSB7XG4gICAgY29uc3QgeyBjaGFubmVsTW9kZTogYWN0aXZlQ2hhbm5lbE1vZGUsIG1lc3NhZ2VzIH0gPSB0aGlzO1xuICAgIGNvbnN0IHNlbGVjdGVkID0gY2hhbm5lbE1vZGUgPT09IGFjdGl2ZUNoYW5uZWxNb2RlO1xuICAgIGNvbnN0IGxhYmVsID0gY2hhbm5lbE1vZGUgPT09IFwicmdiXCIgPyBtZXNzYWdlcy5yZ2IgOiBtZXNzYWdlcy5oc3Y7XG4gICAgcmV0dXJuIGtleWVkKGNoYW5uZWxNb2RlLCBodG1sYDxjYWxjaXRlLXRhYi10aXRsZSBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY29sb3JNb2RlKX0gZGF0YS1jb2xvci1tb2RlPSR7Y2hhbm5lbE1vZGUgPz8gbm90aGluZ30gQGNhbGNpdGVUYWJzQWN0aXZhdGU9JHt0aGlzLmhhbmRsZVRhYkFjdGl2YXRlfSAuc2VsZWN0ZWQ9JHtzZWxlY3RlZH0+JHtsYWJlbH08L2NhbGNpdGUtdGFiLXRpdGxlPmApO1xuICB9XG4gIHJlbmRlckNoYW5uZWxzVGFiKGNoYW5uZWxNb2RlKSB7XG4gICAgY29uc3QgeyBpc0NsZWFyYWJsZSwgY2hhbm5lbE1vZGU6IGFjdGl2ZUNoYW5uZWxNb2RlLCBjaGFubmVscywgbWVzc2FnZXMsIGFscGhhQ2hhbm5lbCB9ID0gdGhpcztcbiAgICBjb25zdCBzZWxlY3RlZCA9IGNoYW5uZWxNb2RlID09PSBhY3RpdmVDaGFubmVsTW9kZTtcbiAgICBjb25zdCBpc1JnYiA9IGNoYW5uZWxNb2RlID09PSBcInJnYlwiO1xuICAgIGNvbnN0IGNoYW5uZWxBcmlhTGFiZWxzID0gaXNSZ2IgPyBbbWVzc2FnZXMucmVkLCBtZXNzYWdlcy5ncmVlbiwgbWVzc2FnZXMuYmx1ZV0gOiBbbWVzc2FnZXMuaHVlLCBtZXNzYWdlcy5zYXR1cmF0aW9uLCBtZXNzYWdlcy52YWx1ZV07XG4gICAgY29uc3QgZGlyZWN0aW9uID0gZ2V0RWxlbWVudERpcih0aGlzLmVsKTtcbiAgICBjb25zdCBjaGFubmVsc1RvUmVuZGVyID0gYWxwaGFDaGFubmVsID8gY2hhbm5lbHMgOiBjaGFubmVscy5zbGljZSgwLCAzKTtcbiAgICByZXR1cm4ga2V5ZWQoY2hhbm5lbE1vZGUsIGh0bWxgPGNhbGNpdGUtdGFiIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250cm9sKX0gLnNlbGVjdGVkPSR7c2VsZWN0ZWR9PjxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmNoYW5uZWxzKX0gZGlyPWx0cj4ke2NoYW5uZWxzVG9SZW5kZXIubWFwKChjaGFubmVsVmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBpc0FscGhhQ2hhbm5lbCA9IGluZGV4ID09PSAzO1xuICAgICAgaWYgKGlzQWxwaGFDaGFubmVsKSB7XG4gICAgICAgIGNoYW5uZWxWYWx1ZSA9IGlzQ2xlYXJhYmxlICYmICFjaGFubmVsVmFsdWUgPyBjaGFubmVsVmFsdWUgOiBhbHBoYVRvT3BhY2l0eShjaGFubmVsVmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQ2hhbm5lbChjaGFubmVsVmFsdWUsIGluZGV4LCBjaGFubmVsQXJpYUxhYmVsc1tpbmRleF0sIGRpcmVjdGlvbiwgaXNBbHBoYUNoYW5uZWwgPyBcIiVcIiA6IFwiXCIpO1xuICAgIH0pfTwvZGl2PjwvY2FsY2l0ZS10YWI+YCk7XG4gIH1cbiAgcmVuZGVyQ2hhbm5lbCh2YWx1ZSwgaW5kZXgsIGFyaWFMYWJlbCwgZGlyZWN0aW9uLCBzdWZmaXgpIHtcbiAgICByZXR1cm4ga2V5ZWQoaW5kZXgsIGh0bWxgPGNhbGNpdGUtaW5wdXQtbnVtYmVyIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jaGFubmVsKX0gZGF0YS1jaGFubmVsLWluZGV4PSR7aW5kZXggPz8gbm90aGluZ30gZGlyPSR7ZGlyZWN0aW9uID8/IG5vdGhpbmd9IC5sYWJlbD0ke2FyaWFMYWJlbH0gbGFuZz0ke3RoaXMubWVzc2FnZXMuX2xhbmcgPz8gbm90aGluZ30gbnVtYmVyLWJ1dHRvbi10eXBlPW5vbmUgLm51bWJlcmluZ1N5c3RlbT0ke3RoaXMubnVtYmVyaW5nU3lzdGVtfSBAa2V5ZG93bj0ke3RoaXMuaGFuZGxlS2V5RG93bn0gQGNhbGNpdGVJbnB1dE51bWJlckNoYW5nZT0ke3RoaXMuaGFuZGxlQ2hhbm5lbENoYW5nZX0gQGNhbGNpdGVJbnB1dE51bWJlcklucHV0PSR7dGhpcy5oYW5kbGVDaGFubmVsSW5wdXR9IEBjYWxjaXRlSW50ZXJuYWxJbnB1dE51bWJlckJsdXI9JHt0aGlzLmhhbmRsZUNoYW5uZWxCbHVyfSBAY2FsY2l0ZUludGVybmFsSW5wdXROdW1iZXJGb2N1cz0ke3RoaXMuaGFuZGxlQ2hhbm5lbEZvY3VzfSAuc2NhbGU9JHt0aGlzLnNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCJ9IHN0eWxlPSR7c2FmZVN0eWxlTWFwKHtcbiAgICAgIG1hcmdpbkxlZnQ6IGluZGV4ID4gMCAmJiAhKHRoaXMuc2NhbGUgPT09IFwic1wiICYmIHRoaXMuYWxwaGFDaGFubmVsICYmIGluZGV4ID09PSAzKSA/IFwiLTFweFwiIDogXCJcIlxuICAgIH0pfSAuc3VmZml4VGV4dD0ke3N1ZmZpeH0gLnZhbHVlPSR7dmFsdWU/LnRvU3RyaW5nKCl9PjwvY2FsY2l0ZS1pbnB1dC1udW1iZXI+YCk7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLWNvbG9yLXBpY2tlclwiLCBDb2xvclBpY2tlcik7XG5leHBvcnQge1xuICBDb2xvclBpY2tlclxufTtcbiIsImltcG9ydCBcIi4uL2NhbGNpdGUtc3dhdGNoL2luZGV4LmpzXCI7XG5pbXBvcnQgXCIuLi9jYWxjaXRlLWNvbG9yLXBpY2tlci1oZXgtaW5wdXQvaW5kZXguanNcIjtcbmltcG9ydCBcIi4uL2NhbGNpdGUtdGFicy9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi4vY2FsY2l0ZS10YWItbmF2L2luZGV4LmpzXCI7XG5pbXBvcnQgXCIuLi9jYWxjaXRlLWJ1dHRvbi9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi4vY2FsY2l0ZS1zd2F0Y2gtZ3JvdXAvaW5kZXguanNcIjtcbmltcG9ydCBcIi4uL2NhbGNpdGUtdGFiLXRpdGxlL2luZGV4LmpzXCI7XG5pbXBvcnQgXCIuLi9jYWxjaXRlLXRhYi9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi4vY2FsY2l0ZS1pbnB1dC1udW1iZXIvaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2N1c3RvbUVsZW1lbnQuanNcIjsiLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgQyBhcyBDU1NfVVRJTElUWSwgYyBhcyBjdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBsaXZlIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2xpdmUuanNcIjtcbmltcG9ydCB7IGNzcywgaHRtbCwgbm90aGluZyB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGNyZWF0ZVJlZiwgcmVmIH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvcmVmLmpzXCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBjcmVhdGVFdmVudCwgc3RyaW5nT3JCb29sZWFuLCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IHVzZVdhdGNoQXR0cmlidXRlcyB9IGZyb20gXCJAYXJjZ2lzL2x1bWluYS9jb250cm9sbGVyc1wiO1xuaW1wb3J0IHsgdiBhcyBzZXRSZXF1ZXN0ZWRJY29uLCBnIGFzIGdldEVsZW1lbnREaXIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2RvbS5qc1wiO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0Rm9ybSwgaSBhcyBpbnRlcm5hbEhpZGRlbklucHV0SW5wdXRFdmVudCwgZCBhcyBkaXNjb25uZWN0Rm9ybSwgcyBhcyBzdWJtaXRGb3JtLCBIIGFzIEhpZGRlbkZvcm1JbnB1dFNsb3QgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2Zvcm0uanNcIjtcbmltcG9ydCB7IHUgYXMgdXBkYXRlSG9zdEludGVyYWN0aW9uLCBJIGFzIEludGVyYWN0aXZlQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9pbnRlcmFjdGl2ZS5qc1wiO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TGFiZWwsIGQgYXMgZGlzY29ubmVjdExhYmVsLCBnIGFzIGdldExhYmVsVGV4dCB9IGZyb20gXCIuLi8uLi9jaHVua3MvbGFiZWwuanNcIjtcbmltcG9ydCB7IGcgYXMgZ2V0SWNvblNjYWxlIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9jb21wb25lbnQuanNcIjtcbmltcG9ydCB7IEkgYXMgSW50ZXJuYWxMYWJlbCB9IGZyb20gXCIuLi8uLi9jaHVua3MvSW50ZXJuYWxMYWJlbC5qc1wiO1xuaW1wb3J0IHsgViBhcyBWYWxpZGF0aW9uIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9WYWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgeyBzIGFzIHN5bmNIaWRkZW5Gb3JtSW5wdXQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2lucHV0LmpzXCI7XG5pbXBvcnQgeyB1IGFzIHVzZVQ5biB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXNlVDluLmpzXCI7XG5pbXBvcnQgeyB1IGFzIHVzZVNldEZvY3VzIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VTZXRGb2N1cy5qc1wiO1xuY29uc3QgQ1NTID0ge1xuICBsb2FkZXI6IFwibG9hZGVyXCIsXG4gIGNsZWFyYWJsZTogXCJjbGVhcmFibGVcIixcbiAgY2xlYXJCdXR0b246IFwiY2xlYXItYnV0dG9uXCIsXG4gIGVkaXRpbmdFbmFibGVkOiBcImVkaXRpbmctZW5hYmxlZFwiLFxuICBpbmxpbmVDaGlsZDogXCJpbmxpbmUtY2hpbGRcIixcbiAgaW5wdXRJY29uOiBcImljb25cIixcbiAgcHJlZml4OiBcInByZWZpeFwiLFxuICBzdWZmaXg6IFwic3VmZml4XCIsXG4gIHdyYXBwZXI6IFwiZWxlbWVudC13cmFwcGVyXCIsXG4gIGlucHV0V3JhcHBlcjogXCJ3cmFwcGVyXCIsXG4gIGFjdGlvbldyYXBwZXI6IFwiYWN0aW9uLXdyYXBwZXJcIlxufTtcbmNvbnN0IElEUyA9IHtcbiAgdmFsaWRhdGlvbk1lc3NhZ2U6IFwiaW5wdXRUZXh0VmFsaWRhdGlvbk1lc3NhZ2VcIlxufTtcbmNvbnN0IFNMT1RTID0ge1xuICBhY3Rpb246IFwiYWN0aW9uXCJcbn07XG5jb25zdCBzdHlsZXMgPSBjc3NgOmhvc3R7LS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzOiB2YXIoIC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpICl9Omhvc3QoW2Rpc2FibGVkXSl7Y3Vyc29yOmRlZmF1bHQ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7b3BhY2l0eTp2YXIoLS1jYWxjaXRlLW9wYWNpdHktZGlzYWJsZWQpfTpob3N0KFtkaXNhYmxlZF0pICosOmhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKCope3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3R7ZGlzcGxheTpibG9ja306aG9zdChbc2NhbGU9c10pIGlucHV0e3BhZGRpbmctaW5saW5lLXN0YXJ0Oi41cmVtO3BhZGRpbmctaW5saW5lLWVuZDp2YXIoLS1jYWxjaXRlLWludGVybmFsLWlucHV0LXRleHQtaW5wdXQtcGFkZGluZy1pbmxpbmUtZW5kLCAuNXJlbSl9Omhvc3QoW3NjYWxlPXNdKSBpbnB1dCw6aG9zdChbc2NhbGU9c10pIC5wcmVmaXgsOmhvc3QoW3NjYWxlPXNdKSAuc3VmZml4e2Jsb2NrLXNpemU6MS41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbX06aG9zdChbc2NhbGU9c10pIC5wcmVmaXgsOmhvc3QoW3NjYWxlPXNdKSAuc3VmZml4e3BhZGRpbmctaW5saW5lOi41cmVtfTpob3N0KFtzY2FsZT1zXSkgLmFjdGlvbi13cmFwcGVye2Jsb2NrLXNpemU6MS41cmVtfTpob3N0KFtzY2FsZT1zXSkgLmNsZWFyLWJ1dHRvbnttaW4tYmxvY2stc2l6ZToxLjVyZW07bWluLWlubGluZS1zaXplOjEuNXJlbX06aG9zdChbc2NhbGU9bV0pIGlucHV0e3BhZGRpbmctaW5saW5lLXN0YXJ0Oi43NXJlbTtwYWRkaW5nLWlubGluZS1lbmQ6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1pbnB1dC10ZXh0LWlucHV0LXBhZGRpbmctaW5saW5lLWVuZCwgLjc1cmVtKX06aG9zdChbc2NhbGU9bV0pIGlucHV0LDpob3N0KFtzY2FsZT1tXSkgLnByZWZpeCw6aG9zdChbc2NhbGU9bV0pIC5zdWZmaXh7YmxvY2stc2l6ZToycmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbX06aG9zdChbc2NhbGU9bV0pIC5wcmVmaXgsOmhvc3QoW3NjYWxlPW1dKSAuc3VmZml4e3BhZGRpbmctaW5saW5lOi43NXJlbX06aG9zdChbc2NhbGU9bV0pIC5hY3Rpb24td3JhcHBlcntibG9jay1zaXplOjJyZW19Omhvc3QoW3NjYWxlPW1dKSAuY2xlYXItYnV0dG9ue21pbi1ibG9jay1zaXplOjJyZW07bWluLWlubGluZS1zaXplOjJyZW19Omhvc3QoW3NjYWxlPWxdKSBpbnB1dHtwYWRkaW5nLWlubGluZS1zdGFydDoxcmVtO3BhZGRpbmctaW5saW5lLWVuZDp2YXIoLS1jYWxjaXRlLWludGVybmFsLWlucHV0LXRleHQtaW5wdXQtcGFkZGluZy1pbmxpbmUtZW5kLCAxcmVtKX06aG9zdChbc2NhbGU9bF0pIGlucHV0LDpob3N0KFtzY2FsZT1sXSkgLnByZWZpeCw6aG9zdChbc2NhbGU9bF0pIC5zdWZmaXh7YmxvY2stc2l6ZToyLjc1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtfTpob3N0KFtzY2FsZT1sXSkgLnByZWZpeCw6aG9zdChbc2NhbGU9bF0pIC5zdWZmaXh7cGFkZGluZy1pbmxpbmU6MXJlbX06aG9zdChbc2NhbGU9bF0pIC5hY3Rpb24td3JhcHBlcntibG9jay1zaXplOjIuNzVyZW19Omhvc3QoW3NjYWxlPWxdKSAuY2xlYXItYnV0dG9ue21pbi1ibG9jay1zaXplOjIuNzVyZW07bWluLWlubGluZS1zaXplOjIuNzVyZW19Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfS5pbnRlcmFjdGlvbi1jb250YWluZXJ7ZGlzcGxheTpjb250ZW50c31pbnB1dHt0cmFuc2l0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyksYmxvY2stc2l6ZSAwLG91dGxpbmUtb2Zmc2V0IDBzOy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjowO2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7bWF4LWJsb2NrLXNpemU6MTAwJTtpbmxpbmUtc2l6ZToxMDAlO21heC1pbmxpbmUtc2l6ZToxMDAlO2ZsZXg6MSAxIDAlO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7Ym9yZGVyLXdpZHRoOjFweDtib3JkZXItc3R5bGU6c29saWQ7Zm9udC1mYW1pbHk6aW5oZXJpdDtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW5vcm1hbCk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXRleHQtYmFja2dyb3VuZC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXRleHQtdGV4dC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpKTtib3JkZXItcmFkaXVzOnZhcigtLWNhbGNpdGUtaW5wdXQtdGV4dC1jb3JuZXItcmFkaXVzLCB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtc2hhcnApKTtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC10ZXh0LWJvcmRlci1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItaW5wdXQpKTt0ZXh0LWFsaWduOnZhcigtLWNhbGNpdGUtaW50ZXJuYWwtaW5wdXQtdGV4dC1hbGlnbm1lbnQpfWlucHV0OnBsYWNlaG9sZGVyLXNob3due3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9aW5wdXQ6OnBsYWNlaG9sZGVyLGlucHV0Oi1tcy1pbnB1dC1wbGFjZWhvbGRlcixpbnB1dDo6LW1zLWlucHV0LXBsYWNlaG9sZGVye2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbm9ybWFsKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LW51bWJlci1wbGFjZWhvbGRlci10ZXh0LWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMykpfWlucHV0OmZvY3Vze2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXRleHQtdGV4dC1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpKX1pbnB1dFtyZWFkb25seV17Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC10ZXh0LWJhY2tncm91bmQtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYmFja2dyb3VuZCkpfWlucHV0W3JlYWRvbmx5XTpmb2N1c3tjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXRleHQtdGV4dC1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpKX1jYWxjaXRlLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC1hY3Rpb24taWNvbi1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpKX1pbnB1dHtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50fWlucHV0OmZvY3Vze291dGxpbmU6dmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtbWQpIHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItZm9jdXMsIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpKSk7b3V0bGluZTp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCkgc29saWQgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1mb2N1cyk7b3V0bGluZS1vZmZzZXQ6Y2FsYyhjYWxjKC0xICogdmFyKC0tY2FsY2l0ZS1zcGFjaW5nLWJhc2UpKSAqIGNhbGMoMSAtICgyKmNsYW1wKDAsdmFyKC0tY2FsY2l0ZS1vZmZzZXQtaW52ZXJ0LWZvY3VzKSwxKSkpKX06aG9zdChbc3RhdHVzPWludmFsaWRdKSBpbnB1dHtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1zdGF0dXMtZGFuZ2VyKX06aG9zdChbc3RhdHVzPWludmFsaWRdKSBpbnB1dDpmb2N1c3tvdXRsaW5lOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKSBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpO291dGxpbmUtb2Zmc2V0OmNhbGMoY2FsYygtMSAqIHZhcigtLWNhbGNpdGUtc3BhY2luZy1iYXNlKSkgKiBjYWxjKDEgLSAoMipjbGFtcCgwLHZhcigtLWNhbGNpdGUtb2Zmc2V0LWludmVydC1mb2N1cyksMSkpKSl9Omhvc3QoW3NjYWxlPXNdKSAuaWNvbntpbnNldC1pbmxpbmUtc3RhcnQ6LjVyZW19Omhvc3QoW3NjYWxlPW1dKSAuaWNvbntpbnNldC1pbmxpbmUtc3RhcnQ6Ljc1cmVtfTpob3N0KFtzY2FsZT1sXSkgLmljb257aW5zZXQtaW5saW5lLXN0YXJ0OjFyZW19Omhvc3QoW2ljb25dW3NjYWxlPXNdKSBpbnB1dHtwYWRkaW5nLWlubGluZS1zdGFydDoycmVtfTpob3N0KFtpY29uXVtzY2FsZT1tXSkgaW5wdXR7cGFkZGluZy1pbmxpbmUtc3RhcnQ6Mi41cmVtfTpob3N0KFtpY29uXVtzY2FsZT1sXSkgaW5wdXR7cGFkZGluZy1pbmxpbmUtc3RhcnQ6My41cmVtfS5lbGVtZW50LXdyYXBwZXJ7cG9zaXRpb246cmVsYXRpdmU7b3JkZXI6MztkaXNwbGF5OmlubGluZS1mbGV4O2ZsZXg6MSAxIDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtpc29sYXRpb246aXNvbGF0ZX0uaWNvbntwb2ludGVyLWV2ZW50czpub25lO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6dmFyKC0tY2FsY2l0ZS16LWluZGV4KTtkaXNwbGF5OmJsb2NrO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixibG9jay1zaXplLGJvcmRlci1jb2xvcixib3gtc2hhZG93LGNvbG9yLGluc2V0LWJsb2NrLWVuZCxpbnNldC1ibG9jay1zdGFydCxpbnNldC1pbmxpbmUtZW5kLGluc2V0LWlubGluZS1zdGFydCxpbnNldC1zaXplLG9wYWNpdHksb3V0bGluZS1jb2xvcix0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0O2NvbG9yOnZhcigtLWNhbGNpdGUtaW5wdXQtdGV4dC1pY29uLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMykpfWlucHV0W3R5cGU9dGV4dF06Oi1tcy1jbGVhcixpbnB1dFt0eXBlPXRleHRdOjotbXMtcmV2ZWFse2Rpc3BsYXk6bm9uZTtibG9jay1zaXplOjBweDtpbmxpbmUtc2l6ZTowcHh9LmNsZWFyLWJ1dHRvbntwb2ludGVyLWV2ZW50czppbml0aWFsO29yZGVyOjQ7bWFyZ2luOjA7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6ZmxleDttaW4tYmxvY2stc2l6ZToxMDAlO2N1cnNvcjpwb2ludGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLXNlbGY6c3RyZXRjaDtib3JkZXItd2lkdGg6MXB4O2JvcmRlci1zdHlsZTpzb2xpZDtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXRleHQtYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci1pbnB1dCkpO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC1hY3Rpb24tYmFja2dyb3VuZC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpKTtib3JkZXItaW5saW5lLXN0YXJ0LXdpZHRoOjBweH0uY2xlYXItYnV0dG9uOmhvdmVye3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixibG9jay1zaXplLGJvcmRlci1jb2xvcixib3gtc2hhZG93LGNvbG9yLGluc2V0LWJsb2NrLWVuZCxpbnNldC1ibG9jay1zdGFydCxpbnNldC1pbmxpbmUtZW5kLGluc2V0LWlubGluZS1zdGFydCxpbnNldC1zaXplLG9wYWNpdHksb3V0bGluZS1jb2xvcix0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC1hY3Rpb24tYmFja2dyb3VuZC1jb2xvci1ob3ZlciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTIpKX0uY2xlYXItYnV0dG9uOmhvdmVyIGNhbGNpdGUtaWNvbnt0cmFuc2l0aW9uLXByb3BlcnR5OmJhY2tncm91bmQtY29sb3IsYmxvY2stc2l6ZSxib3JkZXItY29sb3IsYm94LXNoYWRvdyxjb2xvcixpbnNldC1ibG9jay1lbmQsaW5zZXQtYmxvY2stc3RhcnQsaW5zZXQtaW5saW5lLWVuZCxpbnNldC1pbmxpbmUtc3RhcnQsaW5zZXQtc2l6ZSxvcGFjaXR5LG91dGxpbmUtY29sb3IsdHJhbnNmb3JtO3RyYW5zaXRpb24tZHVyYXRpb246dmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWluLW91dDtjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LWFjdGlvbi1pY29uLWNvbG9yLWhvdmVyLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSkpfS5jbGVhci1idXR0b246YWN0aXZle2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC1hY3Rpb24tYmFja2dyb3VuZC1jb2xvci1wcmVzcywgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTMpKX0uY2xlYXItYnV0dG9uOmFjdGl2ZSBjYWxjaXRlLWljb257Y29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC1hY3Rpb24taWNvbi1jb2xvci1wcmVzcywgLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9LmNsZWFyLWJ1dHRvbjpmb2N1c3tvdXRsaW5lOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKSBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkpO291dGxpbmU6dmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtbWQpIHNvbGlkIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXMpO291dGxpbmUtb2Zmc2V0OmNhbGMoY2FsYygtMSAqIHZhcigtLWNhbGNpdGUtc3BhY2luZy1iYXNlKSkgKiBjYWxjKDEgLSAoMipjbGFtcCgwLHZhcigtLWNhbGNpdGUtb2Zmc2V0LWludmVydC1mb2N1cyksMSkpKSl9LmNsZWFyLWJ1dHRvbjpkaXNhYmxlZHtvcGFjaXR5OnZhcigtLWNhbGNpdGUtb3BhY2l0eS1kaXNhYmxlZCl9LmxvYWRlcntpbnNldC1ibG9jay1zdGFydDoxcHg7aW5zZXQtaW5saW5lOjFweDtwb2ludGVyLWV2ZW50czpub25lO3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2t9LmxvYWRlciBjYWxjaXRlLXByb2dyZXNzey0tY2FsY2l0ZS1wcm9ncmVzcy1iYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jYWxjaXRlLWlucHV0LWxvYWRpbmctYmFja2dyb3VuZC1jb2xvcik7LS1jYWxjaXRlLXByb2dyZXNzLWZpbGwtY29sb3I6IHZhcigtLWNhbGNpdGUtaW5wdXQtbG9hZGluZy1maWxsLWNvbG9yKX0uYWN0aW9uLXdyYXBwZXJ7b3JkZXI6NztkaXNwbGF5OmZsZXh9LnByZWZpeCwuc3VmZml4e2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7YmxvY2stc2l6ZTphdXRvO21pbi1ibG9jay1zaXplOjEwMCU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmU7YWxpZ24tY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO292ZXJmbG93LXdyYXA6YnJlYWstd29yZDtib3JkZXItd2lkdGg6MXB4O2JvcmRlci1zdHlsZTpzb2xpZDtmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW1lZGl1bSk7bGluZS1oZWlnaHQ6MTtib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC10ZXh0LWJvcmRlci1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItaW5wdXQpKX0ucHJlZml4e29yZGVyOjI7Ym9yZGVyLWlubGluZS1lbmQtd2lkdGg6MHB4O2lubGluZS1zaXplOnZhcigtLWNhbGNpdGUtaW5wdXQtcHJlZml4LXNpemUteCwgYXV0byk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXByZWZpeC1iYWNrZ3JvdW5kLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJhY2tncm91bmQpKTtjb2xvcjp2YXIoLS1jYWxjaXRlLWlucHV0LXByZWZpeC10ZXh0LWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMikpO2JvcmRlci1zdGFydC1zdGFydC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1pbnB1dC10ZXh0LWNvcm5lci1yYWRpdXMsIHZhcigtLWNhbGNpdGUtY29ybmVyLXJhZGl1cy1zaGFycCkpO2JvcmRlci1lbmQtc3RhcnQtcmFkaXVzOnZhcigtLWNhbGNpdGUtaW5wdXQtdGV4dC1jb3JuZXItcmFkaXVzLCB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtc2hhcnApKX0uc3VmZml4e29yZGVyOjU7Ym9yZGVyLWlubGluZS1zdGFydC13aWR0aDowcHg7aW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS1pbnB1dC1zdWZmaXgtc2l6ZS14LCBhdXRvKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtaW5wdXQtc3VmZml4LWJhY2tncm91bmQtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYmFja2dyb3VuZCkpO2NvbG9yOnZhcigtLWNhbGNpdGUtaW5wdXQtc3VmZml4LXRleHQtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0yKSk7Ym9yZGVyLXN0YXJ0LWVuZC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1pbnB1dC10ZXh0LWNvcm5lci1yYWRpdXMsIHZhcigtLWNhbGNpdGUtY29ybmVyLXJhZGl1cy1zaGFycCkpO2JvcmRlci1lbmQtZW5kLXJhZGl1czp2YXIoLS1jYWxjaXRlLWlucHV0LXRleHQtY29ybmVyLXJhZGl1cywgdmFyKC0tY2FsY2l0ZS1jb3JuZXItcmFkaXVzLXNoYXJwKSl9Omhvc3QoW3ByZWZpeC10ZXh0XTpub3QoW3ByZWZpeC10ZXh0PVwiXCJdKSkgaW5wdXR7Ym9yZGVyLXN0YXJ0LXN0YXJ0LXJhZGl1czowO2JvcmRlci1lbmQtc3RhcnQtcmFkaXVzOjB9Omhvc3QoW3N1ZmZpeC10ZXh0XTpub3QoW3N1ZmZpeC10ZXh0PVwiXCJdKSkgaW5wdXQsOmhvc3QgLmNsZWFyYWJsZSBpbnB1dHtib3JkZXItc3RhcnQtZW5kLXJhZGl1czowO2JvcmRlci1lbmQtZW5kLXJhZGl1czowfTpob3N0KDpub3QoW3N1ZmZpeC10ZXh0XSkpIC5jbGVhci1idXR0b24sOmhvc3QoW3N1ZmZpeC10ZXh0PVwiXCJdKSAuY2xlYXItYnV0dG9ue2JvcmRlci1zdGFydC1lbmQtcmFkaXVzOnZhcigtLWNhbGNpdGUtaW5wdXQtdGV4dC1jb3JuZXItcmFkaXVzLCB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtc2hhcnApKTtib3JkZXItZW5kLWVuZC1yYWRpdXM6dmFyKC0tY2FsY2l0ZS1pbnB1dC10ZXh0LWNvcm5lci1yYWRpdXMsIHZhcigtLWNhbGNpdGUtY29ybmVyLXJhZGl1cy1zaGFycCkpfTpob3N0KFthbGlnbm1lbnQ9c3RhcnRdKXstLWNhbGNpdGUtaW50ZXJuYWwtaW5wdXQtdGV4dC1hbGlnbm1lbnQ6IHN0YXJ0fTpob3N0KFthbGlnbm1lbnQ9Y2VudGVyXSl7LS1jYWxjaXRlLWludGVybmFsLWlucHV0LXRleHQtYWxpZ25tZW50OiBjZW50ZXJ9Omhvc3QoW2FsaWdubWVudD1lbmRdKXstLWNhbGNpdGUtaW50ZXJuYWwtaW5wdXQtdGV4dC1hbGlnbm1lbnQ6IGVuZH0ud3JhcHBlcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2FsaWduLWl0ZW1zOmNlbnRlcn06aG9zdCguaW5wdXQtLW5vLWJvdHRvbS1ib3JkZXIpIGlucHV0e2JvcmRlci1ibG9jay1lbmQtd2lkdGg6MHB4fTpob3N0KC5pbnB1dC0tbm8tdG9wLWJvcmRlcikgaW5wdXR7Ym9yZGVyLWJsb2NrLXN0YXJ0LXdpZHRoOjBweH06aG9zdCguaW5wdXQtLW5vLXJpZ2h0LWJvcmRlcikgaW5wdXR7Ym9yZGVyLWlubGluZS1lbmQ6MH06aG9zdCguaW5wdXQtLW5vLWxlZnQtYm9yZGVyKSBpbnB1dHtib3JkZXItaW5saW5lLXN0YXJ0OjB9Omhvc3QoLmJvcmRlci10b3AtY29sb3Itb25lKSBpbnB1dHtib3JkZXItYmxvY2stc3RhcnQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSl9aW5wdXQuaW5saW5lLWNoaWxke2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGJsb2NrLXNpemUsYm9yZGVyLWNvbG9yLGJveC1zaGFkb3csY29sb3IsaW5zZXQtYmxvY2stZW5kLGluc2V0LWJsb2NrLXN0YXJ0LGluc2V0LWlubGluZS1lbmQsaW5zZXQtaW5saW5lLXN0YXJ0LGluc2V0LXNpemUsb3BhY2l0eSxvdXRsaW5lLWNvbG9yLHRyYW5zZm9ybTt0cmFuc2l0aW9uLWR1cmF0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyk7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbi1vdXR9aW5wdXQuaW5saW5lLWNoaWxkIC5lZGl0aW5nLWVuYWJsZWR7YmFja2dyb3VuZC1jb2xvcjppbmhlcml0fWlucHV0LmlubGluZS1jaGlsZDpub3QoLmVkaXRpbmctZW5hYmxlZCl7ZGlzcGxheTpmbGV4O2N1cnNvcjpwb2ludGVyO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50O3BhZGRpbmctaW5saW5lLXN0YXJ0OjB9LmludGVybmFsLWxhYmVsLWFsaWdubWVudC0tY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlcn0uaW50ZXJuYWwtbGFiZWwtYWxpZ25tZW50LS1lbmR7YWxpZ24taXRlbXM6ZW5kfS5pbnRlcm5hbC1sYWJlbC0tY29udGFpbmVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbjtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9LmludGVybmFsLWxhYmVsLXJlcXVpcmVkLS1pbmRpY2F0b3J7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3Itc3RhdHVzLWRhbmdlcik7cGFkZGluZy1pbmxpbmU6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLWJhc2UpfS5pbnRlcm5hbC1sYWJlbC1yZXF1aXJlZC0taW5kaWNhdG9yOmhvdmVye2N1cnNvcjpoZWxwfS5pbnRlcm5hbC1sYWJlbC0tdGV4dHtsaW5lLWhlaWdodDoxfTpob3N0KFtzY2FsZT1zXSkgLmludGVybmFsLWxhYmVsLXNwYWNpbmctLWJvdHRvbXttYXJnaW4tYmxvY2stZW5kOnZhcigtLWNhbGNpdGUtc3BhY2luZy14eHMpfTpob3N0KFtzY2FsZT1zXSkgLmludGVybmFsLWxhYmVsLXNwYWNpbmctaW5saW5lLS1lbmR7bWFyZ2luLWlubGluZS1lbmQ6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXNtKX06aG9zdChbc2NhbGU9c10pIC5pbnRlcm5hbC1sYWJlbC1zcGFjaW5nLWlubGluZS0tc3RhcnR7bWFyZ2luLWlubGluZS1zdGFydDp2YXIoLS1jYWxjaXRlLXNwYWNpbmctc20pfTpob3N0KFtzY2FsZT1zXSkgLmludGVybmFsLWxhYmVsLS10ZXh0e2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMil9Omhvc3QoW3NjYWxlPW1dKSAuaW50ZXJuYWwtbGFiZWwtc3BhY2luZy0tYm90dG9te21hcmdpbi1ibG9jay1lbmQ6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXNtKX06aG9zdChbc2NhbGU9bV0pIC5pbnRlcm5hbC1sYWJlbC1zcGFjaW5nLWlubGluZS0tZW5ke21hcmdpbi1pbmxpbmUtZW5kOnZhcigtLWNhbGNpdGUtc3BhY2luZy1zbSl9Omhvc3QoW3NjYWxlPW1dKSAuaW50ZXJuYWwtbGFiZWwtc3BhY2luZy1pbmxpbmUtLXN0YXJ0e21hcmdpbi1pbmxpbmUtc3RhcnQ6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXNtKX06aG9zdChbc2NhbGU9bV0pIC5pbnRlcm5hbC1sYWJlbC0tdGV4dHtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfTpob3N0KFtzY2FsZT1sXSkgLmludGVybmFsLWxhYmVsLXNwYWNpbmctLWJvdHRvbXttYXJnaW4tYmxvY2stZW5kOnZhcigtLWNhbGNpdGUtc3BhY2luZy1zbSl9Omhvc3QoW3NjYWxlPWxdKSAuaW50ZXJuYWwtbGFiZWwtc3BhY2luZy1pbmxpbmUtLWVuZHttYXJnaW4taW5saW5lLWVuZDp2YXIoLS1jYWxjaXRlLXNwYWNpbmctbWQpfTpob3N0KFtzY2FsZT1sXSkgLmludGVybmFsLWxhYmVsLXNwYWNpbmctaW5saW5lLS1zdGFydHttYXJnaW4taW5saW5lLXN0YXJ0OnZhcigtLWNhbGNpdGUtc3BhY2luZy1tZCl9Omhvc3QoW3NjYWxlPWxdKSAuaW50ZXJuYWwtbGFiZWwtLXRleHR7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApfS52YWxpZGF0aW9uLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7YWxpZ24tc2VsZjpzdHJldGNofTpob3N0KFtzY2FsZT1tXSkgLnZhbGlkYXRpb24tY29udGFpbmVyLDpob3N0KFtzY2FsZT1sXSkgLnZhbGlkYXRpb24tY29udGFpbmVye3BhZGRpbmctYmxvY2stc3RhcnQ6LjVyZW19Omhvc3QoW3NjYWxlPXNdKSAudmFsaWRhdGlvbi1jb250YWluZXJ7cGFkZGluZy1ibG9jay1zdGFydDouMjVyZW19OjpzbG90dGVkKGlucHV0W3Nsb3Q9aGlkZGVuLWZvcm0taW5wdXRdKXttYXJnaW46MCFpbXBvcnRhbnQ7b3BhY2l0eTowIWltcG9ydGFudDtvdXRsaW5lOm5vbmUhaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O2luc2V0OjAhaW1wb3J0YW50O3RyYW5zZm9ybTpub25lIWltcG9ydGFudDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZSFpbXBvcnRhbnQ7ei1pbmRleDotMSFpbXBvcnRhbnR9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9OjpwbGFjZWhvbGRlcntmb250LXdlaWdodDp2YXIoLS1jYWxjaXRlLWZvbnQtd2VpZ2h0LW5vcm1hbCk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1pbnB1dC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMykpfWA7XG5jbGFzcyBJbnB1dFRleHQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFjdGlvbldyYXBwZXJSZWYgPSBjcmVhdGVSZWYoKTtcbiAgICB0aGlzLmF0dHJpYnV0ZVdhdGNoID0gdXNlV2F0Y2hBdHRyaWJ1dGVzKFtcImF1dG9mb2N1c1wiLCBcImVudGVya2V5aGludFwiLCBcImlucHV0bW9kZVwiLCBcInNwZWxsY2hlY2tcIl0sIHRoaXMuaGFuZGxlR2xvYmFsQXR0cmlidXRlc0NoYW5nZWQpO1xuICAgIHRoaXMuY2hpbGRSZWYgPSBjcmVhdGVSZWYoKTtcbiAgICB0aGlzLmlucHV0V3JhcHBlclJlZiA9IGNyZWF0ZVJlZigpO1xuICAgIHRoaXMub25IaWRkZW5Gb3JtSW5wdXRJbnB1dCA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC5uYW1lID09PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSh7XG4gICAgICAgICAgdmFsdWU6IGV2ZW50LnRhcmdldC52YWx1ZSxcbiAgICAgICAgICBvcmlnaW46IFwiZGlyZWN0XCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldEZvY3VzKCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuICAgIHRoaXMucHJldmlvdXNWYWx1ZU9yaWdpbiA9IFwiaW5pdGlhbFwiO1xuICAgIHRoaXMudXNlckNoYW5nZWRWYWx1ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3ZhbHVlID0gXCJcIjtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdXNlVDluKCk7XG4gICAgdGhpcy5mb2N1c1NldHRlciA9IHVzZVNldEZvY3VzKCkodGhpcyk7XG4gICAgdGhpcy5zbG90dGVkQWN0aW9uRWxEaXNhYmxlZEludGVybmFsbHkgPSBmYWxzZTtcbiAgICB0aGlzLmFsaWdubWVudCA9IFwic3RhcnRcIjtcbiAgICB0aGlzLmNsZWFyYWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmVkaXRpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgdGhpcy5pY29uRmxpcFJ0bCA9IGZhbHNlO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMucmVhZE9ubHkgPSBmYWxzZTtcbiAgICB0aGlzLnJlcXVpcmVkID0gZmFsc2U7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuc3RhdHVzID0gXCJpZGxlXCI7XG4gICAgdGhpcy52YWxpZGl0eSA9IHtcbiAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgIGJhZElucHV0OiBmYWxzZSxcbiAgICAgIGN1c3RvbUVycm9yOiBmYWxzZSxcbiAgICAgIHBhdHRlcm5NaXNtYXRjaDogZmFsc2UsXG4gICAgICByYW5nZU92ZXJmbG93OiBmYWxzZSxcbiAgICAgIHJhbmdlVW5kZXJmbG93OiBmYWxzZSxcbiAgICAgIHN0ZXBNaXNtYXRjaDogZmFsc2UsXG4gICAgICB0b29Mb25nOiBmYWxzZSxcbiAgICAgIHRvb1Nob3J0OiBmYWxzZSxcbiAgICAgIHR5cGVNaXNtYXRjaDogZmFsc2UsXG4gICAgICB2YWx1ZU1pc3Npbmc6IGZhbHNlXG4gICAgfTtcbiAgICB0aGlzLmNhbGNpdGVJbnB1dFRleHRDaGFuZ2UgPSBjcmVhdGVFdmVudCgpO1xuICAgIHRoaXMuY2FsY2l0ZUlucHV0VGV4dElucHV0ID0gY3JlYXRlRXZlbnQoKTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbElucHV0VGV4dEJsdXIgPSBjcmVhdGVFdmVudCgpO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsSW5wdXRUZXh0Rm9jdXMgPSBjcmVhdGVFdmVudCgpO1xuICAgIHRoaXMubGlzdGVuKFwiY2xpY2tcIiwgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgIHRoaXMubGlzdGVuKFwia2V5ZG93blwiLCB0aGlzLmtleURvd25IYW5kbGVyKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgc2xvdHRlZEFjdGlvbkVsRGlzYWJsZWRJbnRlcm5hbGx5OiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBhbGlnbm1lbnQ6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBhdXRvY29tcGxldGU6IFswLCB7fSwgeyBhdHRyaWJ1dGU6IGZhbHNlIH1dLCBjbGVhcmFibGU6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBkaXNhYmxlZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIGVkaXRpbmdFbmFibGVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgZm9ybTogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIGljb246IFszLCB7IGNvbnZlcnRlcjogc3RyaW5nT3JCb29sZWFuIH0sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgaWNvbkZsaXBSdGw6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBsYWJlbDogMSwgbGFiZWxUZXh0OiAxLCBsb2FkaW5nOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgbWF4TGVuZ3RoOiBbMTEsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IE51bWJlciB9XSwgbWVzc2FnZU92ZXJyaWRlczogWzAsIHt9LCB7IGF0dHJpYnV0ZTogZmFsc2UgfV0sIG1pbkxlbmd0aDogWzExLCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBOdW1iZXIgfV0sIG5hbWU6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBwYXR0ZXJuOiAxLCBwbGFjZWhvbGRlcjogMSwgcHJlZml4VGV4dDogMSwgcmVhZE9ubHk6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCByZXF1aXJlZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIHNjYWxlOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgc3RhdHVzOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgc3VmZml4VGV4dDogMSwgdmFsaWRhdGlvbkljb246IFszLCB7IGNvbnZlcnRlcjogc3RyaW5nT3JCb29sZWFuIH0sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgdmFsaWRhdGlvbk1lc3NhZ2U6IDEsIHZhbGlkaXR5OiBbMCwge30sIHsgYXR0cmlidXRlOiBmYWxzZSB9XSwgdmFsdWU6IDEgfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH1cbiAgc2V0IHZhbHVlKHZhbHVlKSB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl92YWx1ZTtcbiAgICBpZiAodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy52YWx1ZVdhdGNoZXIodmFsdWUsIG9sZFZhbHVlKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2VsZWN0VGV4dCgpIHtcbiAgICB0aGlzLmNoaWxkUmVmLnZhbHVlPy5zZWxlY3QoKTtcbiAgfVxuICBhc3luYyBzZXRGb2N1cyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNTZXR0ZXIoKCkgPT4gdGhpcy5jaGlsZFJlZi52YWx1ZSwgb3B0aW9ucyk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmlubGluZUVkaXRhYmxlRWwgPSB0aGlzLmVsLmNsb3Nlc3QoXCJjYWxjaXRlLWlubGluZS1lZGl0YWJsZVwiKTtcbiAgICBpZiAodGhpcy5pbmxpbmVFZGl0YWJsZUVsKSB7XG4gICAgICB0aGlzLmVkaXRpbmdFbmFibGVkID0gdGhpcy5pbmxpbmVFZGl0YWJsZUVsLmVkaXRpbmdFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbiAgICBjb25uZWN0TGFiZWwodGhpcyk7XG4gICAgY29ubmVjdEZvcm0odGhpcyk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKGludGVybmFsSGlkZGVuSW5wdXRJbnB1dEV2ZW50LCB0aGlzLm9uSGlkZGVuRm9ybUlucHV0SW5wdXQpO1xuICB9XG4gIGFzeW5jIGxvYWQoKSB7XG4gICAgdGhpcy5yZXF1ZXN0ZWRJY29uID0gc2V0UmVxdWVzdGVkSWNvbih7fSwgdGhpcy5pY29uLCBcInRleHRcIik7XG4gICAgdGhpcy5zZXRQcmV2aW91c0VtaXR0ZWRWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICB0aGlzLnNldFByZXZpb3VzVmFsdWUodGhpcy52YWx1ZSk7XG4gIH1cbiAgd2lsbFVwZGF0ZShjaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwiaWNvblwiKSkge1xuICAgICAgdGhpcy5yZXF1ZXN0ZWRJY29uID0gc2V0UmVxdWVzdGVkSWNvbih7fSwgdGhpcy5pY29uLCBcInRleHRcIik7XG4gICAgfVxuICB9XG4gIHVwZGF0ZWQoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgZGlzY29ubmVjdExhYmVsKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RGb3JtKHRoaXMpO1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihpbnRlcm5hbEhpZGRlbklucHV0SW5wdXRFdmVudCwgdGhpcy5vbkhpZGRlbkZvcm1JbnB1dElucHV0KTtcbiAgfVxuICBnZXQgaXNDbGVhcmFibGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xlYXJhYmxlICYmIHRoaXMudmFsdWUubGVuZ3RoID4gMDtcbiAgfVxuICBoYW5kbGVHbG9iYWxBdHRyaWJ1dGVzQ2hhbmdlZCgpIHtcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgfVxuICB2YWx1ZVdhdGNoZXIobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUpIHtcbiAgICBpZiAoIXRoaXMudXNlckNoYW5nZWRWYWx1ZSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZSh7XG4gICAgICAgIG9yaWdpbjogXCJkaXJlY3RcIixcbiAgICAgICAgcHJldmlvdXNWYWx1ZSxcbiAgICAgICAgdmFsdWU6ICFuZXdWYWx1ZSA/IFwiXCIgOiBuZXdWYWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMudXNlckNoYW5nZWRWYWx1ZSA9IGZhbHNlO1xuICB9XG4gIGtleURvd25IYW5kbGVyKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMucmVhZE9ubHkgfHwgdGhpcy5kaXNhYmxlZCB8fCBldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzQ2xlYXJhYmxlICYmIGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbGVhcklucHV0VGV4dFZhbHVlKGV2ZW50KTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgaWYgKHN1Ym1pdEZvcm0odGhpcykpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgb25MYWJlbENsaWNrKCkge1xuICAgIHRoaXMuc2V0Rm9jdXMoKTtcbiAgfVxuICBjbGVhcklucHV0VGV4dFZhbHVlKG5hdGl2ZUV2ZW50KSB7XG4gICAgdGhpcy5zZXRWYWx1ZSh7XG4gICAgICBjb21taXR0aW5nOiB0cnVlLFxuICAgICAgbmF0aXZlRXZlbnQsXG4gICAgICBvcmlnaW46IFwidXNlclwiLFxuICAgICAgdmFsdWU6IFwiXCJcbiAgICB9KTtcbiAgfVxuICBlbWl0Q2hhbmdlSWZVc2VyTW9kaWZpZWQoKSB7XG4gICAgaWYgKHRoaXMucHJldmlvdXNWYWx1ZU9yaWdpbiA9PT0gXCJ1c2VyXCIgJiYgdGhpcy52YWx1ZSAhPT0gdGhpcy5wcmV2aW91c0VtaXR0ZWRWYWx1ZSkge1xuICAgICAgdGhpcy5jYWxjaXRlSW5wdXRUZXh0Q2hhbmdlLmVtaXQoKTtcbiAgICAgIHRoaXMuc2V0UHJldmlvdXNFbWl0dGVkVmFsdWUodGhpcy52YWx1ZSk7XG4gICAgfVxuICB9XG4gIGlucHV0VGV4dEJsdXJIYW5kbGVyKCkge1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsSW5wdXRUZXh0Qmx1ci5lbWl0KHtcbiAgICAgIGVsZW1lbnQ6IHRoaXMuY2hpbGRSZWYudmFsdWUsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZVxuICAgIH0pO1xuICAgIHRoaXMuZW1pdENoYW5nZUlmVXNlck1vZGlmaWVkKCk7XG4gIH1cbiAgY2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gICAgaWYgKCFjb21wb3NlZFBhdGguaW5jbHVkZXModGhpcy5pbnB1dFdyYXBwZXJSZWYudmFsdWUpIHx8IGNvbXBvc2VkUGF0aC5pbmNsdWRlcyh0aGlzLmFjdGlvbldyYXBwZXJSZWYudmFsdWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0Rm9jdXMoKTtcbiAgfVxuICBpbnB1dFRleHRGb2N1c0hhbmRsZXIoKSB7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxJbnB1dFRleHRGb2N1cy5lbWl0KHtcbiAgICAgIGVsZW1lbnQ6IHRoaXMuY2hpbGRSZWYudmFsdWUsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZVxuICAgIH0pO1xuICB9XG4gIGlucHV0VGV4dElucHV0SGFuZGxlcihuYXRpdmVFdmVudCkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZE9ubHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRWYWx1ZSh7XG4gICAgICBuYXRpdmVFdmVudCxcbiAgICAgIG9yaWdpbjogXCJ1c2VyXCIsXG4gICAgICB2YWx1ZTogbmF0aXZlRXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgfSk7XG4gIH1cbiAgaW5wdXRUZXh0S2V5RG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRPbmx5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgdGhpcy5lbWl0Q2hhbmdlSWZVc2VyTW9kaWZpZWQoKTtcbiAgICB9XG4gIH1cbiAgc3luY0hpZGRlbkZvcm1JbnB1dChpbnB1dCkge1xuICAgIHN5bmNIaWRkZW5Gb3JtSW5wdXQoXCJ0ZXh0XCIsIHRoaXMsIGlucHV0KTtcbiAgfVxuICBzZXRJbnB1dFZhbHVlKG5ld0lucHV0VmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuY2hpbGRSZWYudmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jaGlsZFJlZi52YWx1ZS52YWx1ZSA9IG5ld0lucHV0VmFsdWU7XG4gIH1cbiAgc2V0UHJldmlvdXNFbWl0dGVkVmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnByZXZpb3VzRW1pdHRlZFZhbHVlID0gdmFsdWU7XG4gIH1cbiAgc2V0UHJldmlvdXNWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHZhbHVlO1xuICB9XG4gIHNldFZhbHVlKHsgY29tbWl0dGluZyA9IGZhbHNlLCBuYXRpdmVFdmVudCwgb3JpZ2luLCBwcmV2aW91c1ZhbHVlLCB2YWx1ZSB9KSB7XG4gICAgdGhpcy5zZXRQcmV2aW91c1ZhbHVlKHByZXZpb3VzVmFsdWUgPz8gdGhpcy52YWx1ZSk7XG4gICAgdGhpcy5wcmV2aW91c1ZhbHVlT3JpZ2luID0gb3JpZ2luO1xuICAgIHRoaXMudXNlckNoYW5nZWRWYWx1ZSA9IG9yaWdpbiA9PT0gXCJ1c2VyXCIgJiYgdmFsdWUgIT09IHRoaXMudmFsdWU7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIGlmIChvcmlnaW4gPT09IFwiZGlyZWN0XCIpIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh2YWx1ZSk7XG4gICAgICB0aGlzLnNldFByZXZpb3VzRW1pdHRlZFZhbHVlKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKG5hdGl2ZUV2ZW50KSB7XG4gICAgICBjb25zdCBjYWxjaXRlSW5wdXRUZXh0SW5wdXRFdmVudCA9IHRoaXMuY2FsY2l0ZUlucHV0VGV4dElucHV0LmVtaXQoKTtcbiAgICAgIGlmIChjYWxjaXRlSW5wdXRUZXh0SW5wdXRFdmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGNvbW1pdHRpbmcpIHtcbiAgICAgICAgdGhpcy5lbWl0Q2hhbmdlSWZVc2VyTW9kaWZpZWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGRpciA9IGdldEVsZW1lbnREaXIodGhpcy5lbCk7XG4gICAgY29uc3QgbG9hZGVyID0gaHRtbGA8ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5sb2FkZXIpfT48Y2FsY2l0ZS1wcm9ncmVzcyAubGFiZWw9JHt0aGlzLm1lc3NhZ2VzLmxvYWRpbmd9IHR5cGU9aW5kZXRlcm1pbmF0ZT48L2NhbGNpdGUtcHJvZ3Jlc3M+PC9kaXY+YDtcbiAgICBjb25zdCBpbnB1dENsZWFyQnV0dG9uID0gaHRtbGA8YnV0dG9uIC5hcmlhTGFiZWw9JHt0aGlzLm1lc3NhZ2VzLmNsZWFyfSBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY2xlYXJCdXR0b24pfSAuZGlzYWJsZWQ9JHt0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZE9ubHl9IEBjbGljaz0ke3RoaXMuY2xlYXJJbnB1dFRleHRWYWx1ZX0gdGFiaW5kZXg9LTEgdHlwZT1idXR0b24+PGNhbGNpdGUtaWNvbiBpY29uPXggLnNjYWxlPSR7Z2V0SWNvblNjYWxlKHRoaXMuc2NhbGUpfT48L2NhbGNpdGUtaWNvbj48L2J1dHRvbj5gO1xuICAgIGNvbnN0IGljb25FbCA9IGh0bWxgPGNhbGNpdGUtaWNvbiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaW5wdXRJY29uKX0gLmZsaXBSdGw9JHt0aGlzLmljb25GbGlwUnRsfSAuaWNvbj0ke3RoaXMucmVxdWVzdGVkSWNvbn0gLnNjYWxlPSR7Z2V0SWNvblNjYWxlKHRoaXMuc2NhbGUpfT48L2NhbGNpdGUtaWNvbj5gO1xuICAgIGNvbnN0IHByZWZpeFRleHQgPSBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLnByZWZpeCl9PiR7dGhpcy5wcmVmaXhUZXh0fTwvZGl2PmA7XG4gICAgY29uc3Qgc3VmZml4VGV4dCA9IGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1Muc3VmZml4KX0+JHt0aGlzLnN1ZmZpeFRleHR9PC9kaXY+YDtcbiAgICBjb25zdCBjaGlsZEVsID0gaHRtbGA8aW5wdXQgYXJpYS1lcnJvcm1lc3NhZ2U9JHtJRFMudmFsaWRhdGlvbk1lc3NhZ2V9IC5hcmlhSW52YWxpZD0ke3RoaXMuc3RhdHVzID09PSBcImludmFsaWRcIn0gLmFyaWFMYWJlbD0ke2dldExhYmVsVGV4dCh0aGlzKX0gYXV0b2NvbXBsZXRlPSR7dGhpcy5hdXRvY29tcGxldGUgPz8gbm90aGluZ30gLmF1dG9mb2N1cz0ke3RoaXMuZWwuYXV0b2ZvY3VzfSBjbGFzcz0ke3NhZmVDbGFzc01hcCh7XG4gICAgICBbQ1NTLmVkaXRpbmdFbmFibGVkXTogdGhpcy5lZGl0aW5nRW5hYmxlZCxcbiAgICAgIFtDU1MuaW5saW5lQ2hpbGRdOiAhIXRoaXMuaW5saW5lRWRpdGFibGVFbFxuICAgIH0pfSB2YWx1ZT0ke3RoaXMuZGVmYXVsdFZhbHVlID8/IG5vdGhpbmd9IC5kaXNhYmxlZD0ke3RoaXMuZGlzYWJsZWQgPyB0cnVlIDogbnVsbH0gZW50ZXJrZXloaW50PSR7dGhpcy5lbC5lbnRlcktleUhpbnQgPz8gbm90aGluZ30gaW5wdXRtb2RlPSR7dGhpcy5lbC5pbnB1dE1vZGUgPz8gbm90aGluZ30gbWF4bGVuZ3RoPSR7dGhpcy5tYXhMZW5ndGggPz8gbm90aGluZ30gbWlubGVuZ3RoPSR7dGhpcy5taW5MZW5ndGggPz8gbm90aGluZ30gbmFtZT0ke3RoaXMubmFtZSA/PyBub3RoaW5nfSBAYmx1cj0ke3RoaXMuaW5wdXRUZXh0Qmx1ckhhbmRsZXJ9IEBmb2N1cz0ke3RoaXMuaW5wdXRUZXh0Rm9jdXNIYW5kbGVyfSBAaW5wdXQ9JHt0aGlzLmlucHV0VGV4dElucHV0SGFuZGxlcn0gQGtleWRvd249JHt0aGlzLmlucHV0VGV4dEtleURvd25IYW5kbGVyfSBwYXR0ZXJuPSR7dGhpcy5wYXR0ZXJuID8/IG5vdGhpbmd9IHBsYWNlaG9sZGVyPSR7KHRoaXMucGxhY2Vob2xkZXIgfHwgXCJcIikgPz8gbm90aGluZ30gLnJlYWRPbmx5PSR7dGhpcy5yZWFkT25seX0gLnJlcXVpcmVkPSR7dGhpcy5yZXF1aXJlZCA/IHRydWUgOiBudWxsfSBzcGVsbGNoZWNrPSR7dGhpcy5lbC5zcGVsbGNoZWNrID8/IG5vdGhpbmd9IHRhYmluZGV4PSR7KHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5pbmxpbmVFZGl0YWJsZUVsICYmICF0aGlzLmVkaXRpbmdFbmFibGVkID8gLTEgOiBudWxsKSA/PyBub3RoaW5nfSB0eXBlPXRleHQgLnZhbHVlPSR7bGl2ZSh0aGlzLnZhbHVlID8/IFwiXCIpfSAke3JlZih0aGlzLmNoaWxkUmVmKX0+YDtcbiAgICByZXR1cm4gSW50ZXJhY3RpdmVDb250YWluZXIoeyBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCwgY2hpbGRyZW46IGh0bWxgJHt0aGlzLmxhYmVsVGV4dCAmJiBJbnRlcm5hbExhYmVsKHsgbGFiZWxUZXh0OiB0aGlzLmxhYmVsVGV4dCwgb25DbGljazogdGhpcy5vbkxhYmVsQ2xpY2ssIHJlcXVpcmVkOiB0aGlzLnJlcXVpcmVkLCB0b29sdGlwVGV4dDogdGhpcy5tZXNzYWdlcy5yZXF1aXJlZCB9KSB8fCBcIlwifTxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoe1xuICAgICAgW0NTUy5pbnB1dFdyYXBwZXJdOiB0cnVlLFxuICAgICAgW0NTU19VVElMSVRZLnJ0bF06IGRpciA9PT0gXCJydGxcIixcbiAgICAgIFtDU1MuY2xlYXJhYmxlXTogdGhpcy5pc0NsZWFyYWJsZVxuICAgIH0pfSAke3JlZih0aGlzLmlucHV0V3JhcHBlclJlZil9PiR7dGhpcy5wcmVmaXhUZXh0ID8gcHJlZml4VGV4dCA6IG51bGx9PGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1Mud3JhcHBlcil9PiR7Y2hpbGRFbH0ke3RoaXMuaXNDbGVhcmFibGUgPyBpbnB1dENsZWFyQnV0dG9uIDogbnVsbH0ke3RoaXMucmVxdWVzdGVkSWNvbiA/IGljb25FbCA6IG51bGx9JHt0aGlzLmxvYWRpbmcgPyBsb2FkZXIgOiBudWxsfTwvZGl2PjxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmFjdGlvbldyYXBwZXIpfSAke3JlZih0aGlzLmFjdGlvbldyYXBwZXJSZWYpfT48c2xvdCBuYW1lPSR7U0xPVFMuYWN0aW9ufT48L3Nsb3Q+PC9kaXY+JHt0aGlzLnN1ZmZpeFRleHQgPyBzdWZmaXhUZXh0IDogbnVsbH0ke0hpZGRlbkZvcm1JbnB1dFNsb3QoeyBjb21wb25lbnQ6IHRoaXMgfSl9PC9kaXY+JHt0aGlzLnZhbGlkYXRpb25NZXNzYWdlICYmIHRoaXMuc3RhdHVzID09PSBcImludmFsaWRcIiA/IFZhbGlkYXRpb24oeyBpY29uOiB0aGlzLnZhbGlkYXRpb25JY29uLCBpZDogSURTLnZhbGlkYXRpb25NZXNzYWdlLCBtZXNzYWdlOiB0aGlzLnZhbGlkYXRpb25NZXNzYWdlLCBzY2FsZTogdGhpcy5zY2FsZSwgc3RhdHVzOiB0aGlzLnN0YXR1cyB9KSA6IG51bGx9YCB9KTtcbiAgfVxufVxuY3VzdG9tRWxlbWVudChcImNhbGNpdGUtaW5wdXQtdGV4dFwiLCBJbnB1dFRleHQpO1xuZXhwb3J0IHtcbiAgSW5wdXRUZXh0XG59O1xuIiwiaW1wb3J0IFwiLi4vY2FsY2l0ZS1pbnB1dC1tZXNzYWdlL2luZGV4LmpzXCI7XG5pbXBvcnQgXCIuLi9jYWxjaXRlLXByb2dyZXNzL2luZGV4LmpzXCI7XG5pbXBvcnQgXCIuLi9jYWxjaXRlLWljb24vaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2N1c3RvbUVsZW1lbnQuanNcIjsiLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgYyBhcyBjdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjcmVhdGVSZWYsIHJlZiB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgY3JlYXRlRXZlbnQsIHNhZmVDbGFzc01hcCB9IGZyb20gXCJAYXJjZ2lzL2x1bWluYVwiO1xuaW1wb3J0IHsgZCBhcyBmb2N1c0VsZW1lbnRJbkdyb3VwLCBzIGFzIHNsb3RDaGFuZ2VHZXRBc3NpZ25lZEVsZW1lbnRzIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9kb20uanNcIjtcbmltcG9ydCB7IHUgYXMgdXBkYXRlSG9zdEludGVyYWN0aW9uLCBJIGFzIEludGVyYWN0aXZlQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9pbnRlcmFjdGl2ZS5qc1wiO1xuaW1wb3J0IHsgdSBhcyB1c2VTZXRGb2N1cyB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXNlU2V0Rm9jdXMuanNcIjtcbmNvbnN0IENTUyA9IHtcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiXG59O1xuY29uc3Qgc3R5bGVzID0gY3NzYDpob3N0ey0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1mb2N1czogdmFyKCAtLWNhbGNpdGUtY29sb3ItZm9jdXMsIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpKSApfTpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2Rpc3BsYXk6ZmxleH0uY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6dmFyKC0tY2FsY2l0ZS1zd2F0Y2gtZ3JvdXAtc3BhY2UsIHZhcigtLWNhbGNpdGUtc3BhY2luZy1zbSkpfTpob3N0KFtzY2FsZT1zXSkgLmNvbnRhaW5lcntnYXA6dmFyKC0tY2FsY2l0ZS1zd2F0Y2gtZ3JvdXAtc3BhY2UsIHZhcigtLWNhbGNpdGUtc3BhY2luZy14cykpfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX0uaW50ZXJhY3Rpb24tY29udGFpbmVye2Rpc3BsYXk6Y29udGVudHN9YDtcbmNsYXNzIFN3YXRjaEdyb3VwIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIHRoaXMuc2xvdFJlZkVsID0gY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5mb2N1c1NldHRlciA9IHVzZVNldEZvY3VzKCkodGhpcyk7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBbXTtcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGUgPSBcIm5vbmVcIjtcbiAgICB0aGlzLmNhbGNpdGVTd2F0Y2hHcm91cFNlbGVjdCA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5saXN0ZW4oXCJjYWxjaXRlSW50ZXJuYWxTd2F0Y2hLZXlFdmVudFwiLCB0aGlzLmNhbGNpdGVJbnRlcm5hbFN3YXRjaEtleUV2ZW50TGlzdGVuZXIpO1xuICAgIHRoaXMubGlzdGVuKFwiY2FsY2l0ZVN3YXRjaFNlbGVjdFwiLCB0aGlzLmNhbGNpdGVTd2F0Y2hTZWxlY3RMaXN0ZW5lcik7XG4gICAgdGhpcy5saXN0ZW4oXCJjYWxjaXRlSW50ZXJuYWxTd2F0Y2hTZWxlY3RcIiwgdGhpcy5jYWxjaXRlSW50ZXJuYWxTd2F0Y2hTZWxlY3RMaXN0ZW5lcik7XG4gICAgdGhpcy5saXN0ZW4oXCJjYWxjaXRlSW50ZXJuYWxTeW5jU2VsZWN0ZWRTd2F0Y2hlc1wiLCB0aGlzLmNhbGNpdGVJbnRlcm5hbFN5bmNTZWxlY3RlZFN3YXRjaGVzKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgZGlzYWJsZWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBsYWJlbDogMSwgc2NhbGU6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBzZWxlY3RlZEl0ZW1zOiBbMCwge30sIHsgYXR0cmlidXRlOiBmYWxzZSB9XSwgc2VsZWN0aW9uTW9kZTogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0gfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGFzeW5jIHNldEZvY3VzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c1NldHRlcigoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9LCBvcHRpb25zKTtcbiAgfVxuICB3aWxsVXBkYXRlKGNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJzZWxlY3Rpb25Nb2RlXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5zZWxlY3Rpb25Nb2RlICE9PSBcIm5vbmVcIikpIHtcbiAgICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcbiAgICB9XG4gIH1cbiAgdXBkYXRlZCgpIHtcbiAgICB1cGRhdGVIb3N0SW50ZXJhY3Rpb24odGhpcyk7XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsU3dhdGNoS2V5RXZlbnRMaXN0ZW5lcihldmVudCkge1xuICAgIGlmIChldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLmVsKSkge1xuICAgICAgY29uc3QgaW50ZXJhY3RpdmVJdGVtcyA9IHRoaXMuaXRlbXM/LmZpbHRlcigoZWwpID0+ICFlbC5kaXNhYmxlZCk7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmRldGFpbC5rZXkpIHtcbiAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKGludGVyYWN0aXZlSXRlbXMsIGV2ZW50LmRldGFpbC50YXJnZXQsIFwibmV4dFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAoaW50ZXJhY3RpdmVJdGVtcywgZXZlbnQuZGV0YWlsLnRhcmdldCwgXCJwcmV2aW91c1wiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkhvbWVcIjpcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKGludGVyYWN0aXZlSXRlbXMsIGV2ZW50LmRldGFpbC50YXJnZXQsIFwiZmlyc3RcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJFbmRcIjpcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKGludGVyYWN0aXZlSXRlbXMsIGV2ZW50LmRldGFpbC50YXJnZXQsIFwibGFzdFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgY2FsY2l0ZVN3YXRjaFNlbGVjdExpc3RlbmVyKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHRoaXMuZWwpKSB7XG4gICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbXModHJ1ZSwgZXZlbnQudGFyZ2V0KTtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsU3dhdGNoU2VsZWN0TGlzdGVuZXIoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcy5lbCkpIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcyhmYWxzZSwgZXZlbnQudGFyZ2V0KTtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsU3luY1NlbGVjdGVkU3dhdGNoZXMoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModGhpcy5lbCkpIHtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRJdGVtcygpO1xuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJzaW5nbGVcIiAmJiB0aGlzLnNlbGVjdGVkSXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbXMoZmFsc2UsIGV2ZW50LnRhcmdldCk7XG4gICAgICB9XG4gICAgfVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG4gIHVwZGF0ZUl0ZW1zKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbXNGcm9tU2xvdCA9IHRoaXMuc2xvdFJlZkVsLnZhbHVlPy5hc3NpZ25lZEVsZW1lbnRzKHsgZmxhdHRlbjogdHJ1ZSB9KS5maWx0ZXIoKGVsKSA9PiBlbD8ubWF0Y2hlcyhcImNhbGNpdGUtc3dhdGNoXCIpKTtcbiAgICB0aGlzLml0ZW1zID0gIWV2ZW50ID8gaXRlbXNGcm9tU2xvdCA6IHNsb3RDaGFuZ2VHZXRBc3NpZ25lZEVsZW1lbnRzKGV2ZW50KTtcbiAgICBpZiAodGhpcy5pdGVtcz8ubGVuZ3RoIDwgMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLml0ZW1zPy5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgZWwuaW50ZXJhY3RpdmUgPSB0cnVlO1xuICAgICAgZWwuc2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgICAgZWwuc2VsZWN0aW9uTW9kZSA9IHRoaXMuc2VsZWN0aW9uTW9kZTtcbiAgICAgIGVsLnBhcmVudFN3YXRjaEdyb3VwID0gdGhpcy5lbDtcbiAgICB9KTtcbiAgICB0aGlzLnNldFNlbGVjdGVkSXRlbXMoZmFsc2UpO1xuICB9XG4gIHVwZGF0ZVNlbGVjdGVkSXRlbXMoKSB7XG4gICAgdGhpcy5zZWxlY3RlZEl0ZW1zID0gdGhpcy5pdGVtcz8uZmlsdGVyKChlbCkgPT4gZWwuc2VsZWN0ZWQpO1xuICB9XG4gIHNldFNlbGVjdGVkSXRlbXMoZW1pdCwgZWxUb01hdGNoKSB7XG4gICAgaWYgKGVsVG9NYXRjaCkge1xuICAgICAgdGhpcy5pdGVtcz8uZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdFbCA9IGVsVG9NYXRjaCA9PT0gZWw7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgY2FzZSBcIm11bHRpcGxlXCI6XG4gICAgICAgICAgICBpZiAobWF0Y2hpbmdFbCkge1xuICAgICAgICAgICAgICBlbC5zZWxlY3RlZCA9ICFlbC5zZWxlY3RlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJzaW5nbGVcIjpcbiAgICAgICAgICAgIGVsLnNlbGVjdGVkID0gbWF0Y2hpbmdFbCA/ICFlbC5zZWxlY3RlZCA6IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInNpbmdsZS1wZXJzaXN0XCI6XG4gICAgICAgICAgICBlbC5zZWxlY3RlZCA9ICEhbWF0Y2hpbmdFbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVTZWxlY3RlZEl0ZW1zKCk7XG4gICAgaWYgKGVtaXQpIHtcbiAgICAgIHRoaXMuY2FsY2l0ZVN3YXRjaEdyb3VwU2VsZWN0LmVtaXQoKTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHJvbGUgPSB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibm9uZVwiIHx8IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiID8gXCJncm91cFwiIDogXCJyYWRpb2dyb3VwXCI7XG4gICAgY29uc3QgeyBkaXNhYmxlZCB9ID0gdGhpcztcbiAgICByZXR1cm4gSW50ZXJhY3RpdmVDb250YWluZXIoeyBkaXNhYmxlZCwgY2hpbGRyZW46IGh0bWxgPGRpdiAuYXJpYUxhYmVsPSR7dGhpcy5sYWJlbH0gY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmNvbnRhaW5lcil9IC5yb2xlPSR7cm9sZX0+PHNsb3QgQHNsb3RjaGFuZ2U9JHt0aGlzLnVwZGF0ZUl0ZW1zfSAke3JlZih0aGlzLnNsb3RSZWZFbCl9Pjwvc2xvdD48L2Rpdj5gIH0pO1xuICB9XG59XG5jdXN0b21FbGVtZW50KFwiY2FsY2l0ZS1zd2F0Y2gtZ3JvdXBcIiwgU3dhdGNoR3JvdXApO1xuZXhwb3J0IHtcbiAgU3dhdGNoR3JvdXBcbn07XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jdXN0b21FbGVtZW50LmpzXCI7IiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGMgYXMgY3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi8uLi9jaHVua3MvcnVudGltZS5qc1wiO1xuaW1wb3J0IHsga2V5ZWQgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMva2V5ZWQuanNcIjtcbmltcG9ydCB7IGNzcywgaHRtbCwgc3ZnLCBub3RoaW5nIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgY3JlYXRlUmVmLCByZWYgfSBmcm9tIFwibGl0LWh0bWwvZGlyZWN0aXZlcy9yZWYuanNcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiY29sb3JcIjtcbmltcG9ydCB7IGEgYXMgc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudCB9IGZyb20gXCIuLi8uLi9jaHVua3MvZG9tLmpzXCI7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiwgSSBhcyBJbnRlcmFjdGl2ZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi9jaHVua3MvaW50ZXJhY3RpdmUuanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlU2V0Rm9jdXMgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3VzZVNldEZvY3VzLmpzXCI7XG5pbXBvcnQgeyBoIGFzIGhleGlmeSB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXRpbHMuanNcIjtcbmNvbnN0IENTUyA9IHtcbiAgaW1hZ2VDb250YWluZXI6IFwiaW1hZ2UtY29udGFpbmVyXCIsXG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgc2VsZWN0YWJsZTogXCJzZWxlY3RhYmxlXCIsXG4gIG5vbkludGVyYWN0aXZlOiBcIm5vbi1pbnRlcmFjdGl2ZVwiLFxuICBzZWxlY3RlZDogXCJzZWxlY3RlZFwiLFxuICBpbnRlcm5hbFN2Z0NvbnRhaW5lcjogXCJpbnRlcm5hbC1zdmctY29udGFpbmVyXCIsXG4gIGludGVybmFsU3ZnRGlzYWJsZWQ6IFwiaW50ZXJuYWwtc3ZnLWRpc2FibGVkXCIsXG4gIGludGVybmFsU3ZnRW1wdHk6IFwiaW50ZXJuYWwtc3ZnLWVtcHR5XCIsXG4gIHN3YXRjaDogXCJzd2F0Y2hcIixcbiAgY2hlY2tlcjogXCJjaGVja2VyXCIsXG4gIG5vQ29sb3JTd2F0Y2g6IFwic3dhdGNoLS1uby1jb2xvclwiXG59O1xuY29uc3QgU0xPVFMgPSB7XG4gIGltYWdlOiBcImltYWdlXCJcbn07XG5jb25zdCBjaGVja2VyU3F1YXJlU2l6ZSA9IDQ7XG5jb25zdCBDSEVDS0VSX0RJTUVOU0lPTlMgPSB7XG4gIHNxdWFyZVNpemU6IGNoZWNrZXJTcXVhcmVTaXplLFxuICBzaXplOiBjaGVja2VyU3F1YXJlU2l6ZSAqIDJcbn07XG5jb25zdCBJRFMgPSB7XG4gIGNoZWNrZXI6IFwiY2hlY2tlclwiLFxuICBzaGFwZTogXCJzaGFwZVwiLFxuICBzd2F0Y2hSZWN0OiBcInN3YXRjaC1yZWN0XCIsXG4gIHN3YXRjaFNvbGlkOiBcInN3YXRjaC1zb2xpZFwiLFxuICBzd2F0Y2hUcmFuc3BhcmVudDogXCJzd2F0Y2gtdHJhbnNwYXJlbnRcIlxufTtcbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHtkaXNwbGF5OmJsb2NrOy0tY2FsY2l0ZS1pbnRlcm5hbC1zd2F0Y2gtaW5zZXQ6IHZhcigtLWNhbGNpdGUtc3BhY2luZy14eHMpfTpob3N0KFtzY2FsZT1zXSkgLmNvbnRhaW5lcnstLWNhbGNpdGUtaW50ZXJuYWwtc3dhdGNoLXNpemU6IHZhcigtLWNhbGNpdGUtc3BhY2luZy14bCl9Omhvc3QoW3NjYWxlPW1dKSAuY29udGFpbmVyey0tY2FsY2l0ZS1pbnRlcm5hbC1zd2F0Y2gtc2l6ZTogdmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXh4bCl9Omhvc3QoW3NjYWxlPWxdKSAuY29udGFpbmVyey0tY2FsY2l0ZS1pbnRlcm5hbC1zd2F0Y2gtc2l6ZTogdmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXh4eGwpfS5jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpib3JkZXItYm94O2p1c3RpZnktY29udGVudDpjZW50ZXI7b3ZlcmZsb3c6aGlkZGVuO291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnQ7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3dhdGNoLWZvbnQtc2l6ZSwgdmFyKC0tY2FsY2l0ZS1mb250LXNpemUpKTtibG9jay1zaXplOnZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3dhdGNoLXNpemUsIGF1dG8pO2lubGluZS1zaXplOnZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3dhdGNoLXNpemUsIGF1dG8pO21pbi1pbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1zaXplLCBhdXRvKTtib3JkZXItcmFkaXVzOnZhcigtLWNhbGNpdGUtc3dhdGNoLWNvcm5lci1yYWRpdXMsIDApfS5jb250YWluZXI6bm90KC5ub24taW50ZXJhY3RpdmUpOmhvdmVye2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAwIDAgdmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtbWQpIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTIpfS5jb250YWluZXIuc2VsZWN0YWJsZXtjdXJzb3I6cG9pbnRlcn0uY29udGFpbmVyOm5vdCgubm9uLWludGVyYWN0aXZlKTpmb2N1c3tvdXRsaW5lOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKSBzb2xpZCB2YXIoLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkpO291dGxpbmU6dmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtbWQpIHNvbGlkIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXMpO291dGxpbmUtb2Zmc2V0OmNhbGModmFyKC0tY2FsY2l0ZS1zcGFjaW5nLWJhc2UpICogY2FsYygxIC0gKDIqY2xhbXAoMCx2YXIoLS1jYWxjaXRlLW9mZnNldC1pbnZlcnQtZm9jdXMpLDEpKSkpfS5zd2F0Y2h7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTppbmxpbmUtZmxleDtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDpjYWxjKHZhcigtLWNhbGNpdGUtei1pbmRleCkgKyAxKTtibG9jay1zaXplOnZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3dhdGNoLXNpemUsIGF1dG8pO2lubGluZS1zaXplOnZhcigtLWNhbGNpdGUtaW50ZXJuYWwtc3dhdGNoLXNpemUsIGF1dG8pO21pbi1pbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1zaXplLCBhdXRvKTtib3JkZXItcmFkaXVzOnZhcigtLWNhbGNpdGUtc3dhdGNoLWNvcm5lci1yYWRpdXMsIDApfTpob3N0KFtzZWxlY3RlZF0pIC5zd2F0Y2h7aW5zZXQ6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1zd2F0Y2gtaW5zZXQpO2Jsb2NrLXNpemU6Y2FsYyh2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1zaXplLCBhdXRvKSAtIDIgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1pbnNldCkpO2lubGluZS1zaXplOmNhbGModmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1zd2F0Y2gtc2l6ZSwgYXV0bykgLSAyICogdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1zd2F0Y2gtaW5zZXQpKTttaW4taW5saW5lLXNpemU6Y2FsYyh2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1zaXplLCBhdXRvKSAtIDIgKiB2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1pbnNldCkpfTpob3N0KFtzZWxlY3RlZF0pIC5jb250YWluZXJ7Ym94LXNoYWRvdzppbnNldCAwIDAgMCB2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCkgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpLGluc2V0IDAgMCAwIHZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLWxnKSB2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSl9Omhvc3QoW3NlbGVjdGVkXSkgLmltYWdlLWNvbnRhaW5lcntpbnNldDp2YXIoLS1jYWxjaXRlLWludGVybmFsLXN3YXRjaC1pbnNldCl9LmltYWdlLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmlubGluZS1mbGV4O292ZXJmbG93OmhpZGRlbjt6LWluZGV4OmNhbGModmFyKC0tY2FsY2l0ZS16LWluZGV4KSArIDIpO2luc2V0OnZhcigtLWNhbGNpdGUtc3BhY2luZy1weCk7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BvaW50ZXItZXZlbnRzOm5vbmU7Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLXN3YXRjaC1jb3JuZXItcmFkaXVzLCAwKX0uaW50ZXJuYWwtc3ZnLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtpbnNldDowO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt6LWluZGV4OmNhbGModmFyKC0tY2FsY2l0ZS16LWluZGV4KSArIDIpfS5zd2F0Y2h7b3ZlcmZsb3c6aGlkZGVuO2Jsb2NrLXNpemU6aW5oZXJpdDtpbmxpbmUtc2l6ZTppbmhlcml0fS5zd2F0Y2gtLW5vLWNvbG9yIHJlY3R7ZmlsbDp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSl9Omhvc3QoW3NlbGVjdGVkXSkgI3N3YXRjaC1yZWN0LDpob3N0KFtzZWxlY3RlZF0pICNzd2F0Y2gtc29saWQsOmhvc3QoW3NlbGVjdGVkXSkgI3N3YXRjaC10cmFuc3BhcmVudHtzdHJva2Utd2lkdGg6MH0jc3dhdGNoLXJlY3QsI3N3YXRjaC1zb2xpZCwjc3dhdGNoLXRyYW5zcGFyZW50e3N0cm9rZTp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSk7c3Ryb2tlLXdpZHRoOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKTtzdHJva2Utb3BhY2l0eTouMztyeDp2YXIoLS1jYWxjaXRlLXN3YXRjaC1jb3JuZXItcmFkaXVzKX0uaW50ZXJuYWwtc3ZnLWRpc2FibGVke3N0cm9rZTojNmE2YTZhO2ZpbGw6I2ZmZn0uaW50ZXJuYWwtc3ZnLWVtcHR5e3N0cm9rZTp2YXIoLS1jYWxjaXRlLWNvbG9yLXN0YXR1cy1kYW5nZXIpO3N0cm9rZS13aWR0aDozfS5jaGVja2Vye2ZpbGw6I2NhY2FjYX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1gO1xuY2xhc3MgU3dhdGNoIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IGNyZWF0ZVJlZigpO1xuICAgIHRoaXMuZm9jdXNTZXR0ZXIgPSB1c2VTZXRGb2N1cygpKHRoaXMpO1xuICAgIHRoaXMuaGFzSW1hZ2UgPSBmYWxzZTtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5pbnRlcmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5zZWxlY3Rpb25Nb2RlID0gXCJub25lXCI7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTd2F0Y2hLZXlFdmVudCA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTd2F0Y2hTZWxlY3QgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsU3luY1NlbGVjdGVkU3dhdGNoZXMgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZVN3YXRjaFNlbGVjdCA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5saXN0ZW4oXCJrZXlkb3duXCIsIHRoaXMua2V5RG93bkhhbmRsZXIpO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBoYXNJbWFnZTogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgY29sb3I6IDEsIGRpc2FibGVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgaW50ZXJhY3RpdmU6IFs1LCB7fSwgeyB0eXBlOiBCb29sZWFuIH1dLCBsYWJlbDogMSwgcGFyZW50U3dhdGNoR3JvdXA6IFswLCB7fSwgeyBhdHRyaWJ1dGU6IGZhbHNlIH1dLCBzY2FsZTogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIHNlbGVjdGVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgc2VsZWN0aW9uTW9kZTogMSwgdmFsdWU6IDEgfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGFzeW5jIHNldEZvY3VzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c1NldHRlcigoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5lbDtcbiAgICB9LCBvcHRpb25zKTtcbiAgfVxuICBhc3luYyBsb2FkKCkge1xuICAgIHRoaXMuaGFuZGxlQ29sb3JDaGFuZ2UodGhpcy5jb2xvcik7XG4gIH1cbiAgd2lsbFVwZGF0ZShjaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwic2VsZWN0ZWRcIikgJiYgdGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLndhdGNoU2VsZWN0ZWQodGhpcy5zZWxlY3RlZCk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmhhcyhcImNvbG9yXCIpKSB7XG4gICAgICB0aGlzLmhhbmRsZUNvbG9yQ2hhbmdlKHRoaXMuY29sb3IpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVkKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICBsb2FkZWQoKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSAhPT0gXCJub25lXCIgJiYgdGhpcy5pbnRlcmFjdGl2ZSAmJiB0aGlzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLmhhbmRsZVNlbGVjdGlvblByb3BlcnR5Q2hhbmdlKHRoaXMuc2VsZWN0ZWQpO1xuICAgIH1cbiAgfVxuICB3YXRjaFNlbGVjdGVkKHNlbGVjdGVkKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJub25lXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVTZWxlY3Rpb25Qcm9wZXJ0eUNoYW5nZShzZWxlY3RlZCk7XG4gIH1cbiAga2V5RG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLmVsKSB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICBjYXNlIFwiIFwiOlxuICAgICAgICBjYXNlIFwiRW50ZXJcIjpcbiAgICAgICAgICB0aGlzLmhhbmRsZUVtaXR0aW5nRXZlbnQoKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgIGNhc2UgXCJIb21lXCI6XG4gICAgICAgIGNhc2UgXCJFbmRcIjpcbiAgICAgICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFN3YXRjaEtleUV2ZW50LmVtaXQoZXZlbnQpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGhhbmRsZVNsb3RJbWFnZUNoYW5nZShldmVudCkge1xuICAgIHRoaXMuaGFzSW1hZ2UgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgfVxuICBoYW5kbGVFbWl0dGluZ0V2ZW50KCkge1xuICAgIGlmICh0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICB0aGlzLmNhbGNpdGVTd2F0Y2hTZWxlY3QuZW1pdCgpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVTZWxlY3Rpb25Qcm9wZXJ0eUNoYW5nZShzZWxlY3RlZCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwic2luZ2xlXCIpIHtcbiAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsU3luY1NlbGVjdGVkU3dhdGNoZXMuZW1pdCgpO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3RlZEluUGFyZW50ID0gdGhpcy5wYXJlbnRTd2F0Y2hHcm91cC5zZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKHRoaXMuZWwpO1xuICAgIGlmICghc2VsZWN0ZWRJblBhcmVudCAmJiBzZWxlY3RlZCAmJiB0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibXVsdGlwbGVcIikge1xuICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxTd2F0Y2hTZWxlY3QuZW1pdCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlICE9PSBcInNpbmdsZVwiKSB7XG4gICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFN5bmNTZWxlY3RlZFN3YXRjaGVzLmVtaXQoKTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlQ29sb3JDaGFuZ2UoY29sb3IpIHtcbiAgICB0aGlzLmludGVybmFsQ29sb3IgPSBjb2xvciA/IENvbG9yKGNvbG9yKSA6IG51bGw7XG4gIH1cbiAgcmVuZGVyU3dhdGNoSW1hZ2UoKSB7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaW1hZ2VDb250YWluZXIpfT48c2xvdCBuYW1lPSR7U0xPVFMuaW1hZ2V9IEBzbG90Y2hhbmdlPSR7dGhpcy5oYW5kbGVTbG90SW1hZ2VDaGFuZ2V9Pjwvc2xvdD48L2Rpdj5gO1xuICB9XG4gIHJlbmRlckVtcHR5RGlzcGxheSgpIHtcbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGUgPT09IFwic1wiID8gXCIxMlwiIDogdGhpcy5zY2FsZSA9PT0gXCJtXCIgPyBcIjE2XCIgOiBcIjIwXCI7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaW50ZXJuYWxTdmdDb250YWluZXIpfT48c3ZnIGZpbGw9bm9uZSBoZWlnaHQ9JHtzY2FsZX0gdmlld0JveD0ke2AwIDAgJHtzY2FsZX0gJHtzY2FsZX1gfSB3aWR0aD0ke3NjYWxlfSB4bWxucz1odHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zz4ke3N2Z2A8cGF0aCBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaW50ZXJuYWxTdmdFbXB0eSl9IGQ9JHtgTSR7c2NhbGV9IDBMMCAke3NjYWxlfWB9IC8+YH08L3N2Zz48L2Rpdj5gO1xuICB9XG4gIHJlbmRlckRpc2FibGVkRGlzcGxheSgpIHtcbiAgICBjb25zdCBzdmdTbU1kUGF0aCA9IGh0bWxgPHN2ZyBmaWxsPW5vbmUgaGVpZ2h0PTE0IHZpZXdCb3g9XCIwIDAgMTQgMTRcIiB3aWR0aD0xNCB4bWxucz1odHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zz4ke3N2Z2A8cGF0aCBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuaW50ZXJuYWxTdmdEaXNhYmxlZCl9IGQ9XCJNNyAwLjVDMTAuNTg5OSAwLjUgMTMuNSAzLjQxMDE1IDEzLjUgN0MxMy41IDEwLjU4OTkgMTAuNTg5OSAxMy41IDcgMTMuNUMzLjQxMDE1IDEzLjUgMC41IDEwLjU4OTkgMC41IDdDMC41IDMuNDEwMTUgMy40MTAxNSAwLjUgNyAwLjVaTTQuNzg5MDYgMTAuOTE3QzUuNDQyMjEgMTEuMjg2NiA2LjE5NTI5IDExLjUgNyAxMS41QzkuNDg1MjggMTEuNSAxMS41IDkuNDg1MjggMTEuNSA3QzExLjUgNi4xOTUyOSAxMS4yODY2IDUuNDQyMjEgMTAuOTE3IDQuNzg5MDZMNC43ODkwNiAxMC45MTdaTTcgMi41QzQuNTE0NzIgMi41IDIuNSA0LjUxNDcyIDIuNSA3QzIuNSA3Ljk1NjQ0IDIuNzk4MDggOC44NDIzNSAzLjMwNjY0IDkuNTcxMjlMOS41NzEyOSAzLjMwNjY0QzguODQyMzUgMi43OTgwOCA3Ljk1NjQ0IDIuNSA3IDIuNVpcIiAvPmB9PC9zdmc+YDtcbiAgICBjb25zdCBzdmdMZ1BhdGggPSBodG1sYDxzdmcgZmlsbD1ub25lIGhlaWdodD0xOCB2aWV3Qm94PVwiMCAwIDE4IDE4XCIgd2lkdGg9MTggeG1sbnM9aHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmc+JHtzdmdgPHBhdGggY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmludGVybmFsU3ZnRGlzYWJsZWQpfSBkPVwiTTkgMC41QzEzLjY5NDQgMC41IDE3LjUgNC4zMDU1OCAxNy41IDlDMTcuNSAxMy42OTQ0IDEzLjY5NDQgMTcuNSA5IDE3LjVDNC4zMDU1OCAxNy41IDAuNSAxMy42OTQ0IDAuNSA5QzAuNSA0LjMwNTU4IDQuMzA1NTggMC41IDkgMC41Wk01Ljc4MTI1IDE0LjI1ODhDNi43MTgyOCAxNC44MzM3IDcuODE5NDEgMTUuMTY3IDkgMTUuMTY3QzEyLjQwNTggMTUuMTY3IDE1LjE2NyAxMi40MDU4IDE1LjE2NyA5QzE1LjE2NyA3LjgxOTQxIDE0LjgzMzcgNi43MTgyOCAxNC4yNTg4IDUuNzgxMjVMNS43ODEyNSAxNC4yNTg4Wk05IDIuODMzMDFDNS41OTQyNCAyLjgzMzAxIDIuODMzMDEgNS41OTQyNCAyLjgzMzAxIDlDMi44MzMwMSAxMC4zODE3IDMuMjg3MzEgMTEuNjU2NSA0LjA1NDY5IDEyLjY4NDZMMTIuNjg0NiA0LjA1NDY5QzExLjY1NjUgMy4yODczMSAxMC4zODE3IDIuODMzMDEgOSAyLjgzMzAxWlwiIC8+YH08L3N2Zz5gO1xuICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmludGVybmFsU3ZnQ29udGFpbmVyKX0+JHt0aGlzLnNjYWxlID09PSBcImxcIiA/IHN2Z0xnUGF0aCA6IHN2Z1NtTWRQYXRofTwvZGl2PmA7XG4gIH1cbiAgcmVuZGVyU3dhdGNoKCkge1xuICAgIGNvbnN0IHsgaW50ZXJuYWxDb2xvciB9ID0gdGhpcztcbiAgICBjb25zdCBib3JkZXJSYWRpdXMgPSBcIjBcIjtcbiAgICBjb25zdCBpc0VtcHR5ID0gIWludGVybmFsQ29sb3I7XG4gICAgY29uc3QgY29tbW9uU3dhdGNoUHJvcHMgPSB7XG4gICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgcng6IGJvcmRlclJhZGl1cyxcbiAgICAgIHdpZHRoOiBcIjEwMCVcIlxuICAgIH07XG4gICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgIHJldHVybiBzdmdgPGNsaXBQYXRoIGlkPSR7SURTLnNoYXBlfT48cmVjdCBoZWlnaHQ9MTAwJSByeD0ke2JvcmRlclJhZGl1c30gd2lkdGg9MTAwJSAvPjwvY2xpcFBhdGg+JHt0aGlzLnJlbmRlclN3YXRjaFJlY3Qoe1xuICAgICAgICBjbGlwUGF0aDogYGluc2V0KDAgcm91bmQgXCIke2JvcmRlclJhZGl1c31cIilgLFxuICAgICAgICAuLi5jb21tb25Td2F0Y2hQcm9wc1xuICAgICAgfSl9PGxpbmUgY2xpcC1wYXRoPXVybCgjc2hhcGUpIHgxPTEwMCUgeDI9MCB5MT0wIHkyPTEwMCUgLz5gO1xuICAgIH1cbiAgICBjb25zdCBhbHBoYSA9IGludGVybmFsQ29sb3IuYWxwaGEoKTtcbiAgICBjb25zdCBoZXggPSBoZXhpZnkoaW50ZXJuYWxDb2xvcik7XG4gICAgY29uc3QgaGV4YSA9IGhleGlmeShpbnRlcm5hbENvbG9yLCBhbHBoYSA8IDEpO1xuICAgIHJldHVybiBzdmdgPGRlZnM+PHBhdHRlcm4gaGVpZ2h0PSR7Q0hFQ0tFUl9ESU1FTlNJT05TLnNpemV9IGlkPSR7SURTLmNoZWNrZXJ9IHBhdHRlcm5Vbml0cz11c2VyU3BhY2VPblVzZSB3aWR0aD0ke0NIRUNLRVJfRElNRU5TSU9OUy5zaXplfSB4PTAgeT0wPjxyZWN0IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jaGVja2VyKX0gaGVpZ2h0PSR7Q0hFQ0tFUl9ESU1FTlNJT05TLnNxdWFyZVNpemV9IHdpZHRoPSR7Q0hFQ0tFUl9ESU1FTlNJT05TLnNxdWFyZVNpemV9IHg9MCB5PTAgLz48cmVjdCBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY2hlY2tlcil9IGhlaWdodD0ke0NIRUNLRVJfRElNRU5TSU9OUy5zcXVhcmVTaXplfSB3aWR0aD0ke0NIRUNLRVJfRElNRU5TSU9OUy5zcXVhcmVTaXplfSB4PSR7Q0hFQ0tFUl9ESU1FTlNJT05TLnNxdWFyZVNpemV9IHk9JHtDSEVDS0VSX0RJTUVOU0lPTlMuc3F1YXJlU2l6ZX0gLz48L3BhdHRlcm4+PC9kZWZzPiR7dGhpcy5yZW5kZXJTd2F0Y2hSZWN0KHtcbiAgICAgIGZpbGw6IFwidXJsKCNjaGVja2VyKVwiLFxuICAgICAgcng6IGNvbW1vblN3YXRjaFByb3BzLnJ4LFxuICAgICAgaGVpZ2h0OiBjb21tb25Td2F0Y2hQcm9wcy5oZWlnaHQsXG4gICAgICB3aWR0aDogY29tbW9uU3dhdGNoUHJvcHMud2lkdGhcbiAgICB9KX0ke3RoaXMucmVuZGVyU3dhdGNoUmVjdCh7XG4gICAgICBjbGlwUGF0aDogYWxwaGEgPCAxID8gXCJwb2x5Z29uKDEwMCUgMCwgMCAwLCAwIDEwMCUpXCIgOiBgaW5zZXQoMCByb3VuZCBcIiR7Ym9yZGVyUmFkaXVzfVwiKWAsXG4gICAgICBmaWxsOiBoZXgsXG4gICAgICBpZDogSURTLnN3YXRjaFNvbGlkLFxuICAgICAgLi4uY29tbW9uU3dhdGNoUHJvcHNcbiAgICB9KX0ke2FscGhhIDwgMSA/IHRoaXMucmVuZGVyU3dhdGNoUmVjdCh7XG4gICAgICBjbGlwUGF0aDogXCJwb2x5Z29uKDEwMCUgMCwgMTAwJSAxMDAlLCAwIDEwMCUpXCIsXG4gICAgICBmaWxsOiBoZXhhLFxuICAgICAgaWQ6IElEUy5zd2F0Y2hUcmFuc3BhcmVudCxcbiAgICAgIGtleTogXCJvcGFjaXR5LWZpbGxcIixcbiAgICAgIC4uLmNvbW1vblN3YXRjaFByb3BzXG4gICAgfSkgOiBudWxsfWA7XG4gIH1cbiAgcmVuZGVyU3dhdGNoUmVjdCh7IGNsaXBQYXRoLCBmaWxsLCBoZWlnaHQsIGtleSwgcngsIHN0cm9rZSwgc3Ryb2tlV2lkdGgsIHdpZHRoLCBpZCB9KSB7XG4gICAgcmV0dXJuIGtleWVkKGtleSwgc3ZnYDxyZWN0IGNsaXAtcGF0aD0ke2NsaXBQYXRoID8/IG5vdGhpbmd9IGZpbGw9JHtmaWxsID8/IG5vdGhpbmd9IGhlaWdodD0ke2hlaWdodCA/PyBub3RoaW5nfSBpZD0keyhpZCA/IGlkIDogSURTLnN3YXRjaFJlY3QpID8/IG5vdGhpbmd9IHJ4PSR7cnggPz8gbm90aGluZ30gc3Ryb2tlPSR7c3Ryb2tlID8/IG5vdGhpbmd9IHN0cm9rZS13aWR0aD0ke3N0cm9rZVdpZHRoID8/IG5vdGhpbmd9IHdpZHRoPSR7d2lkdGggPz8gbm90aGluZ30gLz5gKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkaXNhYmxlZCB9ID0gdGhpcztcbiAgICBjb25zdCBkaXNhYmxlSW50ZXJhY3Rpb24gPSBkaXNhYmxlZCB8fCAhZGlzYWJsZWQgJiYgIXRoaXMuaW50ZXJhY3RpdmU7XG4gICAgY29uc3Qgcm9sZSA9IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiICYmIHRoaXMuaW50ZXJhY3RpdmUgPyBcImNoZWNrYm94XCIgOiB0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiICYmIHRoaXMuaW50ZXJhY3RpdmUgPyBcInJhZGlvXCIgOiB0aGlzLmludGVyYWN0aXZlID8gXCJidXR0b25cIiA6IFwicHJlc2VudGF0aW9uXCI7XG4gICAgY29uc3QgaXNFbXB0eSA9ICF0aGlzLmludGVybmFsQ29sb3I7XG4gICAgY29uc3QgY2xhc3NlcyA9IHtcbiAgICAgIFtDU1Muc3dhdGNoXTogdHJ1ZSxcbiAgICAgIFtDU1Mubm9Db2xvclN3YXRjaF06IGlzRW1wdHkgfHwgdGhpcy5oYXNJbWFnZSAmJiAhdGhpcy5pbnRlcm5hbENvbG9yXG4gICAgfTtcbiAgICByZXR1cm4gSW50ZXJhY3RpdmVDb250YWluZXIoeyBkaXNhYmxlZCwgY2hpbGRyZW46IGh0bWxgPGRpdiAuYXJpYUNoZWNrZWQ9JHt0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiICYmIHRoaXMuaW50ZXJhY3RpdmUgPyB0aGlzLnNlbGVjdGVkIDogdm9pZCAwfSAuYXJpYUxhYmVsPSR7cm9sZSAhPT0gXCJwcmVzZW50YXRpb25cIiA/IHRoaXMubGFiZWwgOiBcIlwifSBjbGFzcz0ke3NhZmVDbGFzc01hcCh7XG4gICAgICBbQ1NTLmNvbnRhaW5lcl06IHRydWUsXG4gICAgICBbQ1NTLnNlbGVjdGFibGVdOiB0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiLFxuICAgICAgW0NTUy5zZWxlY3RlZF06IHRoaXMuc2VsZWN0ZWQsXG4gICAgICBbQ1NTLm5vbkludGVyYWN0aXZlXTogIXRoaXMuaW50ZXJhY3RpdmVcbiAgICB9KX0gQGNsaWNrPSR7dGhpcy5oYW5kbGVFbWl0dGluZ0V2ZW50fSAucm9sZT0ke3JvbGV9IC50YWJJbmRleD0ke2Rpc2FibGVJbnRlcmFjdGlvbiA/IC0xIDogMH0gdGl0bGU9JHt0aGlzLmxhYmVsID8/IG5vdGhpbmd9ICR7cmVmKHRoaXMuY29udGFpbmVyRWwpfT4ke3RoaXMucmVuZGVyU3dhdGNoSW1hZ2UoKX0keyF0aGlzLmludGVybmFsQ29sb3IgJiYgIXRoaXMuaGFzSW1hZ2UgJiYgdGhpcy5yZW5kZXJFbXB0eURpc3BsYXkoKSB8fCBcIlwifSR7dGhpcy5kaXNhYmxlZCAmJiB0aGlzLnJlbmRlckRpc2FibGVkRGlzcGxheSgpIHx8IFwiXCJ9PHN2ZyBjbGFzcz0ke3NhZmVDbGFzc01hcChjbGFzc2VzKX0gcm9sZT1wcmVzZW50YXRpb24geG1sbnM9aHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmc+JHt0aGlzLnJlbmRlclN3YXRjaCgpfTwvc3ZnPjwvZGl2PmAgfSk7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLXN3YXRjaFwiLCBTd2F0Y2gpO1xuZXhwb3J0IHtcbiAgU3dhdGNoXG59O1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vY3VzdG9tRWxlbWVudC5qc1wiOyIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBDIGFzIENTU19VVElMSVRZLCBjIGFzIGN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IHJlZiB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9yZWYuanNcIjtcbmltcG9ydCB7IGtleWVkIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL2tleWVkLmpzXCI7XG5pbXBvcnQgeyBjIGFzIGNhbGNpdGVTaXplMjQsIGEgYXMgY2FsY2l0ZVNpemUzMiwgYiBhcyBjYWxjaXRlU2l6ZTQ0IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9jb3JlLmpzXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBjcmVhdGVFdmVudCwgc2FmZUNsYXNzTWFwIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBnIGFzIGdldEVsZW1lbnREaXIsIGYgYXMgZmlsdGVyRGlyZWN0Q2hpbGRyZW4sIGQgYXMgZm9jdXNFbGVtZW50SW5Hcm91cCB9IGZyb20gXCIuLi8uLi9jaHVua3MvZG9tLmpzXCI7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZU9ic2VydmVyIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9vYnNlcnZlcnMuanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlVDluIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VUOW4uanNcIjtcbmNvbnN0IElDT04gPSB7XG4gIGNoZXZyb25SaWdodDogXCJjaGV2cm9uLXJpZ2h0XCIsXG4gIGNoZXZyb25MZWZ0OiBcImNoZXZyb24tbGVmdFwiXG59O1xuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGNvbnRhaW5lckhhc0VuZFRhYlRpdGxlT3ZlcmZsb3c6IFwiY29udGFpbmVyLS1lbmQtb3ZlcmZsb3dcIixcbiAgY29udGFpbmVySGFzU3RhcnRUYWJUaXRsZU92ZXJmbG93OiBcImNvbnRhaW5lci0tc3RhcnQtb3ZlcmZsb3dcIixcbiAgc2Nyb2xsQnV0dG9uOiBcInNjcm9sbC1idXR0b25cIixcbiAgc2Nyb2xsQnV0dG9uQ29udGFpbmVyOiBcInNjcm9sbC1idXR0b24tY29udGFpbmVyXCIsXG4gIHNjcm9sbEJhY2t3YXJkQ29udGFpbmVyQnV0dG9uOiBcInNjcm9sbC1idXR0b24tY29udGFpbmVyLS1iYWNrd2FyZFwiLFxuICBzY3JvbGxGb3J3YXJkQ29udGFpbmVyQnV0dG9uOiBcInNjcm9sbC1idXR0b24tY29udGFpbmVyLS1mb3J3YXJkXCIsXG4gIHRhYlRpdGxlU2xvdFdyYXBwZXI6IFwidGFiLXRpdGxlcy1zbG90LXdyYXBwZXJcIixcbiAgc2NhbGU6IChzY2FsZSkgPT4gYHNjYWxlLSR7c2NhbGV9YCxcbiAgcG9zaXRpb246IChwb3NpdGlvbikgPT4gYHBvc2l0aW9uLSR7cG9zaXRpb259YFxufTtcbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1ncmFkaWVudC1zdGFydC1zaWRlOiBsZWZ0Oy0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWdyYWRpZW50LWVuZC1zaWRlOiByaWdodDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXh9Omhvc3QoW2JvcmRlcmVkXSk6bm90KFtzZWxlY3RlZF0pIC5jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXRhYi1iYWNrZ3JvdW5kLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSkpfTpob3N0KFtib3JkZXJlZF0pIGNhbGNpdGUtYnV0dG9uey0tY2FsY2l0ZS1idXR0b24tYm9yZGVyLWNvbG9yOiB2YXIoLS1jYWxjaXRlLXRhYi1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKX0uc2NhbGUtc3stLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1idXR0b24td2lkdGg6IDI0cHg7bWluLWJsb2NrLXNpemU6MS41cmVtfS5zY2FsZS1tey0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWJ1dHRvbi13aWR0aDogMzJweDttaW4tYmxvY2stc2l6ZToycmVtfS5zY2FsZS1sey0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWJ1dHRvbi13aWR0aDogNDRweDttaW4tYmxvY2stc2l6ZToyLjc1cmVtfS5jYWxjaXRlLS1ydGx7LS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtZ3JhZGllbnQtc3RhcnQtc2lkZTogcmlnaHQ7LS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtZ3JhZGllbnQtZW5kLXNpZGU6IGxlZnR9LmNvbnRhaW5lci0tc3RhcnQtb3ZlcmZsb3cgLnRhYi10aXRsZXMtc2xvdC13cmFwcGVye21hc2staW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1ncmFkaWVudC1lbmQtc2lkZSksdHJhbnNwYXJlbnQsdHJhbnNwYXJlbnQgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWJ1dHRvbi13aWR0aCksd2hpdGUgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWJ1dHRvbi13aWR0aCksd2hpdGUgNTElKX0uY29udGFpbmVyLS1lbmQtb3ZlcmZsb3cgLnRhYi10aXRsZXMtc2xvdC13cmFwcGVye21hc2staW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1ncmFkaWVudC1zdGFydC1zaWRlKSx0cmFuc3BhcmVudCx0cmFuc3BhcmVudCB2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtYnV0dG9uLXdpZHRoKSx3aGl0ZSB2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtYnV0dG9uLXdpZHRoKSx3aGl0ZSA1MSUpfS5jb250YWluZXItLXN0YXJ0LW92ZXJmbG93LmNvbnRhaW5lci0tZW5kLW92ZXJmbG93IC50YWItdGl0bGVzLXNsb3Qtd3JhcHBlcnttYXNrLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byB2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtZ3JhZGllbnQtZW5kLXNpZGUpLHRyYW5zcGFyZW50LHRyYW5zcGFyZW50IHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1idXR0b24td2lkdGgpLHdoaXRlIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1idXR0b24td2lkdGgpLHdoaXRlIDUxJSx0cmFuc3BhcmVudCA1MSUpLGxpbmVhci1ncmFkaWVudCh0byB2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtZ3JhZGllbnQtc3RhcnQtc2lkZSksdHJhbnNwYXJlbnQsdHJhbnNwYXJlbnQgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWJ1dHRvbi13aWR0aCksd2hpdGUgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWJ1dHRvbi13aWR0aCksd2hpdGUgNTElLHRyYW5zcGFyZW50IDUxJSl9LmNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXJ7ZGlzcGxheTpub25lOy1tcy1vdmVyZmxvdy1zdHlsZTpub25lO3Njcm9sbGJhci13aWR0aDpub25lfTpob3N0KFtsYXlvdXQ9Y2VudGVyXSkgOjpzbG90dGVkKGNhbGNpdGUtdGFiLXRpdGxlKXtkaXNwbGF5OmZsZXg7ZmxleC1ncm93OjE7ZmxleC1zaHJpbms6MDttaW4taW5saW5lLXNpemU6YXV0bzt3aGl0ZS1zcGFjZTpub3dyYXB9Omhvc3QoW2xheW91dD1jZW50ZXJdKSA6OnNsb3R0ZWQoY2FsY2l0ZS10YWItdGl0bGVbc2VsZWN0ZWRdKXtvdmVyZmxvdzp1bnNldH06aG9zdCg6bm90KFtib3JkZXJlZF0pKSAuc2NhbGUtbHstLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1nYXA6IHZhcigtLWNhbGNpdGUtc3BhY2luZy14eGwpfTpob3N0KDpub3QoW2JvcmRlcmVkXSkpIC5zY2FsZS1tey0tY2FsY2l0ZS1pbnRlcm5hbC10YWItbmF2LWdhcDogdmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXhsKX06aG9zdCg6bm90KFtib3JkZXJlZF0pKSAuc2NhbGUtc3stLWNhbGNpdGUtaW50ZXJuYWwtdGFiLW5hdi1nYXA6IHZhcigtLWNhbGNpdGUtc3BhY2luZy1sZyl9Omhvc3QoOm5vdChbYm9yZGVyZWRdKSkgLnRhYi10aXRsZXMtc2xvdC13cmFwcGVye2dhcDp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1uYXYtZ2FwKX06aG9zdChbbGF5b3V0PWNlbnRlcl06bm90KFtib3JkZXJlZF0pKSAudGFiLXRpdGxlcy1zbG90LXdyYXBwZXJ7cGFkZGluZy1pbmxpbmU6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXhsKX0uY29udGFpbmVyLC50YWItdGl0bGVzLXNsb3Qtd3JhcHBlcntkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6MTAwJTtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDtvdmVyZmxvdzpoaWRkZW47d2hpdGUtc3BhY2U6bm93cmFwfS5zY3JvbGwtYnV0dG9uLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtpbnNldC1ibG9jazowcHh9LnNjcm9sbC1idXR0b24tY29udGFpbmVyIGNhbGNpdGUtYnV0dG9uey0tY2FsY2l0ZS1idXR0b24tdGV4dC1jb2xvcjogdmFyKC0tY2FsY2l0ZS10YWItdGV4dC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpKTstLWNhbGNpdGUtYnV0dG9uLWJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItdHJhbnNwYXJlbnQpOy0tY2FsY2l0ZS1vZmZzZXQtaW52ZXJ0LWZvY3VzOiAxO2Jsb2NrLXNpemU6dmFyKC0tY2FsY2l0ZS1jb250YWluZXItc2l6ZS1jb250ZW50LWZsdWlkKX0uc2Nyb2xsLWJ1dHRvbi1jb250YWluZXIgY2FsY2l0ZS1idXR0b246aG92ZXIgLnNjcm9sbC1idXR0b24tY29udGFpbmVyIGNhbGNpdGUtYnV0dG9uOmZvY3Vzey0tY2FsY2l0ZS1idXR0b24tYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY2FsY2l0ZS1jb2xvci10cmFuc3BhcmVudC1ob3Zlcil9LnNjcm9sbC1idXR0b24tY29udGFpbmVyIGNhbGNpdGUtYnV0dG9uOmFjdGl2ZXstLWNhbGNpdGUtYnV0dG9uLWJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhbGNpdGUtY29sb3ItdHJhbnNwYXJlbnQtcHJlc3MpfS5zY3JvbGwtYnV0dG9uLWNvbnRhaW5lci0tZm9yd2FyZHtpbnNldC1pbmxpbmUtZW5kOjA7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXotaW5kZXgpfS5zY3JvbGwtYnV0dG9uLWNvbnRhaW5lci0tYmFja3dhcmR7aW5zZXQtaW5saW5lLXN0YXJ0OjA7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXotaW5kZXgpfTpob3N0KDpub3QoW2JvcmRlcmVkXSkpIC5zY3JvbGwtYnV0dG9uLWNvbnRhaW5lci0tYmFja3dhcmQ6YmVmb3JlLDpob3N0KDpub3QoW2JvcmRlcmVkXSkpIC5zY3JvbGwtYnV0dG9uLWNvbnRhaW5lci0tZm9yd2FyZDpiZWZvcmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXRhYi1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKTtvcGFjaXR5Oi41O2NvbnRlbnQ6XCJcIjtpbmxpbmUtc2l6ZTp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1zbSk7aW5zZXQtYmxvY2stc3RhcnQ6dmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtbWQpO2luc2V0LWJsb2NrLWVuZDp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCk7cG9zaXRpb246YWJzb2x1dGV9Omhvc3QoOm5vdChbYm9yZGVyZWRdKSkgLnNjcm9sbC1idXR0b24tY29udGFpbmVyLS1iYWNrd2FyZDpiZWZvcmV7aW5zZXQtaW5saW5lLWVuZDowfTpob3N0KDpub3QoW2JvcmRlcmVkXSkpIC5zY3JvbGwtYnV0dG9uLWNvbnRhaW5lci0tZm9yd2FyZDpiZWZvcmV7aW5zZXQtaW5saW5lLXN0YXJ0OjB9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9YDtcbmNsYXNzIFRhYk5hdiBleHRlbmRzIExpdEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZWZmZWN0aXZlRGlyID0gXCJsdHJcIjtcbiAgICB0aGlzLmxhc3RTY3JvbGxXaGVlbEF4aXMgPSBcInhcIjtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVTY3JvbGxpbmdTdGF0ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMubWFrZUZpcnN0VmlzaWJsZVRhYkNsb3NhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVzZVQ5bigpO1xuICAgIHRoaXMuaGFzT3ZlcmZsb3dpbmdFbmRUYWJUaXRsZSA9IGZhbHNlO1xuICAgIHRoaXMuaGFzT3ZlcmZsb3dpbmdTdGFydFRhYlRpdGxlID0gZmFsc2U7XG4gICAgdGhpcy5ib3JkZXJlZCA9IGZhbHNlO1xuICAgIHRoaXMubGF5b3V0ID0gXCJpbmxpbmVcIjtcbiAgICB0aGlzLnBvc2l0aW9uID0gXCJib3R0b21cIjtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5zZWxlY3RlZFRpdGxlID0gbnVsbDtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYkNoYW5nZSA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJOYXZTbG90Q2hhbmdlID0gY3JlYXRlRXZlbnQoKTtcbiAgICB0aGlzLmNhbGNpdGVUYWJDaGFuZ2UgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMubGlzdGVuKFwiY2FsY2l0ZUludGVybmFsVGFic0ZvY3VzUHJldmlvdXNcIiwgdGhpcy5mb2N1c1ByZXZpb3VzVGFiSGFuZGxlcik7XG4gICAgdGhpcy5saXN0ZW4oXCJjYWxjaXRlSW50ZXJuYWxUYWJzRm9jdXNOZXh0XCIsIHRoaXMuZm9jdXNOZXh0VGFiSGFuZGxlcik7XG4gICAgdGhpcy5saXN0ZW4oXCJjYWxjaXRlSW50ZXJuYWxUYWJzRm9jdXNGaXJzdFwiLCB0aGlzLmZvY3VzRmlyc3RUYWJIYW5kbGVyKTtcbiAgICB0aGlzLmxpc3RlbihcImNhbGNpdGVJbnRlcm5hbFRhYnNGb2N1c0xhc3RcIiwgdGhpcy5mb2N1c0xhc3RUYWJIYW5kbGVyKTtcbiAgICB0aGlzLmxpc3RlbihcImNhbGNpdGVJbnRlcm5hbFRhYnNBY3RpdmF0ZVwiLCB0aGlzLmludGVybmFsQWN0aXZhdGVUYWJIYW5kbGVyKTtcbiAgICB0aGlzLmxpc3RlbihcImNhbGNpdGVJbnRlcm5hbFRhYnNDbG9zZVwiLCB0aGlzLmludGVybmFsQ2xvc2VUYWJIYW5kbGVyKTtcbiAgICB0aGlzLmxpc3RlbihcImNhbGNpdGVJbnRlcm5hbFRhYlRpdGxlUmVnaXN0ZXJcIiwgdGhpcy51cGRhdGVUYWJUaXRsZXMpO1xuICAgIHRoaXMubGlzdGVuT24oZG9jdW1lbnQuYm9keSwgXCJjYWxjaXRlSW50ZXJuYWxUYWJDaGFuZ2VcIiwgdGhpcy5nbG9iYWxJbnRlcm5hbFRhYkNoYW5nZUhhbmRsZXIpO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBoYXNPdmVyZmxvd2luZ0VuZFRhYlRpdGxlOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBoYXNPdmVyZmxvd2luZ1N0YXJ0VGFiVGl0bGU6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIHNlbGVjdGVkVGFiSWQ6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIGJvcmRlcmVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgbGF5b3V0OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgbWVzc2FnZU92ZXJyaWRlczogWzAsIHt9LCB7IGF0dHJpYnV0ZTogZmFsc2UgfV0sIHBvc2l0aW9uOiAxLCBzY2FsZTogMSwgc2VsZWN0ZWRUaXRsZTogWzAsIHt9LCB7IGF0dHJpYnV0ZTogZmFsc2UgfV0sIHN0b3JhZ2VJZDogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIHN5bmNJZDogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0gfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5wYXJlbnRUYWJzRWwgPSB0aGlzLmVsLmNsb3Nlc3QoXCJjYWxjaXRlLXRhYnNcIik7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgfVxuICBhc3luYyBsb2FkKCkge1xuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSBgY2FsY2l0ZS10YWItbmF2LSR7dGhpcy5zdG9yYWdlSWR9YDtcbiAgICBpZiAobG9jYWxTdG9yYWdlICYmIHRoaXMuc3RvcmFnZUlkICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkpKSB7XG4gICAgICBjb25zdCBzdG9yZWRUYWIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkpKTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZCA9IHN0b3JlZFRhYjtcbiAgICB9XG4gIH1cbiAgd2lsbFVwZGF0ZShjaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwic2VsZWN0ZWRUaXRsZVwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuc2VsZWN0ZWRUaXRsZSAhPT0gbnVsbCkpIHtcbiAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFiQ2hhbmdlLmVtaXQoe1xuICAgICAgICB0YWI6IHRoaXMuc2VsZWN0ZWRUYWJJZFxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmhhcyhcInNlbGVjdGVkVGFiSWRcIikpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZENoYW5nZWQoKTtcbiAgICB9XG4gICAgY29uc3QgeyBwYXJlbnRUYWJzRWwgfSA9IHRoaXM7XG4gICAgdGhpcy5sYXlvdXQgPSBwYXJlbnRUYWJzRWw/LmxheW91dDtcbiAgICB0aGlzLmJvcmRlcmVkID0gcGFyZW50VGFic0VsPy5ib3JkZXJlZDtcbiAgICB0aGlzLmVmZmVjdGl2ZURpciA9IGdldEVsZW1lbnREaXIodGhpcy5lbCk7XG4gIH1cbiAgbG9hZGVkKCkge1xuICAgIHRoaXMuc2Nyb2xsVGFiVGl0bGVJbnRvVmlldyh0aGlzLnNlbGVjdGVkVGl0bGUsIFwiaW5zdGFudFwiKTtcbiAgICBpZiAodGhpcy50YWJUaXRsZXMubGVuZ3RoICYmIHRoaXMudGFiVGl0bGVzLmV2ZXJ5KCh0aXRsZSkgPT4gIXRpdGxlLnNlbGVjdGVkKSAmJiAhdGhpcy5zZWxlY3RlZFRhYklkKSB7XG4gICAgICB0aGlzLnRhYlRpdGxlc1swXS5nZXRUYWJJZGVudGlmaWVyKCkudGhlbigodGFiKSA9PiB7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFiQ2hhbmdlLmVtaXQoe1xuICAgICAgICAgIHRhYlxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuICBnZXQgZW5hYmxlZFRhYlRpdGxlcygpIHtcbiAgICByZXR1cm4gZmlsdGVyRGlyZWN0Q2hpbGRyZW4odGhpcy5lbCwgXCJjYWxjaXRlLXRhYi10aXRsZTpub3QoW2Rpc2FibGVkXSlcIikuZmlsdGVyKCh0YWJUaXRsZSkgPT4gIXRhYlRpdGxlLmNsb3NlZCk7XG4gIH1cbiAgZ2V0IHNjcm9sbGVyQnV0dG9uV2lkdGgoKSB7XG4gICAgY29uc3QgeyBzY2FsZSB9ID0gdGhpcztcbiAgICByZXR1cm4gcGFyc2VJbnQoc2NhbGUgPT09IFwic1wiID8gY2FsY2l0ZVNpemUyNCA6IHNjYWxlID09PSBcIm1cIiA/IGNhbGNpdGVTaXplMzIgOiBjYWxjaXRlU2l6ZTQ0KTtcbiAgfVxuICBnZXQgdGFiVGl0bGVzKCkge1xuICAgIHJldHVybiBmaWx0ZXJEaXJlY3RDaGlsZHJlbih0aGlzLmVsLCBcImNhbGNpdGUtdGFiLXRpdGxlXCIpO1xuICB9XG4gIGZvY3VzUHJldmlvdXNUYWJIYW5kbGVyKGV2ZW50KSB7XG4gICAgdGhpcy5oYW5kbGVUYWJGb2N1cyhldmVudCwgZXZlbnQudGFyZ2V0LCBcInByZXZpb3VzXCIpO1xuICB9XG4gIGZvY3VzTmV4dFRhYkhhbmRsZXIoZXZlbnQpIHtcbiAgICB0aGlzLmhhbmRsZVRhYkZvY3VzKGV2ZW50LCBldmVudC50YXJnZXQsIFwibmV4dFwiKTtcbiAgfVxuICBmb2N1c0ZpcnN0VGFiSGFuZGxlcihldmVudCkge1xuICAgIHRoaXMuaGFuZGxlVGFiRm9jdXMoZXZlbnQsIGV2ZW50LnRhcmdldCwgXCJmaXJzdFwiKTtcbiAgfVxuICBmb2N1c0xhc3RUYWJIYW5kbGVyKGV2ZW50KSB7XG4gICAgdGhpcy5oYW5kbGVUYWJGb2N1cyhldmVudCwgZXZlbnQudGFyZ2V0LCBcImxhc3RcIik7XG4gIH1cbiAgaW50ZXJuYWxBY3RpdmF0ZVRhYkhhbmRsZXIoZXZlbnQpIHtcbiAgICBjb25zdCBhY3RpdmF0ZWRUYWJUaXRsZSA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRUYWJUaXRsZSA9IHRoaXMuc2VsZWN0ZWRUaXRsZTtcbiAgICB0aGlzLnNlbGVjdGVkVGFiSWQgPSBldmVudC5kZXRhaWwudGFiID8gZXZlbnQuZGV0YWlsLnRhYiA6IHRoaXMuZ2V0SW5kZXhPZlRhYlRpdGxlKGFjdGl2YXRlZFRhYlRpdGxlKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnNlbGVjdGVkVGl0bGUgPSBhY3RpdmF0ZWRUYWJUaXRsZTtcbiAgICBpZiAoY3VycmVudFNlbGVjdGVkVGFiVGl0bGU/LmlkICE9PSBhY3RpdmF0ZWRUYWJUaXRsZS5pZCAmJiBldmVudC5kZXRhaWwudXNlclRyaWdnZXJlZCkge1xuICAgICAgdGhpcy5jYWxjaXRlVGFiQ2hhbmdlLmVtaXQoKTtcbiAgICB9XG4gICAgdGhpcy5zY3JvbGxUYWJUaXRsZUludG9WaWV3KGFjdGl2YXRlZFRhYlRpdGxlKTtcbiAgfVxuICBzY3JvbGxUYWJUaXRsZUludG9WaWV3KGFjdGl2YXRlZFRhYlRpdGxlLCBiZWhhdmlvciA9IFwic21vb3RoXCIpIHtcbiAgICBpZiAoIWFjdGl2YXRlZFRhYlRpdGxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBjb25zdCBpc0xUUiA9IHRoaXMuZWZmZWN0aXZlRGlyID09PSBcImx0clwiO1xuICAgICAgY29uc3QgdGFiVGl0bGVDb250YWluZXIgPSB0aGlzLnRhYlRpdGxlQ29udGFpbmVyRWw7XG4gICAgICBjb25zdCBjb250YWluZXJCb3VuZHMgPSB0YWJUaXRsZUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGNvbnN0IHRhYlRpdGxlQm91bmRzID0gYWN0aXZhdGVkVGFiVGl0bGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRhYlRpdGxlQ29udGFpbmVyLnNjcm9sbExlZnQ7XG4gICAgICBjb25zdCBvdmVyZmxvd2luZ1N0YXJ0VGFiVGl0bGUgPSBpc0xUUiA/IHRoaXMuaGFzT3ZlcmZsb3dpbmdTdGFydFRhYlRpdGxlIDogdGhpcy5oYXNPdmVyZmxvd2luZ0VuZFRhYlRpdGxlO1xuICAgICAgY29uc3Qgb3ZlcmZsb3dpbmdFbmRUYWJUaXRsZSA9IGlzTFRSID8gdGhpcy5oYXNPdmVyZmxvd2luZ0VuZFRhYlRpdGxlIDogdGhpcy5oYXNPdmVyZmxvd2luZ1N0YXJ0VGFiVGl0bGU7XG4gICAgICBpZiAodGFiVGl0bGVCb3VuZHMubGVmdCA8IGNvbnRhaW5lckJvdW5kcy5sZWZ0ICsgKG92ZXJmbG93aW5nU3RhcnRUYWJUaXRsZSA/IHRoaXMuc2Nyb2xsZXJCdXR0b25XaWR0aCA6IDApKSB7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBzY3JvbGxQb3NpdGlvbiArICh0YWJUaXRsZUJvdW5kcy5sZWZ0IC0gY29udGFpbmVyQm91bmRzLmxlZnQpIC0gdGhpcy5zY3JvbGxlckJ1dHRvbldpZHRoO1xuICAgICAgICB0YWJUaXRsZUNvbnRhaW5lci5zY3JvbGxUbyh7IGxlZnQsIGJlaGF2aW9yIH0pO1xuICAgICAgfSBlbHNlIGlmICh0YWJUaXRsZUJvdW5kcy5yaWdodCA+IGNvbnRhaW5lckJvdW5kcy5yaWdodCAtIChvdmVyZmxvd2luZ0VuZFRhYlRpdGxlID8gdGhpcy5zY3JvbGxlckJ1dHRvbldpZHRoIDogMCkpIHtcbiAgICAgICAgY29uc3QgbGVmdCA9IHNjcm9sbFBvc2l0aW9uICsgKHRhYlRpdGxlQm91bmRzLnJpZ2h0IC0gY29udGFpbmVyQm91bmRzLnJpZ2h0KSArIHRoaXMuc2Nyb2xsZXJCdXR0b25XaWR0aDtcbiAgICAgICAgdGFiVGl0bGVDb250YWluZXIuc2Nyb2xsVG8oeyBsZWZ0LCBiZWhhdmlvciB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpbnRlcm5hbENsb3NlVGFiSGFuZGxlcihldmVudCkge1xuICAgIGNvbnN0IGNsb3NlZFRhYlRpdGxlRWwgPSBldmVudC50YXJnZXQ7XG4gICAgdGhpcy5oYW5kbGVUYWJUaXRsZUNsb3NlKGNsb3NlZFRhYlRpdGxlRWwpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVRhYlRpdGxlcyhldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuc2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJZCA9IGV2ZW50LmRldGFpbDtcbiAgICAgIHRoaXMuc2VsZWN0ZWRUaXRsZSA9IGF3YWl0IHRoaXMuZ2V0VGFiVGl0bGVCeUlkKHRoaXMuc2VsZWN0ZWRUYWJJZCk7XG4gICAgfVxuICB9XG4gIGdsb2JhbEludGVybmFsVGFiQ2hhbmdlSGFuZGxlcihldmVudCkge1xuICAgIGlmICh0aGlzLnN5bmNJZCAmJiBldmVudC50YXJnZXQgIT09IHRoaXMuZWwgJiYgZXZlbnQudGFyZ2V0LnN5bmNJZCA9PT0gdGhpcy5zeW5jSWQgJiYgdGhpcy5zZWxlY3RlZFRhYklkICE9PSBldmVudC5kZXRhaWwudGFiKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVGFiSWQgPSBldmVudC5kZXRhaWwudGFiO1xuICAgIH1cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuICBhc3luYyBzZWxlY3RlZFRhYklkQ2hhbmdlZCgpIHtcbiAgICBhd2FpdCB0aGlzLmNvbXBvbmVudE9uUmVhZHkoKTtcbiAgICBpZiAobG9jYWxTdG9yYWdlICYmIHRoaXMuc3RvcmFnZUlkICYmIHRoaXMuc2VsZWN0ZWRUYWJJZCAhPT0gdm9pZCAwICYmIHRoaXMuc2VsZWN0ZWRUYWJJZCAhPT0gbnVsbCkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGNhbGNpdGUtdGFiLW5hdi0ke3RoaXMuc3RvcmFnZUlkfWAsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWRUYWJJZCkpO1xuICAgIH1cbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYkNoYW5nZS5lbWl0KHtcbiAgICAgIHRhYjogdGhpcy5zZWxlY3RlZFRhYklkXG4gICAgfSk7XG4gIH1cbiAgb25UYWJUaXRsZVdoZWVsKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB7IGRlbHRhWCwgZGVsdGFZIH0gPSBldmVudDtcbiAgICBjb25zdCB4ID0gTWF0aC5hYnMoZGVsdGFYKTtcbiAgICBjb25zdCB5ID0gTWF0aC5hYnMoZGVsdGFZKTtcbiAgICBsZXQgc2Nyb2xsQnk7XG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgIHNjcm9sbEJ5ID0gdGhpcy5sYXN0U2Nyb2xsV2hlZWxBeGlzID09PSBcInhcIiA/IGRlbHRhWCA6IGRlbHRhWTtcbiAgICB9IGVsc2UgaWYgKHggPiB5KSB7XG4gICAgICBzY3JvbGxCeSA9IGRlbHRhWDtcbiAgICAgIHRoaXMubGFzdFNjcm9sbFdoZWVsQXhpcyA9IFwieFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY3JvbGxCeSA9IGRlbHRhWTtcbiAgICAgIHRoaXMubGFzdFNjcm9sbFdoZWVsQXhpcyA9IFwieVwiO1xuICAgIH1cbiAgICBjb25zdCBzY3JvbGxCeVggPSAodGhpcy5lZmZlY3RpdmVEaXIgPT09IFwicnRsXCIgPyAtMSA6IDEpICogc2Nyb2xsQnk7XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5zY3JvbGxCeShzY3JvbGxCeVgsIDApO1xuICB9XG4gIG9uU2xvdENoYW5nZSgpIHtcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgY29uc3QgdGFiVGl0bGVzID0gdGhpcy50YWJUaXRsZXM7XG4gICAgdGFiVGl0bGVzLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5vYnNlcnZlKGNoaWxkKTtcbiAgICB9KTtcbiAgICBjb25zdCB2aXNpYmxlVGFiVGl0bGVzSW5kaWNlcyA9IHRoaXMuZ2V0VmlzaWJsZVRhYlRpdGxlc0luZGljZXModGFiVGl0bGVzKTtcbiAgICBjb25zdCB0b3RhbFZpc2libGVUYWJUaXRsZXMgPSB2aXNpYmxlVGFiVGl0bGVzSW5kaWNlcy5sZW5ndGg7XG4gICAgaWYgKHRvdGFsVmlzaWJsZVRhYlRpdGxlcyA+IDEgJiYgdGhpcy5tYWtlRmlyc3RWaXNpYmxlVGFiQ2xvc2FibGUpIHtcbiAgICAgIHRhYlRpdGxlc1t2aXNpYmxlVGFiVGl0bGVzSW5kaWNlc1swXV0uY2xvc2FibGUgPSB0cnVlO1xuICAgICAgdGhpcy5tYWtlRmlyc3RWaXNpYmxlVGFiQ2xvc2FibGUgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJOYXZTbG90Q2hhbmdlLmVtaXQodGFiVGl0bGVzKTtcbiAgfVxuICBzdG9yZVRhYlRpdGxlV3JhcHBlclJlZihlbCkge1xuICAgIGlmICghZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy50YWJUaXRsZUNvbnRhaW5lckVsID0gZWw7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwiaW50ZXJzZWN0aW9uXCIsICgpID0+IHRoaXMudXBkYXRlU2Nyb2xsaW5nU3RhdGUoKSwge1xuICAgICAgcm9vdDogZWwsXG4gICAgICB0aHJlc2hvbGQ6IFswLCAwLjUsIDFdXG4gICAgfSk7XG4gIH1cbiAgdXBkYXRlU2Nyb2xsaW5nU3RhdGUoKSB7XG4gICAgY29uc3QgdGFiVGl0bGVDb250YWluZXIgPSB0aGlzLnRhYlRpdGxlQ29udGFpbmVyRWw7XG4gICAgaWYgKCF0YWJUaXRsZUNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgaXNPdmVyZmxvd1N0YXJ0O1xuICAgIGxldCBpc092ZXJmbG93RW5kO1xuICAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gdGFiVGl0bGVDb250YWluZXIuc2Nyb2xsTGVmdDtcbiAgICBjb25zdCB2aXNpYmxlV2lkdGggPSB0YWJUaXRsZUNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICBjb25zdCB0b3RhbENvbnRlbnRXaWR0aCA9IHRhYlRpdGxlQ29udGFpbmVyLnNjcm9sbFdpZHRoO1xuICAgIGlmICh0aGlzLmVmZmVjdGl2ZURpciA9PT0gXCJsdHJcIikge1xuICAgICAgaXNPdmVyZmxvd1N0YXJ0ID0gc2Nyb2xsUG9zaXRpb24gPiAwO1xuICAgICAgaXNPdmVyZmxvd0VuZCA9IHNjcm9sbFBvc2l0aW9uICsgdmlzaWJsZVdpZHRoIDwgdG90YWxDb250ZW50V2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlzT3ZlcmZsb3dTdGFydCA9IHNjcm9sbFBvc2l0aW9uIDwgMDtcbiAgICAgIGlzT3ZlcmZsb3dFbmQgPSBzY3JvbGxQb3NpdGlvbiAhPT0gLSh0b3RhbENvbnRlbnRXaWR0aCAtIHZpc2libGVXaWR0aCk7XG4gICAgfVxuICAgIHRoaXMuaGFzT3ZlcmZsb3dpbmdTdGFydFRhYlRpdGxlID0gaXNPdmVyZmxvd1N0YXJ0O1xuICAgIHRoaXMuaGFzT3ZlcmZsb3dpbmdFbmRUYWJUaXRsZSA9IGlzT3ZlcmZsb3dFbmQ7XG4gIH1cbiAgc2Nyb2xsVG9UYWJUaXRsZXMoZGlyZWN0aW9uKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGNvbnN0IHRhYlRpdGxlQ29udGFpbmVyID0gdGhpcy50YWJUaXRsZUNvbnRhaW5lckVsO1xuICAgICAgY29uc3QgY29udGFpbmVyQm91bmRzID0gdGFiVGl0bGVDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCB0YWJUaXRsZXMgPSBBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtdGFiLXRpdGxlXCIpKTtcbiAgICAgIGNvbnN0IHsgZWZmZWN0aXZlRGlyIH0gPSB0aGlzO1xuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJmb3J3YXJkXCIpIHtcbiAgICAgICAgdGFiVGl0bGVzLnJldmVyc2UoKTtcbiAgICAgIH1cbiAgICAgIGxldCBjbG9zZXN0VG9FZGdlID0gbnVsbDtcbiAgICAgIHRhYlRpdGxlcy5mb3JFYWNoKCh0YWJUaXRsZSkgPT4ge1xuICAgICAgICBjb25zdCB0YWJUaXRsZUJvdW5kcyA9IHRhYlRpdGxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBjb250YWluZXJFbmRYID0gY29udGFpbmVyQm91bmRzLnggKyBjb250YWluZXJCb3VuZHMud2lkdGg7XG4gICAgICAgIGNvbnN0IHRhYlRpdGxlRW5kWCA9IHRhYlRpdGxlQm91bmRzLnggKyB0YWJUaXRsZUJvdW5kcy53aWR0aDtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJmb3J3YXJkXCIgJiYgZWZmZWN0aXZlRGlyID09PSBcImx0clwiIHx8IGRpcmVjdGlvbiA9PT0gXCJiYWNrd2FyZFwiICYmIGVmZmVjdGl2ZURpciA9PT0gXCJydGxcIikge1xuICAgICAgICAgIGNvbnN0IGFmdGVyQ29udGFpbmVyRW5kID0gdGFiVGl0bGVCb3VuZHMueCA+IGNvbnRhaW5lckVuZFg7XG4gICAgICAgICAgaWYgKGFmdGVyQ29udGFpbmVyRW5kKSB7XG4gICAgICAgICAgICBjbG9zZXN0VG9FZGdlID0gdGFiVGl0bGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNyb3NzaW5nQ29udGFpbmVyRW5kID0gdGFiVGl0bGVFbmRYID4gY29udGFpbmVyRW5kWCAmJiB0YWJUaXRsZUJvdW5kcy54ID4gY29udGFpbmVyQm91bmRzLng7XG4gICAgICAgICAgICBpZiAoY3Jvc3NpbmdDb250YWluZXJFbmQpIHtcbiAgICAgICAgICAgICAgY2xvc2VzdFRvRWRnZSA9IHRhYlRpdGxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBiZWZvcmVDb250YWluZXJTdGFydCA9IHRhYlRpdGxlRW5kWCA8IGNvbnRhaW5lckJvdW5kcy54O1xuICAgICAgICAgIGlmIChiZWZvcmVDb250YWluZXJTdGFydCkge1xuICAgICAgICAgICAgY2xvc2VzdFRvRWRnZSA9IHRhYlRpdGxlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjcm9zc2luZ0NvbnRhaW5lclN0YXJ0ID0gdGFiVGl0bGVFbmRYIDwgY29udGFpbmVyRW5kWCAmJiB0YWJUaXRsZUJvdW5kcy54IDwgY29udGFpbmVyQm91bmRzLng7XG4gICAgICAgICAgICBpZiAoY3Jvc3NpbmdDb250YWluZXJTdGFydCkge1xuICAgICAgICAgICAgICBjbG9zZXN0VG9FZGdlID0gdGFiVGl0bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChjbG9zZXN0VG9FZGdlKSB7XG4gICAgICAgIGNvbnN0IHsgc2Nyb2xsZXJCdXR0b25XaWR0aCB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qgb2Zmc2V0QWRqdXN0bWVudCA9IGRpcmVjdGlvbiA9PT0gXCJmb3J3YXJkXCIgJiYgZWZmZWN0aXZlRGlyID09PSBcImx0clwiIHx8IGRpcmVjdGlvbiA9PT0gXCJiYWNrd2FyZFwiICYmIGVmZmVjdGl2ZURpciA9PT0gXCJydGxcIiA/IC1zY3JvbGxlckJ1dHRvbldpZHRoIDogY2xvc2VzdFRvRWRnZS5vZmZzZXRXaWR0aCAtIHRhYlRpdGxlQ29udGFpbmVyLmNsaWVudFdpZHRoICsgc2Nyb2xsZXJCdXR0b25XaWR0aDtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG8gPSBjbG9zZXN0VG9FZGdlLm9mZnNldExlZnQgKyBvZmZzZXRBZGp1c3RtZW50O1xuICAgICAgICB0YWJUaXRsZUNvbnRhaW5lci5zY3JvbGxUbyh7XG4gICAgICAgICAgbGVmdDogc2Nyb2xsVG8sXG4gICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgc2Nyb2xsVG9OZXh0VGFiVGl0bGVzKCkge1xuICAgIHRoaXMuc2Nyb2xsVG9UYWJUaXRsZXMoXCJmb3J3YXJkXCIpO1xuICB9XG4gIHNjcm9sbFRvUHJldmlvdXNUYWJUaXRsZXMoKSB7XG4gICAgdGhpcy5zY3JvbGxUb1RhYlRpdGxlcyhcImJhY2t3YXJkXCIpO1xuICB9XG4gIGhhbmRsZVRhYkZvY3VzKGV2ZW50LCBlbCwgZGVzdGluYXRpb24pIHtcbiAgICBjb25zdCBmb2N1c2VkID0gZm9jdXNFbGVtZW50SW5Hcm91cCh0aGlzLmVuYWJsZWRUYWJUaXRsZXMsIGVsLCBkZXN0aW5hdGlvbik7XG4gICAgdGhpcy5zY3JvbGxUYWJUaXRsZUludG9WaWV3KGZvY3VzZWQsIFwiaW5zdGFudFwiKTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuICBnZXRJbmRleE9mVGFiVGl0bGUoZWwsIHRhYlRpdGxlcyA9IHRoaXMudGFiVGl0bGVzKSB7XG4gICAgcmV0dXJuIHRhYlRpdGxlcy5pbmRleE9mKGVsKTtcbiAgfVxuICBvblRhYlRpdGxlU2Nyb2xsKCkge1xuICAgIHRoaXMudXBkYXRlU2Nyb2xsaW5nU3RhdGUoKTtcbiAgfVxuICBhc3luYyBnZXRUYWJUaXRsZUJ5SWQoaWQpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy50YWJUaXRsZXMubWFwKChlbCkgPT4gZWwuZ2V0VGFiSWRlbnRpZmllcigpKSkudGhlbigoaWRzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy50YWJUaXRsZXNbaWRzLmluZGV4T2YoaWQpXTtcbiAgICB9KTtcbiAgfVxuICBnZXRWaXNpYmxlVGFiVGl0bGVzSW5kaWNlcyh0YWJUaXRsZXMpIHtcbiAgICByZXR1cm4gdGFiVGl0bGVzLnJlZHVjZSgodGFiVGl0bGVJbmRpY2VzLCB0YWJUaXRsZSwgaW5kZXgpID0+ICF0YWJUaXRsZS5jbG9zZWQgPyBbLi4udGFiVGl0bGVJbmRpY2VzLCBpbmRleF0gOiB0YWJUaXRsZUluZGljZXMsIFtdKTtcbiAgfVxuICBoYW5kbGVUYWJUaXRsZUNsb3NlKGNsb3NlZFRhYlRpdGxlRWwpIHtcbiAgICBjb25zdCB7IHRhYlRpdGxlcyB9ID0gdGhpcztcbiAgICBjb25zdCBzZWxlY3Rpb25Nb2RpZmllZCA9IGNsb3NlZFRhYlRpdGxlRWwuc2VsZWN0ZWQ7XG4gICAgY29uc3QgdmlzaWJsZVRhYlRpdGxlc0luZGljZXMgPSB0aGlzLmdldFZpc2libGVUYWJUaXRsZXNJbmRpY2VzKHRhYlRpdGxlcyk7XG4gICAgY29uc3QgdG90YWxWaXNpYmxlVGFiVGl0bGVzID0gdmlzaWJsZVRhYlRpdGxlc0luZGljZXMubGVuZ3RoO1xuICAgIGlmICh0b3RhbFZpc2libGVUYWJUaXRsZXMgPT09IDEgJiYgdGFiVGl0bGVzW3Zpc2libGVUYWJUaXRsZXNJbmRpY2VzWzBdXS5jbG9zYWJsZSkge1xuICAgICAgdGhpcy5tYWtlRmlyc3RWaXNpYmxlVGFiQ2xvc2FibGUgPSB0cnVlO1xuICAgICAgdGFiVGl0bGVzW3Zpc2libGVUYWJUaXRsZXNJbmRpY2VzWzBdXS5jbG9zYWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5zZWxlY3RlZFRhYklkID0gdmlzaWJsZVRhYlRpdGxlc0luZGljZXNbMF07XG4gICAgICBpZiAoc2VsZWN0aW9uTW9kaWZpZWQpIHtcbiAgICAgICAgdGFiVGl0bGVzW3Zpc2libGVUYWJUaXRsZXNJbmRpY2VzWzBdXS5hY3RpdmF0ZVRhYigpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodG90YWxWaXNpYmxlVGFiVGl0bGVzID4gMSkge1xuICAgICAgY29uc3QgY2xvc2VkVGFiVGl0bGVJbmRleCA9IHRhYlRpdGxlcy5maW5kSW5kZXgoKGVsKSA9PiBlbCA9PT0gY2xvc2VkVGFiVGl0bGVFbCk7XG4gICAgICBjb25zdCBuZXh0VGFiVGl0bGVJbmRleCA9IHZpc2libGVUYWJUaXRsZXNJbmRpY2VzLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZSA+IGNsb3NlZFRhYlRpdGxlSW5kZXgpO1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWJJZCA9PT0gY2xvc2VkVGFiVGl0bGVJbmRleCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGFiSWQgPSBuZXh0VGFiVGl0bGVJbmRleCA/IG5leHRUYWJUaXRsZUluZGV4IDogdG90YWxWaXNpYmxlVGFiVGl0bGVzIC0gMTtcbiAgICAgICAgdGFiVGl0bGVzW3RoaXMuc2VsZWN0ZWRUYWJJZF0uYWN0aXZhdGVUYWIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRhYlRpdGxlc1t0aGlzLnNlbGVjdGVkVGFiSWRdLmZvY3VzKCk7XG4gICAgfSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHRoaXMuZWwucm9sZSA9IFwidGFibGlzdFwiO1xuICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoe1xuICAgICAgW0NTUy5jb250YWluZXJdOiB0cnVlLFxuICAgICAgW0NTUy5jb250YWluZXJIYXNTdGFydFRhYlRpdGxlT3ZlcmZsb3ddOiAhIXRoaXMuaGFzT3ZlcmZsb3dpbmdTdGFydFRhYlRpdGxlLFxuICAgICAgW0NTUy5jb250YWluZXJIYXNFbmRUYWJUaXRsZU92ZXJmbG93XTogISF0aGlzLmhhc092ZXJmbG93aW5nRW5kVGFiVGl0bGUsXG4gICAgICBbQ1NTLnNjYWxlKHRoaXMuc2NhbGUpXTogdHJ1ZSxcbiAgICAgIFtDU1MucG9zaXRpb24odGhpcy5wb3NpdGlvbildOiB0cnVlLFxuICAgICAgW0NTU19VVElMSVRZLnJ0bF06IHRoaXMuZWZmZWN0aXZlRGlyID09PSBcInJ0bFwiXG4gICAgfSl9PiR7dGhpcy5yZW5kZXJTY3JvbGxCdXR0b24oXCJzdGFydFwiKX08ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKHtcbiAgICAgIFtDU1MudGFiVGl0bGVTbG90V3JhcHBlcl06IHRydWVcbiAgICB9KX0gQHNjcm9sbD0ke3RoaXMub25UYWJUaXRsZVNjcm9sbH0gQHdoZWVsPSR7dGhpcy5vblRhYlRpdGxlV2hlZWx9ICR7cmVmKHRoaXMuc3RvcmVUYWJUaXRsZVdyYXBwZXJSZWYpfT48c2xvdCBAc2xvdGNoYW5nZT0ke3RoaXMub25TbG90Q2hhbmdlfT48L3Nsb3Q+PC9kaXY+JHt0aGlzLnJlbmRlclNjcm9sbEJ1dHRvbihcImVuZFwiKX08L2Rpdj5gO1xuICB9XG4gIHJlbmRlclNjcm9sbEJ1dHRvbihvdmVyZmxvd0RpcmVjdGlvbikge1xuICAgIGNvbnN0IHsgYm9yZGVyZWQsIG1lc3NhZ2VzLCBoYXNPdmVyZmxvd2luZ1N0YXJ0VGFiVGl0bGUsIGhhc092ZXJmbG93aW5nRW5kVGFiVGl0bGUsIHNjYWxlIH0gPSB0aGlzO1xuICAgIGNvbnN0IGlzRW5kID0gb3ZlcmZsb3dEaXJlY3Rpb24gPT09IFwiZW5kXCI7XG4gICAgcmV0dXJuIGtleWVkKG92ZXJmbG93RGlyZWN0aW9uLCBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoe1xuICAgICAgW0NTUy5zY3JvbGxCdXR0b25Db250YWluZXJdOiB0cnVlLFxuICAgICAgW0NTUy5zY3JvbGxCYWNrd2FyZENvbnRhaW5lckJ1dHRvbl06ICFpc0VuZCxcbiAgICAgIFtDU1Muc2Nyb2xsRm9yd2FyZENvbnRhaW5lckJ1dHRvbl06IGlzRW5kXG4gICAgfSl9IC5oaWRkZW49JHtpc0VuZCAmJiAhaGFzT3ZlcmZsb3dpbmdFbmRUYWJUaXRsZSB8fCAhaXNFbmQgJiYgIWhhc092ZXJmbG93aW5nU3RhcnRUYWJUaXRsZX0+PGNhbGNpdGUtYnV0dG9uIC5hcHBlYXJhbmNlPSR7Ym9yZGVyZWQgPyBcIm91dGxpbmUtZmlsbFwiIDogXCJ0cmFuc3BhcmVudFwifSAuYXJpYUxhYmVsPSR7aXNFbmQgPyBtZXNzYWdlcy5uZXh0VGFiVGl0bGVzIDogbWVzc2FnZXMucHJldmlvdXNUYWJUaXRsZXN9IGNsYXNzPSR7c2FmZUNsYXNzTWFwKHtcbiAgICAgIFtDU1Muc2Nyb2xsQnV0dG9uXTogdHJ1ZVxuICAgIH0pfSBpY29uLWZsaXAtcnRsPWJvdGggLmljb25TdGFydD0ke2lzRW5kID8gSUNPTi5jaGV2cm9uUmlnaHQgOiBJQ09OLmNoZXZyb25MZWZ0fSBraW5kPW5ldXRyYWwgQGNsaWNrPSR7aXNFbmQgPyB0aGlzLnNjcm9sbFRvTmV4dFRhYlRpdGxlcyA6IHRoaXMuc2Nyb2xsVG9QcmV2aW91c1RhYlRpdGxlc30gLnNjYWxlPSR7c2NhbGV9IHRhYmluZGV4PS0xPjwvY2FsY2l0ZS1idXR0b24+PC9kaXY+YCk7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLXRhYi1uYXZcIiwgVGFiTmF2KTtcbmV4cG9ydCB7XG4gIFRhYk5hdlxufTtcbiIsImltcG9ydCBcIi4uL2NhbGNpdGUtYnV0dG9uL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jdXN0b21FbGVtZW50LmpzXCI7IiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGMgYXMgY3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi8uLi9jaHVua3MvcnVudGltZS5qc1wiO1xuaW1wb3J0IHsga2V5ZWQgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMva2V5ZWQuanNcIjtcbmltcG9ydCB7IGNzcywgaXNTZXJ2ZXIsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBjcmVhdGVSZWYsIHJlZiB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgY3JlYXRlRXZlbnQsIHNhZmVDbGFzc01hcCwgc2V0QXR0cmlidXRlIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBuIGFzIG5vZGVMaXN0VG9BcnJheSwgZyBhcyBnZXRFbGVtZW50RGlyLCB0IGFzIHRvQXJpYUJvb2xlYW4gfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2RvbS5qc1wiO1xuaW1wb3J0IHsgZyBhcyBndWlkIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ndWlkLmpzXCI7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiwgSSBhcyBJbnRlcmFjdGl2ZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi9jaHVua3MvaW50ZXJhY3RpdmUuanNcIjtcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIsIHUgYXMgdXBkYXRlUmVmT2JzZXJ2ZXIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL29ic2VydmVycy5qc1wiO1xuaW1wb3J0IHsgZyBhcyBnZXRJY29uU2NhbGUgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2NvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgWCBhcyBYQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9YQnV0dG9uLmpzXCI7XG5pbXBvcnQgeyB1IGFzIHVzZVQ5biB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXNlVDluLmpzXCI7XG5jb25zdCBDU1MgPSB7XG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgY29udGFpbmVyQm90dG9tOiBcImNvbnRhaW5lci0tYm90dG9tXCIsXG4gIGNvbnRlbnQ6IFwiY29udGVudFwiLFxuICBjb250ZW50SGFzVGV4dDogXCJjb250ZW50LS1oYXMtdGV4dFwiLFxuICBpY29uRW5kOiBcImljb24tZW5kXCIsXG4gIGljb25QcmVzZW50OiBcImljb24tcHJlc2VudFwiLFxuICBpY29uU3RhcnQ6IFwiaWNvbi1zdGFydFwiLFxuICB0aXRsZUljb246IFwiY2FsY2l0ZS10YWItdGl0bGUtLWljb25cIixcbiAgc2NhbGU6IChzY2FsZSkgPT4gYHNjYWxlLSR7c2NhbGV9YCxcbiAgc2VsZWN0ZWRJbmRpY2F0b3I6IFwic2VsZWN0ZWQtaW5kaWNhdG9yXCJcbn07XG5jb25zdCBpZFByZWZpeCA9IFwiY2FsY2l0ZS10YWItdGl0bGVcIjtcbmNvbnN0IElEUyA9IHtcbiAgaG9zdDogKGlkKSA9PiBgJHtpZFByZWZpeH0tJHtpZH1gXG59O1xuY29uc3Qgc3R5bGVzID0gY3NzYDpob3N0ey0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1mb2N1czogdmFyKCAtLWNhbGNpdGUtY29sb3ItZm9jdXMsIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpKSApfTpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2Rpc3BsYXk6YmxvY2s7b3V0bGluZToycHggc29saWQgdHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MnB4O21hcmdpbi1pbmxpbmUtc3RhcnQ6MHB4fTpob3N0KFtsYXlvdXQ9aW5saW5lXSl7ZmxleDowIDEgYXV0b306aG9zdChbbGF5b3V0PWNlbnRlcl0pe2ZsZXg6MSAxIGF1dG99LmNvbnRlbnR7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLWJsb2NrLWVuZDouMTI1cmVtO2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7YmxvY2stc2l6ZToxMDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5zY2FsZS1zIC5jb250ZW50e3BhZGRpbmctYmxvY2s6LjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbX0uc2NhbGUtcyAueC1idXR0b257aW5saW5lLXNpemU6MS4yNXJlbX0uc2NhbGUtbSAuY29udGVudHtwYWRkaW5nLWJsb2NrOi41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbX0uc2NhbGUtbSAueC1idXR0b257aW5saW5lLXNpemU6MS43NXJlbX0uc2NhbGUtbCAuY29udGVudHtwYWRkaW5nLWJsb2NrOi42MjVyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApO2xpbmUtaGVpZ2h0OjEuMjVyZW19LnNjYWxlLWwgLngtYnV0dG9ue2lubGluZS1zaXplOjJyZW19Omhvc3QoW2Nsb3NhYmxlXSkgLmNvbnRlbnR7Ym9yZGVyLWJsb2NrLWVuZC1jb2xvcjp0cmFuc3BhcmVudH06aG9zdChbbGF5b3V0PWlubGluZV0pIC5jb250ZW50LDpob3N0KFtsYXlvdXQ9Y2VudGVyXSkgLmNvbnRlbnR7cGFkZGluZy1pbmxpbmU6LjI1cmVtfTpob3N0KFtsYXlvdXQ9Y2VudGVyXSkgLnNjYWxlLXMsOmhvc3QoW2xheW91dD1jZW50ZXJdKSAuc2NhbGUtbSw6aG9zdChbbGF5b3V0PWNlbnRlcl0pIC5zY2FsZS1se21hcmdpbi1ibG9jazowcHg7anVzdGlmeS1jb250ZW50OmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcn06aG9zdChbbGF5b3V0PWNlbnRlcl0pIC5zY2FsZS1zIC5jb250ZW50LDpob3N0KFtsYXlvdXQ9Y2VudGVyXSkgLnNjYWxlLW0gLmNvbnRlbnQsOmhvc3QoW2xheW91dD1jZW50ZXJdKSAuc2NhbGUtbCAuY29udGVudHtmbGV4OjEgMSBhdXRvO2ZsZXgtZ3JvdzoxfS5jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpib3JkZXItYm94O2Rpc3BsYXk6ZmxleDtibG9jay1zaXplOjEwMCU7aW5saW5lLXNpemU6MTAwJTtjdXJzb3I6cG9pbnRlcjthbGlnbi1jb250ZW50OmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nLWlubGluZTowcHg7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKTtsaW5lLWhlaWdodDoxcmVtO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixibG9jay1zaXplLGJvcmRlci1jb2xvcixib3gtc2hhZG93LGNvbG9yLGluc2V0LWJsb2NrLWVuZCxpbnNldC1ibG9jay1zdGFydCxpbnNldC1pbmxpbmUtZW5kLGluc2V0LWlubGluZS1zdGFydCxpbnNldC1zaXplLG9wYWNpdHksb3V0bGluZS1jb2xvcix0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0O291dGxpbmUtY29sb3I6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tY2FsY2l0ZS10YWItdGV4dC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTMpKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdGFiLWJhY2tncm91bmQtY29sb3IsIHRyYW5zcGFyZW50KX0uc2VsZWN0ZWQtaW5kaWNhdG9ye3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2s7YmxvY2stc2l6ZTouMTI1cmVtO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixibG9jay1zaXplLGJvcmRlci1jb2xvcixib3gtc2hhZG93LGNvbG9yLGluc2V0LWJsb2NrLWVuZCxpbnNldC1ibG9jay1zdGFydCxpbnNldC1pbmxpbmUtZW5kLGluc2V0LWlubGluZS1zdGFydCxpbnNldC1zaXplLG9wYWNpdHksb3V0bGluZS1jb2xvcix0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0O2luc2V0LWJsb2NrLWVuZDowO2luc2V0LWlubGluZS1zdGFydDowO2luc2V0LWlubGluZS1lbmQ6MDtpbmxpbmUtc2l6ZToxMDAlfTpob3N0KFtib3JkZXJlZF1bc2VsZWN0ZWRdKSAuY29udGFpbmVyOmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6YmxvY2s7YmxvY2stc2l6ZTouMTI1cmVtO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixibG9jay1zaXplLGJvcmRlci1jb2xvcixib3gtc2hhZG93LGNvbG9yLGluc2V0LWJsb2NrLWVuZCxpbnNldC1ibG9jay1zdGFydCxpbnNldC1pbmxpbmUtZW5kLGluc2V0LWlubGluZS1zdGFydCxpbnNldC1zaXplLG9wYWNpdHksb3V0bGluZS1jb2xvcix0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0O2luc2V0LWJsb2NrLWVuZDotMXB4O2luc2V0LWlubGluZS1zdGFydDowO2luc2V0LWlubGluZS1lbmQ6MDtpbmxpbmUtc2l6ZToxMDAlO2NvbnRlbnQ6XCJcIn06aG9zdChbYm9yZGVyZWRdW3NlbGVjdGVkXSkgLmNvbnRhaW5lci5jb250YWluZXItLWJvdHRvbTphZnRlcntpbnNldC1ibG9jay1zdGFydDotMXB4fTpob3N0KFtib3JkZXJlZF1bc2VsZWN0ZWRdOmZvY3VzKSAuY29udGFpbmVyOmFmdGVye2JhY2tncm91bmQ6dHJhbnNwYXJlbnR9LmNvbnRhaW5lci0tYm90dG9tIC5zZWxlY3RlZC1pbmRpY2F0b3J7aW5zZXQtYmxvY2stZW5kOnVuc2V0O2luc2V0LWJsb2NrLXN0YXJ0OjB9Omhvc3QoOm5vdChbYm9yZGVyZWRdKSkgLmNvbnRhaW5lcjpob3Zlciw6aG9zdCg6bm90KFtib3JkZXJlZF0pKSAuY29udGFpbmVyOmFjdGl2ZXtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9Omhvc3QoW2JvcmRlcmVkXTpub3QoW3NlbGVjdGVkXSk6aG92ZXI6bm90KDpmb2N1cykpIC5zZWxlY3RlZC1pbmRpY2F0b3J7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMil9Omhvc3QoW2JvcmRlcmVkXTpub3QoW3NlbGVjdGVkXSk6aG92ZXI6bm90KDpmb2N1cykpIC5jb250YWluZXI6bm90KC5jb250YWluZXItLWJvdHRvbSkgLnNlbGVjdGVkLWluZGljYXRvcntib3gtc2hhZG93Omluc2V0IDAgMXB4IHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpfTpob3N0KFtib3JkZXJlZF06bm90KFtzZWxlY3RlZF0pOmhvdmVyOm5vdCg6Zm9jdXMpKSAuY29udGFpbmVyLmNvbnRhaW5lci0tYm90dG9tIC5zZWxlY3RlZC1pbmRpY2F0b3J7Ym94LXNoYWRvdzppbnNldCAwIC0xcHggdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSl9Omhvc3QoW3NlbGVjdGVkXTpmb2N1cykgLnNlbGVjdGVkLWluZGljYXRvcntibG9jay1zaXplOjRweH0uY2FsY2l0ZS10YWItdGl0bGUtLWljb257cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luOjA7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1zZWxmOmNlbnRlcn0uY2FsY2l0ZS10YWItdGl0bGUtLWljb24gc3Zne3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixibG9jay1zaXplLGJvcmRlci1jb2xvcixib3gtc2hhZG93LGNvbG9yLGluc2V0LWJsb2NrLWVuZCxpbnNldC1ibG9jay1zdGFydCxpbnNldC1pbmxpbmUtZW5kLGluc2V0LWlubGluZS1zdGFydCxpbnNldC1zaXplLG9wYWNpdHksb3V0bGluZS1jb2xvcix0cmFuc2Zvcm07dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW4tb3V0fS5jb250ZW50LS1oYXMtdGV4dCAuaWNvbi1zdGFydCwuY29udGVudC0taGFzLXRleHQgLmNhbGNpdGUtdGFiLXRpdGxlLS1pY29uLmljb24tc3RhcnR7Y29sb3I6dmFyKC0tY2FsY2l0ZS10YWItaWNvbi1jb2xvci1zdGFydCwgdmFyKC0tY2FsY2l0ZS1pY29uLWNvbG9yKSl9LmNvbnRlbnQtLWhhcy10ZXh0IC5jYWxjaXRlLXRhYi10aXRsZS0taWNvbi5pY29uLXN0YXJ0IC5pY29uLWVuZCwuY29udGVudC0taGFzLXRleHQgLmNhbGNpdGUtdGFiLXRpdGxlLS1pY29uLmljb24tZW5ke2NvbG9yOnZhcigtLWNhbGNpdGUtdGFiLWljb24tY29sb3ItZW5kLCB2YXIoLS1jYWxjaXRlLWljb24tY29sb3IpKX0uY29udGVudC0taGFzLXRleHR7cGFkZGluZzouMjVyZW19LmNvbnRlbnQtLWhhcy10ZXh0IC5jYWxjaXRlLXRhYi10aXRsZS0taWNvbi5pY29uLXN0YXJ0e21hcmdpbi1pbmxpbmUtZW5kOnZhcigtLWNhbGNpdGUtc3BhY2luZy1zbSl9LmNvbnRlbnQtLWhhcy10ZXh0IC5jYWxjaXRlLXRhYi10aXRsZS0taWNvbi5pY29uLWVuZHttYXJnaW4taW5saW5lLXN0YXJ0OnZhcigtLWNhbGNpdGUtc3BhY2luZy1zbSl9LngtYnV0dG9ue2Rpc3BsYXk6ZmxleDtibG9jay1zaXplOjEwMCU7Y3Vyc29yOnBvaW50ZXI7YXBwZWFyYW5jZTpub25lO2FsaWduLWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLXNlbGY6Y2VudGVyO2JvcmRlci1zdHlsZTpub25lO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGJsb2NrLXNpemUsYm9yZGVyLWNvbG9yLGJveC1zaGFkb3csY29sb3IsaW5zZXQtYmxvY2stZW5kLGluc2V0LWJsb2NrLXN0YXJ0LGluc2V0LWlubGluZS1lbmQsaW5zZXQtaW5saW5lLXN0YXJ0LGluc2V0LXNpemUsb3BhY2l0eSxvdXRsaW5lLWNvbG9yLHRyYW5zZm9ybTt0cmFuc2l0aW9uLWR1cmF0aW9uOnZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyk7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbi1vdXQ7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDttYXJnaW4taW5saW5lLXN0YXJ0OnZhcigtLWNhbGNpdGUtc3BhY2luZy1zbSk7bWFyZ2luLWlubGluZS1lbmQ6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXB4KTtibG9jay1zaXplOmNhbGMoMTAwJSAtIHZhcigtLWNhbGNpdGUtc3BhY2luZy14eHMpKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXRhYi1jbG9zZS1pY29uLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMykpO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS10YWItY2xvc2UtaWNvbi1iYWNrZ3JvdW5kLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLXRyYW5zcGFyZW50KSl9LngtYnV0dG9uOmZvY3Vze291dGxpbmU6dmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtbWQpIHNvbGlkIHZhcigtLWNhbGNpdGUtY29sb3ItZm9jdXMsIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpKSk7b3V0bGluZTp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCkgc29saWQgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1mb2N1cyl9LngtYnV0dG9uOmZvY3VzLC54LWJ1dHRvbjpob3ZlciwueC1idXR0b246YWN0aXZle2NvbG9yOnZhcigtLWNhbGNpdGUtdGFiLWNsb3NlLWljb24tY29sb3ItcHJlc3MsIHZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0xKSk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXRhYi1jbG9zZS1pY29uLWJhY2tncm91bmQtY29sb3ItcHJlc3MsIHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKSl9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLWlubGluZS13aWR0aDp2YXIoLS1jYWxjaXRlLXNwYWNpbmctcHgpO2JvcmRlci1pbmxpbmUtc3R5bGU6c29saWR9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lcjpob3Zlciw6aG9zdChbYm9yZGVyZWRdKSAuY29udGFpbmVyOmFjdGl2ZXtjb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLXRleHQtMSl9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lciAueC1idXR0b24gY2FsY2l0ZS1pY29ue21hcmdpbi1ibG9jay1zdGFydDp2YXIoLS1jYWxjaXRlLXNwYWNpbmctcHgpfTpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIgLngtYnV0dG9uOmZvY3VzLDpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIgLngtYnV0dG9uOmhvdmVyLDpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIgLngtYnV0dG9uOmFjdGl2ZXtib3gtc2hhZG93OjAgMnB4IDAgMCB2YXIoLS1jYWxjaXRlLXRhYi1jbG9zZS1pY29uLWJhY2tncm91bmQtY29sb3ItcHJlc3MsIHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0zKSl9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lci5jb250YWluZXItLWJvdHRvbXtib3JkZXItYmxvY2stc3RhcnQtc3R5bGU6c29saWQ7Ym9yZGVyLWJsb2NrLXN0YXJ0LXdpZHRoOjFweH06aG9zdChbYm9yZGVyZWRdKSAuY29udGFpbmVyLmNvbnRhaW5lci0tYm90dG9tIC5zZWxlY3RlZC1pbmRpY2F0b3J7aW5zZXQtYmxvY2stc3RhcnQ6dW5zZXQ7aW5zZXQtYmxvY2stZW5kOjB9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lci5jb250YWluZXItLWJvdHRvbSAueC1idXR0b257Ym94LXNoYWRvdzowIC0ycHggMCAwIHZhcigtLWNhbGNpdGUtdGFiLWNsb3NlLWljb24tYmFja2dyb3VuZC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10cmFuc3BhcmVudCkpfTpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIuY29udGFpbmVyLS1ib3R0b20gLngtYnV0dG9uOmZvY3VzLDpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIuY29udGFpbmVyLS1ib3R0b20gLngtYnV0dG9uOmhvdmVyLDpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIuY29udGFpbmVyLS1ib3R0b20gLngtYnV0dG9uOmFjdGl2ZXtib3gtc2hhZG93OjAgLTJweCAwIDAgdmFyKC0tY2FsY2l0ZS10YWItY2xvc2UtaWNvbi1iYWNrZ3JvdW5kLWNvbG9yLXByZXNzLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMykpfTpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXIuY29udGFpbmVyLS1ib3R0b20gLngtYnV0dG9uIGNhbGNpdGUtaWNvbnttYXJnaW4tYmxvY2stZW5kOnZhcigtLWNhbGNpdGUtc3BhY2luZy1weCl9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lcjpub3QoLmNvbnRhaW5lci0tYm90dG9tKXtib3JkZXItYmxvY2stZW5kLXN0eWxlOnNvbGlkO2JvcmRlci1ibG9jay1lbmQtd2lkdGg6MXB4fTpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXI6bm90KC5jb250YWluZXItLWJvdHRvbSkgLngtYnV0dG9ue2Jsb2NrLXNpemU6Y2FsYygxMDAlIC0gdmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXB4KSk7bWFyZ2luLWJsb2NrLXN0YXJ0Oi0xcHh9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lciAuc2VsZWN0ZWQtaW5kaWNhdG9ye2luc2V0LWJsb2NrLXN0YXJ0OjA7aW5zZXQtYmxvY2stZW5kOnVuc2V0O2luc2V0LWlubGluZS1zdGFydDotMXB4O2luc2V0LWlubGluZS1lbmQ6MDtpbmxpbmUtc2l6ZTpjYWxjKDEwMCUgKyB2YXIoLS1jYWxjaXRlLXNwYWNpbmctYmFzZSkpfTpob3N0KFtib3JkZXJlZF0pIC5jb250YWluZXI6aG9zdCg6bm90KFtzZWxlY3RlZF0pKSAuY29udGFpbmVyIC54LWJ1dHRvbntib3gtc2hhZG93OjAgMnB4IDAgMCB0cmFuc3BhcmVudH06aG9zdChbYm9yZGVyZWRdKSAuY29udGFpbmVyOmhvc3QoOm5vdChbc2VsZWN0ZWRdKSk6aG9zdCg6aG92ZXIpIC5jb250YWluZXI6bm90KC5jb250YWluZXItLWJvdHRvbSl7Ym9yZGVyLWJsb2NrLWVuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXRhYi1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKX06aG9zdChbYm9yZGVyZWRdKSAuY29udGFpbmVyOmhvc3QoOm5vdChbc2VsZWN0ZWRdKSk6aG9zdCg6aG92ZXIpOmhvc3QoOm5vdCg6Zm9jdXMpKSAuc2VsZWN0ZWQtaW5kaWNhdG9ye2JveC1zaGFkb3c6aW5zZXQgMCB2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1zaGFkb3ctbGVuZ3RoKSB2YXIoLS1jYWxjaXRlLXRhYi1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKX06aG9zdChbYm9yZGVyZWRdKSAuY29udGFpbmVyOmhvc3QoOm5vdChbc2VsZWN0ZWRdKSk6aG9zdCg6aG92ZXIpOmhvc3QoOm5vdCg6Zm9jdXMpKSA6bm90KC5jb250YWluZXItLWJvdHRvbSl7LS1jYWxjaXRlLWludGVybmFsLXRhYi1zaGFkb3ctbGVuZ3RoOiAxcHh9Omhvc3QoW2JvcmRlcmVkXSkgLmNvbnRhaW5lcjpob3N0KDpub3QoW3NlbGVjdGVkXSkpOmhvc3QoOmhvdmVyKTpob3N0KDpub3QoOmZvY3VzKSkgLmNvbnRhaW5lci0tYm90dG9tey0tY2FsY2l0ZS1pbnRlcm5hbC10YWItc2hhZG93LWxlbmd0aDogLTFweH06aG9zdChbYm9yZGVyZWRdKSAuY29udGFpbmVyOmhvdmVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS10YWItYmFja2dyb3VuZC1jb2xvci1ob3ZlciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTIpKTtib3JkZXItYmxvY2stZW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpfTpob3N0KDpob3ZlcikgLnNlbGVjdGVkLWluZGljYXRvcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTMpfTpob3N0KFtzZWxlY3RlZF0pIC5zZWxlY3RlZC1pbmRpY2F0b3IsOmhvc3QoW3NlbGVjdGVkXTpob3ZlcikgLnNlbGVjdGVkLWluZGljYXRvciw6aG9zdCg6Zm9jdXMpIC5zZWxlY3RlZC1pbmRpY2F0b3IsOmhvc3QoOmFjdGl2ZSkgLnNlbGVjdGVkLWluZGljYXRvcntiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdGFiLWFjY2VudC1jb2xvci1wcmVzcywgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpfTpob3N0KFtjbG9zZWRdKXtkaXNwbGF5Om5vbmV9Omhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lcntib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tY2FsY2l0ZS10YWItdGV4dC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpKX06aG9zdChbc2VsZWN0ZWRdW2JvcmRlcmVkXSkgLmNvbnRhaW5lcntib3JkZXItaW5saW5lLWNvbG9yOnZhcigtLWNhbGNpdGUtdGFiLWJvcmRlci1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMSkpfTpob3N0KFtzZWxlY3RlZF1bYm9yZGVyZWRdKSAuY29udGFpbmVyOmFmdGVye2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS10YWItYmFja2dyb3VuZC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpKX06aG9zdChbc2VsZWN0ZWRdW2JvcmRlcmVkXSkgLmNvbnRhaW5lcjpob3Zlciw6aG9zdChbc2VsZWN0ZWRdW2JvcmRlcmVkXSkgLmNvbnRhaW5lcjphY3RpdmV7YmFja2dyb3VuZDp0cmFuc3BhcmVudH06aG9zdCg6Zm9jdXMpIC5jb250YWluZXJ7b3V0bGluZTp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCkgc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpKTtvdXRsaW5lOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKSBzb2xpZCB2YXIoLS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzKTtvdXRsaW5lLW9mZnNldDpjYWxjKGNhbGMoLTEgKiB2YXIoLS1jYWxjaXRlLXNwYWNpbmctYmFzZSkpICogY2FsYygxIC0gKDIqY2xhbXAoMCx2YXIoLS1jYWxjaXRlLW9mZnNldC1pbnZlcnQtZm9jdXMpLDEpKSkpfTpob3N0KDpmb2N1cykgLmNvbnRhaW5lcjpmb2N1cy13aXRoaW57b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudH06aG9zdChbaWNvbi1zdGFydF1baWNvbi1lbmRdKSAuY2FsY2l0ZS10YWItdGl0bGUtLWljb246Zmlyc3QtY2hpbGR7bWFyZ2luLWlubGluZS1lbmQ6dmFyKC0tY2FsY2l0ZS1zcGFjaW5nLXNtKX06aG9zdChbbGF5b3V0PWlubGluZV1bYm9yZGVyZWRdKSAuc2NhbGUtbSAuY29udGVudCw6aG9zdChbbGF5b3V0PWNlbnRlcl1bYm9yZGVyZWRdKSAuc2NhbGUtbSAuY29udGVudHtwYWRkaW5nLWlubGluZTouNzVyZW19Omhvc3QoW2xheW91dD1pbmxpbmVdW2JvcmRlcmVkXSkgLnNjYWxlLXMgLmNvbnRlbnQsOmhvc3QoW2xheW91dD1jZW50ZXJdW2JvcmRlcmVkXSkgLnNjYWxlLXMgLmNvbnRlbnR7cGFkZGluZy1pbmxpbmU6LjVyZW19Omhvc3QoW2xheW91dD1pbmxpbmVdW2JvcmRlcmVkXSkgLnNjYWxlLWwgLmNvbnRlbnQsOmhvc3QoW2xheW91dD1jZW50ZXJdW2JvcmRlcmVkXSkgLnNjYWxlLWwgLmNvbnRlbnR7cGFkZGluZy1pbmxpbmU6MXJlbX06aG9zdChbbGF5b3V0PWlubGluZV1bY2xvc2FibGVdKSAuc2NhbGUtcyAuY29udGVudCw6aG9zdChbbGF5b3V0PWlubGluZV1bY2xvc2FibGVdKSAuc2NhbGUtbSAuY29udGVudCw6aG9zdChbbGF5b3V0PWlubGluZV1bY2xvc2FibGVdKSAuc2NhbGUtbCAuY29udGVudHtwYWRkaW5nLWlubGluZS1lbmQ6MH1AbWVkaWEgKGZvcmNlZC1jb2xvcnM6IGFjdGl2ZSl7Omhvc3R7b3V0bGluZS13aWR0aDowO291dGxpbmUtb2Zmc2V0OjB9Omhvc3QoOmZvY3VzKSAuY29udGFpbmVye291dGxpbmUtY29sb3I6aGlnaGxpZ2h0fTpob3N0KFtib3JkZXJlZF1bc2VsZWN0ZWRdKSAuY29udGFpbmVye2JvcmRlci1ibG9jay1lbmQtc3R5bGU6bm9uZX06aG9zdChbYm9yZGVyZWRdW3NlbGVjdGVkXSkgLmNvbnRhaW5lci0tYm90dG9te2JvcmRlci1ibG9jay1zdGFydC1zdHlsZTpub25lfS54LWJ1dHRvbnt6LWluZGV4OnZhcigtLWNhbGNpdGUtei1pbmRleCl9LnNlbGVjdGVkLWluZGljYXRvcntiYWNrZ3JvdW5kLWNvbG9yOmhpZ2hsaWdodH19Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9Omhvc3QoW2Rpc2FibGVkXSkgLmNvbnRhaW5lcntwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6LjV9Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfS5pbnRlcmFjdGlvbi1jb250YWluZXJ7ZGlzcGxheTpjb250ZW50c31gO1xuY2xhc3MgVGFiVGl0bGUgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNsb3NlQnV0dG9uUmVmID0gY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5ndWlkID0gSURTLmhvc3QoZ3VpZCgpKTtcbiAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBjcmVhdGVPYnNlcnZlcihcIm11dGF0aW9uXCIsICgpID0+IHRoaXMudXBkYXRlSGFzVGV4dCgpKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJJY29uQ2hhbmdlZC5lbWl0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVzZVQ5bigpO1xuICAgIHRoaXMuaGFzVGV4dCA9IGZhbHNlO1xuICAgIHRoaXMuYm9yZGVyZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsb3NhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5wb3NpdGlvbiA9IFwidG9wXCI7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYkljb25DaGFuZ2VkID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYlRpdGxlUmVnaXN0ZXIgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0FjdGl2YXRlID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYnNDbG9zZSA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJzRm9jdXNGaXJzdCA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJzRm9jdXNMYXN0ID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYnNGb2N1c05leHQgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0ZvY3VzUHJldmlvdXMgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZVRhYnNBY3RpdmF0ZSA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5jYWxjaXRlVGFic0Nsb3NlID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmxpc3Rlbk9uKGRvY3VtZW50LmJvZHksIFwiY2FsY2l0ZUludGVybmFsVGFiQ2hhbmdlXCIsIHRoaXMuaW50ZXJuYWxUYWJDaGFuZ2VIYW5kbGVyKTtcbiAgICB0aGlzLmxpc3RlbihcImNsaWNrXCIsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5saXN0ZW4oXCJrZXlkb3duXCIsIHRoaXMua2V5RG93bkhhbmRsZXIpO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBjb250cm9sczogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgaGFzVGV4dDogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgYm9yZGVyZWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBjbG9zYWJsZTogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIGNsb3NlZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIGRpc2FibGVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgaWNvbkVuZDogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIGljb25GbGlwUnRsOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgaWNvblN0YXJ0OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgbGF5b3V0OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgbWVzc2FnZU92ZXJyaWRlczogWzAsIHt9LCB7IGF0dHJpYnV0ZTogZmFsc2UgfV0sIHBvc2l0aW9uOiAxLCBzY2FsZTogMSwgc2VsZWN0ZWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCB0YWI6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBhc3luYyBhY3RpdmF0ZVRhYih1c2VyVHJpZ2dlcmVkID0gdHJ1ZSkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMuY2xvc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHRhYjogdGhpcy50YWIsIHVzZXJUcmlnZ2VyZWQgfTtcbiAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYnNBY3RpdmF0ZS5lbWl0KHBheWxvYWQpO1xuICAgIGlmICh1c2VyVHJpZ2dlcmVkKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5jYWxjaXRlVGFic0FjdGl2YXRlLmVtaXQoKSk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGdldFRhYklkZW50aWZpZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFiID8gdGhpcy50YWIgOiB0aGlzLmdldFRhYkluZGV4KCk7XG4gIH1cbiAgYXN5bmMgZ2V0VGFiSW5kZXgoKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwobm9kZUxpc3RUb0FycmF5KHRoaXMuZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbikuZmlsdGVyKChlbCkgPT4gZWwubWF0Y2hlcyhcImNhbGNpdGUtdGFiLXRpdGxlXCIpKSwgdGhpcy5lbCk7XG4gIH1cbiAgX3VwZGF0ZUFyaWFJbmZvKHRhYklkcyA9IFtdLCB0aXRsZUlkcyA9IFtdKSB7XG4gICAgdGhpcy5jb250cm9scyA9IHRhYklkc1t0aXRsZUlkcy5pbmRleE9mKHRoaXMuZWwuaWQpXSB8fCBudWxsO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5zZXR1cFRleHRDb250ZW50T2JzZXJ2ZXIoKTtcbiAgICB0aGlzLnBhcmVudFRhYnNFbCA9IHRoaXMuZWwuY2xvc2VzdChcImNhbGNpdGUtdGFic1wiKTtcbiAgfVxuICBhc3luYyBsb2FkKCkge1xuICAgIGlmICghaXNTZXJ2ZXIpIHtcbiAgICAgIHRoaXMudXBkYXRlSGFzVGV4dCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy50YWIgJiYgdGhpcy5zZWxlY3RlZCkge1xuICAgICAgdGhpcy5hY3RpdmF0ZVRhYihmYWxzZSk7XG4gICAgfVxuICB9XG4gIHdpbGxVcGRhdGUoY2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmhhcyhcInNlbGVjdGVkXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5zZWxlY3RlZCAhPT0gZmFsc2UpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkSGFuZGxlcigpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYXJlbnRUYWJzRWwpIHtcbiAgICAgIHRoaXMubGF5b3V0ID0gdGhpcy5wYXJlbnRUYWJzRWwubGF5b3V0O1xuICAgICAgdGhpcy5ib3JkZXJlZCA9IHRoaXMucGFyZW50VGFic0VsLmJvcmRlcmVkO1xuICAgIH1cbiAgfVxuICB1cGRhdGVkKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICBhc3luYyBsb2FkZWQoKSB7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJUaXRsZVJlZ2lzdGVyLmVtaXQoYXdhaXQgdGhpcy5nZXRUYWJJZGVudGlmaWVyKCkpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgZG9jdW1lbnQuYm9keT8uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJjYWxjaXRlVGFiVGl0bGVVbnJlZ2lzdGVyXCIsIHtcbiAgICAgIGRldGFpbDogdGhpcy5lbFxuICAgIH0pKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gIH1cbiAgc2VsZWN0ZWRIYW5kbGVyKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkKSB7XG4gICAgICB0aGlzLmFjdGl2YXRlVGFiKGZhbHNlKTtcbiAgICB9XG4gIH1cbiAgaW50ZXJuYWxUYWJDaGFuZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0VGFic0VsID0gZXZlbnQuY29tcG9zZWRQYXRoKCkuZmluZCgoZWwpID0+IGVsLnRhZ05hbWUgPT09IFwiQ0FMQ0lURS1UQUJTXCIpO1xuICAgIGlmICh0YXJnZXRUYWJzRWwgIT09IHRoaXMucGFyZW50VGFic0VsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnRhYikge1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMudGFiID09PSBldmVudC5kZXRhaWwudGFiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdldFRhYkluZGV4KCkudGhlbigoaW5kZXgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4ID09PSBldmVudC5kZXRhaWwudGFiO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG4gIG9uQ2xpY2soKSB7XG4gICAgdGhpcy5hY3RpdmF0ZVRhYigpO1xuICB9XG4gIGtleURvd25IYW5kbGVyKGV2ZW50KSB7XG4gICAgc3dpdGNoIChldmVudC5rZXkpIHtcbiAgICAgIGNhc2UgXCIgXCI6XG4gICAgICBjYXNlIFwiRW50ZXJcIjpcbiAgICAgICAgaWYgKCFldmVudC5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyh0aGlzLmNsb3NlQnV0dG9uUmVmLnZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuYWN0aXZhdGVUYWIoKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGdldEVsZW1lbnREaXIodGhpcy5lbCkgPT09IFwibHRyXCIpIHtcbiAgICAgICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYnNGb2N1c05leHQuZW1pdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0ZvY3VzUHJldmlvdXMuZW1pdCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoZ2V0RWxlbWVudERpcih0aGlzLmVsKSA9PT0gXCJsdHJcIikge1xuICAgICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0ZvY3VzUHJldmlvdXMuZW1pdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0ZvY3VzTmV4dC5lbWl0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiSG9tZVwiOlxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmNhbGNpdGVJbnRlcm5hbFRhYnNGb2N1c0ZpcnN0LmVtaXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiRW5kXCI6XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0ZvY3VzTGFzdC5lbWl0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBjbG9zZUNsaWNrSGFuZGxlcigpIHtcbiAgICB0aGlzLmNsb3NlVGFiVGl0bGVBbmROb3RpZnkoKTtcbiAgfVxuICB1cGRhdGVIYXNUZXh0KCkge1xuICAgIHRoaXMuaGFzVGV4dCA9IHRoaXMuZWwudGV4dENvbnRlbnQudHJpbSgpLmxlbmd0aCA+IDA7XG4gIH1cbiAgc2V0Q29udGFpbmVyUmVmKGVsKSB7XG4gICAgdXBkYXRlUmVmT2JzZXJ2ZXIodGhpcy5yZXNpemVPYnNlcnZlciwgdGhpcy5jb250YWluZXJFbCwgZWwpO1xuICAgIHRoaXMuY29udGFpbmVyRWwgPSBlbDtcbiAgfVxuICBzZXR1cFRleHRDb250ZW50T2JzZXJ2ZXIoKSB7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5vYnNlcnZlKHRoaXMuZWwsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICB9XG4gIGNsb3NlVGFiVGl0bGVBbmROb3RpZnkoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsVGFic0Nsb3NlLmVtaXQoeyB0YWI6IHRoaXMudGFiIH0pO1xuICAgIHRoaXMuY2FsY2l0ZVRhYnNDbG9zZS5lbWl0KCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZWwsIGNsb3NlZCB9ID0gdGhpcztcbiAgICBjb25zdCBpZCA9IGVsLmlkIHx8IHRoaXMuZ3VpZDtcbiAgICBjb25zdCBpY29uU3RhcnRFbCA9IGh0bWxgPGNhbGNpdGUtaWNvbiBjbGFzcz0ke3NhZmVDbGFzc01hcCh7IFtDU1MudGl0bGVJY29uXTogdHJ1ZSwgW0NTUy5pY29uU3RhcnRdOiB0cnVlIH0pfSAuZmxpcFJ0bD0ke3RoaXMuaWNvbkZsaXBSdGwgPT09IFwic3RhcnRcIiB8fCB0aGlzLmljb25GbGlwUnRsID09PSBcImJvdGhcIn0gLmljb249JHt0aGlzLmljb25TdGFydH0gLnNjYWxlPSR7Z2V0SWNvblNjYWxlKHRoaXMuc2NhbGUpfT48L2NhbGNpdGUtaWNvbj5gO1xuICAgIGNvbnN0IGljb25FbmRFbCA9IGh0bWxgPGNhbGNpdGUtaWNvbiBjbGFzcz0ke3NhZmVDbGFzc01hcCh7IFtDU1MudGl0bGVJY29uXTogdHJ1ZSwgW0NTUy5pY29uRW5kXTogdHJ1ZSB9KX0gLmZsaXBSdGw9JHt0aGlzLmljb25GbGlwUnRsID09PSBcImVuZFwiIHx8IHRoaXMuaWNvbkZsaXBSdGwgPT09IFwiYm90aFwifSAuaWNvbj0ke3RoaXMuaWNvbkVuZH0gLnNjYWxlPSR7Z2V0SWNvblNjYWxlKHRoaXMuc2NhbGUpfT48L2NhbGNpdGUtaWNvbj5gO1xuICAgIHNldEF0dHJpYnV0ZSh0aGlzLmVsLCBcImFyaWEtY29udHJvbHNcIiwgdGhpcy5jb250cm9scyk7XG4gICAgdGhpcy5lbC5hcmlhU2VsZWN0ZWQgPSB0b0FyaWFCb29sZWFuKHRoaXMuc2VsZWN0ZWQpO1xuICAgIHNldEF0dHJpYnV0ZSh0aGlzLmVsLCBcImlkXCIsIGlkKTtcbiAgICB0aGlzLmVsLnJvbGUgPSBcInRhYlwiO1xuICAgIHNldEF0dHJpYnV0ZSh0aGlzLmVsLCBcInRhYkluZGV4XCIsIHRoaXMuc2VsZWN0ZWQgJiYgIXRoaXMuZGlzYWJsZWQgPyAwIDogLTEpO1xuICAgIHJldHVybiBJbnRlcmFjdGl2ZUNvbnRhaW5lcih7IGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLCBjaGlsZHJlbjogaHRtbGA8ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKHtcbiAgICAgIFtDU1MuY29udGFpbmVyXTogdHJ1ZSxcbiAgICAgIFtDU1MuY29udGFpbmVyQm90dG9tXTogdGhpcy5wb3NpdGlvbiA9PT0gXCJib3R0b21cIixcbiAgICAgIFtDU1MuaWNvblByZXNlbnRdOiAhIXRoaXMuaWNvblN0YXJ0IHx8ICEhdGhpcy5pY29uRW5kLFxuICAgICAgW0NTUy5zY2FsZSh0aGlzLnNjYWxlKV06IHRydWVcbiAgICB9KX0gLmhpZGRlbj0ke2Nsb3NlZH0gJHtyZWYodGhpcy5zZXRDb250YWluZXJSZWYpfT48ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKHsgW0NTUy5jb250ZW50XTogdHJ1ZSwgW0NTUy5jb250ZW50SGFzVGV4dF06IHRoaXMuaGFzVGV4dCB9KX0+JHt0aGlzLmljb25TdGFydCA/IGljb25TdGFydEVsIDogbnVsbH08c2xvdD48L3Nsb3Q+JHt0aGlzLmljb25FbmQgPyBpY29uRW5kRWwgOiBudWxsfTwvZGl2PiR7dGhpcy5yZW5kZXJDbG9zZUJ1dHRvbigpfTxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLnNlbGVjdGVkSW5kaWNhdG9yKX0+PC9kaXY+PC9kaXY+YCB9KTtcbiAgfVxuICByZW5kZXJDbG9zZUJ1dHRvbigpIHtcbiAgICBjb25zdCB7IGNsb3NhYmxlLCBtZXNzYWdlcyB9ID0gdGhpcztcbiAgICByZXR1cm4gY2xvc2FibGUgPyBrZXllZChcImNsb3NlLWJ1dHRvblwiLCBYQnV0dG9uKHsgZGlzYWJsZWQ6IGZhbHNlLCBmb2N1c2FibGU6IHRydWUsIGxhYmVsOiBtZXNzYWdlcy5jbG9zZSwgb25DbGljazogdGhpcy5jbG9zZUNsaWNrSGFuZGxlciwgcmVmOiB0aGlzLmNsb3NlQnV0dG9uUmVmLCByb3VuZDogZmFsc2UsIHNjYWxlOiB0aGlzLnNjYWxlLCB0aXRsZTogbWVzc2FnZXMuY2xvc2UgfSkpIDogbnVsbDtcbiAgfVxufVxuY3VzdG9tRWxlbWVudChcImNhbGNpdGUtdGFiLXRpdGxlXCIsIFRhYlRpdGxlKTtcbmV4cG9ydCB7XG4gIFRhYlRpdGxlXG59O1xuIiwiaW1wb3J0IFwiLi4vY2FsY2l0ZS1pY29uL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jdXN0b21FbGVtZW50LmpzXCI7IiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGMgYXMgY3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi8uLi9jaHVua3MvcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgY3NzLCBodG1sIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgc2V0QXR0cmlidXRlLCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IG4gYXMgbm9kZUxpc3RUb0FycmF5IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9kb20uanNcIjtcbmltcG9ydCB7IGcgYXMgZ3VpZCB9IGZyb20gXCIuLi8uLi9jaHVua3MvZ3VpZC5qc1wiO1xuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGNvbnRlbnQ6IFwiY29udGVudFwiLFxuICBzY2FsZTogKHNjYWxlKSA9PiBgc2NhbGUtJHtzY2FsZX1gXG59O1xuY29uc3QgSURTID0ge1xuICB0YWJUaXRsZUlkOiAoaWQpID0+IGBjYWxjaXRlLXRhYi10aXRsZS0ke2lkfWBcbn07XG5jb25zdCBzdHlsZXMgPSBjc3NgOmhvc3R7LS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzOiB2YXIoIC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpICl9Omhvc3R7ZGlzcGxheTpub25lfTpob3N0LC5jb250YWluZXIsLmNvbnRlbnR7YmxvY2stc2l6ZToxMDAlO2lubGluZS1zaXplOjEwMCV9Omhvc3QoW3NlbGVjdGVkXSksOmhvc3QoW3NlbGVjdGVkXSkgLmNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5jb250ZW50e2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nLWJsb2NrOnZhcigtLWNhbGNpdGUtdGFiLWNvbnRlbnQtc3BhY2UteSwgdmFyKC0tY2FsY2l0ZS10YWItY29udGVudC1ibG9jay1wYWRkaW5nLCB2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYi1jb250ZW50LXNwYWNlLXkpKSl9LnNjYWxlLXN7LS1jYWxjaXRlLWludGVybmFsLXRhYi1jb250ZW50LXNwYWNlLXk6IC4yNXJlbTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtc20pO2xpbmUtaGVpZ2h0OjFyZW19LnNjYWxlLW17LS1jYWxjaXRlLWludGVybmFsLXRhYi1jb250ZW50LXNwYWNlLXk6IC41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZSk7bGluZS1oZWlnaHQ6MXJlbX0uc2NhbGUtbHstLWNhbGNpdGUtaW50ZXJuYWwtdGFiLWNvbnRlbnQtc3BhY2UteTogLjYyNXJlbTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtbWQpO2xpbmUtaGVpZ2h0OjEuMjVyZW19LmNvbnRhaW5lcntkaXNwbGF5Om5vbmU7YmxvY2stc2l6ZToxMDAlO2lubGluZS1zaXplOjEwMCU7b3ZlcmZsb3c6YXV0bztvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50fS5jb250YWluZXI6Zm9jdXN7b3V0bGluZTp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1tZCkgc29saWQgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpKTtvdXRsaW5lOnZhcigtLWNhbGNpdGUtYm9yZGVyLXdpZHRoLW1kKSBzb2xpZCB2YXIoLS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzKTtvdXRsaW5lLW9mZnNldDpjYWxjKGNhbGMoLTEgKiB2YXIoLS1jYWxjaXRlLXNwYWNpbmctYmFzZSkpICogY2FsYygxIC0gKDIqY2xhbXAoMCx2YXIoLS1jYWxjaXRlLW9mZnNldC1pbnZlcnQtZm9jdXMpLDEpKSkpfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfWA7XG5jbGFzcyBUYWIgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmd1aWQgPSBJRFMudGFiVGl0bGVJZChndWlkKCkpO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5saXN0ZW5Pbihkb2N1bWVudC5ib2R5LCBcImNhbGNpdGVJbnRlcm5hbFRhYkNoYW5nZVwiLCB0aGlzLmludGVybmFsVGFiQ2hhbmdlSGFuZGxlcik7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGxhYmVsZWRCeTogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgc2NhbGU6IDEsIHNlbGVjdGVkOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgdGFiOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zdHlsZXMgPSBzdHlsZXM7XG4gIH1cbiAgYXN5bmMgZ2V0VGFiSW5kZXgoKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwobm9kZUxpc3RUb0FycmF5KHRoaXMuZWwucGFyZW50RWxlbWVudC5jaGlsZHJlbikuZmlsdGVyKChlbCkgPT4gZWwubWF0Y2hlcyhcImNhbGNpdGUtdGFiXCIpKSwgdGhpcy5lbCk7XG4gIH1cbiAgX3VwZGF0ZUFyaWFJbmZvKHRhYklkcyA9IFtdLCB0aXRsZUlkcyA9IFtdKSB7XG4gICAgdGhpcy5sYWJlbGVkQnkgPSB0aXRsZUlkc1t0YWJJZHMuaW5kZXhPZih0aGlzLmVsLmlkKV0gfHwgbnVsbDtcbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMucGFyZW50VGFic0VsID0gdGhpcy5lbC5jbG9zZXN0KFwiY2FsY2l0ZS10YWJzXCIpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgZG9jdW1lbnQuYm9keT8uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJjYWxjaXRlVGFiVW5yZWdpc3RlclwiLCB7XG4gICAgICBkZXRhaWw6IHRoaXMuZWxcbiAgICB9KSk7XG4gIH1cbiAgaW50ZXJuYWxUYWJDaGFuZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0VGFic0VsID0gZXZlbnQuY29tcG9zZWRQYXRoKCkuZmluZCgoZWwpID0+IGVsLnRhZ05hbWUgPT09IFwiQ0FMQ0lURS1UQUJTXCIpO1xuICAgIGlmICh0YXJnZXRUYWJzRWwgIT09IHRoaXMucGFyZW50VGFic0VsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnRhYikge1xuICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMudGFiID09PSBldmVudC5kZXRhaWwudGFiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdldFRhYkluZGV4KCkudGhlbigoaW5kZXgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4ID09PSBldmVudC5kZXRhaWwudGFiO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBpZCA9IHRoaXMuZWwuaWQgfHwgdGhpcy5ndWlkO1xuICAgIHNldEF0dHJpYnV0ZSh0aGlzLmVsLCBcImFyaWEtbGFiZWxsZWRieVwiLCB0aGlzLmxhYmVsZWRCeSk7XG4gICAgc2V0QXR0cmlidXRlKHRoaXMuZWwsIFwiaWRcIiwgaWQpO1xuICAgIHJldHVybiBodG1sYDxkaXYgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoeyBbQ1NTLmNvbnRhaW5lcl06IHRydWUsIFtDU1Muc2NhbGUodGhpcy5zY2FsZSldOiB0cnVlIH0pfSByb2xlPXRhYnBhbmVsIC50YWJJbmRleD0ke3RoaXMuc2VsZWN0ZWQgPyAwIDogLTF9PjxzZWN0aW9uIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250ZW50KX0+PHNsb3Q+PC9zbG90Pjwvc2VjdGlvbj48L2Rpdj5gO1xuICB9XG59XG5jdXN0b21FbGVtZW50KFwiY2FsY2l0ZS10YWJcIiwgVGFiKTtcbmV4cG9ydCB7XG4gIFRhYlxufTtcbiIsImV4cG9ydCAqIGZyb20gXCIuL2N1c3RvbUVsZW1lbnQuanNcIjsiLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgYyBhcyBjdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGNyZWF0ZVJlZiwgcmVmIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgcyBhcyBzbG90Q2hhbmdlR2V0QXNzaWduZWRFbGVtZW50cywgZSBhcyBnZXRTbG90QXNzaWduZWRFbGVtZW50cyB9IGZyb20gXCIuLi8uLi9jaHVua3MvZG9tLmpzXCI7XG5jb25zdCBDU1MgPSB7XG4gIHNlY3Rpb246IFwic2VjdGlvblwiXG59O1xuY29uc3QgU0xPVFMgPSB7XG4gIHRpdGxlR3JvdXA6IFwidGl0bGUtZ3JvdXBcIlxufTtcbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufTpob3N0KFtib3JkZXJlZF0pe2JveC1zaGFkb3c6aW5zZXQgMCAxcHggMCB2YXIoLS1jYWxjaXRlLXRhYi1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdGFiLWJhY2tncm91bmQtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKSl9Omhvc3QoW2JvcmRlcmVkXSkgc2VjdGlvbntib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS10YWItYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xKSk7Ym9yZGVyLXN0eWxlOnNvbGlkfXNlY3Rpb257ZGlzcGxheTpmbGV4O2ZsZXgtZ3JvdzoxO292ZXJmbG93OmhpZGRlbjtib3JkZXItd2lkdGg6MXB4O2JvcmRlci1ibG9jay1zdGFydC1zdHlsZTpzb2xpZDtib3JkZXItYmxvY2stc3RhcnQtY29sb3I6dmFyKC0tY2FsY2l0ZS10YWItYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xKSl9Omhvc3QoW2JvcmRlcmVkXVtwb3NpdGlvbj1ib3R0b21dKXtib3gtc2hhZG93Omluc2V0IDAgMXB4IDAgdmFyKC0tY2FsY2l0ZS10YWItYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xKSksaW5zZXQgMCAtMXB4IDAgdmFyKC0tY2FsY2l0ZS10YWItYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0xKSl9Omhvc3QoW2JvcmRlcmVkXTpub3QoW3Bvc2l0aW9uPWJvdHRvbV0pKSA6OnNsb3R0ZWQoY2FsY2l0ZS10YWItbmF2KXttYXJnaW4tYmxvY2stZW5kOi0xcHh9Omhvc3QoW3Bvc2l0aW9uPWJvdHRvbV0pe2ZsZXgtZGlyZWN0aW9uOmNvbHVtbi1yZXZlcnNlfTpob3N0KFtwb3NpdGlvbj1ib3R0b21dKSBzZWN0aW9ue2ZsZXgtZGlyZWN0aW9uOmNvbHVtbi1yZXZlcnNlO2JvcmRlci1ibG9jay1zdGFydC13aWR0aDowcHg7Ym9yZGVyLWJsb2NrLWVuZC13aWR0aDoxcHh9Omhvc3QoW2JvcmRlcmVkXVtzY2FsZT1zXSkgc2VjdGlvbntwYWRkaW5nOi43NXJlbX06aG9zdChbYm9yZGVyZWRdW3NjYWxlPW1dKSBzZWN0aW9ue3BhZGRpbmc6LjVyZW19Omhvc3QoW2JvcmRlcmVkXVtzY2FsZT1sXSkgc2VjdGlvbntwYWRkaW5nOjFyZW19Omhvc3QoW3Bvc2l0aW9uPWJvdHRvbV06bm90KFtib3JkZXJlZF0pKSBzZWN0aW9ue2JvcmRlci1ibG9jay1lbmQtc3R5bGU6c29saWQ7Ym9yZGVyLWJsb2NrLWVuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXRhYi1ib3JkZXItY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYm9yZGVyLTEpKX1AbWVkaWEgKGZvcmNlZC1jb2xvcnM6IGFjdGl2ZSl7Omhvc3QoW2JvcmRlcmVkXSkgc2VjdGlvbntib3JkZXItYmxvY2stc3RhcnQtd2lkdGg6MHB4O2JvcmRlci1ibG9jay1lbmQtd2lkdGg6MXB4fTpob3N0KFtwb3NpdGlvbj1ib3R0b21dW2JvcmRlcmVkXSkgc2VjdGlvbntib3JkZXItYmxvY2stc3RhcnQtd2lkdGg6MXB4O2JvcmRlci1ibG9jay1lbmQtd2lkdGg6MHB4fX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1gO1xuY2xhc3MgVGFicyBleHRlbmRzIExpdEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc2xvdFJlZiA9IGNyZWF0ZVJlZigpO1xuICAgIHRoaXMudGFicyA9IFtdO1xuICAgIHRoaXMudGl0bGVzID0gW107XG4gICAgdGhpcy5ib3JkZXJlZCA9IGZhbHNlO1xuICAgIHRoaXMubGF5b3V0ID0gXCJpbmxpbmVcIjtcbiAgICB0aGlzLnBvc2l0aW9uID0gXCJ0b3BcIjtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5saXN0ZW4oXCJjYWxjaXRlSW50ZXJuYWxUYWJOYXZTbG90Q2hhbmdlXCIsIHRoaXMuY2FsY2l0ZUludGVybmFsVGFiTmF2U2xvdENoYW5nZUhhbmRsZXIpO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyB0YWJzOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCB0aXRsZXM6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIGJvcmRlcmVkOiBbNSwge30sIHsgdHlwZTogQm9vbGVhbiB9XSwgbGF5b3V0OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgcG9zaXRpb246IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBzY2FsZTogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0gfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc3R5bGVzID0gc3R5bGVzO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy51cGRhdGVJdGVtcygpO1xuICB9XG4gIGxvYWQoKSB7XG4gICAgdGhpcy51cGRhdGVJdGVtcygpO1xuICB9XG4gIHdpbGxVcGRhdGUoY2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmhhcyhcInBvc2l0aW9uXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5wb3NpdGlvbiAhPT0gXCJ0b3BcIikgfHwgY2hhbmdlcy5oYXMoXCJzY2FsZVwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMuc2NhbGUgIT09IFwibVwiKSkge1xuICAgICAgdGhpcy51cGRhdGVJdGVtcygpO1xuICAgIH1cbiAgICBpZiAoKGNoYW5nZXMuaGFzKFwidGl0bGVzXCIpIHx8IGNoYW5nZXMuaGFzKFwidGFic1wiKSkgJiYgdGhpcy5oYXNVcGRhdGVkICYmIHRoaXMudGl0bGVzPy5sZW5ndGggPiAwICYmIHRoaXMudGFicz8ubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy51cGRhdGVBcmlhU2V0dGluZ3MoKTtcbiAgICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcbiAgICB9XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsVGFiTmF2U2xvdENoYW5nZUhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAoZXZlbnQuZGV0YWlsLmxlbmd0aCAhPT0gdGhpcy50aXRsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnRpdGxlcyA9IGV2ZW50LmRldGFpbDtcbiAgICB9XG4gIH1cbiAgZGVmYXVsdFNsb3RDaGFuZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgdGhpcy50YWJzID0gc2xvdENoYW5nZUdldEFzc2lnbmVkRWxlbWVudHMoZXZlbnQsIFwiY2FsY2l0ZS10YWJcIik7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQXJpYVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuY29tcG9uZW50T25SZWFkeSgpO1xuICAgIGlmICghdGhpcy5zbG90UmVmLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0YWJJZHM7XG4gICAgbGV0IHRpdGxlSWRzO1xuICAgIGNvbnN0IHRhYnMgPSBnZXRTbG90QXNzaWduZWRFbGVtZW50cyh0aGlzLnNsb3RSZWYudmFsdWUsIFwiY2FsY2l0ZS10YWJcIik7XG4gICAgaWYgKHRhYnMuc29tZSgoZWwpID0+IGVsLnRhYikgfHwgdGhpcy50aXRsZXMuc29tZSgoZWwpID0+IGVsLnRhYikpIHtcbiAgICAgIHRhYklkcyA9IHRhYnMuc29ydCgoYSwgYikgPT4gYS50YWIubG9jYWxlQ29tcGFyZShiLnRhYikpLm1hcCgoZWwpID0+IGVsLmlkKTtcbiAgICAgIHRpdGxlSWRzID0gdGhpcy50aXRsZXMuc29ydCgoYSwgYikgPT4gYS50YWIubG9jYWxlQ29tcGFyZShiLnRhYikpLm1hcCgoZWwpID0+IGVsLmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGFiRG9tSW5kZXhlcyA9IGF3YWl0IFByb21pc2UuYWxsKHRhYnMubWFwKChlbCkgPT4gZWwuZ2V0VGFiSW5kZXgoKSkpO1xuICAgICAgY29uc3QgdGl0bGVEb21JbmRleGVzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy50aXRsZXMubWFwKChlbCkgPT4gZWwuZ2V0VGFiSW5kZXgoKSkpO1xuICAgICAgdGFiSWRzID0gdGFiRG9tSW5kZXhlcy5yZWR1Y2UoKGlkcywgaW5kZXhJbkRPTSwgcmVnaXN0cnlJbmRleCkgPT4ge1xuICAgICAgICBpZHNbaW5kZXhJbkRPTV0gPSB0YWJzW3JlZ2lzdHJ5SW5kZXhdLmlkO1xuICAgICAgICByZXR1cm4gaWRzO1xuICAgICAgfSwgW10pO1xuICAgICAgdGl0bGVJZHMgPSB0aXRsZURvbUluZGV4ZXMucmVkdWNlKChpZHMsIGluZGV4SW5ET00sIHJlZ2lzdHJ5SW5kZXgpID0+IHtcbiAgICAgICAgaWRzW2luZGV4SW5ET01dID0gdGhpcy50aXRsZXNbcmVnaXN0cnlJbmRleF0uaWQ7XG4gICAgICAgIHJldHVybiBpZHM7XG4gICAgICB9LCBbXSk7XG4gICAgfVxuICAgIHRhYnMuZm9yRWFjaCgoZWwpID0+IGVsLl91cGRhdGVBcmlhSW5mbyh0YWJJZHMsIHRpdGxlSWRzKSk7XG4gICAgdGhpcy50aXRsZXMuZm9yRWFjaCgoZWwpID0+IGVsLl91cGRhdGVBcmlhSW5mbyh0YWJJZHMsIHRpdGxlSWRzKSk7XG4gIH1cbiAgdXBkYXRlSXRlbXMoKSB7XG4gICAgY29uc3QgeyBwb3NpdGlvbiwgc2NhbGUgfSA9IHRoaXM7XG4gICAgY29uc3QgbmF2ID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiY2FsY2l0ZS10YWItbmF2XCIpO1xuICAgIGlmIChuYXYpIHtcbiAgICAgIG5hdi5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgbmF2LnNjYWxlID0gc2NhbGU7XG4gICAgfVxuICAgIEFycmF5LmZyb20odGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FsY2l0ZS10YWJcIikpLmZvckVhY2goKHRhYikgPT4ge1xuICAgICAgaWYgKHRhYi5wYXJlbnRFbGVtZW50ID09PSB0aGlzLmVsKSB7XG4gICAgICAgIHRhYi5zY2FsZSA9IHNjYWxlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIEFycmF5LmZyb20odGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FsY2l0ZS10YWItbmF2ID4gY2FsY2l0ZS10YWItdGl0bGVcIikpLmZvckVhY2goKHRpdGxlKSA9PiB7XG4gICAgICB0aXRsZS5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgdGl0bGUuc2NhbGUgPSBzY2FsZTtcbiAgICB9KTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGh0bWxgPHNsb3QgbmFtZT0ke1NMT1RTLnRpdGxlR3JvdXB9Pjwvc2xvdD48c2VjdGlvbiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1Muc2VjdGlvbil9PjxzbG90IEBzbG90Y2hhbmdlPSR7dGhpcy5kZWZhdWx0U2xvdENoYW5nZUhhbmRsZXJ9ICR7cmVmKHRoaXMuc2xvdFJlZil9Pjwvc2xvdD48L3NlY3Rpb24+YDtcbiAgfVxufVxuY3VzdG9tRWxlbWVudChcImNhbGNpdGUtdGFic1wiLCBUYWJzKTtcbmV4cG9ydCB7XG4gIFRhYnNcbn07XG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jdXN0b21FbGVtZW50LmpzXCI7IiwiaW1wb3J0IGNvbG9yTmFtZXMgZnJvbSAnY29sb3ItbmFtZSc7XG5cbmNvbnN0IHJldmVyc2VOYW1lcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbi8vIENyZWF0ZSBhIGxpc3Qgb2YgcmV2ZXJzZSBjb2xvciBuYW1lc1xuZm9yIChjb25zdCBuYW1lIGluIGNvbG9yTmFtZXMpIHtcblx0aWYgKE9iamVjdC5oYXNPd24oY29sb3JOYW1lcywgbmFtZSkpIHtcblx0XHRyZXZlcnNlTmFtZXNbY29sb3JOYW1lc1tuYW1lXV0gPSBuYW1lO1xuXHR9XG59XG5cbmNvbnN0IGNzID0ge1xuXHR0bzoge30sXG5cdGdldDoge30sXG59O1xuXG5jcy5nZXQgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG5cdGNvbnN0IHByZWZpeCA9IHN0cmluZy5zbGljZSgwLCAzKS50b0xvd2VyQ2FzZSgpO1xuXHRsZXQgdmFsdWU7XG5cdGxldCBtb2RlbDtcblx0c3dpdGNoIChwcmVmaXgpIHtcblx0XHRjYXNlICdoc2wnOiB7XG5cdFx0XHR2YWx1ZSA9IGNzLmdldC5oc2woc3RyaW5nKTtcblx0XHRcdG1vZGVsID0gJ2hzbCc7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRjYXNlICdod2InOiB7XG5cdFx0XHR2YWx1ZSA9IGNzLmdldC5od2Ioc3RyaW5nKTtcblx0XHRcdG1vZGVsID0gJ2h3Yic7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRkZWZhdWx0OiB7XG5cdFx0XHR2YWx1ZSA9IGNzLmdldC5yZ2Ioc3RyaW5nKTtcblx0XHRcdG1vZGVsID0gJ3JnYic7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHRpZiAoIXZhbHVlKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4ge21vZGVsLCB2YWx1ZX07XG59O1xuXG5jcy5nZXQucmdiID0gZnVuY3Rpb24gKHN0cmluZykge1xuXHRpZiAoIXN0cmluZykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Y29uc3QgYWJiciA9IC9eIyhbYS1mXFxkXXszLDR9KSQvaTtcblx0Y29uc3QgaGV4ID0gL14jKFthLWZcXGRdezZ9KShbYS1mXFxkXXsyfSk/JC9pO1xuXHRjb25zdCByZ2JhID0gL15yZ2JhP1xcKFxccyooWystXT8oPzpcXGQqXFwuKT9cXGQrKD86ZVxcZCspPykoPz1bXFxzLF0pXFxzKig/OixcXHMqKT8oWystXT8oPzpcXGQqXFwuKT9cXGQrKD86ZVxcZCspPykoPz1bXFxzLF0pXFxzKig/OixcXHMqKT8oWystXT8oPzpcXGQqXFwuKT9cXGQrKD86ZVxcZCspPylcXHMqKD86W1xccyx8L11cXHMqKFsrLV0/KD86XFxkKlxcLik/XFxkKyg/OmVcXGQrKT8pKCU/KVxccyopP1xcKSQvaTtcblx0Y29uc3QgcGVyID0gL15yZ2JhP1xcKFxccyooWystXT9bXFxkLl0rKSVcXHMqLD9cXHMqKFsrLV0/W1xcZC5dKyklXFxzKiw/XFxzKihbKy1dP1tcXGQuXSspJVxccyooPzpbXFxzLHwvXVxccyooWystXT9bXFxkLl0rKSglPylcXHMqKT9cXCkkL2k7XG5cdGNvbnN0IGtleXdvcmQgPSAvXihcXHcrKSQvO1xuXG5cdGxldCByZ2IgPSBbMCwgMCwgMCwgMV07XG5cdGxldCBtYXRjaDtcblx0bGV0IGk7XG5cdGxldCBoZXhBbHBoYTtcblxuXHRpZiAobWF0Y2ggPSBzdHJpbmcubWF0Y2goaGV4KSkge1xuXHRcdGhleEFscGhhID0gbWF0Y2hbMl07XG5cdFx0bWF0Y2ggPSBtYXRjaFsxXTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRcdC8vIGh0dHBzOi8vanNwZXJmLmNvbS9zbGljZS12cy1zdWJzdHItdnMtc3Vic3RyaW5nLW1ldGhvZHMtbG9uZy1zdHJpbmcvMTlcblx0XHRcdGNvbnN0IGkyID0gaSAqIDI7XG5cdFx0XHRyZ2JbaV0gPSBOdW1iZXIucGFyc2VJbnQobWF0Y2guc2xpY2UoaTIsIGkyICsgMiksIDE2KTtcblx0XHR9XG5cblx0XHRpZiAoaGV4QWxwaGEpIHtcblx0XHRcdHJnYlszXSA9IE51bWJlci5wYXJzZUludChoZXhBbHBoYSwgMTYpIC8gMjU1O1xuXHRcdH1cblx0fSBlbHNlIGlmIChtYXRjaCA9IHN0cmluZy5tYXRjaChhYmJyKSkge1xuXHRcdG1hdGNoID0gbWF0Y2hbMV07XG5cdFx0aGV4QWxwaGEgPSBtYXRjaFszXTtcblxuXHRcdGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRcdHJnYltpXSA9IE51bWJlci5wYXJzZUludChtYXRjaFtpXSArIG1hdGNoW2ldLCAxNik7XG5cdFx0fVxuXG5cdFx0aWYgKGhleEFscGhhKSB7XG5cdFx0XHRyZ2JbM10gPSBOdW1iZXIucGFyc2VJbnQoaGV4QWxwaGEgKyBoZXhBbHBoYSwgMTYpIC8gMjU1O1xuXHRcdH1cblx0fSBlbHNlIGlmIChtYXRjaCA9IHN0cmluZy5tYXRjaChyZ2JhKSkge1xuXHRcdGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRcdHJnYltpXSA9IE51bWJlci5wYXJzZUZsb2F0KG1hdGNoW2kgKyAxXSk7XG5cdFx0fVxuXG5cdFx0aWYgKG1hdGNoWzRdKSB7XG5cdFx0XHRyZ2JbM10gPSBtYXRjaFs1XSA/IE51bWJlci5wYXJzZUZsb2F0KG1hdGNoWzRdKSAqIDAuMDEgOiBOdW1iZXIucGFyc2VGbG9hdChtYXRjaFs0XSk7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG1hdGNoID0gc3RyaW5nLm1hdGNoKHBlcikpIHtcblx0XHRmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cdFx0XHRyZ2JbaV0gPSBNYXRoLnJvdW5kKE51bWJlci5wYXJzZUZsb2F0KG1hdGNoW2kgKyAxXSkgKiAyLjU1KTtcblx0XHR9XG5cblx0XHRpZiAobWF0Y2hbNF0pIHtcblx0XHRcdHJnYlszXSA9IG1hdGNoWzVdID8gTnVtYmVyLnBhcnNlRmxvYXQobWF0Y2hbNF0pICogMC4wMSA6IE51bWJlci5wYXJzZUZsb2F0KG1hdGNoWzRdKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAobWF0Y2ggPSBzdHJpbmcudG9Mb3dlckNhc2UoKS5tYXRjaChrZXl3b3JkKSkge1xuXHRcdGlmIChtYXRjaFsxXSA9PT0gJ3RyYW5zcGFyZW50Jykge1xuXHRcdFx0cmV0dXJuIFswLCAwLCAwLCAwXTtcblx0XHR9XG5cblx0XHRpZiAoIU9iamVjdC5oYXNPd24oY29sb3JOYW1lcywgbWF0Y2hbMV0pKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItc3ByZWFkXG5cdFx0cmdiID0gY29sb3JOYW1lc1ttYXRjaFsxXV0uc2xpY2UoKTtcblx0XHRyZ2JbM10gPSAxO1xuXG5cdFx0cmV0dXJuIHJnYjtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcblx0XHRyZ2JbaV0gPSBjbGFtcChyZ2JbaV0sIDAsIDI1NSk7XG5cdH1cblxuXHRyZ2JbM10gPSBjbGFtcChyZ2JbM10sIDAsIDEpO1xuXG5cdHJldHVybiByZ2I7XG59O1xuXG5jcy5nZXQuaHNsID0gZnVuY3Rpb24gKHN0cmluZykge1xuXHRpZiAoIXN0cmluZykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Y29uc3QgaHNsID0gL15oc2xhP1xcKFxccyooWystXT8oPzpcXGR7MCwzfVxcLik/XFxkKykoPzpkZWcpP1xccyosP1xccyooWystXT9bXFxkLl0rKSVcXHMqLD9cXHMqKFsrLV0/W1xcZC5dKyklXFxzKig/OlssfC9dXFxzKihbKy1dPyg/PVxcLlxcZHxcXGQpKD86MHxbMS05XVxcZCopPyg/OlxcLlxcZCopPyg/OmVbKy1dP1xcZCspPylcXHMqKT9cXCkkL2k7XG5cdGNvbnN0IG1hdGNoID0gc3RyaW5nLm1hdGNoKGhzbCk7XG5cblx0aWYgKG1hdGNoKSB7XG5cdFx0Y29uc3QgYWxwaGEgPSBOdW1iZXIucGFyc2VGbG9hdChtYXRjaFs0XSk7XG5cdFx0Y29uc3QgaCA9ICgoTnVtYmVyLnBhcnNlRmxvYXQobWF0Y2hbMV0pICUgMzYwKSArIDM2MCkgJSAzNjA7XG5cdFx0Y29uc3QgcyA9IGNsYW1wKE51bWJlci5wYXJzZUZsb2F0KG1hdGNoWzJdKSwgMCwgMTAwKTtcblx0XHRjb25zdCBsID0gY2xhbXAoTnVtYmVyLnBhcnNlRmxvYXQobWF0Y2hbM10pLCAwLCAxMDApO1xuXHRcdGNvbnN0IGEgPSBjbGFtcChOdW1iZXIuaXNOYU4oYWxwaGEpID8gMSA6IGFscGhhLCAwLCAxKTtcblxuXHRcdHJldHVybiBbaCwgcywgbCwgYV07XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbmNzLmdldC5od2IgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG5cdGlmICghc3RyaW5nKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRjb25zdCBod2IgPSAvXmh3YlxcKFxccyooWystXT9cXGR7MCwzfSg/OlxcLlxcZCspPykoPzpkZWcpP1xccypbXFxzLF1cXHMqKFsrLV0/W1xcZC5dKyklXFxzKltcXHMsXVxccyooWystXT9bXFxkLl0rKSVcXHMqKD86W1xccyxdXFxzKihbKy1dPyg/PVxcLlxcZHxcXGQpKD86MHxbMS05XVxcZCopPyg/OlxcLlxcZCopPyg/OmVbKy1dP1xcZCspPylcXHMqKT9cXCkkL2k7XG5cdGNvbnN0IG1hdGNoID0gc3RyaW5nLm1hdGNoKGh3Yik7XG5cblx0aWYgKG1hdGNoKSB7XG5cdFx0Y29uc3QgYWxwaGEgPSBOdW1iZXIucGFyc2VGbG9hdChtYXRjaFs0XSk7XG5cdFx0Y29uc3QgaCA9ICgoTnVtYmVyLnBhcnNlRmxvYXQobWF0Y2hbMV0pICUgMzYwKSArIDM2MCkgJSAzNjA7XG5cdFx0Y29uc3QgdyA9IGNsYW1wKE51bWJlci5wYXJzZUZsb2F0KG1hdGNoWzJdKSwgMCwgMTAwKTtcblx0XHRjb25zdCBiID0gY2xhbXAoTnVtYmVyLnBhcnNlRmxvYXQobWF0Y2hbM10pLCAwLCAxMDApO1xuXHRcdGNvbnN0IGEgPSBjbGFtcChOdW1iZXIuaXNOYU4oYWxwaGEpID8gMSA6IGFscGhhLCAwLCAxKTtcblx0XHRyZXR1cm4gW2gsIHcsIGIsIGFdO1xuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59O1xuXG5jcy50by5oZXggPSBmdW5jdGlvbiAoLi4ucmdiYSkge1xuXHRyZXR1cm4gKFxuXHRcdCcjJyArXG5cdFx0aGV4RG91YmxlKHJnYmFbMF0pICtcblx0XHRoZXhEb3VibGUocmdiYVsxXSkgK1xuXHRcdGhleERvdWJsZShyZ2JhWzJdKSArXG5cdFx0KHJnYmFbM10gPCAxXG5cdFx0XHQ/IChoZXhEb3VibGUoTWF0aC5yb3VuZChyZ2JhWzNdICogMjU1KSkpXG5cdFx0XHQ6ICcnKVxuXHQpO1xufTtcblxuY3MudG8ucmdiID0gZnVuY3Rpb24gKC4uLnJnYmEpIHtcblx0cmV0dXJuIHJnYmEubGVuZ3RoIDwgNCB8fCByZ2JhWzNdID09PSAxXG5cdFx0PyAncmdiKCcgKyBNYXRoLnJvdW5kKHJnYmFbMF0pICsgJywgJyArIE1hdGgucm91bmQocmdiYVsxXSkgKyAnLCAnICsgTWF0aC5yb3VuZChyZ2JhWzJdKSArICcpJ1xuXHRcdDogJ3JnYmEoJyArIE1hdGgucm91bmQocmdiYVswXSkgKyAnLCAnICsgTWF0aC5yb3VuZChyZ2JhWzFdKSArICcsICcgKyBNYXRoLnJvdW5kKHJnYmFbMl0pICsgJywgJyArIHJnYmFbM10gKyAnKSc7XG59O1xuXG5jcy50by5yZ2IucGVyY2VudCA9IGZ1bmN0aW9uICguLi5yZ2JhKSB7XG5cdGNvbnN0IHIgPSBNYXRoLnJvdW5kKHJnYmFbMF0gLyAyNTUgKiAxMDApO1xuXHRjb25zdCBnID0gTWF0aC5yb3VuZChyZ2JhWzFdIC8gMjU1ICogMTAwKTtcblx0Y29uc3QgYiA9IE1hdGgucm91bmQocmdiYVsyXSAvIDI1NSAqIDEwMCk7XG5cblx0cmV0dXJuIHJnYmEubGVuZ3RoIDwgNCB8fCByZ2JhWzNdID09PSAxXG5cdFx0PyAncmdiKCcgKyByICsgJyUsICcgKyBnICsgJyUsICcgKyBiICsgJyUpJ1xuXHRcdDogJ3JnYmEoJyArIHIgKyAnJSwgJyArIGcgKyAnJSwgJyArIGIgKyAnJSwgJyArIHJnYmFbM10gKyAnKSc7XG59O1xuXG5jcy50by5oc2wgPSBmdW5jdGlvbiAoLi4uaHNsYSkge1xuXHRyZXR1cm4gaHNsYS5sZW5ndGggPCA0IHx8IGhzbGFbM10gPT09IDFcblx0XHQ/ICdoc2woJyArIGhzbGFbMF0gKyAnLCAnICsgaHNsYVsxXSArICclLCAnICsgaHNsYVsyXSArICclKSdcblx0XHQ6ICdoc2xhKCcgKyBoc2xhWzBdICsgJywgJyArIGhzbGFbMV0gKyAnJSwgJyArIGhzbGFbMl0gKyAnJSwgJyArIGhzbGFbM10gKyAnKSc7XG59O1xuXG4vLyBId2IgaXMgYSBiaXQgZGlmZmVyZW50IHRoYW4gcmdiKGEpICYgaHNsKGEpIHNpbmNlIHRoZXJlIGlzIG5vIGFscGhhIHNwZWNpZmljIHN5bnRheFxuLy8gKGh3YiBoYXZlIGFscGhhIG9wdGlvbmFsICYgMSBpcyBkZWZhdWx0IHZhbHVlKVxuY3MudG8uaHdiID0gZnVuY3Rpb24gKC4uLmh3YmEpIHtcblx0bGV0IGEgPSAnJztcblx0aWYgKGh3YmEubGVuZ3RoID49IDQgJiYgaHdiYVszXSAhPT0gMSkge1xuXHRcdGEgPSAnLCAnICsgaHdiYVszXTtcblx0fVxuXG5cdHJldHVybiAnaHdiKCcgKyBod2JhWzBdICsgJywgJyArIGh3YmFbMV0gKyAnJSwgJyArIGh3YmFbMl0gKyAnJScgKyBhICsgJyknO1xufTtcblxuY3MudG8ua2V5d29yZCA9IGZ1bmN0aW9uICguLi5yZ2IpIHtcblx0cmV0dXJuIHJldmVyc2VOYW1lc1tyZ2Iuc2xpY2UoMCwgMyldO1xufTtcblxuLy8gSGVscGVyc1xuZnVuY3Rpb24gY2xhbXAobnVtYmVyXywgbWluLCBtYXgpIHtcblx0cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KG1pbiwgbnVtYmVyXyksIG1heCk7XG59XG5cbmZ1bmN0aW9uIGhleERvdWJsZShudW1iZXJfKSB7XG5cdGNvbnN0IHN0cmluZ18gPSBNYXRoLnJvdW5kKG51bWJlcl8pLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHRyZXR1cm4gKHN0cmluZ18ubGVuZ3RoIDwgMikgPyAnMCcgKyBzdHJpbmdfIDogc3RyaW5nXztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY3M7XG4iLCJjb25zdCBjb2xvcnMgPSB7XG5cdGFsaWNlYmx1ZTogWzI0MCwgMjQ4LCAyNTVdLFxuXHRhbnRpcXVld2hpdGU6IFsyNTAsIDIzNSwgMjE1XSxcblx0YXF1YTogWzAsIDI1NSwgMjU1XSxcblx0YXF1YW1hcmluZTogWzEyNywgMjU1LCAyMTJdLFxuXHRhenVyZTogWzI0MCwgMjU1LCAyNTVdLFxuXHRiZWlnZTogWzI0NSwgMjQ1LCAyMjBdLFxuXHRiaXNxdWU6IFsyNTUsIDIyOCwgMTk2XSxcblx0YmxhY2s6IFswLCAwLCAwXSxcblx0YmxhbmNoZWRhbG1vbmQ6IFsyNTUsIDIzNSwgMjA1XSxcblx0Ymx1ZTogWzAsIDAsIDI1NV0sXG5cdGJsdWV2aW9sZXQ6IFsxMzgsIDQzLCAyMjZdLFxuXHRicm93bjogWzE2NSwgNDIsIDQyXSxcblx0YnVybHl3b29kOiBbMjIyLCAxODQsIDEzNV0sXG5cdGNhZGV0Ymx1ZTogWzk1LCAxNTgsIDE2MF0sXG5cdGNoYXJ0cmV1c2U6IFsxMjcsIDI1NSwgMF0sXG5cdGNob2NvbGF0ZTogWzIxMCwgMTA1LCAzMF0sXG5cdGNvcmFsOiBbMjU1LCAxMjcsIDgwXSxcblx0Y29ybmZsb3dlcmJsdWU6IFsxMDAsIDE0OSwgMjM3XSxcblx0Y29ybnNpbGs6IFsyNTUsIDI0OCwgMjIwXSxcblx0Y3JpbXNvbjogWzIyMCwgMjAsIDYwXSxcblx0Y3lhbjogWzAsIDI1NSwgMjU1XSxcblx0ZGFya2JsdWU6IFswLCAwLCAxMzldLFxuXHRkYXJrY3lhbjogWzAsIDEzOSwgMTM5XSxcblx0ZGFya2dvbGRlbnJvZDogWzE4NCwgMTM0LCAxMV0sXG5cdGRhcmtncmF5OiBbMTY5LCAxNjksIDE2OV0sXG5cdGRhcmtncmVlbjogWzAsIDEwMCwgMF0sXG5cdGRhcmtncmV5OiBbMTY5LCAxNjksIDE2OV0sXG5cdGRhcmtraGFraTogWzE4OSwgMTgzLCAxMDddLFxuXHRkYXJrbWFnZW50YTogWzEzOSwgMCwgMTM5XSxcblx0ZGFya29saXZlZ3JlZW46IFs4NSwgMTA3LCA0N10sXG5cdGRhcmtvcmFuZ2U6IFsyNTUsIDE0MCwgMF0sXG5cdGRhcmtvcmNoaWQ6IFsxNTMsIDUwLCAyMDRdLFxuXHRkYXJrcmVkOiBbMTM5LCAwLCAwXSxcblx0ZGFya3NhbG1vbjogWzIzMywgMTUwLCAxMjJdLFxuXHRkYXJrc2VhZ3JlZW46IFsxNDMsIDE4OCwgMTQzXSxcblx0ZGFya3NsYXRlYmx1ZTogWzcyLCA2MSwgMTM5XSxcblx0ZGFya3NsYXRlZ3JheTogWzQ3LCA3OSwgNzldLFxuXHRkYXJrc2xhdGVncmV5OiBbNDcsIDc5LCA3OV0sXG5cdGRhcmt0dXJxdW9pc2U6IFswLCAyMDYsIDIwOV0sXG5cdGRhcmt2aW9sZXQ6IFsxNDgsIDAsIDIxMV0sXG5cdGRlZXBwaW5rOiBbMjU1LCAyMCwgMTQ3XSxcblx0ZGVlcHNreWJsdWU6IFswLCAxOTEsIDI1NV0sXG5cdGRpbWdyYXk6IFsxMDUsIDEwNSwgMTA1XSxcblx0ZGltZ3JleTogWzEwNSwgMTA1LCAxMDVdLFxuXHRkb2RnZXJibHVlOiBbMzAsIDE0NCwgMjU1XSxcblx0ZmlyZWJyaWNrOiBbMTc4LCAzNCwgMzRdLFxuXHRmbG9yYWx3aGl0ZTogWzI1NSwgMjUwLCAyNDBdLFxuXHRmb3Jlc3RncmVlbjogWzM0LCAxMzksIDM0XSxcblx0ZnVjaHNpYTogWzI1NSwgMCwgMjU1XSxcblx0Z2FpbnNib3JvOiBbMjIwLCAyMjAsIDIyMF0sXG5cdGdob3N0d2hpdGU6IFsyNDgsIDI0OCwgMjU1XSxcblx0Z29sZDogWzI1NSwgMjE1LCAwXSxcblx0Z29sZGVucm9kOiBbMjE4LCAxNjUsIDMyXSxcblx0Z3JheTogWzEyOCwgMTI4LCAxMjhdLFxuXHRncmVlbjogWzAsIDEyOCwgMF0sXG5cdGdyZWVueWVsbG93OiBbMTczLCAyNTUsIDQ3XSxcblx0Z3JleTogWzEyOCwgMTI4LCAxMjhdLFxuXHRob25leWRldzogWzI0MCwgMjU1LCAyNDBdLFxuXHRob3RwaW5rOiBbMjU1LCAxMDUsIDE4MF0sXG5cdGluZGlhbnJlZDogWzIwNSwgOTIsIDkyXSxcblx0aW5kaWdvOiBbNzUsIDAsIDEzMF0sXG5cdGl2b3J5OiBbMjU1LCAyNTUsIDI0MF0sXG5cdGtoYWtpOiBbMjQwLCAyMzAsIDE0MF0sXG5cdGxhdmVuZGVyOiBbMjMwLCAyMzAsIDI1MF0sXG5cdGxhdmVuZGVyYmx1c2g6IFsyNTUsIDI0MCwgMjQ1XSxcblx0bGF3bmdyZWVuOiBbMTI0LCAyNTIsIDBdLFxuXHRsZW1vbmNoaWZmb246IFsyNTUsIDI1MCwgMjA1XSxcblx0bGlnaHRibHVlOiBbMTczLCAyMTYsIDIzMF0sXG5cdGxpZ2h0Y29yYWw6IFsyNDAsIDEyOCwgMTI4XSxcblx0bGlnaHRjeWFuOiBbMjI0LCAyNTUsIDI1NV0sXG5cdGxpZ2h0Z29sZGVucm9keWVsbG93OiBbMjUwLCAyNTAsIDIxMF0sXG5cdGxpZ2h0Z3JheTogWzIxMSwgMjExLCAyMTFdLFxuXHRsaWdodGdyZWVuOiBbMTQ0LCAyMzgsIDE0NF0sXG5cdGxpZ2h0Z3JleTogWzIxMSwgMjExLCAyMTFdLFxuXHRsaWdodHBpbms6IFsyNTUsIDE4MiwgMTkzXSxcblx0bGlnaHRzYWxtb246IFsyNTUsIDE2MCwgMTIyXSxcblx0bGlnaHRzZWFncmVlbjogWzMyLCAxNzgsIDE3MF0sXG5cdGxpZ2h0c2t5Ymx1ZTogWzEzNSwgMjA2LCAyNTBdLFxuXHRsaWdodHNsYXRlZ3JheTogWzExOSwgMTM2LCAxNTNdLFxuXHRsaWdodHNsYXRlZ3JleTogWzExOSwgMTM2LCAxNTNdLFxuXHRsaWdodHN0ZWVsYmx1ZTogWzE3NiwgMTk2LCAyMjJdLFxuXHRsaWdodHllbGxvdzogWzI1NSwgMjU1LCAyMjRdLFxuXHRsaW1lOiBbMCwgMjU1LCAwXSxcblx0bGltZWdyZWVuOiBbNTAsIDIwNSwgNTBdLFxuXHRsaW5lbjogWzI1MCwgMjQwLCAyMzBdLFxuXHRtYWdlbnRhOiBbMjU1LCAwLCAyNTVdLFxuXHRtYXJvb246IFsxMjgsIDAsIDBdLFxuXHRtZWRpdW1hcXVhbWFyaW5lOiBbMTAyLCAyMDUsIDE3MF0sXG5cdG1lZGl1bWJsdWU6IFswLCAwLCAyMDVdLFxuXHRtZWRpdW1vcmNoaWQ6IFsxODYsIDg1LCAyMTFdLFxuXHRtZWRpdW1wdXJwbGU6IFsxNDcsIDExMiwgMjE5XSxcblx0bWVkaXVtc2VhZ3JlZW46IFs2MCwgMTc5LCAxMTNdLFxuXHRtZWRpdW1zbGF0ZWJsdWU6IFsxMjMsIDEwNCwgMjM4XSxcblx0bWVkaXVtc3ByaW5nZ3JlZW46IFswLCAyNTAsIDE1NF0sXG5cdG1lZGl1bXR1cnF1b2lzZTogWzcyLCAyMDksIDIwNF0sXG5cdG1lZGl1bXZpb2xldHJlZDogWzE5OSwgMjEsIDEzM10sXG5cdG1pZG5pZ2h0Ymx1ZTogWzI1LCAyNSwgMTEyXSxcblx0bWludGNyZWFtOiBbMjQ1LCAyNTUsIDI1MF0sXG5cdG1pc3R5cm9zZTogWzI1NSwgMjI4LCAyMjVdLFxuXHRtb2NjYXNpbjogWzI1NSwgMjI4LCAxODFdLFxuXHRuYXZham93aGl0ZTogWzI1NSwgMjIyLCAxNzNdLFxuXHRuYXZ5OiBbMCwgMCwgMTI4XSxcblx0b2xkbGFjZTogWzI1MywgMjQ1LCAyMzBdLFxuXHRvbGl2ZTogWzEyOCwgMTI4LCAwXSxcblx0b2xpdmVkcmFiOiBbMTA3LCAxNDIsIDM1XSxcblx0b3JhbmdlOiBbMjU1LCAxNjUsIDBdLFxuXHRvcmFuZ2VyZWQ6IFsyNTUsIDY5LCAwXSxcblx0b3JjaGlkOiBbMjE4LCAxMTIsIDIxNF0sXG5cdHBhbGVnb2xkZW5yb2Q6IFsyMzgsIDIzMiwgMTcwXSxcblx0cGFsZWdyZWVuOiBbMTUyLCAyNTEsIDE1Ml0sXG5cdHBhbGV0dXJxdW9pc2U6IFsxNzUsIDIzOCwgMjM4XSxcblx0cGFsZXZpb2xldHJlZDogWzIxOSwgMTEyLCAxNDddLFxuXHRwYXBheWF3aGlwOiBbMjU1LCAyMzksIDIxM10sXG5cdHBlYWNocHVmZjogWzI1NSwgMjE4LCAxODVdLFxuXHRwZXJ1OiBbMjA1LCAxMzMsIDYzXSxcblx0cGluazogWzI1NSwgMTkyLCAyMDNdLFxuXHRwbHVtOiBbMjIxLCAxNjAsIDIyMV0sXG5cdHBvd2RlcmJsdWU6IFsxNzYsIDIyNCwgMjMwXSxcblx0cHVycGxlOiBbMTI4LCAwLCAxMjhdLFxuXHRyZWJlY2NhcHVycGxlOiBbMTAyLCA1MSwgMTUzXSxcblx0cmVkOiBbMjU1LCAwLCAwXSxcblx0cm9zeWJyb3duOiBbMTg4LCAxNDMsIDE0M10sXG5cdHJveWFsYmx1ZTogWzY1LCAxMDUsIDIyNV0sXG5cdHNhZGRsZWJyb3duOiBbMTM5LCA2OSwgMTldLFxuXHRzYWxtb246IFsyNTAsIDEyOCwgMTE0XSxcblx0c2FuZHlicm93bjogWzI0NCwgMTY0LCA5Nl0sXG5cdHNlYWdyZWVuOiBbNDYsIDEzOSwgODddLFxuXHRzZWFzaGVsbDogWzI1NSwgMjQ1LCAyMzhdLFxuXHRzaWVubmE6IFsxNjAsIDgyLCA0NV0sXG5cdHNpbHZlcjogWzE5MiwgMTkyLCAxOTJdLFxuXHRza3libHVlOiBbMTM1LCAyMDYsIDIzNV0sXG5cdHNsYXRlYmx1ZTogWzEwNiwgOTAsIDIwNV0sXG5cdHNsYXRlZ3JheTogWzExMiwgMTI4LCAxNDRdLFxuXHRzbGF0ZWdyZXk6IFsxMTIsIDEyOCwgMTQ0XSxcblx0c25vdzogWzI1NSwgMjUwLCAyNTBdLFxuXHRzcHJpbmdncmVlbjogWzAsIDI1NSwgMTI3XSxcblx0c3RlZWxibHVlOiBbNzAsIDEzMCwgMTgwXSxcblx0dGFuOiBbMjEwLCAxODAsIDE0MF0sXG5cdHRlYWw6IFswLCAxMjgsIDEyOF0sXG5cdHRoaXN0bGU6IFsyMTYsIDE5MSwgMjE2XSxcblx0dG9tYXRvOiBbMjU1LCA5OSwgNzFdLFxuXHR0dXJxdW9pc2U6IFs2NCwgMjI0LCAyMDhdLFxuXHR2aW9sZXQ6IFsyMzgsIDEzMCwgMjM4XSxcblx0d2hlYXQ6IFsyNDUsIDIyMiwgMTc5XSxcblx0d2hpdGU6IFsyNTUsIDI1NSwgMjU1XSxcblx0d2hpdGVzbW9rZTogWzI0NSwgMjQ1LCAyNDVdLFxuXHR5ZWxsb3c6IFsyNTUsIDI1NSwgMF0sXG5cdHllbGxvd2dyZWVuOiBbMTU0LCAyMDUsIDUwXSxcbn1cblxuZm9yIChjb25zdCBrZXkgaW4gY29sb3JzKSBPYmplY3QuZnJlZXplKGNvbG9yc1trZXldKTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoY29sb3JzKTsiLCJpbXBvcnQgY29sb3JTdHJpbmcgZnJvbSAnY29sb3Itc3RyaW5nJztcbmltcG9ydCBjb252ZXJ0IGZyb20gJ2NvbG9yLWNvbnZlcnQnO1xuXG5jb25zdCBza2lwcGVkTW9kZWxzID0gW1xuXHQvLyBUbyBiZSBob25lc3QsIEkgZG9uJ3QgcmVhbGx5IGZlZWwgbGlrZSBrZXl3b3JkIGJlbG9uZ3MgaW4gY29sb3IgY29udmVydCwgYnV0IGVoLlxuXHQna2V5d29yZCcsXG5cblx0Ly8gR3JheSBjb25mbGljdHMgd2l0aCBzb21lIG1ldGhvZCBuYW1lcywgYW5kIGhhcyBpdHMgb3duIG1ldGhvZCBkZWZpbmVkLlxuXHQnZ3JheScsXG5cblx0Ly8gU2hvdWxkbid0IHJlYWxseSBiZSBpbiBjb2xvci1jb252ZXJ0IGVpdGhlci4uLlxuXHQnaGV4Jyxcbl07XG5cbmNvbnN0IGhhc2hlZE1vZGVsS2V5cyA9IHt9O1xuZm9yIChjb25zdCBtb2RlbCBvZiBPYmplY3Qua2V5cyhjb252ZXJ0KSkge1xuXHRoYXNoZWRNb2RlbEtleXNbWy4uLmNvbnZlcnRbbW9kZWxdLmxhYmVsc10uc29ydCgpLmpvaW4oJycpXSA9IG1vZGVsO1xufVxuXG5jb25zdCBsaW1pdGVycyA9IHt9O1xuXG5mdW5jdGlvbiBDb2xvcihvYmplY3QsIG1vZGVsKSB7XG5cdGlmICghKHRoaXMgaW5zdGFuY2VvZiBDb2xvcikpIHtcblx0XHRyZXR1cm4gbmV3IENvbG9yKG9iamVjdCwgbW9kZWwpO1xuXHR9XG5cblx0aWYgKG1vZGVsICYmIG1vZGVsIGluIHNraXBwZWRNb2RlbHMpIHtcblx0XHRtb2RlbCA9IG51bGw7XG5cdH1cblxuXHRpZiAobW9kZWwgJiYgIShtb2RlbCBpbiBjb252ZXJ0KSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignVW5rbm93biBtb2RlbDogJyArIG1vZGVsKTtcblx0fVxuXG5cdGxldCBpO1xuXHRsZXQgY2hhbm5lbHM7XG5cblx0aWYgKG9iamVjdCA9PSBudWxsKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXEtbnVsbCxlcWVxZXFcblx0XHR0aGlzLm1vZGVsID0gJ3JnYic7XG5cdFx0dGhpcy5jb2xvciA9IFswLCAwLCAwXTtcblx0XHR0aGlzLnZhbHBoYSA9IDE7XG5cdH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgQ29sb3IpIHtcblx0XHR0aGlzLm1vZGVsID0gb2JqZWN0Lm1vZGVsO1xuXHRcdHRoaXMuY29sb3IgPSBbLi4ub2JqZWN0LmNvbG9yXTtcblx0XHR0aGlzLnZhbHBoYSA9IG9iamVjdC52YWxwaGE7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZycpIHtcblx0XHRjb25zdCByZXN1bHQgPSBjb2xvclN0cmluZy5nZXQob2JqZWN0KTtcblx0XHRpZiAocmVzdWx0ID09PSBudWxsKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBwYXJzZSBjb2xvciBmcm9tIHN0cmluZzogJyArIG9iamVjdCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5tb2RlbCA9IHJlc3VsdC5tb2RlbDtcblx0XHRjaGFubmVscyA9IGNvbnZlcnRbdGhpcy5tb2RlbF0uY2hhbm5lbHM7XG5cdFx0dGhpcy5jb2xvciA9IHJlc3VsdC52YWx1ZS5zbGljZSgwLCBjaGFubmVscyk7XG5cdFx0dGhpcy52YWxwaGEgPSB0eXBlb2YgcmVzdWx0LnZhbHVlW2NoYW5uZWxzXSA9PT0gJ251bWJlcicgPyByZXN1bHQudmFsdWVbY2hhbm5lbHNdIDogMTtcblx0fSBlbHNlIGlmIChvYmplY3QubGVuZ3RoID4gMCkge1xuXHRcdHRoaXMubW9kZWwgPSBtb2RlbCB8fCAncmdiJztcblx0XHRjaGFubmVscyA9IGNvbnZlcnRbdGhpcy5tb2RlbF0uY2hhbm5lbHM7XG5cdFx0Y29uc3QgbmV3QXJyYXkgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmplY3QsIDAsIGNoYW5uZWxzKTtcblx0XHR0aGlzLmNvbG9yID0gemVyb0FycmF5KG5ld0FycmF5LCBjaGFubmVscyk7XG5cdFx0dGhpcy52YWxwaGEgPSB0eXBlb2Ygb2JqZWN0W2NoYW5uZWxzXSA9PT0gJ251bWJlcicgPyBvYmplY3RbY2hhbm5lbHNdIDogMTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAnbnVtYmVyJykge1xuXHRcdC8vIFRoaXMgaXMgYWx3YXlzIFJHQiAtIGNhbiBiZSBjb252ZXJ0ZWQgbGF0ZXIgb24uXG5cdFx0dGhpcy5tb2RlbCA9ICdyZ2InO1xuXHRcdHRoaXMuY29sb3IgPSBbXG5cdFx0XHQob2JqZWN0ID4+IDE2KSAmIDB4RkYsXG5cdFx0XHQob2JqZWN0ID4+IDgpICYgMHhGRixcblx0XHRcdG9iamVjdCAmIDB4RkYsXG5cdFx0XTtcblx0XHR0aGlzLnZhbHBoYSA9IDE7XG5cdH0gZWxzZSB7XG5cdFx0dGhpcy52YWxwaGEgPSAxO1xuXG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cdFx0aWYgKCdhbHBoYScgaW4gb2JqZWN0KSB7XG5cdFx0XHRrZXlzLnNwbGljZShrZXlzLmluZGV4T2YoJ2FscGhhJyksIDEpO1xuXHRcdFx0dGhpcy52YWxwaGEgPSB0eXBlb2Ygb2JqZWN0LmFscGhhID09PSAnbnVtYmVyJyA/IG9iamVjdC5hbHBoYSA6IDA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaGFzaGVkS2V5cyA9IGtleXMuc29ydCgpLmpvaW4oJycpO1xuXHRcdGlmICghKGhhc2hlZEtleXMgaW4gaGFzaGVkTW9kZWxLZXlzKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gcGFyc2UgY29sb3IgZnJvbSBvYmplY3Q6ICcgKyBKU09OLnN0cmluZ2lmeShvYmplY3QpKTtcblx0XHR9XG5cblx0XHR0aGlzLm1vZGVsID0gaGFzaGVkTW9kZWxLZXlzW2hhc2hlZEtleXNdO1xuXG5cdFx0Y29uc3Qge2xhYmVsc30gPSBjb252ZXJ0W3RoaXMubW9kZWxdO1xuXHRcdGNvbnN0IGNvbG9yID0gW107XG5cdFx0Zm9yIChpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29sb3IucHVzaChvYmplY3RbbGFiZWxzW2ldXSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5jb2xvciA9IHplcm9BcnJheShjb2xvcik7XG5cdH1cblxuXHQvLyBQZXJmb3JtIGxpbWl0YXRpb25zIChjbGFtcGluZywgZXRjLilcblx0aWYgKGxpbWl0ZXJzW3RoaXMubW9kZWxdKSB7XG5cdFx0Y2hhbm5lbHMgPSBjb252ZXJ0W3RoaXMubW9kZWxdLmNoYW5uZWxzO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBjaGFubmVsczsgaSsrKSB7XG5cdFx0XHRjb25zdCBsaW1pdCA9IGxpbWl0ZXJzW3RoaXMubW9kZWxdW2ldO1xuXHRcdFx0aWYgKGxpbWl0KSB7XG5cdFx0XHRcdHRoaXMuY29sb3JbaV0gPSBsaW1pdCh0aGlzLmNvbG9yW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR0aGlzLnZhbHBoYSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHRoaXMudmFscGhhKSk7XG5cblx0aWYgKE9iamVjdC5mcmVlemUpIHtcblx0XHRPYmplY3QuZnJlZXplKHRoaXMpO1xuXHR9XG59XG5cbkNvbG9yLnByb3RvdHlwZSA9IHtcblx0dG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3RyaW5nKCk7XG5cdH0sXG5cblx0dG9KU09OKCkge1xuXHRcdHJldHVybiB0aGlzW3RoaXMubW9kZWxdKCk7XG5cdH0sXG5cblx0c3RyaW5nKHBsYWNlcykge1xuXHRcdGxldCBzZWxmID0gdGhpcy5tb2RlbCBpbiBjb2xvclN0cmluZy50byA/IHRoaXMgOiB0aGlzLnJnYigpO1xuXHRcdHNlbGYgPSBzZWxmLnJvdW5kKHR5cGVvZiBwbGFjZXMgPT09ICdudW1iZXInID8gcGxhY2VzIDogMSk7XG5cdFx0Y29uc3QgYXJndW1lbnRzXyA9IHNlbGYudmFscGhhID09PSAxID8gc2VsZi5jb2xvciA6IFsuLi5zZWxmLmNvbG9yLCB0aGlzLnZhbHBoYV07XG5cdFx0cmV0dXJuIGNvbG9yU3RyaW5nLnRvW3NlbGYubW9kZWxdKC4uLmFyZ3VtZW50c18pO1xuXHR9LFxuXG5cdHBlcmNlbnRTdHJpbmcocGxhY2VzKSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXMucmdiKCkucm91bmQodHlwZW9mIHBsYWNlcyA9PT0gJ251bWJlcicgPyBwbGFjZXMgOiAxKTtcblx0XHRjb25zdCBhcmd1bWVudHNfID0gc2VsZi52YWxwaGEgPT09IDEgPyBzZWxmLmNvbG9yIDogWy4uLnNlbGYuY29sb3IsIHRoaXMudmFscGhhXTtcblx0XHRyZXR1cm4gY29sb3JTdHJpbmcudG8ucmdiLnBlcmNlbnQoLi4uYXJndW1lbnRzXyk7XG5cdH0sXG5cblx0YXJyYXkoKSB7XG5cdFx0cmV0dXJuIHRoaXMudmFscGhhID09PSAxID8gWy4uLnRoaXMuY29sb3JdIDogWy4uLnRoaXMuY29sb3IsIHRoaXMudmFscGhhXTtcblx0fSxcblxuXHRvYmplY3QoKSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0ge307XG5cdFx0Y29uc3Qge2NoYW5uZWxzfSA9IGNvbnZlcnRbdGhpcy5tb2RlbF07XG5cdFx0Y29uc3Qge2xhYmVsc30gPSBjb252ZXJ0W3RoaXMubW9kZWxdO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaGFubmVsczsgaSsrKSB7XG5cdFx0XHRyZXN1bHRbbGFiZWxzW2ldXSA9IHRoaXMuY29sb3JbaV07XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMudmFscGhhICE9PSAxKSB7XG5cdFx0XHRyZXN1bHQuYWxwaGEgPSB0aGlzLnZhbHBoYTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXG5cdHVuaXRBcnJheSgpIHtcblx0XHRjb25zdCByZ2IgPSB0aGlzLnJnYigpLmNvbG9yO1xuXHRcdHJnYlswXSAvPSAyNTU7XG5cdFx0cmdiWzFdIC89IDI1NTtcblx0XHRyZ2JbMl0gLz0gMjU1O1xuXG5cdFx0aWYgKHRoaXMudmFscGhhICE9PSAxKSB7XG5cdFx0XHRyZ2IucHVzaCh0aGlzLnZhbHBoYSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJnYjtcblx0fSxcblxuXHR1bml0T2JqZWN0KCkge1xuXHRcdGNvbnN0IHJnYiA9IHRoaXMucmdiKCkub2JqZWN0KCk7XG5cdFx0cmdiLnIgLz0gMjU1O1xuXHRcdHJnYi5nIC89IDI1NTtcblx0XHRyZ2IuYiAvPSAyNTU7XG5cblx0XHRpZiAodGhpcy52YWxwaGEgIT09IDEpIHtcblx0XHRcdHJnYi5hbHBoYSA9IHRoaXMudmFscGhhO1xuXHRcdH1cblxuXHRcdHJldHVybiByZ2I7XG5cdH0sXG5cblx0cm91bmQocGxhY2VzKSB7XG5cdFx0cGxhY2VzID0gTWF0aC5tYXgocGxhY2VzIHx8IDAsIDApO1xuXHRcdHJldHVybiBuZXcgQ29sb3IoWy4uLnRoaXMuY29sb3IubWFwKHJvdW5kVG9QbGFjZShwbGFjZXMpKSwgdGhpcy52YWxwaGFdLCB0aGlzLm1vZGVsKTtcblx0fSxcblxuXHRhbHBoYSh2YWx1ZSkge1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKFsuLi50aGlzLmNvbG9yLCBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCB2YWx1ZSkpXSwgdGhpcy5tb2RlbCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMudmFscGhhO1xuXHR9LFxuXG5cdC8vIFJnYlxuXHRyZWQ6IGdldHNldCgncmdiJywgMCwgbWF4Zm4oMjU1KSksXG5cdGdyZWVuOiBnZXRzZXQoJ3JnYicsIDEsIG1heGZuKDI1NSkpLFxuXHRibHVlOiBnZXRzZXQoJ3JnYicsIDIsIG1heGZuKDI1NSkpLFxuXG5cdGh1ZTogZ2V0c2V0KFsnaHNsJywgJ2hzdicsICdoc2wnLCAnaHdiJywgJ2hjZyddLCAwLCB2YWx1ZSA9PiAoKHZhbHVlICUgMzYwKSArIDM2MCkgJSAzNjApLFxuXG5cdHNhdHVyYXRpb25sOiBnZXRzZXQoJ2hzbCcsIDEsIG1heGZuKDEwMCkpLFxuXHRsaWdodG5lc3M6IGdldHNldCgnaHNsJywgMiwgbWF4Zm4oMTAwKSksXG5cblx0c2F0dXJhdGlvbnY6IGdldHNldCgnaHN2JywgMSwgbWF4Zm4oMTAwKSksXG5cdHZhbHVlOiBnZXRzZXQoJ2hzdicsIDIsIG1heGZuKDEwMCkpLFxuXG5cdGNocm9tYTogZ2V0c2V0KCdoY2cnLCAxLCBtYXhmbigxMDApKSxcblx0Z3JheTogZ2V0c2V0KCdoY2cnLCAyLCBtYXhmbigxMDApKSxcblxuXHR3aGl0ZTogZ2V0c2V0KCdod2InLCAxLCBtYXhmbigxMDApKSxcblx0d2JsYWNrOiBnZXRzZXQoJ2h3YicsIDIsIG1heGZuKDEwMCkpLFxuXG5cdGN5YW46IGdldHNldCgnY215aycsIDAsIG1heGZuKDEwMCkpLFxuXHRtYWdlbnRhOiBnZXRzZXQoJ2NteWsnLCAxLCBtYXhmbigxMDApKSxcblx0eWVsbG93OiBnZXRzZXQoJ2NteWsnLCAyLCBtYXhmbigxMDApKSxcblx0YmxhY2s6IGdldHNldCgnY215aycsIDMsIG1heGZuKDEwMCkpLFxuXG5cdHg6IGdldHNldCgneHl6JywgMCwgbWF4Zm4oOTUuMDQ3KSksXG5cdHk6IGdldHNldCgneHl6JywgMSwgbWF4Zm4oMTAwKSksXG5cdHo6IGdldHNldCgneHl6JywgMiwgbWF4Zm4oMTA4LjgzMykpLFxuXG5cdGw6IGdldHNldCgnbGFiJywgMCwgbWF4Zm4oMTAwKSksXG5cdGE6IGdldHNldCgnbGFiJywgMSksXG5cdGI6IGdldHNldCgnbGFiJywgMiksXG5cblx0a2V5d29yZCh2YWx1ZSkge1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKHZhbHVlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29udmVydFt0aGlzLm1vZGVsXS5rZXl3b3JkKHRoaXMuY29sb3IpO1xuXHR9LFxuXG5cdGhleCh2YWx1ZSkge1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKHZhbHVlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29sb3JTdHJpbmcudG8uaGV4KC4uLnRoaXMucmdiKCkucm91bmQoKS5jb2xvcik7XG5cdH0sXG5cblx0aGV4YSh2YWx1ZSkge1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKHZhbHVlKTtcblx0XHR9XG5cblx0XHRjb25zdCByZ2JBcnJheSA9IHRoaXMucmdiKCkucm91bmQoKS5jb2xvcjtcblxuXHRcdGxldCBhbHBoYUhleCA9IE1hdGgucm91bmQodGhpcy52YWxwaGEgKiAyNTUpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHRcdGlmIChhbHBoYUhleC5sZW5ndGggPT09IDEpIHtcblx0XHRcdGFscGhhSGV4ID0gJzAnICsgYWxwaGFIZXg7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbG9yU3RyaW5nLnRvLmhleCguLi5yZ2JBcnJheSkgKyBhbHBoYUhleDtcblx0fSxcblxuXHRyZ2JOdW1iZXIoKSB7XG5cdFx0Y29uc3QgcmdiID0gdGhpcy5yZ2IoKS5jb2xvcjtcblx0XHRyZXR1cm4gKChyZ2JbMF0gJiAweEZGKSA8PCAxNikgfCAoKHJnYlsxXSAmIDB4RkYpIDw8IDgpIHwgKHJnYlsyXSAmIDB4RkYpO1xuXHR9LFxuXG5cdGx1bWlub3NpdHkoKSB7XG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvV0NBRzIwLyNyZWxhdGl2ZWx1bWluYW5jZWRlZlxuXHRcdGNvbnN0IHJnYiA9IHRoaXMucmdiKCkuY29sb3I7XG5cblx0XHRjb25zdCBsdW0gPSBbXTtcblx0XHRmb3IgKGNvbnN0IFtpLCBlbGVtZW50XSBvZiByZ2IuZW50cmllcygpKSB7XG5cdFx0XHRjb25zdCBjaGFuID0gZWxlbWVudCAvIDI1NTtcblx0XHRcdGx1bVtpXSA9IChjaGFuIDw9IDAuMDQwNDUpID8gY2hhbiAvIDEyLjkyIDogKChjaGFuICsgMC4wNTUpIC8gMS4wNTUpICoqIDIuNDtcblx0XHR9XG5cblx0XHRyZXR1cm4gMC4yMTI2ICogbHVtWzBdICsgMC43MTUyICogbHVtWzFdICsgMC4wNzIyICogbHVtWzJdO1xuXHR9LFxuXG5cdGNvbnRyYXN0KGNvbG9yMikge1xuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1dDQUcyMC8jY29udHJhc3QtcmF0aW9kZWZcblx0XHRjb25zdCBsdW0xID0gdGhpcy5sdW1pbm9zaXR5KCk7XG5cdFx0Y29uc3QgbHVtMiA9IGNvbG9yMi5sdW1pbm9zaXR5KCk7XG5cblx0XHRpZiAobHVtMSA+IGx1bTIpIHtcblx0XHRcdHJldHVybiAobHVtMSArIDAuMDUpIC8gKGx1bTIgKyAwLjA1KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gKGx1bTIgKyAwLjA1KSAvIChsdW0xICsgMC4wNSk7XG5cdH0sXG5cblx0bGV2ZWwoY29sb3IyKSB7XG5cdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL1dDQUcvI2NvbnRyYXN0LWVuaGFuY2VkXG5cdFx0Y29uc3QgY29udHJhc3RSYXRpbyA9IHRoaXMuY29udHJhc3QoY29sb3IyKTtcblx0XHRpZiAoY29udHJhc3RSYXRpbyA+PSA3KSB7XG5cdFx0XHRyZXR1cm4gJ0FBQSc7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIChjb250cmFzdFJhdGlvID49IDQuNSkgPyAnQUEnIDogJyc7XG5cdH0sXG5cblx0aXNEYXJrKCkge1xuXHRcdC8vIFlJUSBlcXVhdGlvbiBmcm9tIGh0dHA6Ly8yNHdheXMub3JnLzIwMTAvY2FsY3VsYXRpbmctY29sb3ItY29udHJhc3Rcblx0XHRjb25zdCByZ2IgPSB0aGlzLnJnYigpLmNvbG9yO1xuXHRcdGNvbnN0IHlpcSA9IChyZ2JbMF0gKiAyMTI2ICsgcmdiWzFdICogNzE1MiArIHJnYlsyXSAqIDcyMikgLyAxMDAwMDtcblx0XHRyZXR1cm4geWlxIDwgMTI4O1xuXHR9LFxuXG5cdGlzTGlnaHQoKSB7XG5cdFx0cmV0dXJuICF0aGlzLmlzRGFyaygpO1xuXHR9LFxuXG5cdG5lZ2F0ZSgpIHtcblx0XHRjb25zdCByZ2IgPSB0aGlzLnJnYigpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cdFx0XHRyZ2IuY29sb3JbaV0gPSAyNTUgLSByZ2IuY29sb3JbaV07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJnYjtcblx0fSxcblxuXHRsaWdodGVuKHJhdGlvKSB7XG5cdFx0Y29uc3QgaHNsID0gdGhpcy5oc2woKTtcblx0XHRoc2wuY29sb3JbMl0gKz0gaHNsLmNvbG9yWzJdICogcmF0aW87XG5cdFx0cmV0dXJuIGhzbDtcblx0fSxcblxuXHRkYXJrZW4ocmF0aW8pIHtcblx0XHRjb25zdCBoc2wgPSB0aGlzLmhzbCgpO1xuXHRcdGhzbC5jb2xvclsyXSAtPSBoc2wuY29sb3JbMl0gKiByYXRpbztcblx0XHRyZXR1cm4gaHNsO1xuXHR9LFxuXG5cdHNhdHVyYXRlKHJhdGlvKSB7XG5cdFx0Y29uc3QgaHNsID0gdGhpcy5oc2woKTtcblx0XHRoc2wuY29sb3JbMV0gKz0gaHNsLmNvbG9yWzFdICogcmF0aW87XG5cdFx0cmV0dXJuIGhzbDtcblx0fSxcblxuXHRkZXNhdHVyYXRlKHJhdGlvKSB7XG5cdFx0Y29uc3QgaHNsID0gdGhpcy5oc2woKTtcblx0XHRoc2wuY29sb3JbMV0gLT0gaHNsLmNvbG9yWzFdICogcmF0aW87XG5cdFx0cmV0dXJuIGhzbDtcblx0fSxcblxuXHR3aGl0ZW4ocmF0aW8pIHtcblx0XHRjb25zdCBod2IgPSB0aGlzLmh3YigpO1xuXHRcdGh3Yi5jb2xvclsxXSArPSBod2IuY29sb3JbMV0gKiByYXRpbztcblx0XHRyZXR1cm4gaHdiO1xuXHR9LFxuXG5cdGJsYWNrZW4ocmF0aW8pIHtcblx0XHRjb25zdCBod2IgPSB0aGlzLmh3YigpO1xuXHRcdGh3Yi5jb2xvclsyXSArPSBod2IuY29sb3JbMl0gKiByYXRpbztcblx0XHRyZXR1cm4gaHdiO1xuXHR9LFxuXG5cdGdyYXlzY2FsZSgpIHtcblx0XHQvLyBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dyYXlzY2FsZSNDb252ZXJ0aW5nX2NvbG91cl90b19ncmF5c2NhbGVcblx0XHRjb25zdCByZ2IgPSB0aGlzLnJnYigpLmNvbG9yO1xuXHRcdGNvbnN0IHZhbHVlID0gcmdiWzBdICogMC4zICsgcmdiWzFdICogMC41OSArIHJnYlsyXSAqIDAuMTE7XG5cdFx0cmV0dXJuIENvbG9yLnJnYih2YWx1ZSwgdmFsdWUsIHZhbHVlKTtcblx0fSxcblxuXHRmYWRlKHJhdGlvKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWxwaGEodGhpcy52YWxwaGEgLSAodGhpcy52YWxwaGEgKiByYXRpbykpO1xuXHR9LFxuXG5cdG9wYXF1ZXIocmF0aW8pIHtcblx0XHRyZXR1cm4gdGhpcy5hbHBoYSh0aGlzLnZhbHBoYSArICh0aGlzLnZhbHBoYSAqIHJhdGlvKSk7XG5cdH0sXG5cblx0cm90YXRlKGRlZ3JlZXMpIHtcblx0XHRjb25zdCBoc2wgPSB0aGlzLmhzbCgpO1xuXHRcdGxldCBodWUgPSBoc2wuY29sb3JbMF07XG5cdFx0aHVlID0gKGh1ZSArIGRlZ3JlZXMpICUgMzYwO1xuXHRcdGh1ZSA9IGh1ZSA8IDAgPyAzNjAgKyBodWUgOiBodWU7XG5cdFx0aHNsLmNvbG9yWzBdID0gaHVlO1xuXHRcdHJldHVybiBoc2w7XG5cdH0sXG5cblx0bWl4KG1peGluQ29sb3IsIHdlaWdodCkge1xuXHRcdC8vIFBvcnRlZCBmcm9tIHNhc3MgaW1wbGVtZW50YXRpb24gaW4gQ1xuXHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYXNzL2xpYnNhc3MvYmxvYi8wZTZiNGEyODUwMDkyMzU2YWEzZWNlMDdjNmIyNDlmMDIyMWNhY2VkL2Z1bmN0aW9ucy5jcHAjTDIwOVxuXHRcdGlmICghbWl4aW5Db2xvciB8fCAhbWl4aW5Db2xvci5yZ2IpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignQXJndW1lbnQgdG8gXCJtaXhcIiB3YXMgbm90IGEgQ29sb3IgaW5zdGFuY2UsIGJ1dCByYXRoZXIgYW4gaW5zdGFuY2Ugb2YgJyArIHR5cGVvZiBtaXhpbkNvbG9yKTtcblx0XHR9XG5cblx0XHRjb25zdCBjb2xvcjEgPSBtaXhpbkNvbG9yLnJnYigpO1xuXHRcdGNvbnN0IGNvbG9yMiA9IHRoaXMucmdiKCk7XG5cdFx0Y29uc3QgcCA9IHdlaWdodCA9PT0gdW5kZWZpbmVkID8gMC41IDogd2VpZ2h0O1xuXG5cdFx0Y29uc3QgdyA9IDIgKiBwIC0gMTtcblx0XHRjb25zdCBhID0gY29sb3IxLmFscGhhKCkgLSBjb2xvcjIuYWxwaGEoKTtcblxuXHRcdGNvbnN0IHcxID0gKCgodyAqIGEgPT09IC0xKSA/IHcgOiAodyArIGEpIC8gKDEgKyB3ICogYSkpICsgMSkgLyAyO1xuXHRcdGNvbnN0IHcyID0gMSAtIHcxO1xuXG5cdFx0cmV0dXJuIENvbG9yLnJnYihcblx0XHRcdHcxICogY29sb3IxLnJlZCgpICsgdzIgKiBjb2xvcjIucmVkKCksXG5cdFx0XHR3MSAqIGNvbG9yMS5ncmVlbigpICsgdzIgKiBjb2xvcjIuZ3JlZW4oKSxcblx0XHRcdHcxICogY29sb3IxLmJsdWUoKSArIHcyICogY29sb3IyLmJsdWUoKSxcblx0XHRcdGNvbG9yMS5hbHBoYSgpICogcCArIGNvbG9yMi5hbHBoYSgpICogKDEgLSBwKSk7XG5cdH0sXG59O1xuXG4vLyBNb2RlbCBjb252ZXJzaW9uIG1ldGhvZHMgYW5kIHN0YXRpYyBjb25zdHJ1Y3RvcnNcbmZvciAoY29uc3QgbW9kZWwgb2YgT2JqZWN0LmtleXMoY29udmVydCkpIHtcblx0aWYgKHNraXBwZWRNb2RlbHMuaW5jbHVkZXMobW9kZWwpKSB7XG5cdFx0Y29udGludWU7XG5cdH1cblxuXHRjb25zdCB7Y2hhbm5lbHN9ID0gY29udmVydFttb2RlbF07XG5cblx0Ly8gQ29udmVyc2lvbiBtZXRob2RzXG5cdENvbG9yLnByb3RvdHlwZVttb2RlbF0gPSBmdW5jdGlvbiAoLi4uYXJndW1lbnRzXykge1xuXHRcdGlmICh0aGlzLm1vZGVsID09PSBtb2RlbCkge1xuXHRcdFx0cmV0dXJuIG5ldyBDb2xvcih0aGlzKTtcblx0XHR9XG5cblx0XHRpZiAoYXJndW1lbnRzXy5sZW5ndGggPiAwKSB7XG5cdFx0XHRyZXR1cm4gbmV3IENvbG9yKGFyZ3VtZW50c18sIG1vZGVsKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IENvbG9yKFsuLi5hc3NlcnRBcnJheShjb252ZXJ0W3RoaXMubW9kZWxdW21vZGVsXS5yYXcodGhpcy5jb2xvcikpLCB0aGlzLnZhbHBoYV0sIG1vZGVsKTtcblx0fTtcblxuXHQvLyAnc3RhdGljJyBjb25zdHJ1Y3Rpb24gbWV0aG9kc1xuXHRDb2xvclttb2RlbF0gPSBmdW5jdGlvbiAoLi4uYXJndW1lbnRzXykge1xuXHRcdGxldCBjb2xvciA9IGFyZ3VtZW50c19bMF07XG5cdFx0aWYgKHR5cGVvZiBjb2xvciA9PT0gJ251bWJlcicpIHtcblx0XHRcdGNvbG9yID0gemVyb0FycmF5KGFyZ3VtZW50c18sIGNoYW5uZWxzKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IENvbG9yKGNvbG9yLCBtb2RlbCk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIHJvdW5kVG8obnVtYmVyLCBwbGFjZXMpIHtcblx0cmV0dXJuIE51bWJlcihudW1iZXIudG9GaXhlZChwbGFjZXMpKTtcbn1cblxuZnVuY3Rpb24gcm91bmRUb1BsYWNlKHBsYWNlcykge1xuXHRyZXR1cm4gZnVuY3Rpb24gKG51bWJlcikge1xuXHRcdHJldHVybiByb3VuZFRvKG51bWJlciwgcGxhY2VzKTtcblx0fTtcbn1cblxuZnVuY3Rpb24gZ2V0c2V0KG1vZGVsLCBjaGFubmVsLCBtb2RpZmllcikge1xuXHRtb2RlbCA9IEFycmF5LmlzQXJyYXkobW9kZWwpID8gbW9kZWwgOiBbbW9kZWxdO1xuXG5cdGZvciAoY29uc3QgbSBvZiBtb2RlbCkge1xuXHRcdChsaW1pdGVyc1ttXSB8fD0gW10pW2NoYW5uZWxdID0gbW9kaWZpZXI7XG5cdH1cblxuXHRtb2RlbCA9IG1vZGVsWzBdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRsZXQgcmVzdWx0O1xuXG5cdFx0aWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGlmIChtb2RpZmllcikge1xuXHRcdFx0XHR2YWx1ZSA9IG1vZGlmaWVyKHZhbHVlKTtcblx0XHRcdH1cblxuXHRcdFx0cmVzdWx0ID0gdGhpc1ttb2RlbF0oKTtcblx0XHRcdHJlc3VsdC5jb2xvcltjaGFubmVsXSA9IHZhbHVlO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHRyZXN1bHQgPSB0aGlzW21vZGVsXSgpLmNvbG9yW2NoYW5uZWxdO1xuXHRcdGlmIChtb2RpZmllcikge1xuXHRcdFx0cmVzdWx0ID0gbW9kaWZpZXIocmVzdWx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xufVxuXG5mdW5jdGlvbiBtYXhmbihtYXgpIHtcblx0cmV0dXJuIGZ1bmN0aW9uICh2KSB7XG5cdFx0cmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKG1heCwgdikpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBhc3NlcnRBcnJheSh2YWx1ZSkge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG59XG5cbmZ1bmN0aW9uIHplcm9BcnJheShhcnJheSwgbGVuZ3RoKSB7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRpZiAodHlwZW9mIGFycmF5W2ldICE9PSAnbnVtYmVyJykge1xuXHRcdFx0YXJyYXlbaV0gPSAwO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhcnJheTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29sb3I7XG4iLCIvKiBNSVQgbGljZW5zZSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tbWl4ZWQtb3BlcmF0b3JzICovXG5pbXBvcnQgY3NzS2V5d29yZHMgZnJvbSAnY29sb3ItbmFtZSc7XG5cbi8vIE5PVEU6IGNvbnZlcnNpb25zIHNob3VsZCBvbmx5IHJldHVybiBwcmltaXRpdmUgdmFsdWVzIChpLmUuIGFycmF5cywgb3Jcbi8vICAgICAgIHZhbHVlcyB0aGF0IGdpdmUgY29ycmVjdCBgdHlwZW9mYCByZXN1bHRzKS5cbi8vICAgICAgIGRvIG5vdCB1c2UgYm94IHZhbHVlcyB0eXBlcyAoaS5lLiBOdW1iZXIoKSwgU3RyaW5nKCksIGV0Yy4pXG5cbmNvbnN0IHJldmVyc2VLZXl3b3JkcyA9IHt9O1xuZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoY3NzS2V5d29yZHMpKSB7XG5cdHJldmVyc2VLZXl3b3Jkc1tjc3NLZXl3b3Jkc1trZXldXSA9IGtleTtcbn1cblxuY29uc3QgY29udmVydCA9IHtcblx0cmdiOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ3JnYid9LFxuXHRoc2w6IHtjaGFubmVsczogMywgbGFiZWxzOiAnaHNsJ30sXG5cdGhzdjoge2NoYW5uZWxzOiAzLCBsYWJlbHM6ICdoc3YnfSxcblx0aHdiOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ2h3Yid9LFxuXHRjbXlrOiB7Y2hhbm5lbHM6IDQsIGxhYmVsczogJ2NteWsnfSxcblx0eHl6OiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ3h5eid9LFxuXHRsYWI6IHtjaGFubmVsczogMywgbGFiZWxzOiAnbGFiJ30sXG5cdG9rbGFiOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogWydva2wnLCAnb2thJywgJ29rYiddfSxcblx0bGNoOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogJ2xjaCd9LFxuXHRva2xjaDoge2NoYW5uZWxzOiAzLCBsYWJlbHM6IFsnb2tsJywgJ29rYycsICdva2gnXX0sXG5cdGhleDoge2NoYW5uZWxzOiAxLCBsYWJlbHM6IFsnaGV4J119LFxuXHRrZXl3b3JkOiB7Y2hhbm5lbHM6IDEsIGxhYmVsczogWydrZXl3b3JkJ119LFxuXHRhbnNpMTY6IHtjaGFubmVsczogMSwgbGFiZWxzOiBbJ2Fuc2kxNiddfSxcblx0YW5zaTI1Njoge2NoYW5uZWxzOiAxLCBsYWJlbHM6IFsnYW5zaTI1NiddfSxcblx0aGNnOiB7Y2hhbm5lbHM6IDMsIGxhYmVsczogWydoJywgJ2MnLCAnZyddfSxcblx0YXBwbGU6IHtjaGFubmVsczogMywgbGFiZWxzOiBbJ3IxNicsICdnMTYnLCAnYjE2J119LFxuXHRncmF5OiB7Y2hhbm5lbHM6IDEsIGxhYmVsczogWydncmF5J119LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29udmVydDtcblxuLy8gTEFCIGYodCkgY29uc3RhbnRcbmNvbnN0IExBQl9GVCA9ICg2IC8gMjkpICoqIDM7XG5cbi8vIFNSR0Igbm9uLWxpbmVhciB0cmFuc2Zvcm0gZnVuY3Rpb25zXG5mdW5jdGlvbiBzcmdiTm9ubGluZWFyVHJhbnNmb3JtKGMpIHtcblx0Y29uc3QgY2MgPSBjID4gMC4wMDNfMTMwXzhcblx0XHQ/ICgoMS4wNTUgKiAoYyAqKiAoMSAvIDIuNCkpKSAtIDAuMDU1KVxuXHRcdDogYyAqIDEyLjkyO1xuXHRyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoMCwgY2MpLCAxKTtcbn1cblxuZnVuY3Rpb24gc3JnYk5vbmxpbmVhclRyYW5zZm9ybUludihjKSB7XG5cdHJldHVybiBjID4gMC4wNDBfNDUgPyAoKChjICsgMC4wNTUpIC8gMS4wNTUpICoqIDIuNCkgOiAoYyAvIDEyLjkyKTtcbn1cblxuLy8gSGlkZSAuY2hhbm5lbHMgYW5kIC5sYWJlbHMgcHJvcGVydGllc1xuZm9yIChjb25zdCBtb2RlbCBvZiBPYmplY3Qua2V5cyhjb252ZXJ0KSkge1xuXHRpZiAoISgnY2hhbm5lbHMnIGluIGNvbnZlcnRbbW9kZWxdKSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignbWlzc2luZyBjaGFubmVscyBwcm9wZXJ0eTogJyArIG1vZGVsKTtcblx0fVxuXG5cdGlmICghKCdsYWJlbHMnIGluIGNvbnZlcnRbbW9kZWxdKSkge1xuXHRcdHRocm93IG5ldyBFcnJvcignbWlzc2luZyBjaGFubmVsIGxhYmVscyBwcm9wZXJ0eTogJyArIG1vZGVsKTtcblx0fVxuXG5cdGlmIChjb252ZXJ0W21vZGVsXS5sYWJlbHMubGVuZ3RoICE9PSBjb252ZXJ0W21vZGVsXS5jaGFubmVscykge1xuXHRcdHRocm93IG5ldyBFcnJvcignY2hhbm5lbCBhbmQgbGFiZWwgY291bnRzIG1pc21hdGNoOiAnICsgbW9kZWwpO1xuXHR9XG5cblx0Y29uc3Qge2NoYW5uZWxzLCBsYWJlbHN9ID0gY29udmVydFttb2RlbF07XG5cdGRlbGV0ZSBjb252ZXJ0W21vZGVsXS5jaGFubmVscztcblx0ZGVsZXRlIGNvbnZlcnRbbW9kZWxdLmxhYmVscztcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnZlcnRbbW9kZWxdLCAnY2hhbm5lbHMnLCB7dmFsdWU6IGNoYW5uZWxzfSk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb252ZXJ0W21vZGVsXSwgJ2xhYmVscycsIHt2YWx1ZTogbGFiZWxzfSk7XG59XG5cbmNvbnZlcnQucmdiLmhzbCA9IGZ1bmN0aW9uIChyZ2IpIHtcblx0Y29uc3QgciA9IHJnYlswXSAvIDI1NTtcblx0Y29uc3QgZyA9IHJnYlsxXSAvIDI1NTtcblx0Y29uc3QgYiA9IHJnYlsyXSAvIDI1NTtcblx0Y29uc3QgbWluID0gTWF0aC5taW4ociwgZywgYik7XG5cdGNvbnN0IG1heCA9IE1hdGgubWF4KHIsIGcsIGIpO1xuXHRjb25zdCBkZWx0YSA9IG1heCAtIG1pbjtcblx0bGV0IGg7XG5cdGxldCBzO1xuXG5cdHN3aXRjaCAobWF4KSB7XG5cdFx0Y2FzZSBtaW46IHtcblx0XHRcdGggPSAwO1xuXG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRjYXNlIHI6IHtcblx0XHRcdGggPSAoZyAtIGIpIC8gZGVsdGE7XG5cblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgZzoge1xuXHRcdFx0aCA9IDIgKyAoYiAtIHIpIC8gZGVsdGE7XG5cblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgYjoge1xuXHRcdFx0aCA9IDQgKyAociAtIGcpIC8gZGVsdGE7XG5cblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0Ly8gTm8gZGVmYXVsdFxuXHR9XG5cblx0aCA9IE1hdGgubWluKGggKiA2MCwgMzYwKTtcblxuXHRpZiAoaCA8IDApIHtcblx0XHRoICs9IDM2MDtcblx0fVxuXG5cdGNvbnN0IGwgPSAobWluICsgbWF4KSAvIDI7XG5cblx0aWYgKG1heCA9PT0gbWluKSB7XG5cdFx0cyA9IDA7XG5cdH0gZWxzZSBpZiAobCA8PSAwLjUpIHtcblx0XHRzID0gZGVsdGEgLyAobWF4ICsgbWluKTtcblx0fSBlbHNlIHtcblx0XHRzID0gZGVsdGEgLyAoMiAtIG1heCAtIG1pbik7XG5cdH1cblxuXHRyZXR1cm4gW2gsIHMgKiAxMDAsIGwgKiAxMDBdO1xufTtcblxuY29udmVydC5yZ2IuaHN2ID0gZnVuY3Rpb24gKHJnYikge1xuXHRsZXQgcmRpZjtcblx0bGV0IGdkaWY7XG5cdGxldCBiZGlmO1xuXHRsZXQgaDtcblx0bGV0IHM7XG5cblx0Y29uc3QgciA9IHJnYlswXSAvIDI1NTtcblx0Y29uc3QgZyA9IHJnYlsxXSAvIDI1NTtcblx0Y29uc3QgYiA9IHJnYlsyXSAvIDI1NTtcblx0Y29uc3QgdiA9IE1hdGgubWF4KHIsIGcsIGIpO1xuXHRjb25zdCBkaWZmID0gdiAtIE1hdGgubWluKHIsIGcsIGIpO1xuXHRjb25zdCBkaWZmYyA9IGZ1bmN0aW9uIChjKSB7XG5cdFx0cmV0dXJuICh2IC0gYykgLyA2IC8gZGlmZiArIDEgLyAyO1xuXHR9O1xuXG5cdGlmIChkaWZmID09PSAwKSB7XG5cdFx0aCA9IDA7XG5cdFx0cyA9IDA7XG5cdH0gZWxzZSB7XG5cdFx0cyA9IGRpZmYgLyB2O1xuXHRcdHJkaWYgPSBkaWZmYyhyKTtcblx0XHRnZGlmID0gZGlmZmMoZyk7XG5cdFx0YmRpZiA9IGRpZmZjKGIpO1xuXG5cdFx0c3dpdGNoICh2KSB7XG5cdFx0XHRjYXNlIHI6IHtcblx0XHRcdFx0aCA9IGJkaWYgLSBnZGlmO1xuXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRjYXNlIGc6IHtcblx0XHRcdFx0aCA9ICgxIC8gMykgKyByZGlmIC0gYmRpZjtcblxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXHRcdFx0Y2FzZSBiOiB7XG5cdFx0XHRcdGggPSAoMiAvIDMpICsgZ2RpZiAtIHJkaWY7XG5cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0Ly8gTm8gZGVmYXVsdFxuXHRcdH1cblxuXHRcdGlmIChoIDwgMCkge1xuXHRcdFx0aCArPSAxO1xuXHRcdH0gZWxzZSBpZiAoaCA+IDEpIHtcblx0XHRcdGggLT0gMTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gW1xuXHRcdGggKiAzNjAsXG5cdFx0cyAqIDEwMCxcblx0XHR2ICogMTAwLFxuXHRdO1xufTtcblxuY29udmVydC5yZ2IuaHdiID0gZnVuY3Rpb24gKHJnYikge1xuXHRjb25zdCByID0gcmdiWzBdO1xuXHRjb25zdCBnID0gcmdiWzFdO1xuXHRsZXQgYiA9IHJnYlsyXTtcblx0Y29uc3QgaCA9IGNvbnZlcnQucmdiLmhzbChyZ2IpWzBdO1xuXHRjb25zdCB3ID0gMSAvIDI1NSAqIE1hdGgubWluKHIsIE1hdGgubWluKGcsIGIpKTtcblxuXHRiID0gMSAtIDEgLyAyNTUgKiBNYXRoLm1heChyLCBNYXRoLm1heChnLCBiKSk7XG5cblx0cmV0dXJuIFtoLCB3ICogMTAwLCBiICogMTAwXTtcbn07XG5cbmNvbnZlcnQucmdiLm9rbGFiID0gZnVuY3Rpb24gKHJnYikge1xuXHQvLyBBc3N1bWUgc1JHQlxuXHRjb25zdCByID0gc3JnYk5vbmxpbmVhclRyYW5zZm9ybUludihyZ2JbMF0gLyAyNTUpO1xuXHRjb25zdCBnID0gc3JnYk5vbmxpbmVhclRyYW5zZm9ybUludihyZ2JbMV0gLyAyNTUpO1xuXHRjb25zdCBiID0gc3JnYk5vbmxpbmVhclRyYW5zZm9ybUludihyZ2JbMl0gLyAyNTUpO1xuXG5cdGNvbnN0IGxwID0gTWF0aC5jYnJ0KDAuNDEyXzIyMV80NzBfOCAqIHIgKyAwLjUzNl8zMzJfNTM2XzMgKiBnICsgMC4wNTFfNDQ1Xzk5Ml85ICogYik7XG5cdGNvbnN0IG1wID0gTWF0aC5jYnJ0KDAuMjExXzkwM180OThfMiAqIHIgKyAwLjY4MF82OTlfNTQ1XzEgKiBnICsgMC4xMDdfMzk2Xzk1Nl82ICogYik7XG5cdGNvbnN0IHNwID0gTWF0aC5jYnJ0KDAuMDg4XzMwMl80NjFfOSAqIHIgKyAwLjI4MV83MThfODM3XzYgKiBnICsgMC42MjlfOTc4XzcwMF81ICogYik7XG5cblx0Y29uc3QgbCA9IDAuMjEwXzQ1NF8yNTVfMyAqIGxwICsgMC43OTNfNjE3Xzc4NSAqIG1wIC0gMC4wMDRfMDcyXzA0Nl84ICogc3A7XG5cdGNvbnN0IGFhID0gMS45NzdfOTk4XzQ5NV8xICogbHAgLSAyLjQyOF81OTJfMjA1ICogbXAgKyAwLjQ1MF81OTNfNzA5XzkgKiBzcDtcblx0Y29uc3QgYmIgPSAwLjAyNV85MDRfMDM3XzEgKiBscCArIDAuNzgyXzc3MV83NjZfMiAqIG1wIC0gMC44MDhfNjc1Xzc2NiAqIHNwO1xuXG5cdHJldHVybiBbbCAqIDEwMCwgYWEgKiAxMDAsIGJiICogMTAwXTtcbn07XG5cbmNvbnZlcnQucmdiLmNteWsgPSBmdW5jdGlvbiAocmdiKSB7XG5cdGNvbnN0IHIgPSByZ2JbMF0gLyAyNTU7XG5cdGNvbnN0IGcgPSByZ2JbMV0gLyAyNTU7XG5cdGNvbnN0IGIgPSByZ2JbMl0gLyAyNTU7XG5cblx0Y29uc3QgayA9IE1hdGgubWluKDEgLSByLCAxIC0gZywgMSAtIGIpO1xuXHRjb25zdCBjID0gKDEgLSByIC0gaykgLyAoMSAtIGspIHx8IDA7XG5cdGNvbnN0IG0gPSAoMSAtIGcgLSBrKSAvICgxIC0gaykgfHwgMDtcblx0Y29uc3QgeSA9ICgxIC0gYiAtIGspIC8gKDEgLSBrKSB8fCAwO1xuXG5cdHJldHVybiBbYyAqIDEwMCwgbSAqIDEwMCwgeSAqIDEwMCwgayAqIDEwMF07XG59O1xuXG5mdW5jdGlvbiBjb21wYXJhdGl2ZURpc3RhbmNlKHgsIHkpIHtcblx0Lypcblx0XHRTZWUgaHR0cHM6Ly9lbi5tLndpa2lwZWRpYS5vcmcvd2lraS9FdWNsaWRlYW5fZGlzdGFuY2UjU3F1YXJlZF9FdWNsaWRlYW5fZGlzdGFuY2Vcblx0Ki9cblx0cmV0dXJuIChcblx0XHQoKHhbMF0gLSB5WzBdKSAqKiAyKSArXG5cdFx0KCh4WzFdIC0geVsxXSkgKiogMikgK1xuXHRcdCgoeFsyXSAtIHlbMl0pICoqIDIpXG5cdCk7XG59XG5cbmNvbnZlcnQucmdiLmtleXdvcmQgPSBmdW5jdGlvbiAocmdiKSB7XG5cdGNvbnN0IHJldmVyc2VkID0gcmV2ZXJzZUtleXdvcmRzW3JnYl07XG5cdGlmIChyZXZlcnNlZCkge1xuXHRcdHJldHVybiByZXZlcnNlZDtcblx0fVxuXG5cdGxldCBjdXJyZW50Q2xvc2VzdERpc3RhbmNlID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuXHRsZXQgY3VycmVudENsb3Nlc3RLZXl3b3JkO1xuXG5cdGZvciAoY29uc3Qga2V5d29yZCBvZiBPYmplY3Qua2V5cyhjc3NLZXl3b3JkcykpIHtcblx0XHRjb25zdCB2YWx1ZSA9IGNzc0tleXdvcmRzW2tleXdvcmRdO1xuXG5cdFx0Ly8gQ29tcHV0ZSBjb21wYXJhdGl2ZSBkaXN0YW5jZVxuXHRcdGNvbnN0IGRpc3RhbmNlID0gY29tcGFyYXRpdmVEaXN0YW5jZShyZ2IsIHZhbHVlKTtcblxuXHRcdC8vIENoZWNrIGlmIGl0cyBsZXNzLCBpZiBzbyBzZXQgYXMgY2xvc2VzdFxuXHRcdGlmIChkaXN0YW5jZSA8IGN1cnJlbnRDbG9zZXN0RGlzdGFuY2UpIHtcblx0XHRcdGN1cnJlbnRDbG9zZXN0RGlzdGFuY2UgPSBkaXN0YW5jZTtcblx0XHRcdGN1cnJlbnRDbG9zZXN0S2V5d29yZCA9IGtleXdvcmQ7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGN1cnJlbnRDbG9zZXN0S2V5d29yZDtcbn07XG5cbmNvbnZlcnQua2V5d29yZC5yZ2IgPSBmdW5jdGlvbiAoa2V5d29yZCkge1xuXHRyZXR1cm4gWy4uLmNzc0tleXdvcmRzW2tleXdvcmRdXTtcbn07XG5cbmNvbnZlcnQucmdiLnh5eiA9IGZ1bmN0aW9uIChyZ2IpIHtcblx0Ly8gQXNzdW1lIHNSR0Jcblx0Y29uc3QgciA9IHNyZ2JOb25saW5lYXJUcmFuc2Zvcm1JbnYocmdiWzBdIC8gMjU1KTtcblx0Y29uc3QgZyA9IHNyZ2JOb25saW5lYXJUcmFuc2Zvcm1JbnYocmdiWzFdIC8gMjU1KTtcblx0Y29uc3QgYiA9IHNyZ2JOb25saW5lYXJUcmFuc2Zvcm1JbnYocmdiWzJdIC8gMjU1KTtcblxuXHRjb25zdCB4ID0gKHIgKiAwLjQxMl80NTZfNCkgKyAoZyAqIDAuMzU3XzU3Nl8xKSArIChiICogMC4xODBfNDM3XzUpO1xuXHRjb25zdCB5ID0gKHIgKiAwLjIxMl82NzJfOSkgKyAoZyAqIDAuNzE1XzE1Ml8yKSArIChiICogMC4wNzJfMTc1KTtcblx0Y29uc3QgeiA9IChyICogMC4wMTlfMzMzXzkpICsgKGcgKiAwLjExOV8xOTIpICsgKGIgKiAwLjk1MF8zMDRfMSk7XG5cblx0cmV0dXJuIFt4ICogMTAwLCB5ICogMTAwLCB6ICogMTAwXTtcbn07XG5cbmNvbnZlcnQucmdiLmxhYiA9IGZ1bmN0aW9uIChyZ2IpIHtcblx0Y29uc3QgeHl6ID0gY29udmVydC5yZ2IueHl6KHJnYik7XG5cdGxldCB4ID0geHl6WzBdO1xuXHRsZXQgeSA9IHh5elsxXTtcblx0bGV0IHogPSB4eXpbMl07XG5cblx0eCAvPSA5NS4wNDc7XG5cdHkgLz0gMTAwO1xuXHR6IC89IDEwOC44ODM7XG5cblx0eCA9IHggPiBMQUJfRlQgPyAoeCAqKiAoMSAvIDMpKSA6ICg3Ljc4NyAqIHgpICsgKDE2IC8gMTE2KTtcblx0eSA9IHkgPiBMQUJfRlQgPyAoeSAqKiAoMSAvIDMpKSA6ICg3Ljc4NyAqIHkpICsgKDE2IC8gMTE2KTtcblx0eiA9IHogPiBMQUJfRlQgPyAoeiAqKiAoMSAvIDMpKSA6ICg3Ljc4NyAqIHopICsgKDE2IC8gMTE2KTtcblxuXHRjb25zdCBsID0gKDExNiAqIHkpIC0gMTY7XG5cdGNvbnN0IGEgPSA1MDAgKiAoeCAtIHkpO1xuXHRjb25zdCBiID0gMjAwICogKHkgLSB6KTtcblxuXHRyZXR1cm4gW2wsIGEsIGJdO1xufTtcblxuY29udmVydC5oc2wucmdiID0gZnVuY3Rpb24gKGhzbCkge1xuXHRjb25zdCBoID0gaHNsWzBdIC8gMzYwO1xuXHRjb25zdCBzID0gaHNsWzFdIC8gMTAwO1xuXHRjb25zdCBsID0gaHNsWzJdIC8gMTAwO1xuXHRsZXQgdDM7XG5cdGxldCB2YWx1ZTtcblxuXHRpZiAocyA9PT0gMCkge1xuXHRcdHZhbHVlID0gbCAqIDI1NTtcblx0XHRyZXR1cm4gW3ZhbHVlLCB2YWx1ZSwgdmFsdWVdO1xuXHR9XG5cblx0Y29uc3QgdDIgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xuXG5cdGNvbnN0IHQxID0gMiAqIGwgLSB0MjtcblxuXHRjb25zdCByZ2IgPSBbMCwgMCwgMF07XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cdFx0dDMgPSBoICsgMSAvIDMgKiAtKGkgLSAxKTtcblx0XHRpZiAodDMgPCAwKSB7XG5cdFx0XHR0MysrO1xuXHRcdH1cblxuXHRcdGlmICh0MyA+IDEpIHtcblx0XHRcdHQzLS07XG5cdFx0fVxuXG5cdFx0aWYgKDYgKiB0MyA8IDEpIHtcblx0XHRcdHZhbHVlID0gdDEgKyAodDIgLSB0MSkgKiA2ICogdDM7XG5cdFx0fSBlbHNlIGlmICgyICogdDMgPCAxKSB7XG5cdFx0XHR2YWx1ZSA9IHQyO1xuXHRcdH0gZWxzZSBpZiAoMyAqIHQzIDwgMikge1xuXHRcdFx0dmFsdWUgPSB0MSArICh0MiAtIHQxKSAqICgyIC8gMyAtIHQzKSAqIDY7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhbHVlID0gdDE7XG5cdFx0fVxuXG5cdFx0cmdiW2ldID0gdmFsdWUgKiAyNTU7XG5cdH1cblxuXHRyZXR1cm4gcmdiO1xufTtcblxuY29udmVydC5oc2wuaHN2ID0gZnVuY3Rpb24gKGhzbCkge1xuXHRjb25zdCBoID0gaHNsWzBdO1xuXHRsZXQgcyA9IGhzbFsxXSAvIDEwMDtcblx0bGV0IGwgPSBoc2xbMl0gLyAxMDA7XG5cdGxldCBzbWluID0gcztcblx0Y29uc3QgbG1pbiA9IE1hdGgubWF4KGwsIDAuMDEpO1xuXG5cdGwgKj0gMjtcblx0cyAqPSAobCA8PSAxKSA/IGwgOiAyIC0gbDtcblx0c21pbiAqPSBsbWluIDw9IDEgPyBsbWluIDogMiAtIGxtaW47XG5cdGNvbnN0IHYgPSAobCArIHMpIC8gMjtcblx0Y29uc3Qgc3YgPSBsID09PSAwID8gKDIgKiBzbWluKSAvIChsbWluICsgc21pbikgOiAoMiAqIHMpIC8gKGwgKyBzKTtcblxuXHRyZXR1cm4gW2gsIHN2ICogMTAwLCB2ICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaHN2LnJnYiA9IGZ1bmN0aW9uIChoc3YpIHtcblx0Y29uc3QgaCA9IGhzdlswXSAvIDYwO1xuXHRjb25zdCBzID0gaHN2WzFdIC8gMTAwO1xuXHRsZXQgdiA9IGhzdlsyXSAvIDEwMDtcblx0Y29uc3QgaGkgPSBNYXRoLmZsb29yKGgpICUgNjtcblxuXHRjb25zdCBmID0gaCAtIE1hdGguZmxvb3IoaCk7XG5cdGNvbnN0IHAgPSAyNTUgKiB2ICogKDEgLSBzKTtcblx0Y29uc3QgcSA9IDI1NSAqIHYgKiAoMSAtIChzICogZikpO1xuXHRjb25zdCB0ID0gMjU1ICogdiAqICgxIC0gKHMgKiAoMSAtIGYpKSk7XG5cdHYgKj0gMjU1O1xuXG5cdHN3aXRjaCAoaGkpIHtcblx0XHRjYXNlIDA6IHtcblx0XHRcdHJldHVybiBbdiwgdCwgcF07XG5cdFx0fVxuXG5cdFx0Y2FzZSAxOiB7XG5cdFx0XHRyZXR1cm4gW3EsIHYsIHBdO1xuXHRcdH1cblxuXHRcdGNhc2UgMjoge1xuXHRcdFx0cmV0dXJuIFtwLCB2LCB0XTtcblx0XHR9XG5cblx0XHRjYXNlIDM6IHtcblx0XHRcdHJldHVybiBbcCwgcSwgdl07XG5cdFx0fVxuXG5cdFx0Y2FzZSA0OiB7XG5cdFx0XHRyZXR1cm4gW3QsIHAsIHZdO1xuXHRcdH1cblxuXHRcdGNhc2UgNToge1xuXHRcdFx0cmV0dXJuIFt2LCBwLCBxXTtcblx0XHR9XG5cdH1cbn07XG5cbmNvbnZlcnQuaHN2LmhzbCA9IGZ1bmN0aW9uIChoc3YpIHtcblx0Y29uc3QgaCA9IGhzdlswXTtcblx0Y29uc3QgcyA9IGhzdlsxXSAvIDEwMDtcblx0Y29uc3QgdiA9IGhzdlsyXSAvIDEwMDtcblx0Y29uc3Qgdm1pbiA9IE1hdGgubWF4KHYsIDAuMDEpO1xuXHRsZXQgc2w7XG5cdGxldCBsO1xuXG5cdGwgPSAoMiAtIHMpICogdjtcblx0Y29uc3QgbG1pbiA9ICgyIC0gcykgKiB2bWluO1xuXHRzbCA9IHMgKiB2bWluO1xuXHRzbCAvPSAobG1pbiA8PSAxKSA/IGxtaW4gOiAyIC0gbG1pbjtcblx0c2wgPSBzbCB8fCAwO1xuXHRsIC89IDI7XG5cblx0cmV0dXJuIFtoLCBzbCAqIDEwMCwgbCAqIDEwMF07XG59O1xuXG4vLyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3MtY29sb3IvI2h3Yi10by1yZ2JcbmNvbnZlcnQuaHdiLnJnYiA9IGZ1bmN0aW9uIChod2IpIHtcblx0Y29uc3QgaCA9IGh3YlswXSAvIDM2MDtcblx0bGV0IHdoID0gaHdiWzFdIC8gMTAwO1xuXHRsZXQgYmwgPSBod2JbMl0gLyAxMDA7XG5cdGNvbnN0IHJhdGlvID0gd2ggKyBibDtcblx0bGV0IGY7XG5cblx0Ly8gV2ggKyBibCBjYW50IGJlID4gMVxuXHRpZiAocmF0aW8gPiAxKSB7XG5cdFx0d2ggLz0gcmF0aW87XG5cdFx0YmwgLz0gcmF0aW87XG5cdH1cblxuXHRjb25zdCBpID0gTWF0aC5mbG9vcig2ICogaCk7XG5cdGNvbnN0IHYgPSAxIC0gYmw7XG5cdGYgPSA2ICogaCAtIGk7XG5cblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0aWYgKChpICYgMHgwMSkgIT09IDApIHtcblx0XHRmID0gMSAtIGY7XG5cdH1cblxuXHRjb25zdCBuID0gd2ggKyBmICogKHYgLSB3aCk7IC8vIExpbmVhciBpbnRlcnBvbGF0aW9uXG5cblx0bGV0IHI7XG5cdGxldCBnO1xuXHRsZXQgYjtcblx0LyogZXNsaW50LWRpc2FibGUgbWF4LXN0YXRlbWVudHMtcGVyLWxpbmUsbm8tbXVsdGktc3BhY2VzLCBkZWZhdWx0LWNhc2UtbGFzdCAqL1xuXHRzd2l0Y2ggKGkpIHtcblx0XHRkZWZhdWx0OlxuXHRcdGNhc2UgNjpcblx0XHRjYXNlIDA6IHsgciA9IHY7ICBnID0gbjsgIGIgPSB3aDsgYnJlYWs7XG5cdFx0fVxuXG5cdFx0Y2FzZSAxOiB7IHIgPSBuOyAgZyA9IHY7ICBiID0gd2g7IGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgMjogeyByID0gd2g7IGcgPSB2OyAgYiA9IG47IGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgMzogeyByID0gd2g7IGcgPSBuOyAgYiA9IHY7IGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgNDogeyByID0gbjsgIGcgPSB3aDsgYiA9IHY7IGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgNTogeyByID0gdjsgIGcgPSB3aDsgYiA9IG47IGJyZWFrO1xuXHRcdH1cblx0fVxuXHQvKiBlc2xpbnQtZW5hYmxlIG1heC1zdGF0ZW1lbnRzLXBlci1saW5lLG5vLW11bHRpLXNwYWNlcywgZGVmYXVsdC1jYXNlLWxhc3QgKi9cblxuXHRyZXR1cm4gW3IgKiAyNTUsIGcgKiAyNTUsIGIgKiAyNTVdO1xufTtcblxuY29udmVydC5jbXlrLnJnYiA9IGZ1bmN0aW9uIChjbXlrKSB7XG5cdGNvbnN0IGMgPSBjbXlrWzBdIC8gMTAwO1xuXHRjb25zdCBtID0gY215a1sxXSAvIDEwMDtcblx0Y29uc3QgeSA9IGNteWtbMl0gLyAxMDA7XG5cdGNvbnN0IGsgPSBjbXlrWzNdIC8gMTAwO1xuXG5cdGNvbnN0IHIgPSAxIC0gTWF0aC5taW4oMSwgYyAqICgxIC0gaykgKyBrKTtcblx0Y29uc3QgZyA9IDEgLSBNYXRoLm1pbigxLCBtICogKDEgLSBrKSArIGspO1xuXHRjb25zdCBiID0gMSAtIE1hdGgubWluKDEsIHkgKiAoMSAtIGspICsgayk7XG5cblx0cmV0dXJuIFtyICogMjU1LCBnICogMjU1LCBiICogMjU1XTtcbn07XG5cbmNvbnZlcnQueHl6LnJnYiA9IGZ1bmN0aW9uICh4eXopIHtcblx0Y29uc3QgeCA9IHh5elswXSAvIDEwMDtcblx0Y29uc3QgeSA9IHh5elsxXSAvIDEwMDtcblx0Y29uc3QgeiA9IHh5elsyXSAvIDEwMDtcblx0bGV0IHI7XG5cdGxldCBnO1xuXHRsZXQgYjtcblxuXHRyID0gKHggKiAzLjI0MF80NTRfMikgKyAoeSAqIC0xLjUzN18xMzhfNSkgKyAoeiAqIC0wLjQ5OF81MzFfNCk7XG5cdGcgPSAoeCAqIC0wLjk2OV8yNjYpICsgKHkgKiAxLjg3Nl8wMTBfOCkgKyAoeiAqIDAuMDQxXzU1Nik7XG5cdGIgPSAoeCAqIDAuMDU1XzY0M180KSArICh5ICogLTAuMjA0XzAyNV85KSArICh6ICogMS4wNTdfMjI1XzIpO1xuXG5cdC8vIEFzc3VtZSBzUkdCXG5cdHIgPSBzcmdiTm9ubGluZWFyVHJhbnNmb3JtKHIpO1xuXHRnID0gc3JnYk5vbmxpbmVhclRyYW5zZm9ybShnKTtcblx0YiA9IHNyZ2JOb25saW5lYXJUcmFuc2Zvcm0oYik7XG5cblx0cmV0dXJuIFtyICogMjU1LCBnICogMjU1LCBiICogMjU1XTtcbn07XG5cbmNvbnZlcnQueHl6LmxhYiA9IGZ1bmN0aW9uICh4eXopIHtcblx0bGV0IHggPSB4eXpbMF07XG5cdGxldCB5ID0geHl6WzFdO1xuXHRsZXQgeiA9IHh5elsyXTtcblxuXHR4IC89IDk1LjA0Nztcblx0eSAvPSAxMDA7XG5cdHogLz0gMTA4Ljg4MztcblxuXHR4ID0geCA+IExBQl9GVCA/ICh4ICoqICgxIC8gMykpIDogKDcuNzg3ICogeCkgKyAoMTYgLyAxMTYpO1xuXHR5ID0geSA+IExBQl9GVCA/ICh5ICoqICgxIC8gMykpIDogKDcuNzg3ICogeSkgKyAoMTYgLyAxMTYpO1xuXHR6ID0geiA+IExBQl9GVCA/ICh6ICoqICgxIC8gMykpIDogKDcuNzg3ICogeikgKyAoMTYgLyAxMTYpO1xuXG5cdGNvbnN0IGwgPSAoMTE2ICogeSkgLSAxNjtcblx0Y29uc3QgYSA9IDUwMCAqICh4IC0geSk7XG5cdGNvbnN0IGIgPSAyMDAgKiAoeSAtIHopO1xuXG5cdHJldHVybiBbbCwgYSwgYl07XG59O1xuXG5jb252ZXJ0Lnh5ei5va2xhYiA9IGZ1bmN0aW9uICh4eXopIHtcblx0Y29uc3QgeCA9IHh5elswXSAvIDEwMDtcblx0Y29uc3QgeSA9IHh5elsxXSAvIDEwMDtcblx0Y29uc3QgeiA9IHh5elsyXSAvIDEwMDtcblxuXHRjb25zdCBscCA9IE1hdGguY2JydCgwLjgxOF85MzNfMDEwXzEgKiB4ICsgMC4zNjFfODY2Xzc0Ml80ICogeSAtIDAuMTI4Xzg1OV83MTNfNyAqIHopO1xuXHRjb25zdCBtcCA9IE1hdGguY2JydCgwLjAzMl85ODRfNTQzXzYgKiB4ICsgMC45MjlfMzExXzg3MV81ICogeSArIDAuMDM2XzE0NV82MzhfNyAqIHopO1xuXHRjb25zdCBzcCA9IE1hdGguY2JydCgwLjA0OF8yMDBfMzAxXzggKiB4ICsgMC4yNjRfMzY2XzI2OV8xICogeSArIDAuNjMzXzg1MV83MDcgKiB6KTtcblxuXHRjb25zdCBsID0gMC4yMTBfNDU0XzI1NV8zICogbHAgKyAwLjc5M182MTdfNzg1ICogbXAgLSAwLjAwNF8wNzJfMDQ2XzggKiBzcDtcblx0Y29uc3QgYSA9IDEuOTc3Xzk5OF80OTVfMSAqIGxwIC0gMi40MjhfNTkyXzIwNSAqIG1wICsgMC40NTBfNTkzXzcwOV85ICogc3A7XG5cdGNvbnN0IGIgPSAwLjAyNV85MDRfMDM3XzEgKiBscCArIDAuNzgyXzc3MV83NjZfMiAqIG1wIC0gMC44MDhfNjc1Xzc2NiAqIHNwO1xuXG5cdHJldHVybiBbbCAqIDEwMCwgYSAqIDEwMCwgYiAqIDEwMF07XG59O1xuXG5jb252ZXJ0Lm9rbGFiLm9rbGNoID0gZnVuY3Rpb24gKG9rbGFiKSB7XG5cdHJldHVybiBjb252ZXJ0LmxhYi5sY2gob2tsYWIpO1xufTtcblxuY29udmVydC5va2xhYi54eXogPSBmdW5jdGlvbiAob2tsYWIpIHtcblx0Y29uc3QgbGwgPSBva2xhYlswXSAvIDEwMDtcblx0Y29uc3QgYSA9IG9rbGFiWzFdIC8gMTAwO1xuXHRjb25zdCBiID0gb2tsYWJbMl0gLyAxMDA7XG5cblx0Y29uc3QgbCA9ICgwLjk5OV85OTlfOTk4ICogbGwgKyAwLjM5Nl8zMzdfNzkyICogYSArIDAuMjE1XzgwM183NTggKiBiKSAqKiAzO1xuXHRjb25zdCBtID0gKDEuMDAwXzAwMF8wMDggKiBsbCAtIDAuMTA1XzU2MV8zNDIgKiBhIC0gMC4wNjNfODU0XzE3NSAqIGIpICoqIDM7XG5cdGNvbnN0IHMgPSAoMS4wMDBfMDAwXzA1NSAqIGxsIC0gMC4wODlfNDg0XzE4MiAqIGEgLSAxLjI5MV80ODVfNTM4ICogYikgKiogMztcblxuXHRjb25zdCB4ID0gMS4yMjdfMDEzXzg1MSAqIGwgLSAwLjU1N183OTlfOTggKiBtICsgMC4yODFfMjU2XzE0OSAqIHM7XG5cdGNvbnN0IHkgPSAtMC4wNDBfNTgwXzE3OCAqIGwgKyAxLjExMl8yNTZfODcgKiBtIC0gMC4wNzFfNjc2XzY3OSAqIHM7XG5cdGNvbnN0IHogPSAtMC4wNzZfMzgxXzI4NSAqIGwgLSAwLjQyMV80ODFfOTc4ICogbSArIDEuNTg2XzE2M18yMiAqIHM7XG5cblx0cmV0dXJuIFt4ICogMTAwLCB5ICogMTAwLCB6ICogMTAwXTtcbn07XG5cbmNvbnZlcnQub2tsYWIucmdiID0gZnVuY3Rpb24gKG9rbGFiKSB7XG5cdGNvbnN0IGxsID0gb2tsYWJbMF0gLyAxMDA7XG5cdGNvbnN0IGFhID0gb2tsYWJbMV0gLyAxMDA7XG5cdGNvbnN0IGJiID0gb2tsYWJbMl0gLyAxMDA7XG5cblx0Y29uc3QgbCA9IChsbCArIDAuMzk2XzMzN183NzdfNCAqIGFhICsgMC4yMTVfODAzXzc1N18zICogYmIpICoqIDM7XG5cdGNvbnN0IG0gPSAobGwgLSAwLjEwNV81NjFfMzQ1XzggKiBhYSAtIDAuMDYzXzg1NF8xNzJfOCAqIGJiKSAqKiAzO1xuXHRjb25zdCBzID0gKGxsIC0gMC4wODlfNDg0XzE3N181ICogYWEgLSAxLjI5MV80ODVfNTQ4ICogYmIpICoqIDM7XG5cblx0Ly8gQXNzdW1lIHNSR0Jcblx0Y29uc3QgciA9IHNyZ2JOb25saW5lYXJUcmFuc2Zvcm0oNC4wNzZfNzQxXzY2Ml8xICogbCAtIDMuMzA3XzcxMV81OTFfMyAqIG0gKyAwLjIzMF85NjlfOTI5XzIgKiBzKTtcblx0Y29uc3QgZyA9IHNyZ2JOb25saW5lYXJUcmFuc2Zvcm0oLTEuMjY4XzQzOF8wMDRfNiAqIGwgKyAyLjYwOV83NTdfNDAxXzEgKiBtIC0gMC4zNDFfMzE5XzM5Nl81ICogcyk7XG5cdGNvbnN0IGIgPSBzcmdiTm9ubGluZWFyVHJhbnNmb3JtKC0wLjAwNF8xOTZfMDg2XzMgKiBsIC0gMC43MDNfNDE4XzYxNF83ICogbSArIDEuNzA3XzYxNF83MDEgKiBzKTtcblxuXHRyZXR1cm4gW3IgKiAyNTUsIGcgKiAyNTUsIGIgKiAyNTVdO1xufTtcblxuY29udmVydC5va2xjaC5va2xhYiA9IGZ1bmN0aW9uIChva2xjaCkge1xuXHRyZXR1cm4gY29udmVydC5sY2gubGFiKG9rbGNoKTtcbn07XG5cbmNvbnZlcnQubGFiLnh5eiA9IGZ1bmN0aW9uIChsYWIpIHtcblx0Y29uc3QgbCA9IGxhYlswXTtcblx0Y29uc3QgYSA9IGxhYlsxXTtcblx0Y29uc3QgYiA9IGxhYlsyXTtcblx0bGV0IHg7XG5cdGxldCB5O1xuXHRsZXQgejtcblxuXHR5ID0gKGwgKyAxNikgLyAxMTY7XG5cdHggPSBhIC8gNTAwICsgeTtcblx0eiA9IHkgLSBiIC8gMjAwO1xuXG5cdGNvbnN0IHkyID0geSAqKiAzO1xuXHRjb25zdCB4MiA9IHggKiogMztcblx0Y29uc3QgejIgPSB6ICoqIDM7XG5cdHkgPSB5MiA+IExBQl9GVCA/IHkyIDogKHkgLSAxNiAvIDExNikgLyA3Ljc4Nztcblx0eCA9IHgyID4gTEFCX0ZUID8geDIgOiAoeCAtIDE2IC8gMTE2KSAvIDcuNzg3O1xuXHR6ID0gejIgPiBMQUJfRlQgPyB6MiA6ICh6IC0gMTYgLyAxMTYpIC8gNy43ODc7XG5cblx0Ly8gSWxsdW1pbmFudCBENjUgWFlaIFRyaXN0cmltdWx1cyBWYWx1ZXNcblx0Ly8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ0lFXzE5MzFfY29sb3Jfc3BhY2Vcblx0eCAqPSA5NS4wNDc7XG5cdHkgKj0gMTAwO1xuXHR6ICo9IDEwOC44ODM7XG5cblx0cmV0dXJuIFt4LCB5LCB6XTtcbn07XG5cbmNvbnZlcnQubGFiLmxjaCA9IGZ1bmN0aW9uIChsYWIpIHtcblx0Y29uc3QgbCA9IGxhYlswXTtcblx0Y29uc3QgYSA9IGxhYlsxXTtcblx0Y29uc3QgYiA9IGxhYlsyXTtcblx0bGV0IGg7XG5cblx0Y29uc3QgaHIgPSBNYXRoLmF0YW4yKGIsIGEpO1xuXHRoID0gaHIgKiAzNjAgLyAyIC8gTWF0aC5QSTtcblxuXHRpZiAoaCA8IDApIHtcblx0XHRoICs9IDM2MDtcblx0fVxuXG5cdGNvbnN0IGMgPSBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7XG5cblx0cmV0dXJuIFtsLCBjLCBoXTtcbn07XG5cbmNvbnZlcnQubGNoLmxhYiA9IGZ1bmN0aW9uIChsY2gpIHtcblx0Y29uc3QgbCA9IGxjaFswXTtcblx0Y29uc3QgYyA9IGxjaFsxXTtcblx0Y29uc3QgaCA9IGxjaFsyXTtcblxuXHRjb25zdCBociA9IGggLyAzNjAgKiAyICogTWF0aC5QSTtcblx0Y29uc3QgYSA9IGMgKiBNYXRoLmNvcyhocik7XG5cdGNvbnN0IGIgPSBjICogTWF0aC5zaW4oaHIpO1xuXG5cdHJldHVybiBbbCwgYSwgYl07XG59O1xuXG5jb252ZXJ0LnJnYi5hbnNpMTYgPSBmdW5jdGlvbiAoYXJncywgc2F0dXJhdGlvbiA9IG51bGwpIHtcblx0Y29uc3QgW3IsIGcsIGJdID0gYXJncztcblx0bGV0IHZhbHVlID0gc2F0dXJhdGlvbiA9PT0gbnVsbCA/IGNvbnZlcnQucmdiLmhzdihhcmdzKVsyXSA6IHNhdHVyYXRpb247IC8vIEhzdiAtPiBhbnNpMTYgb3B0aW1pemF0aW9uXG5cblx0dmFsdWUgPSBNYXRoLnJvdW5kKHZhbHVlIC8gNTApO1xuXG5cdGlmICh2YWx1ZSA9PT0gMCkge1xuXHRcdHJldHVybiAzMDtcblx0fVxuXG5cdGxldCBhbnNpID0gMzBcblx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG5cdFx0KyAoKE1hdGgucm91bmQoYiAvIDI1NSkgPDwgMilcblx0XHR8IChNYXRoLnJvdW5kKGcgLyAyNTUpIDw8IDEpXG5cdFx0fCBNYXRoLnJvdW5kKHIgLyAyNTUpKTtcblx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWJpdHdpc2UgKi9cblxuXHRpZiAodmFsdWUgPT09IDIpIHtcblx0XHRhbnNpICs9IDYwO1xuXHR9XG5cblx0cmV0dXJuIGFuc2k7XG59O1xuXG5jb252ZXJ0Lmhzdi5hbnNpMTYgPSBmdW5jdGlvbiAoYXJncykge1xuXHQvLyBPcHRpbWl6YXRpb24gaGVyZTsgd2UgYWxyZWFkeSBrbm93IHRoZSB2YWx1ZSBhbmQgZG9uJ3QgbmVlZCB0byBnZXRcblx0Ly8gaXQgY29udmVydGVkIGZvciB1cy5cblx0cmV0dXJuIGNvbnZlcnQucmdiLmFuc2kxNihjb252ZXJ0Lmhzdi5yZ2IoYXJncyksIGFyZ3NbMl0pO1xufTtcblxuY29udmVydC5yZ2IuYW5zaTI1NiA9IGZ1bmN0aW9uIChhcmdzKSB7XG5cdGNvbnN0IHIgPSBhcmdzWzBdO1xuXHRjb25zdCBnID0gYXJnc1sxXTtcblx0Y29uc3QgYiA9IGFyZ3NbMl07XG5cblx0Ly8gV2UgdXNlIHRoZSBleHRlbmRlZCBncmV5c2NhbGUgcGFsZXR0ZSBoZXJlLCB3aXRoIHRoZSBleGNlcHRpb24gb2Zcblx0Ly8gYmxhY2sgYW5kIHdoaXRlLiBub3JtYWwgcGFsZXR0ZSBvbmx5IGhhcyA0IGdyZXlzY2FsZSBzaGFkZXMuXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG5cdGlmIChyID4+IDQgPT09IGcgPj4gNCAmJiBnID4+IDQgPT09IGIgPj4gNCkge1xuXHRcdGlmIChyIDwgOCkge1xuXHRcdFx0cmV0dXJuIDE2O1xuXHRcdH1cblxuXHRcdGlmIChyID4gMjQ4KSB7XG5cdFx0XHRyZXR1cm4gMjMxO1xuXHRcdH1cblxuXHRcdHJldHVybiBNYXRoLnJvdW5kKCgociAtIDgpIC8gMjQ3KSAqIDI0KSArIDIzMjtcblx0fVxuXG5cdGNvbnN0IGFuc2kgPSAxNlxuXHRcdCsgKDM2ICogTWF0aC5yb3VuZChyIC8gMjU1ICogNSkpXG5cdFx0KyAoNiAqIE1hdGgucm91bmQoZyAvIDI1NSAqIDUpKVxuXHRcdCsgTWF0aC5yb3VuZChiIC8gMjU1ICogNSk7XG5cblx0cmV0dXJuIGFuc2k7XG59O1xuXG5jb252ZXJ0LmFuc2kxNi5yZ2IgPSBmdW5jdGlvbiAoYXJncykge1xuXHRhcmdzID0gYXJnc1swXTtcblxuXHRsZXQgY29sb3IgPSBhcmdzICUgMTA7XG5cblx0Ly8gSGFuZGxlIGdyZXlzY2FsZVxuXHRpZiAoY29sb3IgPT09IDAgfHwgY29sb3IgPT09IDcpIHtcblx0XHRpZiAoYXJncyA+IDUwKSB7XG5cdFx0XHRjb2xvciArPSAzLjU7XG5cdFx0fVxuXG5cdFx0Y29sb3IgPSBjb2xvciAvIDEwLjUgKiAyNTU7XG5cblx0XHRyZXR1cm4gW2NvbG9yLCBjb2xvciwgY29sb3JdO1xuXHR9XG5cblx0Y29uc3QgbXVsdCA9IChNYXRoLnRydW5jKGFyZ3MgPiA1MCkgKyAxKSAqIDAuNTtcblx0LyogZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuXHRjb25zdCByID0gKChjb2xvciAmIDEpICogbXVsdCkgKiAyNTU7XG5cdGNvbnN0IGcgPSAoKChjb2xvciA+PiAxKSAmIDEpICogbXVsdCkgKiAyNTU7XG5cdGNvbnN0IGIgPSAoKChjb2xvciA+PiAyKSAmIDEpICogbXVsdCkgKiAyNTU7XG5cdC8qIGVzbGludC1lbmFibGUgbm8tYml0d2lzZSAqL1xuXG5cdHJldHVybiBbciwgZywgYl07XG59O1xuXG5jb252ZXJ0LmFuc2kyNTYucmdiID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0YXJncyA9IGFyZ3NbMF07XG5cblx0Ly8gSGFuZGxlIGdyZXlzY2FsZVxuXHRpZiAoYXJncyA+PSAyMzIpIHtcblx0XHRjb25zdCBjID0gKGFyZ3MgLSAyMzIpICogMTAgKyA4O1xuXHRcdHJldHVybiBbYywgYywgY107XG5cdH1cblxuXHRhcmdzIC09IDE2O1xuXG5cdGxldCByZW07XG5cdGNvbnN0IHIgPSBNYXRoLmZsb29yKGFyZ3MgLyAzNikgLyA1ICogMjU1O1xuXHRjb25zdCBnID0gTWF0aC5mbG9vcigocmVtID0gYXJncyAlIDM2KSAvIDYpIC8gNSAqIDI1NTtcblx0Y29uc3QgYiA9IChyZW0gJSA2KSAvIDUgKiAyNTU7XG5cblx0cmV0dXJuIFtyLCBnLCBiXTtcbn07XG5cbmNvbnZlcnQucmdiLmhleCA9IGZ1bmN0aW9uIChhcmdzKSB7XG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cblx0Y29uc3QgaW50ZWdlciA9ICgoTWF0aC5yb3VuZChhcmdzWzBdKSAmIDB4RkYpIDw8IDE2KVxuXHRcdCsgKChNYXRoLnJvdW5kKGFyZ3NbMV0pICYgMHhGRikgPDwgOClcblx0XHQrIChNYXRoLnJvdW5kKGFyZ3NbMl0pICYgMHhGRik7XG5cdC8qIGVzbGludC1lbmFibGUgbm8tYml0d2lzZSAqL1xuXG5cdGNvbnN0IHN0cmluZyA9IGludGVnZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdHJldHVybiAnMDAwMDAwJy5zbGljZShzdHJpbmcubGVuZ3RoKSArIHN0cmluZztcbn07XG5cbmNvbnZlcnQuaGV4LnJnYiA9IGZ1bmN0aW9uIChhcmdzKSB7XG5cdGNvbnN0IG1hdGNoID0gYXJncy50b1N0cmluZygxNikubWF0Y2goL1thLWZcXGRdezZ9fFthLWZcXGRdezN9L2kpO1xuXHRpZiAoIW1hdGNoKSB7XG5cdFx0cmV0dXJuIFswLCAwLCAwXTtcblx0fVxuXG5cdGxldCBjb2xvclN0cmluZyA9IG1hdGNoWzBdO1xuXG5cdGlmIChtYXRjaFswXS5sZW5ndGggPT09IDMpIHtcblx0XHRjb2xvclN0cmluZyA9IFsuLi5jb2xvclN0cmluZ10ubWFwKGNoYXIgPT4gY2hhciArIGNoYXIpLmpvaW4oJycpO1xuXHR9XG5cblx0Y29uc3QgaW50ZWdlciA9IE51bWJlci5wYXJzZUludChjb2xvclN0cmluZywgMTYpO1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG5cdGNvbnN0IHIgPSAoaW50ZWdlciA+PiAxNikgJiAweEZGO1xuXHRjb25zdCBnID0gKGludGVnZXIgPj4gOCkgJiAweEZGO1xuXHRjb25zdCBiID0gaW50ZWdlciAmIDB4RkY7XG5cdC8qIGVzbGludC1lbmFibGUgbm8tYml0d2lzZSAqL1xuXG5cdHJldHVybiBbciwgZywgYl07XG59O1xuXG5jb252ZXJ0LnJnYi5oY2cgPSBmdW5jdGlvbiAocmdiKSB7XG5cdGNvbnN0IHIgPSByZ2JbMF0gLyAyNTU7XG5cdGNvbnN0IGcgPSByZ2JbMV0gLyAyNTU7XG5cdGNvbnN0IGIgPSByZ2JbMl0gLyAyNTU7XG5cdGNvbnN0IG1heCA9IE1hdGgubWF4KE1hdGgubWF4KHIsIGcpLCBiKTtcblx0Y29uc3QgbWluID0gTWF0aC5taW4oTWF0aC5taW4ociwgZyksIGIpO1xuXHRjb25zdCBjaHJvbWEgPSAobWF4IC0gbWluKTtcblx0bGV0IGh1ZTtcblxuXHRjb25zdCBncmF5c2NhbGUgPSBjaHJvbWEgPCAxID8gbWluIC8gKDEgLSBjaHJvbWEpIDogMDtcblxuXHRpZiAoY2hyb21hIDw9IDApIHtcblx0XHRodWUgPSAwO1xuXHR9IGVsc2UgaWYgKG1heCA9PT0gcikge1xuXHRcdGh1ZSA9ICgoZyAtIGIpIC8gY2hyb21hKSAlIDY7XG5cdH0gZWxzZSBpZiAobWF4ID09PSBnKSB7XG5cdFx0aHVlID0gMiArIChiIC0gcikgLyBjaHJvbWE7XG5cdH0gZWxzZSB7XG5cdFx0aHVlID0gNCArIChyIC0gZykgLyBjaHJvbWE7XG5cdH1cblxuXHRodWUgLz0gNjtcblx0aHVlICU9IDE7XG5cblx0cmV0dXJuIFtodWUgKiAzNjAsIGNocm9tYSAqIDEwMCwgZ3JheXNjYWxlICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaHNsLmhjZyA9IGZ1bmN0aW9uIChoc2wpIHtcblx0Y29uc3QgcyA9IGhzbFsxXSAvIDEwMDtcblx0Y29uc3QgbCA9IGhzbFsyXSAvIDEwMDtcblxuXHRjb25zdCBjID0gbCA8IDAuNSA/ICgyICogcyAqIGwpIDogKDIgKiBzICogKDEgLSBsKSk7XG5cblx0bGV0IGYgPSAwO1xuXHRpZiAoYyA8IDEpIHtcblx0XHRmID0gKGwgLSAwLjUgKiBjKSAvICgxIC0gYyk7XG5cdH1cblxuXHRyZXR1cm4gW2hzbFswXSwgYyAqIDEwMCwgZiAqIDEwMF07XG59O1xuXG5jb252ZXJ0Lmhzdi5oY2cgPSBmdW5jdGlvbiAoaHN2KSB7XG5cdGNvbnN0IHMgPSBoc3ZbMV0gLyAxMDA7XG5cdGNvbnN0IHYgPSBoc3ZbMl0gLyAxMDA7XG5cblx0Y29uc3QgYyA9IHMgKiB2O1xuXHRsZXQgZiA9IDA7XG5cblx0aWYgKGMgPCAxKSB7XG5cdFx0ZiA9ICh2IC0gYykgLyAoMSAtIGMpO1xuXHR9XG5cblx0cmV0dXJuIFtoc3ZbMF0sIGMgKiAxMDAsIGYgKiAxMDBdO1xufTtcblxuY29udmVydC5oY2cucmdiID0gZnVuY3Rpb24gKGhjZykge1xuXHRjb25zdCBoID0gaGNnWzBdIC8gMzYwO1xuXHRjb25zdCBjID0gaGNnWzFdIC8gMTAwO1xuXHRjb25zdCBnID0gaGNnWzJdIC8gMTAwO1xuXG5cdGlmIChjID09PSAwKSB7XG5cdFx0cmV0dXJuIFtnICogMjU1LCBnICogMjU1LCBnICogMjU1XTtcblx0fVxuXG5cdGNvbnN0IHB1cmUgPSBbMCwgMCwgMF07XG5cdGNvbnN0IGhpID0gKGggJSAxKSAqIDY7XG5cdGNvbnN0IHYgPSBoaSAlIDE7XG5cdGNvbnN0IHcgPSAxIC0gdjtcblx0bGV0IG1nID0gMDtcblxuXHQvKiBlc2xpbnQtZGlzYWJsZSBtYXgtc3RhdGVtZW50cy1wZXItbGluZSAqL1xuXHRzd2l0Y2ggKE1hdGguZmxvb3IoaGkpKSB7XG5cdFx0Y2FzZSAwOiB7XG5cdFx0XHRwdXJlWzBdID0gMTsgcHVyZVsxXSA9IHY7IHB1cmVbMl0gPSAwOyBicmVhaztcblx0XHR9XG5cblx0XHRjYXNlIDE6IHtcblx0XHRcdHB1cmVbMF0gPSB3OyBwdXJlWzFdID0gMTsgcHVyZVsyXSA9IDA7IGJyZWFrO1xuXHRcdH1cblxuXHRcdGNhc2UgMjoge1xuXHRcdFx0cHVyZVswXSA9IDA7IHB1cmVbMV0gPSAxOyBwdXJlWzJdID0gdjsgYnJlYWs7XG5cdFx0fVxuXG5cdFx0Y2FzZSAzOiB7XG5cdFx0XHRwdXJlWzBdID0gMDsgcHVyZVsxXSA9IHc7IHB1cmVbMl0gPSAxOyBicmVhaztcblx0XHR9XG5cblx0XHRjYXNlIDQ6IHtcblx0XHRcdHB1cmVbMF0gPSB2OyBwdXJlWzFdID0gMDsgcHVyZVsyXSA9IDE7IGJyZWFrO1xuXHRcdH1cblxuXHRcdGRlZmF1bHQ6IHtcblx0XHRcdHB1cmVbMF0gPSAxOyBwdXJlWzFdID0gMDsgcHVyZVsyXSA9IHc7XG5cdFx0fVxuXHR9XG5cdC8qIGVzbGludC1lbmFibGUgbWF4LXN0YXRlbWVudHMtcGVyLWxpbmUgKi9cblxuXHRtZyA9ICgxIC0gYykgKiBnO1xuXG5cdHJldHVybiBbXG5cdFx0KGMgKiBwdXJlWzBdICsgbWcpICogMjU1LFxuXHRcdChjICogcHVyZVsxXSArIG1nKSAqIDI1NSxcblx0XHQoYyAqIHB1cmVbMl0gKyBtZykgKiAyNTUsXG5cdF07XG59O1xuXG5jb252ZXJ0LmhjZy5oc3YgPSBmdW5jdGlvbiAoaGNnKSB7XG5cdGNvbnN0IGMgPSBoY2dbMV0gLyAxMDA7XG5cdGNvbnN0IGcgPSBoY2dbMl0gLyAxMDA7XG5cblx0Y29uc3QgdiA9IGMgKyBnICogKDEgLSBjKTtcblx0bGV0IGYgPSAwO1xuXG5cdGlmICh2ID4gMCkge1xuXHRcdGYgPSBjIC8gdjtcblx0fVxuXG5cdHJldHVybiBbaGNnWzBdLCBmICogMTAwLCB2ICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaGNnLmhzbCA9IGZ1bmN0aW9uIChoY2cpIHtcblx0Y29uc3QgYyA9IGhjZ1sxXSAvIDEwMDtcblx0Y29uc3QgZyA9IGhjZ1syXSAvIDEwMDtcblxuXHRjb25zdCBsID0gZyAqICgxIC0gYykgKyAwLjUgKiBjO1xuXHRsZXQgcyA9IDA7XG5cblx0aWYgKGwgPiAwICYmIGwgPCAwLjUpIHtcblx0XHRzID0gYyAvICgyICogbCk7XG5cdH0gZWxzZSBpZiAobCA+PSAwLjUgJiYgbCA8IDEpIHtcblx0XHRzID0gYyAvICgyICogKDEgLSBsKSk7XG5cdH1cblxuXHRyZXR1cm4gW2hjZ1swXSwgcyAqIDEwMCwgbCAqIDEwMF07XG59O1xuXG5jb252ZXJ0LmhjZy5od2IgPSBmdW5jdGlvbiAoaGNnKSB7XG5cdGNvbnN0IGMgPSBoY2dbMV0gLyAxMDA7XG5cdGNvbnN0IGcgPSBoY2dbMl0gLyAxMDA7XG5cdGNvbnN0IHYgPSBjICsgZyAqICgxIC0gYyk7XG5cdHJldHVybiBbaGNnWzBdLCAodiAtIGMpICogMTAwLCAoMSAtIHYpICogMTAwXTtcbn07XG5cbmNvbnZlcnQuaHdiLmhjZyA9IGZ1bmN0aW9uIChod2IpIHtcblx0Y29uc3QgdyA9IGh3YlsxXSAvIDEwMDtcblx0Y29uc3QgYiA9IGh3YlsyXSAvIDEwMDtcblx0Y29uc3QgdiA9IDEgLSBiO1xuXHRjb25zdCBjID0gdiAtIHc7XG5cdGxldCBnID0gMDtcblxuXHRpZiAoYyA8IDEpIHtcblx0XHRnID0gKHYgLSBjKSAvICgxIC0gYyk7XG5cdH1cblxuXHRyZXR1cm4gW2h3YlswXSwgYyAqIDEwMCwgZyAqIDEwMF07XG59O1xuXG5jb252ZXJ0LmFwcGxlLnJnYiA9IGZ1bmN0aW9uIChhcHBsZSkge1xuXHRyZXR1cm4gWyhhcHBsZVswXSAvIDY1XzUzNSkgKiAyNTUsIChhcHBsZVsxXSAvIDY1XzUzNSkgKiAyNTUsIChhcHBsZVsyXSAvIDY1XzUzNSkgKiAyNTVdO1xufTtcblxuY29udmVydC5yZ2IuYXBwbGUgPSBmdW5jdGlvbiAocmdiKSB7XG5cdHJldHVybiBbKHJnYlswXSAvIDI1NSkgKiA2NV81MzUsIChyZ2JbMV0gLyAyNTUpICogNjVfNTM1LCAocmdiWzJdIC8gMjU1KSAqIDY1XzUzNV07XG59O1xuXG5jb252ZXJ0LmdyYXkucmdiID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0cmV0dXJuIFthcmdzWzBdIC8gMTAwICogMjU1LCBhcmdzWzBdIC8gMTAwICogMjU1LCBhcmdzWzBdIC8gMTAwICogMjU1XTtcbn07XG5cbmNvbnZlcnQuZ3JheS5oc2wgPSBmdW5jdGlvbiAoYXJncykge1xuXHRyZXR1cm4gWzAsIDAsIGFyZ3NbMF1dO1xufTtcblxuY29udmVydC5ncmF5LmhzdiA9IGNvbnZlcnQuZ3JheS5oc2w7XG5cbmNvbnZlcnQuZ3JheS5od2IgPSBmdW5jdGlvbiAoZ3JheSkge1xuXHRyZXR1cm4gWzAsIDEwMCwgZ3JheVswXV07XG59O1xuXG5jb252ZXJ0LmdyYXkuY215ayA9IGZ1bmN0aW9uIChncmF5KSB7XG5cdHJldHVybiBbMCwgMCwgMCwgZ3JheVswXV07XG59O1xuXG5jb252ZXJ0LmdyYXkubGFiID0gZnVuY3Rpb24gKGdyYXkpIHtcblx0cmV0dXJuIFtncmF5WzBdLCAwLCAwXTtcbn07XG5cbmNvbnZlcnQuZ3JheS5oZXggPSBmdW5jdGlvbiAoZ3JheSkge1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlICovXG5cdGNvbnN0IHZhbHVlID0gTWF0aC5yb3VuZChncmF5WzBdIC8gMTAwICogMjU1KSAmIDB4RkY7XG5cdGNvbnN0IGludGVnZXIgPSAodmFsdWUgPDwgMTYpICsgKHZhbHVlIDw8IDgpICsgdmFsdWU7XG5cdC8qIGVzbGludC1lbmFibGUgbm8tYml0d2lzZSAqL1xuXG5cdGNvbnN0IHN0cmluZyA9IGludGVnZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cdHJldHVybiAnMDAwMDAwJy5zbGljZShzdHJpbmcubGVuZ3RoKSArIHN0cmluZztcbn07XG5cbmNvbnZlcnQucmdiLmdyYXkgPSBmdW5jdGlvbiAocmdiKSB7XG5cdGNvbnN0IHZhbHVlID0gKHJnYlswXSArIHJnYlsxXSArIHJnYlsyXSkgLyAzO1xuXHRyZXR1cm4gW3ZhbHVlIC8gMjU1ICogMTAwXTtcbn07XG4iLCJpbXBvcnQgY29udmVyc2lvbnMgZnJvbSAnLi9jb252ZXJzaW9ucy5qcyc7XG5pbXBvcnQgcm91dGUgZnJvbSAnLi9yb3V0ZS5qcyc7XG5cbmNvbnN0IGNvbnZlcnQgPSB7fTtcblxuY29uc3QgbW9kZWxzID0gT2JqZWN0LmtleXMoY29udmVyc2lvbnMpO1xuXG5mdW5jdGlvbiB3cmFwUmF3KGZuKSB7XG5cdGNvbnN0IHdyYXBwZWRGbiA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG5cdFx0Y29uc3QgYXJnMCA9IGFyZ3NbMF07XG5cdFx0aWYgKGFyZzAgPT09IHVuZGVmaW5lZCB8fCBhcmcwID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gYXJnMDtcblx0XHR9XG5cblx0XHRpZiAoYXJnMC5sZW5ndGggPiAxKSB7XG5cdFx0XHRhcmdzID0gYXJnMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZm4oYXJncyk7XG5cdH07XG5cblx0Ly8gUHJlc2VydmUgLmNvbnZlcnNpb24gcHJvcGVydHkgaWYgdGhlcmUgaXMgb25lXG5cdGlmICgnY29udmVyc2lvbicgaW4gZm4pIHtcblx0XHR3cmFwcGVkRm4uY29udmVyc2lvbiA9IGZuLmNvbnZlcnNpb247XG5cdH1cblxuXHRyZXR1cm4gd3JhcHBlZEZuO1xufVxuXG5mdW5jdGlvbiB3cmFwUm91bmRlZChmbikge1xuXHRjb25zdCB3cmFwcGVkRm4gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuXHRcdGNvbnN0IGFyZzAgPSBhcmdzWzBdO1xuXG5cdFx0aWYgKGFyZzAgPT09IHVuZGVmaW5lZCB8fCBhcmcwID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gYXJnMDtcblx0XHR9XG5cblx0XHRpZiAoYXJnMC5sZW5ndGggPiAxKSB7XG5cdFx0XHRhcmdzID0gYXJnMDtcblx0XHR9XG5cblx0XHRjb25zdCByZXN1bHQgPSBmbihhcmdzKTtcblxuXHRcdC8vIFdlJ3JlIGFzc3VtaW5nIHRoZSByZXN1bHQgaXMgYW4gYXJyYXkgaGVyZS5cblx0XHQvLyBzZWUgbm90aWNlIGluIGNvbnZlcnNpb25zLmpzOyBkb24ndCB1c2UgYm94IHR5cGVzXG5cdFx0Ly8gaW4gY29udmVyc2lvbiBmdW5jdGlvbnMuXG5cdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRmb3IgKGxldCB7bGVuZ3RofSA9IHJlc3VsdCwgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdFx0XHRyZXN1bHRbaV0gPSBNYXRoLnJvdW5kKHJlc3VsdFtpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcblxuXHQvLyBQcmVzZXJ2ZSAuY29udmVyc2lvbiBwcm9wZXJ0eSBpZiB0aGVyZSBpcyBvbmVcblx0aWYgKCdjb252ZXJzaW9uJyBpbiBmbikge1xuXHRcdHdyYXBwZWRGbi5jb252ZXJzaW9uID0gZm4uY29udmVyc2lvbjtcblx0fVxuXG5cdHJldHVybiB3cmFwcGVkRm47XG59XG5cbmZvciAoY29uc3QgZnJvbU1vZGVsIG9mIG1vZGVscykge1xuXHRjb252ZXJ0W2Zyb21Nb2RlbF0gPSB7fTtcblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoY29udmVydFtmcm9tTW9kZWxdLCAnY2hhbm5lbHMnLCB7dmFsdWU6IGNvbnZlcnNpb25zW2Zyb21Nb2RlbF0uY2hhbm5lbHN9KTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbnZlcnRbZnJvbU1vZGVsXSwgJ2xhYmVscycsIHt2YWx1ZTogY29udmVyc2lvbnNbZnJvbU1vZGVsXS5sYWJlbHN9KTtcblxuXHRjb25zdCByb3V0ZXMgPSByb3V0ZShmcm9tTW9kZWwpO1xuXHRjb25zdCByb3V0ZU1vZGVscyA9IE9iamVjdC5rZXlzKHJvdXRlcyk7XG5cblx0Zm9yIChjb25zdCB0b01vZGVsIG9mIHJvdXRlTW9kZWxzKSB7XG5cdFx0Y29uc3QgZm4gPSByb3V0ZXNbdG9Nb2RlbF07XG5cblx0XHRjb252ZXJ0W2Zyb21Nb2RlbF1bdG9Nb2RlbF0gPSB3cmFwUm91bmRlZChmbik7XG5cdFx0Y29udmVydFtmcm9tTW9kZWxdW3RvTW9kZWxdLnJhdyA9IHdyYXBSYXcoZm4pO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbnZlcnQ7XG4iLCJpbXBvcnQgY29udmVyc2lvbnMgZnJvbSAnLi9jb252ZXJzaW9ucy5qcyc7XG5cbi8qXG5cdFRoaXMgZnVuY3Rpb24gcm91dGVzIGEgbW9kZWwgdG8gYWxsIG90aGVyIG1vZGVscy5cblxuXHRhbGwgZnVuY3Rpb25zIHRoYXQgYXJlIHJvdXRlZCBoYXZlIGEgcHJvcGVydHkgYC5jb252ZXJzaW9uYCBhdHRhY2hlZFxuXHR0byB0aGUgcmV0dXJuZWQgc3ludGhldGljIGZ1bmN0aW9uLiBUaGlzIHByb3BlcnR5IGlzIGFuIGFycmF5XG5cdG9mIHN0cmluZ3MsIGVhY2ggd2l0aCB0aGUgc3RlcHMgaW4gYmV0d2VlbiB0aGUgJ2Zyb20nIGFuZCAndG8nXG5cdGNvbG9yIG1vZGVscyAoaW5jbHVzaXZlKS5cblxuXHRjb252ZXJzaW9ucyB0aGF0IGFyZSBub3QgcG9zc2libGUgc2ltcGx5IGFyZSBub3QgaW5jbHVkZWQuXG4qL1xuXG5mdW5jdGlvbiBidWlsZEdyYXBoKCkge1xuXHRjb25zdCBncmFwaCA9IHt9O1xuXHQvLyBodHRwczovL2pzcGVyZi5jb20vb2JqZWN0LWtleXMtdnMtZm9yLWluLXdpdGgtY2xvc3VyZS8zXG5cdGNvbnN0IG1vZGVscyA9IE9iamVjdC5rZXlzKGNvbnZlcnNpb25zKTtcblxuXHRmb3IgKGxldCB7bGVuZ3RofSA9IG1vZGVscywgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGdyYXBoW21vZGVsc1tpXV0gPSB7XG5cdFx0XHQvLyBodHRwOi8vanNwZXJmLmNvbS8xLXZzLWluZmluaXR5XG5cdFx0XHQvLyBtaWNyby1vcHQsIGJ1dCB0aGlzIGlzIHNpbXBsZS5cblx0XHRcdGRpc3RhbmNlOiAtMSxcblx0XHRcdHBhcmVudDogbnVsbCxcblx0XHR9O1xuXHR9XG5cblx0cmV0dXJuIGdyYXBoO1xufVxuXG4vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CcmVhZHRoLWZpcnN0X3NlYXJjaFxuZnVuY3Rpb24gZGVyaXZlQkZTKGZyb21Nb2RlbCkge1xuXHRjb25zdCBncmFwaCA9IGJ1aWxkR3JhcGgoKTtcblx0Y29uc3QgcXVldWUgPSBbZnJvbU1vZGVsXTsgLy8gVW5zaGlmdCAtPiBxdWV1ZSAtPiBwb3BcblxuXHRncmFwaFtmcm9tTW9kZWxdLmRpc3RhbmNlID0gMDtcblxuXHR3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IGN1cnJlbnQgPSBxdWV1ZS5wb3AoKTtcblx0XHRjb25zdCBhZGphY2VudHMgPSBPYmplY3Qua2V5cyhjb252ZXJzaW9uc1tjdXJyZW50XSk7XG5cblx0XHRmb3IgKGxldCB7bGVuZ3RofSA9IGFkamFjZW50cywgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgYWRqYWNlbnQgPSBhZGphY2VudHNbaV07XG5cdFx0XHRjb25zdCBub2RlID0gZ3JhcGhbYWRqYWNlbnRdO1xuXG5cdFx0XHRpZiAobm9kZS5kaXN0YW5jZSA9PT0gLTEpIHtcblx0XHRcdFx0bm9kZS5kaXN0YW5jZSA9IGdyYXBoW2N1cnJlbnRdLmRpc3RhbmNlICsgMTtcblx0XHRcdFx0bm9kZS5wYXJlbnQgPSBjdXJyZW50O1xuXHRcdFx0XHRxdWV1ZS51bnNoaWZ0KGFkamFjZW50KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZ3JhcGg7XG59XG5cbmZ1bmN0aW9uIGxpbmsoZnJvbSwgdG8pIHtcblx0cmV0dXJuIGZ1bmN0aW9uIChhcmdzKSB7XG5cdFx0cmV0dXJuIHRvKGZyb20oYXJncykpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiB3cmFwQ29udmVyc2lvbih0b01vZGVsLCBncmFwaCkge1xuXHRjb25zdCBwYXRoID0gW2dyYXBoW3RvTW9kZWxdLnBhcmVudCwgdG9Nb2RlbF07XG5cdGxldCBmbiA9IGNvbnZlcnNpb25zW2dyYXBoW3RvTW9kZWxdLnBhcmVudF1bdG9Nb2RlbF07XG5cblx0bGV0IGN1ciA9IGdyYXBoW3RvTW9kZWxdLnBhcmVudDtcblx0d2hpbGUgKGdyYXBoW2N1cl0ucGFyZW50KSB7XG5cdFx0cGF0aC51bnNoaWZ0KGdyYXBoW2N1cl0ucGFyZW50KTtcblx0XHRmbiA9IGxpbmsoY29udmVyc2lvbnNbZ3JhcGhbY3VyXS5wYXJlbnRdW2N1cl0sIGZuKTtcblx0XHRjdXIgPSBncmFwaFtjdXJdLnBhcmVudDtcblx0fVxuXG5cdGZuLmNvbnZlcnNpb24gPSBwYXRoO1xuXHRyZXR1cm4gZm47XG59XG5cbmZ1bmN0aW9uIHJvdXRlKGZyb21Nb2RlbCkge1xuXHRjb25zdCBncmFwaCA9IGRlcml2ZUJGUyhmcm9tTW9kZWwpO1xuXHRjb25zdCBjb252ZXJzaW9uID0ge307XG5cblx0Y29uc3QgbW9kZWxzID0gT2JqZWN0LmtleXMoZ3JhcGgpO1xuXHRmb3IgKGxldCB7bGVuZ3RofSA9IG1vZGVscywgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IHRvTW9kZWwgPSBtb2RlbHNbaV07XG5cdFx0Y29uc3Qgbm9kZSA9IGdyYXBoW3RvTW9kZWxdO1xuXG5cdFx0aWYgKG5vZGUucGFyZW50ID09PSBudWxsKSB7XG5cdFx0XHQvLyBObyBwb3NzaWJsZSBjb252ZXJzaW9uLCBvciB0aGlzIG5vZGUgaXMgdGhlIHNvdXJjZSBtb2RlbC5cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnZlcnNpb25bdG9Nb2RlbF0gPSB3cmFwQ29udmVyc2lvbih0b01vZGVsLCBncmFwaCk7XG5cdH1cblxuXHRyZXR1cm4gY29udmVyc2lvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcm91dGU7XG4iLCJjb25zdCBjb2xvcnMgPSB7XG5cdGFsaWNlYmx1ZTogWzI0MCwgMjQ4LCAyNTVdLFxuXHRhbnRpcXVld2hpdGU6IFsyNTAsIDIzNSwgMjE1XSxcblx0YXF1YTogWzAsIDI1NSwgMjU1XSxcblx0YXF1YW1hcmluZTogWzEyNywgMjU1LCAyMTJdLFxuXHRhenVyZTogWzI0MCwgMjU1LCAyNTVdLFxuXHRiZWlnZTogWzI0NSwgMjQ1LCAyMjBdLFxuXHRiaXNxdWU6IFsyNTUsIDIyOCwgMTk2XSxcblx0YmxhY2s6IFswLCAwLCAwXSxcblx0YmxhbmNoZWRhbG1vbmQ6IFsyNTUsIDIzNSwgMjA1XSxcblx0Ymx1ZTogWzAsIDAsIDI1NV0sXG5cdGJsdWV2aW9sZXQ6IFsxMzgsIDQzLCAyMjZdLFxuXHRicm93bjogWzE2NSwgNDIsIDQyXSxcblx0YnVybHl3b29kOiBbMjIyLCAxODQsIDEzNV0sXG5cdGNhZGV0Ymx1ZTogWzk1LCAxNTgsIDE2MF0sXG5cdGNoYXJ0cmV1c2U6IFsxMjcsIDI1NSwgMF0sXG5cdGNob2NvbGF0ZTogWzIxMCwgMTA1LCAzMF0sXG5cdGNvcmFsOiBbMjU1LCAxMjcsIDgwXSxcblx0Y29ybmZsb3dlcmJsdWU6IFsxMDAsIDE0OSwgMjM3XSxcblx0Y29ybnNpbGs6IFsyNTUsIDI0OCwgMjIwXSxcblx0Y3JpbXNvbjogWzIyMCwgMjAsIDYwXSxcblx0Y3lhbjogWzAsIDI1NSwgMjU1XSxcblx0ZGFya2JsdWU6IFswLCAwLCAxMzldLFxuXHRkYXJrY3lhbjogWzAsIDEzOSwgMTM5XSxcblx0ZGFya2dvbGRlbnJvZDogWzE4NCwgMTM0LCAxMV0sXG5cdGRhcmtncmF5OiBbMTY5LCAxNjksIDE2OV0sXG5cdGRhcmtncmVlbjogWzAsIDEwMCwgMF0sXG5cdGRhcmtncmV5OiBbMTY5LCAxNjksIDE2OV0sXG5cdGRhcmtraGFraTogWzE4OSwgMTgzLCAxMDddLFxuXHRkYXJrbWFnZW50YTogWzEzOSwgMCwgMTM5XSxcblx0ZGFya29saXZlZ3JlZW46IFs4NSwgMTA3LCA0N10sXG5cdGRhcmtvcmFuZ2U6IFsyNTUsIDE0MCwgMF0sXG5cdGRhcmtvcmNoaWQ6IFsxNTMsIDUwLCAyMDRdLFxuXHRkYXJrcmVkOiBbMTM5LCAwLCAwXSxcblx0ZGFya3NhbG1vbjogWzIzMywgMTUwLCAxMjJdLFxuXHRkYXJrc2VhZ3JlZW46IFsxNDMsIDE4OCwgMTQzXSxcblx0ZGFya3NsYXRlYmx1ZTogWzcyLCA2MSwgMTM5XSxcblx0ZGFya3NsYXRlZ3JheTogWzQ3LCA3OSwgNzldLFxuXHRkYXJrc2xhdGVncmV5OiBbNDcsIDc5LCA3OV0sXG5cdGRhcmt0dXJxdW9pc2U6IFswLCAyMDYsIDIwOV0sXG5cdGRhcmt2aW9sZXQ6IFsxNDgsIDAsIDIxMV0sXG5cdGRlZXBwaW5rOiBbMjU1LCAyMCwgMTQ3XSxcblx0ZGVlcHNreWJsdWU6IFswLCAxOTEsIDI1NV0sXG5cdGRpbWdyYXk6IFsxMDUsIDEwNSwgMTA1XSxcblx0ZGltZ3JleTogWzEwNSwgMTA1LCAxMDVdLFxuXHRkb2RnZXJibHVlOiBbMzAsIDE0NCwgMjU1XSxcblx0ZmlyZWJyaWNrOiBbMTc4LCAzNCwgMzRdLFxuXHRmbG9yYWx3aGl0ZTogWzI1NSwgMjUwLCAyNDBdLFxuXHRmb3Jlc3RncmVlbjogWzM0LCAxMzksIDM0XSxcblx0ZnVjaHNpYTogWzI1NSwgMCwgMjU1XSxcblx0Z2FpbnNib3JvOiBbMjIwLCAyMjAsIDIyMF0sXG5cdGdob3N0d2hpdGU6IFsyNDgsIDI0OCwgMjU1XSxcblx0Z29sZDogWzI1NSwgMjE1LCAwXSxcblx0Z29sZGVucm9kOiBbMjE4LCAxNjUsIDMyXSxcblx0Z3JheTogWzEyOCwgMTI4LCAxMjhdLFxuXHRncmVlbjogWzAsIDEyOCwgMF0sXG5cdGdyZWVueWVsbG93OiBbMTczLCAyNTUsIDQ3XSxcblx0Z3JleTogWzEyOCwgMTI4LCAxMjhdLFxuXHRob25leWRldzogWzI0MCwgMjU1LCAyNDBdLFxuXHRob3RwaW5rOiBbMjU1LCAxMDUsIDE4MF0sXG5cdGluZGlhbnJlZDogWzIwNSwgOTIsIDkyXSxcblx0aW5kaWdvOiBbNzUsIDAsIDEzMF0sXG5cdGl2b3J5OiBbMjU1LCAyNTUsIDI0MF0sXG5cdGtoYWtpOiBbMjQwLCAyMzAsIDE0MF0sXG5cdGxhdmVuZGVyOiBbMjMwLCAyMzAsIDI1MF0sXG5cdGxhdmVuZGVyYmx1c2g6IFsyNTUsIDI0MCwgMjQ1XSxcblx0bGF3bmdyZWVuOiBbMTI0LCAyNTIsIDBdLFxuXHRsZW1vbmNoaWZmb246IFsyNTUsIDI1MCwgMjA1XSxcblx0bGlnaHRibHVlOiBbMTczLCAyMTYsIDIzMF0sXG5cdGxpZ2h0Y29yYWw6IFsyNDAsIDEyOCwgMTI4XSxcblx0bGlnaHRjeWFuOiBbMjI0LCAyNTUsIDI1NV0sXG5cdGxpZ2h0Z29sZGVucm9keWVsbG93OiBbMjUwLCAyNTAsIDIxMF0sXG5cdGxpZ2h0Z3JheTogWzIxMSwgMjExLCAyMTFdLFxuXHRsaWdodGdyZWVuOiBbMTQ0LCAyMzgsIDE0NF0sXG5cdGxpZ2h0Z3JleTogWzIxMSwgMjExLCAyMTFdLFxuXHRsaWdodHBpbms6IFsyNTUsIDE4MiwgMTkzXSxcblx0bGlnaHRzYWxtb246IFsyNTUsIDE2MCwgMTIyXSxcblx0bGlnaHRzZWFncmVlbjogWzMyLCAxNzgsIDE3MF0sXG5cdGxpZ2h0c2t5Ymx1ZTogWzEzNSwgMjA2LCAyNTBdLFxuXHRsaWdodHNsYXRlZ3JheTogWzExOSwgMTM2LCAxNTNdLFxuXHRsaWdodHNsYXRlZ3JleTogWzExOSwgMTM2LCAxNTNdLFxuXHRsaWdodHN0ZWVsYmx1ZTogWzE3NiwgMTk2LCAyMjJdLFxuXHRsaWdodHllbGxvdzogWzI1NSwgMjU1LCAyMjRdLFxuXHRsaW1lOiBbMCwgMjU1LCAwXSxcblx0bGltZWdyZWVuOiBbNTAsIDIwNSwgNTBdLFxuXHRsaW5lbjogWzI1MCwgMjQwLCAyMzBdLFxuXHRtYWdlbnRhOiBbMjU1LCAwLCAyNTVdLFxuXHRtYXJvb246IFsxMjgsIDAsIDBdLFxuXHRtZWRpdW1hcXVhbWFyaW5lOiBbMTAyLCAyMDUsIDE3MF0sXG5cdG1lZGl1bWJsdWU6IFswLCAwLCAyMDVdLFxuXHRtZWRpdW1vcmNoaWQ6IFsxODYsIDg1LCAyMTFdLFxuXHRtZWRpdW1wdXJwbGU6IFsxNDcsIDExMiwgMjE5XSxcblx0bWVkaXVtc2VhZ3JlZW46IFs2MCwgMTc5LCAxMTNdLFxuXHRtZWRpdW1zbGF0ZWJsdWU6IFsxMjMsIDEwNCwgMjM4XSxcblx0bWVkaXVtc3ByaW5nZ3JlZW46IFswLCAyNTAsIDE1NF0sXG5cdG1lZGl1bXR1cnF1b2lzZTogWzcyLCAyMDksIDIwNF0sXG5cdG1lZGl1bXZpb2xldHJlZDogWzE5OSwgMjEsIDEzM10sXG5cdG1pZG5pZ2h0Ymx1ZTogWzI1LCAyNSwgMTEyXSxcblx0bWludGNyZWFtOiBbMjQ1LCAyNTUsIDI1MF0sXG5cdG1pc3R5cm9zZTogWzI1NSwgMjI4LCAyMjVdLFxuXHRtb2NjYXNpbjogWzI1NSwgMjI4LCAxODFdLFxuXHRuYXZham93aGl0ZTogWzI1NSwgMjIyLCAxNzNdLFxuXHRuYXZ5OiBbMCwgMCwgMTI4XSxcblx0b2xkbGFjZTogWzI1MywgMjQ1LCAyMzBdLFxuXHRvbGl2ZTogWzEyOCwgMTI4LCAwXSxcblx0b2xpdmVkcmFiOiBbMTA3LCAxNDIsIDM1XSxcblx0b3JhbmdlOiBbMjU1LCAxNjUsIDBdLFxuXHRvcmFuZ2VyZWQ6IFsyNTUsIDY5LCAwXSxcblx0b3JjaGlkOiBbMjE4LCAxMTIsIDIxNF0sXG5cdHBhbGVnb2xkZW5yb2Q6IFsyMzgsIDIzMiwgMTcwXSxcblx0cGFsZWdyZWVuOiBbMTUyLCAyNTEsIDE1Ml0sXG5cdHBhbGV0dXJxdW9pc2U6IFsxNzUsIDIzOCwgMjM4XSxcblx0cGFsZXZpb2xldHJlZDogWzIxOSwgMTEyLCAxNDddLFxuXHRwYXBheWF3aGlwOiBbMjU1LCAyMzksIDIxM10sXG5cdHBlYWNocHVmZjogWzI1NSwgMjE4LCAxODVdLFxuXHRwZXJ1OiBbMjA1LCAxMzMsIDYzXSxcblx0cGluazogWzI1NSwgMTkyLCAyMDNdLFxuXHRwbHVtOiBbMjIxLCAxNjAsIDIyMV0sXG5cdHBvd2RlcmJsdWU6IFsxNzYsIDIyNCwgMjMwXSxcblx0cHVycGxlOiBbMTI4LCAwLCAxMjhdLFxuXHRyZWJlY2NhcHVycGxlOiBbMTAyLCA1MSwgMTUzXSxcblx0cmVkOiBbMjU1LCAwLCAwXSxcblx0cm9zeWJyb3duOiBbMTg4LCAxNDMsIDE0M10sXG5cdHJveWFsYmx1ZTogWzY1LCAxMDUsIDIyNV0sXG5cdHNhZGRsZWJyb3duOiBbMTM5LCA2OSwgMTldLFxuXHRzYWxtb246IFsyNTAsIDEyOCwgMTE0XSxcblx0c2FuZHlicm93bjogWzI0NCwgMTY0LCA5Nl0sXG5cdHNlYWdyZWVuOiBbNDYsIDEzOSwgODddLFxuXHRzZWFzaGVsbDogWzI1NSwgMjQ1LCAyMzhdLFxuXHRzaWVubmE6IFsxNjAsIDgyLCA0NV0sXG5cdHNpbHZlcjogWzE5MiwgMTkyLCAxOTJdLFxuXHRza3libHVlOiBbMTM1LCAyMDYsIDIzNV0sXG5cdHNsYXRlYmx1ZTogWzEwNiwgOTAsIDIwNV0sXG5cdHNsYXRlZ3JheTogWzExMiwgMTI4LCAxNDRdLFxuXHRzbGF0ZWdyZXk6IFsxMTIsIDEyOCwgMTQ0XSxcblx0c25vdzogWzI1NSwgMjUwLCAyNTBdLFxuXHRzcHJpbmdncmVlbjogWzAsIDI1NSwgMTI3XSxcblx0c3RlZWxibHVlOiBbNzAsIDEzMCwgMTgwXSxcblx0dGFuOiBbMjEwLCAxODAsIDE0MF0sXG5cdHRlYWw6IFswLCAxMjgsIDEyOF0sXG5cdHRoaXN0bGU6IFsyMTYsIDE5MSwgMjE2XSxcblx0dG9tYXRvOiBbMjU1LCA5OSwgNzFdLFxuXHR0dXJxdW9pc2U6IFs2NCwgMjI0LCAyMDhdLFxuXHR2aW9sZXQ6IFsyMzgsIDEzMCwgMjM4XSxcblx0d2hlYXQ6IFsyNDUsIDIyMiwgMTc5XSxcblx0d2hpdGU6IFsyNTUsIDI1NSwgMjU1XSxcblx0d2hpdGVzbW9rZTogWzI0NSwgMjQ1LCAyNDVdLFxuXHR5ZWxsb3c6IFsyNTUsIDI1NSwgMF0sXG5cdHllbGxvd2dyZWVuOiBbMTU0LCAyMDUsIDUwXSxcbn1cblxuZm9yIChjb25zdCBrZXkgaW4gY29sb3JzKSBPYmplY3QuZnJlZXplKGNvbG9yc1trZXldKTtcbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoY29sb3JzKTsiLCJmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCBkZWJvdW5jZU1zLCB7IHNpZ25hbCwgZWRnZXMgfSA9IHt9KSB7XG4gICAgbGV0IHBlbmRpbmdUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxldCBwZW5kaW5nQXJncyA9IG51bGw7XG4gICAgY29uc3QgbGVhZGluZyA9IGVkZ2VzICE9IG51bGwgJiYgZWRnZXMuaW5jbHVkZXMoJ2xlYWRpbmcnKTtcbiAgICBjb25zdCB0cmFpbGluZyA9IGVkZ2VzID09IG51bGwgfHwgZWRnZXMuaW5jbHVkZXMoJ3RyYWlsaW5nJyk7XG4gICAgY29uc3QgaW52b2tlID0gKCkgPT4ge1xuICAgICAgICBpZiAocGVuZGluZ0FyZ3MgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkocGVuZGluZ1RoaXMsIHBlbmRpbmdBcmdzKTtcbiAgICAgICAgICAgIHBlbmRpbmdUaGlzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcGVuZGluZ0FyZ3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvblRpbWVyRW5kID0gKCkgPT4ge1xuICAgICAgICBpZiAodHJhaWxpbmcpIHtcbiAgICAgICAgICAgIGludm9rZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhbmNlbCgpO1xuICAgIH07XG4gICAgbGV0IHRpbWVvdXRJZCA9IG51bGw7XG4gICAgY29uc3Qgc2NoZWR1bGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aW1lb3V0SWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSBudWxsO1xuICAgICAgICAgICAgb25UaW1lckVuZCgpO1xuICAgICAgICB9LCBkZWJvdW5jZU1zKTtcbiAgICB9O1xuICAgIGNvbnN0IGNhbmNlbFRpbWVyID0gKCkgPT4ge1xuICAgICAgICBpZiAodGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIHRpbWVvdXRJZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNhbmNlbCA9ICgpID0+IHtcbiAgICAgICAgY2FuY2VsVGltZXIoKTtcbiAgICAgICAgcGVuZGluZ1RoaXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBlbmRpbmdBcmdzID0gbnVsbDtcbiAgICB9O1xuICAgIGNvbnN0IGZsdXNoID0gKCkgPT4ge1xuICAgICAgICBpbnZva2UoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRlYm91bmNlZCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChzaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwZW5kaW5nVGhpcyA9IHRoaXM7XG4gICAgICAgIHBlbmRpbmdBcmdzID0gYXJncztcbiAgICAgICAgY29uc3QgaXNGaXJzdENhbGwgPSB0aW1lb3V0SWQgPT0gbnVsbDtcbiAgICAgICAgc2NoZWR1bGUoKTtcbiAgICAgICAgaWYgKGxlYWRpbmcgJiYgaXNGaXJzdENhbGwpIHtcbiAgICAgICAgICAgIGludm9rZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBkZWJvdW5jZWQuc2NoZWR1bGUgPSBzY2hlZHVsZTtcbiAgICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICAgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICAgIHNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBjYW5jZWwsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG5leHBvcnQgeyBkZWJvdW5jZSB9O1xuIiwiaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICcuL2RlYm91bmNlLm1qcyc7XG5cbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHRocm90dGxlTXMsIHsgc2lnbmFsLCBlZGdlcyA9IFsnbGVhZGluZycsICd0cmFpbGluZyddIH0gPSB7fSkge1xuICAgIGxldCBwZW5kaW5nQXQgPSBudWxsO1xuICAgIGNvbnN0IGRlYm91bmNlZCA9IGRlYm91bmNlKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIHBlbmRpbmdBdCA9IERhdGUubm93KCk7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfSwgdGhyb3R0bGVNcywgeyBzaWduYWwsIGVkZ2VzIH0pO1xuICAgIGNvbnN0IHRocm90dGxlZCA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGlmIChwZW5kaW5nQXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgcGVuZGluZ0F0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHBlbmRpbmdBdCA+PSB0aHJvdHRsZU1zKSB7XG4gICAgICAgICAgICBwZW5kaW5nQXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgIGRlYm91bmNlZC5jYW5jZWwoKTtcbiAgICAgICAgICAgIGRlYm91bmNlZC5zY2hlZHVsZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRlYm91bmNlZC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIHRocm90dGxlZC5jYW5jZWwgPSBkZWJvdW5jZWQuY2FuY2VsO1xuICAgIHRocm90dGxlZC5mbHVzaCA9IGRlYm91bmNlZC5mbHVzaDtcbiAgICByZXR1cm4gdGhyb3R0bGVkO1xufVxuXG5leHBvcnQgeyB0aHJvdHRsZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9