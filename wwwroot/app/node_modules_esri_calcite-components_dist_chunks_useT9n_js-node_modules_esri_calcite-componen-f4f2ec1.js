export const __webpack_id__ = "node_modules_esri_calcite-components_dist_chunks_useT9n_js-node_modules_esri_calcite-componen-f4f2ec1";
export const __webpack_ids__ = ["node_modules_esri_calcite-components_dist_chunks_useT9n_js-node_modules_esri_calcite-componen-f4f2ec1"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/observers.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/observers.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver),
/* harmony export */   u: () => (/* binding */ updateRefObserver)
/* harmony export */ });
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

function createObserver(type, callback, options) {
  if (lit__WEBPACK_IMPORTED_MODULE_0__.isServer) {
    return void 0;
  }
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return function() {
    return type === "intersection" ? window.IntersectionObserver : type === "mutation" ? ExtendedMutationObserver : window.ResizeObserver;
  }();
}
function updateRefObserver(observer, oldTarget, target, options) {
  if (!observer) {
    return;
  }
  if (oldTarget) {
    observer.unobserve(oldTarget);
  }
  if (!target) {
    return;
  }
  if (observer instanceof MutationObserver) {
    observer.observe(target, options);
    return;
  }
  observer.observe(target);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/useT9n.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ useT9n)
/* harmony export */ });
/* harmony import */ var _arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/lumina/controllers */ "./node_modules/@arcgis/lumina/dist/controllers/index.js");
/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */


const useT9n = (0,_arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__.makeT9nController)(_runtime_js__WEBPACK_IMPORTED_MODULE_1__.g);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Icon: () => (/* binding */ Icon)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/logger.js */ "./node_modules/@esri/calcite-components/dist/chunks/logger.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */






const CSS = {
  flipRtl: "flip-rtl",
  svg: "svg"
};
const iconCache = {};
const requestCache = {};
const scaleToPx = {
  s: 16,
  m: 24,
  l: 32
};
function generateIconId({ icon, scale }) {
  const size = scaleToPx[scale];
  const name = normalizeIconName(icon);
  const filled = name.charAt(name.length - 1) === "F";
  const iconName = filled ? name.substring(0, name.length - 1) : name;
  return `${iconName}${size}${filled ? "F" : ""}`;
}
async function fetchIcon(props) {
  const cachedIconKey = generateIconId(props);
  const cachedIconData = getCachedIconDataByKey(cachedIconKey);
  if (cachedIconData) {
    return cachedIconData;
  }
  if (!requestCache[cachedIconKey]) {
    requestCache[cachedIconKey] = fetch((0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.g)(`./assets/icon/${cachedIconKey}.json`)).then((resp) => resp.json()).catch(() => {
      _chunks_logger_js__WEBPACK_IMPORTED_MODULE_5__.l.error(`${props.icon} (${props.scale}) icon failed to load`);
      return "";
    });
  }
  const path = await requestCache[cachedIconKey];
  iconCache[cachedIconKey] = path;
  return path;
}
function getCachedIconData(props) {
  return getCachedIconDataByKey(generateIconId(props));
}
function getCachedIconDataByKey(id) {
  return iconCache[id];
}
function normalizeIconName(name) {
  const numberLeadingName = !isNaN(Number(name.charAt(0)));
  const parts = name.split("-");
  const kebabCased = parts.length > 0;
  if (kebabCased) {
    const firstNonDigitInPartPattern = /[a-z]/i;
    name = parts.map((part, partIndex) => {
      return part.replace(firstNonDigitInPartPattern, function replacer(match, offset) {
        const isFirstCharInName = partIndex === 0 && offset === 0;
        if (isFirstCharInName) {
          return match;
        }
        return match.toUpperCase();
      });
    }).join("");
  }
  return numberLeadingName ? `i${name}` : name;
}
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`;
class Icon extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super(...arguments);
    this.visible = false;
    this.flipRtl = false;
    this.icon = null;
    this.preload = false;
    this.scale = "m";
  }
  static {
    this.properties = { pathData: [16, {}, { state: true }], visible: [16, {}, { state: true }], flipRtl: [7, {}, { reflect: true, type: Boolean }], icon: [3, {}, { reflect: true }], preload: [7, {}, { reflect: true, type: Boolean }], scale: [3, {}, { reflect: true }], textLabel: 1 };
  }
  static {
    this.styles = styles;
  }
  connectedCallback() {
    super.connectedCallback();
    if (this.preload) {
      this.visible = true;
      this.loadIconPathData();
      return;
    }
    if (!this.visible) {
      this.waitUntilVisible(() => {
        this.visible = true;
        this.loadIconPathData();
      });
    }
  }
  willUpdate(changes) {
    if (changes.has("icon") && (this.hasUpdated || this.icon !== null) || changes.has("scale") && (this.hasUpdated || this.scale !== "m")) {
      this.loadIconPathData();
    }
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.intersectionObserver?.disconnect();
    this.intersectionObserver = null;
  }
  async loadIconPathData() {
    const { icon, scale, visible } = this;
    if (lit__WEBPACK_IMPORTED_MODULE_1__.isServer || !icon || !visible) {
      return;
    }
    const fetchIconProps = { icon, scale };
    const pathData = getCachedIconData(fetchIconProps) || await fetchIcon(fetchIconProps);
    if (icon !== this.icon) {
      return;
    }
    this.pathData = pathData;
  }
  waitUntilVisible(callback) {
    this.intersectionObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__.c)("intersection", (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          this.intersectionObserver.disconnect();
          this.intersectionObserver = null;
          callback();
        }
      });
    }, { rootMargin: "50px" });
    if (!this.intersectionObserver) {
      callback();
      return;
    }
    this.intersectionObserver.observe(this.el);
  }
  render() {
    const { el, flipRtl, pathData, scale, textLabel } = this;
    const dir = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.g)(el);
    const size = scaleToPx[scale];
    const semantic = !!textLabel;
    const paths = [].concat(pathData || "");
    this.el.ariaHidden = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.t)(!semantic);
    this.el.ariaLabel = semantic ? textLabel : null;
    this.el.role = semantic ? "img" : null;
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<svg aria-hidden=true class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)({
      [CSS.flipRtl]: dir === "rtl" && flipRtl,
      [CSS.svg]: true
    })} fill=currentColor height=100% viewBox=${`0 0 ${size} ${size}`} width=100% xmlns=http://www.w3.org/2000/svg>${paths.map((path) => typeof path === "string" ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.svg)`<path d=${path ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} />` : (0,lit__WEBPACK_IMPORTED_MODULE_1__.svg)`<path d=${path.d ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} opacity=${("opacity" in path ? path.opacity : 1) ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} />`)}</svg>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-icon", Icon);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Icon: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Icon)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js");


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfY2h1bmtzX3VzZVQ5bl9qcy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVuLWY0ZjJlYzEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUMrQjtBQUMvQjtBQUNBLE1BQU0seUNBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyREY7QUFDQTtBQUNBO0FBQytEO0FBQ2Q7QUFDakQsZUFBZSw2RUFBaUIsQ0FBQywwQ0FBWTtBQUczQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDUkY7QUFDQTtBQUNBO0FBQ2dGO0FBQ3hCO0FBQ0U7QUFDbUI7QUFDYjtBQUNYO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsYUFBYTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUyxFQUFFLEtBQUssRUFBRSxrQkFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxxREFBWSxrQkFBa0IsY0FBYztBQUNwRixNQUFNLGdEQUFNLFVBQVUsWUFBWSxHQUFHLFlBQVk7QUFDakQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGlDQUFpQyxLQUFLO0FBQ3RDO0FBQ0EsZUFBZSx3Q0FBRyxPQUFPLHdIQUF3SCxNQUFNLG9CQUFvQiw0RUFBNEUsaUJBQWlCLGlCQUFpQixnQkFBZ0IscUJBQXFCLG9CQUFvQixpQkFBaUIsaUJBQWlCLGdCQUFnQixxQkFBcUIsb0JBQW9CLGlCQUFpQixpQkFBaUIsZ0JBQWdCLHFCQUFxQixvQkFBb0IsVUFBVSxxQkFBcUIsS0FBSyxjQUFjLGdCQUFnQixhQUFhLFNBQVMsYUFBYTtBQUM3bUIsbUJBQW1CLHNEQUFVO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUIsSUFBSSxhQUFhLG1CQUFtQixJQUFJLGFBQWEsa0JBQWtCLElBQUksOEJBQThCLGVBQWUsSUFBSSxlQUFlLGtCQUFrQixJQUFJLDhCQUE4QixnQkFBZ0IsSUFBSSxlQUFlO0FBQzNRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdUJBQXVCO0FBQ25DLFFBQVEseUNBQVE7QUFDaEI7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx1REFBYztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSyxJQUFJLG9CQUFvQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQTBDO0FBQ3RELGdCQUFnQixpREFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQWE7QUFDdEM7QUFDQTtBQUNBLFdBQVcseUNBQUksK0JBQStCLDREQUFZO0FBQzFEO0FBQ0E7QUFDQSxLQUFLLEdBQUcsd0NBQXdDLE9BQU8sTUFBTSxFQUFFLEtBQUssR0FBRyw4Q0FBOEMsK0NBQStDLHdDQUFHLFdBQVcsUUFBUSx3Q0FBTyxFQUFFLE1BQU0sd0NBQUcsV0FBVyxVQUFVLHdDQUFPLEVBQUUsVUFBVSwwQ0FBMEMsd0NBQU8sRUFBRSxLQUFLO0FBQzVTO0FBQ0E7QUFDQSxxREFBYTtBQUdYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL29ic2VydmVycy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jaHVua3MvdXNlVDluLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1pY29uL2N1c3RvbUVsZW1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSBcImxpdFwiO1xuZnVuY3Rpb24gY3JlYXRlT2JzZXJ2ZXIodHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgaWYgKGlzU2VydmVyKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBjb25zdCBPYnNlcnZlciA9IGdldE9ic2VydmVyKHR5cGUpO1xuICByZXR1cm4gbmV3IE9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyKHR5cGUpIHtcbiAgY2xhc3MgRXh0ZW5kZWRNdXRhdGlvbk9ic2VydmVyIGV4dGVuZHMgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICBzdXBlcihjYWxsYmFjayk7XG4gICAgICB0aGlzLm9ic2VydmVkRW50cnkgPSBbXTtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgb2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeS5wdXNoKHsgdGFyZ2V0LCBvcHRpb25zIH0pO1xuICAgICAgcmV0dXJuIHN1cGVyLm9ic2VydmUodGFyZ2V0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgdW5vYnNlcnZlKHRhcmdldCkge1xuICAgICAgY29uc3QgbmV3T2JzZXJ2ZWRFbnRyaWVzID0gdGhpcy5vYnNlcnZlZEVudHJ5LmZpbHRlcigob2JzZXJ2ZWQpID0+IG9ic2VydmVkLnRhcmdldCAhPT0gdGFyZ2V0KTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayhzdXBlci50YWtlUmVjb3JkcygpLCB0aGlzKTtcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgbmV3T2JzZXJ2ZWRFbnRyaWVzLmZvckVhY2goKG9ic2VydmVkKSA9PiB0aGlzLm9ic2VydmUob2JzZXJ2ZWQudGFyZ2V0LCBvYnNlcnZlZC5vcHRpb25zKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gXCJpbnRlcnNlY3Rpb25cIiA/IHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlciA6IHR5cGUgPT09IFwibXV0YXRpb25cIiA/IEV4dGVuZGVkTXV0YXRpb25PYnNlcnZlciA6IHdpbmRvdy5SZXNpemVPYnNlcnZlcjtcbiAgfSgpO1xufVxuZnVuY3Rpb24gdXBkYXRlUmVmT2JzZXJ2ZXIob2JzZXJ2ZXIsIG9sZFRhcmdldCwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gIGlmICghb2JzZXJ2ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG9sZFRhcmdldCkge1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZShvbGRUYXJnZXQpO1xuICB9XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvYnNlcnZlciBpbnN0YW5jZW9mIE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZU9ic2VydmVyIGFzIGMsXG4gIHVwZGF0ZVJlZk9ic2VydmVyIGFzIHVcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgbWFrZVQ5bkNvbnRyb2xsZXIgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmEvY29udHJvbGxlcnNcIjtcbmltcG9ydCB7IGcgYXMgZ2V0QXNzZXRQYXRoIH0gZnJvbSBcIi4vcnVudGltZS5qc1wiO1xuY29uc3QgdXNlVDluID0gbWFrZVQ5bkNvbnRyb2xsZXIoZ2V0QXNzZXRQYXRoKTtcbmV4cG9ydCB7XG4gIHVzZVQ5biBhcyB1XG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGcgYXMgZ2V0QXNzZXRQYXRoLCBjIGFzIGN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGNzcywgaXNTZXJ2ZXIsIG5vdGhpbmcsIHN2ZywgaHRtbCB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQsIHNhZmVDbGFzc01hcCB9IGZyb20gXCJAYXJjZ2lzL2x1bWluYVwiO1xuaW1wb3J0IHsgZyBhcyBnZXRFbGVtZW50RGlyLCB0IGFzIHRvQXJpYUJvb2xlYW4gfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2RvbS5qc1wiO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gXCIuLi8uLi9jaHVua3Mvb2JzZXJ2ZXJzLmpzXCI7XG5pbXBvcnQgeyBsIGFzIGxvZ2dlciB9IGZyb20gXCIuLi8uLi9jaHVua3MvbG9nZ2VyLmpzXCI7XG5jb25zdCBDU1MgPSB7XG4gIGZsaXBSdGw6IFwiZmxpcC1ydGxcIixcbiAgc3ZnOiBcInN2Z1wiXG59O1xuY29uc3QgaWNvbkNhY2hlID0ge307XG5jb25zdCByZXF1ZXN0Q2FjaGUgPSB7fTtcbmNvbnN0IHNjYWxlVG9QeCA9IHtcbiAgczogMTYsXG4gIG06IDI0LFxuICBsOiAzMlxufTtcbmZ1bmN0aW9uIGdlbmVyYXRlSWNvbklkKHsgaWNvbiwgc2NhbGUgfSkge1xuICBjb25zdCBzaXplID0gc2NhbGVUb1B4W3NjYWxlXTtcbiAgY29uc3QgbmFtZSA9IG5vcm1hbGl6ZUljb25OYW1lKGljb24pO1xuICBjb25zdCBmaWxsZWQgPSBuYW1lLmNoYXJBdChuYW1lLmxlbmd0aCAtIDEpID09PSBcIkZcIjtcbiAgY29uc3QgaWNvbk5hbWUgPSBmaWxsZWQgPyBuYW1lLnN1YnN0cmluZygwLCBuYW1lLmxlbmd0aCAtIDEpIDogbmFtZTtcbiAgcmV0dXJuIGAke2ljb25OYW1lfSR7c2l6ZX0ke2ZpbGxlZCA/IFwiRlwiIDogXCJcIn1gO1xufVxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hJY29uKHByb3BzKSB7XG4gIGNvbnN0IGNhY2hlZEljb25LZXkgPSBnZW5lcmF0ZUljb25JZChwcm9wcyk7XG4gIGNvbnN0IGNhY2hlZEljb25EYXRhID0gZ2V0Q2FjaGVkSWNvbkRhdGFCeUtleShjYWNoZWRJY29uS2V5KTtcbiAgaWYgKGNhY2hlZEljb25EYXRhKSB7XG4gICAgcmV0dXJuIGNhY2hlZEljb25EYXRhO1xuICB9XG4gIGlmICghcmVxdWVzdENhY2hlW2NhY2hlZEljb25LZXldKSB7XG4gICAgcmVxdWVzdENhY2hlW2NhY2hlZEljb25LZXldID0gZmV0Y2goZ2V0QXNzZXRQYXRoKGAuL2Fzc2V0cy9pY29uLyR7Y2FjaGVkSWNvbktleX0uanNvbmApKS50aGVuKChyZXNwKSA9PiByZXNwLmpzb24oKSkuY2F0Y2goKCkgPT4ge1xuICAgICAgbG9nZ2VyLmVycm9yKGAke3Byb3BzLmljb259ICgke3Byb3BzLnNjYWxlfSkgaWNvbiBmYWlsZWQgdG8gbG9hZGApO1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSk7XG4gIH1cbiAgY29uc3QgcGF0aCA9IGF3YWl0IHJlcXVlc3RDYWNoZVtjYWNoZWRJY29uS2V5XTtcbiAgaWNvbkNhY2hlW2NhY2hlZEljb25LZXldID0gcGF0aDtcbiAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBnZXRDYWNoZWRJY29uRGF0YShwcm9wcykge1xuICByZXR1cm4gZ2V0Q2FjaGVkSWNvbkRhdGFCeUtleShnZW5lcmF0ZUljb25JZChwcm9wcykpO1xufVxuZnVuY3Rpb24gZ2V0Q2FjaGVkSWNvbkRhdGFCeUtleShpZCkge1xuICByZXR1cm4gaWNvbkNhY2hlW2lkXTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUljb25OYW1lKG5hbWUpIHtcbiAgY29uc3QgbnVtYmVyTGVhZGluZ05hbWUgPSAhaXNOYU4oTnVtYmVyKG5hbWUuY2hhckF0KDApKSk7XG4gIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdChcIi1cIik7XG4gIGNvbnN0IGtlYmFiQ2FzZWQgPSBwYXJ0cy5sZW5ndGggPiAwO1xuICBpZiAoa2ViYWJDYXNlZCkge1xuICAgIGNvbnN0IGZpcnN0Tm9uRGlnaXRJblBhcnRQYXR0ZXJuID0gL1thLXpdL2k7XG4gICAgbmFtZSA9IHBhcnRzLm1hcCgocGFydCwgcGFydEluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gcGFydC5yZXBsYWNlKGZpcnN0Tm9uRGlnaXRJblBhcnRQYXR0ZXJuLCBmdW5jdGlvbiByZXBsYWNlcihtYXRjaCwgb2Zmc2V0KSB7XG4gICAgICAgIGNvbnN0IGlzRmlyc3RDaGFySW5OYW1lID0gcGFydEluZGV4ID09PSAwICYmIG9mZnNldCA9PT0gMDtcbiAgICAgICAgaWYgKGlzRmlyc3RDaGFySW5OYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpO1xuICAgICAgfSk7XG4gICAgfSkuam9pbihcIlwiKTtcbiAgfVxuICByZXR1cm4gbnVtYmVyTGVhZGluZ05hbWUgPyBgaSR7bmFtZX1gIDogbmFtZTtcbn1cbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHtkaXNwbGF5OmlubGluZS1mbGV4O2NvbG9yOnZhcigtLWNhbGNpdGUtaWNvbi1jb2xvciwgdmFyKC0tY2FsY2l0ZS11aS1pY29uLWNvbG9yLCBjdXJyZW50Q29sb3IpKX06aG9zdChbc2NhbGU9c10pe2lubGluZS1zaXplOjE2cHg7YmxvY2stc2l6ZToxNnB4O21pbi1pbmxpbmUtc2l6ZToxNnB4O21pbi1ibG9jay1zaXplOjE2cHh9Omhvc3QoW3NjYWxlPW1dKXtpbmxpbmUtc2l6ZToyNHB4O2Jsb2NrLXNpemU6MjRweDttaW4taW5saW5lLXNpemU6MjRweDttaW4tYmxvY2stc2l6ZToyNHB4fTpob3N0KFtzY2FsZT1sXSl7aW5saW5lLXNpemU6MzJweDtibG9jay1zaXplOjMycHg7bWluLWlubGluZS1zaXplOjMycHg7bWluLWJsb2NrLXNpemU6MzJweH0uZmxpcC1ydGx7dHJhbnNmb3JtOnNjYWxlWCgtMSl9LnN2Z3tkaXNwbGF5OmJsb2NrfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfWA7XG5jbGFzcyBJY29uIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgdGhpcy5mbGlwUnRsID0gZmFsc2U7XG4gICAgdGhpcy5pY29uID0gbnVsbDtcbiAgICB0aGlzLnByZWxvYWQgPSBmYWxzZTtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IHBhdGhEYXRhOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCB2aXNpYmxlOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBmbGlwUnRsOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgaWNvbjogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIHByZWxvYWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBzY2FsZTogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIHRleHRMYWJlbDogMSB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zdHlsZXMgPSBzdHlsZXM7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICBpZiAodGhpcy5wcmVsb2FkKSB7XG4gICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgdGhpcy5sb2FkSWNvblBhdGhEYXRhKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy52aXNpYmxlKSB7XG4gICAgICB0aGlzLndhaXRVbnRpbFZpc2libGUoKCkgPT4ge1xuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmxvYWRJY29uUGF0aERhdGEoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB3aWxsVXBkYXRlKGNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJpY29uXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5pY29uICE9PSBudWxsKSB8fCBjaGFuZ2VzLmhhcyhcInNjYWxlXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5zY2FsZSAhPT0gXCJtXCIpKSB7XG4gICAgICB0aGlzLmxvYWRJY29uUGF0aERhdGEoKTtcbiAgICB9XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IG51bGw7XG4gIH1cbiAgYXN5bmMgbG9hZEljb25QYXRoRGF0YSgpIHtcbiAgICBjb25zdCB7IGljb24sIHNjYWxlLCB2aXNpYmxlIH0gPSB0aGlzO1xuICAgIGlmIChpc1NlcnZlciB8fCAhaWNvbiB8fCAhdmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmZXRjaEljb25Qcm9wcyA9IHsgaWNvbiwgc2NhbGUgfTtcbiAgICBjb25zdCBwYXRoRGF0YSA9IGdldENhY2hlZEljb25EYXRhKGZldGNoSWNvblByb3BzKSB8fCBhd2FpdCBmZXRjaEljb24oZmV0Y2hJY29uUHJvcHMpO1xuICAgIGlmIChpY29uICE9PSB0aGlzLmljb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wYXRoRGF0YSA9IHBhdGhEYXRhO1xuICB9XG4gIHdhaXRVbnRpbFZpc2libGUoY2FsbGJhY2spIHtcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJpbnRlcnNlY3Rpb25cIiwgKGVudHJpZXMpID0+IHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciA9IG51bGw7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgeyByb290TWFyZ2luOiBcIjUwcHhcIiB9KTtcbiAgICBpZiAoIXRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBlbCwgZmxpcFJ0bCwgcGF0aERhdGEsIHNjYWxlLCB0ZXh0TGFiZWwgfSA9IHRoaXM7XG4gICAgY29uc3QgZGlyID0gZ2V0RWxlbWVudERpcihlbCk7XG4gICAgY29uc3Qgc2l6ZSA9IHNjYWxlVG9QeFtzY2FsZV07XG4gICAgY29uc3Qgc2VtYW50aWMgPSAhIXRleHRMYWJlbDtcbiAgICBjb25zdCBwYXRocyA9IFtdLmNvbmNhdChwYXRoRGF0YSB8fCBcIlwiKTtcbiAgICB0aGlzLmVsLmFyaWFIaWRkZW4gPSB0b0FyaWFCb29sZWFuKCFzZW1hbnRpYyk7XG4gICAgdGhpcy5lbC5hcmlhTGFiZWwgPSBzZW1hbnRpYyA/IHRleHRMYWJlbCA6IG51bGw7XG4gICAgdGhpcy5lbC5yb2xlID0gc2VtYW50aWMgPyBcImltZ1wiIDogbnVsbDtcbiAgICByZXR1cm4gaHRtbGA8c3ZnIGFyaWEtaGlkZGVuPXRydWUgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoe1xuICAgICAgW0NTUy5mbGlwUnRsXTogZGlyID09PSBcInJ0bFwiICYmIGZsaXBSdGwsXG4gICAgICBbQ1NTLnN2Z106IHRydWVcbiAgICB9KX0gZmlsbD1jdXJyZW50Q29sb3IgaGVpZ2h0PTEwMCUgdmlld0JveD0ke2AwIDAgJHtzaXplfSAke3NpemV9YH0gd2lkdGg9MTAwJSB4bWxucz1odHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zz4ke3BhdGhzLm1hcCgocGF0aCkgPT4gdHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgPyBzdmdgPHBhdGggZD0ke3BhdGggPz8gbm90aGluZ30gLz5gIDogc3ZnYDxwYXRoIGQ9JHtwYXRoLmQgPz8gbm90aGluZ30gb3BhY2l0eT0keyhcIm9wYWNpdHlcIiBpbiBwYXRoID8gcGF0aC5vcGFjaXR5IDogMSkgPz8gbm90aGluZ30gLz5gKX08L3N2Zz5gO1xuICB9XG59XG5jdXN0b21FbGVtZW50KFwiY2FsY2l0ZS1pY29uXCIsIEljb24pO1xuZXhwb3J0IHtcbiAgSWNvblxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==