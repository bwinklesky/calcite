export const __webpack_id__ = "node_modules_arcgis_core_symbols_cim_OverrideHelper_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_symbols_cim_OverrideHelper_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/symbols/cim/OverrideHelper.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/OverrideHelper.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OverrideHelper: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Color.js */ "./node_modules/@arcgis/core/Color.js");
/* harmony import */ var _core_colorUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/colorUtils.js */ "./node_modules/@arcgis/core/core/colorUtils.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layers/support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _support_ArcadeExpression_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../support/ArcadeExpression.js */ "./node_modules/@arcgis/core/support/ArcadeExpression.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/symbols/cim/utils.js");
/* harmony import */ var _views_2d_arcade_callExpressionWithFeature_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../views/2d/arcade/callExpressionWithFeature.js */ "./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const y=e=>{if(!e)return[0,0,0,0];const{r,g:i,b:s,a:t}=e;return[r,i,s,255*t]};class v{static findApplicableOverrides(e,r,i){if(e&&r){if(e.primitiveName){let s=!1;for(const r of i)if(r.primitiveName===e.primitiveName){s=!0;break}if(!s)for(const t of r)t.primitiveName===e.primitiveName&&i.push(t)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)v.findApplicableOverrides(s,r,i);if(e.symbolLayers)for(const s of e.symbolLayers)v.findApplicableOverrides(s,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const s of e.effects)v.findApplicableOverrides(s,r,i);if(e.markerPlacement&&v.findApplicableOverrides(e.markerPlacement,r,i),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const s of e.markerGraphics)v.findApplicableOverrides(s,r,i),v.findApplicableOverrides(s.symbol,r,i)}else"CIMCharacterMarker"===e.type?v.findApplicableOverrides(e.symbol,r,i):"CIMHatchFill"===e.type?v.findApplicableOverrides(e.lineSymbol,r,i):"CIMPictureMarker"===e.type&&v.findApplicableOverrides(e.animatedSymbolProperties,r,i)}}}static findEffectOverrides(e,r){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.normalizeDashEffectTemplate)(e),!r||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const i=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.toLowerCaseProps)(e),s=e.primitiveName,t=[];for(const o of r)o.primitiveName===s&&t.push((0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.toLowerCaseProps)(o));return{type:"cim-effect-param",effect:i,overrides:(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.normalizePrimitiveOverrideProps)(t)}}static async resolveSymbolOverrides(e,r,t,o,a,c,n){if(!e?.symbol)return null;let{symbol:p,primitiveOverrides:f}=e;const m=!!f;if(!m&&!o)return p;p=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(p),f=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(f);let y=!0;if(r||(r={attributes:{}},y=!1),m){if(y||(f=f.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),n||(f=f.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),f.length>0){const e=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.attributesToFields)(r.attributes),i={spatialReference:t,fields:e,geometryType:a};await v.createRenderExpressions(f,i),v.evaluateOverrides(f,r,a??"esriGeometryPoint",c,n,new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_3__["default"](e))}v.applyOverrides(p,f)}return o&&v.applyDictionaryTextOverrides(p,r,o,null),p}static{this._expressionToRenderExpression=new Map}static async createRenderExpressions(e,r){const i=[];for(const s of e){const e=s.valueExpressionInfo;if(!e||v._expressionToRenderExpression.has(e.expression))continue;const o=(0,_support_ArcadeExpression_js__WEBPACK_IMPORTED_MODULE_4__.createRendererExpression)(e.expression,r.spatialReference);i.push(o),o.then((r=>v._expressionToRenderExpression.set(e.expression,r)))}i.length>0&&await Promise.all(i)}static evaluateOverrides(e,i,s,t,o,a){const c={$view:{scale:o?.scale}};for(const l of e){l.value&&"object"==typeof l.value&&(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_1__.isRGB)(l.value)&&("Color"===l.propertyName||"StrokeColor"===l.propertyName)&&(l.value=y(l.value));const e=l.valueExpressionInfo;if(!e)continue;const o=v._expressionToRenderExpression.get(e.expression);o&&(l.value=(0,_views_2d_arcade_callExpressionWithFeature_js__WEBPACK_IMPORTED_MODULE_6__["default"])(o,i,c,s,a,t))}}static applyDictionaryTextOverrides(e,r,i,s,t="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const a of o)a&&"CIMVectorMarker"===a.type&&v.applyDictionaryTextOverrides(a,r,i,s,"CIMTextSymbol"===e.type?e.textCase:t)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return;for(const e of t)e&&v.applyDictionaryTextOverrides(e,r,i,s)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const a=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.analyzeTextParts)(o,i);e.textString=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.assignTextValuesFromFeature)(r,a,s,t)}}}}static applyOverrides(e,r,i,s){if(e.primitiveName)for(const t of r)if(t.primitiveName===e.primitiveName){const r=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.uncapitalize)(t.propertyName);if(s&&s.push({cim:e,nocapPropertyName:r,value:e[r]}),i){let r=!1;for(const s of i)s.primitiveName===e.primitiveName&&(r=!0);r||i.push(t)}null!=t.value&&(e[r]=t.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const t of e.effects)v.applyOverrides(t,r,i,s);if(e.symbolLayers)for(const t of e.symbolLayers)v.applyOverrides(t,r,i,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const t of e.effects)v.applyOverrides(t,r,i,s);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const t of e.markerGraphics)v.applyOverrides(t,r,i,s),v.applyOverrides(t.symbol,r,i,s)}}static restoreOverrides(e){for(const r of e)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(e){let r="";for(const i of e)void 0!==i.value&&(r+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return r}static toValue(r,i){if("DashTemplate"===r)return i.split(" ").map((e=>Number(e)));if("Color"===r){const r=new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](i).toRgba();return r[3]*=255,r}return i}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/quantizationUtils.js */ "./node_modules/@arcgis/core/geometry/support/quantizationUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e,t,o,n,a,s){if(null==e)return null;const u=e.references("geometry")&&s?i(t,n,s):t,c=e.repurposeFeature(u,a);try{return e.evaluate(c,o)}catch(m){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",m),null}}const u=new Map;function i(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;u.has(r)||u.set(r,c(r));const s=u.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const u={};switch(s){case"esriGeometryPoint":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.unquantizePoint)(r,u,e,t,o);case"esriGeometryPolygon":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.unquantizePolygon)(r,u,e,t,o);case"esriGeometryPolyline":return(e,r,t,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.unquantizePolyline)(r,u,e,t,n);case"esriGeometryMultipoint":return(e,r,o,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.unquantizeMultipoint)(r,u,e,o,n);default:return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.2d.support.arcadeOnDemand").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("mapview-arcade",`Unable to handle geometryType: ${s}`)),e=>e}}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3N5bWJvbHNfY2ltX092ZXJyaWRlSGVscGVyX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2loQixZQUFZLHNCQUFzQixNQUFNLGNBQWMsR0FBRyxxQkFBcUIsUUFBUSxzQ0FBc0MsU0FBUyxvQkFBb0IsU0FBUyx1REFBdUQsS0FBSyxNQUFNLG9FQUFvRSxlQUFlLHVJQUF1SSxpRkFBaUYsTUFBTSwwQkFBMEIsa1NBQWtTLG1HQUFtRyw2SEFBNkgsdU9BQXVPLGdDQUFnQyxrQkFBa0Isd0NBQXdDLHNFQUFDLGdDQUFnQywrQ0FBK0MsUUFBUSwyREFBQywyQkFBMkIsNkNBQTZDLDJEQUFDLEtBQUssT0FBTywyQ0FBMkMsMEVBQUMsS0FBSyxtREFBbUQsMEJBQTBCLElBQUksOEJBQThCLEdBQUcsWUFBWSxtQkFBbUIsRUFBRSxvREFBQyxNQUFNLG9EQUFDLElBQUksU0FBUyxVQUFVLGNBQWMsVUFBVSx3S0FBd0ssUUFBUSw2REFBQyxrQkFBa0IsNENBQTRDLDRGQUE0RixzRUFBQyxLQUFLLHNCQUFzQix1REFBdUQsT0FBTywyQ0FBMkMsMENBQTBDLFdBQVcsa0JBQWtCLDhCQUE4QixrRUFBa0UsUUFBUSxzRkFBQyxrQ0FBa0MsMkVBQTJFLGlDQUFpQyxzQ0FBc0MsU0FBUyxPQUFPLGlCQUFpQixrQkFBa0IsbUNBQW1DLDBEQUFDLDRGQUE0Riw4QkFBOEIsZUFBZSwwREFBMEQsWUFBWSx5RkFBQyxnQkFBZ0Isd0RBQXdELDBCQUEwQixxRkFBcUYsdUJBQXVCLGFBQWEsOEhBQThILE1BQU0sdUJBQXVCLHlCQUF5QixhQUFhLDREQUE0RCxNQUFNLHdCQUF3QixxQkFBcUIsdUJBQXVCLFFBQVEsMkRBQUMsTUFBTSxhQUFhLHNFQUFDLGFBQWEsK0JBQStCLDBFQUEwRSxRQUFRLHVEQUFDLGlCQUFpQixjQUFjLHFDQUFxQyxLQUFLLFNBQVMsMkRBQTJELGFBQWEsOEJBQThCLGVBQWUsZ0lBQWdJLDBFQUEwRSxNQUFNLDBCQUEwQiw4SEFBOEgsNElBQTRJLDJCQUEyQixvREFBb0QsMkJBQTJCLFNBQVMsMENBQTBDLGdCQUFnQixFQUFFLGVBQWUsRUFBRSx3QkFBd0IsR0FBRyxTQUFTLG9CQUFvQiw4REFBOEQsZ0JBQWdCLFlBQVksaURBQUMsYUFBYSxtQkFBbUIsVUFBc0M7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p6cEs7QUFDQTtBQUNBO0FBQ0E7QUFDdU8sd0JBQXdCLHVCQUF1Qix5RUFBeUUsSUFBSSx1QkFBdUIsU0FBUyxPQUFPLHVEQUFDLHFHQUFxRyxnQkFBZ0Isa0JBQWtCLE1BQU0sMEJBQTBCLEdBQUcsd0JBQXdCLG1DQUFtQyxPQUFPLGlCQUFpQixjQUFjLFdBQVcsVUFBVSx5Q0FBeUMsdUZBQUMsWUFBWSwyQ0FBMkMseUZBQUMsWUFBWSw0Q0FBNEMsMEZBQUMsWUFBWSw4Q0FBOEMsNEZBQUMsWUFBWSxlQUFlLHVEQUFDLDZEQUE2RCxzREFBQyxvREFBb0QsRUFBRSxVQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9zeW1ib2xzL2NpbS9PdmVycmlkZUhlbHBlci5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvYXJjYWRlL2NhbGxFeHByZXNzaW9uV2l0aEZlYXR1cmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uL0NvbG9yLmpzXCI7aW1wb3J0e2lzUkdCIGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9jb2xvclV0aWxzLmpzXCI7aW1wb3J0e2Nsb25lIGFzIGl9ZnJvbVwiLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtpbXBvcnR7Y3JlYXRlUmVuZGVyZXJFeHByZXNzaW9uIGFzIHR9ZnJvbVwiLi4vLi4vc3VwcG9ydC9BcmNhZGVFeHByZXNzaW9uLmpzXCI7aW1wb3J0e25vcm1hbGl6ZURhc2hFZmZlY3RUZW1wbGF0ZSBhcyBvLHRvTG93ZXJDYXNlUHJvcHMgYXMgYSxub3JtYWxpemVQcmltaXRpdmVPdmVycmlkZVByb3BzIGFzIGMsYXR0cmlidXRlc1RvRmllbGRzIGFzIGwsYW5hbHl6ZVRleHRQYXJ0cyBhcyBuLGFzc2lnblRleHRWYWx1ZXNGcm9tRmVhdHVyZSBhcyBwLHVuY2FwaXRhbGl6ZSBhcyBmfWZyb21cIi4vdXRpbHMuanNcIjtpbXBvcnQgbSBmcm9tXCIuLi8uLi92aWV3cy8yZC9hcmNhZGUvY2FsbEV4cHJlc3Npb25XaXRoRmVhdHVyZS5qc1wiO2NvbnN0IHk9ZT0+e2lmKCFlKXJldHVyblswLDAsMCwwXTtjb25zdHtyLGc6aSxiOnMsYTp0fT1lO3JldHVybltyLGkscywyNTUqdF19O2NsYXNzIHZ7c3RhdGljIGZpbmRBcHBsaWNhYmxlT3ZlcnJpZGVzKGUscixpKXtpZihlJiZyKXtpZihlLnByaW1pdGl2ZU5hbWUpe2xldCBzPSExO2Zvcihjb25zdCByIG9mIGkpaWYoci5wcmltaXRpdmVOYW1lPT09ZS5wcmltaXRpdmVOYW1lKXtzPSEwO2JyZWFrfWlmKCFzKWZvcihjb25zdCB0IG9mIHIpdC5wcmltaXRpdmVOYW1lPT09ZS5wcmltaXRpdmVOYW1lJiZpLnB1c2godCl9c3dpdGNoKGUudHlwZSl7Y2FzZVwiQ0lNUG9pbnRTeW1ib2xcIjpjYXNlXCJDSU1MaW5lU3ltYm9sXCI6Y2FzZVwiQ0lNUG9seWdvblN5bWJvbFwiOmlmKGUuZWZmZWN0cylmb3IoY29uc3QgcyBvZiBlLmVmZmVjdHMpdi5maW5kQXBwbGljYWJsZU92ZXJyaWRlcyhzLHIsaSk7aWYoZS5zeW1ib2xMYXllcnMpZm9yKGNvbnN0IHMgb2YgZS5zeW1ib2xMYXllcnMpdi5maW5kQXBwbGljYWJsZU92ZXJyaWRlcyhzLHIsaSk7YnJlYWs7Y2FzZVwiQ0lNVGV4dFN5bWJvbFwiOmJyZWFrO2Nhc2VcIkNJTVNvbGlkU3Ryb2tlXCI6Y2FzZVwiQ0lNUGljdHVyZVN0cm9rZVwiOmNhc2VcIkNJTUdyYWRpZW50U3Ryb2tlXCI6Y2FzZVwiQ0lNU29saWRGaWxsXCI6Y2FzZVwiQ0lNUGljdHVyZUZpbGxcIjpjYXNlXCJDSU1IYXRjaEZpbGxcIjpjYXNlXCJDSU1HcmFkaWVudEZpbGxcIjpjYXNlXCJDSU1WZWN0b3JNYXJrZXJcIjpjYXNlXCJDSU1DaGFyYWN0ZXJNYXJrZXJcIjpjYXNlXCJDSU1QaWN0dXJlTWFya2VyXCI6aWYoZS5lZmZlY3RzKWZvcihjb25zdCBzIG9mIGUuZWZmZWN0cyl2LmZpbmRBcHBsaWNhYmxlT3ZlcnJpZGVzKHMscixpKTtpZihlLm1hcmtlclBsYWNlbWVudCYmdi5maW5kQXBwbGljYWJsZU92ZXJyaWRlcyhlLm1hcmtlclBsYWNlbWVudCxyLGkpLFwiQ0lNVmVjdG9yTWFya2VyXCI9PT1lLnR5cGUpe2lmKGUubWFya2VyR3JhcGhpY3MpZm9yKGNvbnN0IHMgb2YgZS5tYXJrZXJHcmFwaGljcyl2LmZpbmRBcHBsaWNhYmxlT3ZlcnJpZGVzKHMscixpKSx2LmZpbmRBcHBsaWNhYmxlT3ZlcnJpZGVzKHMuc3ltYm9sLHIsaSl9ZWxzZVwiQ0lNQ2hhcmFjdGVyTWFya2VyXCI9PT1lLnR5cGU/di5maW5kQXBwbGljYWJsZU92ZXJyaWRlcyhlLnN5bWJvbCxyLGkpOlwiQ0lNSGF0Y2hGaWxsXCI9PT1lLnR5cGU/di5maW5kQXBwbGljYWJsZU92ZXJyaWRlcyhlLmxpbmVTeW1ib2wscixpKTpcIkNJTVBpY3R1cmVNYXJrZXJcIj09PWUudHlwZSYmdi5maW5kQXBwbGljYWJsZU92ZXJyaWRlcyhlLmFuaW1hdGVkU3ltYm9sUHJvcGVydGllcyxyLGkpfX19c3RhdGljIGZpbmRFZmZlY3RPdmVycmlkZXMoZSxyKXtpZighZSlyZXR1cm4gbnVsbDtpZihcIkNJTUdlb21ldHJpY0VmZmVjdERhc2hlc1wiPT09ZS50eXBlJiZvKGUpLCFyfHwhZS5wcmltaXRpdmVOYW1lKXJldHVybnt0eXBlOlwiY2ltLWVmZmVjdC1wYXJhbVwiLGVmZmVjdDplLG92ZXJyaWRlczpbXX07Y29uc3QgaT1hKGUpLHM9ZS5wcmltaXRpdmVOYW1lLHQ9W107Zm9yKGNvbnN0IG8gb2YgcilvLnByaW1pdGl2ZU5hbWU9PT1zJiZ0LnB1c2goYShvKSk7cmV0dXJue3R5cGU6XCJjaW0tZWZmZWN0LXBhcmFtXCIsZWZmZWN0Omksb3ZlcnJpZGVzOmModCl9fXN0YXRpYyBhc3luYyByZXNvbHZlU3ltYm9sT3ZlcnJpZGVzKGUscix0LG8sYSxjLG4pe2lmKCFlPy5zeW1ib2wpcmV0dXJuIG51bGw7bGV0e3N5bWJvbDpwLHByaW1pdGl2ZU92ZXJyaWRlczpmfT1lO2NvbnN0IG09ISFmO2lmKCFtJiYhbylyZXR1cm4gcDtwPWkocCksZj1pKGYpO2xldCB5PSEwO2lmKHJ8fChyPXthdHRyaWJ1dGVzOnt9fSx5PSExKSxtKXtpZih5fHwoZj1mLmZpbHRlcigoZT0+IWUudmFsdWVFeHByZXNzaW9uSW5mbz8uZXhwcmVzc2lvbi5pbmNsdWRlcyhcIiRmZWF0dXJlXCIpKSkpLG58fChmPWYuZmlsdGVyKChlPT4hZS52YWx1ZUV4cHJlc3Npb25JbmZvPy5leHByZXNzaW9uLmluY2x1ZGVzKFwiJHZpZXdcIikpKSksZi5sZW5ndGg+MCl7Y29uc3QgZT1sKHIuYXR0cmlidXRlcyksaT17c3BhdGlhbFJlZmVyZW5jZTp0LGZpZWxkczplLGdlb21ldHJ5VHlwZTphfTthd2FpdCB2LmNyZWF0ZVJlbmRlckV4cHJlc3Npb25zKGYsaSksdi5ldmFsdWF0ZU92ZXJyaWRlcyhmLHIsYT8/XCJlc3JpR2VvbWV0cnlQb2ludFwiLGMsbixuZXcgcyhlKSl9di5hcHBseU92ZXJyaWRlcyhwLGYpfXJldHVybiBvJiZ2LmFwcGx5RGljdGlvbmFyeVRleHRPdmVycmlkZXMocCxyLG8sbnVsbCkscH1zdGF0aWN7dGhpcy5fZXhwcmVzc2lvblRvUmVuZGVyRXhwcmVzc2lvbj1uZXcgTWFwfXN0YXRpYyBhc3luYyBjcmVhdGVSZW5kZXJFeHByZXNzaW9ucyhlLHIpe2NvbnN0IGk9W107Zm9yKGNvbnN0IHMgb2YgZSl7Y29uc3QgZT1zLnZhbHVlRXhwcmVzc2lvbkluZm87aWYoIWV8fHYuX2V4cHJlc3Npb25Ub1JlbmRlckV4cHJlc3Npb24uaGFzKGUuZXhwcmVzc2lvbikpY29udGludWU7Y29uc3Qgbz10KGUuZXhwcmVzc2lvbixyLnNwYXRpYWxSZWZlcmVuY2UpO2kucHVzaChvKSxvLnRoZW4oKHI9PnYuX2V4cHJlc3Npb25Ub1JlbmRlckV4cHJlc3Npb24uc2V0KGUuZXhwcmVzc2lvbixyKSkpfWkubGVuZ3RoPjAmJmF3YWl0IFByb21pc2UuYWxsKGkpfXN0YXRpYyBldmFsdWF0ZU92ZXJyaWRlcyhlLGkscyx0LG8sYSl7Y29uc3QgYz17JHZpZXc6e3NjYWxlOm8/LnNjYWxlfX07Zm9yKGNvbnN0IGwgb2YgZSl7bC52YWx1ZSYmXCJvYmplY3RcIj09dHlwZW9mIGwudmFsdWUmJnIobC52YWx1ZSkmJihcIkNvbG9yXCI9PT1sLnByb3BlcnR5TmFtZXx8XCJTdHJva2VDb2xvclwiPT09bC5wcm9wZXJ0eU5hbWUpJiYobC52YWx1ZT15KGwudmFsdWUpKTtjb25zdCBlPWwudmFsdWVFeHByZXNzaW9uSW5mbztpZighZSljb250aW51ZTtjb25zdCBvPXYuX2V4cHJlc3Npb25Ub1JlbmRlckV4cHJlc3Npb24uZ2V0KGUuZXhwcmVzc2lvbik7byYmKGwudmFsdWU9bShvLGksYyxzLGEsdCkpfX1zdGF0aWMgYXBwbHlEaWN0aW9uYXJ5VGV4dE92ZXJyaWRlcyhlLHIsaSxzLHQ9XCJOb3JtYWxcIil7aWYoZT8udHlwZSlzd2l0Y2goZS50eXBlKXtjYXNlXCJDSU1Qb2ludFN5bWJvbFwiOmNhc2VcIkNJTUxpbmVTeW1ib2xcIjpjYXNlXCJDSU1Qb2x5Z29uU3ltYm9sXCI6Y2FzZVwiQ0lNVGV4dFN5bWJvbFwiOntjb25zdCBvPWUuc3ltYm9sTGF5ZXJzO2lmKCFvKXJldHVybjtmb3IoY29uc3QgYSBvZiBvKWEmJlwiQ0lNVmVjdG9yTWFya2VyXCI9PT1hLnR5cGUmJnYuYXBwbHlEaWN0aW9uYXJ5VGV4dE92ZXJyaWRlcyhhLHIsaSxzLFwiQ0lNVGV4dFN5bWJvbFwiPT09ZS50eXBlP2UudGV4dENhc2U6dCl9YnJlYWs7Y2FzZVwiQ0lNVmVjdG9yTWFya2VyXCI6e2NvbnN0IHQ9ZS5tYXJrZXJHcmFwaGljcztpZighdClyZXR1cm47Zm9yKGNvbnN0IGUgb2YgdCllJiZ2LmFwcGx5RGljdGlvbmFyeVRleHRPdmVycmlkZXMoZSxyLGkscyl9YnJlYWs7Y2FzZVwiQ0lNTWFya2VyR3JhcGhpY1wiOntjb25zdCBvPWUudGV4dFN0cmluZztpZihvJiZvLmluY2x1ZGVzKFwiW1wiKSl7Y29uc3QgYT1uKG8saSk7ZS50ZXh0U3RyaW5nPXAocixhLHMsdCl9fX19c3RhdGljIGFwcGx5T3ZlcnJpZGVzKGUscixpLHMpe2lmKGUucHJpbWl0aXZlTmFtZSlmb3IoY29uc3QgdCBvZiByKWlmKHQucHJpbWl0aXZlTmFtZT09PWUucHJpbWl0aXZlTmFtZSl7Y29uc3Qgcj1mKHQucHJvcGVydHlOYW1lKTtpZihzJiZzLnB1c2goe2NpbTplLG5vY2FwUHJvcGVydHlOYW1lOnIsdmFsdWU6ZVtyXX0pLGkpe2xldCByPSExO2Zvcihjb25zdCBzIG9mIGkpcy5wcmltaXRpdmVOYW1lPT09ZS5wcmltaXRpdmVOYW1lJiYocj0hMCk7cnx8aS5wdXNoKHQpfW51bGwhPXQudmFsdWUmJihlW3JdPXQudmFsdWUpfXN3aXRjaChlLnR5cGUpe2Nhc2VcIkNJTVBvaW50U3ltYm9sXCI6Y2FzZVwiQ0lNTGluZVN5bWJvbFwiOmNhc2VcIkNJTVBvbHlnb25TeW1ib2xcIjppZihlLmVmZmVjdHMpZm9yKGNvbnN0IHQgb2YgZS5lZmZlY3RzKXYuYXBwbHlPdmVycmlkZXModCxyLGkscyk7aWYoZS5zeW1ib2xMYXllcnMpZm9yKGNvbnN0IHQgb2YgZS5zeW1ib2xMYXllcnMpdi5hcHBseU92ZXJyaWRlcyh0LHIsaSxzKTticmVhaztjYXNlXCJDSU1UZXh0U3ltYm9sXCI6YnJlYWs7Y2FzZVwiQ0lNU29saWRTdHJva2VcIjpjYXNlXCJDSU1Tb2xpZEZpbGxcIjpjYXNlXCJDSU1WZWN0b3JNYXJrZXJcIjppZihlLmVmZmVjdHMpZm9yKGNvbnN0IHQgb2YgZS5lZmZlY3RzKXYuYXBwbHlPdmVycmlkZXModCxyLGkscyk7aWYoXCJDSU1WZWN0b3JNYXJrZXJcIj09PWUudHlwZSYmZS5tYXJrZXJHcmFwaGljcylmb3IoY29uc3QgdCBvZiBlLm1hcmtlckdyYXBoaWNzKXYuYXBwbHlPdmVycmlkZXModCxyLGkscyksdi5hcHBseU92ZXJyaWRlcyh0LnN5bWJvbCxyLGkscyl9fXN0YXRpYyByZXN0b3JlT3ZlcnJpZGVzKGUpe2Zvcihjb25zdCByIG9mIGUpci5jaW1bci5ub2NhcFByb3BlcnR5TmFtZV09ci52YWx1ZX1zdGF0aWMgYnVpbGRPdmVycmlkZUtleShlKXtsZXQgcj1cIlwiO2Zvcihjb25zdCBpIG9mIGUpdm9pZCAwIT09aS52YWx1ZSYmKHIrPWAke2kucHJpbWl0aXZlTmFtZX0ke2kucHJvcGVydHlOYW1lfSR7SlNPTi5zdHJpbmdpZnkoaS52YWx1ZSl9YCk7cmV0dXJuIHJ9c3RhdGljIHRvVmFsdWUocixpKXtpZihcIkRhc2hUZW1wbGF0ZVwiPT09cilyZXR1cm4gaS5zcGxpdChcIiBcIikubWFwKChlPT5OdW1iZXIoZSkpKTtpZihcIkNvbG9yXCI9PT1yKXtjb25zdCByPW5ldyBlKGkpLnRvUmdiYSgpO3JldHVybiByWzNdKj0yNTUscn1yZXR1cm4gaX19ZXhwb3J0e3YgYXMgT3ZlcnJpZGVIZWxwZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHt1bnF1YW50aXplTXVsdGlwb2ludCBhcyB0LHVucXVhbnRpemVQb2x5bGluZSBhcyBvLHVucXVhbnRpemVQb2x5Z29uIGFzIG4sdW5xdWFudGl6ZVBvaW50IGFzIGF9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9xdWFudGl6YXRpb25VdGlscy5qc1wiO2Z1bmN0aW9uIHMoZSx0LG8sbixhLHMpe2lmKG51bGw9PWUpcmV0dXJuIG51bGw7Y29uc3QgdT1lLnJlZmVyZW5jZXMoXCJnZW9tZXRyeVwiKSYmcz9pKHQsbixzKTp0LGM9ZS5yZXB1cnBvc2VGZWF0dXJlKHUsYSk7dHJ5e3JldHVybiBlLmV2YWx1YXRlKGMsbyl9Y2F0Y2gobSl7cmV0dXJuIHIuZ2V0TG9nZ2VyKFwiZXNyaS52aWV3cy4yZC5zdXBwb3J0LmFyY2FkZU9uRGVtYW5kXCIpLndhcm4oXCJGZWF0dXJlIGFyY2FkZSBldmFsdWF0aW9uIGZhaWxlZDpcIixtKSxudWxsfX1jb25zdCB1PW5ldyBNYXA7ZnVuY3Rpb24gaShlLHIsdCl7Y29uc3R7dHJhbnNmb3JtOm8saGFzWjpuLGhhc006YX09dDt1LmhhcyhyKXx8dS5zZXQocixjKHIpKTtjb25zdCBzPXUuZ2V0KHIpKGUuZ2VvbWV0cnksbyxuLGEpO3JldHVybnsuLi5lLGdlb21ldHJ5OnN9fWZ1bmN0aW9uIGMocyl7Y29uc3QgdT17fTtzd2l0Y2gocyl7Y2FzZVwiZXNyaUdlb21ldHJ5UG9pbnRcIjpyZXR1cm4oZSxyLHQsbyk9PmEocix1LGUsdCxvKTtjYXNlXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI6cmV0dXJuKGUscix0LG8pPT5uKHIsdSxlLHQsbyk7Y2FzZVwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIjpyZXR1cm4oZSxyLHQsbik9Pm8ocix1LGUsdCxuKTtjYXNlXCJlc3JpR2VvbWV0cnlNdWx0aXBvaW50XCI6cmV0dXJuKGUscixvLG4pPT50KHIsdSxlLG8sbik7ZGVmYXVsdDpyZXR1cm4gci5nZXRMb2dnZXIoXCJlc3JpLnZpZXdzLjJkLnN1cHBvcnQuYXJjYWRlT25EZW1hbmRcIikuZXJyb3IobmV3IGUoXCJtYXB2aWV3LWFyY2FkZVwiLGBVbmFibGUgdG8gaGFuZGxlIGdlb21ldHJ5VHlwZTogJHtzfWApKSxlPT5lfX1leHBvcnR7cyBhcyBkZWZhdWx0fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==