export const __webpack_id__ = "node_modules_esri_calcite-components_dist_components_calcite-icon_index_js";
export const __webpack_ids__ = ["node_modules_esri_calcite-components_dist_components_calcite-icon_index_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/logger.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/logger.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ logger)
/* harmony export */ });
/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

const loggedDeprecations = /* @__PURE__ */ new Set();
const logLevels = {
  trace: 0,
  debug: 1,
  info: 2,
  warn: 4,
  error: 8,
  off: 10
};
function willLog(level) {
  return logLevels[level] >= logLevels[_runtime_js__WEBPACK_IMPORTED_MODULE_0__.l];
}
function forwardToConsole(level, ...data) {
  if (!willLog(level)) {
    return;
  }
  const badgeTemplate = "%ccalcite";
  const badgeStyle = "background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;";
  console[level].call(this, badgeTemplate, badgeStyle, ...data);
}
let listFormatter;
const logger = {
  debug: (message) => forwardToConsole("debug", message),
  info: (message) => forwardToConsole("info", message),
  warn: (message) => forwardToConsole("warn", message),
  error: (message) => forwardToConsole("error", message),
  trace: (message) => forwardToConsole("trace", message),
  deprecated
};
function deprecated(context, { component, name, suggested, removalVersion }) {
  const key = `${context}:${context === "component" ? "" : component}${name}`;
  if (loggedDeprecations.has(key)) {
    return;
  }
  loggedDeprecations.add(key);
  const multiSuggestions = Array.isArray(suggested);
  if (multiSuggestions && !listFormatter) {
    listFormatter = new Intl.ListFormat("en", { style: "long", type: "disjunction" });
  }
  const message = `[${name}] ${context} is deprecated and will be removed in ${removalVersion === "future" ? `a future version` : `v${removalVersion}`}.${suggested ? ` Use ${multiSuggestions ? listFormatter.format(suggested.map((suggestion) => `"${suggestion}"`)) : `"${suggested}"`} instead.` : ""}`;
  forwardToConsole("warn", message);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/observers.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/observers.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver),
/* harmony export */   u: () => (/* binding */ updateRefObserver)
/* harmony export */ });
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

function createObserver(type, callback, options) {
  if (lit__WEBPACK_IMPORTED_MODULE_0__.isServer) {
    return void 0;
  }
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return function() {
    return type === "intersection" ? window.IntersectionObserver : type === "mutation" ? ExtendedMutationObserver : window.ResizeObserver;
  }();
}
function updateRefObserver(observer, oldTarget, target, options) {
  if (!observer) {
    return;
  }
  if (oldTarget) {
    observer.unobserve(oldTarget);
  }
  if (!target) {
    return;
  }
  if (observer instanceof MutationObserver) {
    observer.observe(target, options);
    return;
  }
  observer.observe(target);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Icon: () => (/* binding */ Icon)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/logger.js */ "./node_modules/@esri/calcite-components/dist/chunks/logger.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */






const CSS = {
  flipRtl: "flip-rtl",
  svg: "svg"
};
const iconCache = {};
const requestCache = {};
const scaleToPx = {
  s: 16,
  m: 24,
  l: 32
};
function generateIconId({ icon, scale }) {
  const size = scaleToPx[scale];
  const name = normalizeIconName(icon);
  const filled = name.charAt(name.length - 1) === "F";
  const iconName = filled ? name.substring(0, name.length - 1) : name;
  return `${iconName}${size}${filled ? "F" : ""}`;
}
async function fetchIcon(props) {
  const cachedIconKey = generateIconId(props);
  const cachedIconData = getCachedIconDataByKey(cachedIconKey);
  if (cachedIconData) {
    return cachedIconData;
  }
  if (!requestCache[cachedIconKey]) {
    requestCache[cachedIconKey] = fetch((0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.g)(`./assets/icon/${cachedIconKey}.json`)).then((resp) => resp.json()).catch(() => {
      _chunks_logger_js__WEBPACK_IMPORTED_MODULE_5__.l.error(`${props.icon} (${props.scale}) icon failed to load`);
      return "";
    });
  }
  const path = await requestCache[cachedIconKey];
  iconCache[cachedIconKey] = path;
  return path;
}
function getCachedIconData(props) {
  return getCachedIconDataByKey(generateIconId(props));
}
function getCachedIconDataByKey(id) {
  return iconCache[id];
}
function normalizeIconName(name) {
  const numberLeadingName = !isNaN(Number(name.charAt(0)));
  const parts = name.split("-");
  const kebabCased = parts.length > 0;
  if (kebabCased) {
    const firstNonDigitInPartPattern = /[a-z]/i;
    name = parts.map((part, partIndex) => {
      return part.replace(firstNonDigitInPartPattern, function replacer(match, offset) {
        const isFirstCharInName = partIndex === 0 && offset === 0;
        if (isFirstCharInName) {
          return match;
        }
        return match.toUpperCase();
      });
    }).join("");
  }
  return numberLeadingName ? `i${name}` : name;
}
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:inline-flex;color:var(--calcite-icon-color, var(--calcite-ui-icon-color, currentColor))}:host([scale=s]){inline-size:16px;block-size:16px;min-inline-size:16px;min-block-size:16px}:host([scale=m]){inline-size:24px;block-size:24px;min-inline-size:24px;min-block-size:24px}:host([scale=l]){inline-size:32px;block-size:32px;min-inline-size:32px;min-block-size:32px}.flip-rtl{transform:scaleX(-1)}.svg{display:block}:host([hidden]){display:none}[hidden]{display:none}`;
class Icon extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super(...arguments);
    this.visible = false;
    this.flipRtl = false;
    this.icon = null;
    this.preload = false;
    this.scale = "m";
  }
  static {
    this.properties = { pathData: [16, {}, { state: true }], visible: [16, {}, { state: true }], flipRtl: [7, {}, { reflect: true, type: Boolean }], icon: [3, {}, { reflect: true }], preload: [7, {}, { reflect: true, type: Boolean }], scale: [3, {}, { reflect: true }], textLabel: 1 };
  }
  static {
    this.styles = styles;
  }
  connectedCallback() {
    super.connectedCallback();
    if (this.preload) {
      this.visible = true;
      this.loadIconPathData();
      return;
    }
    if (!this.visible) {
      this.waitUntilVisible(() => {
        this.visible = true;
        this.loadIconPathData();
      });
    }
  }
  willUpdate(changes) {
    if (changes.has("icon") && (this.hasUpdated || this.icon !== null) || changes.has("scale") && (this.hasUpdated || this.scale !== "m")) {
      this.loadIconPathData();
    }
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.intersectionObserver?.disconnect();
    this.intersectionObserver = null;
  }
  async loadIconPathData() {
    const { icon, scale, visible } = this;
    if (lit__WEBPACK_IMPORTED_MODULE_1__.isServer || !icon || !visible) {
      return;
    }
    const fetchIconProps = { icon, scale };
    const pathData = getCachedIconData(fetchIconProps) || await fetchIcon(fetchIconProps);
    if (icon !== this.icon) {
      return;
    }
    this.pathData = pathData;
  }
  waitUntilVisible(callback) {
    this.intersectionObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__.c)("intersection", (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          this.intersectionObserver.disconnect();
          this.intersectionObserver = null;
          callback();
        }
      });
    }, { rootMargin: "50px" });
    if (!this.intersectionObserver) {
      callback();
      return;
    }
    this.intersectionObserver.observe(this.el);
  }
  render() {
    const { el, flipRtl, pathData, scale, textLabel } = this;
    const dir = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.g)(el);
    const size = scaleToPx[scale];
    const semantic = !!textLabel;
    const paths = [].concat(pathData || "");
    this.el.ariaHidden = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.t)(!semantic);
    this.el.ariaLabel = semantic ? textLabel : null;
    this.el.role = semantic ? "img" : null;
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<svg aria-hidden=true class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)({
      [CSS.flipRtl]: dir === "rtl" && flipRtl,
      [CSS.svg]: true
    })} fill=currentColor height=100% viewBox=${`0 0 ${size} ${size}`} width=100% xmlns=http://www.w3.org/2000/svg>${paths.map((path) => typeof path === "string" ? (0,lit__WEBPACK_IMPORTED_MODULE_1__.svg)`<path d=${path ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} />` : (0,lit__WEBPACK_IMPORTED_MODULE_1__.svg)`<path d=${path.d ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} opacity=${("opacity" in path ? path.opacity : 1) ?? lit__WEBPACK_IMPORTED_MODULE_1__.nothing} />`)}</svg>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-icon", Icon);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Icon: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Icon)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-icon/customElement.js");


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19jYWxjaXRlLWljb25faW5kZXhfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBDQUFRO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxhQUFhLG9CQUFvQixpQkFBaUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0Q0FBNEM7QUFDM0UsaUJBQWlCLFFBQVEsR0FBRyx5Q0FBeUMsRUFBRSxLQUFLO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxvQ0FBb0M7QUFDcEY7QUFDQSxzQkFBc0IsS0FBSyxJQUFJLFNBQVMsdUNBQXVDLHVEQUF1RCxlQUFlLEVBQUUsR0FBRyxvQkFBb0IsMEVBQTBFLFdBQVcsV0FBVyxVQUFVLElBQUksZUFBZTtBQUMzUztBQUNBO0FBR0U7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaERGO0FBQ0E7QUFDQTtBQUMrQjtBQUMvQjtBQUNBLE1BQU0seUNBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckRGO0FBQ0E7QUFDQTtBQUNnRjtBQUN4QjtBQUNFO0FBQ21CO0FBQ2I7QUFDWDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGFBQWE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVMsRUFBRSxLQUFLLEVBQUUsa0JBQWtCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MscURBQVksa0JBQWtCLGNBQWM7QUFDcEYsTUFBTSxnREFBTSxVQUFVLFlBQVksR0FBRyxZQUFZO0FBQ2pEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxpQ0FBaUMsS0FBSztBQUN0QztBQUNBLGVBQWUsd0NBQUcsT0FBTyx3SEFBd0gsTUFBTSxvQkFBb0IsNEVBQTRFLGlCQUFpQixpQkFBaUIsZ0JBQWdCLHFCQUFxQixvQkFBb0IsaUJBQWlCLGlCQUFpQixnQkFBZ0IscUJBQXFCLG9CQUFvQixpQkFBaUIsaUJBQWlCLGdCQUFnQixxQkFBcUIsb0JBQW9CLFVBQVUscUJBQXFCLEtBQUssY0FBYyxnQkFBZ0IsYUFBYSxTQUFTLGFBQWE7QUFDN21CLG1CQUFtQixzREFBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCLElBQUksYUFBYSxtQkFBbUIsSUFBSSxhQUFhLGtCQUFrQixJQUFJLDhCQUE4QixlQUFlLElBQUksZUFBZSxrQkFBa0IsSUFBSSw4QkFBOEIsZ0JBQWdCLElBQUksZUFBZTtBQUMzUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQyxRQUFRLHlDQUFRO0FBQ2hCO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsdURBQWM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUssSUFBSSxvQkFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDBDQUEwQztBQUN0RCxnQkFBZ0IsaURBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFhO0FBQ3RDO0FBQ0E7QUFDQSxXQUFXLHlDQUFJLCtCQUErQiw0REFBWTtBQUMxRDtBQUNBO0FBQ0EsS0FBSyxHQUFHLHdDQUF3QyxPQUFPLE1BQU0sRUFBRSxLQUFLLEdBQUcsOENBQThDLCtDQUErQyx3Q0FBRyxXQUFXLFFBQVEsd0NBQU8sRUFBRSxNQUFNLHdDQUFHLFdBQVcsVUFBVSx3Q0FBTyxFQUFFLFVBQVUsMENBQTBDLHdDQUFPLEVBQUUsS0FBSztBQUM1UztBQUNBO0FBQ0EscURBQWE7QUFHWCIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL29ic2VydmVycy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtaWNvbi9jdXN0b21FbGVtZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS1pY29uL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBsIGFzIGxvZ0xldmVsIH0gZnJvbSBcIi4vcnVudGltZS5qc1wiO1xuY29uc3QgbG9nZ2VkRGVwcmVjYXRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmNvbnN0IGxvZ0xldmVscyA9IHtcbiAgdHJhY2U6IDAsXG4gIGRlYnVnOiAxLFxuICBpbmZvOiAyLFxuICB3YXJuOiA0LFxuICBlcnJvcjogOCxcbiAgb2ZmOiAxMFxufTtcbmZ1bmN0aW9uIHdpbGxMb2cobGV2ZWwpIHtcbiAgcmV0dXJuIGxvZ0xldmVsc1tsZXZlbF0gPj0gbG9nTGV2ZWxzW2xvZ0xldmVsXTtcbn1cbmZ1bmN0aW9uIGZvcndhcmRUb0NvbnNvbGUobGV2ZWwsIC4uLmRhdGEpIHtcbiAgaWYgKCF3aWxsTG9nKGxldmVsKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBiYWRnZVRlbXBsYXRlID0gXCIlY2NhbGNpdGVcIjtcbiAgY29uc3QgYmFkZ2VTdHlsZSA9IFwiYmFja2dyb3VuZDogIzAwN0FDMjsgY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogMnB4IDRweDtcIjtcbiAgY29uc29sZVtsZXZlbF0uY2FsbCh0aGlzLCBiYWRnZVRlbXBsYXRlLCBiYWRnZVN0eWxlLCAuLi5kYXRhKTtcbn1cbmxldCBsaXN0Rm9ybWF0dGVyO1xuY29uc3QgbG9nZ2VyID0ge1xuICBkZWJ1ZzogKG1lc3NhZ2UpID0+IGZvcndhcmRUb0NvbnNvbGUoXCJkZWJ1Z1wiLCBtZXNzYWdlKSxcbiAgaW5mbzogKG1lc3NhZ2UpID0+IGZvcndhcmRUb0NvbnNvbGUoXCJpbmZvXCIsIG1lc3NhZ2UpLFxuICB3YXJuOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcIndhcm5cIiwgbWVzc2FnZSksXG4gIGVycm9yOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcImVycm9yXCIsIG1lc3NhZ2UpLFxuICB0cmFjZTogKG1lc3NhZ2UpID0+IGZvcndhcmRUb0NvbnNvbGUoXCJ0cmFjZVwiLCBtZXNzYWdlKSxcbiAgZGVwcmVjYXRlZFxufTtcbmZ1bmN0aW9uIGRlcHJlY2F0ZWQoY29udGV4dCwgeyBjb21wb25lbnQsIG5hbWUsIHN1Z2dlc3RlZCwgcmVtb3ZhbFZlcnNpb24gfSkge1xuICBjb25zdCBrZXkgPSBgJHtjb250ZXh0fToke2NvbnRleHQgPT09IFwiY29tcG9uZW50XCIgPyBcIlwiIDogY29tcG9uZW50fSR7bmFtZX1gO1xuICBpZiAobG9nZ2VkRGVwcmVjYXRpb25zLmhhcyhrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvZ2dlZERlcHJlY2F0aW9ucy5hZGQoa2V5KTtcbiAgY29uc3QgbXVsdGlTdWdnZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkoc3VnZ2VzdGVkKTtcbiAgaWYgKG11bHRpU3VnZ2VzdGlvbnMgJiYgIWxpc3RGb3JtYXR0ZXIpIHtcbiAgICBsaXN0Rm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChcImVuXCIsIHsgc3R5bGU6IFwibG9uZ1wiLCB0eXBlOiBcImRpc2p1bmN0aW9uXCIgfSk7XG4gIH1cbiAgY29uc3QgbWVzc2FnZSA9IGBbJHtuYW1lfV0gJHtjb250ZXh0fSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gJHtyZW1vdmFsVmVyc2lvbiA9PT0gXCJmdXR1cmVcIiA/IGBhIGZ1dHVyZSB2ZXJzaW9uYCA6IGB2JHtyZW1vdmFsVmVyc2lvbn1gfS4ke3N1Z2dlc3RlZCA/IGAgVXNlICR7bXVsdGlTdWdnZXN0aW9ucyA/IGxpc3RGb3JtYXR0ZXIuZm9ybWF0KHN1Z2dlc3RlZC5tYXAoKHN1Z2dlc3Rpb24pID0+IGBcIiR7c3VnZ2VzdGlvbn1cImApKSA6IGBcIiR7c3VnZ2VzdGVkfVwiYH0gaW5zdGVhZC5gIDogXCJcIn1gO1xuICBmb3J3YXJkVG9Db25zb2xlKFwid2FyblwiLCBtZXNzYWdlKTtcbn1cbmV4cG9ydCB7XG4gIGxvZ2dlciBhcyBsXG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSBcImxpdFwiO1xuZnVuY3Rpb24gY3JlYXRlT2JzZXJ2ZXIodHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgaWYgKGlzU2VydmVyKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBjb25zdCBPYnNlcnZlciA9IGdldE9ic2VydmVyKHR5cGUpO1xuICByZXR1cm4gbmV3IE9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyKHR5cGUpIHtcbiAgY2xhc3MgRXh0ZW5kZWRNdXRhdGlvbk9ic2VydmVyIGV4dGVuZHMgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICBzdXBlcihjYWxsYmFjayk7XG4gICAgICB0aGlzLm9ic2VydmVkRW50cnkgPSBbXTtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgb2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeS5wdXNoKHsgdGFyZ2V0LCBvcHRpb25zIH0pO1xuICAgICAgcmV0dXJuIHN1cGVyLm9ic2VydmUodGFyZ2V0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgdW5vYnNlcnZlKHRhcmdldCkge1xuICAgICAgY29uc3QgbmV3T2JzZXJ2ZWRFbnRyaWVzID0gdGhpcy5vYnNlcnZlZEVudHJ5LmZpbHRlcigob2JzZXJ2ZWQpID0+IG9ic2VydmVkLnRhcmdldCAhPT0gdGFyZ2V0KTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayhzdXBlci50YWtlUmVjb3JkcygpLCB0aGlzKTtcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgbmV3T2JzZXJ2ZWRFbnRyaWVzLmZvckVhY2goKG9ic2VydmVkKSA9PiB0aGlzLm9ic2VydmUob2JzZXJ2ZWQudGFyZ2V0LCBvYnNlcnZlZC5vcHRpb25zKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gXCJpbnRlcnNlY3Rpb25cIiA/IHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlciA6IHR5cGUgPT09IFwibXV0YXRpb25cIiA/IEV4dGVuZGVkTXV0YXRpb25PYnNlcnZlciA6IHdpbmRvdy5SZXNpemVPYnNlcnZlcjtcbiAgfSgpO1xufVxuZnVuY3Rpb24gdXBkYXRlUmVmT2JzZXJ2ZXIob2JzZXJ2ZXIsIG9sZFRhcmdldCwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gIGlmICghb2JzZXJ2ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG9sZFRhcmdldCkge1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZShvbGRUYXJnZXQpO1xuICB9XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvYnNlcnZlciBpbnN0YW5jZW9mIE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZU9ic2VydmVyIGFzIGMsXG4gIHVwZGF0ZVJlZk9ic2VydmVyIGFzIHVcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgZyBhcyBnZXRBc3NldFBhdGgsIGMgYXMgY3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi8uLi9jaHVua3MvcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgY3NzLCBpc1NlcnZlciwgbm90aGluZywgc3ZnLCBodG1sIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgc2FmZUNsYXNzTWFwIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBnIGFzIGdldEVsZW1lbnREaXIsIHQgYXMgdG9BcmlhQm9vbGVhbiB9IGZyb20gXCIuLi8uLi9jaHVua3MvZG9tLmpzXCI7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZU9ic2VydmVyIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9vYnNlcnZlcnMuanNcIjtcbmltcG9ydCB7IGwgYXMgbG9nZ2VyIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9sb2dnZXIuanNcIjtcbmNvbnN0IENTUyA9IHtcbiAgZmxpcFJ0bDogXCJmbGlwLXJ0bFwiLFxuICBzdmc6IFwic3ZnXCJcbn07XG5jb25zdCBpY29uQ2FjaGUgPSB7fTtcbmNvbnN0IHJlcXVlc3RDYWNoZSA9IHt9O1xuY29uc3Qgc2NhbGVUb1B4ID0ge1xuICBzOiAxNixcbiAgbTogMjQsXG4gIGw6IDMyXG59O1xuZnVuY3Rpb24gZ2VuZXJhdGVJY29uSWQoeyBpY29uLCBzY2FsZSB9KSB7XG4gIGNvbnN0IHNpemUgPSBzY2FsZVRvUHhbc2NhbGVdO1xuICBjb25zdCBuYW1lID0gbm9ybWFsaXplSWNvbk5hbWUoaWNvbik7XG4gIGNvbnN0IGZpbGxlZCA9IG5hbWUuY2hhckF0KG5hbWUubGVuZ3RoIC0gMSkgPT09IFwiRlwiO1xuICBjb25zdCBpY29uTmFtZSA9IGZpbGxlZCA/IG5hbWUuc3Vic3RyaW5nKDAsIG5hbWUubGVuZ3RoIC0gMSkgOiBuYW1lO1xuICByZXR1cm4gYCR7aWNvbk5hbWV9JHtzaXplfSR7ZmlsbGVkID8gXCJGXCIgOiBcIlwifWA7XG59XG5hc3luYyBmdW5jdGlvbiBmZXRjaEljb24ocHJvcHMpIHtcbiAgY29uc3QgY2FjaGVkSWNvbktleSA9IGdlbmVyYXRlSWNvbklkKHByb3BzKTtcbiAgY29uc3QgY2FjaGVkSWNvbkRhdGEgPSBnZXRDYWNoZWRJY29uRGF0YUJ5S2V5KGNhY2hlZEljb25LZXkpO1xuICBpZiAoY2FjaGVkSWNvbkRhdGEpIHtcbiAgICByZXR1cm4gY2FjaGVkSWNvbkRhdGE7XG4gIH1cbiAgaWYgKCFyZXF1ZXN0Q2FjaGVbY2FjaGVkSWNvbktleV0pIHtcbiAgICByZXF1ZXN0Q2FjaGVbY2FjaGVkSWNvbktleV0gPSBmZXRjaChnZXRBc3NldFBhdGgoYC4vYXNzZXRzL2ljb24vJHtjYWNoZWRJY29uS2V5fS5qc29uYCkpLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKS5jYXRjaCgoKSA9PiB7XG4gICAgICBsb2dnZXIuZXJyb3IoYCR7cHJvcHMuaWNvbn0gKCR7cHJvcHMuc2NhbGV9KSBpY29uIGZhaWxlZCB0byBsb2FkYCk7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KTtcbiAgfVxuICBjb25zdCBwYXRoID0gYXdhaXQgcmVxdWVzdENhY2hlW2NhY2hlZEljb25LZXldO1xuICBpY29uQ2FjaGVbY2FjaGVkSWNvbktleV0gPSBwYXRoO1xuICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIGdldENhY2hlZEljb25EYXRhKHByb3BzKSB7XG4gIHJldHVybiBnZXRDYWNoZWRJY29uRGF0YUJ5S2V5KGdlbmVyYXRlSWNvbklkKHByb3BzKSk7XG59XG5mdW5jdGlvbiBnZXRDYWNoZWRJY29uRGF0YUJ5S2V5KGlkKSB7XG4gIHJldHVybiBpY29uQ2FjaGVbaWRdO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSWNvbk5hbWUobmFtZSkge1xuICBjb25zdCBudW1iZXJMZWFkaW5nTmFtZSA9ICFpc05hTihOdW1iZXIobmFtZS5jaGFyQXQoMCkpKTtcbiAgY29uc3QgcGFydHMgPSBuYW1lLnNwbGl0KFwiLVwiKTtcbiAgY29uc3Qga2ViYWJDYXNlZCA9IHBhcnRzLmxlbmd0aCA+IDA7XG4gIGlmIChrZWJhYkNhc2VkKSB7XG4gICAgY29uc3QgZmlyc3ROb25EaWdpdEluUGFydFBhdHRlcm4gPSAvW2Etel0vaTtcbiAgICBuYW1lID0gcGFydHMubWFwKChwYXJ0LCBwYXJ0SW5kZXgpID0+IHtcbiAgICAgIHJldHVybiBwYXJ0LnJlcGxhY2UoZmlyc3ROb25EaWdpdEluUGFydFBhdHRlcm4sIGZ1bmN0aW9uIHJlcGxhY2VyKG1hdGNoLCBvZmZzZXQpIHtcbiAgICAgICAgY29uc3QgaXNGaXJzdENoYXJJbk5hbWUgPSBwYXJ0SW5kZXggPT09IDAgJiYgb2Zmc2V0ID09PSAwO1xuICAgICAgICBpZiAoaXNGaXJzdENoYXJJbk5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7XG4gICAgICB9KTtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9XG4gIHJldHVybiBudW1iZXJMZWFkaW5nTmFtZSA/IGBpJHtuYW1lfWAgOiBuYW1lO1xufVxuY29uc3Qgc3R5bGVzID0gY3NzYDpob3N0ey0tY2FsY2l0ZS1pbnRlcm5hbC1jb2xvci1mb2N1czogdmFyKCAtLWNhbGNpdGUtY29sb3ItZm9jdXMsIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtY29sb3IsIHZhcigtLWNhbGNpdGUtY29sb3ItYnJhbmQpKSApfTpob3N0e2Rpc3BsYXk6aW5saW5lLWZsZXg7Y29sb3I6dmFyKC0tY2FsY2l0ZS1pY29uLWNvbG9yLCB2YXIoLS1jYWxjaXRlLXVpLWljb24tY29sb3IsIGN1cnJlbnRDb2xvcikpfTpob3N0KFtzY2FsZT1zXSl7aW5saW5lLXNpemU6MTZweDtibG9jay1zaXplOjE2cHg7bWluLWlubGluZS1zaXplOjE2cHg7bWluLWJsb2NrLXNpemU6MTZweH06aG9zdChbc2NhbGU9bV0pe2lubGluZS1zaXplOjI0cHg7YmxvY2stc2l6ZToyNHB4O21pbi1pbmxpbmUtc2l6ZToyNHB4O21pbi1ibG9jay1zaXplOjI0cHh9Omhvc3QoW3NjYWxlPWxdKXtpbmxpbmUtc2l6ZTozMnB4O2Jsb2NrLXNpemU6MzJweDttaW4taW5saW5lLXNpemU6MzJweDttaW4tYmxvY2stc2l6ZTozMnB4fS5mbGlwLXJ0bHt0cmFuc2Zvcm06c2NhbGVYKC0xKX0uc3Zne2Rpc3BsYXk6YmxvY2t9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9YDtcbmNsYXNzIEljb24gZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLmZsaXBSdGwgPSBmYWxzZTtcbiAgICB0aGlzLmljb24gPSBudWxsO1xuICAgIHRoaXMucHJlbG9hZCA9IGZhbHNlO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgcGF0aERhdGE6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIHZpc2libGU6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIGZsaXBSdGw6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBpY29uOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgcHJlbG9hZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIHNjYWxlOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgdGV4dExhYmVsOiAxIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGlmICh0aGlzLnByZWxvYWQpIHtcbiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICB0aGlzLmxvYWRJY29uUGF0aERhdGEoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgIHRoaXMud2FpdFVudGlsVmlzaWJsZSgoKSA9PiB7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMubG9hZEljb25QYXRoRGF0YSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHdpbGxVcGRhdGUoY2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmhhcyhcImljb25cIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLmljb24gIT09IG51bGwpIHx8IGNoYW5nZXMuaGFzKFwic2NhbGVcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLnNjYWxlICE9PSBcIm1cIikpIHtcbiAgICAgIHRoaXMubG9hZEljb25QYXRoRGF0YSgpO1xuICAgIH1cbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gbnVsbDtcbiAgfVxuICBhc3luYyBsb2FkSWNvblBhdGhEYXRhKCkge1xuICAgIGNvbnN0IHsgaWNvbiwgc2NhbGUsIHZpc2libGUgfSA9IHRoaXM7XG4gICAgaWYgKGlzU2VydmVyIHx8ICFpY29uIHx8ICF2aXNpYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGZldGNoSWNvblByb3BzID0geyBpY29uLCBzY2FsZSB9O1xuICAgIGNvbnN0IHBhdGhEYXRhID0gZ2V0Q2FjaGVkSWNvbkRhdGEoZmV0Y2hJY29uUHJvcHMpIHx8IGF3YWl0IGZldGNoSWNvbihmZXRjaEljb25Qcm9wcyk7XG4gICAgaWYgKGljb24gIT09IHRoaXMuaWNvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnBhdGhEYXRhID0gcGF0aERhdGE7XG4gIH1cbiAgd2FpdFVudGlsVmlzaWJsZShjYWxsYmFjaykge1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBjcmVhdGVPYnNlcnZlcihcImludGVyc2VjdGlvblwiLCAoZW50cmllcykgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7IHJvb3RNYXJnaW46IFwiNTBweFwiIH0pO1xuICAgIGlmICghdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGVsLCBmbGlwUnRsLCBwYXRoRGF0YSwgc2NhbGUsIHRleHRMYWJlbCB9ID0gdGhpcztcbiAgICBjb25zdCBkaXIgPSBnZXRFbGVtZW50RGlyKGVsKTtcbiAgICBjb25zdCBzaXplID0gc2NhbGVUb1B4W3NjYWxlXTtcbiAgICBjb25zdCBzZW1hbnRpYyA9ICEhdGV4dExhYmVsO1xuICAgIGNvbnN0IHBhdGhzID0gW10uY29uY2F0KHBhdGhEYXRhIHx8IFwiXCIpO1xuICAgIHRoaXMuZWwuYXJpYUhpZGRlbiA9IHRvQXJpYUJvb2xlYW4oIXNlbWFudGljKTtcbiAgICB0aGlzLmVsLmFyaWFMYWJlbCA9IHNlbWFudGljID8gdGV4dExhYmVsIDogbnVsbDtcbiAgICB0aGlzLmVsLnJvbGUgPSBzZW1hbnRpYyA/IFwiaW1nXCIgOiBudWxsO1xuICAgIHJldHVybiBodG1sYDxzdmcgYXJpYS1oaWRkZW49dHJ1ZSBjbGFzcz0ke3NhZmVDbGFzc01hcCh7XG4gICAgICBbQ1NTLmZsaXBSdGxdOiBkaXIgPT09IFwicnRsXCIgJiYgZmxpcFJ0bCxcbiAgICAgIFtDU1Muc3ZnXTogdHJ1ZVxuICAgIH0pfSBmaWxsPWN1cnJlbnRDb2xvciBoZWlnaHQ9MTAwJSB2aWV3Qm94PSR7YDAgMCAke3NpemV9ICR7c2l6ZX1gfSB3aWR0aD0xMDAlIHhtbG5zPWh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnPiR7cGF0aHMubWFwKChwYXRoKSA9PiB0eXBlb2YgcGF0aCA9PT0gXCJzdHJpbmdcIiA/IHN2Z2A8cGF0aCBkPSR7cGF0aCA/PyBub3RoaW5nfSAvPmAgOiBzdmdgPHBhdGggZD0ke3BhdGguZCA/PyBub3RoaW5nfSBvcGFjaXR5PSR7KFwib3BhY2l0eVwiIGluIHBhdGggPyBwYXRoLm9wYWNpdHkgOiAxKSA/PyBub3RoaW5nfSAvPmApfTwvc3ZnPmA7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLWljb25cIiwgSWNvbik7XG5leHBvcnQge1xuICBJY29uXG59O1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vY3VzdG9tRWxlbWVudC5qc1wiOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==