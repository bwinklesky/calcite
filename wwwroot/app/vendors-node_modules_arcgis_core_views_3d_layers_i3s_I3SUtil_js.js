export const __webpack_id__ = "vendors-node_modules_arcgis_core_views_3d_layers_i3s_I3SUtil_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_views_3d_layers_i3s_I3SUtil_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/support/featurePopupQueryUtils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/featurePopupQueryUtils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchFeaturePopupFeatures: () => (/* binding */ s),
/* harmony export */   loadFeaturePopupArcadeModules: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/sql.js */ "./node_modules/@arcgis/core/core/sql.js");
/* harmony import */ var _fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _support_loadArcade_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../support/loadArcade.js */ "./node_modules/@arcgis/core/support/loadArcade.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function s(n,s,l,u){const c=new Array(s.length),a=new Map,d=new Map,p=(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.unpackFieldNames)(n.fieldsIndex,l.outFields),f=u?.hasRequiredFields??_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.featureHasFields;for(let t=0;t<s.length;t++){const o=s[t];if(o.isAggregate){c[t]=o;continue}let i=!1;if(u?.getPopupTemplate){const t=o.origin?.layer??o.sourceLayer??o.layer,n=u.getPopupTemplate(t);if(null==n)continue;const s=await r(n);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.throwIfAborted)(u),i=s&&s.arcadeUtils.hasGeometryOperations(n)}if(i||!f(o,p)){const e=o.getObjectId();if(null!=e){a.set(e,{graphic:o,index:t});continue}const i=o.getGlobalId();if(null!=i){d.set(i,{graphic:o,index:t});continue}}c[t]=o}if(!n.queryFeatures||0===a.size&&0===d.size)return c.filter(Boolean);const g=[],y=(e,t)=>{t&&(e.outFields??=[],e.outFields.includes(t)||e.outFields.push(t))};if(a.size>0){const e=l.clone();y(e,n.objectIdField),"uniqueIdFields"in n&&n.uniqueIdFields?.length&&(e.outFields??=[],e.outFields.push(...n.uniqueIdFields)),e.objectIds=Array.from(a.keys()),g.push({type:"object-id",query:e,map:a})}const m="globalIdField"in n?n.globalIdField:null;if(null!=m&&d.size>0){const e=l.clone();y(e,m);const o=Array.from(d.keys());e.where=(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_1__.sqlAnd)(l.where,`${m} IN (${o.map((e=>`'${e}'`)).join(",")})`),g.push({type:"global-id",query:e,map:d})}const b=u?.updateSourceAttributes??!1;for(const{type:e,query:t,map:o}of g)try{const i=await n.queryFeatures(t,u);for(const t of i.features){const i="object-id"===e?t.getObjectId():t.getGlobalId();if(null==i)continue;const n=o.get(i);if(!n)continue;const{graphic:s,index:r}=n;if(b&&t.attributes){s.attributes??={};for(const e of p)e in t.attributes&&(s.attributes[e]=t.attributes[e])}const{geometry:l,origin:u}=s;t.geometry||=l,t.origin=u,c[r]=t}}catch{}return c.filter(Boolean)}async function r(e){if(e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>"expression"===e.type)))return (0,_support_loadArcade_js__WEBPACK_IMPORTED_MODULE_3__.loadArcade)()}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SProjectionUtil.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SProjectionUtil.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   computeGlobalTransformation: () => (/* binding */ n),
/* harmony export */   getLocalOrigin: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/mat4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../geometry/ellipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/ellipsoidUtils.js");
/* harmony import */ var _geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../geometry/projection/computeTranslationToOriginAndRotation.js */ "./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(r,a,n,s,e){const h="east-north-up"===n?(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.clone)(r):c(r,a,s),m=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__.create)();return (0,_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__.computeTranslationToOriginAndRotation)(s,h,m,e),m}const s=1,e=5-s;function c(t,o,i){const n=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),c=t[3],h=2**(Math.ceil(Math.log(c)*Math.LOG2E/e)*e+s);if(i.isGeographic){const o=h/(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_2__.getReferenceEllipsoid)(i).radius*180/Math.PI,r=Math.round(t[1]/o),s=Math.max(-90,Math.min(90,r*o)),e=o/Math.cos((Math.abs(s)-o/2)/180*Math.PI),c=Math.round(t[0]/e)*e;n[0]=c,n[1]=s}else{const o=Math.round(t[0]/h),r=Math.round(t[1]/h);n[0]=o*h,n[1]=r*h}const m=t[2]+o,M=Math.round(m/h);return n[2]=M*h,n}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MbsIntersectResult: () => (/* binding */ _),
/* harmony export */   SymbolInfo: () => (/* binding */ ae),
/* harmony export */   addWraparound: () => (/* binding */ ce),
/* harmony export */   checkPointCloudLayerCompatibleWithView: () => (/* binding */ re),
/* harmony export */   checkPointCloudLayerValid: () => (/* binding */ te),
/* harmony export */   checkRecyclable: () => (/* binding */ Q),
/* harmony export */   checkSceneLayerCompatibleWithView: () => (/* binding */ Y),
/* harmony export */   checkSceneLayerValid: () => (/* binding */ X),
/* harmony export */   checkSpatialReference: () => (/* binding */ z),
/* harmony export */   checkSpatialReferences: () => (/* binding */ H),
/* harmony export */   computeVisibilityObb: () => (/* binding */ ue),
/* harmony export */   containsDraco: () => (/* binding */ U),
/* harmony export */   extractWkid: () => (/* binding */ C),
/* harmony export */   filterInPlace: () => (/* binding */ k),
/* harmony export */   findFieldsCaseInsensitive: () => (/* binding */ K),
/* harmony export */   findIntersectingNodes: () => (/* binding */ N),
/* harmony export */   getClipRect: () => (/* binding */ O),
/* harmony export */   getIndexCrs: () => (/* binding */ V),
/* harmony export */   getSymbolInfo: () => (/* binding */ le),
/* harmony export */   getVertexCrs: () => (/* binding */ $),
/* harmony export */   intersectBoundingRectWithMbs: () => (/* binding */ A),
/* harmony export */   invalidateMbs: () => (/* binding */ pe),
/* harmony export */   isSupportedLocalModeProjection: () => (/* binding */ Z),
/* harmony export */   isValidMbs: () => (/* binding */ fe),
/* harmony export */   objectIdFilter: () => (/* binding */ D),
/* harmony export */   queryAttributesFromCachedAttributesId: () => (/* binding */ B),
/* harmony export */   rendererNeedsTextures: () => (/* binding */ ie),
/* harmony export */   transparentEdgeMaterial: () => (/* binding */ se),
/* harmony export */   whenGraphicAttributes: () => (/* binding */ L)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/math/mat4.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/mat4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/projectionUtils.js */ "./node_modules/@arcgis/core/geometry/projectionUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _layers_support_featurePopupQueryUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../layers/support/featurePopupQueryUtils.js */ "./node_modules/@arcgis/core/layers/support/featurePopupQueryUtils.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./I3SBinaryReader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js");
/* harmony import */ var _I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./I3SProjectionUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SProjectionUtil.js");
/* harmony import */ var _support_edgeUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../support/edgeUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/edgeUtils.js");
/* harmony import */ var _support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../support/symbolColorUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/* harmony import */ var _support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../support/layerViewUtils.js */ "./node_modules/@arcgis/core/views/support/layerViewUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function C(e){return e?parseInt(e.slice(e.lastIndexOf("/")+1),10):void 0}function U(e){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("disable-feature:i3s-draco")||!e)return!1;for(const t of e)for(const e of t.geometryBuffers)if("draco"===e.compressedAttributes?.encoding)return!0;return!1}function N(e,t,r,o){r.traverse(t,(t=>{const r=t.serviceMbsInIndexSR;return(null!=r&&A(e,r))!==_.OUTSIDE&&(o(t),!0)}))}function k(e,t,r){let o=0,n=0;for(let i=0;i<t.length&&o<e.length;i++)e[o]===t[i]&&(r(i)&&(e[n]=e[o],n++),o++);e.length=n}function D(e,r,o){let n=0,i=0;for(;n<o.length;){(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.binaryIndexOf)(e,o[n])>=0===r&&(o[i]=o[n],i++),n++}o.length=i}function O(e,t){if(0===t.rotationScale[1]&&0===t.rotationScale[2]&&0===t.rotationScale[3]&&0===t.rotationScale[5]&&0===t.rotationScale[6]&&0===t.rotationScale[7])return W[0]=(e[0]-t.position[0])/t.rotationScale[0],W[1]=(e[1]-t.position[1])/t.rotationScale[4],W[2]=(e[2]-t.position[0])/t.rotationScale[0],W[3]=(e[3]-t.position[1])/t.rotationScale[4],W}const W=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.create)();var _;function A(e,t){const r=t[0],o=t[1],n=t[3],i=e[0]-r,s=r-e[2],a=e[1]-o,l=o-e[3],c=Math.max(i,s,0),u=Math.max(a,l,0),f=c*c+u*u;if(f>n*n)return _.OUTSIDE;if(f>0)return _.INTERSECTS_CENTER_OUTSIDE;return-Math.max(i,s,a,l)>n?_.INSIDE:_.INTERSECTS_CENTER_INSIDE}function K(e,t,r){const o=[],n=r?.missingFields,i=r?.originalFields;let s=!1;for(const a of e){const e=t.get(a);e?(i?.push(a),o.push(e.name),a!==e.name&&(s=!0)):n?.push(a)}return r&&"hasMismatchedCasing"in r&&(r.hasMismatchedCasing=s),o}async function L(e,t,o,n,i,s){if(0===t.length)return[];const a=e.attributeStorageInfo;if(null!=e.associatedLayer)try{return await G(e.associatedLayer,t,n,s)}catch(l){if(e.associatedLayer.loaded)throw l}if(a){const r=q(e,t,o,i),l=e.parsedUrl.path;return await Promise.allSettled(r.map((t=>P(l,a,t.node,t.indices,n,e.apiKey,e.customParameters,s).then((e=>{for(let r=0;r<t.graphics.length;r++){const o=t.graphics[r],n=e[r];if(o.attributes)for(const e in o.attributes)e in n||(n[e]=o.attributes[e]);o.attributes=n}}))))),t}throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("scenelayer:no-attribute-source","This scene layer does not have a source for attributes available")}function q({globalIdField:e},t,r,o){const n=new Map,i=[],s=o();for(const a of t){const t=a.attributes?.[r],o=null==t?a.getGlobalId():void 0;for(let r=0;r<s.length;r++){const l=s[r],c=F(l,t,e,o);if(c<0)continue;let u=n.get(l.node);u||(u={node:l.node,indices:[],graphics:[]},i.push(u),n.set(l.node,u)),u.indices.push(c),u.graphics.push(a);for(let e=r;e>0;e--)s[e]=s[e-1];s[0]=l;break}}return i}function F(e,t,r,o){if(null!=t&&"number"==typeof t)return e.featureIds.indexOf(t);if(null==o||null==r)return-1;const n=e.attributeInfo?.attributeData?.[r];return n?n.indexOf(o):-1}async function G(e,t,r,o){const n=[],i={hasMismatchedCasing:!1,originalFields:n},s=K(r,e.fieldsIndex,i),a=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__["default"]({outFields:[...s]});if(await (0,_layers_support_featurePopupQueryUtils_js__WEBPACK_IMPORTED_MODULE_13__.fetchFeaturePopupFeatures)(e,t,a,{updateSourceAttributes:!0,...o}),!i.hasMismatchedCasing)return t;for(let l=0;l<t.length;l++){const e=t[l];if(e.attributes)for(let t=0;t<n.length;t++){const r=n[t],o=s[t];o in e.attributes&&(e.attributes[r]=e.attributes[o],delete e.attributes[o])}}return t}function P(e,t,r,o,n,i,s,a){return B(e,t,r.resources.attributes,o,n,i,s,a)}async function B(t,r,o,n,i,s,a,l){const c=[];for(const e of r)if(e&&i.includes(e.name)){const r=`${t}/nodes/${o}/attributes/${e.key}/0`;c.push({url:r,storageInfo:e})}const u=await Promise.allSettled(c.map((t=>(0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t.url,{responseType:"array-buffer",query:{...a,token:s},signal:l?.signal}).then((e=>(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_15__.readBinaryAttribute)(t.storageInfo,e.data)))))),f=[];for(const e of n){const t={};for(let r=0;r<u.length;r++){const o=u[r];if("fulfilled"===o.status){const n=o.value;t[c[r].storageInfo.name]=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_15__.getCachedAttributeValue)(n,e)}}f.push(t)}return f}function V(e){const t=e.store,o=t.indexCRS||t.geographicCRS,n=void 0===o?t.indexWKT:void 0;if(n){if(!e.spatialReference)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("layerview:no-store-spatial-reference-wkt-index-and-no-layer-spatial-reference","Found indexWKT in the scene layer store but no layer spatial reference",{});if(n!==e.spatialReference.wkt)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("layerview:store-spatial-reference-wkt-index-incompatible","The indexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const i=o?new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_9__["default"](C(o)):e.spatialReference;return i.equals(e.spatialReference)?e.spatialReference:i}function $(e){const t=e.store,o=t.vertexCRS||t.projectedCRS,n=void 0===o?t.vertexWKT:void 0;if(n){if(!e.spatialReference)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("layerview:no-store-spatial-reference-wkt-vertex-and-no-layer-spatial-reference","Found vertexWKT in the scene layer store but no layer spatial reference",{});if(n!==e.spatialReference.wkt)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("layerview:store-spatial-reference-wkt-vertex-incompatible","The vertexWKT of the scene layer store does not match the WKT of the layer spatial reference",{})}const i=o?new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_9__["default"](C(o)):e.spatialReference;return i.equals(e.spatialReference)?e.spatialReference:i}function z(e,t,r){if(!(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_8__.canProjectWithoutEngine)(e,t))throw (0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_20__.spatialReferenceIncompatibleError)("scene layer",e?.wkid,t?.wkid);if("local"===r&&!Z(e,t))throw (0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_20__.spatialReferenceIncompatibleError)("scene layer",e?.wkid,t?.wkid)}function Q(e,t,o){if(e.serviceUpdateTimeStamp?.lastUpdate!==t.serviceUpdateTimeStamp?.lastUpdate||!o.isEmpty||e.associatedLayer?.url!==t.associatedLayer?.url)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("layerview:recycle-failed","Could not recycle layerview")}function Z(e,t){return e.equals(t)||e.isWGS84&&t.isWebMercator||e.isWebMercator&&t.isWGS84}function H(e,t,r){const o=V(e),n=$(e);z(o,t,r),z(n,t,r)}function J(e){return(null==e.geometryType||"triangles"===e.geometryType)&&((null==e.topology||"PerAttributeArray"===e.topology)&&null!=e.vertexAttributes?.position)}function X(e){if(null==e.store?.defaultGeometrySchema||!J(e.store.defaultGeometrySchema))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("scenelayer:unsupported-geometry-schema","The geometry schema of this scene layer is not supported.",{url:e.parsedUrl.path})}function Y(e,t){H(e,t.spatialReference,t.viewingMode)}function ee(e){return null!=e.geometryType&&"points"===e.geometryType&&((null==e.topology||"PerAttributeArray"===e.topology)&&((null==e.encoding||""===e.encoding||"lepcc-xyz"===e.encoding)&&null!=e.vertexAttributes?.position))}function te(e){if(null==e.store?.defaultGeometrySchema||!ee(e.store.defaultGeometrySchema))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("pointcloud:unsupported-geometry-schema","The geometry schema of this point cloud scene layer is not supported.",{})}function re(e,t){z(e.spatialReference,t.spatialReference,t.viewingMode)}function oe(e){return"simple"===e.type||"class-breaks"===e.type||"unique-value"===e.type}function ne(e){return"mesh-3d"===e.type}function ie(e){if(null==e||!oe(e))return!0;if(("unique-value"===e.type||"class-breaks"===e.type)&&null==e.defaultSymbol)return!0;const t=e.symbols;if(0===t.length)return!0;for(const r of t){if(!ne(r)||0===r.symbolLayers.length)return!0;for(const e of r.symbolLayers.items)if("fill"!==e.type||null==e.material?.color||"replace"!==e.material.colorMixMode)return!0}return!1}!function(e){e[e.OUTSIDE=0]="OUTSIDE",e[e.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",e[e.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",e[e.INSIDE=3]="INSIDE"}(_||(_={}));const se=(0,_support_edgeUtils_js__WEBPACK_IMPORTED_MODULE_17__.createSolidEdgeMaterial)({color:[0,0,0,0],opacity:0});class ae{constructor(){this.edgeMaterial=null,this.material=null,this.castShadows=!0}}function le(e){const t=new ae;let r=!1,o=!1;for(const n of e.symbolLayers.items)if("fill"===n.type&&n.enabled){const e=n.material,i=n.edges;if(null!=e&&!r){const o=e.color,i=(0,_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_18__.parseColorMixMode)(e.colorMixMode);t.material=null!=o?{color:[o.r/255,o.g/255,o.b/255],alpha:o.a,colorMixMode:i}:{color:[1,1,1],alpha:1,colorMixMode:_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_18__.ColorMixModeEnum.Multiply},t.castShadows=n.castShadows,r=!0}null==i||o||(t.edgeMaterial=(0,_support_edgeUtils_js__WEBPACK_IMPORTED_MODULE_17__.createMaterialFromEdges)(i,{}),o=!0)}return t.material||(t.material={color:[1,1,1],alpha:1,colorMixMode:_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_18__.ColorMixModeEnum.Multiply}),t}function ce(e,t){return(0|e)+(0|t)|0}function ue(e,t,r,n,l,c,u){if(!c||0===c.length||null==t||!e.serviceMbsInIndexSR)return null;const p=(0,_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_16__.computeGlobalTransformation)(e.serviceMbsInIndexSR,l,"none",r,t);(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__.invert)(be,p);let g=null;const S=()=>{if(!g)if(g=me,(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.empty)(he),null!=e.serviceObbInIndexSR){e.serviceObbInIndexSR.transform(ye,r,t,l,u),ye.getCorners(g);for(const e of g)(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.t)(e,e,be),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.expandPointInPlace)(he,e)}else{const o=e.serviceMbsInIndexSR;if(!o)return;const n=o[3];(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_10__.projectVectorToVector)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_12__.a)(o),r,ge,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.t)(ge,ge,be),ge[2]+=l;for(let e=0;e<8;++e){const t=1&e?n:-n,r=2&e?n:-n,o=4&e?n:-n,i=g[e];(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.c)(i,[ge[0]+t,ge[1]+r,ge[2]+o]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.expandPointInPlace)(he,i)}}};let b=1/0,w=-1/0;const T=e=>{if("replace"!==e.type)return;const r=e.geometry;if(!r?.hasZ)return;(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.empty)(de);const o=r.spatialReference||n,a=r.rings.reduce(((e,r)=>r.reduce(((e,r)=>((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.i)(ge,r[0],r[1],r[2]),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_10__.projectVectorToVector)(ge,o,ge,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.t)(ge,ge,be),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.expandPointInPlace)(de,ge),Math.min(ge[2],e))),e)),1/0);S(),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.intersects)(he,de)&&(b=Math.min(b,a),w=Math.max(w,a))};if(c.forEach((e=>T(e))),b===1/0)return null;const v=(e,t,r)=>{(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.t)(ge,r,p),e[t]=ge[0],e[t+1]=ge[1],e[t+2]=ge[2],t+=24,r[2]=b,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.t)(ge,r,p),e[t]=ge[0],e[t+1]=ge[1],e[t+2]=ge[2],t+=24,r[2]=w,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.t)(ge,r,p),e[t]=ge[0],e[t+1]=ge[1],e[t+2]=ge[2]};for(let o=0;o<8;++o)v(Se.data,3*o,g[o]);return (0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.compute)(Se)}function fe(e){return e[3]>=0}function pe(e){null!=e&&(e[3]=-1)}const me=[(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)()],de=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.create)(),he=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.create)(),ye=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.Obb,ge=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.create)(),Se={data:new Array(72),size:3,exclusive:!0,stride:3},be=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__.create)();


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfM2RfbGF5ZXJzX2kzc19JM1NVdGlsX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5TywwQkFBMEIsa0RBQWtELGdFQUFDLG9EQUFvRCw0REFBQyxDQUFDLFlBQVksV0FBVyxLQUFLLGFBQWEsa0JBQWtCLE9BQU8sU0FBUyxTQUFTLHdCQUF3Qix3RUFBd0Usb0JBQW9CLG1CQUFtQixxRUFBQyxnREFBZ0QsZUFBZSx3QkFBd0IsWUFBWSxTQUFTLGtCQUFrQixFQUFFLFNBQVMsd0JBQXdCLFlBQVksU0FBUyxrQkFBa0IsRUFBRSxVQUFVLE9BQU8scUVBQXFFLHFCQUFxQixvRUFBb0UsYUFBYSxrQkFBa0IsdUtBQXVLLCtCQUErQixFQUFFLGlEQUFpRCxzQkFBc0Isa0JBQWtCLE9BQU8sNkJBQTZCLFFBQVEsb0RBQUMsWUFBWSxHQUFHLE1BQU0sY0FBYyxFQUFFLGVBQWUsWUFBWSwrQkFBK0IsRUFBRSxzQ0FBc0MsVUFBVSxxQkFBcUIsU0FBUyxtQ0FBbUMsMkJBQTJCLHdEQUF3RCxvQkFBb0IsaUJBQWlCLGVBQWUsTUFBTSxrQkFBa0IsR0FBRyxvQkFBb0Isa0JBQWtCLHNFQUFzRSxNQUFNLG9CQUFvQixHQUFHLGtDQUFrQyxPQUFPLHlCQUF5QixvQkFBb0IsMEdBQTBHLGtFQUFDLEdBQTZFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p6akU7QUFDQTtBQUNBO0FBQ0E7QUFDMlgsc0JBQXNCLDRCQUE0QixrRkFBQyxlQUFlLG1GQUFDLEdBQUcsT0FBTyxvSUFBQyxZQUFZLGdCQUFnQixrQkFBa0IsUUFBUSxtRkFBQyx5REFBeUQsbUJBQW1CLFVBQVUsa0ZBQUMsZ0pBQWdKLGNBQWMsS0FBSyxnREFBZ0Qsa0JBQWtCLGlDQUFpQyxrQkFBK0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Syw4QkFBOEIsYUFBYSxhQUFhLHFHQUFDLENBQUMscURBQUMsWUFBWSxtREFBQyxvQkFBb0IsWUFBWSxJQUFJLEtBQUssOENBQThDLG1EQUFDLDhCQUE4Qix3RkFBQyxVQUFVLGlCQUFpQixZQUFZLDZCQUE2QixtQkFBbUIsbUJBQW1CLDJFQUFDLEtBQUsseUVBQXlFLG1EQUFDLG9CQUFvQixxR0FBQyxZQUFZLG1EQUFDLFdBQVcsd0ZBQUMscUNBQXFDLElBQUksZ0ZBQUMsNENBQTRDLDRDQUE0QyxrQkFBa0IsbURBQUMsMkRBQTJELG1EQUFDLDJEQUEyRCxtREFBQywrQ0FBK0MsWUFBWSxJQUFJLHdCQUF3QixPQUFPLHlFQUFDLEtBQUssZUFBZSxlQUFlLGVBQWUsbUJBQW1CLFVBQVUsbUZBQUMsR0FBRyxtRkFBQyxHQUFHLG1GQUFDLEdBQUcsbUZBQUMsR0FBRyxtRkFBQyxHQUFHLG1GQUFDLEdBQUcsbUZBQUMsR0FBRyxtRkFBQyxPQUFPLDRFQUFDLE1BQU0sNEVBQUMsVUFBVSxpRUFBQyxJQUFJLG1GQUFDLE9BQU8sZ0RBQWdELElBQUksbUZBQUMsR0FBcXZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L2ZlYXR1cmVQb3B1cFF1ZXJ5VXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTUHJvamVjdGlvblV0aWwuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTVXRpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIGV9ZnJvbVwiLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7c3FsQW5kIGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9zcWwuanNcIjtpbXBvcnR7dW5wYWNrRmllbGROYW1lcyBhcyBvLGZlYXR1cmVIYXNGaWVsZHMgYXMgaX1mcm9tXCIuL2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBufWZyb21cIi4uLy4uL3N1cHBvcnQvbG9hZEFyY2FkZS5qc1wiO2FzeW5jIGZ1bmN0aW9uIHMobixzLGwsdSl7Y29uc3QgYz1uZXcgQXJyYXkocy5sZW5ndGgpLGE9bmV3IE1hcCxkPW5ldyBNYXAscD1vKG4uZmllbGRzSW5kZXgsbC5vdXRGaWVsZHMpLGY9dT8uaGFzUmVxdWlyZWRGaWVsZHM/P2k7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe2NvbnN0IG89c1t0XTtpZihvLmlzQWdncmVnYXRlKXtjW3RdPW87Y29udGludWV9bGV0IGk9ITE7aWYodT8uZ2V0UG9wdXBUZW1wbGF0ZSl7Y29uc3QgdD1vLm9yaWdpbj8ubGF5ZXI/P28uc291cmNlTGF5ZXI/P28ubGF5ZXIsbj11LmdldFBvcHVwVGVtcGxhdGUodCk7aWYobnVsbD09biljb250aW51ZTtjb25zdCBzPWF3YWl0IHIobik7ZSh1KSxpPXMmJnMuYXJjYWRlVXRpbHMuaGFzR2VvbWV0cnlPcGVyYXRpb25zKG4pfWlmKGl8fCFmKG8scCkpe2NvbnN0IGU9by5nZXRPYmplY3RJZCgpO2lmKG51bGwhPWUpe2Euc2V0KGUse2dyYXBoaWM6byxpbmRleDp0fSk7Y29udGludWV9Y29uc3QgaT1vLmdldEdsb2JhbElkKCk7aWYobnVsbCE9aSl7ZC5zZXQoaSx7Z3JhcGhpYzpvLGluZGV4OnR9KTtjb250aW51ZX19Y1t0XT1vfWlmKCFuLnF1ZXJ5RmVhdHVyZXN8fDA9PT1hLnNpemUmJjA9PT1kLnNpemUpcmV0dXJuIGMuZmlsdGVyKEJvb2xlYW4pO2NvbnN0IGc9W10seT0oZSx0KT0+e3QmJihlLm91dEZpZWxkcz8/PVtdLGUub3V0RmllbGRzLmluY2x1ZGVzKHQpfHxlLm91dEZpZWxkcy5wdXNoKHQpKX07aWYoYS5zaXplPjApe2NvbnN0IGU9bC5jbG9uZSgpO3koZSxuLm9iamVjdElkRmllbGQpLFwidW5pcXVlSWRGaWVsZHNcImluIG4mJm4udW5pcXVlSWRGaWVsZHM/Lmxlbmd0aCYmKGUub3V0RmllbGRzPz89W10sZS5vdXRGaWVsZHMucHVzaCguLi5uLnVuaXF1ZUlkRmllbGRzKSksZS5vYmplY3RJZHM9QXJyYXkuZnJvbShhLmtleXMoKSksZy5wdXNoKHt0eXBlOlwib2JqZWN0LWlkXCIscXVlcnk6ZSxtYXA6YX0pfWNvbnN0IG09XCJnbG9iYWxJZEZpZWxkXCJpbiBuP24uZ2xvYmFsSWRGaWVsZDpudWxsO2lmKG51bGwhPW0mJmQuc2l6ZT4wKXtjb25zdCBlPWwuY2xvbmUoKTt5KGUsbSk7Y29uc3Qgbz1BcnJheS5mcm9tKGQua2V5cygpKTtlLndoZXJlPXQobC53aGVyZSxgJHttfSBJTiAoJHtvLm1hcCgoZT0+YCcke2V9J2ApKS5qb2luKFwiLFwiKX0pYCksZy5wdXNoKHt0eXBlOlwiZ2xvYmFsLWlkXCIscXVlcnk6ZSxtYXA6ZH0pfWNvbnN0IGI9dT8udXBkYXRlU291cmNlQXR0cmlidXRlcz8/ITE7Zm9yKGNvbnN0e3R5cGU6ZSxxdWVyeTp0LG1hcDpvfW9mIGcpdHJ5e2NvbnN0IGk9YXdhaXQgbi5xdWVyeUZlYXR1cmVzKHQsdSk7Zm9yKGNvbnN0IHQgb2YgaS5mZWF0dXJlcyl7Y29uc3QgaT1cIm9iamVjdC1pZFwiPT09ZT90LmdldE9iamVjdElkKCk6dC5nZXRHbG9iYWxJZCgpO2lmKG51bGw9PWkpY29udGludWU7Y29uc3Qgbj1vLmdldChpKTtpZighbiljb250aW51ZTtjb25zdHtncmFwaGljOnMsaW5kZXg6cn09bjtpZihiJiZ0LmF0dHJpYnV0ZXMpe3MuYXR0cmlidXRlcz8/PXt9O2Zvcihjb25zdCBlIG9mIHApZSBpbiB0LmF0dHJpYnV0ZXMmJihzLmF0dHJpYnV0ZXNbZV09dC5hdHRyaWJ1dGVzW2VdKX1jb25zdHtnZW9tZXRyeTpsLG9yaWdpbjp1fT1zO3QuZ2VvbWV0cnl8fD1sLHQub3JpZ2luPXUsY1tyXT10fX1jYXRjaHt9cmV0dXJuIGMuZmlsdGVyKEJvb2xlYW4pfWFzeW5jIGZ1bmN0aW9uIHIoZSl7aWYoZS5leHByZXNzaW9uSW5mb3M/Lmxlbmd0aHx8QXJyYXkuaXNBcnJheShlLmNvbnRlbnQpJiZlLmNvbnRlbnQuc29tZSgoZT0+XCJleHByZXNzaW9uXCI9PT1lLnR5cGUpKSlyZXR1cm4gbigpfWV4cG9ydHtzIGFzIGZldGNoRmVhdHVyZVBvcHVwRmVhdHVyZXMsciBhcyBsb2FkRmVhdHVyZVBvcHVwQXJjYWRlTW9kdWxlc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvbWF0NGY2NC5qc1wiO2ltcG9ydHtjbG9uZSBhcyBvLGNyZWF0ZSBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjM2Y2NC5qc1wiO2ltcG9ydHtnZXRSZWZlcmVuY2VFbGxpcHNvaWQgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9lbGxpcHNvaWRVdGlscy5qc1wiO2ltcG9ydHtjb21wdXRlVHJhbnNsYXRpb25Ub09yaWdpbkFuZFJvdGF0aW9uIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9jb21wdXRlVHJhbnNsYXRpb25Ub09yaWdpbkFuZFJvdGF0aW9uLmpzXCI7ZnVuY3Rpb24gbihyLGEsbixzLGUpe2NvbnN0IGg9XCJlYXN0LW5vcnRoLXVwXCI9PT1uP28ocik6YyhyLGEscyksbT10KCk7cmV0dXJuIGkocyxoLG0sZSksbX1jb25zdCBzPTEsZT01LXM7ZnVuY3Rpb24gYyh0LG8saSl7Y29uc3Qgbj1yKCksYz10WzNdLGg9MioqKE1hdGguY2VpbChNYXRoLmxvZyhjKSpNYXRoLkxPRzJFL2UpKmUrcyk7aWYoaS5pc0dlb2dyYXBoaWMpe2NvbnN0IG89aC9hKGkpLnJhZGl1cyoxODAvTWF0aC5QSSxyPU1hdGgucm91bmQodFsxXS9vKSxzPU1hdGgubWF4KC05MCxNYXRoLm1pbig5MCxyKm8pKSxlPW8vTWF0aC5jb3MoKE1hdGguYWJzKHMpLW8vMikvMTgwKk1hdGguUEkpLGM9TWF0aC5yb3VuZCh0WzBdL2UpKmU7blswXT1jLG5bMV09c31lbHNle2NvbnN0IG89TWF0aC5yb3VuZCh0WzBdL2gpLHI9TWF0aC5yb3VuZCh0WzFdL2gpO25bMF09bypoLG5bMV09cipofWNvbnN0IG09dFsyXStvLE09TWF0aC5yb3VuZChtL2gpO3JldHVybiBuWzJdPU0qaCxufWV4cG9ydHtuIGFzIGNvbXB1dGVHbG9iYWxUcmFuc2Zvcm1hdGlvbixjIGFzIGdldExvY2FsT3JpZ2lufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0e2JpbmFyeUluZGV4T2YgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtpbnZlcnQgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvbWF0aC9tYXQ0LmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvbWF0NGY2NC5qc1wiO2ltcG9ydHtpLHQgYXMgcyxjIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzMyLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjM2Y2NC5qc1wiO2ltcG9ydHtjYW5Qcm9qZWN0V2l0aG91dEVuZ2luZSBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb25VdGlscy5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtpbXBvcnR7cHJvamVjdFZlY3RvclRvVmVjdG9yIGFzIGZ9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0VmVjdG9yVG9WZWN0b3IuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIHAsZW1wdHkgYXMgbSxleHBhbmRQb2ludEluUGxhY2UgYXMgZCxpbnRlcnNlY3RzIGFzIGh9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHthIGFzIHl9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3NwaGVyZS5qc1wiO2ltcG9ydHtmZXRjaEZlYXR1cmVQb3B1cEZlYXR1cmVzIGFzIGd9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmVhdHVyZVBvcHVwUXVlcnlVdGlscy5qc1wiO2ltcG9ydCBTIGZyb21cIi4uLy4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2ltcG9ydHtyZWFkQmluYXJ5QXR0cmlidXRlIGFzIGIsZ2V0Q2FjaGVkQXR0cmlidXRlVmFsdWUgYXMgd31mcm9tXCIuL0kzU0JpbmFyeVJlYWRlci5qc1wiO2ltcG9ydHtjb21wdXRlR2xvYmFsVHJhbnNmb3JtYXRpb24gYXMgSX1mcm9tXCIuL0kzU1Byb2plY3Rpb25VdGlsLmpzXCI7aW1wb3J0e2NyZWF0ZVNvbGlkRWRnZU1hdGVyaWFsIGFzIFQsY3JlYXRlTWF0ZXJpYWxGcm9tRWRnZXMgYXMgdn1mcm9tXCIuLi9zdXBwb3J0L2VkZ2VVdGlscy5qc1wiO2ltcG9ydHtwYXJzZUNvbG9yTWl4TW9kZSBhcyB4LENvbG9yTWl4TW9kZUVudW0gYXMgRX1mcm9tXCIuLi9zdXBwb3J0L3N5bWJvbENvbG9yVXRpbHMuanNcIjtpbXBvcnR7T2JiIGFzIFIsY29tcHV0ZSBhcyBNfWZyb21cIi4uLy4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtzcGF0aWFsUmVmZXJlbmNlSW5jb21wYXRpYmxlRXJyb3IgYXMgan1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2xheWVyVmlld1V0aWxzLmpzXCI7ZnVuY3Rpb24gQyhlKXtyZXR1cm4gZT9wYXJzZUludChlLnNsaWNlKGUubGFzdEluZGV4T2YoXCIvXCIpKzEpLDEwKTp2b2lkIDB9ZnVuY3Rpb24gVShlKXtpZihoYXMoXCJkaXNhYmxlLWZlYXR1cmU6aTNzLWRyYWNvXCIpfHwhZSlyZXR1cm4hMTtmb3IoY29uc3QgdCBvZiBlKWZvcihjb25zdCBlIG9mIHQuZ2VvbWV0cnlCdWZmZXJzKWlmKFwiZHJhY29cIj09PWUuY29tcHJlc3NlZEF0dHJpYnV0ZXM/LmVuY29kaW5nKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIE4oZSx0LHIsbyl7ci50cmF2ZXJzZSh0LCh0PT57Y29uc3Qgcj10LnNlcnZpY2VNYnNJbkluZGV4U1I7cmV0dXJuKG51bGwhPXImJkEoZSxyKSkhPT1fLk9VVFNJREUmJihvKHQpLCEwKX0pKX1mdW5jdGlvbiBrKGUsdCxyKXtsZXQgbz0wLG49MDtmb3IobGV0IGk9MDtpPHQubGVuZ3RoJiZvPGUubGVuZ3RoO2krKyllW29dPT09dFtpXSYmKHIoaSkmJihlW25dPWVbb10sbisrKSxvKyspO2UubGVuZ3RoPW59ZnVuY3Rpb24gRChlLHIsbyl7bGV0IG49MCxpPTA7Zm9yKDtuPG8ubGVuZ3RoOyl7dChlLG9bbl0pPj0wPT09ciYmKG9baV09b1tuXSxpKyspLG4rK31vLmxlbmd0aD1pfWZ1bmN0aW9uIE8oZSx0KXtpZigwPT09dC5yb3RhdGlvblNjYWxlWzFdJiYwPT09dC5yb3RhdGlvblNjYWxlWzJdJiYwPT09dC5yb3RhdGlvblNjYWxlWzNdJiYwPT09dC5yb3RhdGlvblNjYWxlWzVdJiYwPT09dC5yb3RhdGlvblNjYWxlWzZdJiYwPT09dC5yb3RhdGlvblNjYWxlWzddKXJldHVybiBXWzBdPShlWzBdLXQucG9zaXRpb25bMF0pL3Qucm90YXRpb25TY2FsZVswXSxXWzFdPShlWzFdLXQucG9zaXRpb25bMV0pL3Qucm90YXRpb25TY2FsZVs0XSxXWzJdPShlWzJdLXQucG9zaXRpb25bMF0pL3Qucm90YXRpb25TY2FsZVswXSxXWzNdPShlWzNdLXQucG9zaXRpb25bMV0pL3Qucm90YXRpb25TY2FsZVs0XSxXfWNvbnN0IFc9cCgpO3ZhciBfO2Z1bmN0aW9uIEEoZSx0KXtjb25zdCByPXRbMF0sbz10WzFdLG49dFszXSxpPWVbMF0tcixzPXItZVsyXSxhPWVbMV0tbyxsPW8tZVszXSxjPU1hdGgubWF4KGkscywwKSx1PU1hdGgubWF4KGEsbCwwKSxmPWMqYyt1KnU7aWYoZj5uKm4pcmV0dXJuIF8uT1VUU0lERTtpZihmPjApcmV0dXJuIF8uSU5URVJTRUNUU19DRU5URVJfT1VUU0lERTtyZXR1cm4tTWF0aC5tYXgoaSxzLGEsbCk+bj9fLklOU0lERTpfLklOVEVSU0VDVFNfQ0VOVEVSX0lOU0lERX1mdW5jdGlvbiBLKGUsdCxyKXtjb25zdCBvPVtdLG49cj8ubWlzc2luZ0ZpZWxkcyxpPXI/Lm9yaWdpbmFsRmllbGRzO2xldCBzPSExO2Zvcihjb25zdCBhIG9mIGUpe2NvbnN0IGU9dC5nZXQoYSk7ZT8oaT8ucHVzaChhKSxvLnB1c2goZS5uYW1lKSxhIT09ZS5uYW1lJiYocz0hMCkpOm4/LnB1c2goYSl9cmV0dXJuIHImJlwiaGFzTWlzbWF0Y2hlZENhc2luZ1wiaW4gciYmKHIuaGFzTWlzbWF0Y2hlZENhc2luZz1zKSxvfWFzeW5jIGZ1bmN0aW9uIEwoZSx0LG8sbixpLHMpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm5bXTtjb25zdCBhPWUuYXR0cmlidXRlU3RvcmFnZUluZm87aWYobnVsbCE9ZS5hc3NvY2lhdGVkTGF5ZXIpdHJ5e3JldHVybiBhd2FpdCBHKGUuYXNzb2NpYXRlZExheWVyLHQsbixzKX1jYXRjaChsKXtpZihlLmFzc29jaWF0ZWRMYXllci5sb2FkZWQpdGhyb3cgbH1pZihhKXtjb25zdCByPXEoZSx0LG8saSksbD1lLnBhcnNlZFVybC5wYXRoO3JldHVybiBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoci5tYXAoKHQ9PlAobCxhLHQubm9kZSx0LmluZGljZXMsbixlLmFwaUtleSxlLmN1c3RvbVBhcmFtZXRlcnMscykudGhlbigoZT0+e2ZvcihsZXQgcj0wO3I8dC5ncmFwaGljcy5sZW5ndGg7cisrKXtjb25zdCBvPXQuZ3JhcGhpY3Nbcl0sbj1lW3JdO2lmKG8uYXR0cmlidXRlcylmb3IoY29uc3QgZSBpbiBvLmF0dHJpYnV0ZXMpZSBpbiBufHwobltlXT1vLmF0dHJpYnV0ZXNbZV0pO28uYXR0cmlidXRlcz1ufX0pKSkpKSx0fXRocm93IG5ldyByKFwic2NlbmVsYXllcjpuby1hdHRyaWJ1dGUtc291cmNlXCIsXCJUaGlzIHNjZW5lIGxheWVyIGRvZXMgbm90IGhhdmUgYSBzb3VyY2UgZm9yIGF0dHJpYnV0ZXMgYXZhaWxhYmxlXCIpfWZ1bmN0aW9uIHEoe2dsb2JhbElkRmllbGQ6ZX0sdCxyLG8pe2NvbnN0IG49bmV3IE1hcCxpPVtdLHM9bygpO2Zvcihjb25zdCBhIG9mIHQpe2NvbnN0IHQ9YS5hdHRyaWJ1dGVzPy5bcl0sbz1udWxsPT10P2EuZ2V0R2xvYmFsSWQoKTp2b2lkIDA7Zm9yKGxldCByPTA7cjxzLmxlbmd0aDtyKyspe2NvbnN0IGw9c1tyXSxjPUYobCx0LGUsbyk7aWYoYzwwKWNvbnRpbnVlO2xldCB1PW4uZ2V0KGwubm9kZSk7dXx8KHU9e25vZGU6bC5ub2RlLGluZGljZXM6W10sZ3JhcGhpY3M6W119LGkucHVzaCh1KSxuLnNldChsLm5vZGUsdSkpLHUuaW5kaWNlcy5wdXNoKGMpLHUuZ3JhcGhpY3MucHVzaChhKTtmb3IobGV0IGU9cjtlPjA7ZS0tKXNbZV09c1tlLTFdO3NbMF09bDticmVha319cmV0dXJuIGl9ZnVuY3Rpb24gRihlLHQscixvKXtpZihudWxsIT10JiZcIm51bWJlclwiPT10eXBlb2YgdClyZXR1cm4gZS5mZWF0dXJlSWRzLmluZGV4T2YodCk7aWYobnVsbD09b3x8bnVsbD09cilyZXR1cm4tMTtjb25zdCBuPWUuYXR0cmlidXRlSW5mbz8uYXR0cmlidXRlRGF0YT8uW3JdO3JldHVybiBuP24uaW5kZXhPZihvKTotMX1hc3luYyBmdW5jdGlvbiBHKGUsdCxyLG8pe2NvbnN0IG49W10saT17aGFzTWlzbWF0Y2hlZENhc2luZzohMSxvcmlnaW5hbEZpZWxkczpufSxzPUsocixlLmZpZWxkc0luZGV4LGkpLGE9bmV3IFMoe291dEZpZWxkczpbLi4uc119KTtpZihhd2FpdCBnKGUsdCxhLHt1cGRhdGVTb3VyY2VBdHRyaWJ1dGVzOiEwLC4uLm99KSwhaS5oYXNNaXNtYXRjaGVkQ2FzaW5nKXJldHVybiB0O2ZvcihsZXQgbD0wO2w8dC5sZW5ndGg7bCsrKXtjb25zdCBlPXRbbF07aWYoZS5hdHRyaWJ1dGVzKWZvcihsZXQgdD0wO3Q8bi5sZW5ndGg7dCsrKXtjb25zdCByPW5bdF0sbz1zW3RdO28gaW4gZS5hdHRyaWJ1dGVzJiYoZS5hdHRyaWJ1dGVzW3JdPWUuYXR0cmlidXRlc1tvXSxkZWxldGUgZS5hdHRyaWJ1dGVzW29dKX19cmV0dXJuIHR9ZnVuY3Rpb24gUChlLHQscixvLG4saSxzLGEpe3JldHVybiBCKGUsdCxyLnJlc291cmNlcy5hdHRyaWJ1dGVzLG8sbixpLHMsYSl9YXN5bmMgZnVuY3Rpb24gQih0LHIsbyxuLGkscyxhLGwpe2NvbnN0IGM9W107Zm9yKGNvbnN0IGUgb2YgcilpZihlJiZpLmluY2x1ZGVzKGUubmFtZSkpe2NvbnN0IHI9YCR7dH0vbm9kZXMvJHtvfS9hdHRyaWJ1dGVzLyR7ZS5rZXl9LzBgO2MucHVzaCh7dXJsOnIsc3RvcmFnZUluZm86ZX0pfWNvbnN0IHU9YXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGMubWFwKCh0PT5lKHQudXJsLHtyZXNwb25zZVR5cGU6XCJhcnJheS1idWZmZXJcIixxdWVyeTp7Li4uYSx0b2tlbjpzfSxzaWduYWw6bD8uc2lnbmFsfSkudGhlbigoZT0+Yih0LnN0b3JhZ2VJbmZvLGUuZGF0YSkpKSkpKSxmPVtdO2Zvcihjb25zdCBlIG9mIG4pe2NvbnN0IHQ9e307Zm9yKGxldCByPTA7cjx1Lmxlbmd0aDtyKyspe2NvbnN0IG89dVtyXTtpZihcImZ1bGZpbGxlZFwiPT09by5zdGF0dXMpe2NvbnN0IG49by52YWx1ZTt0W2Nbcl0uc3RvcmFnZUluZm8ubmFtZV09dyhuLGUpfX1mLnB1c2godCl9cmV0dXJuIGZ9ZnVuY3Rpb24gVihlKXtjb25zdCB0PWUuc3RvcmUsbz10LmluZGV4Q1JTfHx0Lmdlb2dyYXBoaWNDUlMsbj12b2lkIDA9PT1vP3QuaW5kZXhXS1Q6dm9pZCAwO2lmKG4pe2lmKCFlLnNwYXRpYWxSZWZlcmVuY2UpdGhyb3cgbmV3IHIoXCJsYXllcnZpZXc6bm8tc3RvcmUtc3BhdGlhbC1yZWZlcmVuY2Utd2t0LWluZGV4LWFuZC1uby1sYXllci1zcGF0aWFsLXJlZmVyZW5jZVwiLFwiRm91bmQgaW5kZXhXS1QgaW4gdGhlIHNjZW5lIGxheWVyIHN0b3JlIGJ1dCBubyBsYXllciBzcGF0aWFsIHJlZmVyZW5jZVwiLHt9KTtpZihuIT09ZS5zcGF0aWFsUmVmZXJlbmNlLndrdCl0aHJvdyBuZXcgcihcImxheWVydmlldzpzdG9yZS1zcGF0aWFsLXJlZmVyZW5jZS13a3QtaW5kZXgtaW5jb21wYXRpYmxlXCIsXCJUaGUgaW5kZXhXS1Qgb2YgdGhlIHNjZW5lIGxheWVyIHN0b3JlIGRvZXMgbm90IG1hdGNoIHRoZSBXS1Qgb2YgdGhlIGxheWVyIHNwYXRpYWwgcmVmZXJlbmNlXCIse30pfWNvbnN0IGk9bz9uZXcgdShDKG8pKTplLnNwYXRpYWxSZWZlcmVuY2U7cmV0dXJuIGkuZXF1YWxzKGUuc3BhdGlhbFJlZmVyZW5jZSk/ZS5zcGF0aWFsUmVmZXJlbmNlOml9ZnVuY3Rpb24gJChlKXtjb25zdCB0PWUuc3RvcmUsbz10LnZlcnRleENSU3x8dC5wcm9qZWN0ZWRDUlMsbj12b2lkIDA9PT1vP3QudmVydGV4V0tUOnZvaWQgMDtpZihuKXtpZighZS5zcGF0aWFsUmVmZXJlbmNlKXRocm93IG5ldyByKFwibGF5ZXJ2aWV3Om5vLXN0b3JlLXNwYXRpYWwtcmVmZXJlbmNlLXdrdC12ZXJ0ZXgtYW5kLW5vLWxheWVyLXNwYXRpYWwtcmVmZXJlbmNlXCIsXCJGb3VuZCB2ZXJ0ZXhXS1QgaW4gdGhlIHNjZW5lIGxheWVyIHN0b3JlIGJ1dCBubyBsYXllciBzcGF0aWFsIHJlZmVyZW5jZVwiLHt9KTtpZihuIT09ZS5zcGF0aWFsUmVmZXJlbmNlLndrdCl0aHJvdyBuZXcgcihcImxheWVydmlldzpzdG9yZS1zcGF0aWFsLXJlZmVyZW5jZS13a3QtdmVydGV4LWluY29tcGF0aWJsZVwiLFwiVGhlIHZlcnRleFdLVCBvZiB0aGUgc2NlbmUgbGF5ZXIgc3RvcmUgZG9lcyBub3QgbWF0Y2ggdGhlIFdLVCBvZiB0aGUgbGF5ZXIgc3BhdGlhbCByZWZlcmVuY2VcIix7fSl9Y29uc3QgaT1vP25ldyB1KEMobykpOmUuc3BhdGlhbFJlZmVyZW5jZTtyZXR1cm4gaS5lcXVhbHMoZS5zcGF0aWFsUmVmZXJlbmNlKT9lLnNwYXRpYWxSZWZlcmVuY2U6aX1mdW5jdGlvbiB6KGUsdCxyKXtpZighYyhlLHQpKXRocm93IGooXCJzY2VuZSBsYXllclwiLGU/LndraWQsdD8ud2tpZCk7aWYoXCJsb2NhbFwiPT09ciYmIVooZSx0KSl0aHJvdyBqKFwic2NlbmUgbGF5ZXJcIixlPy53a2lkLHQ/LndraWQpfWZ1bmN0aW9uIFEoZSx0LG8pe2lmKGUuc2VydmljZVVwZGF0ZVRpbWVTdGFtcD8ubGFzdFVwZGF0ZSE9PXQuc2VydmljZVVwZGF0ZVRpbWVTdGFtcD8ubGFzdFVwZGF0ZXx8IW8uaXNFbXB0eXx8ZS5hc3NvY2lhdGVkTGF5ZXI/LnVybCE9PXQuYXNzb2NpYXRlZExheWVyPy51cmwpdGhyb3cgbmV3IHIoXCJsYXllcnZpZXc6cmVjeWNsZS1mYWlsZWRcIixcIkNvdWxkIG5vdCByZWN5Y2xlIGxheWVydmlld1wiKX1mdW5jdGlvbiBaKGUsdCl7cmV0dXJuIGUuZXF1YWxzKHQpfHxlLmlzV0dTODQmJnQuaXNXZWJNZXJjYXRvcnx8ZS5pc1dlYk1lcmNhdG9yJiZ0LmlzV0dTODR9ZnVuY3Rpb24gSChlLHQscil7Y29uc3Qgbz1WKGUpLG49JChlKTt6KG8sdCxyKSx6KG4sdCxyKX1mdW5jdGlvbiBKKGUpe3JldHVybihudWxsPT1lLmdlb21ldHJ5VHlwZXx8XCJ0cmlhbmdsZXNcIj09PWUuZ2VvbWV0cnlUeXBlKSYmKChudWxsPT1lLnRvcG9sb2d5fHxcIlBlckF0dHJpYnV0ZUFycmF5XCI9PT1lLnRvcG9sb2d5KSYmbnVsbCE9ZS52ZXJ0ZXhBdHRyaWJ1dGVzPy5wb3NpdGlvbil9ZnVuY3Rpb24gWChlKXtpZihudWxsPT1lLnN0b3JlPy5kZWZhdWx0R2VvbWV0cnlTY2hlbWF8fCFKKGUuc3RvcmUuZGVmYXVsdEdlb21ldHJ5U2NoZW1hKSl0aHJvdyBuZXcgcihcInNjZW5lbGF5ZXI6dW5zdXBwb3J0ZWQtZ2VvbWV0cnktc2NoZW1hXCIsXCJUaGUgZ2VvbWV0cnkgc2NoZW1hIG9mIHRoaXMgc2NlbmUgbGF5ZXIgaXMgbm90IHN1cHBvcnRlZC5cIix7dXJsOmUucGFyc2VkVXJsLnBhdGh9KX1mdW5jdGlvbiBZKGUsdCl7SChlLHQuc3BhdGlhbFJlZmVyZW5jZSx0LnZpZXdpbmdNb2RlKX1mdW5jdGlvbiBlZShlKXtyZXR1cm4gbnVsbCE9ZS5nZW9tZXRyeVR5cGUmJlwicG9pbnRzXCI9PT1lLmdlb21ldHJ5VHlwZSYmKChudWxsPT1lLnRvcG9sb2d5fHxcIlBlckF0dHJpYnV0ZUFycmF5XCI9PT1lLnRvcG9sb2d5KSYmKChudWxsPT1lLmVuY29kaW5nfHxcIlwiPT09ZS5lbmNvZGluZ3x8XCJsZXBjYy14eXpcIj09PWUuZW5jb2RpbmcpJiZudWxsIT1lLnZlcnRleEF0dHJpYnV0ZXM/LnBvc2l0aW9uKSl9ZnVuY3Rpb24gdGUoZSl7aWYobnVsbD09ZS5zdG9yZT8uZGVmYXVsdEdlb21ldHJ5U2NoZW1hfHwhZWUoZS5zdG9yZS5kZWZhdWx0R2VvbWV0cnlTY2hlbWEpKXRocm93IG5ldyByKFwicG9pbnRjbG91ZDp1bnN1cHBvcnRlZC1nZW9tZXRyeS1zY2hlbWFcIixcIlRoZSBnZW9tZXRyeSBzY2hlbWEgb2YgdGhpcyBwb2ludCBjbG91ZCBzY2VuZSBsYXllciBpcyBub3Qgc3VwcG9ydGVkLlwiLHt9KX1mdW5jdGlvbiByZShlLHQpe3ooZS5zcGF0aWFsUmVmZXJlbmNlLHQuc3BhdGlhbFJlZmVyZW5jZSx0LnZpZXdpbmdNb2RlKX1mdW5jdGlvbiBvZShlKXtyZXR1cm5cInNpbXBsZVwiPT09ZS50eXBlfHxcImNsYXNzLWJyZWFrc1wiPT09ZS50eXBlfHxcInVuaXF1ZS12YWx1ZVwiPT09ZS50eXBlfWZ1bmN0aW9uIG5lKGUpe3JldHVyblwibWVzaC0zZFwiPT09ZS50eXBlfWZ1bmN0aW9uIGllKGUpe2lmKG51bGw9PWV8fCFvZShlKSlyZXR1cm4hMDtpZigoXCJ1bmlxdWUtdmFsdWVcIj09PWUudHlwZXx8XCJjbGFzcy1icmVha3NcIj09PWUudHlwZSkmJm51bGw9PWUuZGVmYXVsdFN5bWJvbClyZXR1cm4hMDtjb25zdCB0PWUuc3ltYm9scztpZigwPT09dC5sZW5ndGgpcmV0dXJuITA7Zm9yKGNvbnN0IHIgb2YgdCl7aWYoIW5lKHIpfHwwPT09ci5zeW1ib2xMYXllcnMubGVuZ3RoKXJldHVybiEwO2Zvcihjb25zdCBlIG9mIHIuc3ltYm9sTGF5ZXJzLml0ZW1zKWlmKFwiZmlsbFwiIT09ZS50eXBlfHxudWxsPT1lLm1hdGVyaWFsPy5jb2xvcnx8XCJyZXBsYWNlXCIhPT1lLm1hdGVyaWFsLmNvbG9yTWl4TW9kZSlyZXR1cm4hMH1yZXR1cm4hMX0hZnVuY3Rpb24oZSl7ZVtlLk9VVFNJREU9MF09XCJPVVRTSURFXCIsZVtlLklOVEVSU0VDVFNfQ0VOVEVSX09VVFNJREU9MV09XCJJTlRFUlNFQ1RTX0NFTlRFUl9PVVRTSURFXCIsZVtlLklOVEVSU0VDVFNfQ0VOVEVSX0lOU0lERT0yXT1cIklOVEVSU0VDVFNfQ0VOVEVSX0lOU0lERVwiLGVbZS5JTlNJREU9M109XCJJTlNJREVcIn0oX3x8KF89e30pKTtjb25zdCBzZT1UKHtjb2xvcjpbMCwwLDAsMF0sb3BhY2l0eTowfSk7Y2xhc3MgYWV7Y29uc3RydWN0b3IoKXt0aGlzLmVkZ2VNYXRlcmlhbD1udWxsLHRoaXMubWF0ZXJpYWw9bnVsbCx0aGlzLmNhc3RTaGFkb3dzPSEwfX1mdW5jdGlvbiBsZShlKXtjb25zdCB0PW5ldyBhZTtsZXQgcj0hMSxvPSExO2Zvcihjb25zdCBuIG9mIGUuc3ltYm9sTGF5ZXJzLml0ZW1zKWlmKFwiZmlsbFwiPT09bi50eXBlJiZuLmVuYWJsZWQpe2NvbnN0IGU9bi5tYXRlcmlhbCxpPW4uZWRnZXM7aWYobnVsbCE9ZSYmIXIpe2NvbnN0IG89ZS5jb2xvcixpPXgoZS5jb2xvck1peE1vZGUpO3QubWF0ZXJpYWw9bnVsbCE9bz97Y29sb3I6W28uci8yNTUsby5nLzI1NSxvLmIvMjU1XSxhbHBoYTpvLmEsY29sb3JNaXhNb2RlOml9Ontjb2xvcjpbMSwxLDFdLGFscGhhOjEsY29sb3JNaXhNb2RlOkUuTXVsdGlwbHl9LHQuY2FzdFNoYWRvd3M9bi5jYXN0U2hhZG93cyxyPSEwfW51bGw9PWl8fG98fCh0LmVkZ2VNYXRlcmlhbD12KGkse30pLG89ITApfXJldHVybiB0Lm1hdGVyaWFsfHwodC5tYXRlcmlhbD17Y29sb3I6WzEsMSwxXSxhbHBoYToxLGNvbG9yTWl4TW9kZTpFLk11bHRpcGx5fSksdH1mdW5jdGlvbiBjZShlLHQpe3JldHVybigwfGUpKygwfHQpfDB9ZnVuY3Rpb24gdWUoZSx0LHIsbixsLGMsdSl7aWYoIWN8fDA9PT1jLmxlbmd0aHx8bnVsbD09dHx8IWUuc2VydmljZU1ic0luSW5kZXhTUilyZXR1cm4gbnVsbDtjb25zdCBwPUkoZS5zZXJ2aWNlTWJzSW5JbmRleFNSLGwsXCJub25lXCIscix0KTtvKGJlLHApO2xldCBnPW51bGw7Y29uc3QgUz0oKT0+e2lmKCFnKWlmKGc9bWUsbShoZSksbnVsbCE9ZS5zZXJ2aWNlT2JiSW5JbmRleFNSKXtlLnNlcnZpY2VPYmJJbkluZGV4U1IudHJhbnNmb3JtKHllLHIsdCxsLHUpLHllLmdldENvcm5lcnMoZyk7Zm9yKGNvbnN0IGUgb2YgZylzKGUsZSxiZSksZChoZSxlKX1lbHNle2NvbnN0IG89ZS5zZXJ2aWNlTWJzSW5JbmRleFNSO2lmKCFvKXJldHVybjtjb25zdCBuPW9bM107Zih5KG8pLHIsZ2UsdCkscyhnZSxnZSxiZSksZ2VbMl0rPWw7Zm9yKGxldCBlPTA7ZTw4OysrZSl7Y29uc3QgdD0xJmU/bjotbixyPTImZT9uOi1uLG89NCZlP246LW4saT1nW2VdO2EoaSxbZ2VbMF0rdCxnZVsxXStyLGdlWzJdK29dKSxkKGhlLGkpfX19O2xldCBiPTEvMCx3PS0xLzA7Y29uc3QgVD1lPT57aWYoXCJyZXBsYWNlXCIhPT1lLnR5cGUpcmV0dXJuO2NvbnN0IHI9ZS5nZW9tZXRyeTtpZighcj8uaGFzWilyZXR1cm47bShkZSk7Y29uc3Qgbz1yLnNwYXRpYWxSZWZlcmVuY2V8fG4sYT1yLnJpbmdzLnJlZHVjZSgoKGUscik9PnIucmVkdWNlKCgoZSxyKT0+KGkoZ2UsclswXSxyWzFdLHJbMl0pLGYoZ2UsbyxnZSx0KSxzKGdlLGdlLGJlKSxkKGRlLGdlKSxNYXRoLm1pbihnZVsyXSxlKSkpLGUpKSwxLzApO1MoKSxoKGhlLGRlKSYmKGI9TWF0aC5taW4oYixhKSx3PU1hdGgubWF4KHcsYSkpfTtpZihjLmZvckVhY2goKGU9PlQoZSkpKSxiPT09MS8wKXJldHVybiBudWxsO2NvbnN0IHY9KGUsdCxyKT0+e3MoZ2UscixwKSxlW3RdPWdlWzBdLGVbdCsxXT1nZVsxXSxlW3QrMl09Z2VbMl0sdCs9MjQsclsyXT1iLHMoZ2UscixwKSxlW3RdPWdlWzBdLGVbdCsxXT1nZVsxXSxlW3QrMl09Z2VbMl0sdCs9MjQsclsyXT13LHMoZ2UscixwKSxlW3RdPWdlWzBdLGVbdCsxXT1nZVsxXSxlW3QrMl09Z2VbMl19O2ZvcihsZXQgbz0wO288ODsrK28pdihTZS5kYXRhLDMqbyxnW29dKTtyZXR1cm4gTShTZSl9ZnVuY3Rpb24gZmUoZSl7cmV0dXJuIGVbM10+PTB9ZnVuY3Rpb24gcGUoZSl7bnVsbCE9ZSYmKGVbM109LTEpfWNvbnN0IG1lPVtsKCksbCgpLGwoKSxsKCksbCgpLGwoKSxsKCksbCgpXSxkZT1wKCksaGU9cCgpLHllPW5ldyBSLGdlPWwoKSxTZT17ZGF0YTpuZXcgQXJyYXkoNzIpLHNpemU6MyxleGNsdXNpdmU6ITAsc3RyaWRlOjN9LGJlPW4oKTtleHBvcnR7XyBhcyBNYnNJbnRlcnNlY3RSZXN1bHQsYWUgYXMgU3ltYm9sSW5mbyxjZSBhcyBhZGRXcmFwYXJvdW5kLHJlIGFzIGNoZWNrUG9pbnRDbG91ZExheWVyQ29tcGF0aWJsZVdpdGhWaWV3LHRlIGFzIGNoZWNrUG9pbnRDbG91ZExheWVyVmFsaWQsUSBhcyBjaGVja1JlY3ljbGFibGUsWSBhcyBjaGVja1NjZW5lTGF5ZXJDb21wYXRpYmxlV2l0aFZpZXcsWCBhcyBjaGVja1NjZW5lTGF5ZXJWYWxpZCx6IGFzIGNoZWNrU3BhdGlhbFJlZmVyZW5jZSxIIGFzIGNoZWNrU3BhdGlhbFJlZmVyZW5jZXMsdWUgYXMgY29tcHV0ZVZpc2liaWxpdHlPYmIsVSBhcyBjb250YWluc0RyYWNvLEMgYXMgZXh0cmFjdFdraWQsayBhcyBmaWx0ZXJJblBsYWNlLEsgYXMgZmluZEZpZWxkc0Nhc2VJbnNlbnNpdGl2ZSxOIGFzIGZpbmRJbnRlcnNlY3RpbmdOb2RlcyxPIGFzIGdldENsaXBSZWN0LFYgYXMgZ2V0SW5kZXhDcnMsbGUgYXMgZ2V0U3ltYm9sSW5mbywkIGFzIGdldFZlcnRleENycyxBIGFzIGludGVyc2VjdEJvdW5kaW5nUmVjdFdpdGhNYnMscGUgYXMgaW52YWxpZGF0ZU1icyxaIGFzIGlzU3VwcG9ydGVkTG9jYWxNb2RlUHJvamVjdGlvbixmZSBhcyBpc1ZhbGlkTWJzLEQgYXMgb2JqZWN0SWRGaWx0ZXIsQiBhcyBxdWVyeUF0dHJpYnV0ZXNGcm9tQ2FjaGVkQXR0cmlidXRlc0lkLGllIGFzIHJlbmRlcmVyTmVlZHNUZXh0dXJlcyxzZSBhcyB0cmFuc3BhcmVudEVkZ2VNYXRlcmlhbCxMIGFzIHdoZW5HcmFwaGljQXR0cmlidXRlc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=