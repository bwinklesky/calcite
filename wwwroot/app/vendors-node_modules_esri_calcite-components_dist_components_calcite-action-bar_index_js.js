export const __webpack_id__ = "vendors-node_modules_esri_calcite-components_dist_components_calcite-action-bar_index_js";
export const __webpack_ids__ = ["vendors-node_modules_esri_calcite-components_dist_components_calcite-action-bar_index_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/ExpandToggle.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/ExpandToggle.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ ExpandToggle),
/* harmony export */   o: () => (/* binding */ overflowActions),
/* harmony export */   q: () => (/* binding */ queryActions),
/* harmony export */   t: () => (/* binding */ toggleChildActionText)
/* harmony export */ });
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _resources8_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resources8.js */ "./node_modules/@esri/calcite-components/dist/chunks/resources8.js");
/* harmony import */ var _resources2_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resources2.js */ "./node_modules/@esri/calcite-components/dist/chunks/resources2.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */





const queryActions = (el) => {
  return Array.from(el.querySelectorAll("calcite-action")).filter(
    (action) => action.closest("calcite-action-menu") ? action.slot === _resources2_js__WEBPACK_IMPORTED_MODULE_4__.S.trigger : true
  );
};
const overflowActions = ({
  actionGroups,
  expanded,
  overflowCount
}) => {
  let needToSlotCount = overflowCount;
  actionGroups.reverse().forEach((group) => {
    let slottedWithinGroupCount = 0;
    const groupActions = queryActions(group).reverse();
    groupActions.forEach((groupAction) => {
      if (groupAction.slot === _resources8_js__WEBPACK_IMPORTED_MODULE_3__.S.menuActions) {
        groupAction.removeAttribute("slot");
        groupAction.textEnabled = expanded;
      }
    });
    if (needToSlotCount > 0) {
      groupActions.some((groupAction) => {
        const unslottedActions = groupActions.filter((action) => !action.slot);
        if (unslottedActions.length > 1 && groupActions.length > 2 && !groupAction.closest("calcite-action-menu")) {
          groupAction.textEnabled = true;
          groupAction.setAttribute("slot", _resources8_js__WEBPACK_IMPORTED_MODULE_3__.S.menuActions);
          slottedWithinGroupCount++;
          if (slottedWithinGroupCount > 1) {
            needToSlotCount--;
          }
        }
        return needToSlotCount < 1;
      });
    }
    group.manager.component.requestUpdate();
  });
};
const ICONS = {
  chevronsLeft: "chevrons-left",
  chevronsRight: "chevrons-right"
};
function getCalcitePosition(position, el) {
  return position || el.closest("calcite-shell-panel")?.position || "start";
}
function toggleChildActionText({ el, expanded }) {
  queryActions(el).filter((el2) => el2.slot !== _resources8_js__WEBPACK_IMPORTED_MODULE_3__.S.menuActions).forEach((action) => action.textEnabled = expanded);
  el.querySelectorAll("calcite-action-group, calcite-action-menu").forEach((el2) => el2.expanded = expanded);
}
const setTooltipReference = ({ tooltip, referenceElement, expanded, ref: ref2 }) => {
  if (tooltip) {
    tooltip.referenceElement = !expanded && referenceElement ? referenceElement : null;
  }
  if (ref2) {
    ref2(referenceElement);
  }
  return referenceElement;
};
const ExpandToggle = ({ expanded, expandText, collapseText, expandLabel, collapseLabel, toggle, el, position, tooltip, ref: ref$1, scale }) => {
  const rtl = (0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.g)(el) === "rtl";
  const text = expanded ? collapseText : expandText;
  const label = expanded ? collapseLabel : expandLabel;
  const icons = [ICONS.chevronsLeft, ICONS.chevronsRight];
  if (rtl) {
    icons.reverse();
  }
  const end = getCalcitePosition(position, el) === "end";
  const expandIcon = end ? icons[1] : icons[0];
  const collapseIcon = end ? icons[0] : icons[1];
  const actionNode = (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-action .aria=${{ expanded }} .icon=${expanded ? expandIcon : collapseIcon} id=expand-toggle .label=${label} @click=${toggle} .scale=${scale} .text=${text} .textEnabled=${expanded} title=${(!expanded && !tooltip ? text : null) ?? lit_html__WEBPACK_IMPORTED_MODULE_1__.nothing} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_0__.ref)((referenceElement) => setTooltipReference({ tooltip, referenceElement, expanded, ref: ref$1 }))}></calcite-action>`;
  return actionNode;
};



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/resources8.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/resources8.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ CSS),
/* harmony export */   I: () => (/* binding */ ICONS),
/* harmony export */   S: () => (/* binding */ SLOTS)
/* harmony export */ });
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */
const SLOTS = {
  menuActions: "menu-actions",
  menuTooltip: "menu-tooltip"
};
const ICONS = {
  menu: "ellipsis"
};
const CSS = {
  container: "container"
};



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/useCancelable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/useCancelable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ useCancelable)
/* harmony export */ });
/* harmony import */ var _arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/lumina/controllers */ "./node_modules/@arcgis/lumina/dist/controllers/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

const useCancelable = () => {
  return (0,_arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__.makeGenericController)((_, controller) => {
    const resources = /* @__PURE__ */ new Set();
    controller.onDisconnected(() => {
      resources.forEach((resource) => resource.cancel());
    });
    return {
      add: (resourceOrResources) => {
        [resourceOrResources].flat().forEach((resource) => resources.add(resource));
      },
      resources
    };
  });
};



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-action-bar/customElement.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-action-bar/customElement.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionBar: () => (/* binding */ ActionBar)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var es_toolkit__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! es-toolkit */ "./node_modules/es-toolkit/dist/function/debounce.mjs");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/observers.js */ "./node_modules/@esri/calcite-components/dist/chunks/observers.js");
/* harmony import */ var _chunks_ExpandToggle_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/ExpandToggle.js */ "./node_modules/@esri/calcite-components/dist/chunks/ExpandToggle.js");
/* harmony import */ var _chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/useT9n.js */ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js");
/* harmony import */ var _chunks_useCancelable_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/useCancelable.js */ "./node_modules/@esri/calcite-components/dist/chunks/useCancelable.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */










const calculateMaxItems = ({
  bufferSize = 0,
  containerSize,
  itemSizes
}) => {
  const maxSize = containerSize - bufferSize;
  let breakpoint = itemSizes.length;
  let sizeSum = 0;
  for (const [index, size] of itemSizes.entries()) {
    sizeSum = sizeSum + size;
    if (sizeSum > maxSize) {
      breakpoint = index;
      break;
    } else {
      continue;
    }
  }
  return breakpoint;
};
const getOverflowCount = ({
  bufferSize = 0,
  containerSize,
  itemSizes
}) => {
  return Math.max(itemSizes.length - calculateMaxItems({ bufferSize, itemSizes, containerSize }), 0);
};
const CSS = {
  container: "container",
  actionGroupEnd: "action-group--end"
};
const SLOTS = {
  actionsEnd: "actions-end",
  bottomActions: "bottom-actions",
  expandTooltip: "expand-tooltip"
};
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:inline-flex;align-self:stretch;background:transparent}.container{display:inline-flex;flex:1 1 auto;flex-direction:column;gap:var(--calcite-action-bar-items-space, 0);background-color:var(--calcite-action-bar-background-color, var(--calcite-color-foreground-1))}@keyframes in{0%{opacity:0}to{opacity:1}}:host([floating]) .container{animation:in var(--calcite-internal-animation-timing-slow) ease-in-out;overflow:hidden;border-radius:var(--calcite-action-bar-corner-radius, var(--calcite-corner-radius-round));--tw-shadow: 0 6px 20px -4px rgba(0, 0, 0, .1), 0 4px 12px -2px rgba(0, 0, 0, .08);--tw-shadow-colored: 0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--calcite-action-bar-shadow, var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)), var(--tw-shadow))}:host([layout=vertical]){flex-direction:column}:host([layout=vertical]):host([overflow-actions-disabled]) .container{overflow-y:auto}:host([layout=vertical]):host([expanded]) .container{max-inline-size:var(--calcite-action-bar-expanded-max-width, auto)}:host([layout=vertical]) .action-group--end{margin-block-start:auto}:host([layout=vertical]) ::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}:host([layout=horizontal]){flex-direction:row}:host([layout=horizontal]) .container{flex-direction:row}:host([layout=horizontal]):host([overflow-actions-disabled]) .container{overflow-x:auto}:host([layout=horizontal]) .action-group--end{margin-inline-start:auto}:host([layout=horizontal]) ::slotted(calcite-action-group:not(:last-of-type)){border-inline-end-width:var(--calcite-border-width-sm)}.action-group--end{justify-content:flex-end}:host([hidden]){display:none}[hidden]{display:none}`;
class ActionBar extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super();
    this.mutationObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__.c)("mutation", () => this.mutationObserverHandler());
    this.cancelable = (0,_chunks_useCancelable_js__WEBPACK_IMPORTED_MODULE_7__.u)()(this);
    this.resize = (0,es_toolkit__WEBPACK_IMPORTED_MODULE_9__.debounce)(({ width, height }) => {
      const { expanded, expandDisabled, layout, overflowActionsDisabled, actionGroups } = this;
      if (overflowActionsDisabled || layout === "vertical" && !height || layout === "horizontal" && !width) {
        return;
      }
      const itemSizes = this.getItemSizes();
      this.updateGroups();
      const groupCount = this.hasActionsEnd || this.hasBottomActions || !expandDisabled ? actionGroups.length + 1 : actionGroups.length;
      const overflowCount = getOverflowCount({
        bufferSize: groupCount,
        // 1px border for each group
        containerSize: layout === "horizontal" ? width : height,
        itemSizes
      });
      (0,_chunks_ExpandToggle_js__WEBPACK_IMPORTED_MODULE_5__.o)({
        actionGroups,
        expanded,
        overflowCount
      });
    }, _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.D.resize);
    this.resizeHandler = (entry) => {
      const { width, height } = entry.contentRect;
      this.resize({ width, height });
    };
    this.resizeObserver = (0,_chunks_observers_js__WEBPACK_IMPORTED_MODULE_4__.c)("resize", (entries) => this.resizeHandlerEntries(entries));
    this.toggleExpand = () => {
      this.expanded = !this.expanded;
      this.calciteActionBarToggle.emit();
    };
    this.messages = (0,_chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_6__.u)();
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_8__.u)()(this);
    this.hasActionsEnd = false;
    this.hasBottomActions = false;
    this.floating = false;
    this.expandDisabled = false;
    this.expanded = false;
    this.layout = "vertical";
    this.overflowActionsDisabled = false;
    this.overlayPositioning = "absolute";
    this.scale = "m";
    this.calciteActionBarCollapse = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.calciteActionBarExpand = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.calciteActionBarToggle = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.listen("calciteActionMenuOpen", this.actionMenuOpenHandler);
  }
  static {
    this.properties = { expandTooltip: [16, {}, { state: true }], hasActionsEnd: [16, {}, { state: true }], hasBottomActions: [16, {}, { state: true }], actionsEndGroupLabel: 1, floating: [7, {}, { reflect: true, type: Boolean }], expandDisabled: [7, {}, { reflect: true, type: Boolean }], expanded: [7, {}, { reflect: true, type: Boolean }], layout: [3, {}, { reflect: true }], messageOverrides: [0, {}, { attribute: false }], overflowActionsDisabled: [7, {}, { reflect: true, type: Boolean }], overlayPositioning: [3, {}, { reflect: true }], position: [3, {}, { reflect: true }], scale: [3, {}, { reflect: true }] };
  }
  static {
    this.styles = styles;
  }
  async overflowActions() {
    this.resize({ width: this.el.clientWidth, height: this.el.clientHeight });
  }
  async setFocus(options) {
    return this.focusSetter(() => {
      return this.el;
    }, options);
  }
  connectedCallback() {
    super.connectedCallback();
    this.updateGroups();
    this.overflowActions();
    this.mutationObserver?.observe(this.el, { childList: true, subtree: true });
    this.overflowActionsDisabledHandler(this.overflowActionsDisabled);
    this.cancelable.add(this.resize);
  }
  willUpdate(changes) {
    if (changes.has("expandDisabled") && (this.hasUpdated || this.expandDisabled !== false)) {
      this.overflowActions();
    }
    if (changes.has("layout") && (this.hasUpdated || this.layout !== "vertical")) {
      this.updateGroups();
    }
    if (changes.has("overflowActionsDisabled") && (this.hasUpdated || this.overflowActionsDisabled !== false)) {
      this.overflowActionsDisabledHandler(this.overflowActionsDisabled);
    }
    if (changes.has("expanded") && this.hasUpdated) {
      this.expandedHandler();
      if (this.expanded) {
        this.calciteActionBarExpand.emit();
      } else {
        this.calciteActionBarCollapse.emit();
      }
    }
  }
  loaded() {
    this.overflowActions();
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.mutationObserver?.disconnect();
    this.resizeObserver?.disconnect();
  }
  getItemSizes() {
    const { el, layout, expandToggleEl } = this;
    const actions = (0,_chunks_ExpandToggle_js__WEBPACK_IMPORTED_MODULE_5__.q)(el);
    if (expandToggleEl) {
      actions.push(expandToggleEl);
    }
    const clientSize = layout === "horizontal" ? "clientWidth" : "clientHeight";
    const fallbackSize = Math.max(...actions.map((action) => action[clientSize] || 0));
    return actions.map((action) => action[clientSize] || fallbackSize);
  }
  expandedHandler() {
    const { el, expanded } = this;
    (0,_chunks_ExpandToggle_js__WEBPACK_IMPORTED_MODULE_5__.t)({ el, expanded });
    this.overflowActions();
  }
  overflowActionsDisabledHandler(overflowActionsDisabled) {
    if (overflowActionsDisabled) {
      this.resizeObserver?.disconnect();
      return;
    }
    this.resizeObserver?.observe(this.el);
    this.overflowActions();
  }
  actionMenuOpenHandler(event) {
    if (event.target.menuOpen) {
      const composedPath = event.composedPath();
      this.actionGroups?.forEach((group) => {
        if (!composedPath.includes(group)) {
          group.menuOpen = false;
        }
      });
    }
  }
  mutationObserverHandler() {
    this.updateGroups();
    this.overflowActions();
  }
  resizeHandlerEntries(entries) {
    entries.forEach(this.resizeHandler);
  }
  updateGroups() {
    const groups = Array.from(this.el.querySelectorAll("calcite-action-group"));
    this.actionGroups = groups;
    groups.forEach((group) => {
      group.layout = this.layout;
      group.scale = this.scale;
    });
  }
  handleDefaultSlotChange() {
    this.updateGroups();
  }
  handleActionsEndSlotChange(event) {
    this.hasActionsEnd = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.a)(event);
  }
  handleBottomActionsSlotChange(event) {
    this.hasBottomActions = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.a)(event);
  }
  handleTooltipSlotChange(event) {
    const tooltips = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_3__.s)(event).filter((el) => el?.matches("calcite-tooltip"));
    this.expandTooltip = tooltips[0];
  }
  renderBottomActionGroup() {
    const { expanded, expandDisabled, el, position, toggleExpand, scale, layout, messages, actionsEndGroupLabel, overlayPositioning } = this;
    const expandToggleNode = !expandDisabled ? (0,_chunks_ExpandToggle_js__WEBPACK_IMPORTED_MODULE_5__.E)({ collapseLabel: messages.collapseLabel, collapseText: messages.collapse, el, expandLabel: messages.expandLabel, expandText: messages.expand, expanded, position, ref: (el2) => this.expandToggleEl = el2, scale, toggle: toggleExpand, tooltip: this.expandTooltip }) : null;
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-action-group class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.actionGroupEnd)} .hidden=${this.expandDisabled && !(this.hasActionsEnd || this.hasBottomActions)} .label=${actionsEndGroupLabel} .layout=${layout} .overlayPositioning=${overlayPositioning} .scale=${scale}><slot name=${SLOTS.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot><slot name=${SLOTS.bottomActions} @slotchange=${this.handleBottomActionsSlotChange}></slot><slot name=${SLOTS.expandTooltip} @slotchange=${this.handleTooltipSlotChange}></slot>${expandToggleNode}</calcite-action-group>`;
  }
  render() {
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.container)}><slot @slotchange=${this.handleDefaultSlotChange}></slot>${this.renderBottomActionGroup()}</div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-action-bar", ActionBar);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-action-bar/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-action-bar/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionBar: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_2__.ActionBar)
/* harmony export */ });
/* harmony import */ var _calcite_action_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-action/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-action/index.js");
/* harmony import */ var _calcite_action_group_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../calcite-action-group/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-action-group/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-action-bar/customElement.js");




/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-action-group/customElement.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-action-group/customElement.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionGroup: () => (/* binding */ ActionGroup)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_resources2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/resources2.js */ "./node_modules/@esri/calcite-components/dist/chunks/resources2.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/* harmony import */ var _chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/useT9n.js */ "./node_modules/@esri/calcite-components/dist/chunks/useT9n.js");
/* harmony import */ var _chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/useSetFocus.js */ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js");
/* harmony import */ var _chunks_resources8_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/resources8.js */ "./node_modules/@esri/calcite-components/dist/chunks/resources8.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */








const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns: 1}:host([columns="2"]){--calcite-internal-action-group-columns: 2}:host([columns="3"]){--calcite-internal-action-group-columns: 3}:host([columns="4"]){--calcite-internal-action-group-columns: 4}:host([columns="5"]){--calcite-internal-action-group-columns: 5}:host([columns="6"]){--calcite-internal-action-group-columns: 6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)),auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-inline-end:var(--calcite-size-px)}:host([hidden]){display:none}[hidden]{display:none}`;
class ActionGroup extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super(...arguments);
    this.messages = (0,_chunks_useT9n_js__WEBPACK_IMPORTED_MODULE_5__.u)();
    this.focusSetter = (0,_chunks_useSetFocus_js__WEBPACK_IMPORTED_MODULE_6__.u)()(this);
    this.hasMenuActions = false;
    this.expanded = false;
    this.layout = "vertical";
    this.menuOpen = false;
    this.overlayPositioning = "absolute";
    this.scale = "m";
    this.calciteActionGroupCollapse = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.calciteActionGroupExpand = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
  }
  static {
    this.properties = { hasMenuActions: [16, {}, { state: true }], columns: [11, {}, { type: Number, reflect: true }], expanded: [7, {}, { reflect: true, type: Boolean }], label: 1, layout: [3, {}, { reflect: true }], menuFlipPlacements: [0, {}, { attribute: false }], menuOpen: [7, {}, { reflect: true, type: Boolean }], menuPlacement: [3, {}, { reflect: true }], messageOverrides: [0, {}, { attribute: false }], overlayPositioning: [3, {}, { reflect: true }], scale: [3, {}, { reflect: true }] };
  }
  static {
    this.shadowRootOptions = { mode: "open", delegatesFocus: true };
  }
  static {
    this.styles = styles;
  }
  async setFocus(options) {
    return this.focusSetter(() => {
      return this.el;
    }, options);
  }
  willUpdate(changes) {
    if (changes.has("expanded")) {
      if (this.hasUpdated || this.expanded !== false) {
        this.menuOpen = false;
      }
      if (this.hasUpdated) {
        if (this.expanded) {
          this.calciteActionGroupExpand.emit();
        } else {
          this.calciteActionGroupCollapse.emit();
        }
      }
    }
  }
  setMenuOpen(event) {
    this.menuOpen = !!event.currentTarget.open;
  }
  handleMenuActionsSlotChange(event) {
    this.hasMenuActions = (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_4__.a)(event);
  }
  renderMenu() {
    const { expanded, menuOpen, scale, layout, messages, overlayPositioning, hasMenuActions, menuFlipPlacements, menuPlacement } = this;
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-action-menu .expanded=${expanded} .flipPlacements=${menuFlipPlacements ?? (layout === "horizontal" ? ["top", "bottom"] : ["left", "right"])} .hidden=${!hasMenuActions} .label=${messages.more} @calciteActionMenuOpen=${this.setMenuOpen} .open=${menuOpen} .overlayPositioning=${overlayPositioning} .placement=${menuPlacement ?? (layout === "horizontal" ? "bottom-start" : "leading-start")} .scale=${scale}><calcite-action .aria=${{ expanded }} .icon=${_chunks_resources8_js__WEBPACK_IMPORTED_MODULE_7__.I.menu} .scale=${scale} slot=${_chunks_resources2_js__WEBPACK_IMPORTED_MODULE_3__.S.trigger} .text=${messages.more} .textEnabled=${expanded}></calcite-action><slot name=${_chunks_resources8_js__WEBPACK_IMPORTED_MODULE_7__.S.menuActions} @slotchange=${this.handleMenuActionsSlotChange}></slot><slot name=${_chunks_resources8_js__WEBPACK_IMPORTED_MODULE_7__.S.menuTooltip} slot=${_chunks_resources2_js__WEBPACK_IMPORTED_MODULE_3__.S.tooltip}></slot></calcite-action-menu>`;
  }
  render() {
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div .ariaLabel=${this.label} class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(_chunks_resources8_js__WEBPACK_IMPORTED_MODULE_7__.C.container)} role=group><slot></slot>${this.renderMenu()}</div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-action-group", ActionGroup);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-action-group/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-action-group/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionGroup: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_2__.ActionGroup)
/* harmony export */ });
/* harmony import */ var _calcite_action_menu_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../calcite-action-menu/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-action-menu/index.js");
/* harmony import */ var _calcite_action_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../calcite-action/index.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-action/index.js");
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-action-group/customElement.js");




/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX2NhbGNpdGUtYWN0aW9uLWJhcl9pbmRleF9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzRDO0FBQ0g7QUFDSztBQUNEO0FBQ0U7QUFDL0M7QUFDQTtBQUNBLHdFQUF3RSw2Q0FBTztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw2Q0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw2Q0FBSztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGNBQWM7QUFDL0MsZ0RBQWdELDZDQUFLO0FBQ3JEO0FBQ0E7QUFDQSwrQkFBK0IsZ0RBQWdEO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0hBQWtIO0FBQzFJLGNBQWMsMENBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhDQUFJLDJCQUEyQixZQUFZLFFBQVEsc0NBQXNDLDBCQUEwQixPQUFPLFNBQVMsUUFBUSxTQUFTLE9BQU8sUUFBUSxNQUFNLGVBQWUsVUFBVSxRQUFRLHlDQUF5Qyw2Q0FBTyxFQUFFLEVBQUUsMERBQUcsNkNBQTZDLGlEQUFpRCxHQUFHO0FBQ3ZYO0FBQ0E7QUFNRTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNwRkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpREFBNEI7QUFDdEQ7QUFDQTtBQUNBLFlBQVkscUhBQXFIO0FBQ2pJLFdBQVcseUNBQUksa0NBQWtDLFVBQVUsa0JBQWtCLHlGQUF5RixVQUFVLGlCQUFpQixTQUFTLGVBQWUseUJBQXlCLGtCQUFrQixRQUFRLFVBQVUsc0JBQXNCLG9CQUFvQixhQUFhLCtFQUErRSxTQUFTLE1BQU0sMkJBQTJCLFlBQVksUUFBUSxvREFBSyxPQUFPLFNBQVMsT0FBTyxPQUFPLG9EQUFLLFVBQVUsUUFBUSxlQUFlLGVBQWUsU0FBUywrQkFBK0Isb0RBQU8sY0FBYyxjQUFjLGlDQUFpQyxxQkFBcUIsb0RBQU8sY0FBYyxPQUFPLG9EQUFLLFNBQVM7QUFDN3RCO0FBQ0E7QUFDQSxXQUFXLHlDQUFJLG1CQUFtQixZQUFZLFFBQVEsNERBQVksQ0FBQyxvREFBRyxhQUFhLDBCQUEwQixrQkFBa0I7QUFDL0g7QUFDQTtBQUNBLHFEQUFhO0FBR1g7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZFdUM7QUFDTCIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9FeHBhbmRUb2dnbGUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL3Jlc291cmNlczguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL3VzZUNhbmNlbGFibGUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLWFjdGlvbi1iYXIvY3VzdG9tRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtYWN0aW9uLWJhci9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtYWN0aW9uLWdyb3VwL2N1c3RvbUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLWFjdGlvbi1ncm91cC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgcmVmIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgbm90aGluZywgaHRtbCB9IGZyb20gXCJsaXQtaHRtbFwiO1xuaW1wb3J0IHsgZyBhcyBnZXRFbGVtZW50RGlyIH0gZnJvbSBcIi4vZG9tLmpzXCI7XG5pbXBvcnQgeyBTIGFzIFNMT1RTIH0gZnJvbSBcIi4vcmVzb3VyY2VzOC5qc1wiO1xuaW1wb3J0IHsgUyBhcyBTTE9UUyQxIH0gZnJvbSBcIi4vcmVzb3VyY2VzMi5qc1wiO1xuY29uc3QgcXVlcnlBY3Rpb25zID0gKGVsKSA9PiB7XG4gIHJldHVybiBBcnJheS5mcm9tKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLWFjdGlvblwiKSkuZmlsdGVyKFxuICAgIChhY3Rpb24pID0+IGFjdGlvbi5jbG9zZXN0KFwiY2FsY2l0ZS1hY3Rpb24tbWVudVwiKSA/IGFjdGlvbi5zbG90ID09PSBTTE9UUyQxLnRyaWdnZXIgOiB0cnVlXG4gICk7XG59O1xuY29uc3Qgb3ZlcmZsb3dBY3Rpb25zID0gKHtcbiAgYWN0aW9uR3JvdXBzLFxuICBleHBhbmRlZCxcbiAgb3ZlcmZsb3dDb3VudFxufSkgPT4ge1xuICBsZXQgbmVlZFRvU2xvdENvdW50ID0gb3ZlcmZsb3dDb3VudDtcbiAgYWN0aW9uR3JvdXBzLnJldmVyc2UoKS5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgIGxldCBzbG90dGVkV2l0aGluR3JvdXBDb3VudCA9IDA7XG4gICAgY29uc3QgZ3JvdXBBY3Rpb25zID0gcXVlcnlBY3Rpb25zKGdyb3VwKS5yZXZlcnNlKCk7XG4gICAgZ3JvdXBBY3Rpb25zLmZvckVhY2goKGdyb3VwQWN0aW9uKSA9PiB7XG4gICAgICBpZiAoZ3JvdXBBY3Rpb24uc2xvdCA9PT0gU0xPVFMubWVudUFjdGlvbnMpIHtcbiAgICAgICAgZ3JvdXBBY3Rpb24ucmVtb3ZlQXR0cmlidXRlKFwic2xvdFwiKTtcbiAgICAgICAgZ3JvdXBBY3Rpb24udGV4dEVuYWJsZWQgPSBleHBhbmRlZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAobmVlZFRvU2xvdENvdW50ID4gMCkge1xuICAgICAgZ3JvdXBBY3Rpb25zLnNvbWUoKGdyb3VwQWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHVuc2xvdHRlZEFjdGlvbnMgPSBncm91cEFjdGlvbnMuZmlsdGVyKChhY3Rpb24pID0+ICFhY3Rpb24uc2xvdCk7XG4gICAgICAgIGlmICh1bnNsb3R0ZWRBY3Rpb25zLmxlbmd0aCA+IDEgJiYgZ3JvdXBBY3Rpb25zLmxlbmd0aCA+IDIgJiYgIWdyb3VwQWN0aW9uLmNsb3Nlc3QoXCJjYWxjaXRlLWFjdGlvbi1tZW51XCIpKSB7XG4gICAgICAgICAgZ3JvdXBBY3Rpb24udGV4dEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIGdyb3VwQWN0aW9uLnNldEF0dHJpYnV0ZShcInNsb3RcIiwgU0xPVFMubWVudUFjdGlvbnMpO1xuICAgICAgICAgIHNsb3R0ZWRXaXRoaW5Hcm91cENvdW50Kys7XG4gICAgICAgICAgaWYgKHNsb3R0ZWRXaXRoaW5Hcm91cENvdW50ID4gMSkge1xuICAgICAgICAgICAgbmVlZFRvU2xvdENvdW50LS07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZWVkVG9TbG90Q291bnQgPCAxO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGdyb3VwLm1hbmFnZXIuY29tcG9uZW50LnJlcXVlc3RVcGRhdGUoKTtcbiAgfSk7XG59O1xuY29uc3QgSUNPTlMgPSB7XG4gIGNoZXZyb25zTGVmdDogXCJjaGV2cm9ucy1sZWZ0XCIsXG4gIGNoZXZyb25zUmlnaHQ6IFwiY2hldnJvbnMtcmlnaHRcIlxufTtcbmZ1bmN0aW9uIGdldENhbGNpdGVQb3NpdGlvbihwb3NpdGlvbiwgZWwpIHtcbiAgcmV0dXJuIHBvc2l0aW9uIHx8IGVsLmNsb3Nlc3QoXCJjYWxjaXRlLXNoZWxsLXBhbmVsXCIpPy5wb3NpdGlvbiB8fCBcInN0YXJ0XCI7XG59XG5mdW5jdGlvbiB0b2dnbGVDaGlsZEFjdGlvblRleHQoeyBlbCwgZXhwYW5kZWQgfSkge1xuICBxdWVyeUFjdGlvbnMoZWwpLmZpbHRlcigoZWwyKSA9PiBlbDIuc2xvdCAhPT0gU0xPVFMubWVudUFjdGlvbnMpLmZvckVhY2goKGFjdGlvbikgPT4gYWN0aW9uLnRleHRFbmFibGVkID0gZXhwYW5kZWQpO1xuICBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiY2FsY2l0ZS1hY3Rpb24tZ3JvdXAsIGNhbGNpdGUtYWN0aW9uLW1lbnVcIikuZm9yRWFjaCgoZWwyKSA9PiBlbDIuZXhwYW5kZWQgPSBleHBhbmRlZCk7XG59XG5jb25zdCBzZXRUb29sdGlwUmVmZXJlbmNlID0gKHsgdG9vbHRpcCwgcmVmZXJlbmNlRWxlbWVudCwgZXhwYW5kZWQsIHJlZjogcmVmMiB9KSA9PiB7XG4gIGlmICh0b29sdGlwKSB7XG4gICAgdG9vbHRpcC5yZWZlcmVuY2VFbGVtZW50ID0gIWV4cGFuZGVkICYmIHJlZmVyZW5jZUVsZW1lbnQgPyByZWZlcmVuY2VFbGVtZW50IDogbnVsbDtcbiAgfVxuICBpZiAocmVmMikge1xuICAgIHJlZjIocmVmZXJlbmNlRWxlbWVudCk7XG4gIH1cbiAgcmV0dXJuIHJlZmVyZW5jZUVsZW1lbnQ7XG59O1xuY29uc3QgRXhwYW5kVG9nZ2xlID0gKHsgZXhwYW5kZWQsIGV4cGFuZFRleHQsIGNvbGxhcHNlVGV4dCwgZXhwYW5kTGFiZWwsIGNvbGxhcHNlTGFiZWwsIHRvZ2dsZSwgZWwsIHBvc2l0aW9uLCB0b29sdGlwLCByZWY6IHJlZiQxLCBzY2FsZSB9KSA9PiB7XG4gIGNvbnN0IHJ0bCA9IGdldEVsZW1lbnREaXIoZWwpID09PSBcInJ0bFwiO1xuICBjb25zdCB0ZXh0ID0gZXhwYW5kZWQgPyBjb2xsYXBzZVRleHQgOiBleHBhbmRUZXh0O1xuICBjb25zdCBsYWJlbCA9IGV4cGFuZGVkID8gY29sbGFwc2VMYWJlbCA6IGV4cGFuZExhYmVsO1xuICBjb25zdCBpY29ucyA9IFtJQ09OUy5jaGV2cm9uc0xlZnQsIElDT05TLmNoZXZyb25zUmlnaHRdO1xuICBpZiAocnRsKSB7XG4gICAgaWNvbnMucmV2ZXJzZSgpO1xuICB9XG4gIGNvbnN0IGVuZCA9IGdldENhbGNpdGVQb3NpdGlvbihwb3NpdGlvbiwgZWwpID09PSBcImVuZFwiO1xuICBjb25zdCBleHBhbmRJY29uID0gZW5kID8gaWNvbnNbMV0gOiBpY29uc1swXTtcbiAgY29uc3QgY29sbGFwc2VJY29uID0gZW5kID8gaWNvbnNbMF0gOiBpY29uc1sxXTtcbiAgY29uc3QgYWN0aW9uTm9kZSA9IGh0bWxgPGNhbGNpdGUtYWN0aW9uIC5hcmlhPSR7eyBleHBhbmRlZCB9fSAuaWNvbj0ke2V4cGFuZGVkID8gZXhwYW5kSWNvbiA6IGNvbGxhcHNlSWNvbn0gaWQ9ZXhwYW5kLXRvZ2dsZSAubGFiZWw9JHtsYWJlbH0gQGNsaWNrPSR7dG9nZ2xlfSAuc2NhbGU9JHtzY2FsZX0gLnRleHQ9JHt0ZXh0fSAudGV4dEVuYWJsZWQ9JHtleHBhbmRlZH0gdGl0bGU9JHsoIWV4cGFuZGVkICYmICF0b29sdGlwID8gdGV4dCA6IG51bGwpID8/IG5vdGhpbmd9ICR7cmVmKChyZWZlcmVuY2VFbGVtZW50KSA9PiBzZXRUb29sdGlwUmVmZXJlbmNlKHsgdG9vbHRpcCwgcmVmZXJlbmNlRWxlbWVudCwgZXhwYW5kZWQsIHJlZjogcmVmJDEgfSkpfT48L2NhbGNpdGUtYWN0aW9uPmA7XG4gIHJldHVybiBhY3Rpb25Ob2RlO1xufTtcbmV4cG9ydCB7XG4gIEV4cGFuZFRvZ2dsZSBhcyBFLFxuICBvdmVyZmxvd0FjdGlvbnMgYXMgbyxcbiAgcXVlcnlBY3Rpb25zIGFzIHEsXG4gIHRvZ2dsZUNoaWxkQWN0aW9uVGV4dCBhcyB0XG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmNvbnN0IFNMT1RTID0ge1xuICBtZW51QWN0aW9uczogXCJtZW51LWFjdGlvbnNcIixcbiAgbWVudVRvb2x0aXA6IFwibWVudS10b29sdGlwXCJcbn07XG5jb25zdCBJQ09OUyA9IHtcbiAgbWVudTogXCJlbGxpcHNpc1wiXG59O1xuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCJcbn07XG5leHBvcnQge1xuICBDU1MgYXMgQyxcbiAgSUNPTlMgYXMgSSxcbiAgU0xPVFMgYXMgU1xufTtcbiIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBtYWtlR2VuZXJpY0NvbnRyb2xsZXIgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmEvY29udHJvbGxlcnNcIjtcbmNvbnN0IHVzZUNhbmNlbGFibGUgPSAoKSA9PiB7XG4gIHJldHVybiBtYWtlR2VuZXJpY0NvbnRyb2xsZXIoKF8sIGNvbnRyb2xsZXIpID0+IHtcbiAgICBjb25zdCByZXNvdXJjZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIGNvbnRyb2xsZXIub25EaXNjb25uZWN0ZWQoKCkgPT4ge1xuICAgICAgcmVzb3VyY2VzLmZvckVhY2goKHJlc291cmNlKSA9PiByZXNvdXJjZS5jYW5jZWwoKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFkZDogKHJlc291cmNlT3JSZXNvdXJjZXMpID0+IHtcbiAgICAgICAgW3Jlc291cmNlT3JSZXNvdXJjZXNdLmZsYXQoKS5mb3JFYWNoKChyZXNvdXJjZSkgPT4gcmVzb3VyY2VzLmFkZChyZXNvdXJjZSkpO1xuICAgICAgfSxcbiAgICAgIHJlc291cmNlc1xuICAgIH07XG4gIH0pO1xufTtcbmV4cG9ydCB7XG4gIHVzZUNhbmNlbGFibGUgYXMgdVxufTtcbiIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBEIGFzIERFQk9VTkNFLCBjIGFzIGN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcImVzLXRvb2xraXRcIjtcbmltcG9ydCB7IGNzcywgaHRtbCB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGEgYXMgc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudCwgcyBhcyBzbG90Q2hhbmdlR2V0QXNzaWduZWRFbGVtZW50cyB9IGZyb20gXCIuLi8uLi9jaHVua3MvZG9tLmpzXCI7XG5pbXBvcnQgeyBjIGFzIGNyZWF0ZU9ic2VydmVyIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9vYnNlcnZlcnMuanNcIjtcbmltcG9ydCB7IG8gYXMgb3ZlcmZsb3dBY3Rpb25zLCBxIGFzIHF1ZXJ5QWN0aW9ucywgdCBhcyB0b2dnbGVDaGlsZEFjdGlvblRleHQsIEUgYXMgRXhwYW5kVG9nZ2xlIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9FeHBhbmRUb2dnbGUuanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlVDluIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VUOW4uanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlQ2FuY2VsYWJsZSB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXNlQ2FuY2VsYWJsZS5qc1wiO1xuaW1wb3J0IHsgdSBhcyB1c2VTZXRGb2N1cyB9IGZyb20gXCIuLi8uLi9jaHVua3MvdXNlU2V0Rm9jdXMuanNcIjtcbmNvbnN0IGNhbGN1bGF0ZU1heEl0ZW1zID0gKHtcbiAgYnVmZmVyU2l6ZSA9IDAsXG4gIGNvbnRhaW5lclNpemUsXG4gIGl0ZW1TaXplc1xufSkgPT4ge1xuICBjb25zdCBtYXhTaXplID0gY29udGFpbmVyU2l6ZSAtIGJ1ZmZlclNpemU7XG4gIGxldCBicmVha3BvaW50ID0gaXRlbVNpemVzLmxlbmd0aDtcbiAgbGV0IHNpemVTdW0gPSAwO1xuICBmb3IgKGNvbnN0IFtpbmRleCwgc2l6ZV0gb2YgaXRlbVNpemVzLmVudHJpZXMoKSkge1xuICAgIHNpemVTdW0gPSBzaXplU3VtICsgc2l6ZTtcbiAgICBpZiAoc2l6ZVN1bSA+IG1heFNpemUpIHtcbiAgICAgIGJyZWFrcG9pbnQgPSBpbmRleDtcbiAgICAgIGJyZWFrO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGJyZWFrcG9pbnQ7XG59O1xuY29uc3QgZ2V0T3ZlcmZsb3dDb3VudCA9ICh7XG4gIGJ1ZmZlclNpemUgPSAwLFxuICBjb250YWluZXJTaXplLFxuICBpdGVtU2l6ZXNcbn0pID0+IHtcbiAgcmV0dXJuIE1hdGgubWF4KGl0ZW1TaXplcy5sZW5ndGggLSBjYWxjdWxhdGVNYXhJdGVtcyh7IGJ1ZmZlclNpemUsIGl0ZW1TaXplcywgY29udGFpbmVyU2l6ZSB9KSwgMCk7XG59O1xuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGFjdGlvbkdyb3VwRW5kOiBcImFjdGlvbi1ncm91cC0tZW5kXCJcbn07XG5jb25zdCBTTE9UUyA9IHtcbiAgYWN0aW9uc0VuZDogXCJhY3Rpb25zLWVuZFwiLFxuICBib3R0b21BY3Rpb25zOiBcImJvdHRvbS1hY3Rpb25zXCIsXG4gIGV4cGFuZFRvb2x0aXA6IFwiZXhwYW5kLXRvb2x0aXBcIlxufTtcbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHtib3gtc2l6aW5nOmJvcmRlci1ib3g7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSk7Y29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTIpO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSl9Omhvc3QgKntib3gtc2l6aW5nOmJvcmRlci1ib3h9Omhvc3R7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1zZWxmOnN0cmV0Y2g7YmFja2dyb3VuZDp0cmFuc3BhcmVudH0uY29udGFpbmVye2Rpc3BsYXk6aW5saW5lLWZsZXg7ZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOnZhcigtLWNhbGNpdGUtYWN0aW9uLWJhci1pdGVtcy1zcGFjZSwgMCk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWFjdGlvbi1iYXItYmFja2dyb3VuZC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpKX1Aa2V5ZnJhbWVzIGluezAle29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fTpob3N0KFtmbG9hdGluZ10pIC5jb250YWluZXJ7YW5pbWF0aW9uOmluIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1zbG93KSBlYXNlLWluLW91dDtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLWFjdGlvbi1iYXItY29ybmVyLXJhZGl1cywgdmFyKC0tY2FsY2l0ZS1jb3JuZXItcmFkaXVzLXJvdW5kKSk7LS10dy1zaGFkb3c6IDAgNnB4IDIwcHggLTRweCByZ2JhKDAsIDAsIDAsIC4xKSwgMCA0cHggMTJweCAtMnB4IHJnYmEoMCwgMCwgMCwgLjA4KTstLXR3LXNoYWRvdy1jb2xvcmVkOiAwIDZweCAyMHB4IC00cHggdmFyKC0tdHctc2hhZG93LWNvbG9yKSwgMCA0cHggMTJweCAtMnB4IHZhcigtLXR3LXNoYWRvdy1jb2xvcik7Ym94LXNoYWRvdzp2YXIoLS1jYWxjaXRlLWFjdGlvbi1iYXItc2hhZG93LCB2YXIoLS10dy1yaW5nLW9mZnNldC1zaGFkb3csIDAgMCByZ2JhKDAsIDAsIDAsIDApKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCByZ2JhKDAsIDAsIDAsIDApKSwgdmFyKC0tdHctc2hhZG93KSl9Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pe2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn06aG9zdChbbGF5b3V0PXZlcnRpY2FsXSk6aG9zdChbb3ZlcmZsb3ctYWN0aW9ucy1kaXNhYmxlZF0pIC5jb250YWluZXJ7b3ZlcmZsb3cteTphdXRvfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdKTpob3N0KFtleHBhbmRlZF0pIC5jb250YWluZXJ7bWF4LWlubGluZS1zaXplOnZhcigtLWNhbGNpdGUtYWN0aW9uLWJhci1leHBhbmRlZC1tYXgtd2lkdGgsIGF1dG8pfTpob3N0KFtsYXlvdXQ9dmVydGljYWxdKSAuYWN0aW9uLWdyb3VwLS1lbmR7bWFyZ2luLWJsb2NrLXN0YXJ0OmF1dG99Omhvc3QoW2xheW91dD12ZXJ0aWNhbF0pIDo6c2xvdHRlZChjYWxjaXRlLWFjdGlvbi1ncm91cDpub3QoOmxhc3Qtb2YtdHlwZSkpe2JvcmRlci1ibG9jay1lbmQtd2lkdGg6dmFyKC0tY2FsY2l0ZS1ib3JkZXItd2lkdGgtc20pfTpob3N0KFtsYXlvdXQ9aG9yaXpvbnRhbF0pe2ZsZXgtZGlyZWN0aW9uOnJvd306aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOnJvd306aG9zdChbbGF5b3V0PWhvcml6b250YWxdKTpob3N0KFtvdmVyZmxvdy1hY3Rpb25zLWRpc2FibGVkXSkgLmNvbnRhaW5lcntvdmVyZmxvdy14OmF1dG99Omhvc3QoW2xheW91dD1ob3Jpem9udGFsXSkgLmFjdGlvbi1ncm91cC0tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6YXV0b306aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSA6OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24tZ3JvdXA6bm90KDpsYXN0LW9mLXR5cGUpKXtib3JkZXItaW5saW5lLWVuZC13aWR0aDp2YXIoLS1jYWxjaXRlLWJvcmRlci13aWR0aC1zbSl9LmFjdGlvbi1ncm91cC0tZW5ke2p1c3RpZnktY29udGVudDpmbGV4LWVuZH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1gO1xuY2xhc3MgQWN0aW9uQmFyIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJtdXRhdGlvblwiLCAoKSA9PiB0aGlzLm11dGF0aW9uT2JzZXJ2ZXJIYW5kbGVyKCkpO1xuICAgIHRoaXMuY2FuY2VsYWJsZSA9IHVzZUNhbmNlbGFibGUoKSh0aGlzKTtcbiAgICB0aGlzLnJlc2l6ZSA9IGRlYm91bmNlKCh7IHdpZHRoLCBoZWlnaHQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBleHBhbmRlZCwgZXhwYW5kRGlzYWJsZWQsIGxheW91dCwgb3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWQsIGFjdGlvbkdyb3VwcyB9ID0gdGhpcztcbiAgICAgIGlmIChvdmVyZmxvd0FjdGlvbnNEaXNhYmxlZCB8fCBsYXlvdXQgPT09IFwidmVydGljYWxcIiAmJiAhaGVpZ2h0IHx8IGxheW91dCA9PT0gXCJob3Jpem9udGFsXCIgJiYgIXdpZHRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGl0ZW1TaXplcyA9IHRoaXMuZ2V0SXRlbVNpemVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZUdyb3VwcygpO1xuICAgICAgY29uc3QgZ3JvdXBDb3VudCA9IHRoaXMuaGFzQWN0aW9uc0VuZCB8fCB0aGlzLmhhc0JvdHRvbUFjdGlvbnMgfHwgIWV4cGFuZERpc2FibGVkID8gYWN0aW9uR3JvdXBzLmxlbmd0aCArIDEgOiBhY3Rpb25Hcm91cHMubGVuZ3RoO1xuICAgICAgY29uc3Qgb3ZlcmZsb3dDb3VudCA9IGdldE92ZXJmbG93Q291bnQoe1xuICAgICAgICBidWZmZXJTaXplOiBncm91cENvdW50LFxuICAgICAgICAvLyAxcHggYm9yZGVyIGZvciBlYWNoIGdyb3VwXG4gICAgICAgIGNvbnRhaW5lclNpemU6IGxheW91dCA9PT0gXCJob3Jpem9udGFsXCIgPyB3aWR0aCA6IGhlaWdodCxcbiAgICAgICAgaXRlbVNpemVzXG4gICAgICB9KTtcbiAgICAgIG92ZXJmbG93QWN0aW9ucyh7XG4gICAgICAgIGFjdGlvbkdyb3VwcyxcbiAgICAgICAgZXhwYW5kZWQsXG4gICAgICAgIG92ZXJmbG93Q291bnRcbiAgICAgIH0pO1xuICAgIH0sIERFQk9VTkNFLnJlc2l6ZSk7XG4gICAgdGhpcy5yZXNpemVIYW5kbGVyID0gKGVudHJ5KSA9PiB7XG4gICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGVudHJ5LmNvbnRlbnRSZWN0O1xuICAgICAgdGhpcy5yZXNpemUoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgIH07XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwicmVzaXplXCIsIChlbnRyaWVzKSA9PiB0aGlzLnJlc2l6ZUhhbmRsZXJFbnRyaWVzKGVudHJpZXMpKTtcbiAgICB0aGlzLnRvZ2dsZUV4cGFuZCA9ICgpID0+IHtcbiAgICAgIHRoaXMuZXhwYW5kZWQgPSAhdGhpcy5leHBhbmRlZDtcbiAgICAgIHRoaXMuY2FsY2l0ZUFjdGlvbkJhclRvZ2dsZS5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdXNlVDluKCk7XG4gICAgdGhpcy5mb2N1c1NldHRlciA9IHVzZVNldEZvY3VzKCkodGhpcyk7XG4gICAgdGhpcy5oYXNBY3Rpb25zRW5kID0gZmFsc2U7XG4gICAgdGhpcy5oYXNCb3R0b21BY3Rpb25zID0gZmFsc2U7XG4gICAgdGhpcy5mbG9hdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZXhwYW5kRGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5sYXlvdXQgPSBcInZlcnRpY2FsXCI7XG4gICAgdGhpcy5vdmVyZmxvd0FjdGlvbnNEaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMub3ZlcmxheVBvc2l0aW9uaW5nID0gXCJhYnNvbHV0ZVwiO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLmNhbGNpdGVBY3Rpb25CYXJDb2xsYXBzZSA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gICAgdGhpcy5jYWxjaXRlQWN0aW9uQmFyRXhwYW5kID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVBY3Rpb25CYXJUb2dnbGUgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMubGlzdGVuKFwiY2FsY2l0ZUFjdGlvbk1lbnVPcGVuXCIsIHRoaXMuYWN0aW9uTWVudU9wZW5IYW5kbGVyKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgZXhwYW5kVG9vbHRpcDogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgaGFzQWN0aW9uc0VuZDogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgaGFzQm90dG9tQWN0aW9uczogWzE2LCB7fSwgeyBzdGF0ZTogdHJ1ZSB9XSwgYWN0aW9uc0VuZEdyb3VwTGFiZWw6IDEsIGZsb2F0aW5nOiBbNywge30sIHsgcmVmbGVjdDogdHJ1ZSwgdHlwZTogQm9vbGVhbiB9XSwgZXhwYW5kRGlzYWJsZWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBleHBhbmRlZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIGxheW91dDogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIG1lc3NhZ2VPdmVycmlkZXM6IFswLCB7fSwgeyBhdHRyaWJ1dGU6IGZhbHNlIH1dLCBvdmVyZmxvd0FjdGlvbnNEaXNhYmxlZDogWzcsIHt9LCB7IHJlZmxlY3Q6IHRydWUsIHR5cGU6IEJvb2xlYW4gfV0sIG92ZXJsYXlQb3NpdGlvbmluZzogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIHBvc2l0aW9uOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgc2NhbGU6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBhc3luYyBvdmVyZmxvd0FjdGlvbnMoKSB7XG4gICAgdGhpcy5yZXNpemUoeyB3aWR0aDogdGhpcy5lbC5jbGllbnRXaWR0aCwgaGVpZ2h0OiB0aGlzLmVsLmNsaWVudEhlaWdodCB9KTtcbiAgfVxuICBhc3luYyBzZXRGb2N1cyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNTZXR0ZXIoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfSwgb3B0aW9ucyk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLnVwZGF0ZUdyb3VwcygpO1xuICAgIHRoaXMub3ZlcmZsb3dBY3Rpb25zKCk7XG4gICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyPy5vYnNlcnZlKHRoaXMuZWwsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgIHRoaXMub3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWRIYW5kbGVyKHRoaXMub3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWQpO1xuICAgIHRoaXMuY2FuY2VsYWJsZS5hZGQodGhpcy5yZXNpemUpO1xuICB9XG4gIHdpbGxVcGRhdGUoY2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzLmhhcyhcImV4cGFuZERpc2FibGVkXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5leHBhbmREaXNhYmxlZCAhPT0gZmFsc2UpKSB7XG4gICAgICB0aGlzLm92ZXJmbG93QWN0aW9ucygpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJsYXlvdXRcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLmxheW91dCAhPT0gXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgdGhpcy51cGRhdGVHcm91cHMoKTtcbiAgICB9XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwib3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWRcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLm92ZXJmbG93QWN0aW9uc0Rpc2FibGVkICE9PSBmYWxzZSkpIHtcbiAgICAgIHRoaXMub3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWRIYW5kbGVyKHRoaXMub3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWQpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJleHBhbmRlZFwiKSAmJiB0aGlzLmhhc1VwZGF0ZWQpIHtcbiAgICAgIHRoaXMuZXhwYW5kZWRIYW5kbGVyKCk7XG4gICAgICBpZiAodGhpcy5leHBhbmRlZCkge1xuICAgICAgICB0aGlzLmNhbGNpdGVBY3Rpb25CYXJFeHBhbmQuZW1pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYWxjaXRlQWN0aW9uQmFyQ29sbGFwc2UuZW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBsb2FkZWQoKSB7XG4gICAgdGhpcy5vdmVyZmxvd0FjdGlvbnMoKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuICBnZXRJdGVtU2l6ZXMoKSB7XG4gICAgY29uc3QgeyBlbCwgbGF5b3V0LCBleHBhbmRUb2dnbGVFbCB9ID0gdGhpcztcbiAgICBjb25zdCBhY3Rpb25zID0gcXVlcnlBY3Rpb25zKGVsKTtcbiAgICBpZiAoZXhwYW5kVG9nZ2xlRWwpIHtcbiAgICAgIGFjdGlvbnMucHVzaChleHBhbmRUb2dnbGVFbCk7XG4gICAgfVxuICAgIGNvbnN0IGNsaWVudFNpemUgPSBsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiID8gXCJjbGllbnRXaWR0aFwiIDogXCJjbGllbnRIZWlnaHRcIjtcbiAgICBjb25zdCBmYWxsYmFja1NpemUgPSBNYXRoLm1heCguLi5hY3Rpb25zLm1hcCgoYWN0aW9uKSA9PiBhY3Rpb25bY2xpZW50U2l6ZV0gfHwgMCkpO1xuICAgIHJldHVybiBhY3Rpb25zLm1hcCgoYWN0aW9uKSA9PiBhY3Rpb25bY2xpZW50U2l6ZV0gfHwgZmFsbGJhY2tTaXplKTtcbiAgfVxuICBleHBhbmRlZEhhbmRsZXIoKSB7XG4gICAgY29uc3QgeyBlbCwgZXhwYW5kZWQgfSA9IHRoaXM7XG4gICAgdG9nZ2xlQ2hpbGRBY3Rpb25UZXh0KHsgZWwsIGV4cGFuZGVkIH0pO1xuICAgIHRoaXMub3ZlcmZsb3dBY3Rpb25zKCk7XG4gIH1cbiAgb3ZlcmZsb3dBY3Rpb25zRGlzYWJsZWRIYW5kbGVyKG92ZXJmbG93QWN0aW9uc0Rpc2FibGVkKSB7XG4gICAgaWYgKG92ZXJmbG93QWN0aW9uc0Rpc2FibGVkKSB7XG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/Lm9ic2VydmUodGhpcy5lbCk7XG4gICAgdGhpcy5vdmVyZmxvd0FjdGlvbnMoKTtcbiAgfVxuICBhY3Rpb25NZW51T3BlbkhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0Lm1lbnVPcGVuKSB7XG4gICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgIHRoaXMuYWN0aW9uR3JvdXBzPy5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgICBpZiAoIWNvbXBvc2VkUGF0aC5pbmNsdWRlcyhncm91cCkpIHtcbiAgICAgICAgICBncm91cC5tZW51T3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgbXV0YXRpb25PYnNlcnZlckhhbmRsZXIoKSB7XG4gICAgdGhpcy51cGRhdGVHcm91cHMoKTtcbiAgICB0aGlzLm92ZXJmbG93QWN0aW9ucygpO1xuICB9XG4gIHJlc2l6ZUhhbmRsZXJFbnRyaWVzKGVudHJpZXMpIHtcbiAgICBlbnRyaWVzLmZvckVhY2godGhpcy5yZXNpemVIYW5kbGVyKTtcbiAgfVxuICB1cGRhdGVHcm91cHMoKSB7XG4gICAgY29uc3QgZ3JvdXBzID0gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLWFjdGlvbi1ncm91cFwiKSk7XG4gICAgdGhpcy5hY3Rpb25Hcm91cHMgPSBncm91cHM7XG4gICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICBncm91cC5sYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICAgIGdyb3VwLnNjYWxlID0gdGhpcy5zY2FsZTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVEZWZhdWx0U2xvdENoYW5nZSgpIHtcbiAgICB0aGlzLnVwZGF0ZUdyb3VwcygpO1xuICB9XG4gIGhhbmRsZUFjdGlvbnNFbmRTbG90Q2hhbmdlKGV2ZW50KSB7XG4gICAgdGhpcy5oYXNBY3Rpb25zRW5kID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gIH1cbiAgaGFuZGxlQm90dG9tQWN0aW9uc1Nsb3RDaGFuZ2UoZXZlbnQpIHtcbiAgICB0aGlzLmhhc0JvdHRvbUFjdGlvbnMgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgfVxuICBoYW5kbGVUb29sdGlwU2xvdENoYW5nZShldmVudCkge1xuICAgIGNvbnN0IHRvb2x0aXBzID0gc2xvdENoYW5nZUdldEFzc2lnbmVkRWxlbWVudHMoZXZlbnQpLmZpbHRlcigoZWwpID0+IGVsPy5tYXRjaGVzKFwiY2FsY2l0ZS10b29sdGlwXCIpKTtcbiAgICB0aGlzLmV4cGFuZFRvb2x0aXAgPSB0b29sdGlwc1swXTtcbiAgfVxuICByZW5kZXJCb3R0b21BY3Rpb25Hcm91cCgpIHtcbiAgICBjb25zdCB7IGV4cGFuZGVkLCBleHBhbmREaXNhYmxlZCwgZWwsIHBvc2l0aW9uLCB0b2dnbGVFeHBhbmQsIHNjYWxlLCBsYXlvdXQsIG1lc3NhZ2VzLCBhY3Rpb25zRW5kR3JvdXBMYWJlbCwgb3ZlcmxheVBvc2l0aW9uaW5nIH0gPSB0aGlzO1xuICAgIGNvbnN0IGV4cGFuZFRvZ2dsZU5vZGUgPSAhZXhwYW5kRGlzYWJsZWQgPyBFeHBhbmRUb2dnbGUoeyBjb2xsYXBzZUxhYmVsOiBtZXNzYWdlcy5jb2xsYXBzZUxhYmVsLCBjb2xsYXBzZVRleHQ6IG1lc3NhZ2VzLmNvbGxhcHNlLCBlbCwgZXhwYW5kTGFiZWw6IG1lc3NhZ2VzLmV4cGFuZExhYmVsLCBleHBhbmRUZXh0OiBtZXNzYWdlcy5leHBhbmQsIGV4cGFuZGVkLCBwb3NpdGlvbiwgcmVmOiAoZWwyKSA9PiB0aGlzLmV4cGFuZFRvZ2dsZUVsID0gZWwyLCBzY2FsZSwgdG9nZ2xlOiB0b2dnbGVFeHBhbmQsIHRvb2x0aXA6IHRoaXMuZXhwYW5kVG9vbHRpcCB9KSA6IG51bGw7XG4gICAgcmV0dXJuIGh0bWxgPGNhbGNpdGUtYWN0aW9uLWdyb3VwIGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5hY3Rpb25Hcm91cEVuZCl9IC5oaWRkZW49JHt0aGlzLmV4cGFuZERpc2FibGVkICYmICEodGhpcy5oYXNBY3Rpb25zRW5kIHx8IHRoaXMuaGFzQm90dG9tQWN0aW9ucyl9IC5sYWJlbD0ke2FjdGlvbnNFbmRHcm91cExhYmVsfSAubGF5b3V0PSR7bGF5b3V0fSAub3ZlcmxheVBvc2l0aW9uaW5nPSR7b3ZlcmxheVBvc2l0aW9uaW5nfSAuc2NhbGU9JHtzY2FsZX0+PHNsb3QgbmFtZT0ke1NMT1RTLmFjdGlvbnNFbmR9IEBzbG90Y2hhbmdlPSR7dGhpcy5oYW5kbGVBY3Rpb25zRW5kU2xvdENoYW5nZX0+PC9zbG90PjxzbG90IG5hbWU9JHtTTE9UUy5ib3R0b21BY3Rpb25zfSBAc2xvdGNoYW5nZT0ke3RoaXMuaGFuZGxlQm90dG9tQWN0aW9uc1Nsb3RDaGFuZ2V9Pjwvc2xvdD48c2xvdCBuYW1lPSR7U0xPVFMuZXhwYW5kVG9vbHRpcH0gQHNsb3RjaGFuZ2U9JHt0aGlzLmhhbmRsZVRvb2x0aXBTbG90Q2hhbmdlfT48L3Nsb3Q+JHtleHBhbmRUb2dnbGVOb2RlfTwvY2FsY2l0ZS1hY3Rpb24tZ3JvdXA+YDtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY29udGFpbmVyKX0+PHNsb3QgQHNsb3RjaGFuZ2U9JHt0aGlzLmhhbmRsZURlZmF1bHRTbG90Q2hhbmdlfT48L3Nsb3Q+JHt0aGlzLnJlbmRlckJvdHRvbUFjdGlvbkdyb3VwKCl9PC9kaXY+YDtcbiAgfVxufVxuY3VzdG9tRWxlbWVudChcImNhbGNpdGUtYWN0aW9uLWJhclwiLCBBY3Rpb25CYXIpO1xuZXhwb3J0IHtcbiAgQWN0aW9uQmFyXG59O1xuIiwiaW1wb3J0IFwiLi4vY2FsY2l0ZS1hY3Rpb24vaW5kZXguanNcIjtcbmltcG9ydCBcIi4uL2NhbGNpdGUtYWN0aW9uLWdyb3VwL2luZGV4LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jdXN0b21FbGVtZW50LmpzXCI7IiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGMgYXMgY3VzdG9tRWxlbWVudCB9IGZyb20gXCIuLi8uLi9jaHVua3MvcnVudGltZS5qc1wiO1xuaW1wb3J0IHsgY3NzLCBodG1sIH0gZnJvbSBcImxpdFwiO1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgY3JlYXRlRXZlbnQsIHNhZmVDbGFzc01hcCB9IGZyb20gXCJAYXJjZ2lzL2x1bWluYVwiO1xuaW1wb3J0IHsgUyBhcyBTTE9UUyB9IGZyb20gXCIuLi8uLi9jaHVua3MvcmVzb3VyY2VzMi5qc1wiO1xuaW1wb3J0IHsgYSBhcyBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9kb20uanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlVDluIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VUOW4uanNcIjtcbmltcG9ydCB7IHUgYXMgdXNlU2V0Rm9jdXMgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3VzZVNldEZvY3VzLmpzXCI7XG5pbXBvcnQgeyBJIGFzIElDT05TLCBTIGFzIFNMT1RTJDEsIEMgYXMgQ1NTIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9yZXNvdXJjZXM4LmpzXCI7XG5jb25zdCBzdHlsZXMgPSBjc3NgOmhvc3R7LS1jYWxjaXRlLWludGVybmFsLWNvbG9yLWZvY3VzOiB2YXIoIC0tY2FsY2l0ZS1jb2xvci1mb2N1cywgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1icmFuZCkpICl9Omhvc3R7Ym94LXNpemluZzpib3JkZXItYm94O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpO2NvbG9yOnZhcigtLWNhbGNpdGUtY29sb3ItdGV4dC0yKTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfTpob3N0ICp7Ym94LXNpemluZzpib3JkZXItYm94fTpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cGFkZGluZzowO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLWNvbG9yOnZhcigtLWNhbGNpdGUtYWN0aW9uLWdyb3VwLWJvcmRlci1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1ib3JkZXItMykpO2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MH0uY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWdyb3c6MTtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QoW2NvbHVtbnM9XCIxXCJdKXstLWNhbGNpdGUtaW50ZXJuYWwtYWN0aW9uLWdyb3VwLWNvbHVtbnM6IDF9Omhvc3QoW2NvbHVtbnM9XCIyXCJdKXstLWNhbGNpdGUtaW50ZXJuYWwtYWN0aW9uLWdyb3VwLWNvbHVtbnM6IDJ9Omhvc3QoW2NvbHVtbnM9XCIzXCJdKXstLWNhbGNpdGUtaW50ZXJuYWwtYWN0aW9uLWdyb3VwLWNvbHVtbnM6IDN9Omhvc3QoW2NvbHVtbnM9XCI0XCJdKXstLWNhbGNpdGUtaW50ZXJuYWwtYWN0aW9uLWdyb3VwLWNvbHVtbnM6IDR9Omhvc3QoW2NvbHVtbnM9XCI1XCJdKXstLWNhbGNpdGUtaW50ZXJuYWwtYWN0aW9uLWdyb3VwLWNvbHVtbnM6IDV9Omhvc3QoW2NvbHVtbnM9XCI2XCJdKXstLWNhbGNpdGUtaW50ZXJuYWwtYWN0aW9uLWdyb3VwLWNvbHVtbnM6IDZ9Omhvc3QoOmZpcnN0LWNoaWxkKXtwYWRkaW5nLWJsb2NrLXN0YXJ0OjBweH06aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSw6aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSAuY29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOnJvd306aG9zdChbbGF5b3V0PWdyaWRdKXtkaXNwbGF5OmdyaWR9Omhvc3QoW2xheW91dD1ncmlkXSkgLmNvbnRhaW5lcntkaXNwbGF5OmdyaWQ7cGxhY2UtY29udGVudDpzdHJldGNoO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCh2YXIoLS1jYWxjaXRlLWFjdGlvbi1ncm91cC1jb2x1bW5zLCB2YXIoLS1jYWxjaXRlLWludGVybmFsLWFjdGlvbi1ncm91cC1jb2x1bW5zLCAzKSksYXV0byk7Z2FwOnZhcigtLWNhbGNpdGUtYWN0aW9uLWdyb3VwLWdhcCwgMXB4KTtwYWRkaW5nOnZhcigtLWNhbGNpdGUtYWN0aW9uLWdyb3VwLWdhcCwgMXB4KX06aG9zdChbbGF5b3V0PWhvcml6b250YWxdKSA6OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24tZ3JvdXApe2JvcmRlci1pbmxpbmUtZW5kOnZhcigtLWNhbGNpdGUtc2l6ZS1weCl9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9YDtcbmNsYXNzIEFjdGlvbkdyb3VwIGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVzZVQ5bigpO1xuICAgIHRoaXMuZm9jdXNTZXR0ZXIgPSB1c2VTZXRGb2N1cygpKHRoaXMpO1xuICAgIHRoaXMuaGFzTWVudUFjdGlvbnMgPSBmYWxzZTtcbiAgICB0aGlzLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5sYXlvdXQgPSBcInZlcnRpY2FsXCI7XG4gICAgdGhpcy5tZW51T3BlbiA9IGZhbHNlO1xuICAgIHRoaXMub3ZlcmxheVBvc2l0aW9uaW5nID0gXCJhYnNvbHV0ZVwiO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLmNhbGNpdGVBY3Rpb25Hcm91cENvbGxhcHNlID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVBY3Rpb25Hcm91cEV4cGFuZCA9IGNyZWF0ZUV2ZW50KHsgY2FuY2VsYWJsZTogZmFsc2UgfSk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGhhc01lbnVBY3Rpb25zOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBjb2x1bW5zOiBbMTEsIHt9LCB7IHR5cGU6IE51bWJlciwgcmVmbGVjdDogdHJ1ZSB9XSwgZXhwYW5kZWQ6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBsYWJlbDogMSwgbGF5b3V0OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgbWVudUZsaXBQbGFjZW1lbnRzOiBbMCwge30sIHsgYXR0cmlidXRlOiBmYWxzZSB9XSwgbWVudU9wZW46IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBtZW51UGxhY2VtZW50OiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSwgbWVzc2FnZU92ZXJyaWRlczogWzAsIHt9LCB7IGF0dHJpYnV0ZTogZmFsc2UgfV0sIG92ZXJsYXlQb3NpdGlvbmluZzogWzMsIHt9LCB7IHJlZmxlY3Q6IHRydWUgfV0sIHNjYWxlOiBbMywge30sIHsgcmVmbGVjdDogdHJ1ZSB9XSB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IHsgbW9kZTogXCJvcGVuXCIsIGRlbGVnYXRlc0ZvY3VzOiB0cnVlIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBhc3luYyBzZXRGb2N1cyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNTZXR0ZXIoKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZWw7XG4gICAgfSwgb3B0aW9ucyk7XG4gIH1cbiAgd2lsbFVwZGF0ZShjaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuaGFzKFwiZXhwYW5kZWRcIikpIHtcbiAgICAgIGlmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5leHBhbmRlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5tZW51T3BlbiA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzVXBkYXRlZCkge1xuICAgICAgICBpZiAodGhpcy5leHBhbmRlZCkge1xuICAgICAgICAgIHRoaXMuY2FsY2l0ZUFjdGlvbkdyb3VwRXhwYW5kLmVtaXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmNhbGNpdGVBY3Rpb25Hcm91cENvbGxhcHNlLmVtaXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBzZXRNZW51T3BlbihldmVudCkge1xuICAgIHRoaXMubWVudU9wZW4gPSAhIWV2ZW50LmN1cnJlbnRUYXJnZXQub3BlbjtcbiAgfVxuICBoYW5kbGVNZW51QWN0aW9uc1Nsb3RDaGFuZ2UoZXZlbnQpIHtcbiAgICB0aGlzLmhhc01lbnVBY3Rpb25zID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gIH1cbiAgcmVuZGVyTWVudSgpIHtcbiAgICBjb25zdCB7IGV4cGFuZGVkLCBtZW51T3Blbiwgc2NhbGUsIGxheW91dCwgbWVzc2FnZXMsIG92ZXJsYXlQb3NpdGlvbmluZywgaGFzTWVudUFjdGlvbnMsIG1lbnVGbGlwUGxhY2VtZW50cywgbWVudVBsYWNlbWVudCB9ID0gdGhpcztcbiAgICByZXR1cm4gaHRtbGA8Y2FsY2l0ZS1hY3Rpb24tbWVudSAuZXhwYW5kZWQ9JHtleHBhbmRlZH0gLmZsaXBQbGFjZW1lbnRzPSR7bWVudUZsaXBQbGFjZW1lbnRzID8/IChsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiID8gW1widG9wXCIsIFwiYm90dG9tXCJdIDogW1wibGVmdFwiLCBcInJpZ2h0XCJdKX0gLmhpZGRlbj0keyFoYXNNZW51QWN0aW9uc30gLmxhYmVsPSR7bWVzc2FnZXMubW9yZX0gQGNhbGNpdGVBY3Rpb25NZW51T3Blbj0ke3RoaXMuc2V0TWVudU9wZW59IC5vcGVuPSR7bWVudU9wZW59IC5vdmVybGF5UG9zaXRpb25pbmc9JHtvdmVybGF5UG9zaXRpb25pbmd9IC5wbGFjZW1lbnQ9JHttZW51UGxhY2VtZW50ID8/IChsYXlvdXQgPT09IFwiaG9yaXpvbnRhbFwiID8gXCJib3R0b20tc3RhcnRcIiA6IFwibGVhZGluZy1zdGFydFwiKX0gLnNjYWxlPSR7c2NhbGV9PjxjYWxjaXRlLWFjdGlvbiAuYXJpYT0ke3sgZXhwYW5kZWQgfX0gLmljb249JHtJQ09OUy5tZW51fSAuc2NhbGU9JHtzY2FsZX0gc2xvdD0ke1NMT1RTLnRyaWdnZXJ9IC50ZXh0PSR7bWVzc2FnZXMubW9yZX0gLnRleHRFbmFibGVkPSR7ZXhwYW5kZWR9PjwvY2FsY2l0ZS1hY3Rpb24+PHNsb3QgbmFtZT0ke1NMT1RTJDEubWVudUFjdGlvbnN9IEBzbG90Y2hhbmdlPSR7dGhpcy5oYW5kbGVNZW51QWN0aW9uc1Nsb3RDaGFuZ2V9Pjwvc2xvdD48c2xvdCBuYW1lPSR7U0xPVFMkMS5tZW51VG9vbHRpcH0gc2xvdD0ke1NMT1RTLnRvb2x0aXB9Pjwvc2xvdD48L2NhbGNpdGUtYWN0aW9uLW1lbnU+YDtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiAuYXJpYUxhYmVsPSR7dGhpcy5sYWJlbH0gY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmNvbnRhaW5lcil9IHJvbGU9Z3JvdXA+PHNsb3Q+PC9zbG90PiR7dGhpcy5yZW5kZXJNZW51KCl9PC9kaXY+YDtcbiAgfVxufVxuY3VzdG9tRWxlbWVudChcImNhbGNpdGUtYWN0aW9uLWdyb3VwXCIsIEFjdGlvbkdyb3VwKTtcbmV4cG9ydCB7XG4gIEFjdGlvbkdyb3VwXG59O1xuIiwiaW1wb3J0IFwiLi4vY2FsY2l0ZS1hY3Rpb24tbWVudS9pbmRleC5qc1wiO1xuaW1wb3J0IFwiLi4vY2FsY2l0ZS1hY3Rpb24vaW5kZXguanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2N1c3RvbUVsZW1lbnQuanNcIjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=