export const __webpack_id__ = "vendors-node_modules_arcgis_core_layers_VoxelWasmPerSceneView_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_layers_VoxelWasmPerSceneView_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ A)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_timeUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/timeUtils.js */ "./node_modules/@arcgis/core/core/timeUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_support_coordinateSystem_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../geometry/support/coordinateSystem.js */ "./node_modules/@arcgis/core/geometry/support/coordinateSystem.js");
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../geometry/support/frustum.js */ "./node_modules/@arcgis/core/geometry/support/frustum.js");
/* harmony import */ var _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../libs/vxl/enums.js */ "./node_modules/@arcgis/core/libs/vxl/enums.js");
/* harmony import */ var _libs_vxl_VxlModule_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../libs/vxl/VxlModule.js */ "./node_modules/@arcgis/core/libs/vxl/VxlModule.js");
/* harmony import */ var _views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../views/ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _views_3d_layers_VoxelGraphic_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../views/3d/layers/VoxelGraphic.js */ "./node_modules/@arcgis/core/views/3d/layers/VoxelGraphic.js");
/* harmony import */ var _views_3d_layers_i3s_Intersector_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../views/3d/layers/i3s/Intersector.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Intersector.js");
/* harmony import */ var _views_3d_state_Frustum_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../views/3d/state/Frustum.js */ "./node_modules/@arcgis/core/views/3d/state/Frustum.js");
/* harmony import */ var _views_3d_support_RenderCoordsHelper_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../views/3d/support/RenderCoordsHelper.js */ "./node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js");
/* harmony import */ var _views_3d_webgl_engine_effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../views/3d/webgl-engine/effects/RenderPlugin.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js");
/* harmony import */ var _views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/* harmony import */ var _views_3d_webgl_engine_lib_IntersectorResult_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/IntersectorResult.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorResult.js");
/* harmony import */ var _views_3d_webgl_engine_lib_IntersectorType_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/IntersectorType.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorType.js");
/* harmony import */ var _views_3d_webgl_engine_lib_RenderFeature_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/RenderFeature.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderFeature.js");
/* harmony import */ var _views_3d_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/RenderSlot.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js");
/* harmony import */ var _views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../views/webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var U;!function(e){e[e.Lifetime=1]="Lifetime",e[e.RequestResponse=2]="RequestResponse",e[e.Rendering=3]="Rendering",e[e.Error=4]="Error"}(U||(U={}));let k=class extends _views_3d_webgl_engine_effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_21__.SyncRenderPlugin{constructor(e){super(e),this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.produces=new Map([[_views_3d_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_26__.RenderSlot.VOXEL,()=>!!this._vxl&&"local"===this.view.viewingMode]]),this.type=_views_3d_webgl_engine_lib_IntersectorType_js__WEBPACK_IMPORTED_MODULE_24__.IntersectorType.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerViewUid=[]}_dbg(e,t){this._dbgFlags.has(e)&&(e===U.Error?_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(t):_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this.view.stage&&(this._dbg(U.Lifetime,"--removeRenderPlugin--"),this.view.stage.removeRenderPlugin(this)),this._pluginIsActive=!1}initialize(){this._dbg(U.Lifetime,"--initialize--");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>this.view.ready),(e=>{e&&"local"===this.view.viewingMode?(this._dbg(U.Lifetime,"view ready status changed to ready on a local view, calling addRenderPlugin"),this.view.stage.addRenderPlugin(this),this._pluginIsActive=!0):(this._dbg(U.Lifetime,"view ready status changed, not ready or not a local view!"),this._removeRenderPlugin())}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>this.view?.qualityProfile),(e=>{this._dbg(U.Rendering,"qualityProfile changed to "+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>this.view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this.view?.timeExtent);this._dbg(U.Rendering,"sceneView timeExtent changed to useTime="+e.hasTime+" st="+e.startTime+" et="+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.hasTime),this._renderPluginContext.requestRender()}}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>this.view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))])}initializeRenderContext(e){this._dbg(U.Lifetime,"--initializeRenderContext--");const t=e.renderContext.rctx;this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(U.Lifetime,"--uninitializeRenderContext--")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(U.Error,"no context in restoreFramebuffer!");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const s=!!this._rctx,r=!!this._renderTargetToRestore;if(!s||!r)return 0;const i=this._renderTargetToRestore.fbo.depthStencilTexture;return i?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(i,e,!0),1):(this._dbg(U.Error,"no depth/stencil texture exists!"),0)}_modifyResourceCount(e,t,s){if(!this._rctx)return void this._dbg(U.Error,"modifyAllocation callback has no rendering context!");const r=e;1===s?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,s,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,s),this._rctx.setBlendEquation(r)):this._dbg(U.Error,"setBlendState callback has no rendering context!")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(U.Error,"setFrontFace callback has no rendering context!")}_setDepthStencilStateFunction(e,t,s){this._rctx?(this._rctx.setDepthFunction(s),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.CompareFunction.ALWAYS,0,255),this._rctx.setStencilOpSeparate(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.FRONT,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.INCR,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP),this._rctx.setStencilOpSeparate(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.BACK,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.DECR,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP)):this._dbg(U.Error,"setDepthStencilStateFunction callback has no rendering context!")}_setRasterizerState(e){if(this._rctx)switch(e){case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.WasmCullMode.None:this._rctx.setFaceCullingEnabled(!1);break;case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.WasmCullMode.Back:this._rctx.setCullFace(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.BACK),this._rctx.setFaceCullingEnabled(!0);break;case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.WasmCullMode.Front:this._rctx.setCullFace(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(U.Error,"setRasterizerState callback has no rendering context!")}_setViewport(e,t,s,r){this._rctx?this._rctx.setViewport(e,t,s,r):this._dbg(U.Error,"setViewport callback has no rendering context!")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const s=this._vxl.estimate_memory_usage(t);s>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(s))}}))}_syncRequestsResponses(){this._layers.forEach(((e,s)=>{const i=[];e.responses.forEach(((t,r)=>{i.push(r),this._dbg(U.RequestResponse,"responding for requestID:"+r+" size:"+t.size),this._vxl.respond(s,r,t),t.requestType!==_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.VoxelRequestType.TreeIndex&&t.requestType!==_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.VoxelRequestType.Section||(e.needMemoryUsageUpdate=!0)}));const a=e.responses;for(const t of i)a.delete(t);const n=this._vxl.get_new_requests(s),o=e.abortController.signal;for(const l in n){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const s=n[l],i={responseType:"array-buffer",signal:o,query:{...e.layerView.layer.customParameters,token:e.layerView.layer.apiKey}};this._dbg(U.RequestResponse,"making requestID:"+l+" url:"+s.url),(0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(s.url,i).then((t=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(U.RequestResponse,"have response for requestID:"+l);let r=0;if(t.data.byteLength>0){r=this._vxl._malloc(t.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,t.data.byteLength),s=new Uint8Array(t.data);for(let r=0;r<t.data.byteLength;++r)e[r]=s[r]}a.set(+l,{responseType:s.responseType,ptr:r,size:t.data.byteLength,success:!0,requestType:s.requestType})})).catch((t=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.isAbortError)(t)||(this._dbg(U.Error,`requestID:${l} failed, error=${t.toString()}`),a.set(+l,{responseType:s.responseType,ptr:0,size:0,success:!1,requestType:s.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const s=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<s.length;++e)t.push(s[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),s.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setIsInScaleRange(e,t){const s=this._layers.get(e.wasmLayerId);s&&t!==s.isInScaleRange&&(s.isInScaleRange=t,this._vxl.set_is_in_scale_range(e.wasmLayerId,t),s.needMemoryUsageUpdate=!t,this._renderPluginContext.requestRender())}setStaticSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,s,!0)}setCurrentVariable(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,s,!0)}setRenderMode(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,s,!0)}setVerticalExaggerationAndOffset(e,t,s,r){const i={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:s,verticalOffset:r}};return this._doMaskedUIUpdate(e,i,!0)}setVariableStyles(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setVolumeStyles(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setEnableDynamicSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.ContainerType.DynamicSections};return this._doMaskedUIUpdate(e,s,!0)}setEnableIsosurfaces(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.ContainerType.Isosurfaces};return this._doMaskedUIUpdate(e,s,!0)}setEnableSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.ContainerType.StaticSections};return this._doMaskedUIUpdate(e,s,!0)}setAnalysisSlice(e,t,s,r){const i={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_14__.UpdateFlags.AnalysisSlice,analysisSlice:{point:s,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,i,!0)}updateLayerTimeProperties(e){if(!this._vxl)return;const t=this._layers.get(e.wasmLayerId);if(t){const s=t.layerView.layer;let r=0;s.timeOffset&&(r=(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_6__.convertTime)(s.timeOffset.value,s.timeOffset.unit,"seconds"));const i=this._getTimeArgs(s.timeExtent);this._vxl.set_layer_time_properties(e.wasmLayerId,i.startTime,i.endTime,i.hasTime,s.useViewTime,r),this._renderPluginContext.requestRender()}}_doMaskedUIUpdate(e,t,s){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((s,i)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(i,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&s&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,s,r,i){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],e[3*(t+=1)]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_addNormalToWasmBuffer(e,t,s){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,s=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,s,3*e),i=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,i,e),n=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.NEAR_BOTTOM_LEFT],o=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.NEAR_BOTTOM_RIGHT],l=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.NEAR_TOP_RIGHT],h=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.NEAR_TOP_LEFT],d=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.FAR_BOTTOM_LEFT],u=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.FAR_BOTTOM_RIGHT],m=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.FAR_TOP_RIGHT],g=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PointIndex.FAR_TOP_LEFT];let f=0,p=0;const y=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PlaneIndex.NEAR];f=this._addTriangleToWasmBuffer(r,f,l,o,n),p=this._addNormalToWasmBuffer(a,p,y),f=this._addTriangleToWasmBuffer(r,f,n,h,l),p=this._addNormalToWasmBuffer(a,p,y);const x=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PlaneIndex.FAR];f=this._addTriangleToWasmBuffer(r,f,d,u,m),p=this._addNormalToWasmBuffer(a,p,x),f=this._addTriangleToWasmBuffer(r,f,m,g,d),p=this._addNormalToWasmBuffer(a,p,x);const v=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PlaneIndex.TOP];f=this._addTriangleToWasmBuffer(r,f,m,l,h),p=this._addNormalToWasmBuffer(a,p,v),f=this._addTriangleToWasmBuffer(r,f,h,g,m),p=this._addNormalToWasmBuffer(a,p,v);const b=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PlaneIndex.BOTTOM];f=this._addTriangleToWasmBuffer(r,f,n,o,u),p=this._addNormalToWasmBuffer(a,p,b),f=this._addTriangleToWasmBuffer(r,f,u,d,n),p=this._addNormalToWasmBuffer(a,p,b);const w=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PlaneIndex.LEFT];f=this._addTriangleToWasmBuffer(r,f,h,n,d),p=this._addNormalToWasmBuffer(a,p,w),f=this._addTriangleToWasmBuffer(r,f,d,g,h),p=this._addNormalToWasmBuffer(a,p,w);const T=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_13__.PlaneIndex.RIGHT];f=this._addTriangleToWasmBuffer(r,f,l,m,u),p=this._addNormalToWasmBuffer(a,p,T),f=this._addTriangleToWasmBuffer(r,f,u,o,l),p=this._addNormalToWasmBuffer(a,p,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(s,3*e,i,e,255,0,0,64),this._vxl._free(s),this._vxl._free(i),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=_views_3d_support_RenderCoordsHelper_js__WEBPACK_IMPORTED_MODULE_20__.RenderCoordsHelper.create(_views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_16__.ViewingMode.Local,(0,_geometry_support_coordinateSystem_js__WEBPACK_IMPORTED_MODULE_12__.renderSRFromViewSR)(!1,this.view.spatialReference))),null===this._frustum&&(this._frustum=new _views_3d_state_Frustum_js__WEBPACK_IMPORTED_MODULE_19__.Frustum(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,s)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(s),this._renderPluginContext.requestRender())}))}dropQueryRenderTarget(){this._vxl&&this._vxl.drop_query_rt()}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},s=new Promise(((e,s)=>{t.resolveCallback=e,t.rejectCallback=s}));return this._newLayers.push(t),s}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const s=this._newLayers.length;return 0===s&&(this._dbg(U.Lifetime," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}let t=-1;this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){t=r,s.abortController.abort(),this._vxl.remove_layer(t);const i=this.layerViewUid.indexOf(e.uid);-1!==i&&this.layerViewUid.splice(i,1)}})),t>=0&&this._layers.delete(t);const s=this._layers.size;return 0===s&&(this._dbg(U.Lifetime," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=!1;return null!=e&&(e.isAllTime?r=!0:(null!=e.start&&(r=!0,t=e.start.getTime()/1e3),null!=e.end&&(r=!0,s=e.end.getTime()/1e3))),{startTime:t,endTime:s,hasTime:r}}_addVoxelLayer(e){const t=e.layer;let r=-1;const i=t.getConfiguration();if(i.length<1)return-1;const a={str:i,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(a))return-1;const o=this._getTimeArgs(t.timeExtent),l=this.view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;let h=0;if(t.timeOffset&&(h=(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_6__.convertTime)(t.timeOffset.value,t.timeOffset.unit,"seconds")),r=this._vxl.add_layer(t.serviceRoot,a.ptr,a.byteCount,l,l,o.startTime,o.endTime,o.hasTime,t.useViewTime,h,this._toWasmQuality(this.view.qualityProfile)),a.isReusable||this._vxl._free(a.ptr),r>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const i=new AbortController;if(this._layers.set(r,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:i,needMemoryUsageUpdate:!1,isInScaleRange:!0}),this.layerViewUid.push(e.uid),!this._halfIntTexturesAvailable||(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("mac")){const t=[];let r="";for(const s of e.layer.variables)"Int16"!==s.renderingFormat.type&&"UInt16"!==s.renderingFormat.type||(t.push(s.name),s.id===e.layer.currentVariableId&&(r=s.name));""!==r&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${r}' in this browser`),t.length>0&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let r="";for(const s of e.layer.variables)"Float32"===s.renderingFormat.type&&(t.push(s.name),s.id===e.layer.currentVariableId&&(r=s.name));""!==r&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${r}' in this browser`),t.length>0&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-mobile")&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warnOnce("Mobile support differs across devices. Voxel layer might not display as expected."),r}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bind.camera.viewForward,s=e.bind.camera.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(U.RequestResponse,"missingResourceCount="+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}acquireTechniques(){return[]}render(e){if(!this._vxl)return;for(const s of this._newLayers){const e=this._addVoxelLayer(s.layerView);-1===e?s.rejectCallback(-1):s.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(U.Error,"No voxel layers but RenderPlugin instance is being asked to render!");this._lastFrameWasStationary=this.view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this.view.stage.renderer.isFeatureEnabled(_views_3d_webgl_engine_lib_RenderFeature_js__WEBPACK_IMPORTED_MODULE_25__.RenderFeature.HighResolutionVoxel),e.bind.lighting.mainLight.direction[0],e.bind.lighting.mainLight.direction[1],e.bind.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(U.Error,"Unsupported viewport parameters detected!"),this.updateWasmCamera(e.bind.camera),this._captureFrustum&&(this._frustum.update(e.bind.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(U.Lifetime,"--destroy--"),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._removeRenderPlugin(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=(0,_libs_vxl_VxlModule_js__WEBPACK_IMPORTED_MODULE_15__.loadVoxelWASM)(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(U.Lifetime," no voxel layers left after WASM downloaded, removing RenderPlugin and destroying"),void this.destroy();const t=this._getTimeArgs(this.view?.timeExtent),s=this._vxl.addFunction(this._restoreFramebuffer.bind(this),"v"),r=this._vxl.addFunction(this._setBlendState.bind(this),"viiii"),i=this._vxl.addFunction(this._setFrontFace.bind(this),"vi"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),"vi"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),"viii"),o=this._vxl.addFunction(this._setViewport.bind(this),"viiii"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),"iii"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),"viii"),d=this._halfIntTexturesAvailable&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("mac"),u=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(s,r,i,a,n,o,l,h,t.startTime,t.endTime,t.hasTime,d,u),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(U.Error," WASM failed to download, removing RenderPlugin and destroying"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,s){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=s.viewport[3]-t;if(e<0||e>s.viewport[2]||t<0||t>s.viewport[3])return this._dbg(U.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const i=s.viewForward,a=s.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],i[0],i[1],i[2]),this.updateWasmCamera(s),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,s,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const i=Math.round(e),a=Math.round(t);if(i<0||i>s.viewport[2]||a<0||a>s.viewport[3])return this._dbg(U.Error,`[js] pickObject: outOfRange, screenXY=[${i}, ${a}], vp=[${s.viewport.toString()}]`),null;this._beforeDraw();const n=s.viewForward,o=s.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(s),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(i,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(i,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}async getOtherFieldPopupValues(e,s){for(const r of e){const e=r.gpuResult;if(!e)continue;const i=this._layers.get(e.layerId);if(!i||!i.layerView.layer.url)continue;const a=i.layerView.layer,n={responseType:"array-buffer",signal:i.abortController.signal,query:{...i.layerView.layer.customParameters,token:i.layerView.layer.apiKey}},o=e.voxelSpacePosition,l=[Math.floor(o[0]/32),Math.floor(o[1]/32),Math.floor(o[2]/32)],h=[-4&l[0],-4&l[1],-4&l[2]];let d=0;if(e.epochTime){const t=this._vxl.get_layer_epoch_times(i.layerView.wasmLayerId,a.currentVariableId);for(let s=0;s<t.length;++s)if(t[s]===e.epochTime/1e3){d=s;break}}const u=[],_={varIds:[],ptrs:[],sizes:[]};for(const r of s){const e=a.variables.findIndex((e=>e.name===r));if(-1===e)continue;const s=a.variables.getItemAt(e)?.id;if(null==s)continue;const i=`${a.url}/variables/${s}/${d}/bundles/0/${h[0]}-${h[1]}-${h[2]}`;u.push((0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(i,n).then((e=>e.data))),_.varIds.push(s)}const c=await Promise.allSettled(u),m=c.length;for(let t=0;t<m;++t){const e=c[t];if("fulfilled"===e.status){const t=e.value,s=this._vxl._malloc(t.byteLength);new Uint8Array(this._vxl.HEAPU8.buffer,s,t.byteLength).set(new Uint8Array(t)),_.ptrs.push(s),_.sizes.push(t.byteLength)}else _.varIds.splice(t,1)}const g=this._vxl.get_other_field_popup_values(e,_);for(let t=0;t<_.ptrs.length;++t)this._vxl._free(_.ptrs[t]);if(g.continuousValues)for(const t in g.continuousValues)r.attributes[t]=g.continuousValues[t];if(g.uniqueValues)for(const t in g.uniqueValues)r.attributes[t]=g.uniqueValues[t]}return e}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,s,r,i){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered||!e.camera)return;if(null==i||i[0]<0||i[0]>e.camera.viewport[2]||i[1]<0||i[1]>e.camera.viewport[3])return this._dbg(U.Error,i?`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${i[0].toFixed(0)}, ${i[1].toFixed(0)}]`:"[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=null"),null;const a=[];this._layers.forEach((t=>{e.options.filteredLayerViewUids.includes(t.layerView.uid)&&a.push(t.layerView.wasmLayerId)}));const n=this.pickObject(i[0],i[1],e.camera,a);if(null==n||-1===n.layerId)return;const o=this._layers.get(n.layerId);if(o){const t=o.layerView.layer.uid,i=n.distanceToCamera/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_10__.j)(s,r),a=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__.create)();a[0]=n.worldX,a[1]=n.worldY,a[2]=n.worldZ;const l={},u=o.layerView.layer,_=u.variables.findIndex((e=>e.id===u.currentVariableId));if(_>=0){const e=u.variables.getItemAt(_);null!=e&&(null!=n.continuousValue?l[e.name]=n.continuousValue:null!=n.uniqueValueLabel&&null!=n.uniqueValue?l[e.name]=`${n.uniqueValueLabel} (${n.uniqueValue})`:null!=n.uniqueValue&&(l[e.name]=`${n.uniqueValue}`),e.description.length>0?l["Voxel.CurrentVariable"]=e.description:e.name?.length>0&&(l["Voxel.CurrentVariable"]=e.name))}if(l["Voxel.Position"]=`[${n.voxelSpacePosition.toString()}]`,null!=n.epochTime&&null!=n.nativeTime&&null!=n.nativeTimeUnits){const e=new Date(n.epochTime);l["Voxel.LocalTime"]=e,l["Voxel.SourceTime"]=`${n.nativeTime.toLocaleString()} ${n.nativeTimeUnits}`}null!=n.depth&&(l["Voxel.Depth"]=n.depth);const c=n.faceNormal;l["Voxel.WorldPosition"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const m=e=>{const s=new _views_3d_layers_i3s_Intersector_js__WEBPACK_IMPORTED_MODULE_18__.VoxelTarget(a,t,(()=>this._createVoxelGraphic(o.layerView.layer,l,n)));e.set(this.type,s,i,c)},g=e.results,f=e.options.store===_views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_22__.StoreResults.ALL;if((null==g.min.distance||i<g.min.distance)&&m(g.min),(null==g.max.distance||i>g.max.distance)&&m(g.max),f){const t=new _views_3d_webgl_engine_lib_IntersectorResult_js__WEBPACK_IMPORTED_MODULE_23__.IntersectorResult(e.ray);m(t),e.results.all.push(t)}}}_createVoxelGraphic(e,t,s){return new _views_3d_layers_VoxelGraphic_js__WEBPACK_IMPORTED_MODULE_17__.VoxelGraphic({layer:e,sourceLayer:e,attributes:t,gpuResult:s})}_toWasmQuality(e){switch(e){case"low":return 0;case"medium":return 1;case"high":return 2}}_setUpscalingLimits(e,t,s){this._vxl&&this._vxl.set_upscaling_limits(e,t,s)}hasHighlight(){return!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({constructOnly:!0})],k.prototype,"view",void 0),k=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.layers.VoxelWasmPerSceneView")],k);const A=k;


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/vxl/VxlModule.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/vxl/VxlModule.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadVoxelWASM: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets.js */ "./node_modules/@arcgis/core/assets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(t){return new Promise((e=>__webpack_require__.e(/*! import() */ "vendors-node_modules_arcgis_core_chunks_vxlLayer_js").then(__webpack_require__.bind(__webpack_require__, /*! ../../chunks/vxlLayer.js */ "./node_modules/@arcgis/core/chunks/vxlLayer.js")).then((t=>t.v)).then((({default:n})=>{const r=n({locateFile:i,preinitializedWebGLContext:t,onRuntimeInitialized:()=>e(r)})})))).catch((t=>{throw t}))}function i(e){return (0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.getAssetUrl)(`esri/libs/vxl/${e}`)}


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/vxl/enums.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/vxl/enums.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContainerType: () => (/* binding */ o),
/* harmony export */   UpdateFlags: () => (/* binding */ a),
/* harmony export */   VoxelRequestType: () => (/* binding */ i),
/* harmony export */   WasmCullMode: () => (/* binding */ t),
/* harmony export */   WasmRenderingQuality: () => (/* binding */ n),
/* harmony export */   WasmResponseType: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e,i,t,n,a,o;!function(e){e[e.Binary=0]="Binary",e[e.JSON=1]="JSON"}(e||(e={})),function(e){e[e.TreeIndex=0]="TreeIndex",e[e.TreeStats=1]="TreeStats",e[e.TreeData=2]="TreeData",e[e.BrickBundles=3]="BrickBundles",e[e.Section=4]="Section",e[e.VariableStats=5]="VariableStats"}(i||(i={})),function(e){e[e.None=1]="None",e[e.Front=2]="Front",e[e.Back=3]="Back"}(t||(t={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(n||(n={})),function(e){e[e.None=0]="None",e[e.StaticSections=1]="StaticSections",e[e.Slices=2]="Slices",e[e.DynamicSections=4]="DynamicSections",e[e.GhostShell=8]="GhostShell",e[e.Isosurface=16]="Isosurface",e[e.Quality=32]="Quality",e[e.SunLocation=64]="SunLocation",e[e.StaticSectionSelection=128]="StaticSectionSelection",e[e.ExaggerationAndOffset=256]="ExaggerationAndOffset",e[e.CurrentTime=512]="CurrentTime",e[e.CurrentVariable=1024]="CurrentVariable",e[e.DeleteIsosurface=2048]="DeleteIsosurface",e[e.ContainerVisibility=4096]="ContainerVisibility",e[e.RenderMode=8192]="RenderMode",e[e.Optimization=16384]="Optimization",e[e.VariableStyles=32768]="VariableStyles",e[e.VolumeStyles=65536]="VolumeStyles",e[e.AnalysisSlice=131072]="AnalysisSlice"}(a||(a={})),function(e){e[e.Isosurfaces=0]="Isosurfaces",e[e.DynamicSections=1]="DynamicSections",e[e.StaticSections=2]="StaticSections"}(o||(o={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/VoxelGraphic.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/VoxelGraphic.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VoxelGraphic: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let t=class extends _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(r){super(r),this.gpuResult=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0,clonable:"reference"})],t.prototype,"gpuResult",void 0),t=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.VoxelGraphic")],t);


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX1ZveGVsV2FzbVBlclNjZW5lVmlld19qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNteEQsTUFBTSxhQUFhLHNIQUFzSCxTQUFTLEdBQUcsb0JBQW9CLDZGQUFDLENBQUMsZUFBZSxnb0JBQWdvQixpRkFBQyxxRUFBcUUsMkZBQUMsdUVBQXVFLFVBQVUsb0NBQW9DLHVEQUFDLDBCQUEwQix1REFBQywwQkFBMEIsc0JBQXNCLHlKQUF5SixhQUFhLHVDQUF1QyxvRUFBb0UsaUJBQWlCLDZEQUFDLDRCQUE0QixzVEFBc1QsRUFBRSwyREFBQyxFQUFFLDZEQUFDLHNDQUFzQywrR0FBK0csRUFBRSwyREFBQyxFQUFFLDZEQUFDLG1DQUFtQyxjQUFjLGlEQUFpRCw0TkFBNE4sRUFBRSwyREFBQyxFQUFFLDZEQUFDLGtDQUFrQyx1RkFBdUYsS0FBSywyQkFBMkIsb0RBQW9ELDZCQUE2QiwyT0FBMk8sNEJBQTRCLHFHQUFxRyxzQkFBc0IsdUNBQXVDLHdDQUF3QyxvRkFBb0YsaUNBQWlDLDZDQUE2QyxpREFBaUQsOEJBQThCLHFEQUFxRCxtQkFBbUIsNERBQTRELDhJQUE4SSw0QkFBNEIsb0dBQW9HLFVBQVUsMEZBQTBGLHdCQUF3Qix3TEFBd0wsaUJBQWlCLDJHQUEyRyxxQ0FBcUMsMkxBQTJMLG1FQUFDLCtDQUErQyx3REFBQyxPQUFPLG9FQUFDLE1BQU0sb0VBQUMsTUFBTSxvRUFBQyx1Q0FBdUMsd0RBQUMsTUFBTSxvRUFBQyxNQUFNLG9FQUFDLE1BQU0sb0VBQUMsNkZBQTZGLHVCQUF1Qix3QkFBd0IsS0FBSyw2REFBQywyQ0FBMkMsTUFBTSxLQUFLLDZEQUFDLDZCQUE2Qix3REFBQyw0Q0FBNEMsTUFBTSxLQUFLLDZEQUFDLDhCQUE4Qix3REFBQyw2Q0FBNkMsZ0ZBQWdGLHNCQUFzQiwrR0FB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QUFjLE9BQU8sdURBQUMsa0JBQWtCLEVBQUUsR0FBOEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSm5WO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWEsMENBQTBDLFNBQVMsZUFBZSxzTEFBc0wsU0FBUyxlQUFlLDJEQUEyRCxTQUFTLGVBQWUsMkRBQTJELFNBQVMsZUFBZSwydEJBQTJ0QixTQUFTLGVBQWUsaUhBQWlILFNBQVMsR0FBdUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdjhDO0FBQ0E7QUFDQTtBQUNBO0FBQ29WLG9CQUFvQixtREFBQyxDQUFDLGVBQWUsK0JBQStCLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxzQ0FBc0MscUNBQXFDLHVEQUFDLEVBQUUsc0ZBQUMsMENBQW9FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9Wb3hlbFdhc21QZXJTY2VuZVZpZXcuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xpYnMvdnhsL1Z4bE1vZHVsZS5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGlicy92eGwvZW51bXMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9Wb3hlbEdyYXBoaWMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uL3JlcXVlc3QuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIHJ9ZnJvbVwiLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgaSxpbml0aWFsIGFzIGF9ZnJvbVwiLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e2NvbnZlcnRUaW1lIGFzIG59ZnJvbVwiLi4vY29yZS90aW1lVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgb31mcm9tXCIuLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi9jb3JlL1JhbmRvbUxDRy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBsfWZyb21cIi4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7aiBhcyBofWZyb21cIi4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgZH1mcm9tXCIuLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzNmNjQuanNcIjtpbXBvcnR7cmVuZGVyU1JGcm9tVmlld1NSIGFzIHV9ZnJvbVwiLi4vZ2VvbWV0cnkvc3VwcG9ydC9jb29yZGluYXRlU3lzdGVtLmpzXCI7aW1wb3J0e1BvaW50SW5kZXggYXMgXyxQbGFuZUluZGV4IGFzIGN9ZnJvbVwiLi4vZ2VvbWV0cnkvc3VwcG9ydC9mcnVzdHVtLmpzXCI7aW1wb3J0e1dhc21DdWxsTW9kZSBhcyBtLFZveGVsUmVxdWVzdFR5cGUgYXMgZyxVcGRhdGVGbGFncyBhcyBmLENvbnRhaW5lclR5cGUgYXMgcH1mcm9tXCIuLi9saWJzL3Z4bC9lbnVtcy5qc1wiO2ltcG9ydHtsb2FkVm94ZWxXQVNNIGFzIHl9ZnJvbVwiLi4vbGlicy92eGwvVnhsTW9kdWxlLmpzXCI7aW1wb3J0e1ZpZXdpbmdNb2RlIGFzIHh9ZnJvbVwiLi4vdmlld3MvVmlld2luZ01vZGUuanNcIjtpbXBvcnR7Vm94ZWxHcmFwaGljIGFzIHZ9ZnJvbVwiLi4vdmlld3MvM2QvbGF5ZXJzL1ZveGVsR3JhcGhpYy5qc1wiO2ltcG9ydHtWb3hlbFRhcmdldCBhcyBifWZyb21cIi4uL3ZpZXdzLzNkL2xheWVycy9pM3MvSW50ZXJzZWN0b3IuanNcIjtpbXBvcnR7RnJ1c3R1bSBhcyB3fWZyb21cIi4uL3ZpZXdzLzNkL3N0YXRlL0ZydXN0dW0uanNcIjtpbXBvcnR7UmVuZGVyQ29vcmRzSGVscGVyIGFzIFR9ZnJvbVwiLi4vdmlld3MvM2Qvc3VwcG9ydC9SZW5kZXJDb29yZHNIZWxwZXIuanNcIjtpbXBvcnR7U3luY1JlbmRlclBsdWdpbiBhcyBSfWZyb21cIi4uL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9lZmZlY3RzL1JlbmRlclBsdWdpbi5qc1wiO2ltcG9ydHtTdG9yZVJlc3VsdHMgYXMgVn1mcm9tXCIuLi92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL0ludGVyc2VjdG9ySW50ZXJmYWNlcy5qc1wiO2ltcG9ydHtJbnRlcnNlY3RvclJlc3VsdCBhcyBMfWZyb21cIi4uL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvSW50ZXJzZWN0b3JSZXN1bHQuanNcIjtpbXBvcnR7SW50ZXJzZWN0b3JUeXBlIGFzIEN9ZnJvbVwiLi4vdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9JbnRlcnNlY3RvclR5cGUuanNcIjtpbXBvcnR7UmVuZGVyRmVhdHVyZSBhcyBFfWZyb21cIi4uL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvUmVuZGVyRmVhdHVyZS5qc1wiO2ltcG9ydHtSZW5kZXJTbG90IGFzIEZ9ZnJvbVwiLi4vdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9SZW5kZXJTbG90LmpzXCI7aW1wb3J0e0NvbXBhcmVGdW5jdGlvbiBhcyBJLEZhY2UgYXMgUyxTdGVuY2lsT3BlcmF0aW9uIGFzIFB9ZnJvbVwiLi4vdmlld3Mvd2ViZ2wvZW51bXMuanNcIjt2YXIgVTshZnVuY3Rpb24oZSl7ZVtlLkxpZmV0aW1lPTFdPVwiTGlmZXRpbWVcIixlW2UuUmVxdWVzdFJlc3BvbnNlPTJdPVwiUmVxdWVzdFJlc3BvbnNlXCIsZVtlLlJlbmRlcmluZz0zXT1cIlJlbmRlcmluZ1wiLGVbZS5FcnJvcj00XT1cIkVycm9yXCJ9KFV8fChVPXt9KSk7bGV0IGs9Y2xhc3MgZXh0ZW5kcyBSe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2hhbGZJbnRUZXh0dXJlc0F2YWlsYWJsZT0hMSx0aGlzLl90ZXh0dXJlRmxvYXRMaW5lYXJBdmFpbGFibGU9ITEsdGhpcy5faGF2ZVByZXBhcmVkV2l0aEFsbExheWVycz0hMSx0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0PW51bGwsdGhpcy5fdnhsUHJvbWlzZT1udWxsLHRoaXMuX3Z4bD1udWxsLHRoaXMuX3BsdWdpbklzQWN0aXZlPSExLHRoaXMuX21vcmVUb0xvYWQ9ITEsdGhpcy5fdmlld3BvcnRXaWR0aD0tMSx0aGlzLl92aWV3cG9ydEhlaWdodD0tMSx0aGlzLl9uZXdMYXllcnM9W10sdGhpcy5fbGF5ZXJzPW5ldyBNYXAsdGhpcy5fcmN0eD1udWxsLHRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZT1udWxsLHRoaXMuX2xhc3RGcmFtZVdhc1N0YXRpb25hcnk9ITEsdGhpcy5fd2FzbU1lbUJsb2NrU2l6ZXM9WzUxMiwxMDI0LDIwNDgsNDA5Niw4MTkyLDE2Mzg0LDMyNzY4LDY1NTM2XSx0aGlzLl93YXNtTWVtQmxvY2tzPW5ldyBNYXAsdGhpcy5fZGJnRmxhZ3M9bmV3IFNldCx0aGlzLl9jYXB0dXJlRnJ1c3R1bT0hMSx0aGlzLl9mcnVzdHVtPW51bGwsdGhpcy5fZnJ1c3R1bVJlbmRlcmFibGVJZD0tMSx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXI9bnVsbCx0aGlzLnByb2R1Y2VzPW5ldyBNYXAoW1tGLlZPWEVMLCgpPT4hIXRoaXMuX3Z4bCYmXCJsb2NhbFwiPT09dGhpcy52aWV3LnZpZXdpbmdNb2RlXV0pLHRoaXMudHlwZT1DLlZPWEVMLHRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ9ITAsdGhpcy5pc0dyb3VuZD0hMSx0aGlzLmxheWVyVmlld1VpZD1bXX1fZGJnKGUsdCl7dGhpcy5fZGJnRmxhZ3MuaGFzKGUpJiYoZT09PVUuRXJyb3I/cy5nZXRMb2dnZXIodGhpcykuZXJyb3IodCk6cy5nZXRMb2dnZXIodGhpcykud2Fybih0KSl9X3JlbW92ZVJlbmRlclBsdWdpbigpe3RoaXMuX3BsdWdpbklzQWN0aXZlJiZ0aGlzLnZpZXcuc3RhZ2UmJih0aGlzLl9kYmcoVS5MaWZldGltZSxcIi0tcmVtb3ZlUmVuZGVyUGx1Z2luLS1cIiksdGhpcy52aWV3LnN0YWdlLnJlbW92ZVJlbmRlclBsdWdpbih0aGlzKSksdGhpcy5fcGx1Z2luSXNBY3RpdmU9ITF9aW5pdGlhbGl6ZSgpe3RoaXMuX2RiZyhVLkxpZmV0aW1lLFwiLS1pbml0aWFsaXplLS1cIik7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fd2FzbU1lbUJsb2NrU2l6ZXMpdGhpcy5fd2FzbU1lbUJsb2Nrcy5zZXQoZSwwKTt0aGlzLmFkZEhhbmRsZXMoW2koKCgpPT50aGlzLnZpZXcucmVhZHkpLChlPT57ZSYmXCJsb2NhbFwiPT09dGhpcy52aWV3LnZpZXdpbmdNb2RlPyh0aGlzLl9kYmcoVS5MaWZldGltZSxcInZpZXcgcmVhZHkgc3RhdHVzIGNoYW5nZWQgdG8gcmVhZHkgb24gYSBsb2NhbCB2aWV3LCBjYWxsaW5nIGFkZFJlbmRlclBsdWdpblwiKSx0aGlzLnZpZXcuc3RhZ2UuYWRkUmVuZGVyUGx1Z2luKHRoaXMpLHRoaXMuX3BsdWdpbklzQWN0aXZlPSEwKToodGhpcy5fZGJnKFUuTGlmZXRpbWUsXCJ2aWV3IHJlYWR5IHN0YXR1cyBjaGFuZ2VkLCBub3QgcmVhZHkgb3Igbm90IGEgbG9jYWwgdmlldyFcIiksdGhpcy5fcmVtb3ZlUmVuZGVyUGx1Z2luKCkpfSksYSksaSgoKCk9PnRoaXMudmlldz8ucXVhbGl0eVByb2ZpbGUpLChlPT57dGhpcy5fZGJnKFUuUmVuZGVyaW5nLFwicXVhbGl0eVByb2ZpbGUgY2hhbmdlZCB0byBcIitlKSx0aGlzLl92eGwmJnRoaXMuX3Z4bC5zZXRfcXVhbGl0eSh0aGlzLl90b1dhc21RdWFsaXR5KGUpKX0pLGEpLGkoKCgpPT50aGlzLnZpZXc/LnRpbWVFeHRlbnQpLCgoKT0+e2lmKHRoaXMuX3Z4bCl7Y29uc3QgZT10aGlzLl9nZXRUaW1lQXJncyh0aGlzLnZpZXc/LnRpbWVFeHRlbnQpO3RoaXMuX2RiZyhVLlJlbmRlcmluZyxcInNjZW5lVmlldyB0aW1lRXh0ZW50IGNoYW5nZWQgdG8gdXNlVGltZT1cIitlLmhhc1RpbWUrXCIgc3Q9XCIrZS5zdGFydFRpbWUrXCIgZXQ9XCIrZS5lbmRUaW1lKSx0aGlzLl92eGwuc2V0X3NjZW5lX3RpbWVfZXh0ZW50KGUuc3RhcnRUaW1lLGUuZW5kVGltZSxlLmhhc1RpbWUpLHRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfX0pLGEpLGkoKCgpPT50aGlzLnZpZXc/LnN0YXRpb25hcnkpLChlPT57dGhpcy5fdnhsJiZlJiYhdGhpcy5fbGFzdEZyYW1lV2FzU3RhdGlvbmFyeSYmdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9KSldKX1pbml0aWFsaXplUmVuZGVyQ29udGV4dChlKXt0aGlzLl9kYmcoVS5MaWZldGltZSxcIi0taW5pdGlhbGl6ZVJlbmRlckNvbnRleHQtLVwiKTtjb25zdCB0PWUucmVuZGVyQ29udGV4dC5yY3R4O3RoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQ9ZSx0aGlzLl9yY3R4PWUucmVuZGVyQ29udGV4dC5yY3R4LHRoaXMuX2hhbGZJbnRUZXh0dXJlc0F2YWlsYWJsZT0hIXRoaXMuX3JjdHguY2FwYWJpbGl0aWVzLnRleHR1cmVOb3JtMTYsdGhpcy5fdGV4dHVyZUZsb2F0TGluZWFyQXZhaWxhYmxlPXRoaXMuX3JjdHguY2FwYWJpbGl0aWVzLnRleHR1cmVGbG9hdExpbmVhcix0aGlzLl9pbml0aWFsaXplV2FzbSh0LmdsKX11bmluaXRpYWxpemVSZW5kZXJDb250ZXh0KCl7dGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dD1udWxsLHRoaXMuX3JjdHg9bnVsbCx0aGlzLl9kYmcoVS5MaWZldGltZSxcIi0tdW5pbml0aWFsaXplUmVuZGVyQ29udGV4dC0tXCIpfV9yZXN0b3JlRnJhbWVidWZmZXIoKXtpZighdGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlKXJldHVybjtjb25zdCBlPXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZS5mYm87aWYoISEhdGhpcy5fcmN0eClyZXR1cm4gdm9pZCB0aGlzLl9kYmcoVS5FcnJvcixcIm5vIGNvbnRleHQgaW4gcmVzdG9yZUZyYW1lYnVmZmVyIVwiKTt0aGlzLl9yY3R4LmJpbmRGcmFtZWJ1ZmZlcihlLCEwKTtjb25zdCB0PXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZS52aWV3cG9ydDt0aGlzLl9yY3R4LnNldFZpZXdwb3J0KHQueCx0LnksdC53aWR0aCx0LmhlaWdodCl9X2JpbmRQcmV2aW91c0RlcHRoVG9TbG90KGUsdCl7Y29uc3Qgcz0hIXRoaXMuX3JjdHgscj0hIXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZTtpZighc3x8IXIpcmV0dXJuIDA7Y29uc3QgaT10aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmUuZmJvLmRlcHRoU3RlbmNpbFRleHR1cmU7cmV0dXJuIGk/KDA9PT10P3RoaXMuX3JjdHguYmluZFRleHR1cmUobnVsbCxlLCEwKTp0aGlzLl9yY3R4LmJpbmRUZXh0dXJlKGksZSwhMCksMSk6KHRoaXMuX2RiZyhVLkVycm9yLFwibm8gZGVwdGgvc3RlbmNpbCB0ZXh0dXJlIGV4aXN0cyFcIiksMCl9X21vZGlmeVJlc291cmNlQ291bnQoZSx0LHMpe2lmKCF0aGlzLl9yY3R4KXJldHVybiB2b2lkIHRoaXMuX2RiZyhVLkVycm9yLFwibW9kaWZ5QWxsb2NhdGlvbiBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpO2NvbnN0IHI9ZTsxPT09cz90aGlzLl9yY3R4Lmluc3RhbmNlQ291bnRlci5pbmNyZW1lbnQocix0KTp0aGlzLl9yY3R4Lmluc3RhbmNlQ291bnRlci5kZWNyZW1lbnQocix0KX1fc2V0QmxlbmRTdGF0ZShlLHQscyxyKXt0aGlzLl9yY3R4Pyh0aGlzLl9yY3R4LnNldEJsZW5kaW5nRW5hYmxlZCgxPT09ZSksdGhpcy5fcmN0eC5zZXRCbGVuZEZ1bmN0aW9uKHQscyksdGhpcy5fcmN0eC5zZXRCbGVuZEVxdWF0aW9uKHIpKTp0aGlzLl9kYmcoVS5FcnJvcixcInNldEJsZW5kU3RhdGUgY2FsbGJhY2sgaGFzIG5vIHJlbmRlcmluZyBjb250ZXh0IVwiKX1fc2V0RnJvbnRGYWNlKGUpe3RoaXMuX3JjdHg/dGhpcy5fcmN0eC5zZXRGcm9udEZhY2UoZSk6dGhpcy5fZGJnKFUuRXJyb3IsXCJzZXRGcm9udEZhY2UgY2FsbGJhY2sgaGFzIG5vIHJlbmRlcmluZyBjb250ZXh0IVwiKX1fc2V0RGVwdGhTdGVuY2lsU3RhdGVGdW5jdGlvbihlLHQscyl7dGhpcy5fcmN0eD8odGhpcy5fcmN0eC5zZXREZXB0aEZ1bmN0aW9uKHMpLHRoaXMuX3JjdHguc2V0RGVwdGhUZXN0RW5hYmxlZCgxPT09ZSksdGhpcy5fcmN0eC5zZXREZXB0aFdyaXRlRW5hYmxlZCgxPT09dCksdGhpcy5fcmN0eC5zZXRTdGVuY2lsVGVzdEVuYWJsZWQoITEpLHRoaXMuX3JjdHguc2V0U3RlbmNpbEZ1bmN0aW9uKEkuQUxXQVlTLDAsMjU1KSx0aGlzLl9yY3R4LnNldFN0ZW5jaWxPcFNlcGFyYXRlKFMuRlJPTlQsUC5LRUVQLFAuSU5DUixQLktFRVApLHRoaXMuX3JjdHguc2V0U3RlbmNpbE9wU2VwYXJhdGUoUy5CQUNLLFAuS0VFUCxQLkRFQ1IsUC5LRUVQKSk6dGhpcy5fZGJnKFUuRXJyb3IsXCJzZXREZXB0aFN0ZW5jaWxTdGF0ZUZ1bmN0aW9uIGNhbGxiYWNrIGhhcyBubyByZW5kZXJpbmcgY29udGV4dCFcIil9X3NldFJhc3Rlcml6ZXJTdGF0ZShlKXtpZih0aGlzLl9yY3R4KXN3aXRjaChlKXtjYXNlIG0uTm9uZTp0aGlzLl9yY3R4LnNldEZhY2VDdWxsaW5nRW5hYmxlZCghMSk7YnJlYWs7Y2FzZSBtLkJhY2s6dGhpcy5fcmN0eC5zZXRDdWxsRmFjZShTLkJBQ0spLHRoaXMuX3JjdHguc2V0RmFjZUN1bGxpbmdFbmFibGVkKCEwKTticmVhaztjYXNlIG0uRnJvbnQ6dGhpcy5fcmN0eC5zZXRDdWxsRmFjZShTLkZST05UKSx0aGlzLl9yY3R4LnNldEZhY2VDdWxsaW5nRW5hYmxlZCghMCl9ZWxzZSB0aGlzLl9kYmcoVS5FcnJvcixcInNldFJhc3Rlcml6ZXJTdGF0ZSBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpfV9zZXRWaWV3cG9ydChlLHQscyxyKXt0aGlzLl9yY3R4P3RoaXMuX3JjdHguc2V0Vmlld3BvcnQoZSx0LHMscik6dGhpcy5fZGJnKFUuRXJyb3IsXCJzZXRWaWV3cG9ydCBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpfV91cGRhdGVNZW1vcnlVc2FnZSgpe3RoaXMuX2xheWVycy5mb3JFYWNoKCgoZSx0KT0+e2lmKGUubmVlZE1lbW9yeVVzYWdlVXBkYXRlKXtjb25zdCBzPXRoaXMuX3Z4bC5lc3RpbWF0ZV9tZW1vcnlfdXNhZ2UodCk7cz49MCYmKGUubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSExLGUubGF5ZXJWaWV3LnNldFVzZWRNZW1vcnkocykpfX0pKX1fc3luY1JlcXVlc3RzUmVzcG9uc2VzKCl7dGhpcy5fbGF5ZXJzLmZvckVhY2goKChlLHMpPT57Y29uc3QgaT1bXTtlLnJlc3BvbnNlcy5mb3JFYWNoKCgodCxyKT0+e2kucHVzaChyKSx0aGlzLl9kYmcoVS5SZXF1ZXN0UmVzcG9uc2UsXCJyZXNwb25kaW5nIGZvciByZXF1ZXN0SUQ6XCIrcitcIiBzaXplOlwiK3Quc2l6ZSksdGhpcy5fdnhsLnJlc3BvbmQocyxyLHQpLHQucmVxdWVzdFR5cGUhPT1nLlRyZWVJbmRleCYmdC5yZXF1ZXN0VHlwZSE9PWcuU2VjdGlvbnx8KGUubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSEwKX0pKTtjb25zdCBhPWUucmVzcG9uc2VzO2Zvcihjb25zdCB0IG9mIGkpYS5kZWxldGUodCk7Y29uc3Qgbj10aGlzLl92eGwuZ2V0X25ld19yZXF1ZXN0cyhzKSxvPWUuYWJvcnRDb250cm9sbGVyLnNpZ25hbDtmb3IoY29uc3QgbCBpbiBuKXtlLm91dHN0YW5kaW5nUmVxdWVzdENvdW50Kz0xLDE9PT1lLm91dHN0YW5kaW5nUmVxdWVzdENvdW50JiZlLmxheWVyVmlldy51cGRhdGluZ0ZsYWdDaGFuZ2VkKCk7Y29uc3Qgcz1uW2xdLGk9e3Jlc3BvbnNlVHlwZTpcImFycmF5LWJ1ZmZlclwiLHNpZ25hbDpvLHF1ZXJ5OnsuLi5lLmxheWVyVmlldy5sYXllci5jdXN0b21QYXJhbWV0ZXJzLHRva2VuOmUubGF5ZXJWaWV3LmxheWVyLmFwaUtleX19O3RoaXMuX2RiZyhVLlJlcXVlc3RSZXNwb25zZSxcIm1ha2luZyByZXF1ZXN0SUQ6XCIrbCtcIiB1cmw6XCIrcy51cmwpLHQocy51cmwsaSkudGhlbigodD0+e2Uub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQtPTEsMD09PWUub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQmJmUubGF5ZXJWaWV3LnVwZGF0aW5nRmxhZ0NoYW5nZWQoKSx0aGlzLl9kYmcoVS5SZXF1ZXN0UmVzcG9uc2UsXCJoYXZlIHJlc3BvbnNlIGZvciByZXF1ZXN0SUQ6XCIrbCk7bGV0IHI9MDtpZih0LmRhdGEuYnl0ZUxlbmd0aD4wKXtyPXRoaXMuX3Z4bC5fbWFsbG9jKHQuZGF0YS5ieXRlTGVuZ3RoKTtjb25zdCBlPW5ldyBVaW50OEFycmF5KHRoaXMuX3Z4bC5IRUFQVTguYnVmZmVyLHIsdC5kYXRhLmJ5dGVMZW5ndGgpLHM9bmV3IFVpbnQ4QXJyYXkodC5kYXRhKTtmb3IobGV0IHI9MDtyPHQuZGF0YS5ieXRlTGVuZ3RoOysrcillW3JdPXNbcl19YS5zZXQoK2wse3Jlc3BvbnNlVHlwZTpzLnJlc3BvbnNlVHlwZSxwdHI6cixzaXplOnQuZGF0YS5ieXRlTGVuZ3RoLHN1Y2Nlc3M6ITAscmVxdWVzdFR5cGU6cy5yZXF1ZXN0VHlwZX0pfSkpLmNhdGNoKCh0PT57ZS5vdXRzdGFuZGluZ1JlcXVlc3RDb3VudC09MSwwPT09ZS5vdXRzdGFuZGluZ1JlcXVlc3RDb3VudCYmZS5sYXllclZpZXcudXBkYXRpbmdGbGFnQ2hhbmdlZCgpLHIodCl8fCh0aGlzLl9kYmcoVS5FcnJvcixgcmVxdWVzdElEOiR7bH0gZmFpbGVkLCBlcnJvcj0ke3QudG9TdHJpbmcoKX1gKSxhLnNldCgrbCx7cmVzcG9uc2VUeXBlOnMucmVzcG9uc2VUeXBlLHB0cjowLHNpemU6MCxzdWNjZXNzOiExLHJlcXVlc3RUeXBlOnMucmVxdWVzdFR5cGV9KSl9KSl9fSkpfXVwZGF0ZVdhc21DYW1lcmEoZSl7dGhpcy5fdnhsLnNldF9wcm9qZWN0aW9uX21hdHJpeC5hcHBseSh0aGlzLl92eGwsZS5wcm9qZWN0aW9uTWF0cml4KSx0aGlzLl92eGwuc2V0X3ZpZXdfbWF0cml4LmFwcGx5KHRoaXMuX3Z4bCxlLnZpZXdNYXRyaXgpLHRoaXMuX3Z4bC5zZXRfbmVhcl9mYXIoZS5uZWFyLGUuZmFyKX1pc1VwZGF0aW5nKGUpe2lmKCF0aGlzLl92eGwmJnRoaXMuX3Z4bFByb21pc2UpcmV0dXJuITA7Y29uc3QgdD10aGlzLl9sYXllcnMuZ2V0KGUpO3JldHVybiEhdCYmdC5vdXRzdGFuZGluZ1JlcXVlc3RDb3VudD4wfWdldExheWVyVGltZXMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gdGhpcy5fbGF5ZXJzLmZvckVhY2goKChzLHIpPT57aWYocy5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkKXtjb25zdCBzPXRoaXMuX3Z4bC5nZXRfbGF5ZXJfZXBvY2hfdGltZXMocixlLmxheWVyLmN1cnJlbnRWYXJpYWJsZUlkKTtmb3IobGV0IGU9MDtlPHMubGVuZ3RoOysrZSl0LnB1c2goc1tlXSl9fSkpLHR9Z2V0Q3VycmVudExheWVyVGltZUluZGV4KGUpe2xldCB0PTA7cmV0dXJuIHRoaXMuX2xheWVycy5mb3JFYWNoKCgocyxyKT0+e3MubGF5ZXJWaWV3Lndhc21MYXllcklkPT09ZS53YXNtTGF5ZXJJZCYmKHQ9dGhpcy5fdnhsLmdldF9sYXllcl9jdXJyZW50X3RpbWVfaWQocikpfSkpLHR9c2V0RW5hYmxlZChlLHQpe3RoaXMuX2xheWVycy5mb3JFYWNoKCgocyxyKT0+e3MubGF5ZXJWaWV3Lndhc21MYXllcklkPT09ZS53YXNtTGF5ZXJJZCYmKHRoaXMuX3Z4bC5zZXRfZW5hYmxlZChyLHQpLHMubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSEwLHRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpKX0pKX1zZXRJc0luU2NhbGVSYW5nZShlLHQpe2NvbnN0IHM9dGhpcy5fbGF5ZXJzLmdldChlLndhc21MYXllcklkKTtzJiZ0IT09cy5pc0luU2NhbGVSYW5nZSYmKHMuaXNJblNjYWxlUmFuZ2U9dCx0aGlzLl92eGwuc2V0X2lzX2luX3NjYWxlX3JhbmdlKGUud2FzbUxheWVySWQsdCkscy5uZWVkTWVtb3J5VXNhZ2VVcGRhdGU9IXQsdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCkpfXNldFN0YXRpY1NlY3Rpb25zKGUsdCl7Y29uc3Qgcz17bWFzazpmLlN0YXRpY1NlY3Rpb25zLHN0YXRpY1NlY3Rpb25zOnR9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0Q3VycmVudFZhcmlhYmxlKGUsdCl7Y29uc3Qgcz17bWFzazpmLkN1cnJlbnRWYXJpYWJsZSxjdXJyZW50VmFyaWFibGU6dH07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRSZW5kZXJNb2RlKGUsdCl7Y29uc3Qgcz17bWFzazpmLlJlbmRlck1vZGUscmVuZGVyTW9kZTp0fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldFZlcnRpY2FsRXhhZ2dlcmF0aW9uQW5kT2Zmc2V0KGUsdCxzLHIpe2NvbnN0IGk9e21hc2s6Zi5FeGFnZ2VyYXRpb25BbmRPZmZzZXQsdm9sU3R5bGVEZXNjOnt2b2x1bWVJZDp0LHZlcnRpY2FsRXhhZ2dlcmF0aW9uOnMsdmVydGljYWxPZmZzZXQ6cn19O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUsaSwhMCl9c2V0VmFyaWFibGVTdHlsZXMoZSx0KXtjb25zdCBzPXttYXNrOmYuVmFyaWFibGVTdHlsZXMsdmFyaWFibGVTdHlsZXM6dH07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRWb2x1bWVTdHlsZXMoZSx0KXtjb25zdCBzPXttYXNrOmYuVm9sdW1lU3R5bGVzLHZvbHVtZVN0eWxlczp0fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldEVuYWJsZUR5bmFtaWNTZWN0aW9ucyhlLHQpe2NvbnN0IHM9e21hc2s6Zi5Db250YWluZXJWaXNpYmlsaXR5LGNvbnRhaW5lcklzVmlzaWJsZTp0LGNvbnRhaW5lcjpwLkR5bmFtaWNTZWN0aW9uc307cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRFbmFibGVJc29zdXJmYWNlcyhlLHQpe2NvbnN0IHM9e21hc2s6Zi5Db250YWluZXJWaXNpYmlsaXR5LGNvbnRhaW5lcklzVmlzaWJsZTp0LGNvbnRhaW5lcjpwLklzb3N1cmZhY2VzfTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldEVuYWJsZVNlY3Rpb25zKGUsdCl7Y29uc3Qgcz17bWFzazpmLkNvbnRhaW5lclZpc2liaWxpdHksY29udGFpbmVySXNWaXNpYmxlOnQsY29udGFpbmVyOnAuU3RhdGljU2VjdGlvbnN9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0QW5hbHlzaXNTbGljZShlLHQscyxyKXtjb25zdCBpPXttYXNrOmYuQW5hbHlzaXNTbGljZSxhbmFseXNpc1NsaWNlOntwb2ludDpzLG5vcm1hbDpyLGVuYWJsZWQ6dH19O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUsaSwhMCl9dXBkYXRlTGF5ZXJUaW1lUHJvcGVydGllcyhlKXtpZighdGhpcy5fdnhsKXJldHVybjtjb25zdCB0PXRoaXMuX2xheWVycy5nZXQoZS53YXNtTGF5ZXJJZCk7aWYodCl7Y29uc3Qgcz10LmxheWVyVmlldy5sYXllcjtsZXQgcj0wO3MudGltZU9mZnNldCYmKHI9bihzLnRpbWVPZmZzZXQudmFsdWUscy50aW1lT2Zmc2V0LnVuaXQsXCJzZWNvbmRzXCIpKTtjb25zdCBpPXRoaXMuX2dldFRpbWVBcmdzKHMudGltZUV4dGVudCk7dGhpcy5fdnhsLnNldF9sYXllcl90aW1lX3Byb3BlcnRpZXMoZS53YXNtTGF5ZXJJZCxpLnN0YXJ0VGltZSxpLmVuZFRpbWUsaS5oYXNUaW1lLHMudXNlVmlld1RpbWUsciksdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9fV9kb01hc2tlZFVJVXBkYXRlKGUsdCxzKXtpZighdGhpcy5fdnhsKXJldHVybiExO2xldCByPSExO3JldHVybiB0aGlzLl9sYXllcnMuZm9yRWFjaCgoKHMsaSk9PntpZihzLmxheWVyVmlldy53YXNtTGF5ZXJJZD09PWUud2FzbUxheWVySWQpe2NvbnN0IGU9e3N0cjpKU09OLnN0cmluZ2lmeSh0KSxieXRlQ291bnQ6MCxwdHI6MCxpc1JldXNhYmxlOiExfTt0aGlzLl9hbGxvY2F0ZUJsb2NrKGUpJiYocj0xPT09dGhpcy5fdnhsLmhhbmRsZV9tYXNrZWRfdWlfdXBkYXRlKGksZS5wdHIsZS5ieXRlQ291bnQpLGUuaXNSZXVzYWJsZXx8dGhpcy5fdnhsLl9mcmVlKGUucHRyKSl9fSkpLHImJnMmJnRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpLHJ9X2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKGUsdCxzLHIsaSl7cmV0dXJuIGVbMyp0XT1zWzBdLGVbMyp0KzFdPXNbMV0sZVszKnQrMl09c1syXSxlWzMqKHQrPTEpXT1yWzBdLGVbMyp0KzFdPXJbMV0sZVszKnQrMl09clsyXSxlWzMqKHQrPTEpXT1pWzBdLGVbMyp0KzFdPWlbMV0sZVszKnQrMl09aVsyXSx0Kz0xfV9hZGROb3JtYWxUb1dhc21CdWZmZXIoZSx0LHMpe3JldHVybiBlWzMqdF09c1swXSxlWzMqdCsxXT1zWzFdLGVbMyp0KzJdPXNbMl0sdCs9MX1fZG9DYXB0dXJlRnJ1c3R1bSgpe2lmKCF0aGlzLl92eGwpcmV0dXJuO2NvbnN0IGU9MzYsdD1lLzMscz10aGlzLl92eGwuX21hbGxvYygzKmUqRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKSxyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5fdnhsLkhFQVBGMzIuYnVmZmVyLHMsMyplKSxpPXRoaXMuX3Z4bC5fbWFsbG9jKDMqdCpGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpLGE9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl92eGwuSEVBUEYzMi5idWZmZXIsaSxlKSxuPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uTkVBUl9CT1RUT01fTEVGVF0sbz10aGlzLl9mcnVzdHVtLnBvaW50c1tfLk5FQVJfQk9UVE9NX1JJR0hUXSxsPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uTkVBUl9UT1BfUklHSFRdLGg9dGhpcy5fZnJ1c3R1bS5wb2ludHNbXy5ORUFSX1RPUF9MRUZUXSxkPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uRkFSX0JPVFRPTV9MRUZUXSx1PXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uRkFSX0JPVFRPTV9SSUdIVF0sbT10aGlzLl9mcnVzdHVtLnBvaW50c1tfLkZBUl9UT1BfUklHSFRdLGc9dGhpcy5fZnJ1c3R1bS5wb2ludHNbXy5GQVJfVE9QX0xFRlRdO2xldCBmPTAscD0wO2NvbnN0IHk9dGhpcy5fZnJ1c3R1bS5wbGFuZXNbYy5ORUFSXTtmPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZixsLG8sbikscD10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxwLHkpLGY9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixmLG4saCxsKSxwPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLHAseSk7Y29uc3QgeD10aGlzLl9mcnVzdHVtLnBsYW5lc1tjLkZBUl07Zj10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGYsZCx1LG0pLHA9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEscCx4KSxmPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZixtLGcsZCkscD10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxwLHgpO2NvbnN0IHY9dGhpcy5fZnJ1c3R1bS5wbGFuZXNbYy5UT1BdO2Y9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixmLG0sbCxoKSxwPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLHAsdiksZj10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGYsaCxnLG0pLHA9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEscCx2KTtjb25zdCBiPXRoaXMuX2ZydXN0dW0ucGxhbmVzW2MuQk9UVE9NXTtmPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZixuLG8sdSkscD10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxwLGIpLGY9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixmLHUsZCxuKSxwPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLHAsYik7Y29uc3Qgdz10aGlzLl9mcnVzdHVtLnBsYW5lc1tjLkxFRlRdO2Y9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixmLGgsbixkKSxwPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLHAsdyksZj10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGYsZCxnLGgpLHA9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEscCx3KTtjb25zdCBUPXRoaXMuX2ZydXN0dW0ucGxhbmVzW2MuUklHSFRdO2Y9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixmLGwsbSx1KSxwPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLHAsVCksZj10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGYsdSxvLGwpLHA9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEscCxUKSwtMSE9PXRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQmJnRoaXMuX3Z4bC5yZW1vdmVfZ2VuZXJpY19tZXNoKHRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQpLHRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQ9dGhpcy5fdnhsLmFkZF9nZW5lcmljX21lc2gocywzKmUsaSxlLDI1NSwwLDAsNjQpLHRoaXMuX3Z4bC5fZnJlZShzKSx0aGlzLl92eGwuX2ZyZWUoaSksdGhpcy5fY2FwdHVyZUZydXN0dW09ITEsdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9Y2FwdHVyZUZydXN0dW0oKXtudWxsPT09dGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyJiYodGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyPVQuY3JlYXRlKHguTG9jYWwsdSghMSx0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSkpKSxudWxsPT09dGhpcy5fZnJ1c3R1bSYmKHRoaXMuX2ZydXN0dW09bmV3IHcodGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyKSksdGhpcy5fY2FwdHVyZUZydXN0dW09ITAsbnVsbCE9PXRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQmJnRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfXRvZ2dsZUZ1bGxWb2x1bWVFeHRlbnREcmF3KGUpe3RoaXMuX3Z4bCYmdGhpcy5fbGF5ZXJzLmZvckVhY2goKCh0LHMpPT57dC5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkJiYodGhpcy5fdnhsLnRvZ2dsZV9mdWxsX3ZvbHVtZV9leHRlbnRfZHJhdyhzKSx0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKSl9KSl9ZHJvcFF1ZXJ5UmVuZGVyVGFyZ2V0KCl7dGhpcy5fdnhsJiZ0aGlzLl92eGwuZHJvcF9xdWVyeV9ydCgpfWFkZFZveGVsTGF5ZXIoZSl7aWYoIXRoaXMuX3Z4bCl7Y29uc3QgdD17bGF5ZXJWaWV3OmUscmVzb2x2ZUNhbGxiYWNrOm51bGwscmVqZWN0Q2FsbGJhY2s6bnVsbH0scz1uZXcgUHJvbWlzZSgoKGUscyk9Pnt0LnJlc29sdmVDYWxsYmFjaz1lLHQucmVqZWN0Q2FsbGJhY2s9c30pKTtyZXR1cm4gdGhpcy5fbmV3TGF5ZXJzLnB1c2godCksc31jb25zdCB0PXRoaXMuX2FkZFZveGVsTGF5ZXIoZSk7cmV0dXJuIHQ8MD9Qcm9taXNlLnJlamVjdCgtMSk6UHJvbWlzZS5yZXNvbHZlKHQpfXJlbW92ZVZveGVsTGF5ZXIoZSl7aWYoIXRoaXMuX3Z4bCl7Y29uc3QgdD10aGlzLl9uZXdMYXllcnMuZmluZEluZGV4KCh0PT5lLnVpZD09PXQubGF5ZXJWaWV3LnVpZCkpO3Q+PTAmJih0aGlzLl9uZXdMYXllcnNbdF0ucmVzb2x2ZUNhbGxiYWNrKC0xKSx0aGlzLl9uZXdMYXllcnMuc3BsaWNlKHQsMSkpO2NvbnN0IHM9dGhpcy5fbmV3TGF5ZXJzLmxlbmd0aDtyZXR1cm4gMD09PXMmJih0aGlzLl9kYmcoVS5MaWZldGltZSxcIiBubyB2b3hlbCBsYXllcnMgbGVmdCBhZnRlciByZW1vdmluZyBhIGxheWVyLCByZW1vdmluZyBSZW5kZXJQbHVnaW4gYW5kIGRlc3Ryb3lpbmdcIiksdGhpcy5kZXN0cm95KCkpLHN9bGV0IHQ9LTE7dGhpcy5fbGF5ZXJzLmZvckVhY2goKChzLHIpPT57aWYocy5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkKXt0PXIscy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKSx0aGlzLl92eGwucmVtb3ZlX2xheWVyKHQpO2NvbnN0IGk9dGhpcy5sYXllclZpZXdVaWQuaW5kZXhPZihlLnVpZCk7LTEhPT1pJiZ0aGlzLmxheWVyVmlld1VpZC5zcGxpY2UoaSwxKX19KSksdD49MCYmdGhpcy5fbGF5ZXJzLmRlbGV0ZSh0KTtjb25zdCBzPXRoaXMuX2xheWVycy5zaXplO3JldHVybiAwPT09cyYmKHRoaXMuX2RiZyhVLkxpZmV0aW1lLFwiIG5vIHZveGVsIGxheWVycyBsZWZ0IGFmdGVyIHJlbW92aW5nIGEgbGF5ZXIsIHJlbW92aW5nIFJlbmRlclBsdWdpbiBhbmQgZGVzdHJveWluZ1wiKSx0aGlzLmRlc3Ryb3koKSksc31fZ2V0QmxvY2tTaXplKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuX3dhc21NZW1CbG9ja1NpemVzKWlmKGU8dClyZXR1cm4gdDtyZXR1cm4tMX1fYWxsb2NhdGVCbG9jayhlKXtlLmJ5dGVDb3VudD10aGlzLl92eGwubGVuZ3RoQnl0ZXNVVEY4KGUuc3RyKSsxO2NvbnN0IHQ9dGhpcy5fZ2V0QmxvY2tTaXplKGUuYnl0ZUNvdW50KTtyZXR1cm4gdDwwPyhlLmlzUmV1c2FibGU9ITEsZS5wdHI9dGhpcy5fdnhsLl9tYWxsb2MoZS5ieXRlQ291bnQpKTooZS5pc1JldXNhYmxlPSEwLGUucHRyPXRoaXMuX3dhc21NZW1CbG9ja3MuZ2V0KHQpLDA9PT1lLnB0ciYmKGUucHRyPXRoaXMuX3Z4bC5fbWFsbG9jKHQpLHRoaXMuX3dhc21NZW1CbG9ja3Muc2V0KHQsZS5wdHIpKSksMCE9PWUucHRyJiYodGhpcy5fdnhsLnN0cmluZ1RvVVRGOChlLnN0cixlLnB0cixlLmJ5dGVDb3VudCksITApfV9nZXRUaW1lQXJncyhlKXtsZXQgdD0tTnVtYmVyLk1BWF9WQUxVRSxzPU51bWJlci5NQVhfVkFMVUUscj0hMTtyZXR1cm4gbnVsbCE9ZSYmKGUuaXNBbGxUaW1lP3I9ITA6KG51bGwhPWUuc3RhcnQmJihyPSEwLHQ9ZS5zdGFydC5nZXRUaW1lKCkvMWUzKSxudWxsIT1lLmVuZCYmKHI9ITAscz1lLmVuZC5nZXRUaW1lKCkvMWUzKSkpLHtzdGFydFRpbWU6dCxlbmRUaW1lOnMsaGFzVGltZTpyfX1fYWRkVm94ZWxMYXllcihlKXtjb25zdCB0PWUubGF5ZXI7bGV0IHI9LTE7Y29uc3QgaT10LmdldENvbmZpZ3VyYXRpb24oKTtpZihpLmxlbmd0aDwxKXJldHVybi0xO2NvbnN0IGE9e3N0cjppLGJ5dGVDb3VudDowLHB0cjowLGlzUmV1c2FibGU6ITF9O2lmKCF0aGlzLl9hbGxvY2F0ZUJsb2NrKGEpKXJldHVybi0xO2NvbnN0IG89dGhpcy5fZ2V0VGltZUFyZ3ModC50aW1lRXh0ZW50KSxsPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQmJnQuc3BhdGlhbFJlZmVyZW5jZS5pc1dHUzg0PzExMTMxOS40OTA3OTMyNzM1NzoxO2xldCBoPTA7aWYodC50aW1lT2Zmc2V0JiYoaD1uKHQudGltZU9mZnNldC52YWx1ZSx0LnRpbWVPZmZzZXQudW5pdCxcInNlY29uZHNcIikpLHI9dGhpcy5fdnhsLmFkZF9sYXllcih0LnNlcnZpY2VSb290LGEucHRyLGEuYnl0ZUNvdW50LGwsbCxvLnN0YXJ0VGltZSxvLmVuZFRpbWUsby5oYXNUaW1lLHQudXNlVmlld1RpbWUsaCx0aGlzLl90b1dhc21RdWFsaXR5KHRoaXMudmlldy5xdWFsaXR5UHJvZmlsZSkpLGEuaXNSZXVzYWJsZXx8dGhpcy5fdnhsLl9mcmVlKGEucHRyKSxyPj0wKXt0LnRlc3Q/LmNvbnN0YW50VXBzY2FsaW5nJiYodGhpcy5fc2V0VXBzY2FsaW5nTGltaXRzKDAsLjI1LC4yNSksdGhpcy5fc2V0VXBzY2FsaW5nTGltaXRzKDEsLjUsLjUpLHRoaXMuX3NldFVwc2NhbGluZ0xpbWl0cygyLC43NSwuNzUpKTtjb25zdCBpPW5ldyBBYm9ydENvbnRyb2xsZXI7aWYodGhpcy5fbGF5ZXJzLnNldChyLHtsYXllclZpZXc6ZSxyZXNwb25zZXM6bmV3IE1hcCxvdXRzdGFuZGluZ1JlcXVlc3RDb3VudDowLGFib3J0Q29udHJvbGxlcjppLG5lZWRNZW1vcnlVc2FnZVVwZGF0ZTohMSxpc0luU2NhbGVSYW5nZTohMH0pLHRoaXMubGF5ZXJWaWV3VWlkLnB1c2goZS51aWQpLCF0aGlzLl9oYWxmSW50VGV4dHVyZXNBdmFpbGFibGV8fGhhcyhcIm1hY1wiKSl7Y29uc3QgdD1bXTtsZXQgcj1cIlwiO2Zvcihjb25zdCBzIG9mIGUubGF5ZXIudmFyaWFibGVzKVwiSW50MTZcIiE9PXMucmVuZGVyaW5nRm9ybWF0LnR5cGUmJlwiVUludDE2XCIhPT1zLnJlbmRlcmluZ0Zvcm1hdC50eXBlfHwodC5wdXNoKHMubmFtZSkscy5pZD09PWUubGF5ZXIuY3VycmVudFZhcmlhYmxlSWQmJihyPXMubmFtZSkpO1wiXCIhPT1yJiZzLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIiNhZGRWb3hlbExheWVyX2Vycm9yKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIGN1cnJlbnQgdmFyaWFibGUgJyR7cn0nIGluIHRoaXMgYnJvd3NlcmApLHQubGVuZ3RoPjAmJnMuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCIjYWRkVm94ZWxMYXllcl93YXJuaW5nKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIHZhcmlhYmxlcyAnJHt0LnRvU3RyaW5nKCl9JyBpbiB0aGlzIGJyb3dzZXJgKX1pZighdGhpcy5fdGV4dHVyZUZsb2F0TGluZWFyQXZhaWxhYmxlKXtjb25zdCB0PVtdO2xldCByPVwiXCI7Zm9yKGNvbnN0IHMgb2YgZS5sYXllci52YXJpYWJsZXMpXCJGbG9hdDMyXCI9PT1zLnJlbmRlcmluZ0Zvcm1hdC50eXBlJiYodC5wdXNoKHMubmFtZSkscy5pZD09PWUubGF5ZXIuY3VycmVudFZhcmlhYmxlSWQmJihyPXMubmFtZSkpO1wiXCIhPT1yJiZzLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIiNhZGRWb3hlbExheWVyX2Vycm9yKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIGN1cnJlbnQgdmFyaWFibGUgJyR7cn0nIGluIHRoaXMgYnJvd3NlcmApLHQubGVuZ3RoPjAmJnMuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCIjYWRkVm94ZWxMYXllcl93YXJuaW5nKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIHZhcmlhYmxlcyAnJHt0LnRvU3RyaW5nKCl9JyBpbiB0aGlzIGJyb3dzZXJgKX1yZXR1cm4gaGFzKFwiZXNyaS1tb2JpbGVcIikmJnMuZ2V0TG9nZ2VyKHRoaXMpLndhcm5PbmNlKFwiTW9iaWxlIHN1cHBvcnQgZGlmZmVycyBhY3Jvc3MgZGV2aWNlcy4gVm94ZWwgbGF5ZXIgbWlnaHQgbm90IGRpc3BsYXkgYXMgZXhwZWN0ZWQuXCIpLHJ9cmV0dXJuLTF9cHJlcGFyZVJlbmRlcihlKXtpZighdGhpcy5fdnhsKXJldHVybjtjb25zdCB0PWUuYmluZC5jYW1lcmEudmlld0ZvcndhcmQscz1lLmJpbmQuY2FtZXJhLmV5ZTt0aGlzLl92eGwudXBkYXRlX2NhbWVyYV9wb3NfYW5kX2RpcmVjdGlvbihzWzBdLHNbMV0sc1syXSx0WzBdLHRbMV0sdFsyXSk7Y29uc3Qgcj10aGlzLl92eGwuY3VsbCgpO3RoaXMuX2RiZyhVLlJlcXVlc3RSZXNwb25zZSxcIm1pc3NpbmdSZXNvdXJjZUNvdW50PVwiK3IpLHRoaXMuX21vcmVUb0xvYWQ9cj4wLHRoaXMuX2hhdmVQcmVwYXJlZFdpdGhBbGxMYXllcnM9MD09PXRoaXMuX25ld0xheWVycy5sZW5ndGgsdGhpcy5fdXBkYXRlTWVtb3J5VXNhZ2UoKX1hY3F1aXJlVGVjaG5pcXVlcygpe3JldHVybltdfXJlbmRlcihlKXtpZighdGhpcy5fdnhsKXJldHVybjtmb3IoY29uc3QgcyBvZiB0aGlzLl9uZXdMYXllcnMpe2NvbnN0IGU9dGhpcy5fYWRkVm94ZWxMYXllcihzLmxheWVyVmlldyk7LTE9PT1lP3MucmVqZWN0Q2FsbGJhY2soLTEpOnMucmVzb2x2ZUNhbGxiYWNrKGUpfWlmKHRoaXMuX25ld0xheWVycz1bXSwwPT09dGhpcy5fbGF5ZXJzLnNpemUpcmV0dXJuIHZvaWQgdGhpcy5fZGJnKFUuRXJyb3IsXCJObyB2b3hlbCBsYXllcnMgYnV0IFJlbmRlclBsdWdpbiBpbnN0YW5jZSBpcyBiZWluZyBhc2tlZCB0byByZW5kZXIhXCIpO3RoaXMuX2xhc3RGcmFtZVdhc1N0YXRpb25hcnk9dGhpcy52aWV3LnN0YXRpb25hcnksdGhpcy5fc3luY1JlcXVlc3RzUmVzcG9uc2VzKCksdGhpcy5fYmVmb3JlRHJhdygpLHRoaXMuX3Z4bC5iZWdpbl9jb2xvcl9mcmFtZSghdGhpcy52aWV3LnN0YWdlLnJlbmRlcmVyLmlzRmVhdHVyZUVuYWJsZWQoRS5IaWdoUmVzb2x1dGlvblZveGVsKSxlLmJpbmQubGlnaHRpbmcubWFpbkxpZ2h0LmRpcmVjdGlvblswXSxlLmJpbmQubGlnaHRpbmcubWFpbkxpZ2h0LmRpcmVjdGlvblsxXSxlLmJpbmQubGlnaHRpbmcubWFpbkxpZ2h0LmRpcmVjdGlvblsyXSk7Y29uc3QgdD10aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmUudmlld3BvcnQ7dC53aWR0aD09PXRoaXMuX3ZpZXdwb3J0V2lkdGgmJnQuaGVpZ2h0PT09dGhpcy5fdmlld3BvcnRIZWlnaHR8fCh0aGlzLl92aWV3cG9ydFdpZHRoPXQud2lkdGgsdGhpcy5fdmlld3BvcnRIZWlnaHQ9dC5oZWlnaHQsdGhpcy5fdnhsLnNldF92aWV3cG9ydCh0LndpZHRoLHQuaGVpZ2h0KSx0aGlzLl9sYXllcnMuZm9yRWFjaCgoZT0+e2UubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSEwfSkpKSwwPT09dC54JiYwPT09dC55fHx0aGlzLl9kYmcoVS5FcnJvcixcIlVuc3VwcG9ydGVkIHZpZXdwb3J0IHBhcmFtZXRlcnMgZGV0ZWN0ZWQhXCIpLHRoaXMudXBkYXRlV2FzbUNhbWVyYShlLmJpbmQuY2FtZXJhKSx0aGlzLl9jYXB0dXJlRnJ1c3R1bSYmKHRoaXMuX2ZydXN0dW0udXBkYXRlKGUuYmluZC5jYW1lcmEpLHRoaXMuX2RvQ2FwdHVyZUZydXN0dW0oKSksdGhpcy5fdnhsLmRyYXcoKSx0aGlzLl9hZnRlckRyYXcoKSwodGhpcy5fbW9yZVRvTG9hZHx8IXRoaXMuX2hhdmVQcmVwYXJlZFdpdGhBbGxMYXllcnMmJnRoaXMuX2xheWVycy5zaXplPjApJiZ0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKX1kZXN0cm95KCl7dGhpcy5fZGJnKFUuTGlmZXRpbWUsXCItLWRlc3Ryb3ktLVwiKSx0aGlzLl92eGwmJih0aGlzLl9sYXllcnMuZm9yRWFjaCgoZT0+e2UuYWJvcnRDb250cm9sbGVyLmFib3J0KCl9KSksdGhpcy5fd2FzbU1lbUJsb2Nrcy5mb3JFYWNoKChlPT57MCE9PWUmJnRoaXMuX3Z4bC5fZnJlZShlKX0pKSx0aGlzLl92eGwudW5pbml0aWFsaXplX3ZveGVsX3dhc20oKSx0aGlzLl9yZW1vdmVSZW5kZXJQbHVnaW4oKSx0aGlzLl92eGw9bnVsbCl9X2luaXRpYWxpemVXYXNtKGUpe3JldHVybiB0aGlzLl92eGw/UHJvbWlzZS5yZXNvbHZlKCk6KHRoaXMuX3Z4bFByb21pc2V8fCh0aGlzLl92eGxQcm9taXNlPXkoZSkudGhlbigoZT0+e2lmKHRoaXMuX3Z4bD1lLHRoaXMuX3Z4bFByb21pc2U9bnVsbCx0aGlzLl9uZXdMYXllcnMubGVuZ3RoPD0wKXJldHVybiB0aGlzLl9kYmcoVS5MaWZldGltZSxcIiBubyB2b3hlbCBsYXllcnMgbGVmdCBhZnRlciBXQVNNIGRvd25sb2FkZWQsIHJlbW92aW5nIFJlbmRlclBsdWdpbiBhbmQgZGVzdHJveWluZ1wiKSx2b2lkIHRoaXMuZGVzdHJveSgpO2NvbnN0IHQ9dGhpcy5fZ2V0VGltZUFyZ3ModGhpcy52aWV3Py50aW1lRXh0ZW50KSxzPXRoaXMuX3Z4bC5hZGRGdW5jdGlvbih0aGlzLl9yZXN0b3JlRnJhbWVidWZmZXIuYmluZCh0aGlzKSxcInZcIikscj10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0QmxlbmRTdGF0ZS5iaW5kKHRoaXMpLFwidmlpaWlcIiksaT10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0RnJvbnRGYWNlLmJpbmQodGhpcyksXCJ2aVwiKSxhPXRoaXMuX3Z4bC5hZGRGdW5jdGlvbih0aGlzLl9zZXRSYXN0ZXJpemVyU3RhdGUuYmluZCh0aGlzKSxcInZpXCIpLG49dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX3NldERlcHRoU3RlbmNpbFN0YXRlRnVuY3Rpb24uYmluZCh0aGlzKSxcInZpaWlcIiksbz10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0Vmlld3BvcnQuYmluZCh0aGlzKSxcInZpaWlpXCIpLGw9dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX2JpbmRQcmV2aW91c0RlcHRoVG9TbG90LmJpbmQodGhpcyksXCJpaWlcIiksaD10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fbW9kaWZ5UmVzb3VyY2VDb3VudC5iaW5kKHRoaXMpLFwidmlpaVwiKSxkPXRoaXMuX2hhbGZJbnRUZXh0dXJlc0F2YWlsYWJsZSYmIWhhcyhcIm1hY1wiKSx1PXRoaXMuX3RleHR1cmVGbG9hdExpbmVhckF2YWlsYWJsZTt0aGlzLl92eGwuaW5pdGlhbGl6ZV92b3hlbF93YXNtKHMscixpLGEsbixvLGwsaCx0LnN0YXJ0VGltZSx0LmVuZFRpbWUsdC5oYXNUaW1lLGQsdSksdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dCYmdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9KSkuY2F0Y2goKCgpPT57Zm9yKGNvbnN0IGUgb2YgdGhpcy5fbmV3TGF5ZXJzKWUucmVqZWN0Q2FsbGJhY2soLTIpO3RoaXMuX2RiZyhVLkVycm9yLFwiIFdBU00gZmFpbGVkIHRvIGRvd25sb2FkLCByZW1vdmluZyBSZW5kZXJQbHVnaW4gYW5kIGRlc3Ryb3lpbmdcIiksdGhpcy5kZXN0cm95KCl9KSkpLHRoaXMuX3Z4bFByb21pc2UpfXBpY2tEZXB0aChlLHQscyl7aWYoIXRoaXMuX3Z4bHx8IXRoaXMuX3JjdHh8fDA9PT10aGlzLl9sYXllcnMuc2l6ZSlyZXR1cm4gbnVsbDtjb25zdCByPXMudmlld3BvcnRbM10tdDtpZihlPDB8fGU+cy52aWV3cG9ydFsyXXx8dDwwfHx0PnMudmlld3BvcnRbM10pcmV0dXJuIHRoaXMuX2RiZyhVLkVycm9yLGBbanNdIHBpY2tEZXB0aDogb3V0T2ZSYW5nZSwgc2NyZWVuWFk9WyR7ZS50b0ZpeGVkKDApfSwgJHtyLnRvRml4ZWQoMCl9XV1gKSxudWxsO3RoaXMuX2JlZm9yZURyYXcoKTtjb25zdCBpPXMudmlld0ZvcndhcmQsYT1zLmV5ZTt0aGlzLl92eGwudXBkYXRlX2NhbWVyYV9wb3NfYW5kX2RpcmVjdGlvbihhWzBdLGFbMV0sYVsyXSxpWzBdLGlbMV0saVsyXSksdGhpcy51cGRhdGVXYXNtQ2FtZXJhKHMpLHRoaXMuX3Z4bC5iZWdpbl9mcmFtZSgpO2NvbnN0IG49dGhpcy5fdnhsLnBpY2tfZGVwdGgoZSxyKTtpZih0aGlzLl9hZnRlckRyYXcoKSxuLnN1Y2Nlc3Mpe3JldHVybiBuLmRpc3RhbmNlVG9DYW1lcmF9cmV0dXJuIG51bGx9cGlja09iamVjdChlLHQscyxyKXtpZighdGhpcy5fdnhsfHwhdGhpcy5fcmN0eHx8MD09PXRoaXMuX2xheWVycy5zaXplKXJldHVybiBudWxsO2NvbnN0IGk9TWF0aC5yb3VuZChlKSxhPU1hdGgucm91bmQodCk7aWYoaTwwfHxpPnMudmlld3BvcnRbMl18fGE8MHx8YT5zLnZpZXdwb3J0WzNdKXJldHVybiB0aGlzLl9kYmcoVS5FcnJvcixgW2pzXSBwaWNrT2JqZWN0OiBvdXRPZlJhbmdlLCBzY3JlZW5YWT1bJHtpfSwgJHthfV0sIHZwPVske3Mudmlld3BvcnQudG9TdHJpbmcoKX1dYCksbnVsbDt0aGlzLl9iZWZvcmVEcmF3KCk7Y29uc3Qgbj1zLnZpZXdGb3J3YXJkLG89cy5leWU7dGhpcy5fdnhsLnVwZGF0ZV9jYW1lcmFfcG9zX2FuZF9kaXJlY3Rpb24ob1swXSxvWzFdLG9bMl0sblswXSxuWzFdLG5bMl0pLHRoaXMudXBkYXRlV2FzbUNhbWVyYShzKSx0aGlzLl92eGwuYmVnaW5fZnJhbWUoKTtsZXQgbD1udWxsO2lmKDA9PT1yLmxlbmd0aClsPXRoaXMuX3Z4bC5waWNrX29iamVjdChpLGEsMCwwKTtlbHNle2NvbnN0IGU9e3N0cjpKU09OLnN0cmluZ2lmeSh7bGF5ZXJJZHM6cn0pLGJ5dGVDb3VudDowLHB0cjowLGlzUmV1c2FibGU6ITF9O3RoaXMuX2FsbG9jYXRlQmxvY2soZSkmJihsPXRoaXMuX3Z4bC5waWNrX29iamVjdChpLGEsZS5wdHIsZS5ieXRlQ291bnQpLGUuaXNSZXVzYWJsZXx8dGhpcy5fdnhsLl9mcmVlKGUucHRyKSl9cmV0dXJuIHRoaXMuX2FmdGVyRHJhdygpLGx9YXN5bmMgZ2V0T3RoZXJGaWVsZFBvcHVwVmFsdWVzKGUscyl7Zm9yKGNvbnN0IHIgb2YgZSl7Y29uc3QgZT1yLmdwdVJlc3VsdDtpZighZSljb250aW51ZTtjb25zdCBpPXRoaXMuX2xheWVycy5nZXQoZS5sYXllcklkKTtpZighaXx8IWkubGF5ZXJWaWV3LmxheWVyLnVybCljb250aW51ZTtjb25zdCBhPWkubGF5ZXJWaWV3LmxheWVyLG49e3Jlc3BvbnNlVHlwZTpcImFycmF5LWJ1ZmZlclwiLHNpZ25hbDppLmFib3J0Q29udHJvbGxlci5zaWduYWwscXVlcnk6ey4uLmkubGF5ZXJWaWV3LmxheWVyLmN1c3RvbVBhcmFtZXRlcnMsdG9rZW46aS5sYXllclZpZXcubGF5ZXIuYXBpS2V5fX0sbz1lLnZveGVsU3BhY2VQb3NpdGlvbixsPVtNYXRoLmZsb29yKG9bMF0vMzIpLE1hdGguZmxvb3Iob1sxXS8zMiksTWF0aC5mbG9vcihvWzJdLzMyKV0saD1bLTQmbFswXSwtNCZsWzFdLC00JmxbMl1dO2xldCBkPTA7aWYoZS5lcG9jaFRpbWUpe2NvbnN0IHQ9dGhpcy5fdnhsLmdldF9sYXllcl9lcG9jaF90aW1lcyhpLmxheWVyVmlldy53YXNtTGF5ZXJJZCxhLmN1cnJlbnRWYXJpYWJsZUlkKTtmb3IobGV0IHM9MDtzPHQubGVuZ3RoOysrcylpZih0W3NdPT09ZS5lcG9jaFRpbWUvMWUzKXtkPXM7YnJlYWt9fWNvbnN0IHU9W10sXz17dmFySWRzOltdLHB0cnM6W10sc2l6ZXM6W119O2Zvcihjb25zdCByIG9mIHMpe2NvbnN0IGU9YS52YXJpYWJsZXMuZmluZEluZGV4KChlPT5lLm5hbWU9PT1yKSk7aWYoLTE9PT1lKWNvbnRpbnVlO2NvbnN0IHM9YS52YXJpYWJsZXMuZ2V0SXRlbUF0KGUpPy5pZDtpZihudWxsPT1zKWNvbnRpbnVlO2NvbnN0IGk9YCR7YS51cmx9L3ZhcmlhYmxlcy8ke3N9LyR7ZH0vYnVuZGxlcy8wLyR7aFswXX0tJHtoWzFdfS0ke2hbMl19YDt1LnB1c2godChpLG4pLnRoZW4oKGU9PmUuZGF0YSkpKSxfLnZhcklkcy5wdXNoKHMpfWNvbnN0IGM9YXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKHUpLG09Yy5sZW5ndGg7Zm9yKGxldCB0PTA7dDxtOysrdCl7Y29uc3QgZT1jW3RdO2lmKFwiZnVsZmlsbGVkXCI9PT1lLnN0YXR1cyl7Y29uc3QgdD1lLnZhbHVlLHM9dGhpcy5fdnhsLl9tYWxsb2ModC5ieXRlTGVuZ3RoKTtuZXcgVWludDhBcnJheSh0aGlzLl92eGwuSEVBUFU4LmJ1ZmZlcixzLHQuYnl0ZUxlbmd0aCkuc2V0KG5ldyBVaW50OEFycmF5KHQpKSxfLnB0cnMucHVzaChzKSxfLnNpemVzLnB1c2godC5ieXRlTGVuZ3RoKX1lbHNlIF8udmFySWRzLnNwbGljZSh0LDEpfWNvbnN0IGc9dGhpcy5fdnhsLmdldF9vdGhlcl9maWVsZF9wb3B1cF92YWx1ZXMoZSxfKTtmb3IobGV0IHQ9MDt0PF8ucHRycy5sZW5ndGg7Kyt0KXRoaXMuX3Z4bC5fZnJlZShfLnB0cnNbdF0pO2lmKGcuY29udGludW91c1ZhbHVlcylmb3IoY29uc3QgdCBpbiBnLmNvbnRpbnVvdXNWYWx1ZXMpci5hdHRyaWJ1dGVzW3RdPWcuY29udGludW91c1ZhbHVlc1t0XTtpZihnLnVuaXF1ZVZhbHVlcylmb3IoY29uc3QgdCBpbiBnLnVuaXF1ZVZhbHVlcylyLmF0dHJpYnV0ZXNbdF09Zy51bmlxdWVWYWx1ZXNbdF19cmV0dXJuIGV9X2JlZm9yZURyYXcoKXt0aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmU9e2Zibzp0aGlzLl9yY3R4LmdldEJvdW5kRnJhbWVidWZmZXJPYmplY3QoKSx2aWV3cG9ydDp0aGlzLl9yY3R4LmdldFZpZXdwb3J0KCl9LHRoaXMuX3JjdHguc2V0UG9seWdvbk9mZnNldEZpbGxFbmFibGVkKCExKSx0aGlzLl9yY3R4LnNldFNjaXNzb3JUZXN0RW5hYmxlZCghMSksdGhpcy5fcmN0eC5zZXRDb2xvck1hc2soITAsITAsITAsITApfV9hZnRlckRyYXcoKXt0aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmUuZmJvPW51bGwsdGhpcy5fcmN0eC5leHRlcm5hbFRleHR1cmVVbml0VXBkYXRlKHRoaXMuX3Z4bC5nZXRfdGV4dHVyZV91bml0c19ib3VuZF9pbl9mcmFtZSgpLHRoaXMuX3Z4bC5nZXRfYWN0aXZlX3RleHR1cmVfdW5pdCgpKSx0aGlzLl9yY3R4LmV4dGVybmFsVmVydGV4QXJyYXlPYmplY3RVcGRhdGUoKSx0aGlzLl9yY3R4LmV4dGVybmFsVmVydGV4QnVmZmVyVXBkYXRlKCksdGhpcy5fcmN0eC5leHRlcm5hbFByb2dyYW1VcGRhdGUoKX1pbnRlcnNlY3QoZSx0LHMscixpKXtpZighdGhpcy5fdnhsfHwhdGhpcy5fcmN0eHx8MD09PXRoaXMuX2xheWVycy5zaXplfHwhZS5vcHRpb25zLnNlbGVjdGlvbk1vZGV8fGUub3B0aW9ucy5pc0ZpbHRlcmVkfHwhZS5jYW1lcmEpcmV0dXJuO2lmKG51bGw9PWl8fGlbMF08MHx8aVswXT5lLmNhbWVyYS52aWV3cG9ydFsyXXx8aVsxXTwwfHxpWzFdPmUuY2FtZXJhLnZpZXdwb3J0WzNdKXJldHVybiB0aGlzLl9kYmcoVS5FcnJvcixpP2BbanNdIFZveGVsV2FzbVBlclNjZW5lLmludGVyc2VjdDogb3V0T2ZSYW5nZSwgc2NyZWVuWFk9WyR7aVswXS50b0ZpeGVkKDApfSwgJHtpWzFdLnRvRml4ZWQoMCl9XWA6XCJbanNdIFZveGVsV2FzbVBlclNjZW5lLmludGVyc2VjdDogb3V0T2ZSYW5nZSwgc2NyZWVuWFk9bnVsbFwiKSxudWxsO2NvbnN0IGE9W107dGhpcy5fbGF5ZXJzLmZvckVhY2goKHQ9PntlLm9wdGlvbnMuZmlsdGVyZWRMYXllclZpZXdVaWRzLmluY2x1ZGVzKHQubGF5ZXJWaWV3LnVpZCkmJmEucHVzaCh0LmxheWVyVmlldy53YXNtTGF5ZXJJZCl9KSk7Y29uc3Qgbj10aGlzLnBpY2tPYmplY3QoaVswXSxpWzFdLGUuY2FtZXJhLGEpO2lmKG51bGw9PW58fC0xPT09bi5sYXllcklkKXJldHVybjtjb25zdCBvPXRoaXMuX2xheWVycy5nZXQobi5sYXllcklkKTtpZihvKXtjb25zdCB0PW8ubGF5ZXJWaWV3LmxheWVyLnVpZCxpPW4uZGlzdGFuY2VUb0NhbWVyYS9oKHMsciksYT1kKCk7YVswXT1uLndvcmxkWCxhWzFdPW4ud29ybGRZLGFbMl09bi53b3JsZFo7Y29uc3QgbD17fSx1PW8ubGF5ZXJWaWV3LmxheWVyLF89dS52YXJpYWJsZXMuZmluZEluZGV4KChlPT5lLmlkPT09dS5jdXJyZW50VmFyaWFibGVJZCkpO2lmKF8+PTApe2NvbnN0IGU9dS52YXJpYWJsZXMuZ2V0SXRlbUF0KF8pO251bGwhPWUmJihudWxsIT1uLmNvbnRpbnVvdXNWYWx1ZT9sW2UubmFtZV09bi5jb250aW51b3VzVmFsdWU6bnVsbCE9bi51bmlxdWVWYWx1ZUxhYmVsJiZudWxsIT1uLnVuaXF1ZVZhbHVlP2xbZS5uYW1lXT1gJHtuLnVuaXF1ZVZhbHVlTGFiZWx9ICgke24udW5pcXVlVmFsdWV9KWA6bnVsbCE9bi51bmlxdWVWYWx1ZSYmKGxbZS5uYW1lXT1gJHtuLnVuaXF1ZVZhbHVlfWApLGUuZGVzY3JpcHRpb24ubGVuZ3RoPjA/bFtcIlZveGVsLkN1cnJlbnRWYXJpYWJsZVwiXT1lLmRlc2NyaXB0aW9uOmUubmFtZT8ubGVuZ3RoPjAmJihsW1wiVm94ZWwuQ3VycmVudFZhcmlhYmxlXCJdPWUubmFtZSkpfWlmKGxbXCJWb3hlbC5Qb3NpdGlvblwiXT1gWyR7bi52b3hlbFNwYWNlUG9zaXRpb24udG9TdHJpbmcoKX1dYCxudWxsIT1uLmVwb2NoVGltZSYmbnVsbCE9bi5uYXRpdmVUaW1lJiZudWxsIT1uLm5hdGl2ZVRpbWVVbml0cyl7Y29uc3QgZT1uZXcgRGF0ZShuLmVwb2NoVGltZSk7bFtcIlZveGVsLkxvY2FsVGltZVwiXT1lLGxbXCJWb3hlbC5Tb3VyY2VUaW1lXCJdPWAke24ubmF0aXZlVGltZS50b0xvY2FsZVN0cmluZygpfSAke24ubmF0aXZlVGltZVVuaXRzfWB9bnVsbCE9bi5kZXB0aCYmKGxbXCJWb3hlbC5EZXB0aFwiXT1uLmRlcHRoKTtjb25zdCBjPW4uZmFjZU5vcm1hbDtsW1wiVm94ZWwuV29ybGRQb3NpdGlvblwiXT1gWyR7YVswXX0sICR7YVsxXX0sICR7YVsyXX1dYDtjb25zdCBtPWU9Pntjb25zdCBzPW5ldyBiKGEsdCwoKCk9PnRoaXMuX2NyZWF0ZVZveGVsR3JhcGhpYyhvLmxheWVyVmlldy5sYXllcixsLG4pKSk7ZS5zZXQodGhpcy50eXBlLHMsaSxjKX0sZz1lLnJlc3VsdHMsZj1lLm9wdGlvbnMuc3RvcmU9PT1WLkFMTDtpZigobnVsbD09Zy5taW4uZGlzdGFuY2V8fGk8Zy5taW4uZGlzdGFuY2UpJiZtKGcubWluKSwobnVsbD09Zy5tYXguZGlzdGFuY2V8fGk+Zy5tYXguZGlzdGFuY2UpJiZtKGcubWF4KSxmKXtjb25zdCB0PW5ldyBMKGUucmF5KTttKHQpLGUucmVzdWx0cy5hbGwucHVzaCh0KX19fV9jcmVhdGVWb3hlbEdyYXBoaWMoZSx0LHMpe3JldHVybiBuZXcgdih7bGF5ZXI6ZSxzb3VyY2VMYXllcjplLGF0dHJpYnV0ZXM6dCxncHVSZXN1bHQ6c30pfV90b1dhc21RdWFsaXR5KGUpe3N3aXRjaChlKXtjYXNlXCJsb3dcIjpyZXR1cm4gMDtjYXNlXCJtZWRpdW1cIjpyZXR1cm4gMTtjYXNlXCJoaWdoXCI6cmV0dXJuIDJ9fV9zZXRVcHNjYWxpbmdMaW1pdHMoZSx0LHMpe3RoaXMuX3Z4bCYmdGhpcy5fdnhsLnNldF91cHNjYWxpbmdfbGltaXRzKGUsdCxzKX1oYXNIaWdobGlnaHQoKXtyZXR1cm4hMX19O2UoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0say5wcm90b3R5cGUsXCJ2aWV3XCIsdm9pZCAwKSxrPWUoW2woXCJlc3JpLmxheWVycy5Wb3hlbFdhc21QZXJTY2VuZVZpZXdcIildLGspO2NvbnN0IEE9aztleHBvcnR7QSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0QXNzZXRVcmwgYXMgdH1mcm9tXCIuLi8uLi9hc3NldHMuanNcIjtmdW5jdGlvbiBlKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZT0+aW1wb3J0KFwiLi4vLi4vY2h1bmtzL3Z4bExheWVyLmpzXCIpLnRoZW4oKHQ9PnQudikpLnRoZW4oKCh7ZGVmYXVsdDpufSk9Pntjb25zdCByPW4oe2xvY2F0ZUZpbGU6aSxwcmVpbml0aWFsaXplZFdlYkdMQ29udGV4dDp0LG9uUnVudGltZUluaXRpYWxpemVkOigpPT5lKHIpfSl9KSkpKS5jYXRjaCgodD0+e3Rocm93IHR9KSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gdChgZXNyaS9saWJzL3Z4bC8ke2V9YCl9ZXhwb3J0e2UgYXMgbG9hZFZveGVsV0FTTX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGUsaSx0LG4sYSxvOyFmdW5jdGlvbihlKXtlW2UuQmluYXJ5PTBdPVwiQmluYXJ5XCIsZVtlLkpTT049MV09XCJKU09OXCJ9KGV8fChlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlRyZWVJbmRleD0wXT1cIlRyZWVJbmRleFwiLGVbZS5UcmVlU3RhdHM9MV09XCJUcmVlU3RhdHNcIixlW2UuVHJlZURhdGE9Ml09XCJUcmVlRGF0YVwiLGVbZS5Ccmlja0J1bmRsZXM9M109XCJCcmlja0J1bmRsZXNcIixlW2UuU2VjdGlvbj00XT1cIlNlY3Rpb25cIixlW2UuVmFyaWFibGVTdGF0cz01XT1cIlZhcmlhYmxlU3RhdHNcIn0oaXx8KGk9e30pKSxmdW5jdGlvbihlKXtlW2UuTm9uZT0xXT1cIk5vbmVcIixlW2UuRnJvbnQ9Ml09XCJGcm9udFwiLGVbZS5CYWNrPTNdPVwiQmFja1wifSh0fHwodD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Mb3c9MF09XCJMb3dcIixlW2UuTWVkaXVtPTFdPVwiTWVkaXVtXCIsZVtlLkhpZ2g9Ml09XCJIaWdoXCJ9KG58fChuPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLlN0YXRpY1NlY3Rpb25zPTFdPVwiU3RhdGljU2VjdGlvbnNcIixlW2UuU2xpY2VzPTJdPVwiU2xpY2VzXCIsZVtlLkR5bmFtaWNTZWN0aW9ucz00XT1cIkR5bmFtaWNTZWN0aW9uc1wiLGVbZS5HaG9zdFNoZWxsPThdPVwiR2hvc3RTaGVsbFwiLGVbZS5Jc29zdXJmYWNlPTE2XT1cIklzb3N1cmZhY2VcIixlW2UuUXVhbGl0eT0zMl09XCJRdWFsaXR5XCIsZVtlLlN1bkxvY2F0aW9uPTY0XT1cIlN1bkxvY2F0aW9uXCIsZVtlLlN0YXRpY1NlY3Rpb25TZWxlY3Rpb249MTI4XT1cIlN0YXRpY1NlY3Rpb25TZWxlY3Rpb25cIixlW2UuRXhhZ2dlcmF0aW9uQW5kT2Zmc2V0PTI1Nl09XCJFeGFnZ2VyYXRpb25BbmRPZmZzZXRcIixlW2UuQ3VycmVudFRpbWU9NTEyXT1cIkN1cnJlbnRUaW1lXCIsZVtlLkN1cnJlbnRWYXJpYWJsZT0xMDI0XT1cIkN1cnJlbnRWYXJpYWJsZVwiLGVbZS5EZWxldGVJc29zdXJmYWNlPTIwNDhdPVwiRGVsZXRlSXNvc3VyZmFjZVwiLGVbZS5Db250YWluZXJWaXNpYmlsaXR5PTQwOTZdPVwiQ29udGFpbmVyVmlzaWJpbGl0eVwiLGVbZS5SZW5kZXJNb2RlPTgxOTJdPVwiUmVuZGVyTW9kZVwiLGVbZS5PcHRpbWl6YXRpb249MTYzODRdPVwiT3B0aW1pemF0aW9uXCIsZVtlLlZhcmlhYmxlU3R5bGVzPTMyNzY4XT1cIlZhcmlhYmxlU3R5bGVzXCIsZVtlLlZvbHVtZVN0eWxlcz02NTUzNl09XCJWb2x1bWVTdHlsZXNcIixlW2UuQW5hbHlzaXNTbGljZT0xMzEwNzJdPVwiQW5hbHlzaXNTbGljZVwifShhfHwoYT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Jc29zdXJmYWNlcz0wXT1cIklzb3N1cmZhY2VzXCIsZVtlLkR5bmFtaWNTZWN0aW9ucz0xXT1cIkR5bmFtaWNTZWN0aW9uc1wiLGVbZS5TdGF0aWNTZWN0aW9ucz0yXT1cIlN0YXRpY1NlY3Rpb25zXCJ9KG98fChvPXt9KSk7ZXhwb3J0e28gYXMgQ29udGFpbmVyVHlwZSxhIGFzIFVwZGF0ZUZsYWdzLGkgYXMgVm94ZWxSZXF1ZXN0VHlwZSx0IGFzIFdhc21DdWxsTW9kZSxuIGFzIFdhc21SZW5kZXJpbmdRdWFsaXR5LGUgYXMgV2FzbVJlc3BvbnNlVHlwZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vR3JhcGhpYy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9SYW5kb21MQ0cuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgZX1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7bGV0IHQ9Y2xhc3MgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKHIpe3N1cGVyKHIpLHRoaXMuZ3B1UmVzdWx0PW51bGx9fTtyKFtzKHtjb25zdHJ1Y3RPbmx5OiEwLGNsb25hYmxlOlwicmVmZXJlbmNlXCJ9KV0sdC5wcm90b3R5cGUsXCJncHVSZXN1bHRcIix2b2lkIDApLHQ9cihbZShcImVzcmkudmlld3MuM2QubGF5ZXJzLlZveGVsR3JhcGhpY1wiKV0sdCk7ZXhwb3J0e3QgYXMgVm94ZWxHcmFwaGljfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==