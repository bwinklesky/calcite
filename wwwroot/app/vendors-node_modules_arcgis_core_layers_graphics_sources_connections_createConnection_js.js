export const __webpack_id__ = "vendors-node_modules_arcgis_core_layers_graphics_sources_connections_createConnection_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_layers_graphics_sources_connections_createConnection_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../rest/query/operations/query.js */ "./node_modules/@arcgis/core/rest/query/operations/query.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__.WebSocketConnection{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if("attributes"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Failed to parse message",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:"json",...this._config.customParameters},i=(0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(e.path,{query:r,responseType:"json"}),o=(await i).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:i,token:o}=r,n=this._inferWebSocketBaseUrl(i);return (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.addQueryParameters)(`${n}/subscribe`,{outSR:""+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes("wss"))return t;return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Unable to infer WebSocket url",e)),null}async _setFilter(e,t){const s=this._websocket;if(null==s||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.createResolver)(),u=()=>{a||(this.destroyed||this._websocket!==s||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Server timed out when setting filter")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Failed to set service filter",t.error)),this._set("errorString",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(s),a=!0,c.resolve())};return s.onmessage=l,s.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.fromJSON)(e.geometry);if("extent"!==t.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection",`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(s){_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Encountered an error when setting connection geometryDefinition",s))}return e?.where&&"1 = 1"!==e.where&&"1=1"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(",")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],s=this._relatedFeatures.get(o);if(!s)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;const{attributes:n,geometry:a}=s;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Found malformed feature - no geometry found",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),i=this._queryArchive(t);await r;const o=await i;if(!o)return;for(const s of o.features)this.onFeature(this._enrich(s))}catch(e){_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("geoevent-connection","Encountered an error when querying buddy services",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../FeatureLayer.js */ "./node_modules/@arcgis/core/layers/FeatureLayer.js"))).default)({url:e}),{capabilities:r}=await t.load(),i=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,s=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,c=t.capabilities.query.maxRecordCount,u=i?c*n:c,h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__["default"];if(h.outFields=this._config.outFields??["*"],h.where=this._config.filter?.where??"1=1",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_9__["default"].fromJSON(this._config.spatialReference),s&&(h.returnCentroid=!0),i&&(h.maxRecordCountFactor=n),o)return h.num=u,t.destroy(),this._queryPages(e,h);const d=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],i=0){t.start=null!=t.num?i*t.num:null;const{data:o}=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&i<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,i+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,i=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[i];t.set(e,o)}this._relatedFeatures=t}};g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.layers.graphics.sources.connections.GeoEventConnection")],g);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebSocketConnection: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../support/StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var h;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(h||(h={}));let d=class extends _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_10__["default"]{constructor(e){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_9__.getGeometryZScaler)(t,s,o),this._open()}normalizeCtorArgs(){return{}}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return"connected";case h.CLOSING:case h.CLOSED:return"disconnected"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.addQueryParameters)(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange("connectionStatus")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void this.destroy()):(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.after)(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Failed to parse message, invalid JSON",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.createResolver)(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&"object"==typeof r||(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - malformed message",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),"json"!==r.format&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - format is not set",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set filter, but server doesn't support it")),a&&r.outFields!==a&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set outFields, but server doesn't support it")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:"json",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),"type"in e)switch(e.type){case"features":case"featureResult":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t="Encountered an error over WebSocket connection";this._set("errorString",t),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",t)}_onClose(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"connectionStatus",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"errorString",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.layers.graphics.sources.connections.WebSocketConnection")],d);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConnection: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeoEventConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/ClientSideConnection.js */ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(e,t){if(null==e&&null==t)return null;const n={};return null!=t&&(n.geometry=t),null!=e&&(n.where=e),n}function r(r,i,s,c,l,u,a,m,p){const f={source:r,sourceSpatialReference:i,spatialReference:s,geometryType:c,filter:o(l,u),maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!r)return new _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__.ClientSideConnection(f);return r.path.startsWith("wss://")||r.path.startsWith("ws://")?new _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__.WebSocketConnection(f):new _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__["default"](f)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/ClientSideConnection.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClientSideConnection: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let a=class extends _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__["default"]{constructor(e){super({}),this.connectionStatus="connected",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__.getGeometryZScaler)(r,s,t)}normalizeCtorArgs(){return{}}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if("type"in e)switch(e.type){case"features":case"featureResult":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],a.prototype,"connectionStatus",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],a.prototype,"errorString",void 0),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.layers.support.ClientSideConnection")],a);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/StreamConnection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/StreamConnection.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let c=class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("stream-connection",this.errorString):null}onFeature(r){this.emit("data-received",r)}onMessage(r){this.emit("message-received",r)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],c.prototype,"connectionError",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.layers.support.StreamConnection")],c);


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX2dyYXBoaWNzX3NvdXJjZXNfY29ubmVjdGlvbnNfY3JlYXRlQ29ubmVjdGlvbl9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDaXdCLGVBQWUsd0NBQXdDLG9CQUFvQix5RUFBQyxDQUFDLGVBQWUsT0FBTyxVQUFVLDJEQUEyRCxjQUFjLGdFQUFnRSx5QkFBeUIsdURBQUMseU1BQXlNLDRFQUE0RSxpSkFBaUosTUFBTSxxQkFBcUIsY0FBYyxxQ0FBcUMsY0FBYyxxQkFBcUIsTUFBTSxJQUFJLCtFQUErRSxTQUFTLFlBQVksdURBQUMsMkJBQTJCLHNEQUFDLHFEQUFxRCxrQkFBa0IsdUJBQXVCLGlDQUFpQyxTQUFTLDBDQUEwQyxHQUFHLHVEQUFDLFNBQVMsNEJBQTRCLG1CQUFtQixtQ0FBbUMsd0JBQXdCLGNBQWMsZUFBZSxvQ0FBb0MsT0FBTyxxRUFBQyxJQUFJLEVBQUUsYUFBYSx3QkFBd0IsRUFBRSwwQkFBMEIsNEJBQTRCLCtDQUErQyxPQUFPLHVEQUFDLDJCQUEyQixzREFBQyxnRUFBZ0Usc0JBQXNCLHdCQUF3QixvQ0FBb0Msd0JBQXdCLGtDQUFrQyxFQUFFLFNBQVMsUUFBUSxxRUFBQyxVQUFVLHlDQUF5Qyx1REFBQywyQkFBMkIsc0RBQUMsNEVBQTRFLE9BQU8sMkJBQTJCLHFCQUFxQix1REFBQywyQkFBMkIsc0RBQUMsMEhBQTBILFFBQVEsK0VBQStFLHlEQUF5RCxzQkFBc0IsV0FBVyw2QkFBNkIsbUJBQW1CLFFBQVEseUVBQUMsYUFBYSwrQkFBK0Isc0RBQUMseURBQXlELE9BQU8sR0FBRyxvREFBb0QsU0FBUyx1REFBQywyQkFBMkIsc0RBQUMsNkZBQTZGLDRHQUE0RyxXQUFXLG1DQUFtQywyR0FBMkcsYUFBYSx1REFBQyxnSEFBZ0gsTUFBTSx3QkFBd0IsR0FBRyxzQ0FBc0MsaURBQWlELHVEQUFD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aUIsVUFBVSxxQkFBcUIsc0JBQXNCLDRCQUE0QixzREFBQyw0Q0FBNEMsYUFBYSw2QkFBNkIsYUFBYSxrQ0FBa0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVkseUNBQXlDLHVEQUFDLEVBQUUsc0ZBQUMsNkNBQWtFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL2Nvbm5lY3Rpb25zL0dlb0V2ZW50Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvY29ubmVjdGlvbnMvV2ViU29ja2V0Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvY29ubmVjdGlvbnMvY3JlYXRlQ29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvQ2xpZW50U2lkZUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L1N0cmVhbUNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7Y3JlYXRlUmVzb2x2ZXIgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHthZGRRdWVyeVBhcmFtZXRlcnMgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9SYW5kb21MQ0cuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0IGEgZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvU3BhdGlhbFJlZmVyZW5jZS5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvanNvblV0aWxzLmpzXCI7aW1wb3J0e1dlYlNvY2tldENvbm5lY3Rpb24gYXMgdX1mcm9tXCIuL1dlYlNvY2tldENvbm5lY3Rpb24uanNcIjtpbXBvcnR7ZXhlY3V0ZVF1ZXJ5IGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vcmVzdC9xdWVyeS9vcGVyYXRpb25zL3F1ZXJ5LmpzXCI7aW1wb3J0IGYgZnJvbVwiLi4vLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1F1ZXJ5LmpzXCI7Y29uc3QgaD0xZTQsZD17bWF4UXVlcnlEZXB0aDo1LG1heFJlY29yZENvdW50RmFjdG9yOjN9O2xldCBnPWNsYXNzIGV4dGVuZHMgdXtjb25zdHJ1Y3RvcihlKXtzdXBlcih7Li4uZCwuLi5lfSksdGhpcy5fYnVkZHlTZXJ2aWNlc1F1ZXJ5PW51bGwsdGhpcy5fcmVsYXRlZEZlYXR1cmVzPW51bGx9YXN5bmMgX29wZW4oKXtjb25zdCBlPWF3YWl0IHRoaXMuX2ZldGNoU2VydmljZURlZmluaXRpb24odGhpcy5fY29uZmlnLnNvdXJjZSk7ZS50aW1lSW5mby50cmFja0lkRmllbGR8fGkuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCJHZW9FdmVudCBzZXJ2aWNlIHdhcyBjb25maWd1cmVkIHdpdGhvdXQgYSBUcmFja0lkRmllbGQuIFRoaXMgbWF5IHJlc3VsdCBpbiBjZXJ0YWluIGZ1bmN0aW9uYWxpdHkgYmVpbmcgZGlzYWJsZWQuIFRoZSBwdXJnZU9wdGlvbnMubWF4T2JzZXJ2YXRpb25zIHByb3BlcnR5IHdpbGwgaGF2ZSBubyBlZmZlY3QuXCIpO2NvbnN0IHQ9dGhpcy5fZmV0Y2hXZWJTb2NrZXRVcmwoZS5zdHJlYW1VcmxzLHRoaXMuX2NvbmZpZy5zcGF0aWFsUmVmZXJlbmNlKTt0aGlzLl9idWRkeVNlcnZpY2VzUXVlcnl8fCh0aGlzLl9idWRkeVNlcnZpY2VzUXVlcnk9dGhpcy5fcXVlcnlCdWRkeVNlcnZpY2VzKCkpLGF3YWl0IHRoaXMuX2J1ZGR5U2VydmljZXNRdWVyeSxhd2FpdCB0aGlzLl90cnlDcmVhdGVXZWJTb2NrZXQodCk7Y29uc3R7ZmlsdGVyOnIsb3V0RmllbGRzOm99PXRoaXMuX2NvbmZpZzt0aGlzLmRlc3Ryb3llZHx8dGhpcy5fc2V0RmlsdGVyKHIsbyl9X29uTWVzc2FnZShlKXtpZihcImF0dHJpYnV0ZXNcImluIGUpe2xldCBvO3RyeXtvPXRoaXMuX2VucmljaChlKSxudWxsIT10aGlzLl9mZWF0dXJlWlNjYWxlciYmdGhpcy5fZmVhdHVyZVpTY2FsZXIoby5nZW9tZXRyeSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgaS5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJGYWlsZWQgdG8gcGFyc2UgbWVzc2FnZVwiLHQpKX10aGlzLm9uRmVhdHVyZShvKX1lbHNlIHRoaXMub25NZXNzYWdlKGUpfWFzeW5jIF9mZXRjaFNlcnZpY2VEZWZpbml0aW9uKGUpe2NvbnN0IHI9e2Y6XCJqc29uXCIsLi4udGhpcy5fY29uZmlnLmN1c3RvbVBhcmFtZXRlcnN9LGk9dChlLnBhdGgse3F1ZXJ5OnIscmVzcG9uc2VUeXBlOlwianNvblwifSksbz0oYXdhaXQgaSkuZGF0YTtyZXR1cm4gdGhpcy5fc2VydmljZURlZmluaXRpb249byxvfV9mZXRjaFdlYlNvY2tldFVybChlLHQpe2NvbnN0IHI9ZVswXSx7dXJsczppLHRva2VuOm99PXIsbj10aGlzLl9pbmZlcldlYlNvY2tldEJhc2VVcmwoaSk7cmV0dXJuIHMoYCR7bn0vc3Vic2NyaWJlYCx7b3V0U1I6XCJcIit0LndraWQsdG9rZW46b30pfV9pbmZlcldlYlNvY2tldEJhc2VVcmwoZSl7aWYoMT09PWUubGVuZ3RoKXJldHVybiBlWzBdO2Zvcihjb25zdCB0IG9mIGUpaWYodC5pbmNsdWRlcyhcIndzc1wiKSlyZXR1cm4gdDtyZXR1cm4gaS5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJVbmFibGUgdG8gaW5mZXIgV2ViU29ja2V0IHVybFwiLGUpKSxudWxsfWFzeW5jIF9zZXRGaWx0ZXIoZSx0KXtjb25zdCBzPXRoaXMuX3dlYnNvY2tldDtpZihudWxsPT1zfHxudWxsPT1lJiZudWxsPT10KXJldHVybjtjb25zdCBuPUpTT04uc3RyaW5naWZ5KHtmaWx0ZXI6dGhpcy5fc2VyaWFsaXplRmlsdGVyKGUsdCl9KTtsZXQgYT0hMTtjb25zdCBjPW8oKSx1PSgpPT57YXx8KHRoaXMuZGVzdHJveWVkfHx0aGlzLl93ZWJzb2NrZXQhPT1zfHxpLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIlNlcnZlciB0aW1lZCBvdXQgd2hlbiBzZXR0aW5nIGZpbHRlclwiKSksYy5yZWplY3QoKSl9LGw9ZT0+e2NvbnN0IHQ9SlNPTi5wYXJzZShlLmRhdGEpO3QuZmlsdGVyJiYodC5lcnJvciYmKGkuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyByKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiRmFpbGVkIHRvIHNldCBzZXJ2aWNlIGZpbHRlclwiLHQuZXJyb3IpKSx0aGlzLl9zZXQoXCJlcnJvclN0cmluZ1wiLGBDb3VsZCBub3Qgc2V0IHNlcnZpY2UgZmlsdGVyIC0gJHt0LmVycm9yfWApLGMucmVqZWN0KHQuZXJyb3IpKSx0aGlzLl9zZXRXZWJTb2NrZXRKU09OUGFyc2VIYW5kbGVyKHMpLGE9ITAsYy5yZXNvbHZlKCkpfTtyZXR1cm4gcy5vbm1lc3NhZ2U9bCxzLnNlbmQobiksc2V0VGltZW91dCh1LGgpLGMucHJvbWlzZX1fc2VyaWFsaXplRmlsdGVyKGUsdCl7Y29uc3Qgbz17fTtpZihudWxsPT1lJiZudWxsPT10KXJldHVybiBvO2lmKGU/Lmdlb21ldHJ5KXRyeXtjb25zdCB0PWMoZS5nZW9tZXRyeSk7aWYoXCJleHRlbnRcIiE9PXQudHlwZSl0aHJvdyBuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixgRXhwZWN0ZWQgZXh0ZW50IGJ1dCBmb3VuZCB0eXBlICR7dC50eXBlfWApO28uZ2VvbWV0cnk9SlNPTi5zdHJpbmdpZnkodC5zaGlmdENlbnRyYWxNZXJpZGlhbigpKX1jYXRjaChzKXtpLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gc2V0dGluZyBjb25uZWN0aW9uIGdlb21ldHJ5RGVmaW5pdGlvblwiLHMpKX1yZXR1cm4gZT8ud2hlcmUmJlwiMSA9IDFcIiE9PWUud2hlcmUmJlwiMT0xXCIhPT1lLndoZXJlJiYoby53aGVyZT1lLndoZXJlKSxudWxsIT10JiYoby5vdXRGaWVsZHM9dC5qb2luKFwiLFwiKSksb31fZW5yaWNoKGUpe2lmKCF0aGlzLl9yZWxhdGVkRmVhdHVyZXMpcmV0dXJuIGU7Y29uc3QgdD10aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbi5yZWxhdGVkRmVhdHVyZXMuam9pbkZpZWxkLG89ZS5hdHRyaWJ1dGVzW3RdLHM9dGhpcy5fcmVsYXRlZEZlYXR1cmVzLmdldChvKTtpZighcylyZXR1cm4gaS5nZXRMb2dnZXIodGhpcykud2FybihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZlYXR1cmUgam9pbiBmYWlsZWQuIElzIHRoZSBqb2luIGZpZWxkIGNvbmZpZ3VyZWQgY29ycmVjdGx5P1wiLGUpLGU7Y29uc3R7YXR0cmlidXRlczpuLGdlb21ldHJ5OmF9PXM7Zm9yKGNvbnN0IHIgaW4gbillLmF0dHJpYnV0ZXNbcl09bltyXTtyZXR1cm4gYSYmKGUuZ2VvbWV0cnk9YSksZS5nZW9tZXRyeXx8ZS5jZW50cm9pZHx8aS5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJGb3VuZCBtYWxmb3JtZWQgZmVhdHVyZSAtIG5vIGdlb21ldHJ5IGZvdW5kXCIsZSkpLGV9YXN5bmMgX3F1ZXJ5QnVkZHlTZXJ2aWNlcygpe3RyeXtjb25zdHtyZWxhdGVkRmVhdHVyZXM6ZSxrZWVwTGF0ZXN0QXJjaGl2ZTp0fT10aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbixyPXRoaXMuX3F1ZXJ5UmVsYXRlZEZlYXR1cmVzKGUpLGk9dGhpcy5fcXVlcnlBcmNoaXZlKHQpO2F3YWl0IHI7Y29uc3Qgbz1hd2FpdCBpO2lmKCFvKXJldHVybjtmb3IoY29uc3QgcyBvZiBvLmZlYXR1cmVzKXRoaXMub25GZWF0dXJlKHRoaXMuX2VucmljaChzKSl9Y2F0Y2goZSl7aS5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJFbmNvdW50ZXJlZCBhbiBlcnJvciB3aGVuIHF1ZXJ5aW5nIGJ1ZGR5IHNlcnZpY2VzXCIse2Vycm9yOmV9KSl9fWFzeW5jIF9xdWVyeVJlbGF0ZWRGZWF0dXJlcyhlKXtpZighZSlyZXR1cm47Y29uc3QgdD1hd2FpdCB0aGlzLl9xdWVyeUJ1ZGR5KGUuZmVhdHVyZXNVcmwpO3RoaXMuX2FkZFJlbGF0ZWRGZWF0dXJlcyh0KX1hc3luYyBfcXVlcnlBcmNoaXZlKGUpe2lmKGUpcmV0dXJuIHRoaXMuX3F1ZXJ5QnVkZHkoZS5mZWF0dXJlc1VybCl9YXN5bmMgX3F1ZXJ5QnVkZHkoZSl7Y29uc3QgdD1uZXcoKGF3YWl0IGltcG9ydChcIi4uLy4uLy4uL0ZlYXR1cmVMYXllci5qc1wiKSkuZGVmYXVsdCkoe3VybDplfSkse2NhcGFiaWxpdGllczpyfT1hd2FpdCB0LmxvYWQoKSxpPXIucXVlcnkuc3VwcG9ydHNNYXhSZWNvcmRDb3VudEZhY3RvcixvPXIucXVlcnkuc3VwcG9ydHNQYWdpbmF0aW9uLHM9ci5xdWVyeS5zdXBwb3J0c0NlbnRyb2lkLG49dGhpcy5fY29uZmlnLm1heFJlY29yZENvdW50RmFjdG9yLGM9dC5jYXBhYmlsaXRpZXMucXVlcnkubWF4UmVjb3JkQ291bnQsdT1pP2MqbjpjLGg9bmV3IGY7aWYoaC5vdXRGaWVsZHM9dGhpcy5fY29uZmlnLm91dEZpZWxkcz8/W1wiKlwiXSxoLndoZXJlPXRoaXMuX2NvbmZpZy5maWx0ZXI/LndoZXJlPz9cIjE9MVwiLGgucmV0dXJuR2VvbWV0cnk9ITAsaC5yZXR1cm5FeGNlZWRlZExpbWl0RmVhdHVyZXM9ITAsaC5vdXRTcGF0aWFsUmVmZXJlbmNlPWEuZnJvbUpTT04odGhpcy5fY29uZmlnLnNwYXRpYWxSZWZlcmVuY2UpLHMmJihoLnJldHVybkNlbnRyb2lkPSEwKSxpJiYoaC5tYXhSZWNvcmRDb3VudEZhY3Rvcj1uKSxvKXJldHVybiBoLm51bT11LHQuZGVzdHJveSgpLHRoaXMuX3F1ZXJ5UGFnZXMoZSxoKTtjb25zdCBkPWF3YWl0IGwoZSxoLHRoaXMuX2NvbmZpZy5zb3VyY2VTcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gdC5kZXN0cm95KCksZC5kYXRhfWFzeW5jIF9xdWVyeVBhZ2VzKGUsdCxyPVtdLGk9MCl7dC5zdGFydD1udWxsIT10Lm51bT9pKnQubnVtOm51bGw7Y29uc3R7ZGF0YTpvfT1hd2FpdCBsKGUsdCx0aGlzLl9jb25maWcuc291cmNlU3BhdGlhbFJlZmVyZW5jZSk7cmV0dXJuIG8uZXhjZWVkZWRUcmFuc2ZlckxpbWl0JiZpPCh0aGlzLl9jb25maWcubWF4UXVlcnlEZXB0aD8/MCk/KG8uZmVhdHVyZXMuZm9yRWFjaCgoZT0+ci5wdXNoKGUpKSksdGhpcy5fcXVlcnlQYWdlcyhlLHQscixpKzEpKTooci5mb3JFYWNoKChlPT5vLmZlYXR1cmVzLnB1c2goZSkpKSxvKX1fYWRkUmVsYXRlZEZlYXR1cmVzKGUpe2NvbnN0IHQ9bmV3IE1hcCxyPWUuZmVhdHVyZXMsaT10aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbi5yZWxhdGVkRmVhdHVyZXMuam9pbkZpZWxkO2Zvcihjb25zdCBvIG9mIHIpe2NvbnN0IGU9by5hdHRyaWJ1dGVzW2ldO3Quc2V0KGUsbyl9dGhpcy5fcmVsYXRlZEZlYXR1cmVzPXR9fTtnPWUoW24oXCJlc3JpLmxheWVycy5ncmFwaGljcy5zb3VyY2VzLmNvbm5lY3Rpb25zLkdlb0V2ZW50Q29ubmVjdGlvblwiKV0sZyk7ZXhwb3J0e2cgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2FmdGVyIGFzIHMsY3JlYXRlUmVzb2x2ZXIgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHthZGRRdWVyeVBhcmFtZXRlcnMgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvUmFuZG9tTENHLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtnZXRHZW9tZXRyeVpTY2FsZXIgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3pzY2FsZS5qc1wiO2ltcG9ydCBsIGZyb21cIi4uLy4uLy4uL3N1cHBvcnQvU3RyZWFtQ29ubmVjdGlvbi5qc1wiO3ZhciBoOyFmdW5jdGlvbihlKXtlW2UuQ09OTkVDVElORz0wXT1cIkNPTk5FQ1RJTkdcIixlW2UuT1BFTj0xXT1cIk9QRU5cIixlW2UuQ0xPU0lORz0yXT1cIkNMT1NJTkdcIixlW2UuQ0xPU0VEPTNdPVwiQ0xPU0VEXCJ9KGh8fChoPXt9KSk7bGV0IGQ9Y2xhc3MgZXh0ZW5kcyBse2NvbnN0cnVjdG9yKGUpe3N1cGVyKHt9KSx0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzPVtdLHRoaXMuZXJyb3JTdHJpbmc9bnVsbDtjb25zdHtnZW9tZXRyeVR5cGU6dCxzcGF0aWFsUmVmZXJlbmNlOm8sc291cmNlU3BhdGlhbFJlZmVyZW5jZTpzfT1lO3RoaXMuX2NvbmZpZz1lLHRoaXMuX2ZlYXR1cmVaU2NhbGVyPWEodCxzLG8pLHRoaXMuX29wZW4oKX1ub3JtYWxpemVDdG9yQXJncygpe3JldHVybnt9fWFzeW5jIF9vcGVuKCl7YXdhaXQgdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KCksdGhpcy5kZXN0cm95ZWR8fGF3YWl0IHRoaXMuX2hhbmRzaGFrZSgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksbnVsbCE9dGhpcy5fd2Vic29ja2V0JiYodGhpcy5fd2Vic29ja2V0Lm9ub3Blbj1udWxsLHRoaXMuX3dlYnNvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fd2Vic29ja2V0Lm9uZXJyb3I9bnVsbCx0aGlzLl93ZWJzb2NrZXQub25tZXNzYWdlPW51bGwsdGhpcy5fd2Vic29ja2V0LmNsb3NlKCkpLHRoaXMuX3dlYnNvY2tldD1udWxsfWdldCBjb25uZWN0aW9uU3RhdHVzKCl7aWYobnVsbD09dGhpcy5fd2Vic29ja2V0KXJldHVyblwiZGlzY29ubmVjdGVkXCI7c3dpdGNoKHRoaXMuX3dlYnNvY2tldC5yZWFkeVN0YXRlKXtjYXNlIGguQ09OTkVDVElORzpjYXNlIGguT1BFTjpyZXR1cm5cImNvbm5lY3RlZFwiO2Nhc2UgaC5DTE9TSU5HOmNhc2UgaC5DTE9TRUQ6cmV0dXJuXCJkaXNjb25uZWN0ZWRcIn19c2VuZE1lc3NhZ2VUb1NvY2tldChlKXtudWxsIT10aGlzLl93ZWJzb2NrZXQ/dGhpcy5fd2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZSkpOnRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXMucHVzaChlKX1zZW5kTWVzc2FnZVRvQ2xpZW50KGUpe3RoaXMuX29uTWVzc2FnZShlKX11cGRhdGVDdXN0b21QYXJhbWV0ZXJzKGUpe3RoaXMuX2NvbmZpZy5jdXN0b21QYXJhbWV0ZXJzPWUsbnVsbCE9dGhpcy5fd2Vic29ja2V0JiZ0aGlzLl93ZWJzb2NrZXQuY2xvc2UoKX1hc3luYyBfdHJ5Q3JlYXRlV2ViU29ja2V0KGU9dGhpcy5fY29uZmlnLnNvdXJjZS5wYXRoLHI9MWUzLGk9MCl7dHJ5e2lmKHRoaXMuZGVzdHJveWVkKXJldHVybjtjb25zdCB0PW4oZSx0aGlzLl9jb25maWcuY3VzdG9tUGFyYW1ldGVycz8/e30pO3RoaXMuX3dlYnNvY2tldD1hd2FpdCB0aGlzLl9jcmVhdGVXZWJTb2NrZXQodCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJjb25uZWN0aW9uU3RhdHVzXCIpfWNhdGNoKGMpe2NvbnN0IG49ci8xZTM7cmV0dXJuIHRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyYmaT49dGhpcy5fY29uZmlnLm1heFJlY29ubmVjdGlvbkF0dGVtcHRzPyhvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJFeGNlZWRlZCBtYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyBhdHRlbXB0cy4gTm8gZnVydGhlciBhdHRlbXB0cyB3aWxsIGJlIG1hZGVcIikpLHZvaWQgdGhpcy5kZXN0cm95KCkpOihvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYEZhaWxlZCB0byBjb25uZWN0LiBBdHRlbXB0aW5nIHRvIHJlY29ubmVjdCBpbiAke259c2AsYykpLGF3YWl0IHMociksdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KGUsTWF0aC5taW4oMS41KnIsMWUzKnRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25JbnRlcnZhbCksaSsxKSl9fV9zZXRXZWJTb2NrZXRKU09OUGFyc2VIYW5kbGVyKGUpe2Uub25tZXNzYWdlPWU9Pnt0cnl7Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7dGhpcy5fb25NZXNzYWdlKHQpfWNhdGNoKHMpe3JldHVybiB2b2lkIG8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIkZhaWxlZCB0byBwYXJzZSBtZXNzYWdlLCBpbnZhbGlkIEpTT05cIix7ZXJyb3I6c30pKX19fV9jcmVhdGVXZWJTb2NrZXQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxvKT0+e2NvbnN0IHM9bmV3IFdlYlNvY2tldChlKTtzLm9ub3Blbj0oKT0+e2lmKHMub25vcGVuPW51bGwsdGhpcy5kZXN0cm95ZWQpcmV0dXJuIHMub25jbG9zZT1udWxsLHZvaWQgcy5jbG9zZSgpO3Mub25jbG9zZT1lPT50aGlzLl9vbkNsb3NlKGUpLHMub25lcnJvcj1lPT50aGlzLl9vbkVycm9yKGUpLHRoaXMuX3NldFdlYlNvY2tldEpTT05QYXJzZUhhbmRsZXIocyksdChzKX0scy5vbmNsb3NlPWU9PntzLm9ub3Blbj1zLm9uY2xvc2U9bnVsbCxvKGUpfX0pKX1hc3luYyBfaGFuZHNoYWtlKGU9MWU0KXtjb25zdCBzPXRoaXMuX3dlYnNvY2tldDtpZihudWxsPT1zKXJldHVybjtjb25zdCBuPXIoKSxpPXMub25tZXNzYWdlLHtmaWx0ZXI6YyxvdXRGaWVsZHM6YSxzcGF0aWFsUmVmZXJlbmNlOmx9PXRoaXMuX2NvbmZpZztyZXR1cm4gbi50aW1lb3V0KGUpLHMub25tZXNzYWdlPWU9PntsZXQgcj1udWxsO3RyeXtyPUpTT04ucGFyc2UoZS5kYXRhKX1jYXRjaChoKXt9ciYmXCJvYmplY3RcIj09dHlwZW9mIHJ8fChvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJQcm90b2NvbCB2aW9sYXRpb24uIEhhbmRzaGFrZSBmYWlsZWQgLSBtYWxmb3JtZWQgbWVzc2FnZVwiLGUuZGF0YSkpLG4ucmVqZWN0KCksdGhpcy5kZXN0cm95KCkpLHIuc3BhdGlhbFJlZmVyZW5jZT8ud2tpZCE9PWw/LndraWQmJihvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYFByb3RvY29sIHZpb2xhdGlvbi4gSGFuZHNoYWtlIGZhaWxlZCAtIGV4cGVjdGVkIHdraWQgb2YgJHtsLndraWR9YCxlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxcImpzb25cIiE9PXIuZm9ybWF0JiYoby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLFwiUHJvdG9jb2wgdmlvbGF0aW9uLiBIYW5kc2hha2UgZmFpbGVkIC0gZm9ybWF0IGlzIG5vdCBzZXRcIixlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxjJiZyLmZpbHRlciE9PWMmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlRyaWVkIHRvIHNldCBmaWx0ZXIsIGJ1dCBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IGl0XCIpKSxhJiZyLm91dEZpZWxkcyE9PWEmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlRyaWVkIHRvIHNldCBvdXRGaWVsZHMsIGJ1dCBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IGl0XCIpKSxzLm9ubWVzc2FnZT1pO2Zvcihjb25zdCB0IG9mIHRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXMpcy5zZW5kKEpTT04uc3RyaW5naWZ5KHQpKTt0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzPVtdLG4ucmVzb2x2ZSgpfSxzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbHRlcjpjLG91dEZpZWxkczphLGZvcm1hdDpcImpzb25cIixzcGF0aWFsUmVmZXJlbmNlOnt3a2lkOmwud2tpZH19KSksbi5wcm9taXNlfV9vbk1lc3NhZ2UoZSl7aWYodGhpcy5vbk1lc3NhZ2UoZSksXCJ0eXBlXCJpbiBlKXN3aXRjaChlLnR5cGUpe2Nhc2VcImZlYXR1cmVzXCI6Y2FzZVwiZmVhdHVyZVJlc3VsdFwiOmZvcihjb25zdCB0IG9mIGUuZmVhdHVyZXMpbnVsbCE9dGhpcy5fZmVhdHVyZVpTY2FsZXImJnRoaXMuX2ZlYXR1cmVaU2NhbGVyKHQuZ2VvbWV0cnkpLHRoaXMub25GZWF0dXJlKHQpfX1fb25FcnJvcihlKXtjb25zdCB0PVwiRW5jb3VudGVyZWQgYW4gZXJyb3Igb3ZlciBXZWJTb2NrZXQgY29ubmVjdGlvblwiO3RoaXMuX3NldChcImVycm9yU3RyaW5nXCIsdCksby5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLHQpfV9vbkNsb3NlKGUpe3RoaXMuX3dlYnNvY2tldD1udWxsLHRoaXMubm90aWZ5Q2hhbmdlKFwiY29ubmVjdGlvblN0YXR1c1wiKSwxZTMhPT1lLmNvZGUmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixgV2ViU29ja2V0IGNsb3NlZCB1bmV4cGVjdGVkbHkgd2l0aCBlcnJvciBjb2RlICR7ZS5jb2RlfWApLHRoaXMuZGVzdHJveWVkfHx0aGlzLl9vcGVuKCl9fTtlKFtpKCldLGQucHJvdG90eXBlLFwiY29ubmVjdGlvblN0YXR1c1wiLG51bGwpLGUoW2koKV0sZC5wcm90b3R5cGUsXCJlcnJvclN0cmluZ1wiLHZvaWQgMCksZD1lKFtjKFwiZXNyaS5sYXllcnMuZ3JhcGhpY3Muc291cmNlcy5jb25uZWN0aW9ucy5XZWJTb2NrZXRDb25uZWN0aW9uXCIpXSxkKTtleHBvcnR7ZCBhcyBXZWJTb2NrZXRDb25uZWN0aW9ufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuL0dlb0V2ZW50Q29ubmVjdGlvbi5qc1wiO2ltcG9ydHtXZWJTb2NrZXRDb25uZWN0aW9uIGFzIHR9ZnJvbVwiLi9XZWJTb2NrZXRDb25uZWN0aW9uLmpzXCI7aW1wb3J0e0NsaWVudFNpZGVDb25uZWN0aW9uIGFzIG59ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9DbGllbnRTaWRlQ29ubmVjdGlvbi5qc1wiO2Z1bmN0aW9uIG8oZSx0KXtpZihudWxsPT1lJiZudWxsPT10KXJldHVybiBudWxsO2NvbnN0IG49e307cmV0dXJuIG51bGwhPXQmJihuLmdlb21ldHJ5PXQpLG51bGwhPWUmJihuLndoZXJlPWUpLG59ZnVuY3Rpb24gcihyLGkscyxjLGwsdSxhLG0scCl7Y29uc3QgZj17c291cmNlOnIsc291cmNlU3BhdGlhbFJlZmVyZW5jZTppLHNwYXRpYWxSZWZlcmVuY2U6cyxnZW9tZXRyeVR5cGU6YyxmaWx0ZXI6byhsLHUpLG1heFJlY29ubmVjdGlvbkF0dGVtcHRzOmEsbWF4UmVjb25uZWN0aW9uSW50ZXJ2YWw6bSxjdXN0b21QYXJhbWV0ZXJzOnB9O2lmKCFyKXJldHVybiBuZXcgbihmKTtyZXR1cm4gci5wYXRoLnN0YXJ0c1dpdGgoXCJ3c3M6Ly9cIil8fHIucGF0aC5zdGFydHNXaXRoKFwid3M6Ly9cIik/bmV3IHQoZik6bmV3IGUoZil9ZXhwb3J0e3IgYXMgY3JlYXRlQ29ubmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL1JhbmRvbUxDRy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Z2V0R2VvbWV0cnlaU2NhbGVyIGFzIG99ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC96c2NhbGUuanNcIjtpbXBvcnQgcyBmcm9tXCIuL1N0cmVhbUNvbm5lY3Rpb24uanNcIjtsZXQgYT1jbGFzcyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoe30pLHRoaXMuY29ubmVjdGlvblN0YXR1cz1cImNvbm5lY3RlZFwiLHRoaXMuZXJyb3JTdHJpbmc9bnVsbDtjb25zdHtnZW9tZXRyeVR5cGU6cixzcGF0aWFsUmVmZXJlbmNlOnQsc291cmNlU3BhdGlhbFJlZmVyZW5jZTpzfT1lO3RoaXMuX2ZlYXR1cmVaU2NhbGVyPW8ocixzLHQpfW5vcm1hbGl6ZUN0b3JBcmdzKCl7cmV0dXJue319dXBkYXRlQ3VzdG9tUGFyYW1ldGVycyhlKXt9c2VuZE1lc3NhZ2VUb1NvY2tldChlKXt9c2VuZE1lc3NhZ2VUb0NsaWVudChlKXtpZihcInR5cGVcImluIGUpc3dpdGNoKGUudHlwZSl7Y2FzZVwiZmVhdHVyZXNcIjpjYXNlXCJmZWF0dXJlUmVzdWx0XCI6Zm9yKGNvbnN0IHIgb2YgZS5mZWF0dXJlcyludWxsIT10aGlzLl9mZWF0dXJlWlNjYWxlciYmdGhpcy5fZmVhdHVyZVpTY2FsZXIoci5nZW9tZXRyeSksdGhpcy5vbkZlYXR1cmUocil9dGhpcy5vbk1lc3NhZ2UoZSl9fTtlKFtyKCldLGEucHJvdG90eXBlLFwiY29ubmVjdGlvblN0YXR1c1wiLHZvaWQgMCksZShbcigpXSxhLnByb3RvdHlwZSxcImVycm9yU3RyaW5nXCIsdm9pZCAwKSxhPWUoW3QoXCJlc3JpLmxheWVycy5zdXBwb3J0LkNsaWVudFNpZGVDb25uZWN0aW9uXCIpXSxhKTtleHBvcnR7YSBhcyBDbGllbnRTaWRlQ29ubmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uL2NvcmUvRXZlbnRlZC5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9SYW5kb21MQ0cuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgc31mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7bGV0IGM9Y2xhc3MgZXh0ZW5kcyBvLkV2ZW50ZWRBY2Nlc3NvcntkZXN0cm95KCl7dGhpcy5lbWl0KFwiZGVzdHJveVwiKX1nZXQgY29ubmVjdGlvbkVycm9yKCl7cmV0dXJuIHRoaXMuZXJyb3JTdHJpbmc/bmV3IGUoXCJzdHJlYW0tY29ubmVjdGlvblwiLHRoaXMuZXJyb3JTdHJpbmcpOm51bGx9b25GZWF0dXJlKHIpe3RoaXMuZW1pdChcImRhdGEtcmVjZWl2ZWRcIixyKX1vbk1lc3NhZ2Uocil7dGhpcy5lbWl0KFwibWVzc2FnZS1yZWNlaXZlZFwiLHIpfX07cihbdCh7cmVhZE9ubHk6ITB9KV0sYy5wcm90b3R5cGUsXCJjb25uZWN0aW9uRXJyb3JcIixudWxsKSxjPXIoW3MoXCJlc3JpLmxheWVycy5zdXBwb3J0LlN0cmVhbUNvbm5lY3Rpb25cIildLGMpO2V4cG9ydHtjIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9