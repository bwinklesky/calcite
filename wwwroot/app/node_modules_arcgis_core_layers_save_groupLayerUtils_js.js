export const __webpack_id__ = "node_modules_arcgis_core_layers_save_groupLayerUtils_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_layers_save_groupLayerUtils_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/save/groupLayerUtils.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/groupLayerUtils.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   save: () => (/* binding */ I),
/* harmony export */   saveAs: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/save/utils.js");
/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _webdoc_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../webdoc/support/resourceUtils.js */ "./node_modules/@arcgis/core/webdoc/support/resourceUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const u="Group Layer",c="group-layer-save",l="group-layer-save-as",p=_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.typeKeyword.GROUP_LAYER_MAP;function m(e){return{isValid:"group"===e.type,errorMessage:"Layer.type should be 'group'"}}function y(e){return{isValid:(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.hasTypeKeyword)(e,p),errorMessage:`Layer.portalItem.typeKeywords should have '${p}'`}}function f(e,r){return{...(0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_1__.createForItemWrite)(e,"web-map",!0),initiator:r}}function v(e){const r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function d(e,r){r.title||=e.title,(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.removeTypeKeyword)(r,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.typeKeyword.METADATA),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.addTypeKeyword)(r,p)}async function I(r,t){return (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.save)({layer:r,itemType:u,validateLayer:m,validateItem:y,createJSONContext:e=>f(e,r),createItemData:v,errorNamePrefix:c,saveResources:async(e,t)=>(r.sourceIsPortalItem||await e.removeAllResources().catch((()=>{})),(0,_webdoc_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.saveResources)(r.resourceReferences,t))},t)}async function g(e,t,o){return (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.saveAs)({layer:e,itemType:u,validateLayer:m,createJSONContext:r=>f(r,e),createItemData:v,errorNamePrefix:l,newItem:t,setItemProperties:d,saveResources:(r,t)=>(0,_webdoc_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.saveResources)(e.resourceReferences,t)},o)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/save/utils.js":
/*!********************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/utils.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addItem: () => (/* binding */ v),
/* harmony export */   createErrorMessage: () => (/* binding */ m),
/* harmony export */   ensureItemConfig: () => (/* binding */ f),
/* harmony export */   ensureLayerConfig: () => (/* binding */ p),
/* harmony export */   getLayerJSON: () => (/* binding */ w),
/* harmony export */   getPortalItem: () => (/* binding */ d),
/* harmony export */   save: () => (/* binding */ P),
/* harmony export */   saveAs: () => (/* binding */ $),
/* harmony export */   setCommonItemProperties: () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webdoc/support/saveUtils.js */ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(t,r,a){const o=a(t);if(!o.isValid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${r}:invalid-parameters`,o.errorMessage,{layer:t})}async function l(e){const{layer:t,errorNamePrefix:r,validateLayer:a}=e;await t.load(),p(t,r,a)}function m(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function c(t){const{item:r,errorNamePrefix:a,layer:o,validateItem:i}=t;if(u(t),i){const t=i(r);if(!t.isValid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:invalid-parameters`,t.errorMessage,{layer:o})}}function u(t){const{item:r,itemType:a,additionalItemType:o,errorNamePrefix:i,layer:n}=t,s=[a];if(o&&s.push(o),!s.includes(r.type)){const t=s.map((e=>`'${e}'`)).join(", ");throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${i}:portal-item-wrong-type`,`Portal item type should be one of: "${t}"`,{item:r,layer:n})}}function f(t){const{layer:r,errorNamePrefix:a}=t,{portalItem:o}=r;if(!o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:portal-item-not-set`,m(r,"requires the portalItem property to be set"));if(!o.loaded)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:portal-item-not-loaded`,m(r,"cannot be saved to a portal item that does not exist or is inaccessible"));c({...t,item:o})}function d(e){const{newItem:t,itemType:o}=e;let i=_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__["default"].from(t);return i.id&&(i=i.clone(),i.id=null),i.type??=o,i.portal??=_portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__["default"].getDefault(),c({...e,item:i}),i}function y(e){return (0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_4__.createForItemWrite)(e,"portal-item")}async function w(e,t,r){"beforeSave"in e&&"function"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return await Promise.all(t.resources?.pendingOperations??[]),(0,_webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateWriteErrors)(t,{errorName:"layer-write:unsupported"},r),a}function I(e){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__.addTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__.typeKeyword.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}async function v(e,t,r){const a=e.portal;await a.signIn(),await a.user.addItem({item:e,data:t,folder:r?.folder})}async function P(e,r){const{layer:a,createItemData:o,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await l(e),f(e);const m=a.portalItem,c=i?i(m):y(m),u=await w(a,c,{...r,supplementalUnsupportedErrors:p}),d=await o({layer:a,layerJSON:u},m);return await(n?.(a,m,d)),I(m),await m.update({data:d}),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__.updateOrigins)(c),await(s?.(m,c)),m}async function $(e,r){const{layer:a,createItemData:o,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await l(e);const m=d(e),c=i?i(m):y(m),u=await w(a,c,{...r,supplementalUnsupportedErrors:p}),f=await o({layer:a,layerJSON:u},m);return await n(a,m,f),I(m),await v(m,f,r),a.portalItem=m,(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__.updateOrigins)(c),await(s?.(m,c)),m}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19zYXZlX2dyb3VwTGF5ZXJVdGlsc19qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDa1UscUVBQXFFLDJFQUFDLGlCQUFpQixjQUFjLE9BQU8sc0VBQXNFLGNBQWMsT0FBTyxRQUFRLGtGQUFDLGlFQUFpRSxFQUFFLElBQUksZ0JBQWdCLE9BQU8sR0FBRyxrRkFBQyw4QkFBOEIsY0FBYyxvQkFBb0Isd0RBQXdELHNCQUFzQixrQkFBa0IscUZBQUMsR0FBRywyRUFBQyxXQUFXLGtGQUFDLE1BQU0sc0JBQXNCLE9BQU8sK0NBQUMsRUFBRSw0TUFBNE0sR0FBRywrRUFBQywwQkFBMEIsSUFBSSx3QkFBd0IsT0FBTyxpREFBQyxFQUFFLHFKQUFxSiwrRUFBQyx5QkFBeUIsSUFBa0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0o1eUM7QUFDQTtBQUNBO0FBQ0E7QUFDd2Esa0JBQWtCLGFBQWEsd0JBQXdCLHNEQUFDLElBQUksRUFBRSxxQ0FBcUMsUUFBUSxFQUFFLG9CQUFvQixNQUFNLDBDQUEwQyxHQUFHLHdCQUF3QixnQkFBZ0IsdUJBQXVCLFFBQVEsUUFBUSxLQUFLLGFBQWEsZ0JBQWdCLElBQUksRUFBRSxFQUFFLGNBQWMsTUFBTSxnREFBZ0QsR0FBRyxXQUFXLGFBQWEsd0JBQXdCLHNEQUFDLElBQUksRUFBRSxxQ0FBcUMsUUFBUSxHQUFHLGNBQWMsTUFBTSxpRUFBaUUsU0FBUyxxQ0FBcUMsc0JBQXNCLEVBQUUsZ0JBQWdCLFVBQVUsc0RBQUMsSUFBSSxFQUFFLGdFQUFnRSxFQUFFLElBQUksZUFBZSxHQUFHLGNBQWMsTUFBTSwwQkFBMEIsSUFBSSxhQUFhLEdBQUcsZ0JBQWdCLHNEQUFDLElBQUksRUFBRSx5RUFBeUUsdUJBQXVCLHNEQUFDLElBQUksRUFBRSx5R0FBeUcsR0FBRyxZQUFZLEVBQUUsY0FBYyxNQUFNLHFCQUFxQixHQUFHLE1BQU0sNkRBQUMsU0FBUywyREFBMkQseURBQUMsaUJBQWlCLFlBQVksSUFBSSxjQUFjLE9BQU8sa0ZBQUMsa0JBQWtCLHdCQUF3Qix3RUFBd0Usa0JBQWtCLElBQUksNkRBQTZELGlGQUFDLElBQUksb0NBQW9DLE1BQU0sY0FBYyxrRkFBQyxHQUFHLDJFQUFDLDRGQUE0Rix3QkFBd0IsaUJBQWlCLHVDQUF1QywrQkFBK0IsRUFBRSxzQkFBc0IsTUFBTSxpSEFBaUgsR0FBRyxnQkFBZ0Isa0RBQWtELHFDQUFxQyxhQUFhLG9CQUFvQixJQUFJLDhDQUE4QyxPQUFPLEVBQUUsbUZBQUMsc0JBQXNCLHNCQUFzQixNQUFNLGlIQUFpSCxHQUFHLFdBQVcsMENBQTBDLHFDQUFxQyxhQUFhLG9CQUFvQixJQUFJLHlEQUF5RCxtRkFBQyxzQkFBd00iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3NhdmUvZ3JvdXBMYXllclV0aWxzLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc2F2ZS91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3NhdmUgYXMgZSxzYXZlQXMgYXMgcn1mcm9tXCIuL3V0aWxzLmpzXCI7aW1wb3J0e2NyZWF0ZUZvckl0ZW1Xcml0ZSBhcyB0fWZyb21cIi4uLy4uL3BvcnRhbC9zdXBwb3J0L2pzb25Db250ZXh0LmpzXCI7aW1wb3J0e3R5cGVLZXl3b3JkIGFzIG8saGFzVHlwZUtleXdvcmQgYXMgYSxyZW1vdmVUeXBlS2V5d29yZCBhcyBzLGFkZFR5cGVLZXl3b3JkIGFzIG59ZnJvbVwiLi4vLi4vcG9ydGFsL3N1cHBvcnQvcG9ydGFsSXRlbVV0aWxzLmpzXCI7aW1wb3J0e3NhdmVSZXNvdXJjZXMgYXMgaX1mcm9tXCIuLi8uLi93ZWJkb2Mvc3VwcG9ydC9yZXNvdXJjZVV0aWxzLmpzXCI7Y29uc3QgdT1cIkdyb3VwIExheWVyXCIsYz1cImdyb3VwLWxheWVyLXNhdmVcIixsPVwiZ3JvdXAtbGF5ZXItc2F2ZS1hc1wiLHA9by5HUk9VUF9MQVlFUl9NQVA7ZnVuY3Rpb24gbShlKXtyZXR1cm57aXNWYWxpZDpcImdyb3VwXCI9PT1lLnR5cGUsZXJyb3JNZXNzYWdlOlwiTGF5ZXIudHlwZSBzaG91bGQgYmUgJ2dyb3VwJ1wifX1mdW5jdGlvbiB5KGUpe3JldHVybntpc1ZhbGlkOmEoZSxwKSxlcnJvck1lc3NhZ2U6YExheWVyLnBvcnRhbEl0ZW0udHlwZUtleXdvcmRzIHNob3VsZCBoYXZlICcke3B9J2B9fWZ1bmN0aW9uIGYoZSxyKXtyZXR1cm57Li4udChlLFwid2ViLW1hcFwiLCEwKSxpbml0aWF0b3I6cn19ZnVuY3Rpb24gdihlKXtjb25zdCByPWUubGF5ZXJKU09OO3JldHVybiBQcm9taXNlLnJlc29sdmUociYmT2JqZWN0LmtleXMocikubGVuZ3RoP3I6bnVsbCl9YXN5bmMgZnVuY3Rpb24gZChlLHIpe3IudGl0bGV8fD1lLnRpdGxlLHMocixvLk1FVEFEQVRBKSxuKHIscCl9YXN5bmMgZnVuY3Rpb24gSShyLHQpe3JldHVybiBlKHtsYXllcjpyLGl0ZW1UeXBlOnUsdmFsaWRhdGVMYXllcjptLHZhbGlkYXRlSXRlbTp5LGNyZWF0ZUpTT05Db250ZXh0OmU9PmYoZSxyKSxjcmVhdGVJdGVtRGF0YTp2LGVycm9yTmFtZVByZWZpeDpjLHNhdmVSZXNvdXJjZXM6YXN5bmMoZSx0KT0+KHIuc291cmNlSXNQb3J0YWxJdGVtfHxhd2FpdCBlLnJlbW92ZUFsbFJlc291cmNlcygpLmNhdGNoKCgoKT0+e30pKSxpKHIucmVzb3VyY2VSZWZlcmVuY2VzLHQpKX0sdCl9YXN5bmMgZnVuY3Rpb24gZyhlLHQsbyl7cmV0dXJuIHIoe2xheWVyOmUsaXRlbVR5cGU6dSx2YWxpZGF0ZUxheWVyOm0sY3JlYXRlSlNPTkNvbnRleHQ6cj0+ZihyLGUpLGNyZWF0ZUl0ZW1EYXRhOnYsZXJyb3JOYW1lUHJlZml4OmwsbmV3SXRlbTp0LHNldEl0ZW1Qcm9wZXJ0aWVzOmQsc2F2ZVJlc291cmNlczoocix0KT0+aShlLnJlc291cmNlUmVmZXJlbmNlcyx0KX0sbyl9ZXhwb3J0e0kgYXMgc2F2ZSxnIGFzIHNhdmVBc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHt1cGRhdGVPcmlnaW5zIGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvb3JpZ2luVXRpbHMuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9wb3J0YWwvUG9ydGFsLmpzXCI7aW1wb3J0IGEgZnJvbVwiLi4vLi4vcG9ydGFsL1BvcnRhbEl0ZW0uanNcIjtpbXBvcnR7Y3JlYXRlRm9ySXRlbVdyaXRlIGFzIG99ZnJvbVwiLi4vLi4vcG9ydGFsL3N1cHBvcnQvanNvbkNvbnRleHQuanNcIjtpbXBvcnR7YWRkVHlwZUtleXdvcmQgYXMgaSx0eXBlS2V5d29yZCBhcyBufWZyb21cIi4uLy4uL3BvcnRhbC9zdXBwb3J0L3BvcnRhbEl0ZW1VdGlscy5qc1wiO2ltcG9ydHtldmFsdWF0ZVdyaXRlRXJyb3JzIGFzIHN9ZnJvbVwiLi4vLi4vd2ViZG9jL3N1cHBvcnQvc2F2ZVV0aWxzLmpzXCI7ZnVuY3Rpb24gcCh0LHIsYSl7Y29uc3Qgbz1hKHQpO2lmKCFvLmlzVmFsaWQpdGhyb3cgbmV3IGUoYCR7cn06aW52YWxpZC1wYXJhbWV0ZXJzYCxvLmVycm9yTWVzc2FnZSx7bGF5ZXI6dH0pfWFzeW5jIGZ1bmN0aW9uIGwoZSl7Y29uc3R7bGF5ZXI6dCxlcnJvck5hbWVQcmVmaXg6cix2YWxpZGF0ZUxheWVyOmF9PWU7YXdhaXQgdC5sb2FkKCkscCh0LHIsYSl9ZnVuY3Rpb24gbShlLHQpe3JldHVybmBMYXllciAodGl0bGU6ICR7ZS50aXRsZX0sIGlkOiAke2UuaWR9KSBvZiB0eXBlICcke2UuZGVjbGFyZWRDbGFzc30nICR7dH1gfWZ1bmN0aW9uIGModCl7Y29uc3R7aXRlbTpyLGVycm9yTmFtZVByZWZpeDphLGxheWVyOm8sdmFsaWRhdGVJdGVtOml9PXQ7aWYodSh0KSxpKXtjb25zdCB0PWkocik7aWYoIXQuaXNWYWxpZCl0aHJvdyBuZXcgZShgJHthfTppbnZhbGlkLXBhcmFtZXRlcnNgLHQuZXJyb3JNZXNzYWdlLHtsYXllcjpvfSl9fWZ1bmN0aW9uIHUodCl7Y29uc3R7aXRlbTpyLGl0ZW1UeXBlOmEsYWRkaXRpb25hbEl0ZW1UeXBlOm8sZXJyb3JOYW1lUHJlZml4OmksbGF5ZXI6bn09dCxzPVthXTtpZihvJiZzLnB1c2gobyksIXMuaW5jbHVkZXMoci50eXBlKSl7Y29uc3QgdD1zLm1hcCgoZT0+YCcke2V9J2ApKS5qb2luKFwiLCBcIik7dGhyb3cgbmV3IGUoYCR7aX06cG9ydGFsLWl0ZW0td3JvbmctdHlwZWAsYFBvcnRhbCBpdGVtIHR5cGUgc2hvdWxkIGJlIG9uZSBvZjogXCIke3R9XCJgLHtpdGVtOnIsbGF5ZXI6bn0pfX1mdW5jdGlvbiBmKHQpe2NvbnN0e2xheWVyOnIsZXJyb3JOYW1lUHJlZml4OmF9PXQse3BvcnRhbEl0ZW06b309cjtpZighbyl0aHJvdyBuZXcgZShgJHthfTpwb3J0YWwtaXRlbS1ub3Qtc2V0YCxtKHIsXCJyZXF1aXJlcyB0aGUgcG9ydGFsSXRlbSBwcm9wZXJ0eSB0byBiZSBzZXRcIikpO2lmKCFvLmxvYWRlZCl0aHJvdyBuZXcgZShgJHthfTpwb3J0YWwtaXRlbS1ub3QtbG9hZGVkYCxtKHIsXCJjYW5ub3QgYmUgc2F2ZWQgdG8gYSBwb3J0YWwgaXRlbSB0aGF0IGRvZXMgbm90IGV4aXN0IG9yIGlzIGluYWNjZXNzaWJsZVwiKSk7Yyh7Li4udCxpdGVtOm99KX1mdW5jdGlvbiBkKGUpe2NvbnN0e25ld0l0ZW06dCxpdGVtVHlwZTpvfT1lO2xldCBpPWEuZnJvbSh0KTtyZXR1cm4gaS5pZCYmKGk9aS5jbG9uZSgpLGkuaWQ9bnVsbCksaS50eXBlPz89byxpLnBvcnRhbD8/PXIuZ2V0RGVmYXVsdCgpLGMoey4uLmUsaXRlbTppfSksaX1mdW5jdGlvbiB5KGUpe3JldHVybiBvKGUsXCJwb3J0YWwtaXRlbVwiKX1hc3luYyBmdW5jdGlvbiB3KGUsdCxyKXtcImJlZm9yZVNhdmVcImluIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuYmVmb3JlU2F2ZSYmYXdhaXQgZS5iZWZvcmVTYXZlKCk7Y29uc3QgYT1lLndyaXRlKHt9LHQpO3JldHVybiBhd2FpdCBQcm9taXNlLmFsbCh0LnJlc291cmNlcz8ucGVuZGluZ09wZXJhdGlvbnM/P1tdKSxzKHQse2Vycm9yTmFtZTpcImxheWVyLXdyaXRlOnVuc3VwcG9ydGVkXCJ9LHIpLGF9ZnVuY3Rpb24gSShlKXtpKGUsbi5KU0FQSSksZS50eXBlS2V5d29yZHMmJihlLnR5cGVLZXl3b3Jkcz1lLnR5cGVLZXl3b3Jkcy5maWx0ZXIoKChlLHQscik9PnIuaW5kZXhPZihlKT09PXQpKSl9YXN5bmMgZnVuY3Rpb24gdihlLHQscil7Y29uc3QgYT1lLnBvcnRhbDthd2FpdCBhLnNpZ25JbigpLGF3YWl0IGEudXNlci5hZGRJdGVtKHtpdGVtOmUsZGF0YTp0LGZvbGRlcjpyPy5mb2xkZXJ9KX1hc3luYyBmdW5jdGlvbiBQKGUscil7Y29uc3R7bGF5ZXI6YSxjcmVhdGVJdGVtRGF0YTpvLGNyZWF0ZUpTT05Db250ZXh0Omksc2V0SXRlbVByb3BlcnRpZXM6bixzYXZlUmVzb3VyY2VzOnMsc3VwcGxlbWVudGFsVW5zdXBwb3J0ZWRFcnJvcnM6cH09ZTthd2FpdCBsKGUpLGYoZSk7Y29uc3QgbT1hLnBvcnRhbEl0ZW0sYz1pP2kobSk6eShtKSx1PWF3YWl0IHcoYSxjLHsuLi5yLHN1cHBsZW1lbnRhbFVuc3VwcG9ydGVkRXJyb3JzOnB9KSxkPWF3YWl0IG8oe2xheWVyOmEsbGF5ZXJKU09OOnV9LG0pO3JldHVybiBhd2FpdChuPy4oYSxtLGQpKSxJKG0pLGF3YWl0IG0udXBkYXRlKHtkYXRhOmR9KSx0KGMpLGF3YWl0KHM/LihtLGMpKSxtfWFzeW5jIGZ1bmN0aW9uICQoZSxyKXtjb25zdHtsYXllcjphLGNyZWF0ZUl0ZW1EYXRhOm8sY3JlYXRlSlNPTkNvbnRleHQ6aSxzZXRJdGVtUHJvcGVydGllczpuLHNhdmVSZXNvdXJjZXM6cyxzdXBwbGVtZW50YWxVbnN1cHBvcnRlZEVycm9yczpwfT1lO2F3YWl0IGwoZSk7Y29uc3QgbT1kKGUpLGM9aT9pKG0pOnkobSksdT1hd2FpdCB3KGEsYyx7Li4ucixzdXBwbGVtZW50YWxVbnN1cHBvcnRlZEVycm9yczpwfSksZj1hd2FpdCBvKHtsYXllcjphLGxheWVySlNPTjp1fSxtKTtyZXR1cm4gYXdhaXQgbihhLG0sZiksSShtKSxhd2FpdCB2KG0sZixyKSxhLnBvcnRhbEl0ZW09bSx0KGMpLGF3YWl0KHM/LihtLGMpKSxtfWV4cG9ydHt2IGFzIGFkZEl0ZW0sbSBhcyBjcmVhdGVFcnJvck1lc3NhZ2UsZiBhcyBlbnN1cmVJdGVtQ29uZmlnLHAgYXMgZW5zdXJlTGF5ZXJDb25maWcsdyBhcyBnZXRMYXllckpTT04sZCBhcyBnZXRQb3J0YWxJdGVtLFAgYXMgc2F2ZSwkIGFzIHNhdmVBcyxJIGFzIHNldENvbW1vbkl0ZW1Qcm9wZXJ0aWVzfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==