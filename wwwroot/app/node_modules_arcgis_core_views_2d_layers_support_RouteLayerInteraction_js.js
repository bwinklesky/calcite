export const __webpack_id__ = "node_modules_arcgis_core_views_2d_layers_support_RouteLayerInteraction_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_views_2d_layers_support_RouteLayerInteraction_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/RouteLayerInteraction.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/RouteLayerInteraction.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RouteLayerInteraction: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _layers_GraphicsLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../layers/GraphicsLayer.js */ "./node_modules/@arcgis/core/layers/GraphicsLayer.js");
/* harmony import */ var _rest_support_PointBarrier_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../rest/support/PointBarrier.js */ "./node_modules/@arcgis/core/rest/support/PointBarrier.js");
/* harmony import */ var _rest_support_PolygonBarrier_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../rest/support/PolygonBarrier.js */ "./node_modules/@arcgis/core/rest/support/PolygonBarrier.js");
/* harmony import */ var _rest_support_PolylineBarrier_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../rest/support/PolylineBarrier.js */ "./node_modules/@arcgis/core/rest/support/PolylineBarrier.js");
/* harmony import */ var _rest_support_Stop_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../rest/support/Stop.js */ "./node_modules/@arcgis/core/rest/support/Stop.js");
/* harmony import */ var _widgets_Sketch_SketchViewModel_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../widgets/Sketch/SketchViewModel.js */ "./node_modules/@arcgis/core/widgets/Sketch/SketchViewModel.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function g(e,r){e.networkFeature=r}function u(e){const r=w(e.graphic);return{...e,networkFeature:r}}function b(e){const r=e.graphics.map((e=>w(e)));return{...e,networkFeatures:r}}function w(e){return e.networkFeature}function k(e){return"point"===e?.type||"polyline"===e?.type||"polygon"===e?.type}let _=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._createMode=null,this._graphicsLayer=new _layers_GraphicsLayer_js__WEBPACK_IMPORTED_MODULE_11__["default"]({internal:!0,listMode:"hide",title:"Banana"}),this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_10__.UpdatingHandles,this.enabled=!0,this._handleSketchViewModelEvents=async e=>{switch(e.type){case"update":switch(e.state){case"active":case"complete":for(const r of e.graphics){w(r).geometry=k(r.geometry)?r.geometry.clone():null}}break;case"undo":case"redo":break;case"delete":for(const r of e.graphics){const e=w(r);this._removeNetworkFeature(e)}break;case"create":if(e.graphic&&"complete"===e.state&&this._createMode){const r=e.graphic.geometry?.clone(),t=e.graphic.symbol?.clone();if(!r)break;switch(this._createMode){case"stop":{if("point"!==r.type)break;const{stops:t}=this.layer;if(t.length>0&&t.every((({geometry:e})=>!e))){t.at(0).geometry=r;break}if(t.length>1&&t.filter(((e,r)=>0!==r)).every((({geometry:e})=>!e))){t.at(1).geometry=r;break}const o=new _rest_support_Stop_js__WEBPACK_IMPORTED_MODULE_15__["default"]({geometry:r});t.add(o),g(e.graphic,o);break}case"point-barrier":{if("point"!==r.type)break;const o=new _rest_support_PointBarrier_js__WEBPACK_IMPORTED_MODULE_12__["default"]({geometry:r,symbol:t});this.layer.pointBarriers.add(o),g(e.graphic,o);break}case"polyline-barrier":{if("polyline"!==r.type)break;const o=new _rest_support_PolylineBarrier_js__WEBPACK_IMPORTED_MODULE_14__["default"]({geometry:r,symbol:t});this.layer.polylineBarriers.add(o),g(e.graphic,o);break}case"polygon-barrier":{if("polygon"!==r.type)break;const o=new _rest_support_PolygonBarrier_js__WEBPACK_IMPORTED_MODULE_13__["default"]({geometry:r,symbol:t});this.layer.polygonBarriers.add(o),g(e.graphic,o);break}}}}(await this.view.whenLayerView(this.layer)).emit(e.type,"create"===e.type?u(e):b(e))}}initialize(){this._sketchViewModel=new _widgets_Sketch_SketchViewModel_js__WEBPACK_IMPORTED_MODULE_16__["default"]({layer:this._graphicsLayer,view:this.view}),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>this.enabled),(e=>{e?this._activate():this._deactivate()}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>{const{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}=this.layer;return{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}}),(()=>{this.enabled&&this._loadClonedGraphics()})),this._sketchViewModel.on(["create","delete","redo","undo","update"],this._handleSketchViewModelEvents),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__.destroyHandle)(this._updatingHandles)])}destroy(){this.view.map.remove(this._graphicsLayer),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._graphicsLayer),this._sketchViewModel=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._sketchViewModel)}get selectedNetworkFeatures(){return this._sketchViewModel.updateGraphics.map((e=>w(e)))}get updating(){return this._updatingHandles.updating}create(e){switch(this._createMode=e,e){case"stop":this.layer.defaultSymbols.stops?.unlocated&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.stops.unlocated.clone());break;case"point-barrier":this.layer.defaultSymbols.pointBarriers&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.pointBarriers.clone());break;case"polyline-barrier":this.layer.defaultSymbols.polylineBarriers&&(this._sketchViewModel.polylineSymbol=this.layer.defaultSymbols.polylineBarriers.clone());break;case"polygon-barrier":this.layer.defaultSymbols.polygonBarriers&&(this._sketchViewModel.polygonSymbol=this.layer.defaultSymbols.polygonBarriers.clone())}switch(e){case"stop":case"point-barrier":return this._sketchViewModel.create("point");case"polyline-barrier":return this._sketchViewModel.create("polyline");case"polygon-barrier":return this._sketchViewModel.create("polygon")}}remove(e){const r=this._graphicsLayer.graphics.find((r=>w(r)===e));r&&this._graphicsLayer.remove(r),this._removeNetworkFeature(e)}_activate(){this._loadClonedGraphics(),this.view.map.add(this._graphicsLayer)}_deactivate(){this._sketchViewModel.cancel(),this.view.map?.remove(this._graphicsLayer),this._graphicsLayer.removeAll()}_loadClonedGraphics(){const e=[this.layer.stops,this.layer.pointBarriers,this.layer.polylineBarriers,this.layer.polygonBarriers].flatMap((e=>e.toArray().map((e=>{const r=e.toGraphic();return r.networkFeature=e,r}))));this._graphicsLayer.removeAll().addMany(e)}_removeNetworkFeature(e){switch(e.type){case"stop":this.layer.stops.remove(e);break;case"point-barrier":this.layer.pointBarriers.remove(e);break;case"polyline-barrier":this.layer.polylineBarriers.remove(e);break;case"polygon-barrier":this.layer.polygonBarriers.remove(e)}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"enabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],_.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({readOnly:!0})],_.prototype,"selectedNetworkFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],_.prototype,"view",void 0),_=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.support.RouteLayerInteraction")],_);


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19zdXBwb3J0X1JvdXRlTGF5ZXJJbnRlcmFjdGlvbl9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDMDhCLGdCQUFnQixtQkFBbUIsY0FBYyxxQkFBcUIsT0FBTyx1QkFBdUIsY0FBYyxrQ0FBa0MsT0FBTyx3QkFBd0IsY0FBYyx3QkFBd0IsY0FBYyxtRUFBbUUsb0JBQW9CLHlEQUFDLENBQUMsZUFBZSx1REFBdUQsaUVBQUMsRUFBRSwyQ0FBMkMsNEJBQTRCLDhFQUFDLDZEQUE2RCxlQUFlLDZCQUE2Qix1REFBdUQscURBQXFELE1BQU0sNEJBQTRCLHdDQUF3QyxhQUFhLDhCQUE4QixNQUFNLG1FQUFtRSxnRUFBZ0UsWUFBWSx5QkFBeUIsWUFBWSwwQkFBMEIsTUFBTSxRQUFRLFlBQVksMEJBQTBCLFdBQVcsU0FBUyxtQkFBbUIsTUFBTSxpREFBaUQsV0FBVyxTQUFTLG1CQUFtQixNQUFNLFlBQVksOERBQUMsRUFBRSxXQUFXLEVBQUUsd0JBQXdCLE1BQU0scUJBQXFCLDBCQUEwQixZQUFZLHNFQUFDLEVBQUUsb0JBQW9CLEVBQUUsK0NBQStDLE1BQU0sd0JBQXdCLDZCQUE2QixZQUFZLHlFQUFDLEVBQUUsb0JBQW9CLEVBQUUsa0RBQWtELE1BQU0sdUJBQXVCLDRCQUE0QixZQUFZLHdFQUFDLEVBQUUsb0JBQW9CLEVBQUUsaURBQWlELFNBQVMsc0ZBQXNGLGFBQWEsMEJBQTBCLDJFQUFDLEVBQUUseUNBQXlDLG1CQUFtQiw2REFBQyx5QkFBeUIsc0NBQXNDLEVBQUUsMkRBQUMsRUFBRSw2REFBQyxPQUFPLE1BQU0sNkRBQTZELFlBQVksT0FBTyw4REFBOEQsUUFBUSx5Q0FBeUMsMEdBQTBHLG1FQUFDLDBCQUEwQixVQUFVLDhGQUE4Riw0REFBQyw0Q0FBNEMsNERBQUMsd0JBQXdCLDhCQUE4QiwyREFBMkQsZUFBZSxzQ0FBc0MsVUFBVSw2QkFBNkIsNklBQTZJLE1BQU0saUpBQWlKLE1BQU0sNkpBQTZKLE1BQU0seUpBQXlKLFVBQVUsNEVBQTRFLHVFQUF1RSxzRUFBc0UsVUFBVSx5REFBeUQsK0RBQStELFlBQVksa0VBQWtFLGNBQWMsMEdBQTBHLHNCQUFzQiw0SUFBNEksc0JBQXNCLDRCQUE0QixLQUFLLDJDQUEyQyx5QkFBeUIsZUFBZSxzQ0FBc0MsTUFBTSx1REFBdUQsTUFBTSw2REFBNkQsTUFBTSw4REFBOEQsdURBQUMsRUFBRSxzRkFBQyxrQ0FBa0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLGlCQUFpQiwrQkFBK0IsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksK0NBQStDLHVEQUFDLEVBQUUsc0ZBQUMsaUNBQWlDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxpQkFBaUIsZ0NBQWdDLHVEQUFDLEVBQUUsc0ZBQUMsMkRBQThGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9zdXBwb3J0L1JvdXRlTGF5ZXJJbnRlcmFjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydHtkZXN0cm95SGFuZGxlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYW5kbGVVdGlscy5qc1wiO2ltcG9ydHtkZXN0cm95TWF5YmUgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e3dhdGNoIGFzIHMsaW5pdGlhbCBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBhfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9SYW5kb21MQ0cuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgbH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e1VwZGF0aW5nSGFuZGxlcyBhcyBwfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc3VwcG9ydC9VcGRhdGluZ0hhbmRsZXMuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi8uLi8uLi8uLi9sYXllcnMvR3JhcGhpY3NMYXllci5qc1wiO2ltcG9ydCBjIGZyb21cIi4uLy4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9Qb2ludEJhcnJpZXIuanNcIjtpbXBvcnQgaCBmcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvUG9seWdvbkJhcnJpZXIuanNcIjtpbXBvcnQgeSBmcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvUG9seWxpbmVCYXJyaWVyLmpzXCI7aW1wb3J0IGQgZnJvbVwiLi4vLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1N0b3AuanNcIjtpbXBvcnQgbSBmcm9tXCIuLi8uLi8uLi8uLi93aWRnZXRzL1NrZXRjaC9Ta2V0Y2hWaWV3TW9kZWwuanNcIjtmdW5jdGlvbiBnKGUscil7ZS5uZXR3b3JrRmVhdHVyZT1yfWZ1bmN0aW9uIHUoZSl7Y29uc3Qgcj13KGUuZ3JhcGhpYyk7cmV0dXJuey4uLmUsbmV0d29ya0ZlYXR1cmU6cn19ZnVuY3Rpb24gYihlKXtjb25zdCByPWUuZ3JhcGhpY3MubWFwKChlPT53KGUpKSk7cmV0dXJuey4uLmUsbmV0d29ya0ZlYXR1cmVzOnJ9fWZ1bmN0aW9uIHcoZSl7cmV0dXJuIGUubmV0d29ya0ZlYXR1cmV9ZnVuY3Rpb24gayhlKXtyZXR1cm5cInBvaW50XCI9PT1lPy50eXBlfHxcInBvbHlsaW5lXCI9PT1lPy50eXBlfHxcInBvbHlnb25cIj09PWU/LnR5cGV9bGV0IF89Y2xhc3MgZXh0ZW5kcyBye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2NyZWF0ZU1vZGU9bnVsbCx0aGlzLl9ncmFwaGljc0xheWVyPW5ldyBuKHtpbnRlcm5hbDohMCxsaXN0TW9kZTpcImhpZGVcIix0aXRsZTpcIkJhbmFuYVwifSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzPW5ldyBwLHRoaXMuZW5hYmxlZD0hMCx0aGlzLl9oYW5kbGVTa2V0Y2hWaWV3TW9kZWxFdmVudHM9YXN5bmMgZT0+e3N3aXRjaChlLnR5cGUpe2Nhc2VcInVwZGF0ZVwiOnN3aXRjaChlLnN0YXRlKXtjYXNlXCJhY3RpdmVcIjpjYXNlXCJjb21wbGV0ZVwiOmZvcihjb25zdCByIG9mIGUuZ3JhcGhpY3Mpe3cocikuZ2VvbWV0cnk9ayhyLmdlb21ldHJ5KT9yLmdlb21ldHJ5LmNsb25lKCk6bnVsbH19YnJlYWs7Y2FzZVwidW5kb1wiOmNhc2VcInJlZG9cIjpicmVhaztjYXNlXCJkZWxldGVcIjpmb3IoY29uc3QgciBvZiBlLmdyYXBoaWNzKXtjb25zdCBlPXcocik7dGhpcy5fcmVtb3ZlTmV0d29ya0ZlYXR1cmUoZSl9YnJlYWs7Y2FzZVwiY3JlYXRlXCI6aWYoZS5ncmFwaGljJiZcImNvbXBsZXRlXCI9PT1lLnN0YXRlJiZ0aGlzLl9jcmVhdGVNb2RlKXtjb25zdCByPWUuZ3JhcGhpYy5nZW9tZXRyeT8uY2xvbmUoKSx0PWUuZ3JhcGhpYy5zeW1ib2w/LmNsb25lKCk7aWYoIXIpYnJlYWs7c3dpdGNoKHRoaXMuX2NyZWF0ZU1vZGUpe2Nhc2VcInN0b3BcIjp7aWYoXCJwb2ludFwiIT09ci50eXBlKWJyZWFrO2NvbnN0e3N0b3BzOnR9PXRoaXMubGF5ZXI7aWYodC5sZW5ndGg+MCYmdC5ldmVyeSgoKHtnZW9tZXRyeTplfSk9PiFlKSkpe3QuYXQoMCkuZ2VvbWV0cnk9cjticmVha31pZih0Lmxlbmd0aD4xJiZ0LmZpbHRlcigoKGUscik9PjAhPT1yKSkuZXZlcnkoKCh7Z2VvbWV0cnk6ZX0pPT4hZSkpKXt0LmF0KDEpLmdlb21ldHJ5PXI7YnJlYWt9Y29uc3Qgbz1uZXcgZCh7Z2VvbWV0cnk6cn0pO3QuYWRkKG8pLGcoZS5ncmFwaGljLG8pO2JyZWFrfWNhc2VcInBvaW50LWJhcnJpZXJcIjp7aWYoXCJwb2ludFwiIT09ci50eXBlKWJyZWFrO2NvbnN0IG89bmV3IGMoe2dlb21ldHJ5OnIsc3ltYm9sOnR9KTt0aGlzLmxheWVyLnBvaW50QmFycmllcnMuYWRkKG8pLGcoZS5ncmFwaGljLG8pO2JyZWFrfWNhc2VcInBvbHlsaW5lLWJhcnJpZXJcIjp7aWYoXCJwb2x5bGluZVwiIT09ci50eXBlKWJyZWFrO2NvbnN0IG89bmV3IHkoe2dlb21ldHJ5OnIsc3ltYm9sOnR9KTt0aGlzLmxheWVyLnBvbHlsaW5lQmFycmllcnMuYWRkKG8pLGcoZS5ncmFwaGljLG8pO2JyZWFrfWNhc2VcInBvbHlnb24tYmFycmllclwiOntpZihcInBvbHlnb25cIiE9PXIudHlwZSlicmVhaztjb25zdCBvPW5ldyBoKHtnZW9tZXRyeTpyLHN5bWJvbDp0fSk7dGhpcy5sYXllci5wb2x5Z29uQmFycmllcnMuYWRkKG8pLGcoZS5ncmFwaGljLG8pO2JyZWFrfX19fShhd2FpdCB0aGlzLnZpZXcud2hlbkxheWVyVmlldyh0aGlzLmxheWVyKSkuZW1pdChlLnR5cGUsXCJjcmVhdGVcIj09PWUudHlwZT91KGUpOmIoZSkpfX1pbml0aWFsaXplKCl7dGhpcy5fc2tldGNoVmlld01vZGVsPW5ldyBtKHtsYXllcjp0aGlzLl9ncmFwaGljc0xheWVyLHZpZXc6dGhpcy52aWV3fSksdGhpcy5hZGRIYW5kbGVzKFtzKCgoKT0+dGhpcy5lbmFibGVkKSwoZT0+e2U/dGhpcy5fYWN0aXZhdGUoKTp0aGlzLl9kZWFjdGl2YXRlKCl9KSxpKSxzKCgoKT0+e2NvbnN0e3N0b3BzOmUscG9pbnRCYXJyaWVyczpyLHBvbHlsaW5lQmFycmllcnM6dCxwb2x5Z29uQmFycmllcnM6b309dGhpcy5sYXllcjtyZXR1cm57c3RvcHM6ZSxwb2ludEJhcnJpZXJzOnIscG9seWxpbmVCYXJyaWVyczp0LHBvbHlnb25CYXJyaWVyczpvfX0pLCgoKT0+e3RoaXMuZW5hYmxlZCYmdGhpcy5fbG9hZENsb25lZEdyYXBoaWNzKCl9KSksdGhpcy5fc2tldGNoVmlld01vZGVsLm9uKFtcImNyZWF0ZVwiLFwiZGVsZXRlXCIsXCJyZWRvXCIsXCJ1bmRvXCIsXCJ1cGRhdGVcIl0sdGhpcy5faGFuZGxlU2tldGNoVmlld01vZGVsRXZlbnRzKSx0KHRoaXMuX3VwZGF0aW5nSGFuZGxlcyldKX1kZXN0cm95KCl7dGhpcy52aWV3Lm1hcC5yZW1vdmUodGhpcy5fZ3JhcGhpY3NMYXllciksdGhpcy5fZ3JhcGhpY3NMYXllci5yZW1vdmVBbGwoKSx0aGlzLl9ncmFwaGljc0xheWVyPW8odGhpcy5fZ3JhcGhpY3NMYXllciksdGhpcy5fc2tldGNoVmlld01vZGVsPW8odGhpcy5fc2tldGNoVmlld01vZGVsKX1nZXQgc2VsZWN0ZWROZXR3b3JrRmVhdHVyZXMoKXtyZXR1cm4gdGhpcy5fc2tldGNoVmlld01vZGVsLnVwZGF0ZUdyYXBoaWNzLm1hcCgoZT0+dyhlKSkpfWdldCB1cGRhdGluZygpe3JldHVybiB0aGlzLl91cGRhdGluZ0hhbmRsZXMudXBkYXRpbmd9Y3JlYXRlKGUpe3N3aXRjaCh0aGlzLl9jcmVhdGVNb2RlPWUsZSl7Y2FzZVwic3RvcFwiOnRoaXMubGF5ZXIuZGVmYXVsdFN5bWJvbHMuc3RvcHM/LnVubG9jYXRlZCYmKHRoaXMuX3NrZXRjaFZpZXdNb2RlbC5wb2ludFN5bWJvbD10aGlzLmxheWVyLmRlZmF1bHRTeW1ib2xzLnN0b3BzLnVubG9jYXRlZC5jbG9uZSgpKTticmVhaztjYXNlXCJwb2ludC1iYXJyaWVyXCI6dGhpcy5sYXllci5kZWZhdWx0U3ltYm9scy5wb2ludEJhcnJpZXJzJiYodGhpcy5fc2tldGNoVmlld01vZGVsLnBvaW50U3ltYm9sPXRoaXMubGF5ZXIuZGVmYXVsdFN5bWJvbHMucG9pbnRCYXJyaWVycy5jbG9uZSgpKTticmVhaztjYXNlXCJwb2x5bGluZS1iYXJyaWVyXCI6dGhpcy5sYXllci5kZWZhdWx0U3ltYm9scy5wb2x5bGluZUJhcnJpZXJzJiYodGhpcy5fc2tldGNoVmlld01vZGVsLnBvbHlsaW5lU3ltYm9sPXRoaXMubGF5ZXIuZGVmYXVsdFN5bWJvbHMucG9seWxpbmVCYXJyaWVycy5jbG9uZSgpKTticmVhaztjYXNlXCJwb2x5Z29uLWJhcnJpZXJcIjp0aGlzLmxheWVyLmRlZmF1bHRTeW1ib2xzLnBvbHlnb25CYXJyaWVycyYmKHRoaXMuX3NrZXRjaFZpZXdNb2RlbC5wb2x5Z29uU3ltYm9sPXRoaXMubGF5ZXIuZGVmYXVsdFN5bWJvbHMucG9seWdvbkJhcnJpZXJzLmNsb25lKCkpfXN3aXRjaChlKXtjYXNlXCJzdG9wXCI6Y2FzZVwicG9pbnQtYmFycmllclwiOnJldHVybiB0aGlzLl9za2V0Y2hWaWV3TW9kZWwuY3JlYXRlKFwicG9pbnRcIik7Y2FzZVwicG9seWxpbmUtYmFycmllclwiOnJldHVybiB0aGlzLl9za2V0Y2hWaWV3TW9kZWwuY3JlYXRlKFwicG9seWxpbmVcIik7Y2FzZVwicG9seWdvbi1iYXJyaWVyXCI6cmV0dXJuIHRoaXMuX3NrZXRjaFZpZXdNb2RlbC5jcmVhdGUoXCJwb2x5Z29uXCIpfX1yZW1vdmUoZSl7Y29uc3Qgcj10aGlzLl9ncmFwaGljc0xheWVyLmdyYXBoaWNzLmZpbmQoKHI9Pncocik9PT1lKSk7ciYmdGhpcy5fZ3JhcGhpY3NMYXllci5yZW1vdmUociksdGhpcy5fcmVtb3ZlTmV0d29ya0ZlYXR1cmUoZSl9X2FjdGl2YXRlKCl7dGhpcy5fbG9hZENsb25lZEdyYXBoaWNzKCksdGhpcy52aWV3Lm1hcC5hZGQodGhpcy5fZ3JhcGhpY3NMYXllcil9X2RlYWN0aXZhdGUoKXt0aGlzLl9za2V0Y2hWaWV3TW9kZWwuY2FuY2VsKCksdGhpcy52aWV3Lm1hcD8ucmVtb3ZlKHRoaXMuX2dyYXBoaWNzTGF5ZXIpLHRoaXMuX2dyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKCl9X2xvYWRDbG9uZWRHcmFwaGljcygpe2NvbnN0IGU9W3RoaXMubGF5ZXIuc3RvcHMsdGhpcy5sYXllci5wb2ludEJhcnJpZXJzLHRoaXMubGF5ZXIucG9seWxpbmVCYXJyaWVycyx0aGlzLmxheWVyLnBvbHlnb25CYXJyaWVyc10uZmxhdE1hcCgoZT0+ZS50b0FycmF5KCkubWFwKChlPT57Y29uc3Qgcj1lLnRvR3JhcGhpYygpO3JldHVybiByLm5ldHdvcmtGZWF0dXJlPWUscn0pKSkpO3RoaXMuX2dyYXBoaWNzTGF5ZXIucmVtb3ZlQWxsKCkuYWRkTWFueShlKX1fcmVtb3ZlTmV0d29ya0ZlYXR1cmUoZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwic3RvcFwiOnRoaXMubGF5ZXIuc3RvcHMucmVtb3ZlKGUpO2JyZWFrO2Nhc2VcInBvaW50LWJhcnJpZXJcIjp0aGlzLmxheWVyLnBvaW50QmFycmllcnMucmVtb3ZlKGUpO2JyZWFrO2Nhc2VcInBvbHlsaW5lLWJhcnJpZXJcIjp0aGlzLmxheWVyLnBvbHlsaW5lQmFycmllcnMucmVtb3ZlKGUpO2JyZWFrO2Nhc2VcInBvbHlnb24tYmFycmllclwiOnRoaXMubGF5ZXIucG9seWdvbkJhcnJpZXJzLnJlbW92ZShlKX19fTtlKFthKCldLF8ucHJvdG90eXBlLFwiZW5hYmxlZFwiLHZvaWQgMCksZShbYSh7Y29uc3RydWN0T25seTohMH0pXSxfLnByb3RvdHlwZSxcImxheWVyXCIsdm9pZCAwKSxlKFthKHtyZWFkT25seTohMH0pXSxfLnByb3RvdHlwZSxcInNlbGVjdGVkTmV0d29ya0ZlYXR1cmVzXCIsbnVsbCksZShbYSgpXSxfLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbYSh7Y29uc3RydWN0T25seTohMH0pXSxfLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLF89ZShbbChcImVzcmkudmlld3MuMmQubGF5ZXJzLnN1cHBvcnQuUm91dGVMYXllckludGVyYWN0aW9uXCIpXSxfKTtleHBvcnR7XyBhcyBSb3V0ZUxheWVySW50ZXJhY3Rpb259O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9