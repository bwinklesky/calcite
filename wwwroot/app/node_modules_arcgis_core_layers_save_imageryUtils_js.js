export const __webpack_id__ = "node_modules_arcgis_core_layers_save_imageryUtils_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_layers_save_imageryUtils_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/save/imageryUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/imageryUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   save: () => (/* binding */ I),
/* harmony export */   saveAs: () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/save/utils.js");
/* harmony import */ var _support_rasterDatasets_datasetUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/rasterDatasets/datasetUtils.js */ "./node_modules/@arcgis/core/layers/support/rasterDatasets/datasetUtils.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const l="Image Service",o="imagery-layer-save",m="imagery-layer-save-as",n="imagery-tile-layer-save",c="imagery-tile-layer-save-as",p="WCS",u="wcs-layer-save",g="wcs-layer-save-as";function v(e){if("imagery"===e.type||"wcs"===e.type)return{isValid:!0};const{raster:t}=e,a=(0,_support_rasterDatasets_datasetUtils_js__WEBPACK_IMPORTED_MODULE_1__.getPrimaryRasters)(t)[0];return{isValid:"RasterTileServer"===a?.datasetFormat&&("Raster"===a.tileType||"Map"===a.tileType),errorMessage:"imagery tile layer should be created from a tiled image service."}}function f(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function d(e,t){const{parsedUrl:r,title:l,fullExtent:o}=e;t.url=r.path,t.title||=l;try{t.extent=await (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.getWGS84ExtentForItem)(o)}catch{t.extent=void 0}(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.removeTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.typeKeyword.METADATA),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.toggleTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_2__.typeKeyword.TILED_IMAGERY,"imagery-tile"===e.type)}async function I(t,r){const a="imagery"===t.type?o:"imagery-tile"===t.type?n:u,s="wcs"===t.type?p:l;return (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.save)({layer:t,itemType:s,validateLayer:v,createItemData:f,errorNamePrefix:a},r)}async function T(e,r,a){const s="imagery"===e.type?m:"imagery-tile"===e.type?c:g,i="wcs"===e.type?p:l;return (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.saveAs)({layer:e,itemType:i,validateLayer:v,createItemData:f,errorNamePrefix:s,newItem:r,setItemProperties:d},a)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/save/utils.js":
/*!********************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/utils.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addItem: () => (/* binding */ v),
/* harmony export */   createErrorMessage: () => (/* binding */ m),
/* harmony export */   ensureItemConfig: () => (/* binding */ f),
/* harmony export */   ensureLayerConfig: () => (/* binding */ p),
/* harmony export */   getLayerJSON: () => (/* binding */ w),
/* harmony export */   getPortalItem: () => (/* binding */ d),
/* harmony export */   save: () => (/* binding */ P),
/* harmony export */   saveAs: () => (/* binding */ $),
/* harmony export */   setCommonItemProperties: () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webdoc/support/saveUtils.js */ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(t,r,a){const o=a(t);if(!o.isValid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${r}:invalid-parameters`,o.errorMessage,{layer:t})}async function l(e){const{layer:t,errorNamePrefix:r,validateLayer:a}=e;await t.load(),p(t,r,a)}function m(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function c(t){const{item:r,errorNamePrefix:a,layer:o,validateItem:i}=t;if(u(t),i){const t=i(r);if(!t.isValid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:invalid-parameters`,t.errorMessage,{layer:o})}}function u(t){const{item:r,itemType:a,additionalItemType:o,errorNamePrefix:i,layer:n}=t,s=[a];if(o&&s.push(o),!s.includes(r.type)){const t=s.map((e=>`'${e}'`)).join(", ");throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${i}:portal-item-wrong-type`,`Portal item type should be one of: "${t}"`,{item:r,layer:n})}}function f(t){const{layer:r,errorNamePrefix:a}=t,{portalItem:o}=r;if(!o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:portal-item-not-set`,m(r,"requires the portalItem property to be set"));if(!o.loaded)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:portal-item-not-loaded`,m(r,"cannot be saved to a portal item that does not exist or is inaccessible"));c({...t,item:o})}function d(e){const{newItem:t,itemType:o}=e;let i=_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__["default"].from(t);return i.id&&(i=i.clone(),i.id=null),i.type??=o,i.portal??=_portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__["default"].getDefault(),c({...e,item:i}),i}function y(e){return (0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_4__.createForItemWrite)(e,"portal-item")}async function w(e,t,r){"beforeSave"in e&&"function"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return await Promise.all(t.resources?.pendingOperations??[]),(0,_webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateWriteErrors)(t,{errorName:"layer-write:unsupported"},r),a}function I(e){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__.addTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__.typeKeyword.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}async function v(e,t,r){const a=e.portal;await a.signIn(),await a.user.addItem({item:e,data:t,folder:r?.folder})}async function P(e,r){const{layer:a,createItemData:o,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await l(e),f(e);const m=a.portalItem,c=i?i(m):y(m),u=await w(a,c,{...r,supplementalUnsupportedErrors:p}),d=await o({layer:a,layerJSON:u},m);return await(n?.(a,m,d)),I(m),await m.update({data:d}),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__.updateOrigins)(c),await(s?.(m,c)),m}async function $(e,r){const{layer:a,createItemData:o,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await l(e);const m=d(e),c=i?i(m):y(m),u=await w(a,c,{...r,supplementalUnsupportedErrors:p}),f=await o({layer:a,layerJSON:u},m);return await n(a,m,f),I(m),await v(m,f,r),a.portalItem=m,(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__.updateOrigins)(c),await(s?.(m,c)),m}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19zYXZlX2ltYWdlcnlVdGlsc19qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUMyUSxxTEFBcUwsY0FBYyw2Q0FBNkMsWUFBWSxNQUFNLFNBQVMsS0FBSywwRkFBQyxPQUFPLE9BQU8sNEtBQTRLLGNBQWMsb0JBQW9CLHdEQUF3RCxzQkFBc0IsTUFBTSxpQ0FBaUMsR0FBRyx5QkFBeUIsSUFBSSxlQUFlLHlGQUFDLElBQUksTUFBTSxnQkFBZ0IscUZBQUMsR0FBRywyRUFBQyxXQUFXLHFGQUFDLEdBQUcsMkVBQUMsd0NBQXdDLHNCQUFzQiw4RUFBOEUsT0FBTywrQ0FBQyxFQUFFLHNFQUFzRSxJQUFJLHdCQUF3Qiw4RUFBOEUsT0FBTyxpREFBQyxFQUFFLG9HQUFvRyxJQUFrQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSmw2QztBQUNBO0FBQ0E7QUFDQTtBQUN3YSxrQkFBa0IsYUFBYSx3QkFBd0Isc0RBQUMsSUFBSSxFQUFFLHFDQUFxQyxRQUFRLEVBQUUsb0JBQW9CLE1BQU0sMENBQTBDLEdBQUcsd0JBQXdCLGdCQUFnQix1QkFBdUIsUUFBUSxRQUFRLEtBQUssYUFBYSxnQkFBZ0IsSUFBSSxFQUFFLEVBQUUsY0FBYyxNQUFNLGdEQUFnRCxHQUFHLFdBQVcsYUFBYSx3QkFBd0Isc0RBQUMsSUFBSSxFQUFFLHFDQUFxQyxRQUFRLEdBQUcsY0FBYyxNQUFNLGlFQUFpRSxTQUFTLHFDQUFxQyxzQkFBc0IsRUFBRSxnQkFBZ0IsVUFBVSxzREFBQyxJQUFJLEVBQUUsZ0VBQWdFLEVBQUUsSUFBSSxlQUFlLEdBQUcsY0FBYyxNQUFNLDBCQUEwQixJQUFJLGFBQWEsR0FBRyxnQkFBZ0Isc0RBQUMsSUFBSSxFQUFFLHlFQUF5RSx1QkFBdUIsc0RBQUMsSUFBSSxFQUFFLHlHQUF5RyxHQUFHLFlBQVksRUFBRSxjQUFjLE1BQU0scUJBQXFCLEdBQUcsTUFBTSw2REFBQyxTQUFTLDJEQUEyRCx5REFBQyxpQkFBaUIsWUFBWSxJQUFJLGNBQWMsT0FBTyxrRkFBQyxrQkFBa0Isd0JBQXdCLHdFQUF3RSxrQkFBa0IsSUFBSSw2REFBNkQsaUZBQUMsSUFBSSxvQ0FBb0MsTUFBTSxjQUFjLGtGQUFDLEdBQUcsMkVBQUMsNEZBQTRGLHdCQUF3QixpQkFBaUIsdUNBQXVDLCtCQUErQixFQUFFLHNCQUFzQixNQUFNLGlIQUFpSCxHQUFHLGdCQUFnQixrREFBa0QscUNBQXFDLGFBQWEsb0JBQW9CLElBQUksOENBQThDLE9BQU8sRUFBRSxtRkFBQyxzQkFBc0Isc0JBQXNCLE1BQU0saUhBQWlILEdBQUcsV0FBVywwQ0FBMEMscUNBQXFDLGFBQWEsb0JBQW9CLElBQUkseURBQXlELG1GQUFDLHNCQUF3TSIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc2F2ZS9pbWFnZXJ5VXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zYXZlL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7c2F2ZSBhcyBlLHNhdmVBcyBhcyB0fWZyb21cIi4vdXRpbHMuanNcIjtpbXBvcnR7Z2V0UHJpbWFyeVJhc3RlcnMgYXMgcn1mcm9tXCIuLi9zdXBwb3J0L3Jhc3RlckRhdGFzZXRzL2RhdGFzZXRVdGlscy5qc1wiO2ltcG9ydHtnZXRXR1M4NEV4dGVudEZvckl0ZW0gYXMgYSxyZW1vdmVUeXBlS2V5d29yZCBhcyBzLHR5cGVLZXl3b3JkIGFzIGksdG9nZ2xlVHlwZUtleXdvcmQgYXMgeX1mcm9tXCIuLi8uLi9wb3J0YWwvc3VwcG9ydC9wb3J0YWxJdGVtVXRpbHMuanNcIjtjb25zdCBsPVwiSW1hZ2UgU2VydmljZVwiLG89XCJpbWFnZXJ5LWxheWVyLXNhdmVcIixtPVwiaW1hZ2VyeS1sYXllci1zYXZlLWFzXCIsbj1cImltYWdlcnktdGlsZS1sYXllci1zYXZlXCIsYz1cImltYWdlcnktdGlsZS1sYXllci1zYXZlLWFzXCIscD1cIldDU1wiLHU9XCJ3Y3MtbGF5ZXItc2F2ZVwiLGc9XCJ3Y3MtbGF5ZXItc2F2ZS1hc1wiO2Z1bmN0aW9uIHYoZSl7aWYoXCJpbWFnZXJ5XCI9PT1lLnR5cGV8fFwid2NzXCI9PT1lLnR5cGUpcmV0dXJue2lzVmFsaWQ6ITB9O2NvbnN0e3Jhc3Rlcjp0fT1lLGE9cih0KVswXTtyZXR1cm57aXNWYWxpZDpcIlJhc3RlclRpbGVTZXJ2ZXJcIj09PWE/LmRhdGFzZXRGb3JtYXQmJihcIlJhc3RlclwiPT09YS50aWxlVHlwZXx8XCJNYXBcIj09PWEudGlsZVR5cGUpLGVycm9yTWVzc2FnZTpcImltYWdlcnkgdGlsZSBsYXllciBzaG91bGQgYmUgY3JlYXRlZCBmcm9tIGEgdGlsZWQgaW1hZ2Ugc2VydmljZS5cIn19ZnVuY3Rpb24gZihlKXtjb25zdCB0PWUubGF5ZXJKU09OO3JldHVybiBQcm9taXNlLnJlc29sdmUodCYmT2JqZWN0LmtleXModCkubGVuZ3RoP3Q6bnVsbCl9YXN5bmMgZnVuY3Rpb24gZChlLHQpe2NvbnN0e3BhcnNlZFVybDpyLHRpdGxlOmwsZnVsbEV4dGVudDpvfT1lO3QudXJsPXIucGF0aCx0LnRpdGxlfHw9bDt0cnl7dC5leHRlbnQ9YXdhaXQgYShvKX1jYXRjaHt0LmV4dGVudD12b2lkIDB9cyh0LGkuTUVUQURBVEEpLHkodCxpLlRJTEVEX0lNQUdFUlksXCJpbWFnZXJ5LXRpbGVcIj09PWUudHlwZSl9YXN5bmMgZnVuY3Rpb24gSSh0LHIpe2NvbnN0IGE9XCJpbWFnZXJ5XCI9PT10LnR5cGU/bzpcImltYWdlcnktdGlsZVwiPT09dC50eXBlP246dSxzPVwid2NzXCI9PT10LnR5cGU/cDpsO3JldHVybiBlKHtsYXllcjp0LGl0ZW1UeXBlOnMsdmFsaWRhdGVMYXllcjp2LGNyZWF0ZUl0ZW1EYXRhOmYsZXJyb3JOYW1lUHJlZml4OmF9LHIpfWFzeW5jIGZ1bmN0aW9uIFQoZSxyLGEpe2NvbnN0IHM9XCJpbWFnZXJ5XCI9PT1lLnR5cGU/bTpcImltYWdlcnktdGlsZVwiPT09ZS50eXBlP2M6ZyxpPVwid2NzXCI9PT1lLnR5cGU/cDpsO3JldHVybiB0KHtsYXllcjplLGl0ZW1UeXBlOmksdmFsaWRhdGVMYXllcjp2LGNyZWF0ZUl0ZW1EYXRhOmYsZXJyb3JOYW1lUHJlZml4OnMsbmV3SXRlbTpyLHNldEl0ZW1Qcm9wZXJ0aWVzOmR9LGEpfWV4cG9ydHtJIGFzIHNhdmUsVCBhcyBzYXZlQXN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7dXBkYXRlT3JpZ2lucyBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L29yaWdpblV0aWxzLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vcG9ydGFsL1BvcnRhbC5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWxJdGVtLmpzXCI7aW1wb3J0e2NyZWF0ZUZvckl0ZW1Xcml0ZSBhcyBvfWZyb21cIi4uLy4uL3BvcnRhbC9zdXBwb3J0L2pzb25Db250ZXh0LmpzXCI7aW1wb3J0e2FkZFR5cGVLZXl3b3JkIGFzIGksdHlwZUtleXdvcmQgYXMgbn1mcm9tXCIuLi8uLi9wb3J0YWwvc3VwcG9ydC9wb3J0YWxJdGVtVXRpbHMuanNcIjtpbXBvcnR7ZXZhbHVhdGVXcml0ZUVycm9ycyBhcyBzfWZyb21cIi4uLy4uL3dlYmRvYy9zdXBwb3J0L3NhdmVVdGlscy5qc1wiO2Z1bmN0aW9uIHAodCxyLGEpe2NvbnN0IG89YSh0KTtpZighby5pc1ZhbGlkKXRocm93IG5ldyBlKGAke3J9OmludmFsaWQtcGFyYW1ldGVyc2Asby5lcnJvck1lc3NhZ2Use2xheWVyOnR9KX1hc3luYyBmdW5jdGlvbiBsKGUpe2NvbnN0e2xheWVyOnQsZXJyb3JOYW1lUHJlZml4OnIsdmFsaWRhdGVMYXllcjphfT1lO2F3YWl0IHQubG9hZCgpLHAodCxyLGEpfWZ1bmN0aW9uIG0oZSx0KXtyZXR1cm5gTGF5ZXIgKHRpdGxlOiAke2UudGl0bGV9LCBpZDogJHtlLmlkfSkgb2YgdHlwZSAnJHtlLmRlY2xhcmVkQ2xhc3N9JyAke3R9YH1mdW5jdGlvbiBjKHQpe2NvbnN0e2l0ZW06cixlcnJvck5hbWVQcmVmaXg6YSxsYXllcjpvLHZhbGlkYXRlSXRlbTppfT10O2lmKHUodCksaSl7Y29uc3QgdD1pKHIpO2lmKCF0LmlzVmFsaWQpdGhyb3cgbmV3IGUoYCR7YX06aW52YWxpZC1wYXJhbWV0ZXJzYCx0LmVycm9yTWVzc2FnZSx7bGF5ZXI6b30pfX1mdW5jdGlvbiB1KHQpe2NvbnN0e2l0ZW06cixpdGVtVHlwZTphLGFkZGl0aW9uYWxJdGVtVHlwZTpvLGVycm9yTmFtZVByZWZpeDppLGxheWVyOm59PXQscz1bYV07aWYobyYmcy5wdXNoKG8pLCFzLmluY2x1ZGVzKHIudHlwZSkpe2NvbnN0IHQ9cy5tYXAoKGU9PmAnJHtlfSdgKSkuam9pbihcIiwgXCIpO3Rocm93IG5ldyBlKGAke2l9OnBvcnRhbC1pdGVtLXdyb25nLXR5cGVgLGBQb3J0YWwgaXRlbSB0eXBlIHNob3VsZCBiZSBvbmUgb2Y6IFwiJHt0fVwiYCx7aXRlbTpyLGxheWVyOm59KX19ZnVuY3Rpb24gZih0KXtjb25zdHtsYXllcjpyLGVycm9yTmFtZVByZWZpeDphfT10LHtwb3J0YWxJdGVtOm99PXI7aWYoIW8pdGhyb3cgbmV3IGUoYCR7YX06cG9ydGFsLWl0ZW0tbm90LXNldGAsbShyLFwicmVxdWlyZXMgdGhlIHBvcnRhbEl0ZW0gcHJvcGVydHkgdG8gYmUgc2V0XCIpKTtpZighby5sb2FkZWQpdGhyb3cgbmV3IGUoYCR7YX06cG9ydGFsLWl0ZW0tbm90LWxvYWRlZGAsbShyLFwiY2Fubm90IGJlIHNhdmVkIHRvIGEgcG9ydGFsIGl0ZW0gdGhhdCBkb2VzIG5vdCBleGlzdCBvciBpcyBpbmFjY2Vzc2libGVcIikpO2Moey4uLnQsaXRlbTpvfSl9ZnVuY3Rpb24gZChlKXtjb25zdHtuZXdJdGVtOnQsaXRlbVR5cGU6b309ZTtsZXQgaT1hLmZyb20odCk7cmV0dXJuIGkuaWQmJihpPWkuY2xvbmUoKSxpLmlkPW51bGwpLGkudHlwZT8/PW8saS5wb3J0YWw/Pz1yLmdldERlZmF1bHQoKSxjKHsuLi5lLGl0ZW06aX0pLGl9ZnVuY3Rpb24geShlKXtyZXR1cm4gbyhlLFwicG9ydGFsLWl0ZW1cIil9YXN5bmMgZnVuY3Rpb24gdyhlLHQscil7XCJiZWZvcmVTYXZlXCJpbiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmJlZm9yZVNhdmUmJmF3YWl0IGUuYmVmb3JlU2F2ZSgpO2NvbnN0IGE9ZS53cml0ZSh7fSx0KTtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwodC5yZXNvdXJjZXM/LnBlbmRpbmdPcGVyYXRpb25zPz9bXSkscyh0LHtlcnJvck5hbWU6XCJsYXllci13cml0ZTp1bnN1cHBvcnRlZFwifSxyKSxhfWZ1bmN0aW9uIEkoZSl7aShlLG4uSlNBUEkpLGUudHlwZUtleXdvcmRzJiYoZS50eXBlS2V5d29yZHM9ZS50eXBlS2V5d29yZHMuZmlsdGVyKCgoZSx0LHIpPT5yLmluZGV4T2YoZSk9PT10KSkpfWFzeW5jIGZ1bmN0aW9uIHYoZSx0LHIpe2NvbnN0IGE9ZS5wb3J0YWw7YXdhaXQgYS5zaWduSW4oKSxhd2FpdCBhLnVzZXIuYWRkSXRlbSh7aXRlbTplLGRhdGE6dCxmb2xkZXI6cj8uZm9sZGVyfSl9YXN5bmMgZnVuY3Rpb24gUChlLHIpe2NvbnN0e2xheWVyOmEsY3JlYXRlSXRlbURhdGE6byxjcmVhdGVKU09OQ29udGV4dDppLHNldEl0ZW1Qcm9wZXJ0aWVzOm4sc2F2ZVJlc291cmNlczpzLHN1cHBsZW1lbnRhbFVuc3VwcG9ydGVkRXJyb3JzOnB9PWU7YXdhaXQgbChlKSxmKGUpO2NvbnN0IG09YS5wb3J0YWxJdGVtLGM9aT9pKG0pOnkobSksdT1hd2FpdCB3KGEsYyx7Li4ucixzdXBwbGVtZW50YWxVbnN1cHBvcnRlZEVycm9yczpwfSksZD1hd2FpdCBvKHtsYXllcjphLGxheWVySlNPTjp1fSxtKTtyZXR1cm4gYXdhaXQobj8uKGEsbSxkKSksSShtKSxhd2FpdCBtLnVwZGF0ZSh7ZGF0YTpkfSksdChjKSxhd2FpdChzPy4obSxjKSksbX1hc3luYyBmdW5jdGlvbiAkKGUscil7Y29uc3R7bGF5ZXI6YSxjcmVhdGVJdGVtRGF0YTpvLGNyZWF0ZUpTT05Db250ZXh0Omksc2V0SXRlbVByb3BlcnRpZXM6bixzYXZlUmVzb3VyY2VzOnMsc3VwcGxlbWVudGFsVW5zdXBwb3J0ZWRFcnJvcnM6cH09ZTthd2FpdCBsKGUpO2NvbnN0IG09ZChlKSxjPWk/aShtKTp5KG0pLHU9YXdhaXQgdyhhLGMsey4uLnIsc3VwcGxlbWVudGFsVW5zdXBwb3J0ZWRFcnJvcnM6cH0pLGY9YXdhaXQgbyh7bGF5ZXI6YSxsYXllckpTT046dX0sbSk7cmV0dXJuIGF3YWl0IG4oYSxtLGYpLEkobSksYXdhaXQgdihtLGYsciksYS5wb3J0YWxJdGVtPW0sdChjKSxhd2FpdChzPy4obSxjKSksbX1leHBvcnR7diBhcyBhZGRJdGVtLG0gYXMgY3JlYXRlRXJyb3JNZXNzYWdlLGYgYXMgZW5zdXJlSXRlbUNvbmZpZyxwIGFzIGVuc3VyZUxheWVyQ29uZmlnLHcgYXMgZ2V0TGF5ZXJKU09OLGQgYXMgZ2V0UG9ydGFsSXRlbSxQIGFzIHNhdmUsJCBhcyBzYXZlQXMsSSBhcyBzZXRDb21tb25JdGVtUHJvcGVydGllc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=