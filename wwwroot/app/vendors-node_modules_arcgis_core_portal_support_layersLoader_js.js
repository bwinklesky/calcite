export const __webpack_id__ = "vendors-node_modules_arcgis_core_portal_support_layersLoader_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_portal_support_layersLoader_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/support/LayerLoadContext.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/LayerLoadContext.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LayerLoadContext: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../support/requestPresets.js */ "./node_modules/@arcgis/core/support/requestPresets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const s=this._serviceMetadatas.get(e);if(s)return s;const r=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.fetchArcGISServiceJSON)(e,a);return this._serviceMetadatas.set(e,r),r}async fetchItemData(t){const{id:e}=t;if(!e)return null;const{_itemDatas:a}=this;if(a.has(e))return a.get(e);const s=await t.fetchData();return a.set(e,s),s}async fetchCustomParameters(t,e){const a=await this.fetchItemData(t);return a&&"object"==typeof a&&(e?e(a):a.customParameters)||null}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findAssociatedFeatureService: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function s(e,r){const n=(0,_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__.parse)(e);if(!n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("invalid-url","Invalid scene service url");const o={...r,sceneServerUrl:n.url.path,layerId:n.sublayer??void 0};if(o.sceneLayerItem??=await l(o),null==o.sceneLayerItem)return f(o.sceneServerUrl.replace("/SceneServer","/FeatureServer"),o);const i=await y(o);if(!i?.url)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("related-service-not-found","Could not find feature service through portal item relationship");o.featureServiceItem=i;const s=await f(i.url,o);return s.portalItem=i,s}async function l(e){const r=(await c(e)).serviceItemId;if(!r)return null;const t=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_6__["default"]({id:r,apiKey:e.apiKey}),a=await u(e);null!=a&&(t.portal=new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_5__["default"]({url:a}));try{return await t.load({signal:e.signal})}catch(s){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(s),null}}async function c(e){if(e.rootDocument)return e.rootDocument;const t={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const n=await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(e.sceneServerUrl,t);e.rootDocument=n.data}catch{e.rootDocument={}}return e.rootDocument}async function u(t){const a=_kernel_js__WEBPACK_IMPORTED_MODULE_0__.id?.findServerInfo(t.sceneServerUrl);if(a?.owningSystemUrl)return a.owningSystemUrl;const o=t.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const e=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(o,{query:{f:"json"},responseType:"json",signal:t.signal})).data.owningSystemUrl;if(e)return e}catch(i){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(i)}return null}async function f(e,n){const o=(0,_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__.parse)(e);if(!o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("invalid-feature-service-url","Invalid feature service url");const i=o.url.path,s=n.layerId;if(null==s)return{serverUrl:i};const l=c(n),u=n.featureServiceItem?await n.featureServiceItem.fetchData("json"):null,f=(u?.layers?.[0]||u?.tables?.[0])?.customParameters,y=e=>{const t={query:{f:"json",...f},responseType:"json",authMode:e,signal:n.signal};return (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(i,t)},m=y("anonymous").catch((()=>y("no-prompt"))),[p,d]=await Promise.all([m,l]),v=d?.layers,w=p.data&&p.data.layers;if(!Array.isArray(w))throw new Error("expected layers array");if(Array.isArray(v))for(let r=0;r<Math.min(v.length,w.length);r++){if(v[r].id===s)return{serverUrl:i,layerId:w[r].id}}else if(null!=s&&s<w.length)return{serverUrl:i,layerId:w[s].id};throw new Error("could not find matching associated sublayer")}async function y({sceneLayerItem:e,signal:r}){if(!e)return null;try{const t=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:r})).find((e=>"Feature Service"===e.type))||null;if(!t)return null;const n=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_6__["default"]({portal:t.portal,id:t.id});return await n.load(),n}catch(t){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(t),null}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/fetchService.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/fetchService.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchFeatureService: () => (/* binding */ n),
/* harmony export */   getLayerModuleType: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _layerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../support/requestPresets.js */ "./node_modules/@arcgis/core/support/requestPresets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function n(a,n){const{loadContext:s,...o}=n||{},y=s?await s.fetchServiceMetadata(a,o):await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_1__.fetchArcGISServiceJSON)(a,o),i=(0,_layerUtils_js__WEBPACK_IMPORTED_MODULE_0__.getPreferredHost)();u(y),c(y);const l={serviceJSON:y,preferredHost:i};if((y.currentVersion??0)<10.5)return l;const f=`${(0,_layerUtils_js__WEBPACK_IMPORTED_MODULE_0__.getPreferredUrl)()??a}/layers`,L=s?await s.fetchServiceMetadata(f,o):await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_1__.fetchArcGISServiceJSON)(f,o);return u(L),c(L),l.layersJSON={layers:L.layers,tables:L.tables},l}function s(e){const{type:r}=e;return!!r&&a.has(r)}function o(e){return"Table"===e.type}function c(e){e.layers=e.layers?.filter(s),e.tables=e.tables?.filter(o)}function y(e){e.type||="Feature Layer"}function i(e){e.type||="Table"}function u(e){e.layers?.forEach(y),e.tables?.forEach(i)}function l(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/layersLoader.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/layersLoader.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   load: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layers/support/fetchService.js */ "./node_modules/@arcgis/core/layers/support/fetchService.js");
/* harmony import */ var _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layers/support/LayerLoadContext.js */ "./node_modules/@arcgis/core/layers/support/LayerLoadContext.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _Portal_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _jsonContext_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _loadUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./loadUtils.js */ "./node_modules/@arcgis/core/portal/support/loadUtils.js");
/* harmony import */ var _portalItemUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../renderers/support/styleUtils.js */ "./node_modules/@arcgis/core/renderers/support/styleUtils.js");
/* harmony import */ var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../support/requestPresets.js */ "./node_modules/@arcgis/core/support/requestPresets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function b(e,t){const r=e.instance.portalItem;if(r?.id)return await r.load(t),v(e),e.validateItem&&e.validateItem(r),L(e,t)}function v(t){const r=t.instance.portalItem;if(!r?.type||!t.supportedTypes.includes(r.type))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r?.type,expectedType:t.supportedTypes.join(", ")})}async function L(e,t){const r=e.instance,o=r.portalItem;if(!o)return;let{url:n}=o;const{title:s}=o,l=(0,_jsonContext_js__WEBPACK_IMPORTED_MODULE_6__.createForItemRead)(o,"portal-item");if("group"===r.type)return S(r,l,e);n&&"media"!==r.type&&r.read({url:n},l);const p=new _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_3__.LayerLoadContext,{data:u,preferredHost:c}=await x(e,p,t);return n=o.url,"isUrlHostModified"in r&&(c?r.applyPreferredHost({preferredHost:c}):r.applyHostFromPortalItem()),u&&r.read(u,l),r.resourceReferences={portalItem:o,paths:l.readResourcePaths??[]},"subtype-group"!==r.type&&r.read({title:s},l),(0,_renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_9__.loadStyleRenderer)(r,l)}async function S(t,r,a){const o=t.portalItem;if(!t.sourceIsPortalItem)return;const{title:n,type:s}=o;if("Group Layer"===s){if(!(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_8__.hasTypeKeyword)(o,"Map"))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:invalid-layer-item-typekeyword","'Group Layer' item without 'Map' type keyword is not supported");return T(t,a)}return t.read({title:n},r),j(t,a)}async function T(t,r){const a=t.portalItem,o=await a.fetchData("json");if(!o)return;if(!r.populateGroupLayer)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:missing-populate-group-layer","Missing populate group layer");const n=(0,_jsonContext_js__WEBPACK_IMPORTED_MODULE_6__.createForItemRead)(a,"web-map");t.read(o,n),await r.populateGroupLayer(t,o,{context:n}),t.resourceReferences={portalItem:a,paths:n.readResourcePaths??[]}}async function j(t,r){let n;const{portalItem:s}=t;if(!s)return;const l=s.type,i=r.layerModuleTypeMap;if(!i)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:missing-layer-module-type-map","Layer module type map is required to construct sub layers");switch(l){case"Feature Service":case"Feature Collection":n=i.FeatureLayer;break;case"Stream Service":n=i.StreamLayer;break;case"Scene Service":n=i.SceneLayer;break;case"Video Service":n=i.VideoLayer;break;default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:unsupported-item-type-as-group",`The item type '${l}' is not supported as a 'IGroupLayer'`)}const p="Video Service"===l,u=new _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_3__.LayerLoadContext;let[m,{data:w}]=await Promise.all([n(),p?{data:null}:x(r,u)]),h=()=>m;if(p)return F(t,h,i);if("Feature Service"===l){const e=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.getFirstLayerOrTable)(w)?.customParameters;w=s.url?(await (0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.preprocessFSItemData)(w,s.url,u)).data:{},h=await E(w,i)||h;const{provider:r,preferredHost:a}=await U(s.url,{customParameters:e,loadContext:u});return (0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.applyPreferredHostToPortalItem)(s,a),await H(t,h,h,w,i,r)}return"Scene Service"===l&&s.url&&(w=await (0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.populateSceneServiceItemData)(s,w,u)),(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.getNumLayersAndTables)(w)>0?await H(t,h,null,w,i):await P(t,h,i)}async function P(e,t,r){const{portalItem:a}=e;if(!a?.url)return;const o=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_10__.fetchArcGISServiceJSON)(a.url);o&&H(e,t,null,{layers:o.layers?.map(_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.createSublayerData),tables:o.tables?.map(_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.createSublayerData)},r)}async function F(e,t,r){const{portalItem:a}=e;if(!a?.url)return;const o=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_10__.fetchArcGISServiceJSON)(a.url);o&&H(e,t,null,{layers:o.layers?.map((({id:e,name:t})=>({id:e,name:t})))},r)}async function H(e,t,r,a,o,n){let s=a.layers||[];const l=a.tables||[];if("Feature Collection"===e.portalItem?.type?(s.forEach(((e,t)=>{e.id=t,"Table"===e?.layerDefinition?.type&&l.push(e)})),s=s.filter((e=>"Table"!==e?.layerDefinition?.type))):(s.reverse(),l.reverse()),s.forEach((r=>{const o=n?.(r);if(o||!n){const n=M(e,t(r),a,r,o);e.add(n)}})),l.length){const t=r?null:await o.FeatureLayer();l.forEach((o=>{const s=n?.(o);if(s||!n){const n=M(e,r?r(o):t,a,o,s);e.tables.add(n)}}))}}function M(e,t,r,a,o){const n=e.portalItem,s={portalItem:n.clone(),layerId:a.id};null!=a.url&&(s.url=a.url);const i=new t(s);if("sourceJSON"in i&&(i.sourceJSON=o),"subtype-group"!==i.type&&"catalog"!==i.type&&(i.sublayerTitleMode="service-name"),"Feature Collection"===n.type){const e={origin:"portal-item",portal:n.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_5__["default"].getDefault()};i.read(a,e);const t=r.showLegend;null!=t&&i.read({showLegend:t},e)}return i}async function x(e,t,r){if(!1===e.supportsData)return{data:void 0};const a=e.instance,n=a.portalItem;if(!n)return{data:void 0};let s=null;try{s=await n.fetchData("json",r)}catch(l){}if(C(a)){let e=null;const{count:r,preferredHost:l}=await G(n,s,t);if((0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.applyPreferredHostToPortalItem)(n,l),(s?.layers||s?.tables)&&r>0){if(null==a.layerId){const e=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.instanceTypeToLayerTypes)(a.type),t=e?.length?(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.getSublayersByLayerType)(s,e)[0]:(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.getFirstLayerOrTable)(s);t&&(a.layerId=t.id)}e=k(s,a),"OrientedImageryLayer"===e?.layerType&&"oriented-imagery"===a.type&&a.supportedSourceTypes.add("Feature Layer"),e&&null!=s.showLegend&&(e.showLegend=s.showLegend)}return r>1&&"sublayerTitleMode"in a&&"service-name"!==a.sublayerTitleMode&&(a.sublayerTitleMode="item-title-and-service-name"),{data:e,preferredHost:l}}return{data:s}}async function G(e,r,a){if(r?.layers&&r?.tables)return{count:(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.getNumLayersAndTables)(r)};const o=(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_1__.parse)(e.url);if(!o)return{count:1};const l=o.url.path,i=await a.fetchServiceMetadata(l,{customParameters:(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.getFirstLayerOrTable)(r)?.customParameters}).catch((()=>null));return{count:(r?.layers?.length??i?.layers?.length??0)+(r?.tables?.length??i?.tables?.length??0),preferredHost:(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.isPreferredUrlApplicable)(e)?(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.getPreferredHost)():null}}function k(e,t){const{layerId:r}=t,a=e.layers?.find((e=>e.id===r))||e.tables?.find((e=>e.id===r));return a&&D(a,t)?a:null}function C(e){return"stream"!==e.type&&"layerId"in e}function D(e,t){const r="layerType"in e&&e.layerType,{type:a}=t;return!("feature"===a&&r&&"ArcGISFeatureLayer"!==e.layerType||"catalog"===a&&!r||"oriented-imagery"===a&&!r||"subtype-group"===a&&!r)}async function U(e,t){const{layersJSON:a,preferredHost:o}=await (0,_layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_2__.fetchFeatureService)(e,t);if(!a)return{provider:null,preferredHost:o};const n=[...a.layers,...a.tables];return{provider:e=>n.find((t=>t.id===e.id)),preferredHost:o}}async function E(e,t){const{layers:r,tables:a}=e,o=[...r??[],...a??[]];if(!o.length)return;const n=new Set,s=[];for(const{layerType:p}of o){const e=p??"ArcGISFeatureLayer";if(n.has(e))continue;n.add(e);const r=t[(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_7__.layerTypeToLayerModuleType)(e)];s.push(r())}const l=await Promise.all(s),i=new Map;return Array.from(n).forEach(((e,t)=>{i.set(e,l[t])})),({layerType:e})=>{const t=e??"ArcGISFeatureLayer";return i.get(t)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/loadUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/loadUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSublayerData: () => (/* binding */ a),
/* harmony export */   getFirstLayerOrTable: () => (/* binding */ s),
/* harmony export */   getLayerOrTable: () => (/* binding */ n),
/* harmony export */   getNumLayersAndTables: () => (/* binding */ c),
/* harmony export */   getSublayersByLayerType: () => (/* binding */ u),
/* harmony export */   instanceTypeToLayerTypes: () => (/* binding */ o),
/* harmony export */   layerTypeToLayerModuleType: () => (/* binding */ i),
/* harmony export */   populateSceneServiceItemData: () => (/* binding */ y),
/* harmony export */   preprocessFSItemData: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _layers_support_associatedFeatureServiceUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../layers/support/associatedFeatureServiceUtils.js */ "./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js");
/* harmony import */ var _layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layers/support/fetchService.js */ "./node_modules/@arcgis/core/layers/support/fetchService.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function a(e){const t={id:e.id,name:e.name},a=(0,_layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_1__.getLayerModuleType)(e.type);return"FeatureLayer"!==a&&(t.layerType=a),t}async function l(e,r,l){let n;if(null==e?.layers||null==e?.tables){const u=await l.fetchServiceMetadata(r,{customParameters:s(e)?.customParameters});n=(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_2__.getPreferredHost)(),(e=e||{}).layers=e.layers||u?.layers?.map(a),e.tables=e.tables||u?.tables?.map(a)}return{data:e,preferredHost:n}}function s(e){if(!e)return null;const{layers:r,tables:t}=e;return r?.length?r[0]:t?.length?t[0]:null}function n(e,r){if(null==r)return null;return[...e.layers||[],...e.tables||[]].find((e=>e.id===r))}function u(e,r){return[...e.layers||[],...e.tables||[]].filter((({layerType:e})=>e?r.includes(e):r.includes("ArcGISFeatureLayer")))}function c(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function o(e){switch(e){case"catalog":return["CatalogLayer"];case"feature":return["ArcGISFeatureLayer"];case"oriented-imagery":return["OrientedImageryLayer"];case"subtype-group":return["SubtypeGroupLayer","SubtypeGroupTable"]}return null}function i(e){switch(e){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":case"SubtypeGroupTable":return"SubtypeGroupLayer"}return"FeatureLayer"}async function y(r,t,l){if(!r?.url)return t??{};if(t??={},!t.layers){const e=await l.fetchServiceMetadata(r.url);t.layers=e.layers?.map(a)}const{serverUrl:n,portalItem:u}=await (0,_layers_support_associatedFeatureServiceUtils_js__WEBPACK_IMPORTED_MODULE_0__.findAssociatedFeatureService)(r.url,{sceneLayerItem:r,customParameters:s(t)?.customParameters}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return t.tables=[],t;if(!t.tables&&u){const e=await u.fetchData().catch((()=>null));if(e?.tables)t.tables=e.tables.map(a);else{const r=await l.fetchServiceMetadata(n,{customParameters:s(e)?.customParameters}).catch((()=>null));t.tables=r?.tables?.map(a)}}if(t.tables)for(const e of t.tables)e.url=`${n}/${e.id}`;return t}


/***/ }),

/***/ "./node_modules/@arcgis/core/support/requestPresets.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/support/requestPresets.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchArcGISServiceJSON: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../request.js */ "./node_modules/@arcgis/core/request.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function t(t,o){const{data:r}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t,{responseType:"json",query:{f:"json",...o?.customParameters,token:o?.apiKey}});return r}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfcG9ydGFsX3N1cHBvcnRfbGF5ZXJzTG9hZGVyX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lFLFFBQVEsY0FBYyx1REFBdUQsZ0NBQWdDLHNDQUFzQyxjQUFjLGNBQWMsa0ZBQUMsTUFBTSx5Q0FBeUMsdUJBQXVCLE1BQU0sS0FBSyxHQUFHLGtCQUFrQixNQUFNLGFBQWEsTUFBTSw0QkFBNEIsNEJBQTRCLG9CQUFvQixpQ0FBaUMsb0NBQW9DLGlFQUErRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p4bUI7QUFDQTtBQUNBO0FBQ0E7QUFDbVMsc0JBQXNCLFFBQVEseURBQUMsSUFBSSxnQkFBZ0Isc0RBQUMsNENBQTRDLFNBQVMsMkRBQTJELDhIQUE4SCxtQkFBbUIscUJBQXFCLHNEQUFDLGdHQUFnRyx1QkFBdUIseUJBQXlCLHdCQUF3QixvQkFBb0IsbUNBQW1DLGtCQUFrQixZQUFZLDZEQUFDLEVBQUUscUJBQXFCLGVBQWUsdUJBQXVCLHlEQUFDLEVBQUUsTUFBTSxHQUFHLElBQUkscUJBQXFCLGdCQUFnQixFQUFFLFNBQVMsT0FBTyx3RUFBQyxVQUFVLG9CQUFvQix3Q0FBd0MsU0FBUyxPQUFPLDhDQUE4QyxzQ0FBc0MsSUFBSSxjQUFjLHVEQUFDLHFCQUFxQixzQkFBc0IsTUFBTSxrQkFBa0Isc0JBQXNCLG9CQUFvQixRQUFRLDBDQUFDLG1DQUFtQywrQ0FBK0MsaUVBQWlFLElBQUksZUFBZSx1REFBQyxJQUFJLE9BQU8sU0FBUyxxQ0FBcUMsd0JBQXdCLGNBQWMsU0FBUyx3RUFBQyxJQUFJLFlBQVksc0JBQXNCLFFBQVEseURBQUMsSUFBSSxnQkFBZ0Isc0RBQUMsOERBQThELCtCQUErQixrQkFBa0IsYUFBYSxpSkFBaUosU0FBUyxPQUFPLGNBQWMsaURBQWlELE9BQU8sdURBQUMsTUFBTSxpSEFBaUgsOERBQThELGdDQUFnQyw4QkFBOEIs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aUJBQWlCLDhDQUE4QyxzQ0FBc0MsS0FBSyx3Q0FBd0Msd0NBQXdDLG9CQUFvQiw0QkFBNEIsNkNBQTZDLEVBQUUsR0FBRyxLQUFLLEVBQUUsU0FBMFE7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKMXlFO0FBQ0E7QUFDQTtBQUNBO0FBQzZCLHNCQUFzQixNQUFNLE9BQU8sT0FBTyx1REFBQyxJQUFJLDJCQUEyQixpREFBaUQsRUFBRSxTQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9MYXllckxvYWRDb250ZXh0LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9hc3NvY2lhdGVkRmVhdHVyZVNlcnZpY2VVdGlscy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvZmV0Y2hTZXJ2aWNlLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9wb3J0YWwvc3VwcG9ydC9sYXllcnNMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3BvcnRhbC9zdXBwb3J0L2xvYWRVdGlscy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvc3VwcG9ydC9yZXF1ZXN0UHJlc2V0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2ZldGNoQXJjR0lTU2VydmljZUpTT04gYXMgdH1mcm9tXCIuLi8uLi9zdXBwb3J0L3JlcXVlc3RQcmVzZXRzLmpzXCI7Y2xhc3MgZXtjb25zdHJ1Y3Rvcigpe3RoaXMuX3NlcnZpY2VNZXRhZGF0YXM9bmV3IE1hcCx0aGlzLl9pdGVtRGF0YXM9bmV3IE1hcH1hc3luYyBmZXRjaFNlcnZpY2VNZXRhZGF0YShlLGEpe2NvbnN0IHM9dGhpcy5fc2VydmljZU1ldGFkYXRhcy5nZXQoZSk7aWYocylyZXR1cm4gcztjb25zdCByPWF3YWl0IHQoZSxhKTtyZXR1cm4gdGhpcy5fc2VydmljZU1ldGFkYXRhcy5zZXQoZSxyKSxyfWFzeW5jIGZldGNoSXRlbURhdGEodCl7Y29uc3R7aWQ6ZX09dDtpZighZSlyZXR1cm4gbnVsbDtjb25zdHtfaXRlbURhdGFzOmF9PXRoaXM7aWYoYS5oYXMoZSkpcmV0dXJuIGEuZ2V0KGUpO2NvbnN0IHM9YXdhaXQgdC5mZXRjaERhdGEoKTtyZXR1cm4gYS5zZXQoZSxzKSxzfWFzeW5jIGZldGNoQ3VzdG9tUGFyYW1ldGVycyh0LGUpe2NvbnN0IGE9YXdhaXQgdGhpcy5mZXRjaEl0ZW1EYXRhKHQpO3JldHVybiBhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmKGU/ZShhKTphLmN1c3RvbVBhcmFtZXRlcnMpfHxudWxsfX1leHBvcnR7ZSBhcyBMYXllckxvYWRDb250ZXh0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7aWQgYXMgZX1mcm9tXCIuLi8uLi9rZXJuZWwuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRFcnJvciBhcyBufWZyb21cIi4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3BhcnNlIGFzIGF9ZnJvbVwiLi9hcmNnaXNMYXllclVybC5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWwuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi9wb3J0YWwvUG9ydGFsSXRlbS5qc1wiO2FzeW5jIGZ1bmN0aW9uIHMoZSxyKXtjb25zdCBuPWEoZSk7aWYoIW4pdGhyb3cgbmV3IHQoXCJpbnZhbGlkLXVybFwiLFwiSW52YWxpZCBzY2VuZSBzZXJ2aWNlIHVybFwiKTtjb25zdCBvPXsuLi5yLHNjZW5lU2VydmVyVXJsOm4udXJsLnBhdGgsbGF5ZXJJZDpuLnN1YmxheWVyPz92b2lkIDB9O2lmKG8uc2NlbmVMYXllckl0ZW0/Pz1hd2FpdCBsKG8pLG51bGw9PW8uc2NlbmVMYXllckl0ZW0pcmV0dXJuIGYoby5zY2VuZVNlcnZlclVybC5yZXBsYWNlKFwiL1NjZW5lU2VydmVyXCIsXCIvRmVhdHVyZVNlcnZlclwiKSxvKTtjb25zdCBpPWF3YWl0IHkobyk7aWYoIWk/LnVybCl0aHJvdyBuZXcgdChcInJlbGF0ZWQtc2VydmljZS1ub3QtZm91bmRcIixcIkNvdWxkIG5vdCBmaW5kIGZlYXR1cmUgc2VydmljZSB0aHJvdWdoIHBvcnRhbCBpdGVtIHJlbGF0aW9uc2hpcFwiKTtvLmZlYXR1cmVTZXJ2aWNlSXRlbT1pO2NvbnN0IHM9YXdhaXQgZihpLnVybCxvKTtyZXR1cm4gcy5wb3J0YWxJdGVtPWksc31hc3luYyBmdW5jdGlvbiBsKGUpe2NvbnN0IHI9KGF3YWl0IGMoZSkpLnNlcnZpY2VJdGVtSWQ7aWYoIXIpcmV0dXJuIG51bGw7Y29uc3QgdD1uZXcgaSh7aWQ6cixhcGlLZXk6ZS5hcGlLZXl9KSxhPWF3YWl0IHUoZSk7bnVsbCE9YSYmKHQucG9ydGFsPW5ldyBvKHt1cmw6YX0pKTt0cnl7cmV0dXJuIGF3YWl0IHQubG9hZCh7c2lnbmFsOmUuc2lnbmFsfSl9Y2F0Y2gocyl7cmV0dXJuIG4ocyksbnVsbH19YXN5bmMgZnVuY3Rpb24gYyhlKXtpZihlLnJvb3REb2N1bWVudClyZXR1cm4gZS5yb290RG9jdW1lbnQ7Y29uc3QgdD17cXVlcnk6e2Y6XCJqc29uXCIsLi4uZS5jdXN0b21QYXJhbWV0ZXJzLHRva2VuOmUuYXBpS2V5fSxyZXNwb25zZVR5cGU6XCJqc29uXCIsc2lnbmFsOmUuc2lnbmFsfTt0cnl7Y29uc3Qgbj1hd2FpdCByKGUuc2NlbmVTZXJ2ZXJVcmwsdCk7ZS5yb290RG9jdW1lbnQ9bi5kYXRhfWNhdGNoe2Uucm9vdERvY3VtZW50PXt9fXJldHVybiBlLnJvb3REb2N1bWVudH1hc3luYyBmdW5jdGlvbiB1KHQpe2NvbnN0IGE9ZT8uZmluZFNlcnZlckluZm8odC5zY2VuZVNlcnZlclVybCk7aWYoYT8ub3duaW5nU3lzdGVtVXJsKXJldHVybiBhLm93bmluZ1N5c3RlbVVybDtjb25zdCBvPXQuc2NlbmVTZXJ2ZXJVcmwucmVwbGFjZSgvKC4qXFwvcmVzdClcXC8uKi9pLFwiJDFcIikrXCIvaW5mb1wiO3RyeXtjb25zdCBlPShhd2FpdCByKG8se3F1ZXJ5OntmOlwianNvblwifSxyZXNwb25zZVR5cGU6XCJqc29uXCIsc2lnbmFsOnQuc2lnbmFsfSkpLmRhdGEub3duaW5nU3lzdGVtVXJsO2lmKGUpcmV0dXJuIGV9Y2F0Y2goaSl7bihpKX1yZXR1cm4gbnVsbH1hc3luYyBmdW5jdGlvbiBmKGUsbil7Y29uc3Qgbz1hKGUpO2lmKCFvKXRocm93IG5ldyB0KFwiaW52YWxpZC1mZWF0dXJlLXNlcnZpY2UtdXJsXCIsXCJJbnZhbGlkIGZlYXR1cmUgc2VydmljZSB1cmxcIik7Y29uc3QgaT1vLnVybC5wYXRoLHM9bi5sYXllcklkO2lmKG51bGw9PXMpcmV0dXJue3NlcnZlclVybDppfTtjb25zdCBsPWMobiksdT1uLmZlYXR1cmVTZXJ2aWNlSXRlbT9hd2FpdCBuLmZlYXR1cmVTZXJ2aWNlSXRlbS5mZXRjaERhdGEoXCJqc29uXCIpOm51bGwsZj0odT8ubGF5ZXJzPy5bMF18fHU/LnRhYmxlcz8uWzBdKT8uY3VzdG9tUGFyYW1ldGVycyx5PWU9Pntjb25zdCB0PXtxdWVyeTp7ZjpcImpzb25cIiwuLi5mfSxyZXNwb25zZVR5cGU6XCJqc29uXCIsYXV0aE1vZGU6ZSxzaWduYWw6bi5zaWduYWx9O3JldHVybiByKGksdCl9LG09eShcImFub255bW91c1wiKS5jYXRjaCgoKCk9PnkoXCJuby1wcm9tcHRcIikpKSxbcCxkXT1hd2FpdCBQcm9taXNlLmFsbChbbSxsXSksdj1kPy5sYXllcnMsdz1wLmRhdGEmJnAuZGF0YS5sYXllcnM7aWYoIUFycmF5LmlzQXJyYXkodykpdGhyb3cgbmV3IEVycm9yKFwiZXhwZWN0ZWQgbGF5ZXJzIGFycmF5XCIpO2lmKEFycmF5LmlzQXJyYXkodikpZm9yKGxldCByPTA7cjxNYXRoLm1pbih2Lmxlbmd0aCx3Lmxlbmd0aCk7cisrKXtpZih2W3JdLmlkPT09cylyZXR1cm57c2VydmVyVXJsOmksbGF5ZXJJZDp3W3JdLmlkfX1lbHNlIGlmKG51bGwhPXMmJnM8dy5sZW5ndGgpcmV0dXJue3NlcnZlclVybDppLGxheWVySWQ6d1tzXS5pZH07dGhyb3cgbmV3IEVycm9yKFwiY291bGQgbm90IGZpbmQgbWF0Y2hpbmcgYXNzb2NpYXRlZCBzdWJsYXllclwiKX1hc3luYyBmdW5jdGlvbiB5KHtzY2VuZUxheWVySXRlbTplLHNpZ25hbDpyfSl7aWYoIWUpcmV0dXJuIG51bGw7dHJ5e2NvbnN0IHQ9KGF3YWl0IGUuZmV0Y2hSZWxhdGVkSXRlbXMoe3JlbGF0aW9uc2hpcFR5cGU6XCJTZXJ2aWNlMlNlcnZpY2VcIixkaXJlY3Rpb246XCJyZXZlcnNlXCJ9LHtzaWduYWw6cn0pKS5maW5kKChlPT5cIkZlYXR1cmUgU2VydmljZVwiPT09ZS50eXBlKSl8fG51bGw7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3Qgbj1uZXcgaSh7cG9ydGFsOnQucG9ydGFsLGlkOnQuaWR9KTtyZXR1cm4gYXdhaXQgbi5sb2FkKCksbn1jYXRjaCh0KXtyZXR1cm4gbih0KSxudWxsfX1leHBvcnR7cyBhcyBmaW5kQXNzb2NpYXRlZEZlYXR1cmVTZXJ2aWNlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0UHJlZmVycmVkSG9zdCBhcyBlLGdldFByZWZlcnJlZFVybCBhcyByfWZyb21cIi4vbGF5ZXJVdGlscy5qc1wiO2ltcG9ydHtmZXRjaEFyY0dJU1NlcnZpY2VKU09OIGFzIHR9ZnJvbVwiLi4vLi4vc3VwcG9ydC9yZXF1ZXN0UHJlc2V0cy5qc1wiO2NvbnN0IGE9bmV3IFNldChbXCJDYXRhbG9nIExheWVyXCIsXCJGZWF0dXJlIExheWVyXCIsXCJPcmllbnRlZCBJbWFnZXJ5IExheWVyXCJdKTthc3luYyBmdW5jdGlvbiBuKGEsbil7Y29uc3R7bG9hZENvbnRleHQ6cywuLi5vfT1ufHx7fSx5PXM/YXdhaXQgcy5mZXRjaFNlcnZpY2VNZXRhZGF0YShhLG8pOmF3YWl0IHQoYSxvKSxpPWUoKTt1KHkpLGMoeSk7Y29uc3QgbD17c2VydmljZUpTT046eSxwcmVmZXJyZWRIb3N0Oml9O2lmKCh5LmN1cnJlbnRWZXJzaW9uPz8wKTwxMC41KXJldHVybiBsO2NvbnN0IGY9YCR7cigpPz9hfS9sYXllcnNgLEw9cz9hd2FpdCBzLmZldGNoU2VydmljZU1ldGFkYXRhKGYsbyk6YXdhaXQgdChmLG8pO3JldHVybiB1KEwpLGMoTCksbC5sYXllcnNKU09OPXtsYXllcnM6TC5sYXllcnMsdGFibGVzOkwudGFibGVzfSxsfWZ1bmN0aW9uIHMoZSl7Y29uc3R7dHlwZTpyfT1lO3JldHVybiEhciYmYS5oYXMocil9ZnVuY3Rpb24gbyhlKXtyZXR1cm5cIlRhYmxlXCI9PT1lLnR5cGV9ZnVuY3Rpb24gYyhlKXtlLmxheWVycz1lLmxheWVycz8uZmlsdGVyKHMpLGUudGFibGVzPWUudGFibGVzPy5maWx0ZXIobyl9ZnVuY3Rpb24geShlKXtlLnR5cGV8fD1cIkZlYXR1cmUgTGF5ZXJcIn1mdW5jdGlvbiBpKGUpe2UudHlwZXx8PVwiVGFibGVcIn1mdW5jdGlvbiB1KGUpe2UubGF5ZXJzPy5mb3JFYWNoKHkpLGUudGFibGVzPy5mb3JFYWNoKGkpfWZ1bmN0aW9uIGwoZSl7c3dpdGNoKGUpe2Nhc2VcIkZlYXR1cmUgTGF5ZXJcIjpjYXNlXCJUYWJsZVwiOnJldHVyblwiRmVhdHVyZUxheWVyXCI7Y2FzZVwiT3JpZW50ZWQgSW1hZ2VyeSBMYXllclwiOnJldHVyblwiT3JpZW50ZWRJbWFnZXJ5TGF5ZXJcIjtjYXNlXCJDYXRhbG9nIExheWVyXCI6cmV0dXJuXCJDYXRhbG9nTGF5ZXJcIn1yZXR1cm5cIkZlYXR1cmVMYXllclwifWV4cG9ydHtuIGFzIGZldGNoRmVhdHVyZVNlcnZpY2UsbCBhcyBnZXRMYXllck1vZHVsZVR5cGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7cGFyc2UgYXMgdH1mcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9hcmNnaXNMYXllclVybC5qc1wiO2ltcG9ydHtmZXRjaEZlYXR1cmVTZXJ2aWNlIGFzIHJ9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmV0Y2hTZXJ2aWNlLmpzXCI7aW1wb3J0e0xheWVyTG9hZENvbnRleHQgYXMgYX1mcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9MYXllckxvYWRDb250ZXh0LmpzXCI7aW1wb3J0e2FwcGx5UHJlZmVycmVkSG9zdFRvUG9ydGFsSXRlbSBhcyBvLGdldFByZWZlcnJlZEhvc3QgYXMgbixpc1ByZWZlcnJlZFVybEFwcGxpY2FibGUgYXMgc31mcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9sYXllclV0aWxzLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi4vUG9ydGFsLmpzXCI7aW1wb3J0e2NyZWF0ZUZvckl0ZW1SZWFkIGFzIGl9ZnJvbVwiLi9qc29uQ29udGV4dC5qc1wiO2ltcG9ydHtpbnN0YW5jZVR5cGVUb0xheWVyVHlwZXMgYXMgcCxnZXRTdWJsYXllcnNCeUxheWVyVHlwZSBhcyB1LGdldEZpcnN0TGF5ZXJPclRhYmxlIGFzIGMscHJlcHJvY2Vzc0ZTSXRlbURhdGEgYXMgeSxwb3B1bGF0ZVNjZW5lU2VydmljZUl0ZW1EYXRhIGFzIGQsZ2V0TnVtTGF5ZXJzQW5kVGFibGVzIGFzIGYsbGF5ZXJUeXBlVG9MYXllck1vZHVsZVR5cGUgYXMgbSxjcmVhdGVTdWJsYXllckRhdGEgYXMgd31mcm9tXCIuL2xvYWRVdGlscy5qc1wiO2ltcG9ydHtoYXNUeXBlS2V5d29yZCBhcyBofWZyb21cIi4vcG9ydGFsSXRlbVV0aWxzLmpzXCI7aW1wb3J0e2xvYWRTdHlsZVJlbmRlcmVyIGFzIGd9ZnJvbVwiLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvc3R5bGVVdGlscy5qc1wiO2ltcG9ydHtmZXRjaEFyY0dJU1NlcnZpY2VKU09OIGFzIEl9ZnJvbVwiLi4vLi4vc3VwcG9ydC9yZXF1ZXN0UHJlc2V0cy5qc1wiO2FzeW5jIGZ1bmN0aW9uIGIoZSx0KXtjb25zdCByPWUuaW5zdGFuY2UucG9ydGFsSXRlbTtpZihyPy5pZClyZXR1cm4gYXdhaXQgci5sb2FkKHQpLHYoZSksZS52YWxpZGF0ZUl0ZW0mJmUudmFsaWRhdGVJdGVtKHIpLEwoZSx0KX1mdW5jdGlvbiB2KHQpe2NvbnN0IHI9dC5pbnN0YW5jZS5wb3J0YWxJdGVtO2lmKCFyPy50eXBlfHwhdC5zdXBwb3J0ZWRUeXBlcy5pbmNsdWRlcyhyLnR5cGUpKXRocm93IG5ldyBlKFwicG9ydGFsOmludmFsaWQtbGF5ZXItaXRlbS10eXBlXCIsXCJJbnZhbGlkIGxheWVyIGl0ZW0gdHlwZSAnJHt0eXBlfScsIGV4cGVjdGVkICcke2V4cGVjdGVkVHlwZX0nXCIse3R5cGU6cj8udHlwZSxleHBlY3RlZFR5cGU6dC5zdXBwb3J0ZWRUeXBlcy5qb2luKFwiLCBcIil9KX1hc3luYyBmdW5jdGlvbiBMKGUsdCl7Y29uc3Qgcj1lLmluc3RhbmNlLG89ci5wb3J0YWxJdGVtO2lmKCFvKXJldHVybjtsZXR7dXJsOm59PW87Y29uc3R7dGl0bGU6c309byxsPWkobyxcInBvcnRhbC1pdGVtXCIpO2lmKFwiZ3JvdXBcIj09PXIudHlwZSlyZXR1cm4gUyhyLGwsZSk7biYmXCJtZWRpYVwiIT09ci50eXBlJiZyLnJlYWQoe3VybDpufSxsKTtjb25zdCBwPW5ldyBhLHtkYXRhOnUscHJlZmVycmVkSG9zdDpjfT1hd2FpdCB4KGUscCx0KTtyZXR1cm4gbj1vLnVybCxcImlzVXJsSG9zdE1vZGlmaWVkXCJpbiByJiYoYz9yLmFwcGx5UHJlZmVycmVkSG9zdCh7cHJlZmVycmVkSG9zdDpjfSk6ci5hcHBseUhvc3RGcm9tUG9ydGFsSXRlbSgpKSx1JiZyLnJlYWQodSxsKSxyLnJlc291cmNlUmVmZXJlbmNlcz17cG9ydGFsSXRlbTpvLHBhdGhzOmwucmVhZFJlc291cmNlUGF0aHM/P1tdfSxcInN1YnR5cGUtZ3JvdXBcIiE9PXIudHlwZSYmci5yZWFkKHt0aXRsZTpzfSxsKSxnKHIsbCl9YXN5bmMgZnVuY3Rpb24gUyh0LHIsYSl7Y29uc3Qgbz10LnBvcnRhbEl0ZW07aWYoIXQuc291cmNlSXNQb3J0YWxJdGVtKXJldHVybjtjb25zdHt0aXRsZTpuLHR5cGU6c309bztpZihcIkdyb3VwIExheWVyXCI9PT1zKXtpZighaChvLFwiTWFwXCIpKXRocm93IG5ldyBlKFwicG9ydGFsOmludmFsaWQtbGF5ZXItaXRlbS10eXBla2V5d29yZFwiLFwiJ0dyb3VwIExheWVyJyBpdGVtIHdpdGhvdXQgJ01hcCcgdHlwZSBrZXl3b3JkIGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIFQodCxhKX1yZXR1cm4gdC5yZWFkKHt0aXRsZTpufSxyKSxqKHQsYSl9YXN5bmMgZnVuY3Rpb24gVCh0LHIpe2NvbnN0IGE9dC5wb3J0YWxJdGVtLG89YXdhaXQgYS5mZXRjaERhdGEoXCJqc29uXCIpO2lmKCFvKXJldHVybjtpZighci5wb3B1bGF0ZUdyb3VwTGF5ZXIpdGhyb3cgbmV3IGUoXCJwb3J0YWw6bWlzc2luZy1wb3B1bGF0ZS1ncm91cC1sYXllclwiLFwiTWlzc2luZyBwb3B1bGF0ZSBncm91cCBsYXllclwiKTtjb25zdCBuPWkoYSxcIndlYi1tYXBcIik7dC5yZWFkKG8sbiksYXdhaXQgci5wb3B1bGF0ZUdyb3VwTGF5ZXIodCxvLHtjb250ZXh0Om59KSx0LnJlc291cmNlUmVmZXJlbmNlcz17cG9ydGFsSXRlbTphLHBhdGhzOm4ucmVhZFJlc291cmNlUGF0aHM/P1tdfX1hc3luYyBmdW5jdGlvbiBqKHQscil7bGV0IG47Y29uc3R7cG9ydGFsSXRlbTpzfT10O2lmKCFzKXJldHVybjtjb25zdCBsPXMudHlwZSxpPXIubGF5ZXJNb2R1bGVUeXBlTWFwO2lmKCFpKXRocm93IG5ldyBlKFwicG9ydGFsOm1pc3NpbmctbGF5ZXItbW9kdWxlLXR5cGUtbWFwXCIsXCJMYXllciBtb2R1bGUgdHlwZSBtYXAgaXMgcmVxdWlyZWQgdG8gY29uc3RydWN0IHN1YiBsYXllcnNcIik7c3dpdGNoKGwpe2Nhc2VcIkZlYXR1cmUgU2VydmljZVwiOmNhc2VcIkZlYXR1cmUgQ29sbGVjdGlvblwiOm49aS5GZWF0dXJlTGF5ZXI7YnJlYWs7Y2FzZVwiU3RyZWFtIFNlcnZpY2VcIjpuPWkuU3RyZWFtTGF5ZXI7YnJlYWs7Y2FzZVwiU2NlbmUgU2VydmljZVwiOm49aS5TY2VuZUxheWVyO2JyZWFrO2Nhc2VcIlZpZGVvIFNlcnZpY2VcIjpuPWkuVmlkZW9MYXllcjticmVhaztkZWZhdWx0OnRocm93IG5ldyBlKFwicG9ydGFsOnVuc3VwcG9ydGVkLWl0ZW0tdHlwZS1hcy1ncm91cFwiLGBUaGUgaXRlbSB0eXBlICcke2x9JyBpcyBub3Qgc3VwcG9ydGVkIGFzIGEgJ0lHcm91cExheWVyJ2ApfWNvbnN0IHA9XCJWaWRlbyBTZXJ2aWNlXCI9PT1sLHU9bmV3IGE7bGV0W20se2RhdGE6d31dPWF3YWl0IFByb21pc2UuYWxsKFtuKCkscD97ZGF0YTpudWxsfTp4KHIsdSldKSxoPSgpPT5tO2lmKHApcmV0dXJuIEYodCxoLGkpO2lmKFwiRmVhdHVyZSBTZXJ2aWNlXCI9PT1sKXtjb25zdCBlPWModyk/LmN1c3RvbVBhcmFtZXRlcnM7dz1zLnVybD8oYXdhaXQgeSh3LHMudXJsLHUpKS5kYXRhOnt9LGg9YXdhaXQgRSh3LGkpfHxoO2NvbnN0e3Byb3ZpZGVyOnIscHJlZmVycmVkSG9zdDphfT1hd2FpdCBVKHMudXJsLHtjdXN0b21QYXJhbWV0ZXJzOmUsbG9hZENvbnRleHQ6dX0pO3JldHVybiBvKHMsYSksYXdhaXQgSCh0LGgsaCx3LGkscil9cmV0dXJuXCJTY2VuZSBTZXJ2aWNlXCI9PT1sJiZzLnVybCYmKHc9YXdhaXQgZChzLHcsdSkpLGYodyk+MD9hd2FpdCBIKHQsaCxudWxsLHcsaSk6YXdhaXQgUCh0LGgsaSl9YXN5bmMgZnVuY3Rpb24gUChlLHQscil7Y29uc3R7cG9ydGFsSXRlbTphfT1lO2lmKCFhPy51cmwpcmV0dXJuO2NvbnN0IG89YXdhaXQgSShhLnVybCk7byYmSChlLHQsbnVsbCx7bGF5ZXJzOm8ubGF5ZXJzPy5tYXAodyksdGFibGVzOm8udGFibGVzPy5tYXAodyl9LHIpfWFzeW5jIGZ1bmN0aW9uIEYoZSx0LHIpe2NvbnN0e3BvcnRhbEl0ZW06YX09ZTtpZighYT8udXJsKXJldHVybjtjb25zdCBvPWF3YWl0IEkoYS51cmwpO28mJkgoZSx0LG51bGwse2xheWVyczpvLmxheWVycz8ubWFwKCgoe2lkOmUsbmFtZTp0fSk9Pih7aWQ6ZSxuYW1lOnR9KSkpfSxyKX1hc3luYyBmdW5jdGlvbiBIKGUsdCxyLGEsbyxuKXtsZXQgcz1hLmxheWVyc3x8W107Y29uc3QgbD1hLnRhYmxlc3x8W107aWYoXCJGZWF0dXJlIENvbGxlY3Rpb25cIj09PWUucG9ydGFsSXRlbT8udHlwZT8ocy5mb3JFYWNoKCgoZSx0KT0+e2UuaWQ9dCxcIlRhYmxlXCI9PT1lPy5sYXllckRlZmluaXRpb24/LnR5cGUmJmwucHVzaChlKX0pKSxzPXMuZmlsdGVyKChlPT5cIlRhYmxlXCIhPT1lPy5sYXllckRlZmluaXRpb24/LnR5cGUpKSk6KHMucmV2ZXJzZSgpLGwucmV2ZXJzZSgpKSxzLmZvckVhY2goKHI9Pntjb25zdCBvPW4/LihyKTtpZihvfHwhbil7Y29uc3Qgbj1NKGUsdChyKSxhLHIsbyk7ZS5hZGQobil9fSkpLGwubGVuZ3RoKXtjb25zdCB0PXI/bnVsbDphd2FpdCBvLkZlYXR1cmVMYXllcigpO2wuZm9yRWFjaCgobz0+e2NvbnN0IHM9bj8uKG8pO2lmKHN8fCFuKXtjb25zdCBuPU0oZSxyP3Iobyk6dCxhLG8scyk7ZS50YWJsZXMuYWRkKG4pfX0pKX19ZnVuY3Rpb24gTShlLHQscixhLG8pe2NvbnN0IG49ZS5wb3J0YWxJdGVtLHM9e3BvcnRhbEl0ZW06bi5jbG9uZSgpLGxheWVySWQ6YS5pZH07bnVsbCE9YS51cmwmJihzLnVybD1hLnVybCk7Y29uc3QgaT1uZXcgdChzKTtpZihcInNvdXJjZUpTT05cImluIGkmJihpLnNvdXJjZUpTT049byksXCJzdWJ0eXBlLWdyb3VwXCIhPT1pLnR5cGUmJlwiY2F0YWxvZ1wiIT09aS50eXBlJiYoaS5zdWJsYXllclRpdGxlTW9kZT1cInNlcnZpY2UtbmFtZVwiKSxcIkZlYXR1cmUgQ29sbGVjdGlvblwiPT09bi50eXBlKXtjb25zdCBlPXtvcmlnaW46XCJwb3J0YWwtaXRlbVwiLHBvcnRhbDpuLnBvcnRhbHx8bC5nZXREZWZhdWx0KCl9O2kucmVhZChhLGUpO2NvbnN0IHQ9ci5zaG93TGVnZW5kO251bGwhPXQmJmkucmVhZCh7c2hvd0xlZ2VuZDp0fSxlKX1yZXR1cm4gaX1hc3luYyBmdW5jdGlvbiB4KGUsdCxyKXtpZighMT09PWUuc3VwcG9ydHNEYXRhKXJldHVybntkYXRhOnZvaWQgMH07Y29uc3QgYT1lLmluc3RhbmNlLG49YS5wb3J0YWxJdGVtO2lmKCFuKXJldHVybntkYXRhOnZvaWQgMH07bGV0IHM9bnVsbDt0cnl7cz1hd2FpdCBuLmZldGNoRGF0YShcImpzb25cIixyKX1jYXRjaChsKXt9aWYoQyhhKSl7bGV0IGU9bnVsbDtjb25zdHtjb3VudDpyLHByZWZlcnJlZEhvc3Q6bH09YXdhaXQgRyhuLHMsdCk7aWYobyhuLGwpLChzPy5sYXllcnN8fHM/LnRhYmxlcykmJnI+MCl7aWYobnVsbD09YS5sYXllcklkKXtjb25zdCBlPXAoYS50eXBlKSx0PWU/Lmxlbmd0aD91KHMsZSlbMF06YyhzKTt0JiYoYS5sYXllcklkPXQuaWQpfWU9ayhzLGEpLFwiT3JpZW50ZWRJbWFnZXJ5TGF5ZXJcIj09PWU/LmxheWVyVHlwZSYmXCJvcmllbnRlZC1pbWFnZXJ5XCI9PT1hLnR5cGUmJmEuc3VwcG9ydGVkU291cmNlVHlwZXMuYWRkKFwiRmVhdHVyZSBMYXllclwiKSxlJiZudWxsIT1zLnNob3dMZWdlbmQmJihlLnNob3dMZWdlbmQ9cy5zaG93TGVnZW5kKX1yZXR1cm4gcj4xJiZcInN1YmxheWVyVGl0bGVNb2RlXCJpbiBhJiZcInNlcnZpY2UtbmFtZVwiIT09YS5zdWJsYXllclRpdGxlTW9kZSYmKGEuc3VibGF5ZXJUaXRsZU1vZGU9XCJpdGVtLXRpdGxlLWFuZC1zZXJ2aWNlLW5hbWVcIikse2RhdGE6ZSxwcmVmZXJyZWRIb3N0Omx9fXJldHVybntkYXRhOnN9fWFzeW5jIGZ1bmN0aW9uIEcoZSxyLGEpe2lmKHI/LmxheWVycyYmcj8udGFibGVzKXJldHVybntjb3VudDpmKHIpfTtjb25zdCBvPXQoZS51cmwpO2lmKCFvKXJldHVybntjb3VudDoxfTtjb25zdCBsPW8udXJsLnBhdGgsaT1hd2FpdCBhLmZldGNoU2VydmljZU1ldGFkYXRhKGwse2N1c3RvbVBhcmFtZXRlcnM6YyhyKT8uY3VzdG9tUGFyYW1ldGVyc30pLmNhdGNoKCgoKT0+bnVsbCkpO3JldHVybntjb3VudDoocj8ubGF5ZXJzPy5sZW5ndGg/P2k/LmxheWVycz8ubGVuZ3RoPz8wKSsocj8udGFibGVzPy5sZW5ndGg/P2k/LnRhYmxlcz8ubGVuZ3RoPz8wKSxwcmVmZXJyZWRIb3N0OnMoZSk/bigpOm51bGx9fWZ1bmN0aW9uIGsoZSx0KXtjb25zdHtsYXllcklkOnJ9PXQsYT1lLmxheWVycz8uZmluZCgoZT0+ZS5pZD09PXIpKXx8ZS50YWJsZXM/LmZpbmQoKGU9PmUuaWQ9PT1yKSk7cmV0dXJuIGEmJkQoYSx0KT9hOm51bGx9ZnVuY3Rpb24gQyhlKXtyZXR1cm5cInN0cmVhbVwiIT09ZS50eXBlJiZcImxheWVySWRcImluIGV9ZnVuY3Rpb24gRChlLHQpe2NvbnN0IHI9XCJsYXllclR5cGVcImluIGUmJmUubGF5ZXJUeXBlLHt0eXBlOmF9PXQ7cmV0dXJuIShcImZlYXR1cmVcIj09PWEmJnImJlwiQXJjR0lTRmVhdHVyZUxheWVyXCIhPT1lLmxheWVyVHlwZXx8XCJjYXRhbG9nXCI9PT1hJiYhcnx8XCJvcmllbnRlZC1pbWFnZXJ5XCI9PT1hJiYhcnx8XCJzdWJ0eXBlLWdyb3VwXCI9PT1hJiYhcil9YXN5bmMgZnVuY3Rpb24gVShlLHQpe2NvbnN0e2xheWVyc0pTT046YSxwcmVmZXJyZWRIb3N0Om99PWF3YWl0IHIoZSx0KTtpZighYSlyZXR1cm57cHJvdmlkZXI6bnVsbCxwcmVmZXJyZWRIb3N0Om99O2NvbnN0IG49Wy4uLmEubGF5ZXJzLC4uLmEudGFibGVzXTtyZXR1cm57cHJvdmlkZXI6ZT0+bi5maW5kKCh0PT50LmlkPT09ZS5pZCkpLHByZWZlcnJlZEhvc3Q6b319YXN5bmMgZnVuY3Rpb24gRShlLHQpe2NvbnN0e2xheWVyczpyLHRhYmxlczphfT1lLG89Wy4uLnI/P1tdLC4uLmE/P1tdXTtpZighby5sZW5ndGgpcmV0dXJuO2NvbnN0IG49bmV3IFNldCxzPVtdO2Zvcihjb25zdHtsYXllclR5cGU6cH1vZiBvKXtjb25zdCBlPXA/P1wiQXJjR0lTRmVhdHVyZUxheWVyXCI7aWYobi5oYXMoZSkpY29udGludWU7bi5hZGQoZSk7Y29uc3Qgcj10W20oZSldO3MucHVzaChyKCkpfWNvbnN0IGw9YXdhaXQgUHJvbWlzZS5hbGwocyksaT1uZXcgTWFwO3JldHVybiBBcnJheS5mcm9tKG4pLmZvckVhY2goKChlLHQpPT57aS5zZXQoZSxsW3RdKX0pKSwoe2xheWVyVHlwZTplfSk9Pntjb25zdCB0PWU/P1wiQXJjR0lTRmVhdHVyZUxheWVyXCI7cmV0dXJuIGkuZ2V0KHQpfX1leHBvcnR7YiBhcyBsb2FkfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZmluZEFzc29jaWF0ZWRGZWF0dXJlU2VydmljZSBhcyBlfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2Fzc29jaWF0ZWRGZWF0dXJlU2VydmljZVV0aWxzLmpzXCI7aW1wb3J0e2dldExheWVyTW9kdWxlVHlwZSBhcyByfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2ZldGNoU2VydmljZS5qc1wiO2ltcG9ydHtnZXRQcmVmZXJyZWRIb3N0IGFzIHR9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvbGF5ZXJVdGlscy5qc1wiO2Z1bmN0aW9uIGEoZSl7Y29uc3QgdD17aWQ6ZS5pZCxuYW1lOmUubmFtZX0sYT1yKGUudHlwZSk7cmV0dXJuXCJGZWF0dXJlTGF5ZXJcIiE9PWEmJih0LmxheWVyVHlwZT1hKSx0fWFzeW5jIGZ1bmN0aW9uIGwoZSxyLGwpe2xldCBuO2lmKG51bGw9PWU/LmxheWVyc3x8bnVsbD09ZT8udGFibGVzKXtjb25zdCB1PWF3YWl0IGwuZmV0Y2hTZXJ2aWNlTWV0YWRhdGEocix7Y3VzdG9tUGFyYW1ldGVyczpzKGUpPy5jdXN0b21QYXJhbWV0ZXJzfSk7bj10KCksKGU9ZXx8e30pLmxheWVycz1lLmxheWVyc3x8dT8ubGF5ZXJzPy5tYXAoYSksZS50YWJsZXM9ZS50YWJsZXN8fHU/LnRhYmxlcz8ubWFwKGEpfXJldHVybntkYXRhOmUscHJlZmVycmVkSG9zdDpufX1mdW5jdGlvbiBzKGUpe2lmKCFlKXJldHVybiBudWxsO2NvbnN0e2xheWVyczpyLHRhYmxlczp0fT1lO3JldHVybiByPy5sZW5ndGg/clswXTp0Py5sZW5ndGg/dFswXTpudWxsfWZ1bmN0aW9uIG4oZSxyKXtpZihudWxsPT1yKXJldHVybiBudWxsO3JldHVyblsuLi5lLmxheWVyc3x8W10sLi4uZS50YWJsZXN8fFtdXS5maW5kKChlPT5lLmlkPT09cikpfWZ1bmN0aW9uIHUoZSxyKXtyZXR1cm5bLi4uZS5sYXllcnN8fFtdLC4uLmUudGFibGVzfHxbXV0uZmlsdGVyKCgoe2xheWVyVHlwZTplfSk9PmU/ci5pbmNsdWRlcyhlKTpyLmluY2x1ZGVzKFwiQXJjR0lTRmVhdHVyZUxheWVyXCIpKSl9ZnVuY3Rpb24gYyhlKXtyZXR1cm4oZT8ubGF5ZXJzPy5sZW5ndGg/PzApKyhlPy50YWJsZXM/Lmxlbmd0aD8/MCl9ZnVuY3Rpb24gbyhlKXtzd2l0Y2goZSl7Y2FzZVwiY2F0YWxvZ1wiOnJldHVybltcIkNhdGFsb2dMYXllclwiXTtjYXNlXCJmZWF0dXJlXCI6cmV0dXJuW1wiQXJjR0lTRmVhdHVyZUxheWVyXCJdO2Nhc2VcIm9yaWVudGVkLWltYWdlcnlcIjpyZXR1cm5bXCJPcmllbnRlZEltYWdlcnlMYXllclwiXTtjYXNlXCJzdWJ0eXBlLWdyb3VwXCI6cmV0dXJuW1wiU3VidHlwZUdyb3VwTGF5ZXJcIixcIlN1YnR5cGVHcm91cFRhYmxlXCJdfXJldHVybiBudWxsfWZ1bmN0aW9uIGkoZSl7c3dpdGNoKGUpe2Nhc2VcIkNhdGFsb2dMYXllclwiOnJldHVyblwiQ2F0YWxvZ0xheWVyXCI7Y2FzZVwiT3JpZW50ZWRJbWFnZXJ5TGF5ZXJcIjpyZXR1cm5cIk9yaWVudGVkSW1hZ2VyeUxheWVyXCI7Y2FzZVwiU3VidHlwZUdyb3VwTGF5ZXJcIjpjYXNlXCJTdWJ0eXBlR3JvdXBUYWJsZVwiOnJldHVyblwiU3VidHlwZUdyb3VwTGF5ZXJcIn1yZXR1cm5cIkZlYXR1cmVMYXllclwifWFzeW5jIGZ1bmN0aW9uIHkocix0LGwpe2lmKCFyPy51cmwpcmV0dXJuIHQ/P3t9O2lmKHQ/Pz17fSwhdC5sYXllcnMpe2NvbnN0IGU9YXdhaXQgbC5mZXRjaFNlcnZpY2VNZXRhZGF0YShyLnVybCk7dC5sYXllcnM9ZS5sYXllcnM/Lm1hcChhKX1jb25zdHtzZXJ2ZXJVcmw6bixwb3J0YWxJdGVtOnV9PWF3YWl0IGUoci51cmwse3NjZW5lTGF5ZXJJdGVtOnIsY3VzdG9tUGFyYW1ldGVyczpzKHQpPy5jdXN0b21QYXJhbWV0ZXJzfSkuY2F0Y2goKCgpPT4oe3NlcnZlclVybDpudWxsLHBvcnRhbEl0ZW06bnVsbH0pKSk7aWYobnVsbD09bilyZXR1cm4gdC50YWJsZXM9W10sdDtpZighdC50YWJsZXMmJnUpe2NvbnN0IGU9YXdhaXQgdS5mZXRjaERhdGEoKS5jYXRjaCgoKCk9Pm51bGwpKTtpZihlPy50YWJsZXMpdC50YWJsZXM9ZS50YWJsZXMubWFwKGEpO2Vsc2V7Y29uc3Qgcj1hd2FpdCBsLmZldGNoU2VydmljZU1ldGFkYXRhKG4se2N1c3RvbVBhcmFtZXRlcnM6cyhlKT8uY3VzdG9tUGFyYW1ldGVyc30pLmNhdGNoKCgoKT0+bnVsbCkpO3QudGFibGVzPXI/LnRhYmxlcz8ubWFwKGEpfX1pZih0LnRhYmxlcylmb3IoY29uc3QgZSBvZiB0LnRhYmxlcyllLnVybD1gJHtufS8ke2UuaWR9YDtyZXR1cm4gdH1leHBvcnR7YSBhcyBjcmVhdGVTdWJsYXllckRhdGEscyBhcyBnZXRGaXJzdExheWVyT3JUYWJsZSxuIGFzIGdldExheWVyT3JUYWJsZSxjIGFzIGdldE51bUxheWVyc0FuZFRhYmxlcyx1IGFzIGdldFN1YmxheWVyc0J5TGF5ZXJUeXBlLG8gYXMgaW5zdGFuY2VUeXBlVG9MYXllclR5cGVzLGkgYXMgbGF5ZXJUeXBlVG9MYXllck1vZHVsZVR5cGUseSBhcyBwb3B1bGF0ZVNjZW5lU2VydmljZUl0ZW1EYXRhLGwgYXMgcHJlcHJvY2Vzc0ZTSXRlbURhdGF9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uL3JlcXVlc3QuanNcIjthc3luYyBmdW5jdGlvbiB0KHQsbyl7Y29uc3R7ZGF0YTpyfT1hd2FpdCBlKHQse3Jlc3BvbnNlVHlwZTpcImpzb25cIixxdWVyeTp7ZjpcImpzb25cIiwuLi5vPy5jdXN0b21QYXJhbWV0ZXJzLHRva2VuOm8/LmFwaUtleX19KTtyZXR1cm4gcn1leHBvcnR7dCBhcyBmZXRjaEFyY0dJU1NlcnZpY2VKU09OfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==