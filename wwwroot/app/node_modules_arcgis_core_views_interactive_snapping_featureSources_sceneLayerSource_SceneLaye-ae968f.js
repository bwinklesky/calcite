export const __webpack_id__ = "node_modules_arcgis_core_views_interactive_snapping_featureSources_sceneLayerSource_SceneLaye-ae968f";
export const __webpack_ids__ = ["node_modules_arcgis_core_views_interactive_snapping_featureSources_sceneLayerSource_SceneLaye-ae968f"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js":
/*!********************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js ***!
  \********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../geometry/support/lineSegment.js */ "./node_modules/@arcgis/core/geometry/support/lineSegment.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _3d_webgl_engine_lib_Octree_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../3d/webgl-engine/lib/Octree.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js");
/* harmony import */ var _3d_webgl_engine_lib_edgeRendering_edgeProcessing_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing.js");
/* harmony import */ var _sceneLayerSnappingUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./sceneLayerSnappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let f=class{constructor(){this._idToComponent=new Map,this._components=new _3d_webgl_engine_lib_Octree_js__WEBPACK_IMPORTED_MODULE_11__["default"]((e=>e.bounds)),this._edges=new _3d_webgl_engine_lib_Octree_js__WEBPACK_IMPORTED_MODULE_11__["default"]((e=>e.bounds)),this._tmpLineSegment=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__.create)(),this._tmpP1=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.create)(),this._tmpP2=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.create)(),this._tmpP3=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.create)(),this.remoteClient=null}async fetchCandidates(e,o){await Promise.resolve(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAborted)(o),await this._ensureEdgeLocations(e,o);const s=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,s),s.length<_sceneLayerSnappingUtils_js__WEBPACK_IMPORTED_MODULE_13__.maxCandidateCount)),e.bounds),{result:{candidates:s}}}async _ensureEdgeLocations(e,t){const o=[];if(this._components.forEachNeighbor((e=>{if(null==e.info){const{id:t,uid:s}=e;o.push({id:t,uid:s})}return!0}),e.bounds),!o.length)return;const s={components:o},n=await this.remoteClient.invoke("fetchAllEdgeLocations",s,t??{});for(const i of n.components)this._setFetchEdgeLocations(i)}async add(e){const t=new j(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((o=>(o.component===t&&e.push(o),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const t=this._idToComponent.get(e.id);if(null==t||e.uid!==t.uid)return;const o=_3d_webgl_engine_lib_edgeRendering_edgeProcessing_js__WEBPACK_IMPORTED_MODULE_12__.extractComponentsEdgeLocationsLayout.createView(e.locations),s=new Array(o.count),n=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.create)(),r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.create)();for(let i=0;i<o.count;i++){o.position0.getVec(i,n),o.position1.getVec(i,r);const c=(0,_sceneLayerSnappingUtils_js__WEBPACK_IMPORTED_MODULE_13__.boundsFromEdge)(n,r,e.origin),d=new w(t,i,c);s[i]=d}this._edges.add(s);const{objectIds:c,origin:d}=e;t.info={locations:o,objectIds:c,origin:d}}_addCandidates(e,t,o){const{info:n}=t.component,{origin:i,objectIds:r}=n,c=n.locations,d=c.position0.getVec(t.index,this._tmpP1),a=c.position1.getVec(t.index,this._tmpP2);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__.f)(d,d,i),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__.f)(a,a,i);const p=r[c.componentIndex.get(t.index)];this._addEdgeCandidate(e,p,d,a,o),b(e,p,d,o),b(e,p,a,o)}_addEdgeCandidate(e,t,o,s,i){if(!e.returnEdge)return;const c=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__.a)(e.bounds),u=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__.fromPoints)(o,s,this._tmpLineSegment),h=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__.projectPoint)(u,c,this._tmpP3);(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__.o)(e.bounds,h)&&i.push({type:"edge",objectId:t,target:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.clone)(h),distance:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__.j)(c,h),start:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.clone)(o),end:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.clone)(s)})}};f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],f);const _=f;function b(e,t,o,s){if(!e.returnVertex||!(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__.o)(e.bounds,o))return;const i=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__.a)(e.bounds);s.push({type:"vertex",objectId:t,target:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.clone)(o),distance:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__.j)(i,o)})}class j{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++j.uid}static{this.uid=0}}class w{constructor(e,t,o){this.component=e,this.index=t,this.bounds=o}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js":
/*!*************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js ***!
  \*************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   boundsFromEdge: () => (/* binding */ a),
/* harmony export */   maxCandidateCount: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t=1e3;function a(t,a,e){const f=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_1__.c)(),m=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_1__.a)(f);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.b)(m,m,t,.5),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.b)(m,m,a,.5),f[3]=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.j)(m,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.f)(m,m,e),f}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzX2ludGVyYWN0aXZlX3NuYXBwaW5nX2ZlYXR1cmVTb3VyY2VzX3NjZW5lTGF5ZXJTb3VyY2VfU2NlbmVMYXllLWFlOTY4Zi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDMjZCLFlBQVksY0FBYyxpREFBaUQsdUVBQUMsZ0NBQWdDLHVFQUFDLHFDQUFxQyx3RUFBQyxlQUFlLG1GQUFDLGVBQWUsbUZBQUMsZUFBZSxtRkFBQywwQkFBMEIsMkJBQTJCLHdCQUF3QixxRUFBQyx5Q0FBeUMsV0FBVyw0RUFBNEUsMkVBQUMsY0FBYyxRQUFRLGVBQWUsZ0NBQWdDLFdBQVcseUNBQXlDLGlCQUFpQixNQUFNLFdBQVcsR0FBRyxRQUFRLFdBQVcsRUFBRSxTQUFTLDZCQUE2QixTQUFTLGFBQWEsaUVBQWlFLEVBQUUsMkRBQTJELGFBQWEsNkJBQTZCLGtFQUFrRSxXQUFXLGdCQUFnQixzQ0FBc0MsTUFBTSxXQUFXLCtKQUErSixPQUFPLFdBQVcsMEJBQTBCLHNDQUFzQyxpQ0FBaUMsUUFBUSx1SEFBQyxnREFBZ0QsbUZBQUMsS0FBSyxtRkFBQyxHQUFHLFlBQVksVUFBVSxLQUFLLGdEQUFnRCxRQUFRLDRFQUFDLDhCQUE4QixPQUFPLG1CQUFtQixNQUFNLHFCQUFxQixHQUFHLFFBQVEsa0NBQWtDLHNCQUFzQixNQUFNLE9BQU8sY0FBYyxxQkFBcUIscUdBQXFHLG1EQUFDLFFBQVEsbURBQUMsUUFBUSx5Q0FBeUMsd0RBQXdELDZCQUE2Qix3QkFBd0IsUUFBUSxxREFBQyxhQUFhLDRFQUFDLDZCQUE2Qiw4RUFBQyxrQkFBa0IscURBQUMsc0JBQXNCLDhCQUE4QixrRkFBQyxhQUFhLG1EQUFDLFlBQVksa0ZBQUMsUUFBUSxrRkFBQyxJQUFJLElBQUksRUFBRSx1REFBQyxFQUFFLHNGQUFDLHVHQUF1RyxVQUFVLG9CQUFvQixxQkFBcUIscURBQUMsb0JBQW9CLFFBQVEscURBQUMsV0FBVyxRQUFRLGdDQUFnQyxrRkFBQyxhQUFhLG1EQUFDLE1BQU0sRUFBRSxRQUFRLGlCQUFpQix3REFBd0QsT0FBTyxZQUFZLFFBQVEsbUJBQW1CLDZDQUFrRTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnQxRztBQUNBO0FBQ0E7QUFDQTtBQUN1SCxZQUFZLGtCQUFrQixRQUFRLG9EQUFDLEtBQUssb0RBQUMsSUFBSSxPQUFPLG1EQUFDLFdBQVcsbURBQUMsZ0JBQWdCLG1EQUFDLE1BQU0sbURBQUMsVUFBNkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvZmVhdHVyZVNvdXJjZXMvc2NlbmVMYXllclNvdXJjZS9TY2VuZUxheWVyU25hcHBpbmdTb3VyY2VXb3JrZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2ludGVyYWN0aXZlL3NuYXBwaW5nL2ZlYXR1cmVTb3VyY2VzL3NjZW5lTGF5ZXJTb3VyY2Uvc2NlbmVMYXllclNuYXBwaW5nVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRlZCBhcyB0fWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvUmFuZG9tTENHLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtmIGFzIHMsaiBhcyBufWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgaSxjbG9uZSBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjM2Y2NC5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgYyxmcm9tUG9pbnRzIGFzIGQscHJvamVjdFBvaW50IGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9saW5lU2VnbWVudC5qc1wiO2ltcG9ydHthIGFzIHAsbyBhcyBtfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi8uLi8uLi8uLi8zZC93ZWJnbC1lbmdpbmUvbGliL09jdHJlZS5qc1wiO2ltcG9ydHtleHRyYWN0Q29tcG9uZW50c0VkZ2VMb2NhdGlvbnNMYXlvdXQgYXMgaH1mcm9tXCIuLi8uLi8uLi8uLi8zZC93ZWJnbC1lbmdpbmUvbGliL2VkZ2VSZW5kZXJpbmcvZWRnZVByb2Nlc3NpbmcuanNcIjtpbXBvcnR7bWF4Q2FuZGlkYXRlQ291bnQgYXMgZyxib3VuZHNGcm9tRWRnZSBhcyBsfWZyb21cIi4vc2NlbmVMYXllclNuYXBwaW5nVXRpbHMuanNcIjtsZXQgZj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2lkVG9Db21wb25lbnQ9bmV3IE1hcCx0aGlzLl9jb21wb25lbnRzPW5ldyB1KChlPT5lLmJvdW5kcykpLHRoaXMuX2VkZ2VzPW5ldyB1KChlPT5lLmJvdW5kcykpLHRoaXMuX3RtcExpbmVTZWdtZW50PWMoKSx0aGlzLl90bXBQMT1pKCksdGhpcy5fdG1wUDI9aSgpLHRoaXMuX3RtcFAzPWkoKSx0aGlzLnJlbW90ZUNsaWVudD1udWxsfWFzeW5jIGZldGNoQ2FuZGlkYXRlcyhlLG8pe2F3YWl0IFByb21pc2UucmVzb2x2ZSgpLHQobyksYXdhaXQgdGhpcy5fZW5zdXJlRWRnZUxvY2F0aW9ucyhlLG8pO2NvbnN0IHM9W107cmV0dXJuIHRoaXMuX2VkZ2VzLmZvckVhY2hOZWlnaGJvcigodD0+KHRoaXMuX2FkZENhbmRpZGF0ZXMoZSx0LHMpLHMubGVuZ3RoPGcpKSxlLmJvdW5kcykse3Jlc3VsdDp7Y2FuZGlkYXRlczpzfX19YXN5bmMgX2Vuc3VyZUVkZ2VMb2NhdGlvbnMoZSx0KXtjb25zdCBvPVtdO2lmKHRoaXMuX2NvbXBvbmVudHMuZm9yRWFjaE5laWdoYm9yKChlPT57aWYobnVsbD09ZS5pbmZvKXtjb25zdHtpZDp0LHVpZDpzfT1lO28ucHVzaCh7aWQ6dCx1aWQ6c30pfXJldHVybiEwfSksZS5ib3VuZHMpLCFvLmxlbmd0aClyZXR1cm47Y29uc3Qgcz17Y29tcG9uZW50czpvfSxuPWF3YWl0IHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcImZldGNoQWxsRWRnZUxvY2F0aW9uc1wiLHMsdD8/e30pO2Zvcihjb25zdCBpIG9mIG4uY29tcG9uZW50cyl0aGlzLl9zZXRGZXRjaEVkZ2VMb2NhdGlvbnMoaSl9YXN5bmMgYWRkKGUpe2NvbnN0IHQ9bmV3IGooZS5pZCxlLmJvdW5kcyk7cmV0dXJuIHRoaXMuX2lkVG9Db21wb25lbnQuc2V0KHQuaWQsdCksdGhpcy5fY29tcG9uZW50cy5hZGQoW3RdKSx7cmVzdWx0Ont9fX1hc3luYyByZW1vdmUoZSl7Y29uc3QgdD10aGlzLl9pZFRvQ29tcG9uZW50LmdldChlLmlkKTtpZih0KXtjb25zdCBlPVtdO3RoaXMuX2VkZ2VzLmZvckVhY2hOZWlnaGJvcigobz0+KG8uY29tcG9uZW50PT09dCYmZS5wdXNoKG8pLCEwKSksdC5ib3VuZHMpLHRoaXMuX2VkZ2VzLnJlbW92ZShlKSx0aGlzLl9jb21wb25lbnRzLnJlbW92ZShbdF0pLHRoaXMuX2lkVG9Db21wb25lbnQuZGVsZXRlKHQuaWQpfXJldHVybntyZXN1bHQ6e319fV9zZXRGZXRjaEVkZ2VMb2NhdGlvbnMoZSl7Y29uc3QgdD10aGlzLl9pZFRvQ29tcG9uZW50LmdldChlLmlkKTtpZihudWxsPT10fHxlLnVpZCE9PXQudWlkKXJldHVybjtjb25zdCBvPWguY3JlYXRlVmlldyhlLmxvY2F0aW9ucykscz1uZXcgQXJyYXkoby5jb3VudCksbj1pKCkscj1pKCk7Zm9yKGxldCBpPTA7aTxvLmNvdW50O2krKyl7by5wb3NpdGlvbjAuZ2V0VmVjKGksbiksby5wb3NpdGlvbjEuZ2V0VmVjKGkscik7Y29uc3QgYz1sKG4scixlLm9yaWdpbiksZD1uZXcgdyh0LGksYyk7c1tpXT1kfXRoaXMuX2VkZ2VzLmFkZChzKTtjb25zdHtvYmplY3RJZHM6YyxvcmlnaW46ZH09ZTt0LmluZm89e2xvY2F0aW9uczpvLG9iamVjdElkczpjLG9yaWdpbjpkfX1fYWRkQ2FuZGlkYXRlcyhlLHQsbyl7Y29uc3R7aW5mbzpufT10LmNvbXBvbmVudCx7b3JpZ2luOmksb2JqZWN0SWRzOnJ9PW4sYz1uLmxvY2F0aW9ucyxkPWMucG9zaXRpb24wLmdldFZlYyh0LmluZGV4LHRoaXMuX3RtcFAxKSxhPWMucG9zaXRpb24xLmdldFZlYyh0LmluZGV4LHRoaXMuX3RtcFAyKTtzKGQsZCxpKSxzKGEsYSxpKTtjb25zdCBwPXJbYy5jb21wb25lbnRJbmRleC5nZXQodC5pbmRleCldO3RoaXMuX2FkZEVkZ2VDYW5kaWRhdGUoZSxwLGQsYSxvKSxiKGUscCxkLG8pLGIoZSxwLGEsbyl9X2FkZEVkZ2VDYW5kaWRhdGUoZSx0LG8scyxpKXtpZighZS5yZXR1cm5FZGdlKXJldHVybjtjb25zdCBjPXAoZS5ib3VuZHMpLHU9ZChvLHMsdGhpcy5fdG1wTGluZVNlZ21lbnQpLGg9YSh1LGMsdGhpcy5fdG1wUDMpO20oZS5ib3VuZHMsaCkmJmkucHVzaCh7dHlwZTpcImVkZ2VcIixvYmplY3RJZDp0LHRhcmdldDpyKGgpLGRpc3RhbmNlOm4oYyxoKSxzdGFydDpyKG8pLGVuZDpyKHMpfSl9fTtmPWUoW28oXCJlc3JpLnZpZXdzLmludGVyYWN0aXZlLnNuYXBwaW5nLmZlYXR1cmVTb3VyY2VzLnNjZW5lTGF5ZXJTb3VyY2UuU2NlbmVMYXllclNuYXBwaW5nU291cmNlV29ya2VyXCIpXSxmKTtjb25zdCBfPWY7ZnVuY3Rpb24gYihlLHQsbyxzKXtpZighZS5yZXR1cm5WZXJ0ZXh8fCFtKGUuYm91bmRzLG8pKXJldHVybjtjb25zdCBpPXAoZS5ib3VuZHMpO3MucHVzaCh7dHlwZTpcInZlcnRleFwiLG9iamVjdElkOnQsdGFyZ2V0OnIobyksZGlzdGFuY2U6bihpLG8pfSl9Y2xhc3Mgantjb25zdHJ1Y3RvcihlLHQpe3RoaXMuaWQ9ZSx0aGlzLmJvdW5kcz10LHRoaXMuaW5mbz1udWxsLHRoaXMudWlkPSsrai51aWR9c3RhdGlje3RoaXMudWlkPTB9fWNsYXNzIHd7Y29uc3RydWN0b3IoZSx0LG8pe3RoaXMuY29tcG9uZW50PWUsdGhpcy5pbmRleD10LHRoaXMuYm91bmRzPW99fWV4cG9ydHtfIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtiIGFzIHMsaiBhcyBvLGYgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdmVjMzIuanNcIjtpbXBvcnR7YyxhIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY2h1bmtzL3NwaGVyZS5qc1wiO2NvbnN0IHQ9MWUzO2Z1bmN0aW9uIGEodCxhLGUpe2NvbnN0IGY9YygpLG09bihmKTtyZXR1cm4gcyhtLG0sdCwuNSkscyhtLG0sYSwuNSksZlszXT1vKG0sdCkscihtLG0sZSksZn1leHBvcnR7YSBhcyBib3VuZHNGcm9tRWRnZSx0IGFzIG1heENhbmRpZGF0ZUNvdW50fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==