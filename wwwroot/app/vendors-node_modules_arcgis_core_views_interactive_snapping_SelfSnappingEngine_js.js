export const __webpack_id__ = "vendors-node_modules_arcgis_core_views_interactive_snapping_SelfSnappingEngine_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_views_interactive_snapping_SelfSnappingEngine_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/LineSnapper.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/LineSnapper.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LineSnapper: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Cyclical.js */ "./node_modules/@arcgis/core/core/Cyclical.js");
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/quantityUtils.js */ "./node_modules/@arcgis/core/core/quantityUtils.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sketch/normalizedPoint.js */ "./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js");
/* harmony import */ var _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SnappingAlgorithm.js */ "./node_modules/@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/* harmony import */ var _candidates_LineSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./candidates/LineSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/LineSnappingCandidate.js");
/* harmony import */ var _support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/viewUtils.js */ "./node_modules/@arcgis/core/views/interactive/support/viewUtils.js");
/* harmony import */ var _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/angularMeasurementUtils.js */ "./node_modules/@arcgis/core/views/support/angularMeasurementUtils.js");
/* harmony import */ var _support_geometry3dUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../support/geometry3dUtils.js */ "./node_modules/@arcgis/core/views/support/geometry3dUtils.js");
/* harmony import */ var _support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../support/geometry2dUtils.js */ "./node_modules/@arcgis/core/views/support/geometry2dUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class E extends _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_5__.SnappingAlgorithm{constructor(e,t,s){super(e,t),this._geodesicLengthMeasurementUtils=s}snapNewVertex(e,t){const s=t.editGeometryOperations.data.components[0],r=s.edges.length,i=[];if(r<1)return i;const{spatialReference:n}=t,a=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__.vectorToScreenPoint)(e,n,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__.absoluteHeightElevationInfo,this.view),{view:d}=this,l=s.edges[r-1];let h=l;do{if(this.edgeExceedsShortLineThreshold(h,t)){const s=(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__.editEdgeToSnappingEdge)(h,d,t);this._processCandidateProposal(s.left,s.right,e,a,t,i)}h=h.leftVertex.leftEdge}while(h&&h!==l);return i}snapExistingVertex(e,t){const s=[],r=t.vertexHandle,i=r.component;if(i.edges.length<2)return s;const{view:a}=this,{spatialReference:d}=t,l=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__.vectorToScreenPoint)(e,d,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__.absoluteHeightElevationInfo,a),h=r.leftEdge,c=r.rightEdge;h&&c&&this.edgeExceedsShortLineThreshold(h,t)&&this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_4__.fromAnyMapPoint)(h.leftVertex.pos,a,t),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_4__.fromAnyMapPoint)(c.rightVertex.pos,a,t),e,l,t,s);const f=i.edges[0];let m=f;do{if(m!==r.leftEdge&&m!==r.rightEdge&&this.edgeExceedsShortLineThreshold(m,t)){const r=(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__.editEdgeToSnappingEdge)(m,a,t);this._processCandidateProposal(r.left,r.right,e,l,t,s)}m=m.rightVertex.rightEdge}while(m&&m!==f);return s}_processCandidateProposal(e,t,s,r,n,l){const{spatialReference:p,pointer:f}=n,m=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.create)();j(m,e,t,s,n,this._geodesicLengthMeasurementUtils);const u=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_4__.markAsTarget)((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_4__.fromVec3)(m));(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__.squaredScreenDistance)(r,(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__.vectorToScreenPoint)(u,p,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(f)&&l.push(new _candidates_LineSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_7__.LineSnappingCandidate({lineStart:e,lineEnd:t,targetPoint:u,isDraped:"on-the-ground"===n.elevationInfo?.mode}))}}function j(e,t,s,r,i,o){v(e,t,s,r,i,o)||w(e,r,t,s)}function v(i,o,n,a,{spatialReference:d},l){const p=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.radiansGeographicBetweenVec)(o,n,d,d);if(null==p)return!1;const h=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.radiansGeographicBetweenVec)(n,a,d,d);if(null==h)return!1;const c=l.geodesicDistance(n,a,d);if(null==c)return!1;const g=Math.abs(_core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__.cyclicalPI.shortestSignedDiff(p,h))>Math.PI/2?_core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__.cyclical2PI.normalize(p+Math.PI):p;return (0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__.pointFromDistanceAlongAzimuth)(i,n,d,(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__.valueInUnit)(c,"meters"),(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__.createAngle)(g,"radians","geographic"),"geodesic"),i[2]=a[2],!0}function w(e,t,s,r){(0,_support_geometry3dUtils_js__WEBPACK_IMPORTED_MODULE_10__.projectPointToLineLike)(t,{start:s,end:r,type:_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_11__.LineType.LINE},e),e[2]=t[2]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/ParallelLineSnapper.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/ParallelLineSnapper.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParallelLineSnapper: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/math/vec2.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec2f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sketch/normalizedPoint.js */ "./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js");
/* harmony import */ var _Settings_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Settings.js */ "./node_modules/@arcgis/core/views/interactive/snapping/Settings.js");
/* harmony import */ var _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SnappingAlgorithm.js */ "./node_modules/@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/* harmony import */ var _candidates_ParallelLineSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./candidates/ParallelLineSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/ParallelLineSnappingCandidate.js");
/* harmony import */ var _support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/viewUtils.js */ "./node_modules/@arcgis/core/views/interactive/support/viewUtils.js");
/* harmony import */ var _support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/geometry2dUtils.js */ "./node_modules/@arcgis/core/views/support/geometry2dUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f extends _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_5__.SnappingAlgorithm{snapNewVertex(e,t){const s=t.editGeometryOperations.data.components[0],o=s.edges.length,n=s.vertices.length,l=[];if(o<2)return l;const{view:a}=this,h=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__.vectorToScreenPoint)(e,t.spatialReference,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,a),d=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(s.vertices[n-1].pos,a,t),g=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(s.vertices[0].pos,a,t),f=s.edges[o-1];let m=f;do{if(this.edgeExceedsShortLineThreshold(m,t)){const r=(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__.editEdgeToSnappingEdge)(m,a,t);this._checkEdgeForParallelLines(r,d,e,h,t,l),this._checkEdgeForParallelLines(r,g,e,h,t,l)}m=m.leftVertex.leftEdge}while(m&&m!==f);return l}snapExistingVertex(e,t){const s=[],o=t.vertexHandle,n=o.component;if(n.edges.length<3)return s;const{view:l}=this,a=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__.vectorToScreenPoint)(e,t.spatialReference,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,l),h=o.leftEdge,d=o.rightEdge,g=n.vertices[0],f=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(g.pos,l,t),m=n.vertices.length,u=n.vertices[m-1],v=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(u.pos,l,t),x=n.edges[0];let E=x;do{if(E!==h&&E!==d&&this.edgeExceedsShortLineThreshold(E,t)){const r=(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__.editEdgeToSnappingEdge)(E,l,t);h&&this._checkEdgeForParallelLines(r,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(h.leftVertex.pos,l,t),e,a,t,s),d&&this._checkEdgeForParallelLines(r,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(d.rightVertex.pos,l,t),e,a,t,s),o===g?this._checkEdgeForParallelLines(r,v,e,a,t,s):o===u&&this._checkEdgeForParallelLines(r,f,e,a,t,s)}E=E.rightVertex.rightEdge}while(E&&E!==x);return s}_checkEdgeForParallelLines(t,i,a,c,f,v){const x=t.left,E=t.right;if((0,_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_9__.projectPointToLine)(u,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(i),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(x),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(E)),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.squaredDistance)(u,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(i))<_Settings_js__WEBPACK_IMPORTED_MODULE_4__.defaults.parallelLineThreshold)return;(0,_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_9__.projectPointToLine)(u,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(a),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(x),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(E),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(i));const{spatialReference:L,pointer:P}=f,j=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.markAsTarget)((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromValues)(u[0],u[1],a[2]));if((0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_6__.squaredScreenDistance)(c,(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_8__.vectorToScreenPoint)(j,L,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(P)){if(this.isVertical(j,i,f)||this.isVertical(x,E,f))return;if(m(t,v))return;v.push(new _candidates_ParallelLineSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_7__.ParallelLineSnappingCandidate({referenceLine:t,lineStart:i,targetPoint:j,isDraped:"on-the-ground"===f.elevationInfo?.mode}))}}}function m(t,r){const i=t.left,o=t.right;for(const n of r)if((0,_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_9__.projectPointToLine)(u,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(o),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(n.constraint.start),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(n.constraint.end),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(i)),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.squaredDistance)(u,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(o))<_Settings_js__WEBPACK_IMPORTED_MODULE_4__.defaults.parallelLineThreshold)return n.addReferenceLine(t),!0;return!1}const u=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/RightAngleSnapper.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/RightAngleSnapper.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightAngleSnapper: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Cyclical.js */ "./node_modules/@arcgis/core/core/Cyclical.js");
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/quantityUtils.js */ "./node_modules/@arcgis/core/core/quantityUtils.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/math/vec2.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec2f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _sketch_constraints_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sketch/constraints.js */ "./node_modules/@arcgis/core/views/interactive/sketch/constraints.js");
/* harmony import */ var _sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sketch/normalizedPoint.js */ "./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js");
/* harmony import */ var _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./SnappingAlgorithm.js */ "./node_modules/@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/* harmony import */ var _candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./candidates/RightAngleSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/RightAngleSnappingCandidate.js");
/* harmony import */ var _support_viewUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../support/viewUtils.js */ "./node_modules/@arcgis/core/views/interactive/support/viewUtils.js");
/* harmony import */ var _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../support/angularMeasurementUtils.js */ "./node_modules/@arcgis/core/views/support/angularMeasurementUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class y extends _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_9__.SnappingAlgorithm{constructor(e,t,i){super(e,t),this._geodesicLengthMeasurementUtils=i}snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=[];if(i.vertices.length<2)return r;const{view:s}=this,n=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_12__.vectorToScreenPoint)(e,t.spatialReference,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_6__.absoluteHeightElevationInfo,s),o=i.vertices.at(-1);this._checkForSnappingCandidate(_candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__.SelfSnappingRightAngleType.LastVertex,r,o.leftEdge,o,o.leftEdge.leftVertex,e,n,t);const a=i.vertices[0];return this._checkForSnappingCandidate(_candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__.SelfSnappingRightAngleType.FirstVertex,r,a.rightEdge,a,a.rightEdge.rightVertex,e,n,t),r}snapExistingVertex(e,t){const i=[],r=t.vertexHandle;if(r.component.vertices.length<3)return i;const{view:s}=this,n=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_12__.vectorToScreenPoint)(e,t.spatialReference,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_6__.absoluteHeightElevationInfo,s),o=r.leftEdge,a=r.rightEdge;if(o?.leftVertex.leftEdge){const r=o.leftVertex.leftEdge;this._checkForSnappingCandidate(_candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__.SelfSnappingRightAngleType.ExistingEdge,i,r,r.rightVertex,r.leftVertex,e,n,t)}if(a?.rightVertex.rightEdge){const r=a.rightVertex.rightEdge;this._checkForSnappingCandidate(_candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__.SelfSnappingRightAngleType.ExistingEdge,i,r,r.leftVertex,r.rightVertex,e,n,t)}return i}_checkForSnappingCandidate(e,t,i,r,s,n,o,a){if(!this.edgeExceedsShortLineThreshold(i,a))return;const c=this.view,p=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.fromAnyMapPoint)(r.pos,c,a),g=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.fromAnyMapPoint)(s.pos,c,a);F(P,g,p,n,a,this._geodesicLengthMeasurementUtils),this._checkForSnappingCandidateAlongProjectedRay(e,t,g,p,P,n,o,a)}_checkForSnappingCandidateAlongProjectedRay(e,t,i,a,p,g,f,E){const{spatialReference:j,pointer:_}=E,w=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__.subtract)(M,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.asVec2)(g),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.asVec2)(a)),y=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__.dot)(p,w)/(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__.squaredLength)(p),F=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__.scaleAndAdd)(M,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.asVec2)(a),p,y),R=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.markAsTarget)((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.fromValues)(F[0],F[1],g[2]));if((0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_10__.squaredScreenDistance)(f,(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_12__.vectorToScreenPoint)(R,j,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_6__.absoluteHeightElevationInfo,this.view))>this.squaredProximityThreshold(_)||this.isVertical(R,a,E)||this.isVertical(a,i,E))return;const U=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.create)(),a,p,Math.sign(y));t.push(new _candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__.RightAngleSnappingCandidate({targetPoint:R,constraint:new _sketch_constraints_js__WEBPACK_IMPORTED_MODULE_7__.VerticalHalfPlaneConstraint(a,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.fromVec3)(U)),previousVertex:i,otherVertex:a,otherVertexType:_candidates_RightAngleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_11__.OtherVertexType.CENTER,selfSnappingType:e,isDraped:"on-the-ground"===E.elevationInfo?.mode}))}}function F(e,t,i,r,s,n){R(e,t,i,r,s,n)||U(e,t,i)}function R(r,s,n,o,{spatialReference:a},c){const g=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_13__.radiansGeographicBetweenVec)(s,n,a,a);if(null==g)return!1;const d=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_13__.radiansGeographicBetweenVec)(n,o,a,a);if(null==d)return!1;const l=Math.sign(_core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__.cyclical2PI.shortestSignedDiff(g,d))*Math.PI*.5,f=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__.createAngle)(g+l,"radians","geographic"),m=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.create)(),u=c.geodesicDistance(n,o,a);return null!=u&&((0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_13__.pointFromDistanceAlongAzimuth)(m,n,a,(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__.valueInUnit)(u,"meters"),f,"geodesic"),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.d)(r,m,n),!0)}function U(e,t,i){const s=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__.subtract)(M,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.asVec2)(i),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__.asVec2)(t));(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(e,s[1],-s[0],0)}const M=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_3__.create)(),P=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/RightAngleTriangleSnapper.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/RightAngleTriangleSnapper.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RightAngleTriangleSnapper: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/math/vec2.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec2f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sketch/normalizedPoint.js */ "./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js");
/* harmony import */ var _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SnappingAlgorithm.js */ "./node_modules/@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/* harmony import */ var _candidates_RightAngleTriangleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./candidates/RightAngleTriangleSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate.js");
/* harmony import */ var _support_viewUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/viewUtils.js */ "./node_modules/@arcgis/core/views/interactive/support/viewUtils.js");
/* harmony import */ var _support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../support/geometry2dUtils.js */ "./node_modules/@arcgis/core/views/support/geometry2dUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h extends _SnappingAlgorithm_js__WEBPACK_IMPORTED_MODULE_4__.SnappingAlgorithm{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=[],s=i.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||s<2)return r;const{view:n}=this,p=i.vertices[0],a=i.vertices[s-1],d=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(p.pos,n,t),l=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(a.pos,n,t);return this._processCandidateProposal(d,l,e,t,r),r}snapExistingVertex(e,t){const i=[],r=t.vertexHandle,s=r.component;if(s.edges.length<2)return i;if("polyline"===t.editGeometryOperations.data.type&&(0===r.index||r.index===s.vertices.length-1))return i;const{view:n}=this,p=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(r.leftEdge.leftVertex.pos,n,t),a=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(r.rightEdge.rightVertex.pos,n,t);return this._processCandidateProposal(p,a,e,t,i),i}_processCandidateProposal(i,o,a,h,g){if(!this.exceedsShortLineThreshold(i,o,h))return;const v=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.lerp)(f,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(i),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(o),.5),x=.5*(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.distance)((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(i),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(o)),u=(0,_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_8__.projectPointToCircle)(f,(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(a),v,x),j=(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.markAsTarget)((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromValues)(u[0],u[1],a[2])),{spatialReference:y,pointer:w}=h,P=(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_7__.vectorToScreenPoint)(a,y,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,this.view);if((0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_5__.squaredScreenDistance)(P,(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_7__.vectorToScreenPoint)(j,y,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(w)){if(this.isVertical(i,j,h)||this.isVertical(j,o,h))return;g.push(new _candidates_RightAngleTriangleSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__.RightAngleTriangleSnappingCandidate({targetPoint:j,point1:i,point2:o,isDraped:"on-the-ground"===h.elevationInfo?.mode}))}}}const f=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/SelfSnappingEngine.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/SelfSnappingEngine.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelfSnappingEngine: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _LineSnapper_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./LineSnapper.js */ "./node_modules/@arcgis/core/views/interactive/snapping/LineSnapper.js");
/* harmony import */ var _ParallelLineSnapper_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ParallelLineSnapper.js */ "./node_modules/@arcgis/core/views/interactive/snapping/ParallelLineSnapper.js");
/* harmony import */ var _RightAngleSnapper_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./RightAngleSnapper.js */ "./node_modules/@arcgis/core/views/interactive/snapping/RightAngleSnapper.js");
/* harmony import */ var _RightAngleTriangleSnapper_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./RightAngleTriangleSnapper.js */ "./node_modules/@arcgis/core/views/interactive/snapping/RightAngleTriangleSnapper.js");
/* harmony import */ var _SnappingDomain_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./SnappingDomain.js */ "./node_modules/@arcgis/core/views/interactive/snapping/SnappingDomain.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let h=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(s){super(s),this.updating=!1,this._snappers=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"],this._domain=_SnappingDomain_js__WEBPACK_IMPORTED_MODULE_12__.SnappingDomain.SELF}initialize(){this._snappers.push(new _ParallelLineSnapper_js__WEBPACK_IMPORTED_MODULE_9__.ParallelLineSnapper(this.view,this.options),new _LineSnapper_js__WEBPACK_IMPORTED_MODULE_8__.LineSnapper(this.view,this.options,this.geodesicLengthMeasurementUtils),new _RightAngleSnapper_js__WEBPACK_IMPORTED_MODULE_10__.RightAngleSnapper(this.view,this.options,this.geodesicLengthMeasurementUtils),new _RightAngleTriangleSnapper_js__WEBPACK_IMPORTED_MODULE_11__.RightAngleTriangleSnapper(this.view,this.options))}set options(s){this._set("options",s);for(const o of this._snappers)o.options=s}async fetchCandidates(s,o,t){if(!(o&this._domain&&this.options.effectiveSelfEnabled))return[];const e=[];for(const i of this._snappers.items)for(const o of i.snap(s,t))e.push(o);return (0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_13__.sortCandidatesInPlace)(s,e),e}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],h.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],h.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],h.prototype,"geodesicLengthMeasurementUtils",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],h.prototype,"options",null),h=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.interactive.snapping.SelfSnappingEngine")],h);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/SnappingAlgorithm.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SnappingAlgorithm: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/math/vec2.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sketch/normalizedPoint.js */ "./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js");
/* harmony import */ var _Settings_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Settings.js */ "./node_modules/@arcgis/core/views/interactive/snapping/Settings.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/* harmony import */ var _support_viewUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/viewUtils.js */ "./node_modules/@arcgis/core/views/interactive/support/viewUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class l{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=_Settings_js__WEBPACK_IMPORTED_MODULE_4__.defaults.shortLineThreshold*_Settings_js__WEBPACK_IMPORTED_MODULE_4__.defaults.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(e.leftVertex.pos,this.view,t),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.fromAnyMapPoint)(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:s}){return 0===this.squaredShortLineThreshold||(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_5__.squaredScreenDistance)((0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_6__.vectorToScreenPoint)(t,s,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,this.view),(0,_support_viewUtils_js__WEBPACK_IMPORTED_MODULE_6__.vectorToScreenPoint)(e,s,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_2__.absoluteHeightElevationInfo,this.view))>this.squaredShortLineThreshold}isVertical(r,s,{spatialReference:h}){const n=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__.getMetersPerUnitForSR)(h);return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__.distance)((0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(r),(0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_3__.asVec2)(s))*n<_Settings_js__WEBPACK_IMPORTED_MODULE_4__.defaults.verticalLineThresholdMeters}squaredProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,r=e*t;return r*r}}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfaW50ZXJhY3RpdmVfc25hcHBpbmdfU2VsZlNuYXBwaW5nRW5naW5lX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDcTdCLGdCQUFnQixvRUFBQyxDQUFDLG1CQUFtQixrREFBa0QsbUJBQW1CLDBFQUEwRSxnQkFBZ0IsTUFBTSxtQkFBbUIsS0FBSywwRUFBQyxLQUFLLHVGQUFDLGFBQWEsT0FBTyxxQkFBcUIsUUFBUSxHQUFHLDRDQUE0QyxRQUFRLHlFQUFDLFFBQVEsdURBQXVELHdCQUF3QixnQkFBZ0IsU0FBUyx3QkFBd0IsMENBQTBDLDZCQUE2QixNQUFNLE9BQU8sT0FBTyxtQkFBbUIsS0FBSywwRUFBQyxLQUFLLHVGQUFDLCtCQUErQix1SEFBdUgsMkVBQUMsdUJBQXVCLDJFQUFDLGlDQUFpQyxtQkFBbUIsUUFBUSxHQUFHLDZFQUE2RSxRQUFRLHlFQUFDLFFBQVEsdURBQXVELDBCQUEwQixnQkFBZ0IsU0FBUyx1Q0FBdUMsTUFBTSw2QkFBNkIsS0FBSyxtRkFBQyxHQUFHLGtEQUFrRCxRQUFRLHdFQUFDLENBQUMsb0VBQUMsS0FBSyx3RUFBQyxHQUFHLDBFQUFDLEtBQUssdUZBQUMsMkRBQTJELHVGQUFDLEVBQUUscUZBQXFGLElBQUksd0JBQXdCLDJCQUEyQixvQkFBb0IsbUJBQW1CLElBQUksUUFBUSxnR0FBQyxVQUFVLG9CQUFvQixRQUFRLGdHQUFDLFVBQVUsb0JBQW9CLGtDQUFrQyxvQkFBb0IsaUJBQWlCLHlEQUFDLG9DQUFvQywwREFBQyx3QkFBd0IsT0FBTyxrR0FBQyxPQUFPLG1FQUFDLGFBQWEsbUVBQUMsb0RBQW9ELG9CQUFvQixvRkFBQyxJQUFJLG1CQUFtQixrRUFBQyxNQUFNLGNBQXVDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSm50RjtBQUNBO0FBQ0E7QUFDQTtBQUMwdkIsZ0JBQWdC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LDBFQUFDLEtBQUssdUZBQUMsNENBQTRDLGdCQUFnQixtQkFBbUIsRUFBRSxRQUFRLHlFQUFDLElBQUksT0FBTyw2RUFBQyxDQUFDLGtFQUFDLElBQUksa0VBQUMsT0FBTyxrREFBQyw2QkFBNkIsNkJBQTZCLDRGQUE0RixzQ0FBc0MsbURBQW1ELHNDQUFzQyxNQUFNLHdDQUF3QyxvQkFBb0IsWUFBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvTGluZVNuYXBwZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2ludGVyYWN0aXZlL3NuYXBwaW5nL1BhcmFsbGVsTGluZVNuYXBwZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2ludGVyYWN0aXZlL3NuYXBwaW5nL1JpZ2h0QW5nbGVTbmFwcGVyLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9SaWdodEFuZ2xlVHJpYW5nbGVTbmFwcGVyLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9TZWxmU25hcHBpbmdFbmdpbmUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2ludGVyYWN0aXZlL3NuYXBwaW5nL1NuYXBwaW5nQWxnb3JpdGhtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y3ljbGljYWxQSSBhcyBlLGN5Y2xpY2FsMlBJIGFzIHR9ZnJvbVwiLi4vLi4vLi4vY29yZS9DeWNsaWNhbC5qc1wiO2ltcG9ydHt2YWx1ZUluVW5pdCBhcyBzLGNyZWF0ZUFuZ2xlIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9xdWFudGl0eVV0aWxzLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjM2Y2NC5qc1wiO2ltcG9ydHthYnNvbHV0ZUhlaWdodEVsZXZhdGlvbkluZm8gYXMgb31mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2VsZXZhdGlvbkluZm9VdGlscy5qc1wiO2ltcG9ydHtmcm9tQW55TWFwUG9pbnQgYXMgbixtYXJrQXNUYXJnZXQgYXMgYSxmcm9tVmVjMyBhcyBkfWZyb21cIi4uL3NrZXRjaC9ub3JtYWxpemVkUG9pbnQuanNcIjtpbXBvcnR7U25hcHBpbmdBbGdvcml0aG0gYXMgbH1mcm9tXCIuL1NuYXBwaW5nQWxnb3JpdGhtLmpzXCI7aW1wb3J0e2VkaXRFZGdlVG9TbmFwcGluZ0VkZ2UgYXMgcCxzcXVhcmVkU2NyZWVuRGlzdGFuY2UgYXMgaH1mcm9tXCIuL3NuYXBwaW5nVXRpbHMuanNcIjtpbXBvcnR7TGluZVNuYXBwaW5nQ2FuZGlkYXRlIGFzIGN9ZnJvbVwiLi9jYW5kaWRhdGVzL0xpbmVTbmFwcGluZ0NhbmRpZGF0ZS5qc1wiO2ltcG9ydHt2ZWN0b3JUb1NjcmVlblBvaW50IGFzIGd9ZnJvbVwiLi4vc3VwcG9ydC92aWV3VXRpbHMuanNcIjtpbXBvcnR7cmFkaWFuc0dlb2dyYXBoaWNCZXR3ZWVuVmVjIGFzIGYscG9pbnRGcm9tRGlzdGFuY2VBbG9uZ0F6aW11dGggYXMgbX1mcm9tXCIuLi8uLi9zdXBwb3J0L2FuZ3VsYXJNZWFzdXJlbWVudFV0aWxzLmpzXCI7aW1wb3J0e3Byb2plY3RQb2ludFRvTGluZUxpa2UgYXMgdX1mcm9tXCIuLi8uLi9zdXBwb3J0L2dlb21ldHJ5M2RVdGlscy5qc1wiO2ltcG9ydHtMaW5lVHlwZSBhcyB4fWZyb21cIi4uLy4uL3N1cHBvcnQvZ2VvbWV0cnkyZFV0aWxzLmpzXCI7Y2xhc3MgRSBleHRlbmRzIGx7Y29uc3RydWN0b3IoZSx0LHMpe3N1cGVyKGUsdCksdGhpcy5fZ2VvZGVzaWNMZW5ndGhNZWFzdXJlbWVudFV0aWxzPXN9c25hcE5ld1ZlcnRleChlLHQpe2NvbnN0IHM9dC5lZGl0R2VvbWV0cnlPcGVyYXRpb25zLmRhdGEuY29tcG9uZW50c1swXSxyPXMuZWRnZXMubGVuZ3RoLGk9W107aWYocjwxKXJldHVybiBpO2NvbnN0e3NwYXRpYWxSZWZlcmVuY2U6bn09dCxhPWcoZSxuLG8sdGhpcy52aWV3KSx7dmlldzpkfT10aGlzLGw9cy5lZGdlc1tyLTFdO2xldCBoPWw7ZG97aWYodGhpcy5lZGdlRXhjZWVkc1Nob3J0TGluZVRocmVzaG9sZChoLHQpKXtjb25zdCBzPXAoaCxkLHQpO3RoaXMuX3Byb2Nlc3NDYW5kaWRhdGVQcm9wb3NhbChzLmxlZnQscy5yaWdodCxlLGEsdCxpKX1oPWgubGVmdFZlcnRleC5sZWZ0RWRnZX13aGlsZShoJiZoIT09bCk7cmV0dXJuIGl9c25hcEV4aXN0aW5nVmVydGV4KGUsdCl7Y29uc3Qgcz1bXSxyPXQudmVydGV4SGFuZGxlLGk9ci5jb21wb25lbnQ7aWYoaS5lZGdlcy5sZW5ndGg8MilyZXR1cm4gcztjb25zdHt2aWV3OmF9PXRoaXMse3NwYXRpYWxSZWZlcmVuY2U6ZH09dCxsPWcoZSxkLG8sYSksaD1yLmxlZnRFZGdlLGM9ci5yaWdodEVkZ2U7aCYmYyYmdGhpcy5lZGdlRXhjZWVkc1Nob3J0TGluZVRocmVzaG9sZChoLHQpJiZ0aGlzLmVkZ2VFeGNlZWRzU2hvcnRMaW5lVGhyZXNob2xkKGMsdCkmJnRoaXMuX3Byb2Nlc3NDYW5kaWRhdGVQcm9wb3NhbChuKGgubGVmdFZlcnRleC5wb3MsYSx0KSxuKGMucmlnaHRWZXJ0ZXgucG9zLGEsdCksZSxsLHQscyk7Y29uc3QgZj1pLmVkZ2VzWzBdO2xldCBtPWY7ZG97aWYobSE9PXIubGVmdEVkZ2UmJm0hPT1yLnJpZ2h0RWRnZSYmdGhpcy5lZGdlRXhjZWVkc1Nob3J0TGluZVRocmVzaG9sZChtLHQpKXtjb25zdCByPXAobSxhLHQpO3RoaXMuX3Byb2Nlc3NDYW5kaWRhdGVQcm9wb3NhbChyLmxlZnQsci5yaWdodCxlLGwsdCxzKX1tPW0ucmlnaHRWZXJ0ZXgucmlnaHRFZGdlfXdoaWxlKG0mJm0hPT1mKTtyZXR1cm4gc31fcHJvY2Vzc0NhbmRpZGF0ZVByb3Bvc2FsKGUsdCxzLHIsbixsKXtjb25zdHtzcGF0aWFsUmVmZXJlbmNlOnAscG9pbnRlcjpmfT1uLG09aSgpO2oobSxlLHQscyxuLHRoaXMuX2dlb2Rlc2ljTGVuZ3RoTWVhc3VyZW1lbnRVdGlscyk7Y29uc3QgdT1hKGQobSkpO2gocixnKHUscCxvLHRoaXMudmlldykpPHRoaXMuc3F1YXJlZFByb3hpbWl0eVRocmVzaG9sZChmKSYmbC5wdXNoKG5ldyBjKHtsaW5lU3RhcnQ6ZSxsaW5lRW5kOnQsdGFyZ2V0UG9pbnQ6dSxpc0RyYXBlZDpcIm9uLXRoZS1ncm91bmRcIj09PW4uZWxldmF0aW9uSW5mbz8ubW9kZX0pKX19ZnVuY3Rpb24gaihlLHQscyxyLGksbyl7dihlLHQscyxyLGksbyl8fHcoZSxyLHQscyl9ZnVuY3Rpb24gdihpLG8sbixhLHtzcGF0aWFsUmVmZXJlbmNlOmR9LGwpe2NvbnN0IHA9ZihvLG4sZCxkKTtpZihudWxsPT1wKXJldHVybiExO2NvbnN0IGg9ZihuLGEsZCxkKTtpZihudWxsPT1oKXJldHVybiExO2NvbnN0IGM9bC5nZW9kZXNpY0Rpc3RhbmNlKG4sYSxkKTtpZihudWxsPT1jKXJldHVybiExO2NvbnN0IGc9TWF0aC5hYnMoZS5zaG9ydGVzdFNpZ25lZERpZmYocCxoKSk+TWF0aC5QSS8yP3Qubm9ybWFsaXplKHArTWF0aC5QSSk6cDtyZXR1cm4gbShpLG4sZCxzKGMsXCJtZXRlcnNcIikscihnLFwicmFkaWFuc1wiLFwiZ2VvZ3JhcGhpY1wiKSxcImdlb2Rlc2ljXCIpLGlbMl09YVsyXSwhMH1mdW5jdGlvbiB3KGUsdCxzLHIpe3UodCx7c3RhcnQ6cyxlbmQ6cix0eXBlOnguTElORX0sZSksZVsyXT10WzJdfWV4cG9ydHtFIGFzIExpbmVTbmFwcGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7c3F1YXJlZERpc3RhbmNlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL21hdGgvdmVjMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgdH1mcm9tXCIuLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzJmNjQuanNcIjtpbXBvcnR7YWJzb2x1dGVIZWlnaHRFbGV2YXRpb25JbmZvIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9lbGV2YXRpb25JbmZvVXRpbHMuanNcIjtpbXBvcnR7ZnJvbUFueU1hcFBvaW50IGFzIGksYXNWZWMyIGFzIHMsbWFya0FzVGFyZ2V0IGFzIG8sZnJvbVZhbHVlcyBhcyBufWZyb21cIi4uL3NrZXRjaC9ub3JtYWxpemVkUG9pbnQuanNcIjtpbXBvcnR7ZGVmYXVsdHMgYXMgbH1mcm9tXCIuL1NldHRpbmdzLmpzXCI7aW1wb3J0e1NuYXBwaW5nQWxnb3JpdGhtIGFzIGF9ZnJvbVwiLi9TbmFwcGluZ0FsZ29yaXRobS5qc1wiO2ltcG9ydHtlZGl0RWRnZVRvU25hcHBpbmdFZGdlIGFzIGMsc3F1YXJlZFNjcmVlbkRpc3RhbmNlIGFzIGh9ZnJvbVwiLi9zbmFwcGluZ1V0aWxzLmpzXCI7aW1wb3J0e1BhcmFsbGVsTGluZVNuYXBwaW5nQ2FuZGlkYXRlIGFzIGR9ZnJvbVwiLi9jYW5kaWRhdGVzL1BhcmFsbGVsTGluZVNuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e3ZlY3RvclRvU2NyZWVuUG9pbnQgYXMgcH1mcm9tXCIuLi9zdXBwb3J0L3ZpZXdVdGlscy5qc1wiO2ltcG9ydHtwcm9qZWN0UG9pbnRUb0xpbmUgYXMgZ31mcm9tXCIuLi8uLi9zdXBwb3J0L2dlb21ldHJ5MmRVdGlscy5qc1wiO2NsYXNzIGYgZXh0ZW5kcyBhe3NuYXBOZXdWZXJ0ZXgoZSx0KXtjb25zdCBzPXQuZWRpdEdlb21ldHJ5T3BlcmF0aW9ucy5kYXRhLmNvbXBvbmVudHNbMF0sbz1zLmVkZ2VzLmxlbmd0aCxuPXMudmVydGljZXMubGVuZ3RoLGw9W107aWYobzwyKXJldHVybiBsO2NvbnN0e3ZpZXc6YX09dGhpcyxoPXAoZSx0LnNwYXRpYWxSZWZlcmVuY2UscixhKSxkPWkocy52ZXJ0aWNlc1tuLTFdLnBvcyxhLHQpLGc9aShzLnZlcnRpY2VzWzBdLnBvcyxhLHQpLGY9cy5lZGdlc1tvLTFdO2xldCBtPWY7ZG97aWYodGhpcy5lZGdlRXhjZWVkc1Nob3J0TGluZVRocmVzaG9sZChtLHQpKXtjb25zdCByPWMobSxhLHQpO3RoaXMuX2NoZWNrRWRnZUZvclBhcmFsbGVsTGluZXMocixkLGUsaCx0LGwpLHRoaXMuX2NoZWNrRWRnZUZvclBhcmFsbGVsTGluZXMocixnLGUsaCx0LGwpfW09bS5sZWZ0VmVydGV4LmxlZnRFZGdlfXdoaWxlKG0mJm0hPT1mKTtyZXR1cm4gbH1zbmFwRXhpc3RpbmdWZXJ0ZXgoZSx0KXtjb25zdCBzPVtdLG89dC52ZXJ0ZXhIYW5kbGUsbj1vLmNvbXBvbmVudDtpZihuLmVkZ2VzLmxlbmd0aDwzKXJldHVybiBzO2NvbnN0e3ZpZXc6bH09dGhpcyxhPXAoZSx0LnNwYXRpYWxSZWZlcmVuY2UscixsKSxoPW8ubGVmdEVkZ2UsZD1vLnJpZ2h0RWRnZSxnPW4udmVydGljZXNbMF0sZj1pKGcucG9zLGwsdCksbT1uLnZlcnRpY2VzLmxlbmd0aCx1PW4udmVydGljZXNbbS0xXSx2PWkodS5wb3MsbCx0KSx4PW4uZWRnZXNbMF07bGV0IEU9eDtkb3tpZihFIT09aCYmRSE9PWQmJnRoaXMuZWRnZUV4Y2VlZHNTaG9ydExpbmVUaHJlc2hvbGQoRSx0KSl7Y29uc3Qgcj1jKEUsbCx0KTtoJiZ0aGlzLl9jaGVja0VkZ2VGb3JQYXJhbGxlbExpbmVzKHIsaShoLmxlZnRWZXJ0ZXgucG9zLGwsdCksZSxhLHQscyksZCYmdGhpcy5fY2hlY2tFZGdlRm9yUGFyYWxsZWxMaW5lcyhyLGkoZC5yaWdodFZlcnRleC5wb3MsbCx0KSxlLGEsdCxzKSxvPT09Zz90aGlzLl9jaGVja0VkZ2VGb3JQYXJhbGxlbExpbmVzKHIsdixlLGEsdCxzKTpvPT09dSYmdGhpcy5fY2hlY2tFZGdlRm9yUGFyYWxsZWxMaW5lcyhyLGYsZSxhLHQscyl9RT1FLnJpZ2h0VmVydGV4LnJpZ2h0RWRnZX13aGlsZShFJiZFIT09eCk7cmV0dXJuIHN9X2NoZWNrRWRnZUZvclBhcmFsbGVsTGluZXModCxpLGEsYyxmLHYpe2NvbnN0IHg9dC5sZWZ0LEU9dC5yaWdodDtpZihnKHUscyhpKSxzKHgpLHMoRSkpLGUodSxzKGkpKTxsLnBhcmFsbGVsTGluZVRocmVzaG9sZClyZXR1cm47Zyh1LHMoYSkscyh4KSxzKEUpLHMoaSkpO2NvbnN0e3NwYXRpYWxSZWZlcmVuY2U6TCxwb2ludGVyOlB9PWYsaj1vKG4odVswXSx1WzFdLGFbMl0pKTtpZihoKGMscChqLEwscix0aGlzLnZpZXcpKTx0aGlzLnNxdWFyZWRQcm94aW1pdHlUaHJlc2hvbGQoUCkpe2lmKHRoaXMuaXNWZXJ0aWNhbChqLGksZil8fHRoaXMuaXNWZXJ0aWNhbCh4LEUsZikpcmV0dXJuO2lmKG0odCx2KSlyZXR1cm47di5wdXNoKG5ldyBkKHtyZWZlcmVuY2VMaW5lOnQsbGluZVN0YXJ0OmksdGFyZ2V0UG9pbnQ6aixpc0RyYXBlZDpcIm9uLXRoZS1ncm91bmRcIj09PWYuZWxldmF0aW9uSW5mbz8ubW9kZX0pKX19fWZ1bmN0aW9uIG0odCxyKXtjb25zdCBpPXQubGVmdCxvPXQucmlnaHQ7Zm9yKGNvbnN0IG4gb2YgcilpZihnKHUscyhvKSxzKG4uY29uc3RyYWludC5zdGFydCkscyhuLmNvbnN0cmFpbnQuZW5kKSxzKGkpKSxlKHUscyhvKSk8bC5wYXJhbGxlbExpbmVUaHJlc2hvbGQpcmV0dXJuIG4uYWRkUmVmZXJlbmNlTGluZSh0KSwhMDtyZXR1cm4hMX1jb25zdCB1PXQoKTtleHBvcnR7ZiBhcyBQYXJhbGxlbExpbmVTbmFwcGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y3ljbGljYWwyUEkgYXMgZX1mcm9tXCIuLi8uLi8uLi9jb3JlL0N5Y2xpY2FsLmpzXCI7aW1wb3J0e2NyZWF0ZUFuZ2xlIGFzIHQsdmFsdWVJblVuaXQgYXMgaX1mcm9tXCIuLi8uLi8uLi9jb3JlL3F1YW50aXR5VXRpbHMuanNcIjtpbXBvcnR7c3VidHJhY3QgYXMgcixkb3QgYXMgcyxzcXVhcmVkTGVuZ3RoIGFzIG4sc2NhbGVBbmRBZGQgYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvbWF0aC92ZWMyLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjMmY2NC5qc1wiO2ltcG9ydHtiIGFzIGMsZCBhcyBwLGkgYXMgZ31mcm9tXCIuLi8uLi8uLi9jaHVua3MvdmVjMzIuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGh9ZnJvbVwiLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy92ZWMzZjY0LmpzXCI7aW1wb3J0e2Fic29sdXRlSGVpZ2h0RWxldmF0aW9uSW5mbyBhcyBkfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvZWxldmF0aW9uSW5mb1V0aWxzLmpzXCI7aW1wb3J0e1ZlcnRpY2FsSGFsZlBsYW5lQ29uc3RyYWludCBhcyBsfWZyb21cIi4uL3NrZXRjaC9jb25zdHJhaW50cy5qc1wiO2ltcG9ydHtmcm9tQW55TWFwUG9pbnQgYXMgZixhc1ZlYzIgYXMgbSxtYXJrQXNUYXJnZXQgYXMgdSxmcm9tVmFsdWVzIGFzIHgsZnJvbVZlYzMgYXMgVn1mcm9tXCIuLi9za2V0Y2gvbm9ybWFsaXplZFBvaW50LmpzXCI7aW1wb3J0e1NuYXBwaW5nQWxnb3JpdGhtIGFzIEV9ZnJvbVwiLi9TbmFwcGluZ0FsZ29yaXRobS5qc1wiO2ltcG9ydHtzcXVhcmVkU2NyZWVuRGlzdGFuY2UgYXMgdn1mcm9tXCIuL3NuYXBwaW5nVXRpbHMuanNcIjtpbXBvcnR7U2VsZlNuYXBwaW5nUmlnaHRBbmdsZVR5cGUgYXMgaixSaWdodEFuZ2xlU25hcHBpbmdDYW5kaWRhdGUgYXMgUyxPdGhlclZlcnRleFR5cGUgYXMga31mcm9tXCIuL2NhbmRpZGF0ZXMvUmlnaHRBbmdsZVNuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e3ZlY3RvclRvU2NyZWVuUG9pbnQgYXMgQ31mcm9tXCIuLi9zdXBwb3J0L3ZpZXdVdGlscy5qc1wiO2ltcG9ydHtyYWRpYW5zR2VvZ3JhcGhpY0JldHdlZW5WZWMgYXMgXyxwb2ludEZyb21EaXN0YW5jZUFsb25nQXppbXV0aCBhcyB3fWZyb21cIi4uLy4uL3N1cHBvcnQvYW5ndWxhck1lYXN1cmVtZW50VXRpbHMuanNcIjtjbGFzcyB5IGV4dGVuZHMgRXtjb25zdHJ1Y3RvcihlLHQsaSl7c3VwZXIoZSx0KSx0aGlzLl9nZW9kZXNpY0xlbmd0aE1lYXN1cmVtZW50VXRpbHM9aX1zbmFwTmV3VmVydGV4KGUsdCl7Y29uc3QgaT10LmVkaXRHZW9tZXRyeU9wZXJhdGlvbnMuZGF0YS5jb21wb25lbnRzWzBdLHI9W107aWYoaS52ZXJ0aWNlcy5sZW5ndGg8MilyZXR1cm4gcjtjb25zdHt2aWV3OnN9PXRoaXMsbj1DKGUsdC5zcGF0aWFsUmVmZXJlbmNlLGQscyksbz1pLnZlcnRpY2VzLmF0KC0xKTt0aGlzLl9jaGVja0ZvclNuYXBwaW5nQ2FuZGlkYXRlKGouTGFzdFZlcnRleCxyLG8ubGVmdEVkZ2UsbyxvLmxlZnRFZGdlLmxlZnRWZXJ0ZXgsZSxuLHQpO2NvbnN0IGE9aS52ZXJ0aWNlc1swXTtyZXR1cm4gdGhpcy5fY2hlY2tGb3JTbmFwcGluZ0NhbmRpZGF0ZShqLkZpcnN0VmVydGV4LHIsYS5yaWdodEVkZ2UsYSxhLnJpZ2h0RWRnZS5yaWdodFZlcnRleCxlLG4sdCkscn1zbmFwRXhpc3RpbmdWZXJ0ZXgoZSx0KXtjb25zdCBpPVtdLHI9dC52ZXJ0ZXhIYW5kbGU7aWYoci5jb21wb25lbnQudmVydGljZXMubGVuZ3RoPDMpcmV0dXJuIGk7Y29uc3R7dmlldzpzfT10aGlzLG49QyhlLHQuc3BhdGlhbFJlZmVyZW5jZSxkLHMpLG89ci5sZWZ0RWRnZSxhPXIucmlnaHRFZGdlO2lmKG8/LmxlZnRWZXJ0ZXgubGVmdEVkZ2Upe2NvbnN0IHI9by5sZWZ0VmVydGV4LmxlZnRFZGdlO3RoaXMuX2NoZWNrRm9yU25hcHBpbmdDYW5kaWRhdGUoai5FeGlzdGluZ0VkZ2UsaSxyLHIucmlnaHRWZXJ0ZXgsci5sZWZ0VmVydGV4LGUsbix0KX1pZihhPy5yaWdodFZlcnRleC5yaWdodEVkZ2Upe2NvbnN0IHI9YS5yaWdodFZlcnRleC5yaWdodEVkZ2U7dGhpcy5fY2hlY2tGb3JTbmFwcGluZ0NhbmRpZGF0ZShqLkV4aXN0aW5nRWRnZSxpLHIsci5sZWZ0VmVydGV4LHIucmlnaHRWZXJ0ZXgsZSxuLHQpfXJldHVybiBpfV9jaGVja0ZvclNuYXBwaW5nQ2FuZGlkYXRlKGUsdCxpLHIscyxuLG8sYSl7aWYoIXRoaXMuZWRnZUV4Y2VlZHNTaG9ydExpbmVUaHJlc2hvbGQoaSxhKSlyZXR1cm47Y29uc3QgYz10aGlzLnZpZXcscD1mKHIucG9zLGMsYSksZz1mKHMucG9zLGMsYSk7RihQLGcscCxuLGEsdGhpcy5fZ2VvZGVzaWNMZW5ndGhNZWFzdXJlbWVudFV0aWxzKSx0aGlzLl9jaGVja0ZvclNuYXBwaW5nQ2FuZGlkYXRlQWxvbmdQcm9qZWN0ZWRSYXkoZSx0LGcscCxQLG4sbyxhKX1fY2hlY2tGb3JTbmFwcGluZ0NhbmRpZGF0ZUFsb25nUHJvamVjdGVkUmF5KGUsdCxpLGEscCxnLGYsRSl7Y29uc3R7c3BhdGlhbFJlZmVyZW5jZTpqLHBvaW50ZXI6X309RSx3PXIoTSxtKGcpLG0oYSkpLHk9cyhwLHcpL24ocCksRj1vKE0sbShhKSxwLHkpLFI9dSh4KEZbMF0sRlsxXSxnWzJdKSk7aWYodihmLEMoUixqLGQsdGhpcy52aWV3KSk+dGhpcy5zcXVhcmVkUHJveGltaXR5VGhyZXNob2xkKF8pfHx0aGlzLmlzVmVydGljYWwoUixhLEUpfHx0aGlzLmlzVmVydGljYWwoYSxpLEUpKXJldHVybjtjb25zdCBVPWMoaCgpLGEscCxNYXRoLnNpZ24oeSkpO3QucHVzaChuZXcgUyh7dGFyZ2V0UG9pbnQ6Uixjb25zdHJhaW50Om5ldyBsKGEsVihVKSkscHJldmlvdXNWZXJ0ZXg6aSxvdGhlclZlcnRleDphLG90aGVyVmVydGV4VHlwZTprLkNFTlRFUixzZWxmU25hcHBpbmdUeXBlOmUsaXNEcmFwZWQ6XCJvbi10aGUtZ3JvdW5kXCI9PT1FLmVsZXZhdGlvbkluZm8/Lm1vZGV9KSl9fWZ1bmN0aW9uIEYoZSx0LGkscixzLG4pe1IoZSx0LGkscixzLG4pfHxVKGUsdCxpKX1mdW5jdGlvbiBSKHIscyxuLG8se3NwYXRpYWxSZWZlcmVuY2U6YX0sYyl7Y29uc3QgZz1fKHMsbixhLGEpO2lmKG51bGw9PWcpcmV0dXJuITE7Y29uc3QgZD1fKG4sbyxhLGEpO2lmKG51bGw9PWQpcmV0dXJuITE7Y29uc3QgbD1NYXRoLnNpZ24oZS5zaG9ydGVzdFNpZ25lZERpZmYoZyxkKSkqTWF0aC5QSSouNSxmPXQoZytsLFwicmFkaWFuc1wiLFwiZ2VvZ3JhcGhpY1wiKSxtPWgoKSx1PWMuZ2VvZGVzaWNEaXN0YW5jZShuLG8sYSk7cmV0dXJuIG51bGwhPXUmJih3KG0sbixhLGkodSxcIm1ldGVyc1wiKSxmLFwiZ2VvZGVzaWNcIikscChyLG0sbiksITApfWZ1bmN0aW9uIFUoZSx0LGkpe2NvbnN0IHM9cihNLG0oaSksbSh0KSk7ZyhlLHNbMV0sLXNbMF0sMCl9Y29uc3QgTT1hKCksUD1oKCk7ZXhwb3J0e3kgYXMgUmlnaHRBbmdsZVNuYXBwZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtsZXJwIGFzIGUsZGlzdGFuY2UgYXMgdH1mcm9tXCIuLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvbWF0aC92ZWMyLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjMmY2NC5qc1wiO2ltcG9ydHthYnNvbHV0ZUhlaWdodEVsZXZhdGlvbkluZm8gYXMgcn1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2VsZXZhdGlvbkluZm9VdGlscy5qc1wiO2ltcG9ydHtmcm9tQW55TWFwUG9pbnQgYXMgbyxhc1ZlYzIgYXMgcyxtYXJrQXNUYXJnZXQgYXMgbixmcm9tVmFsdWVzIGFzIHB9ZnJvbVwiLi4vc2tldGNoL25vcm1hbGl6ZWRQb2ludC5qc1wiO2ltcG9ydHtTbmFwcGluZ0FsZ29yaXRobSBhcyBhfWZyb21cIi4vU25hcHBpbmdBbGdvcml0aG0uanNcIjtpbXBvcnR7c3F1YXJlZFNjcmVlbkRpc3RhbmNlIGFzIGR9ZnJvbVwiLi9zbmFwcGluZ1V0aWxzLmpzXCI7aW1wb3J0e1JpZ2h0QW5nbGVUcmlhbmdsZVNuYXBwaW5nQ2FuZGlkYXRlIGFzIGx9ZnJvbVwiLi9jYW5kaWRhdGVzL1JpZ2h0QW5nbGVUcmlhbmdsZVNuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e3ZlY3RvclRvU2NyZWVuUG9pbnQgYXMgbX1mcm9tXCIuLi9zdXBwb3J0L3ZpZXdVdGlscy5qc1wiO2ltcG9ydHtwcm9qZWN0UG9pbnRUb0NpcmNsZSBhcyBjfWZyb21cIi4uLy4uL3N1cHBvcnQvZ2VvbWV0cnkyZFV0aWxzLmpzXCI7Y2xhc3MgaCBleHRlbmRzIGF7c25hcE5ld1ZlcnRleChlLHQpe2NvbnN0IGk9dC5lZGl0R2VvbWV0cnlPcGVyYXRpb25zLmRhdGEuY29tcG9uZW50c1swXSxyPVtdLHM9aS52ZXJ0aWNlcy5sZW5ndGg7aWYoXCJwb2x5Z29uXCIhPT10LmVkaXRHZW9tZXRyeU9wZXJhdGlvbnMuZGF0YS50eXBlfHxzPDIpcmV0dXJuIHI7Y29uc3R7dmlldzpufT10aGlzLHA9aS52ZXJ0aWNlc1swXSxhPWkudmVydGljZXNbcy0xXSxkPW8ocC5wb3Msbix0KSxsPW8oYS5wb3Msbix0KTtyZXR1cm4gdGhpcy5fcHJvY2Vzc0NhbmRpZGF0ZVByb3Bvc2FsKGQsbCxlLHQscikscn1zbmFwRXhpc3RpbmdWZXJ0ZXgoZSx0KXtjb25zdCBpPVtdLHI9dC52ZXJ0ZXhIYW5kbGUscz1yLmNvbXBvbmVudDtpZihzLmVkZ2VzLmxlbmd0aDwyKXJldHVybiBpO2lmKFwicG9seWxpbmVcIj09PXQuZWRpdEdlb21ldHJ5T3BlcmF0aW9ucy5kYXRhLnR5cGUmJigwPT09ci5pbmRleHx8ci5pbmRleD09PXMudmVydGljZXMubGVuZ3RoLTEpKXJldHVybiBpO2NvbnN0e3ZpZXc6bn09dGhpcyxwPW8oci5sZWZ0RWRnZS5sZWZ0VmVydGV4LnBvcyxuLHQpLGE9byhyLnJpZ2h0RWRnZS5yaWdodFZlcnRleC5wb3Msbix0KTtyZXR1cm4gdGhpcy5fcHJvY2Vzc0NhbmRpZGF0ZVByb3Bvc2FsKHAsYSxlLHQsaSksaX1fcHJvY2Vzc0NhbmRpZGF0ZVByb3Bvc2FsKGksbyxhLGgsZyl7aWYoIXRoaXMuZXhjZWVkc1Nob3J0TGluZVRocmVzaG9sZChpLG8saCkpcmV0dXJuO2NvbnN0IHY9ZShmLHMoaSkscyhvKSwuNSkseD0uNSp0KHMoaSkscyhvKSksdT1jKGYscyhhKSx2LHgpLGo9bihwKHVbMF0sdVsxXSxhWzJdKSkse3NwYXRpYWxSZWZlcmVuY2U6eSxwb2ludGVyOnd9PWgsUD1tKGEseSxyLHRoaXMudmlldyk7aWYoZChQLG0oaix5LHIsdGhpcy52aWV3KSk8dGhpcy5zcXVhcmVkUHJveGltaXR5VGhyZXNob2xkKHcpKXtpZih0aGlzLmlzVmVydGljYWwoaSxqLGgpfHx0aGlzLmlzVmVydGljYWwoaixvLGgpKXJldHVybjtnLnB1c2gobmV3IGwoe3RhcmdldFBvaW50OmoscG9pbnQxOmkscG9pbnQyOm8saXNEcmFwZWQ6XCJvbi10aGUtZ3JvdW5kXCI9PT1oLmVsZXZhdGlvbkluZm8/Lm1vZGV9KSl9fX1jb25zdCBmPWkoKTtleHBvcnR7aCBhcyBSaWdodEFuZ2xlVHJpYW5nbGVTbmFwcGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBzfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL1JhbmRvbUxDRy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7TGluZVNuYXBwZXIgYXMgcn1mcm9tXCIuL0xpbmVTbmFwcGVyLmpzXCI7aW1wb3J0e1BhcmFsbGVsTGluZVNuYXBwZXIgYXMgbn1mcm9tXCIuL1BhcmFsbGVsTGluZVNuYXBwZXIuanNcIjtpbXBvcnR7UmlnaHRBbmdsZVNuYXBwZXIgYXMgcH1mcm9tXCIuL1JpZ2h0QW5nbGVTbmFwcGVyLmpzXCI7aW1wb3J0e1JpZ2h0QW5nbGVUcmlhbmdsZVNuYXBwZXIgYXMgYX1mcm9tXCIuL1JpZ2h0QW5nbGVUcmlhbmdsZVNuYXBwZXIuanNcIjtpbXBvcnR7U25hcHBpbmdEb21haW4gYXMgY31mcm9tXCIuL1NuYXBwaW5nRG9tYWluLmpzXCI7aW1wb3J0e3NvcnRDYW5kaWRhdGVzSW5QbGFjZSBhcyBtfWZyb21cIi4vc25hcHBpbmdVdGlscy5qc1wiO2xldCBoPWNsYXNzIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihzKXtzdXBlcihzKSx0aGlzLnVwZGF0aW5nPSExLHRoaXMuX3NuYXBwZXJzPW5ldyB0LHRoaXMuX2RvbWFpbj1jLlNFTEZ9aW5pdGlhbGl6ZSgpe3RoaXMuX3NuYXBwZXJzLnB1c2gobmV3IG4odGhpcy52aWV3LHRoaXMub3B0aW9ucyksbmV3IHIodGhpcy52aWV3LHRoaXMub3B0aW9ucyx0aGlzLmdlb2Rlc2ljTGVuZ3RoTWVhc3VyZW1lbnRVdGlscyksbmV3IHAodGhpcy52aWV3LHRoaXMub3B0aW9ucyx0aGlzLmdlb2Rlc2ljTGVuZ3RoTWVhc3VyZW1lbnRVdGlscyksbmV3IGEodGhpcy52aWV3LHRoaXMub3B0aW9ucykpfXNldCBvcHRpb25zKHMpe3RoaXMuX3NldChcIm9wdGlvbnNcIixzKTtmb3IoY29uc3QgbyBvZiB0aGlzLl9zbmFwcGVycylvLm9wdGlvbnM9c31hc3luYyBmZXRjaENhbmRpZGF0ZXMocyxvLHQpe2lmKCEobyZ0aGlzLl9kb21haW4mJnRoaXMub3B0aW9ucy5lZmZlY3RpdmVTZWxmRW5hYmxlZCkpcmV0dXJuW107Y29uc3QgZT1bXTtmb3IoY29uc3QgaSBvZiB0aGlzLl9zbmFwcGVycy5pdGVtcylmb3IoY29uc3QgbyBvZiBpLnNuYXAocyx0KSllLnB1c2gobyk7cmV0dXJuIG0ocyxlKSxlfX07cyhbZSh7cmVhZE9ubHk6ITB9KV0saC5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLHZvaWQgMCkscyhbZSh7Y29uc3RydWN0T25seTohMH0pXSxoLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLHMoW2Uoe2NvbnN0cnVjdE9ubHk6ITB9KV0saC5wcm90b3R5cGUsXCJnZW9kZXNpY0xlbmd0aE1lYXN1cmVtZW50VXRpbHNcIix2b2lkIDApLHMoW2UoKV0saC5wcm90b3R5cGUsXCJvcHRpb25zXCIsbnVsbCksaD1zKFtpKFwiZXNyaS52aWV3cy5pbnRlcmFjdGl2ZS5zbmFwcGluZy5TZWxmU25hcHBpbmdFbmdpbmVcIildLGgpO2V4cG9ydHtoIGFzIFNlbGZTbmFwcGluZ0VuZ2luZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2dldE1ldGVyc1BlclVuaXRGb3JTUiBhcyBlfWZyb21cIi4uLy4uLy4uL2NvcmUvdW5pdFV0aWxzLmpzXCI7aW1wb3J0e2Rpc3RhbmNlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL21hdGgvdmVjMi5qc1wiO2ltcG9ydHthYnNvbHV0ZUhlaWdodEVsZXZhdGlvbkluZm8gYXMgcn1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2VsZXZhdGlvbkluZm9VdGlscy5qc1wiO2ltcG9ydHtmcm9tQW55TWFwUG9pbnQgYXMgcyxhc1ZlYzIgYXMgaX1mcm9tXCIuLi9za2V0Y2gvbm9ybWFsaXplZFBvaW50LmpzXCI7aW1wb3J0e2RlZmF1bHRzIGFzIG99ZnJvbVwiLi9TZXR0aW5ncy5qc1wiO2ltcG9ydHtzcXVhcmVkU2NyZWVuRGlzdGFuY2UgYXMgaH1mcm9tXCIuL3NuYXBwaW5nVXRpbHMuanNcIjtpbXBvcnR7dmVjdG9yVG9TY3JlZW5Qb2ludCBhcyBufWZyb21cIi4uL3N1cHBvcnQvdmlld1V0aWxzLmpzXCI7Y2xhc3MgbHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudmlldz1lLHRoaXMub3B0aW9ucz10LHRoaXMuc3F1YXJlZFNob3J0TGluZVRocmVzaG9sZD1vLnNob3J0TGluZVRocmVzaG9sZCpvLnNob3J0TGluZVRocmVzaG9sZH1zbmFwKGUsdCl7cmV0dXJuIG51bGwhPXQudmVydGV4SGFuZGxlP1widmVydGV4XCIhPT10LnZlcnRleEhhbmRsZS50eXBlP1tdOnRoaXMuc25hcEV4aXN0aW5nVmVydGV4KGUsdCk6dGhpcy5zbmFwTmV3VmVydGV4KGUsdCl9ZWRnZUV4Y2VlZHNTaG9ydExpbmVUaHJlc2hvbGQoZSx0KXtyZXR1cm4gdGhpcy5leGNlZWRzU2hvcnRMaW5lVGhyZXNob2xkKHMoZS5sZWZ0VmVydGV4LnBvcyx0aGlzLnZpZXcsdCkscyhlLnJpZ2h0VmVydGV4LnBvcyx0aGlzLnZpZXcsdCksdCl9ZXhjZWVkc1Nob3J0TGluZVRocmVzaG9sZChlLHQse3NwYXRpYWxSZWZlcmVuY2U6c30pe3JldHVybiAwPT09dGhpcy5zcXVhcmVkU2hvcnRMaW5lVGhyZXNob2xkfHxoKG4odCxzLHIsdGhpcy52aWV3KSxuKGUscyxyLHRoaXMudmlldykpPnRoaXMuc3F1YXJlZFNob3J0TGluZVRocmVzaG9sZH1pc1ZlcnRpY2FsKHIscyx7c3BhdGlhbFJlZmVyZW5jZTpofSl7Y29uc3Qgbj1lKGgpO3JldHVybiB0KGkociksaShzKSkqbjxvLnZlcnRpY2FsTGluZVRocmVzaG9sZE1ldGVyc31zcXVhcmVkUHJveGltaXR5VGhyZXNob2xkKGUpe3JldHVyblwidG91Y2hcIj09PWU/dGhpcy5fc3F1YXJlZFRvdWNoUHJveGltaXR5VGhyZXNob2xkOnRoaXMuX3NxdWFyZWRNb3VzZVByb3hpbWl0eVRocmVzaG9sZH1nZXQgX3NxdWFyZWRNb3VzZVByb3hpbWl0eVRocmVzaG9sZCgpe3JldHVybiB0aGlzLm9wdGlvbnMuZGlzdGFuY2UqdGhpcy5vcHRpb25zLmRpc3RhbmNlfWdldCBfc3F1YXJlZFRvdWNoUHJveGltaXR5VGhyZXNob2xkKCl7Y29uc3R7ZGlzdGFuY2U6ZSx0b3VjaFNlbnNpdGl2aXR5TXVsdGlwbGllcjp0fT10aGlzLm9wdGlvbnMscj1lKnQ7cmV0dXJuIHIqcn19ZXhwb3J0e2wgYXMgU25hcHBpbmdBbGdvcml0aG19O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9