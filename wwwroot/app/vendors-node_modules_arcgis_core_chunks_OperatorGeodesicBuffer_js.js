export const __webpack_id__ = "vendors-node_modules_arcgis_core_chunks_OperatorGeodesicBuffer_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_chunks_OperatorGeodesicBuffer_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/chunks/GeometryCleaner-BEJM7I4l.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/GeometryCleaner-BEJM7I4l.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Geometry.js */ "./node_modules/@arcgis/core/chunks/Geometry.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(i,a){const f=i.getGeometryType();return f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint?r(i):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(f)?u(i):f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint?o(i):f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope?i:f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultipatch?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("not implemented for multipatch"),i):i}function r(t){return t}function u(e){if(a(e))return e;const n=e.createInstance();for(let i=0,r=e.getPathCount();i<r;i++){const r=e.getPathSize(i);if(0!==r){if(1===r){if(0===e.getSegmentCountPath(i))continue;if(e.getSegmentType(e.getPathStart(i))===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)continue;if(!e.isClosedPath(i))continue}n.addPath(e,i,!0)}}return n}function o(t){return t}function a(e){for(let n=0,i=e.getPathCount();n<i;n++){const i=e.getPathSize(n);if(0===i)return!1;if(1===i){if(0===e.getSegmentCountPath(n))return!1;if(e.getSegmentType(e.getPathStart(n))===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return!1;if(!e.isClosedPath(n))return!1}}return!0}


/***/ }),

/***/ "./node_modules/@arcgis/core/chunks/OperatorGeodesicBuffer.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/OperatorGeodesicBuffer.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OperatorGeodesicBuffer: () => (/* binding */ ve)
/* harmony export */ });
/* harmony import */ var _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SimpleGeometryCursor.js */ "./node_modules/@arcgis/core/chunks/SimpleGeometryCursor.js");
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Geometry.js */ "./node_modules/@arcgis/core/chunks/Geometry.js");
/* harmony import */ var _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Envelope2D.js */ "./node_modules/@arcgis/core/chunks/Envelope2D.js");
/* harmony import */ var _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ProjectionTransformation.js */ "./node_modules/@arcgis/core/chunks/ProjectionTransformation.js");
/* harmony import */ var _tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./MultiPathImpl.js */ "./node_modules/@arcgis/core/chunks/MultiPathImpl.js");
/* harmony import */ var _Envelope_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Envelope.js */ "./node_modules/@arcgis/core/chunks/Envelope.js");
/* harmony import */ var _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./Transformation2D.js */ "./node_modules/@arcgis/core/chunks/Transformation2D.js");
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Point2D.js */ "./node_modules/@arcgis/core/chunks/Point2D.js");
/* harmony import */ var _OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./OperatorClip.js */ "./node_modules/@arcgis/core/chunks/OperatorClip.js");
/* harmony import */ var _GeometryCleaner_BEJM7I4l_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./GeometryCleaner-BEJM7I4l.js */ "./node_modules/@arcgis/core/chunks/GeometryCleaner-BEJM7I4l.js");
/* harmony import */ var _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./OperatorDensify.js */ "./node_modules/@arcgis/core/chunks/OperatorDensify.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function me(e,t,s,n,a,h){n<Number.MAX_VALUE&&n>-Number.MAX_VALUE||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Geodesic_bufferer.buffer - bad distance"),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e);const c=(0,_GeometryCleaner_BEJM7I4l_js__WEBPACK_IMPORTED_MODULE_10__.c)(e),u=c.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(u)){const e=c.getPointCount(),i=8e6;if(Math.abs(n)>i&&(e>50||u!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&4===s&&e>2)){let e=c;const r=n>0?1:-1,o=7e6;let m=n,u=1;do{u++,m=(Math.abs(m)-o)*r}while(Math.abs(m)>i);m=n;for(let n=0;n<u-1;n++)e=he(e,t,s,o*r,a,u,h),m=(Math.abs(m)-o)*r;return e=he(e,t,s,m,a,u,h),e}}return he(c,t,s,n,a,1,h)}class ae{constructor(e){this.m_sr=null,this.m_gcs=null,this.m_transform=null,this.m_a=0,this.m_eSquared=0,this.m_rpu=0,this.m_radTolerance=0,this.m_q90=0,this.m_gcs90=0,this.m_gcs180=0,this.m_gcs360=0,this.m_gcs60=0,this.m_ellipticToGeodesicMaxRatio=0,this.m_curveType=0,this.m_bShapePreserving=!1,this.m_distance=0,this.m_absDistance=0,this.m_convergenceOffset=0,this.m_cornerStep=0,this.m_segmentStep=0,this.m_progressTracker=e}bufferPolygon(e){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a,s=new we(this,e,t);return this.processGnomonicBufferPiecesCursor(!0,s)}bufferPolyline(e){const t=new we(this,e,null);return this.processGnomonicBufferPiecesCursor(!0,t)}bufferMultiPoint(e){const t=new Ce(this,e);return this.processGnomonicBufferPiecesCursor(!1,t)}bufferPoint(e){const t=e.getXY();t.scale(this.m_rpu);let s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a;if(this.bufferPoint2D(t,!1,s)){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,s,!0);s=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.p)(s,e,!0,!0,-1,this.m_progressTracker,0,!1)}return s=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.z).foldInto360RangeGeodetic(s,this.m_gcs,2),s}processGnomonicBufferPiecesCursor(e,t){const s=t;let n=s.getGnomonic();const i=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.R)((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.S)());let r=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.U,o=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.j).executeMany(r,i,this.m_progressTracker,2);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.d)(6,!1),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.m)(_Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D,6);this.initializeGrid(m,a);const h=[null,null,null,null,null,null],c=[null,null,null,null,null,null],u=[null,null,null,null,null,null];let l,d,g;for(;null!==(l=s.next());){if(d=s.getGnomonic(),d!==n){if(null!==n){let t=o.next();if(r=null,o=null,null!=t){const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,t,!0),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(s);t=n.unproject(t,r,this.m_progressTracker),this.putInGridCursors(e,t,i,!0,m,a,h,c,u)}}null!==d&&(r=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.U,o=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.j).executeMany(r,i,this.m_progressTracker,2)),n=d}if(s.isRunningInGnomonic()){if(d.project(l),s.needsSimplify()){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,l,!0);l=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.p)(l,e,!0,!0,-1,this.m_progressTracker,0,!1)}r.tick(be(l)),o.tock()}else this.putInGridCursors(e,l,i,!0,m,a,h,c,u)}let p=!1;for(let _=0;_<6;_++)if(null!=u[_]){p=!0;break}if(p){let t=!1;const l=[null,null,null,null,null,null];if(e){const n=s.m_densified;if(s.m_densified=null,null!==n){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;s.scale(1/this.m_rpu,1/this.m_rpu),n.applyTransformation(s),this.m_distance>0?this.putInGridCursors(e,n,i,!1,m,a,h,c,u):(this.processInGrid(e,n,!1,m,a,h,l),t=!0)}}const _=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.U,d=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.j).executeMany(_,this.m_gcs,this.m_progressTracker,2);if(null!==o){let t=o.next();r=null,o=null;const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,t,!0),l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(s);t=n.unproject(t,l,this.m_progressTracker),this.putInGridCursors(e,t,i,!0,m,a,h,c,u)}for(let e=0;e<6;e++)if(null!=u[e]){let s=u[e].next();u[e]=null,c[e]=null,t&&null!==l[e]&&(s=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.f).execute(l[e],s,i,this.m_progressTracker));const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,s,!0),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(n);s=h[e].unproject(s,r,this.m_progressTracker),s=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.O).execute(s,this.m_gcs,!0,this.m_progressTracker),_.tick(be(s)),d.tock()}g=d.next()}else{let t,m=!1;if(e){let e=s.m_densified;if(s.m_densified=null,null!==e){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;s.scale(1/this.m_rpu,1/this.m_rpu),e.applyTransformation(s),d.project(e);const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,e,!0);e=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.p)(e,n,!1,!0,-1,this.m_progressTracker,0,!1),this.m_distance>0?(r.tick(be(e)),o.tock()):(t=e,m=!0)}}let a=o.next();r=null,o=null,m&&(a=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.f).execute(t,a,i,this.m_progressTracker));const h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,a,!0),c=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(h);g=n.unproject(a,c,this.m_progressTracker),g=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.O).execute(g,this.m_gcs,!0,this.m_progressTracker)}return g=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.z).foldInto360RangeGeodetic(g,this.m_gcs,2),g}putInGridCursors(e,t,s,n,i,r,o,m,a){const h=[null,null,null,null,null,null];this.processInGrid(e,t,n,i,r,o,h);for(let c=0;c<6;c++)null!==h[c]&&(null===m[c]&&(m[c]=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.U,a[c]=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.j).executeMany(m[c],s,this.m_progressTracker,2)),m[c].tick(be(h[c])),a[c].tock())}processInGrid(e,t,s,n,i,r,o){const m=.01,a=this.insertGeodeticPointsAlongGrid(t,i,m);for(let h=0;h<6;h++){if(n[h])continue;const e=i[h].clone();e.inflateCoords(m,m);const c=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.f)(t,e),u=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.c)(null,c,!1).total();let l=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__.c)(a,e,u,Number.NaN,this.m_progressTracker);if(null!==l&&!l.isEmpty()){if(l===a&&(l=l.clone()),null===r[h]){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;h<3?e.setCoords(0,1):e.setCoords(0,-1);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;t.setAdd(i[h].getCenter(),e),r[h]=xe(this.m_gcs,t)}r[h].project(l);const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,l,!0);l=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.p)(l,e,s,!0,-1,this.m_progressTracker,0,!1),o[h]=l}}}insertGeodeticPointsAlongGrid(e,t,s){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D.construct(t[3].xmin,t[3].ymin,t[2].xmax,t[2].ymax),i=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.V)(this.m_gcs,n,e,!0,this.m_progressTracker),r=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.E,o=r.addGeometry(i);return (0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!0,t[0].xmax+s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!0,t[1].xmax+s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!1,t[1].ymin+s),0!==s&&((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!0,t[0].xmax-s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!0,t[1].xmax-s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!1,t[1].ymin-s)),r.getGeometry(o)}initializeGrid(e,t){for(let s=0;s<6;s++)e[s]=!1;t[0].setCoords({xmin:-this.m_gcs180,ymin:0,xmax:-this.m_gcs60,ymax:this.m_gcs90}),t[1].setCoords({xmin:-this.m_gcs60,ymin:0,xmax:this.m_gcs60,ymax:this.m_gcs90}),t[2].setCoords({xmin:this.m_gcs60,ymin:0,xmax:this.m_gcs180,ymax:this.m_gcs90}),t[3].setCoords({xmin:-this.m_gcs180,ymin:-this.m_gcs90,xmax:-this.m_gcs60,ymax:0}),t[4].setCoords({xmin:-this.m_gcs60,ymin:-this.m_gcs90,xmax:this.m_gcs60,ymax:0}),t[5].setCoords({xmin:this.m_gcs60,ymin:-this.m_gcs90,xmax:this.m_gcs180,ymax:0})}checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(e,t,s,n,i,r){const o=e[0],m=e.at(-1),a=o.y<m.y?o.y:m.y,h=o.y>m.y?o.y:m.y,c=_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.M.q(this.m_a,this.m_eSquared,a),u=_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.M.q(this.m_a,this.m_eSquared,h);if(this.m_q90-(c+t+this.m_absDistance)>.001&&this.m_q90+(u-t-this.m_absDistance)>.001)return!1;const l=s-_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.o,_=n+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.o,f=l-Math.PI,d=l+Math.PI,g=_+Math.PI,P=[Number.NaN],x=[Number.NaN],b=[Number.NaN],y=[Number.NaN];let w=!1;if(le(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,o,l,f,m,_,P,x),le(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,m,g,_,o,f,b,y),(_<P[0]&&P[0]<g||_<x[0]&&x[0]<g)&&(w=!0),w||(f<b[0]&&b[0]<l||f<y[0]&&y[0]<l)&&(w=!0),!w&&i)return!1;const C=[];for(let p=e.length-1;p>=0;p--)C.push(e[p]);r.setEmpty(),r.addPathPoint2D(null,0,!0);let v=0;v=ce(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,this.m_curveType,e,l,_,i,v,r),v=ue(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,m,_,g,this.m_cornerStep,i,v,r,P[0],x[0]),v=ce(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,this.m_curveType,C,g,d,i,v,r),v=ue(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,o,f,l,this.m_cornerStep,i,v,r,b[0],y[0]);let S=!1;return i||(S=this.checkAndPrepForPole(r)),w||S}bufferPoint2D(e,t,s){s.setEmpty(),s.addPathPoint2D(null,0,!0);const n=0;ue(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,e,-this.m_cornerStep,2*Math.PI,this.m_cornerStep,t,n,s);let i=!1;return t||(i=this.checkAndPrepForPole(s)),i}checkAndPrepForPole(e){const t=this.checkAndPrepForPoleTouch(e),s=this.checkAndPrepForPoleWrap(e);return t||s}checkAndPrepForPoleTouch(e){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;return e.queryEnvelope(t),!(!(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(t.ymax,this.m_gcs90)&&!(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(t.ymin,-this.m_gcs90))&&(this.prepPoleTouch(e),!0)}checkAndPrepForPoleWrap(e){const t=e.getXY(0),s=e.getXY(e.getPointCount()-1);return Math.abs(t.x-s.x)>this.m_gcs180?(this.prepSinglePoleWrap(e),!0):this.checkAndPrepForDoublePoleWrap(e)}checkAndPrepForDoublePoleWrap(e){return e.calculateArea2D()<0&&(this.prepDoublePoleWrap(e),!0)}prepPoleTouch(e){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a;t.insertPath2D(-1,null,0,0,!0);const s=e.getPathStart(0),n=e.getPathEnd(0),i=n-s;let r=-1;for(r=s;r<n;r++){const t=e.getXY(r),s=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(t.y,this.m_gcs90),n=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(t.y,-this.m_gcs90);if(!s&&!n)break}let o=r,m=!1,a=Number.NaN;do{const n=e.getXY(o),r=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(n.y,this.m_gcs90),h=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(n.y,-this.m_gcs90),c=s+(o+1-s)%i;if(r||h){let s=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P.construct(a,n.y);t.insertPoint2D(0,-1,s);const i=e.getXY(c),r=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(i.y,this.m_gcs90),o=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.X)(i.y,-this.m_gcs90);r||o||(s=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P.construct(i.x,n.y),m?t.setXY(t.getPointCount()-1,s):t.insertPoint2D(0,-1,s)),m=!0}else t.insertPoint2D(0,-1,n),a=n.x,m=!1;o=c}while(o!==r);e.setEmpty(),e.add(t,!1)}prepSinglePoleWrap(e){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a,s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a,n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T,i=e.getXY(e.getPathStart(0)),r=e.getXY(e.getPathEnd(0)-1),o=this.m_gcs360,m=this.m_gcs180,a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;a.setCoords({xmin:-this.m_gcs180,ymin:-this.m_gcs90,xmax:this.m_gcs180,ymax:this.m_gcs90});const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;e.queryEnvelope(h);const c=Math.ceil(h.width()/o);let u,l;i.x>r.x?(u=-o,l=this.m_gcs90):(u=o,l=-this.m_gcs90),n.setShiftCoords(u,0),t.addPath(e,0,!0),s.add(t,!1);const f=new _Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P;for(let _=0;_<c;_++)s.applyTransformation(n),s.getPointByVal(0,f),t.lineToPoint(f),t.addSegmentsFromPath(s,0,0,s.getSegmentCount()-1,!1);const d=t.getXY(0),g=t.getXY(t.getPointCount()-1);d.y=l,g.y=l,t.lineTo(g);const p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;for(p.setCoordsPoint2D(g),p.x-=.5*u;Math.abs(p.x-d.x)>m;)t.lineTo(p),p.x-=.5*u;t.lineTo(d);const P=a.getCenterX(),x=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;t.queryEnvelope(x);let b=0;const y=x.getCenter().x;y-P>m?b=-Math.ceil((y-P-m)/o):P-y>m&&(b=Math.ceil((P-y-m)/o)),0!==b&&(n.setShiftCoords(b*o,0),t.applyTransformation(n));const w=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.E,C=w.addGeometry(t);(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(w,C,this.m_gcs,0,2,!0,a.xmin),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(w,C,this.m_gcs,0,2,!0,a.xmax);const v=w.getGeometry(C),S=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.f)(v,a);S.inflateCoords(0,1);const D=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.c)(null,S,!0).total(),I=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__.c)(v,a,D,Number.NaN,this.m_progressTracker);e.setEmpty(),e.add(I,!1)}prepDoublePoleWrap(e){const t=this.m_gcs360,s=this.m_gcs180,n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;n.setCoords({xmin:-this.m_gcs180,ymin:-this.m_gcs90,xmax:this.m_gcs180,ymax:this.m_gcs90});const i=n.getCenter().x,r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;e.queryPathEnvelope(0,r);let o,m=0,a=r.getCenter().x;if(a-i>s?m=-Math.ceil((a-i-s)/t):i-a>s&&(m=Math.ceil((i-a-s)/t)),0!==m){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;s.setShiftCoords(m*t,0),e.getImpl().applyTransformationToPath(s,0),e.queryPathEnvelope(0,r),a=r.getCenter().x}const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;n.containsExclusiveEnvelope(r)?(o=!1,h.setCoords({env2D:n})):(o=!0,h.setCoords({env2D:n}),h.xmin-=t,h.xmax+=t);let c=e.createInstance();c.addPathPoint2D(null,0,!0);const u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;if(u.setCoords(h.xmin,h.ymin),c.insertPoint2D(0,-1,u),u.setCoords(h.xmin,h.ymax),c.insertPoint2D(0,-1,u),u.setCoords(.5*(h.xmin+h.xmax),h.ymax),c.insertPoint2D(0,-1,u),u.setCoords(h.xmax,h.ymax),c.insertPoint2D(0,-1,u),u.setCoords(h.xmax,h.ymin),c.insertPoint2D(0,-1,u),u.setCoords(.5*(h.xmin+h.xmax),h.ymin),c.insertPoint2D(0,-1,u),o){c.addPath(e,0,!0);const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;a<i?s.setShiftCoords(t,0):s.setShiftCoords(-t,0),e.getImpl().applyTransformationToPath(s,0),c.addPath(e,0,!0);const r=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.E,o=r.addGeometry(c);(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!0,n.xmin),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.W)(r,o,this.m_gcs,0,2,!0,n.xmax),c=r.getGeometry(o);const m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.f)(c,n);m.inflateCoords(0,1);const h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.c)(null,m,!0).total();c=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__.c)(c,n,h,Number.NaN,this.m_progressTracker)}else c.addPath(e,0,!0);e.setEmpty(),e.add(c,!1)}setMinCornerStep(){const e={stack:[],error:void 0,hasError:!1};try{let s=Math.min(Math.PI*this.m_a-this.m_absDistance,this.m_absDistance);s=Math.min(s,.125*this.m_a*Math.PI);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;n.setCoords(0,10*this.m_rpu);const i=0;let r=45*this.m_rpu;const o=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;for(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,i,o.at(0),o.at(1)),c.setCoords(o.at(0).val,o.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,r,m.at(0),m.at(1)),u.setCoords(m.at(0).val,m.at(1).val);;){const e={stack:[],error:void 0,hasError:!1};try{const t=.5*(i+r);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,t,a.at(0),a.at(1)),l.setCoords(a.at(0).val,a.at(1).val);const o=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,c.x,c.y,u.x,u.y,o,f,null,2),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticCoordinate(this.m_a,this.m_eSquared,c.x,c.y,.5*o.val,f.val,h.at(0),h.at(1),2),_.setCoords(h.at(0).val,h.at(1).val);const d=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,l.x,l.y,_.x,_.y,d,null,null,2);if(d.val<=this.m_convergenceOffset)break;r*=.9,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,r,m.at(0),m.at(1)),u.setCoords(m.at(0).val,m.at(1).val)}catch(t){e.error=t,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}const f=r-i,d=2*Math.PI/Math.ceil(2*Math.PI/f);this.m_cornerStep=d}catch(s){e.error=s,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}setMinSegmentStep(){const e={stack:[],error:void 0,hasError:!1};try{let n=Math.min(Math.PI*this.m_a-this.m_absDistance,this.m_absDistance);n=Math.min(n,.125*this.m_a*Math.PI);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;i.setCoords(0,10*this.m_rpu),r.setCoords(10*this.m_rpu,10*this.m_rpu);const o=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,i.x,i.y,r.x,r.y,a,o,m,this.m_curveType);const h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),c=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,l=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),_=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),d=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),g=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,P=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,b=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,y=0;let w=1;const C=o.val,v=m.val,S=C-.5*Math.PI,D=v+.5*Math.PI,I=a.val;for(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,i.x,i.y,n,S,_.at(0),_.at(1)),p.setCoords(_.at(0).val,_.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,r.x,r.y,n,D,f.at(0),f.at(1)),P.setCoords(f.at(0).val,f.at(1).val);;){const e={stack:[],error:void 0,hasError:!1};try{const s=.5*(y+w);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticCoordinate(this.m_a,this.m_eSquared,i.x,i.y,s*I,C,h.at(0),h.at(1),this.m_curveType),u.setCoords(h.at(0).val,h.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,i.x,i.y,u.x,u.y,null,null,l,this.m_curveType);const o=l.val+.5*Math.PI;_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,u.x,u.y,n,o,d.at(0),d.at(1)),x.setCoords(d.at(0).val,d.at(1).val);const m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,p.x,p.y,P.x,P.y,m,a,null,2),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticCoordinate(this.m_a,this.m_eSquared,p.x,p.y,.5*m.val,a.val,g.at(0),g.at(1),2),b.setCoords(g.at(0).val,g.at(1).val);const _=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,x.x,x.y,b.x,b.y,_,null,null,2);if(_.val<=this.m_convergenceOffset)break;{const e={stack:[],error:void 0,hasError:!1};try{w*=.9,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticCoordinate(this.m_a,this.m_eSquared,i.x,i.y,w*I,C,c.at(0),c.at(1),this.m_curveType),r.setCoords(c.at(0).val,c.at(1).val);const t=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(this.m_a,this.m_eSquared,i.x,i.y,r.x,r.y,null,null,t,this.m_curveType);const s=t.val+.5*Math.PI;_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(this.m_a,this.m_eSquared,r.x,r.y,n,s,f.at(0),f.at(1)),P.setCoords(f.at(0).val,f.at(1).val)}catch(t){e.error=t,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}}catch(s){e.error=s,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}let G=w*I;G>1e5&&(G=1e5),this.m_segmentStep=G}catch(n){e.error=n,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}setConvergenceOffset(){let e;e=this.m_absDistance>5e4?100:this.m_absDistance>1e4?10:1,this.m_absDistance/e<500&&(e=this.m_absDistance/500),e<.01&&(e=.01),this.m_convergenceOffset=e}}function he(e,t,s,n,i,r,o){if(e.isEmpty())return new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:e.getDescription()});let f=e;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.m)(f)){const e=10*t.getTolerance(0);f=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_11__.O).execute(f,0,e,0,o,12e3)}const w=new ae(o);w.m_sr=t,w.m_gcs=t.getGCS(),w.m_transform=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(t,w.m_gcs,null);const C=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.v)();w.m_gcs.querySpheroidData(C);const v=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;f.queryEnvelope(v),w.m_a=C.majorSemiAxis,w.m_eSquared=C.e2,w.m_rpu=w.m_gcs.getUnit().getUnitToBaseFactor(),w.m_gcs90=.5*Math.PI/w.m_rpu,w.m_gcs180=Math.PI/w.m_rpu,w.m_gcs360=2*Math.PI/w.m_rpu,w.m_gcs60=w.m_gcs360/6,w.m_q90=_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.M.q90(w.m_a,w.m_eSquared),w.m_ellipticToGeodesicMaxRatio=.5*w.m_a*Math.PI/w.m_q90;const S=w.m_gcs.getTolerance(0);w.m_radTolerance=S*w.m_rpu,4===s?(w.m_curveType=2,w.m_bShapePreserving=!0):(w.m_curveType=s,w.m_bShapePreserving=!1),w.m_distance=n,w.m_absDistance=Math.abs(n),Number.isNaN(i)||i<=0?w.setConvergenceOffset():w.m_convergenceOffset=Math.max(i,.001),w.m_convergenceOffset/=r;let D,I=f.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(I)){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.P({vd:f.getDescription()});e.addSegment(f,!0),D=e,I=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline}else if(I===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const e=f,t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;e.queryEnvelope(t);const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.c)(w.m_sr,v,!0));if(t.minDimension()<=s)if(0===t.maxDimension()){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P({vd:f.getDescription()});e.getCenter(t),D=t,I=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint}else{const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.P({vd:f.getDescription()});t.addEnvelope(e,!1),D=t,I=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline}else{const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:f.getDescription()});t.addEnvelope(e,!1),D=t,I=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon}}else D=f;if(w.setMinCornerStep(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.e)(I)||w.setMinSegmentStep(),w.m_absDistance<=.5*w.m_convergenceOffset)return I!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:D.getDescription()}):w.m_bShapePreserving?D:(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.N)(D,w.m_sr,w.m_curveType,w.m_segmentStep,-1,o);if(w.m_distance<0&&I!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)return new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:D.getDescription()});if(w.m_bShapePreserving&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(I)){const e=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.N)(D,t,4,Number.NaN,w.m_convergenceOffset,o);D=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.z).execute(e,w.m_transform,o)}else D=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.z).execute(D,w.m_transform,o);if(D=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.w)(D,w.m_gcs),D.isEmpty())return new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:D.getDescription()});!w.m_bShapePreserving&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(I)&&(D=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Q)(w.m_rpu,D)),D=fe(D,w.m_gcs);let G=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a;switch(I){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:G=w.bufferPolygon(D);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:G=w.bufferPolyline(D);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:G=w.bufferMultiPoint(D);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:G=w.bufferPoint(D);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.n)("")}const M=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.z).execute(G,w.m_transform.getInverse(),o);return M.mergeVertexDescription(D.getDescription()),M}function ce(e,t,s,n,i,r,o,m,a,h,c){const u={stack:[],error:void 0,hasError:!1};try{const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;l.setNAN(),a||c.getPointCount()>0&&(l.setCoordsPoint2D(c.getXY(c.getPointCount()-1)),l.scale(s));const _=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,p=r.at(-1),P=1/s;for(let s=0;s<r.length;s++){const u=r[s];let x;0===s?x=o:s===r.length-1?x=m:(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(e,t,p.x,p.y,u.x,u.y,null,null,_,i),x=_.val-.5*Math.PI),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(e,t,u.x,u.y,n,x,f.at(0),f.at(1)),a?g.setCoords(f.at(0).val,f.at(1).val):(d.setCoords(f.at(0).val,f.at(1).val),h=_e(u.x,d.x,l.x,h),g.setCoords(h+d.x,d.y),l.setCoordsPoint2D(g)),g.scale(P),c.insertPoint2D(0,-1,g)}return h}catch(l){u.error=l,u.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(u)}}function ue(e,t,s,n,i,r,o,m,a,h,c,u=Number.NaN,l=Number.NaN){const _={stack:[],error:void 0,hasError:!1};try{if(o-r<m)return h;const f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(_,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1),d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;g.setNAN(),a||c.getPointCount()>0&&(g.setCoordsPoint2D(c.getXY(c.getPointCount()-1)),g.scale(s));let P=Math.ceil(r/m),x=P++*m;x===r&&(x=P++*m);let b=r;const y=1/s;for(;x<o+m&&(b<u&&u<x?(x=u,P--):b<l&&l<x&&(x=l,P--),!(x>=o));)_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(e,t,i.x,i.y,n,x,f.at(0),f.at(1)),a?p.setCoords(f.at(0).val,f.at(1).val):(d.setCoords(f.at(0).val,f.at(1).val),h=_e(i.x,d.x,g.x,h),p.setCoords(h+d.x,d.y),g.setCoordsPoint2D(p)),p.scale(y),c.insertPoint2D(0,-1,p),b=x,x=P++*m;return h}catch(f){_.error=f,_.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(_)}}function le(e,t,s,n,i,r,o,m,a,h,c){const u={stack:[],error:void 0,hasError:!1};try{const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,_=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P),!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(e,t,i.x,i.y,n,r,_.at(0),_.at(1)),s.setCoords(_.at(0).val,_.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodesicCoordinate(e,t,i.x,i.y,n,o,_.at(0),_.at(1)),l.setCoords(_.at(0).val,_.at(1).val);const f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);for(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(e,t,m.x,m.y,s.x,s.y,null,f,null,0),h[0]=f.val,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.geodeticDistance(e,t,m.x,m.y,l.x,l.y,null,f,null,0),c[0]=f.val;h[0]<=c[0];)h[0]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p;for(;h[0]>c[0];)h[0]-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p;for(;h[0]>=a;)h[0]-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p,c[0]-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p;for(;h[0]<a;)h[0]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p,c[0]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p}catch(l){u.error=l,u.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(u)}}function _e(e,t,s,n){if(Number.isNaN(s)){for(;n+t-e>Math.PI;)n-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p;for(;e-(n+t)>Math.PI;)n+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p;return n}return n+t-s>Math.PI?n-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p:s-(n+t)>Math.PI&&(n+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p),n}function fe(e,t){const s=e.getGeometryType();let n;if(n=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)?e.getPathCount():s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint?e.getPointCount():1,1===n)return e;const i=[],r=[];for(let m=0;m<n;m++){i.push(m);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;e.queryPathEnvelope(m,t),n.assign(t.getCenter())}else n.assign(e.getXY(m));const o=t.toGeohash(n);r.push(o)}i.sort(((e,t)=>r[e]<r[t]?-1:r[e]>r[t]?1:0));const o=e.createInstance();for(let m=0;m<n;m++){const t=i[m];(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)?o.addPath(e,t,!0):o.addPoints(e,t,t+1)}return o}function de(e,t,s,n,i,r){const o={stack:[],error:void 0,hasError:!1};try{if(n>=r)return!1;const m=s[0],a=s.at(-1),h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),c=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1),u=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.greatEllipticDistance(e,t,i.x,i.y,m.x,m.y,h,null,null),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.greatEllipticDistance(e,t,i.x,i.y,a.x,a.y,c,null,null),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.greatEllipticDistance(e,t,m.x,m.y,a.x,a.y,u,null,null);let l=Math.min(h.val,c.val)+u.val,_=l+n;if(_<r)return!0;const f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);l=Math.max(h.val,c.val);for(let n=1;n<s.length-1;n++){const r=s[n];_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.greatEllipticDistance(e,t,i.x,i.y,r.x,r.y,f,null,null),f.val>l&&(l=f.val)}return _=l+n,_<r}catch(m){o.error=m,o.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(o)}}function ge(e,t,s,n,i,r,o,m){let a;if(n.length%2==0){const e=n.length>>1,t=n[e],s=n[e-1];a=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P.lerp(t,s,.5)}else{a=n[n.length-1>>1].clone()}const h=a.clone(),c=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Y)(e,t,h,75/180*Math.PI);return!!de(e,t,n,i,h,c)&&(null!==r&&(r.setCoordsPoint2D(a),r.scale(1/s)),null!==o&&o.setCoordsPoint2D(h),null!==m&&(m[0]=c),!0)}function pe(e,t,s,n,i,r){const o={stack:[],error:void 0,hasError:!1};try{if(n>=r)return!1;const m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A.greatEllipticDistance(e,t,i.x,i.y,s.x,s.y,m,null,null);return m.val+n<r}catch(m){o.error=m,o.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(o)}}function Pe(e,t,s,n,i,r,o,m){const a=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Y)(e,t,n,75/180*Math.PI);return!!pe(e,t,n,i,n,a)&&(null!==r&&(r.setCoordsPoint2D(n),r.scale(1/s)),null!==o&&o.setCoordsPoint2D(n),null!==m&&(m[0]=a),!0)}function xe(e,t){return new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.a1(e,t)}function be(e){return (0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.h)(e,0)||(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.s)(e,0),e}class ye{constructor(e){this.m_bRunningInGnomonic=!1,this.m_bNeedsSimplify=!1,this.m_gnomonic=null,this.m_gnomonicCenterRad=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,this.m_minGnomonicRadius=Number.NaN,this.m_progressTracker=e}isRunningInGnomonic(){return this.m_bRunningInGnomonic}needsSimplify(){return this.m_bNeedsSimplify}getGnomonic(){return this.m_gnomonic}}class we extends ye{constructor(e,t,s){super(e.m_progressTracker),this.m_segIter=null,this.m_bNextSegmentCannotJoin=!1,this.m_currentDensifiedDelta=[0],this.m_currentBufferedDelta=0,this.m_lastAzimuth=0,this.m_startAzimuth=[0],this.m_endAzimuth=[0],this.m_numWinds=0,this.m_debugCounter=0,this.m_bufferHelper=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a,this.m_densifiedPoints=[],this.m_bufferer=e,this.m_multiPath=t,this.m_densified=s,this.m_bNeedsSimplify=!0;const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;this.m_multiPath.queryEnvelope(n);const i=n.getCenter(),r=i.clone();r.scale(this.m_bufferer.m_rpu),this.m_gnomonic=xe(this.m_bufferer.m_gcs,i),this.m_gnomonicCenterRad=r.clone(),this.m_minGnomonicRadius=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Y)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,r,75/180*Math.PI)}next(){let e;if(this.m_bNextSegmentCannotJoin)return this.m_bNextSegmentCannotJoin=!1,this.m_segIter.nextSegment(),e=this.m_bufferHelper.clone(),e;if(null===this.m_segIter){if(this.m_segIter=this.m_multiPath.getImpl().querySegmentIterator(),!this.m_segIter.nextPath())return null;null!==this.m_densified&&this.m_densified.addPathPoint2D(null,0,!0)}if(!this.m_segIter.hasNextSegment()){if(!this.m_segIter.nextPath())return null;null!=this.m_densified&&this.m_densified.addPathPoint2D(null,0,!0)}let t=null;this.m_currentBufferedDelta=0,this.m_currentDensifiedDelta=[0],this.m_numWinds=0,this.m_lastAzimuth=Number.NaN,this.m_bNextSegmentCannotJoin=!1,this.m_densifiedPoints.length=0;const s=16;let n=0;const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;for(;this.m_segIter.hasNextSegment()&&this.m_numWinds<s;){const e=this.m_segIter.nextSegment();if(i.setCoordsPoint2D(e.getStartXY()),r.setCoordsPoint2D(e.getEndXY()),i.scale(this.m_bufferer.m_rpu),r.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Z)(i,r))i.x=r.x;else if((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__._)(i,r))r.x=i.x;else{let e=-1,t=-1;const s=this.m_segIter.getPathIndex(),n=this.m_multiPath.getPathStart(s),o=this.m_multiPath.getPathEnd(s);if(e=this.m_segIter.getStartPointIndex()-1,t=this.m_segIter.getEndPointIndex()+1,e<n&&(e=this.m_multiPath.isClosedPath(s)?o-1:-1),t>o-1&&(t=this.m_multiPath.isClosedPath(s)?n:-1),-1!==e){const t=this.m_multiPath.getXY(e);t.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__._)(t,i)&&(i.x=t.x)}if(-1!==t){const e=this.m_multiPath.getXY(t);e.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Z)(r,e)&&(r.x=e.x)}}this.m_densifiedPoints.length=0;const s=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.$)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_curveType,i,r,this.m_bufferer.m_segmentStep,Number.NaN,this.m_bufferer.m_radTolerance,this.m_startAzimuth,this.m_endAzimuth,this.m_densifiedPoints,this.m_currentDensifiedDelta);if(0===n)this.m_bRunningInGnomonic=this.isSegmentBufferInCurrentGnomonic(this.m_densifiedPoints),this.m_bRunningInGnomonic||(this.m_bRunningInGnomonic=this.tryUpdateGnomonic(this.m_densifiedPoints));else if(this.m_bRunningInGnomonic){if(!this.isSegmentBufferInCurrentGnomonic(this.m_densifiedPoints)){this.m_segIter.previousSegment(),this.m_segIter.previousSegment(),this.m_segIter.nextSegment();break}}else{if(ge(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_densifiedPoints,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,null,null,null)){this.m_segIter.previousSegment(),this.m_segIter.previousSegment(),this.m_segIter.nextSegment();break}}if(0===s||(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.a0)(i,r)?(this.m_bufferHelper.setEmpty(),this.m_bufferer.bufferPoint2D(i,this.m_bRunningInGnomonic,this.m_bufferHelper),this.m_bNextSegmentCannotJoin=!0):(this.m_bufferHelper.setEmpty(),this.m_bNextSegmentCannotJoin=this.checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(s,this.m_bufferHelper)),this.m_bNextSegmentCannotJoin){this.m_segIter.previousSegment(),this.m_segIter.hasPreviousSegment()?(this.m_segIter.previousSegment(),this.m_segIter.nextSegment()):this.m_segIter.resetToFirstSegment(),null!=this.m_densified&&this.m_densified.insertPointsFromPoints(this.m_densified.getPathCount()-1,-1,this.m_densifiedPoints,0,this.m_densifiedPoints.length-1,!0);break}null!=this.m_densified&&this.m_densified.insertPointsFromPoints(this.m_densified.getPathCount()-1,-1,this.m_densifiedPoints,0,this.m_densifiedPoints.length-1,!0),null===t&&(t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a,t.addPathPoint2D(null,0,!0)),this.addJoinAndBufferLeftSide(t),n++}if(this.m_currentDensifiedDelta=[0],n>0){const e=this.m_segIter.getStartPointIndex(),s=this.m_segIter.getPathIndex();for(;n>0;){if(this.m_segIter.previousSegment(),i.setCoordsPoint2D(this.m_multiPath.getXY(this.m_segIter.getStartPointIndex())),r.setCoordsPoint2D(this.m_multiPath.getXY(this.m_segIter.getEndPointIndex())),i.scale(this.m_bufferer.m_rpu),r.scale(this.m_bufferer.m_rpu),this.m_bRunningInGnomonic)if((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Z)(i,r))i.x=r.x;else if((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__._)(i,r))r.x=i.x;else{let e=-1,t=-1;const s=this.m_segIter.getPathIndex(),n=this.m_multiPath.getPathStart(s),o=this.m_multiPath.getPathEnd(s);if(e=this.m_segIter.getStartPointIndex()-1,t=this.m_segIter.getEndPointIndex()+1,e<n&&(e=this.m_multiPath.isClosedPath(s)?o-1:-1),t>o-1&&(t=this.m_multiPath.isClosedPath(s)?n:-1),-1!==e){const t=this.m_multiPath.getXY(e);t.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__._)(t,i)&&(i.x=t.x)}if(-1!==t){const e=this.m_multiPath.getXY(t);e.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Z)(r,e)&&(r.x=e.x)}}this.m_densifiedPoints.length=0,(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.$)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_curveType,r,i,this.m_bufferer.m_segmentStep,Number.NaN,this.m_bufferer.m_radTolerance,this.m_startAzimuth,this.m_endAzimuth,this.m_densifiedPoints,this.m_currentDensifiedDelta),this.addJoinAndBufferLeftSide(t),n--}return i.setCoordsPoint2D(this.m_multiPath.getXY(this.m_segIter.getStartPointIndex())),i.scale(this.m_bufferer.m_rpu),this.m_currentBufferedDelta=ue(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_bufferer.m_absDistance,i,this.m_lastAzimuth+.5*Math.PI,this.m_lastAzimuth+1.5*Math.PI,this.m_bufferer.m_cornerStep,this.m_bRunningInGnomonic,this.m_currentBufferedDelta,t),this.m_segIter.resetToVertex(e,s),this.m_segIter.nextSegment(),t}return this.m_bNextSegmentCannotJoin=!1,this.m_segIter.nextSegment(),e=this.m_bufferHelper.clone(),e}isSegmentBufferInCurrentGnomonic(e){return null!==this.m_gnomonic&&de(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,this.m_gnomonicCenterRad,this.m_minGnomonicRadius)}tryUpdateGnomonic(e){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,n=[0];return ge(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,t,s,n)?(this.m_gnomonicCenterRad.setCoordsPoint2D(s),this.m_minGnomonicRadius=n[0],this.m_gnomonic=xe(this.m_bufferer.m_gcs,t),!0):(this.m_gnomonic=null,!1)}checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(e,t){return this.m_bufferer.checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(this.m_densifiedPoints,e,this.m_startAzimuth[0],this.m_endAzimuth[0],this.m_bRunningInGnomonic,t)}addJoinAndBufferLeftSide(e){const t=this.m_densifiedPoints[0];let s=Number.NaN,n=this.m_startAzimuth[0]-_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.o;const i=this.m_endAzimuth[0]+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.o;let r=!1;if(!Number.isNaN(this.m_lastAzimuth)){this.m_lastAzimuth>=this.m_startAzimuth[0]?(s=this.m_lastAzimuth+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.o,n=s+Math.PI-(this.m_lastAzimuth-this.m_startAzimuth[0])):(s=this.m_lastAzimuth+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.o,n=s+Math.PI-(_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p-(this.m_startAzimuth[0]-this.m_lastAzimuth))),r=!(this.m_lastAzimuth>=this.m_startAzimuth[0]&&this.m_lastAzimuth-this.m_startAzimuth[0]<=Math.PI)&&!(this.m_lastAzimuth<this.m_startAzimuth[0]&&this.m_startAzimuth[0]-this.m_lastAzimuth>=Math.PI);let i=!1;if(Math.abs(n-s)<=.5*this.m_bufferer.m_cornerStep&&(r||(i=!0)),i){if(e.removePointFromPath(0,e.getPointCount()-1),!this.m_bRunningInGnomonic){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;t.setCoordsPoint2D(e.getXY(e.getPointCount()-1)),t.scale(this.m_bufferer.m_rpu),t.x-this.m_currentBufferedDelta<-Math.PI?this.m_currentBufferedDelta-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p:t.x-this.m_currentBufferedDelta>Math.PI&&(this.m_currentBufferedDelta+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.p)}n=.5*(n+s)}else if(r){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;s.setCoordsPoint2D(t),s.scale(1/this.m_bufferer.m_rpu),e.insertPoint2D(0,-1,s)}else ue(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_bufferer.m_absDistance,this.m_densifiedPoints[0],s,n,this.m_bufferer.m_cornerStep,this.m_bRunningInGnomonic,this.m_currentBufferedDelta,e)}this.m_startAzimuth[0]!==this.m_lastAzimuth&&this.m_numWinds++,ce(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_bufferer.m_absDistance,this.m_bufferer.m_curveType,this.m_densifiedPoints,n,i,this.m_bRunningInGnomonic,this.m_currentBufferedDelta,e),this.m_lastAzimuth=this.m_endAzimuth[0]}}class Ce extends ye{constructor(e,t){super(e.m_progressTracker),this.m_pointIndex=-1,this.m_bufferer=e,this.m_multiPoint=t,this.m_bNeedsSimplify=!1;const s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D;this.m_multiPoint.queryEnvelope(s);const n=s.getCenter(),i=n.clone();i.scale(this.m_bufferer.m_rpu),this.m_gnomonic=xe(this.m_bufferer.m_gcs,n),this.m_gnomonicCenterRad=i.clone(),this.m_minGnomonicRadius=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.Y)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,i,75/180*Math.PI)}next(){if(this.m_bNeedsSimplify=!1,++this.m_pointIndex===this.m_multiPoint.getPointCount())return null;const e=this.m_multiPoint.getXY(this.m_pointIndex);e.scale(this.m_bufferer.m_rpu),this.m_bRunningInGnomonic=this.isPointBufferInCurrentGnomonic(e),this.m_bRunningInGnomonic||(this.m_bRunningInGnomonic=this.tryUpdateGnomonic(e));const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_5__.a,s=this.m_bufferer.bufferPoint2D(e,this.m_bRunningInGnomonic,t);return this.m_bNeedsSimplify=s,t}isPointBufferInCurrentGnomonic(e){return null!==this.m_gnomonic&&pe(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,this.m_gnomonicCenterRad,this.m_minGnomonicRadius)}tryUpdateGnomonic(e){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,n=[0];return Pe(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,t,s,n)?(this.m_gnomonicCenterRad.setCoordsPoint2D(s),this.m_minGnomonicRadius=n[0],this.m_gnomonic=xe(this.m_bufferer.m_gcs,t),!0):(this.m_gnomonic=null,!1)}}class ve{getOperatorType(){return 10110}supportsCurves(){return!0}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,s,n,i,r,o,m){if(o){const o=new Se(e,t,s,n,i,!1,r,m);return(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.j).executeMany(o,t,m)}return new Se(e,t,s,n,i,!1,r,m)}execute(t,n,i,r,o,m,a){const h=new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.S([t]),c=[r],u=this.executeMany(h,n,i,c,o,!1,m,a).next();return u||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("geodesic buffer null output"),u}}class Se extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.G{constructor(e,t,s,r,o,m,a,h){super(),this.m_currentUnionEnvelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.Envelope2D,this.m_index=-1,this.m_dindex=-1,this.m_progressTracker=h,m&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)(""),t||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("");0===t.getCoordinateSystemType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),this.m_inputGeoms=e,this.m_spatialReference=t,this.m_curveType=s,this.m_distances=r,this.m_convergenceOffset=o,this.m_bOutlineOnly=m,this.m_bUnion=a}next(){let e;for(;e=this.m_inputGeoms.next();)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dindex+1<this.m_distances.length&&this.m_dindex++,this.geodesicBuffer(e,this.m_distances[this.m_dindex]);return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}geodesicBuffer(e,t){return me(e,this.m_spatialReference,this.m_curveType,t,this.m_convergenceOffset,this.m_progressTracker)}}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfY2h1bmtzX09wZXJhdG9yR2VvZGVzaWNCdWZmZXJfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDZ0QsZ0JBQWdCLDRCQUE0QixXQUFXLDJDQUFDLGdCQUFnQiwrQ0FBQyxhQUFhLDJDQUFDLHlCQUF5QiwyQ0FBQyxvQkFBb0IsMkNBQUMsaUJBQWlCLCtDQUFDLHdDQUF3QyxjQUFjLFNBQVMsY0FBYyxpQkFBaUIsMkJBQTJCLCtCQUErQixJQUFJLEtBQUsseUJBQXlCLFVBQVUsVUFBVSx5Q0FBeUMseUNBQXlDLDJDQUFDLG1CQUFtQiwrQkFBK0IsbUJBQW1CLFNBQVMsY0FBYyxTQUFTLGNBQWMsK0JBQStCLElBQUksS0FBSyx5QkFBeUIsa0JBQWtCLFVBQVUseUNBQXlDLHlDQUF5QywyQ0FBQyxtQkFBbUIsZ0NBQWdDLFNBQXdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdjFCO0FBQ0E7QUFDQTtBQUNBO0FBQ3UwQix5QkFBeUIseUNBQXlDLCtDQUFDLDRDQUE0QywrQ0FBQyxJQUFJLFFBQVEsZ0VBQUUsMEJBQTBCLEdBQUcsK0NBQUMsS0FBSyxnQ0FBZ0MsNkJBQTZCLDJDQUFDLDhCQUE4QixRQUFRLHVCQUF1QixZQUFZLEdBQUcsd0JBQXdCLHFCQUFxQixJQUFJLFlBQVksTUFBTSw4Q0FBOEMsOEJBQThCLHlCQUF5QixTQUFTLGVBQWUsc1pBQXNaLGlCQUFpQixZQUFZLGdEQUFDLG9CQUFvQixvREFBb0Qsa0JBQWtCLDRCQUE0QixvREFBb0Qsb0JBQW9CLHVCQUF1QixvREFBb0QsZUFBZSxrQkFBa0Isb0JBQW9CLFVBQVUsZ0RBQUMsQ0FBQywrQkFBK0IsUUFBUSwrQ0FBQyxZQUFZLEVBQUUsK0RBQUMsMkNBQTJDLGNBQWMsMkRBQUMsNkNBQTZDLHVDQUF1QyxVQUFVLHNCQUFzQixRQUFRLCtEQUFDLENBQUMsK0RBQUMsSUFBSSxVQUFV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MENBQUUsT0FBTywwQ0FBRSxPQUFPLHlUQUF5VCxzREFBc0QsMEtBQTBLLDRCQUE0QixrQ0FBa0MsMENBQTBDLDBDQUFFLENBQUMsNkJBQTZCLDBDQUFFLENBQUMsU0FBUyxzQ0FBc0MsaUVBQWlFLDBDQUFFLGdGQUFnRiwwQ0FBRSxjQUFjLDBDQUFFLHFQQUFxUCxTQUFTLGtFQUFrRSw0RUFBNEUsWUFBWSwwQ0FBRSxDQUFDLHNKQUFzSiwwQ0FBRSx3RUFBd0UsMENBQUUsRUFBRSxXQUFXLFdBQVcsWUFBWSwwQ0FBRSxDQUFDLCtFQUErRSwrTkFBK04sOFRBQThULG9CQUFvQixpQkFBaUIsK0dBQStHLFlBQVksc0RBQUMsQ0FBQyxtQ0FBbUMsa0NBQWtDLHVJQUF1SSwrREFBQyxrRUFBa0UsT0FBTyxnR0FBZ0csbURBQW1ELGlMQUFpTCxZQUFZLGdEQUFDLGdFQUFnRSxpQ0FBaUMsa0NBQWtDLGlOQUFpTixxQkFBcUIsWUFBWSwwQ0FBRSxPQUFPLDBDQUFFLE9BQU8sMFRBQTBULFNBQVMsa0JBQWtCLGFBQWEsaUJBQWlCLFNBQVMsMEJBQTBCLFNBQVMseUJBQXlCLFNBQVMsNkJBQTZCLE1BQU0saUNBQWlDLFdBQVcsMkRBQUMscUJBQXFCLGdDQUFnQyx1QkFBdUIsWUFBWSx1REFBQyx3REFBd0QsVUFBVSwrQ0FBQyxtQ0FBbUMsaUJBQWlCLHVEQUFDLENBQUMsNkJBQTZCLDBDQUEwQyxzREFBQyw4REFBOEQsK0NBQUMsUUFBUSwrQ0FBQyxLQUFLLGlDQUFpQywrQ0FBQywwSkFBMEosT0FBTyxNQUFNLEtBQUssMkJBQTJCLFFBQVEsK0NBQUMsbUtBQW1LLFlBQVksZ0JBQWdCLG9CQUFvQixPQUFPLFNBQVMsVUFBVSxTQUFTLG9CQUFvQix5R0FBOEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY2h1bmtzL0dlb21ldHJ5Q2xlYW5lci1CRUpNN0k0bC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY2h1bmtzL09wZXJhdG9yR2VvZGVzaWNCdWZmZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtHIGFzIHQsaCBhcyBlLHQgYXMgbn1mcm9tXCIuL0dlb21ldHJ5LmpzXCI7ZnVuY3Rpb24gaShpLGEpe2NvbnN0IGY9aS5nZXRHZW9tZXRyeVR5cGUoKTtyZXR1cm4gZj09PXQuZW51bVBvaW50P3IoaSk6ZShmKT91KGkpOmY9PT10LmVudW1NdWx0aVBvaW50P28oaSk6Zj09PXQuZW51bUVudmVsb3BlP2k6Zj09PXQuZW51bU11bHRpcGF0Y2g/KG4oXCJub3QgaW1wbGVtZW50ZWQgZm9yIG11bHRpcGF0Y2hcIiksaSk6aX1mdW5jdGlvbiByKHQpe3JldHVybiB0fWZ1bmN0aW9uIHUoZSl7aWYoYShlKSlyZXR1cm4gZTtjb25zdCBuPWUuY3JlYXRlSW5zdGFuY2UoKTtmb3IobGV0IGk9MCxyPWUuZ2V0UGF0aENvdW50KCk7aTxyO2krKyl7Y29uc3Qgcj1lLmdldFBhdGhTaXplKGkpO2lmKDAhPT1yKXtpZigxPT09cil7aWYoMD09PWUuZ2V0U2VnbWVudENvdW50UGF0aChpKSljb250aW51ZTtpZihlLmdldFNlZ21lbnRUeXBlKGUuZ2V0UGF0aFN0YXJ0KGkpKT09PXQuZW51bUxpbmUpY29udGludWU7aWYoIWUuaXNDbG9zZWRQYXRoKGkpKWNvbnRpbnVlfW4uYWRkUGF0aChlLGksITApfX1yZXR1cm4gbn1mdW5jdGlvbiBvKHQpe3JldHVybiB0fWZ1bmN0aW9uIGEoZSl7Zm9yKGxldCBuPTAsaT1lLmdldFBhdGhDb3VudCgpO248aTtuKyspe2NvbnN0IGk9ZS5nZXRQYXRoU2l6ZShuKTtpZigwPT09aSlyZXR1cm4hMTtpZigxPT09aSl7aWYoMD09PWUuZ2V0U2VnbWVudENvdW50UGF0aChuKSlyZXR1cm4hMTtpZihlLmdldFNlZ21lbnRUeXBlKGUuZ2V0UGF0aFN0YXJ0KG4pKT09PXQuZW51bUxpbmUpcmV0dXJuITE7aWYoIWUuaXNDbG9zZWRQYXRoKG4pKXJldHVybiExfX1yZXR1cm4hMH1leHBvcnR7aSBhcyBjfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7UyBhcyBlLEcgYXMgdH1mcm9tXCIuL1NpbXBsZUdlb21ldHJ5Q3Vyc29yLmpzXCI7aW1wb3J0e2QgYXMgcyx0IGFzIG4sYSBhcyBpLGMgYXMgcixpIGFzIG8sRyBhcyBtLG0gYXMgYSxmIGFzIGgsZSBhcyBjLGggYXMgdSxuIGFzIGx9ZnJvbVwiLi9HZW9tZXRyeS5qc1wiO2ltcG9ydHtFbnZlbG9wZTJEIGFzIF99ZnJvbVwiLi9FbnZlbG9wZTJELmpzXCI7aW1wb3J0e2ogYXMgZixEIGFzIGQsdiBhcyBnLE0gYXMgcCxOIGFzIFAseiBhcyB4LHcgYXMgYixRIGFzIHkscCBhcyB3LFIgYXMgQyxTIGFzIHYsVSBhcyBTLGYgYXMgRCxPIGFzIEksViBhcyBHLFcgYXMgTSxYIGFzIFQsUCBhcyBOLEEgYXMgayxZIGFzIEEsWiBhcyBFLF8gYXMgcSwkIGFzIFIsYTAgYXMgeixhMSBhcyBYfWZyb21cIi4vUHJvamVjdGlvblRyYW5zZm9ybWF0aW9uLmpzXCI7aW1wb3J0e2IgYXMgQixjIGFzIFl9ZnJvbVwiLi90c2xpYi5lczYuanNcIjtpbXBvcnR7YSBhcyBPLFAgYXMgaixFIGFzIEZ9ZnJvbVwiLi9NdWx0aVBhdGhJbXBsLmpzXCI7aW1wb3J0e2UgYXMgVyxjIGFzIEosUCBhcyBVLGIgYXMgSCxmIGFzIFYsaCBhcyBMLHMgYXMgUX1mcm9tXCIuL0VudmVsb3BlLmpzXCI7aW1wb3J0e1QgYXMgWn1mcm9tXCIuL1RyYW5zZm9ybWF0aW9uMkQuanNcIjtpbXBvcnR7ZCBhcyAkLG0gYXMgSyxQIGFzIGVlLFMgYXMgdGUsbyBhcyBzZSxwIGFzIG5lfWZyb21cIi4vUG9pbnQyRC5qc1wiO2ltcG9ydHtjIGFzIGllfWZyb21cIi4vT3BlcmF0b3JDbGlwLmpzXCI7aW1wb3J0e2MgYXMgcmV9ZnJvbVwiLi9HZW9tZXRyeUNsZWFuZXItQkVKTTdJNGwuanNcIjtpbXBvcnR7TyBhcyBvZX1mcm9tXCIuL09wZXJhdG9yRGVuc2lmeS5qc1wiO2Z1bmN0aW9uIG1lKGUsdCxzLG4sYSxoKXtuPE51bWJlci5NQVhfVkFMVUUmJm4+LU51bWJlci5NQVhfVkFMVUV8fGkoXCJHZW9kZXNpY19idWZmZXJlci5idWZmZXIgLSBiYWQgZGlzdGFuY2VcIikscihlKTtjb25zdCBjPXJlKGUpLHU9Yy5nZXRHZW9tZXRyeVR5cGUoKTtpZihvKHUpKXtjb25zdCBlPWMuZ2V0UG9pbnRDb3VudCgpLGk9OGU2O2lmKE1hdGguYWJzKG4pPmkmJihlPjUwfHx1IT09bS5lbnVtTXVsdGlQb2ludCYmND09PXMmJmU+Mikpe2xldCBlPWM7Y29uc3Qgcj1uPjA/MTotMSxvPTdlNjtsZXQgbT1uLHU9MTtkb3t1KyssbT0oTWF0aC5hYnMobSktbykqcn13aGlsZShNYXRoLmFicyhtKT5pKTttPW47Zm9yKGxldCBuPTA7bjx1LTE7bisrKWU9aGUoZSx0LHMsbypyLGEsdSxoKSxtPShNYXRoLmFicyhtKS1vKSpyO3JldHVybiBlPWhlKGUsdCxzLG0sYSx1LGgpLGV9fXJldHVybiBoZShjLHQscyxuLGEsMSxoKX1jbGFzcyBhZXtjb25zdHJ1Y3RvcihlKXt0aGlzLm1fc3I9bnVsbCx0aGlzLm1fZ2NzPW51bGwsdGhpcy5tX3RyYW5zZm9ybT1udWxsLHRoaXMubV9hPTAsdGhpcy5tX2VTcXVhcmVkPTAsdGhpcy5tX3JwdT0wLHRoaXMubV9yYWRUb2xlcmFuY2U9MCx0aGlzLm1fcTkwPTAsdGhpcy5tX2djczkwPTAsdGhpcy5tX2djczE4MD0wLHRoaXMubV9nY3MzNjA9MCx0aGlzLm1fZ2NzNjA9MCx0aGlzLm1fZWxsaXB0aWNUb0dlb2Rlc2ljTWF4UmF0aW89MCx0aGlzLm1fY3VydmVUeXBlPTAsdGhpcy5tX2JTaGFwZVByZXNlcnZpbmc9ITEsdGhpcy5tX2Rpc3RhbmNlPTAsdGhpcy5tX2Fic0Rpc3RhbmNlPTAsdGhpcy5tX2NvbnZlcmdlbmNlT2Zmc2V0PTAsdGhpcy5tX2Nvcm5lclN0ZXA9MCx0aGlzLm1fc2VnbWVudFN0ZXA9MCx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyPWV9YnVmZmVyUG9seWdvbihlKXtjb25zdCB0PW5ldyBPLHM9bmV3IHdlKHRoaXMsZSx0KTtyZXR1cm4gdGhpcy5wcm9jZXNzR25vbW9uaWNCdWZmZXJQaWVjZXNDdXJzb3IoITAscyl9YnVmZmVyUG9seWxpbmUoZSl7Y29uc3QgdD1uZXcgd2UodGhpcyxlLG51bGwpO3JldHVybiB0aGlzLnByb2Nlc3NHbm9tb25pY0J1ZmZlclBpZWNlc0N1cnNvcighMCx0KX1idWZmZXJNdWx0aVBvaW50KGUpe2NvbnN0IHQ9bmV3IENlKHRoaXMsZSk7cmV0dXJuIHRoaXMucHJvY2Vzc0dub21vbmljQnVmZmVyUGllY2VzQ3Vyc29yKCExLHQpfWJ1ZmZlclBvaW50KGUpe2NvbnN0IHQ9ZS5nZXRYWSgpO3Quc2NhbGUodGhpcy5tX3JwdSk7bGV0IHM9bmV3IE87aWYodGhpcy5idWZmZXJQb2ludDJEKHQsITEscykpe2NvbnN0IGU9SChudWxsLHMsITApO3M9dyhzLGUsITAsITAsLTEsdGhpcy5tX3Byb2dyZXNzVHJhY2tlciwwLCExKX1yZXR1cm4gcz0obmV3IHgpLmZvbGRJbnRvMzYwUmFuZ2VHZW9kZXRpYyhzLHRoaXMubV9nY3MsMiksc31wcm9jZXNzR25vbW9uaWNCdWZmZXJQaWVjZXNDdXJzb3IoZSx0KXtjb25zdCBzPXQ7bGV0IG49cy5nZXRHbm9tb25pYygpO2NvbnN0IGk9Qyh2KCkpO2xldCByPW5ldyBTLG89KG5ldyBmKS5leGVjdXRlTWFueShyLGksdGhpcy5tX3Byb2dyZXNzVHJhY2tlciwyKTtjb25zdCBtPSQoNiwhMSksYT1LKF8sNik7dGhpcy5pbml0aWFsaXplR3JpZChtLGEpO2NvbnN0IGg9W251bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsXSxjPVtudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbF0sdT1bbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGxdO2xldCBsLGQsZztmb3IoO251bGwhPT0obD1zLm5leHQoKSk7KXtpZihkPXMuZ2V0R25vbW9uaWMoKSxkIT09bil7aWYobnVsbCE9PW4pe2xldCB0PW8ubmV4dCgpO2lmKHI9bnVsbCxvPW51bGwsbnVsbCE9dCl7Y29uc3Qgcz1IKGksdCwhMCkscj1XKHMpO3Q9bi51bnByb2plY3QodCxyLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIpLHRoaXMucHV0SW5HcmlkQ3Vyc29ycyhlLHQsaSwhMCxtLGEsaCxjLHUpfX1udWxsIT09ZCYmKHI9bmV3IFMsbz0obmV3IGYpLmV4ZWN1dGVNYW55KHIsaSx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyLDIpKSxuPWR9aWYocy5pc1J1bm5pbmdJbkdub21vbmljKCkpe2lmKGQucHJvamVjdChsKSxzLm5lZWRzU2ltcGxpZnkoKSl7Y29uc3QgZT1IKG51bGwsbCwhMCk7bD13KGwsZSwhMCwhMCwtMSx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyLDAsITEpfXIudGljayhiZShsKSksby50b2NrKCl9ZWxzZSB0aGlzLnB1dEluR3JpZEN1cnNvcnMoZSxsLGksITAsbSxhLGgsYyx1KX1sZXQgcD0hMTtmb3IobGV0IF89MDtfPDY7XysrKWlmKG51bGwhPXVbX10pe3A9ITA7YnJlYWt9aWYocCl7bGV0IHQ9ITE7Y29uc3QgbD1bbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLG51bGxdO2lmKGUpe2NvbnN0IG49cy5tX2RlbnNpZmllZDtpZihzLm1fZGVuc2lmaWVkPW51bGwsbnVsbCE9PW4pe2NvbnN0IHM9bmV3IFo7cy5zY2FsZSgxL3RoaXMubV9ycHUsMS90aGlzLm1fcnB1KSxuLmFwcGx5VHJhbnNmb3JtYXRpb24ocyksdGhpcy5tX2Rpc3RhbmNlPjA/dGhpcy5wdXRJbkdyaWRDdXJzb3JzKGUsbixpLCExLG0sYSxoLGMsdSk6KHRoaXMucHJvY2Vzc0luR3JpZChlLG4sITEsbSxhLGgsbCksdD0hMCl9fWNvbnN0IF89bmV3IFMsZD0obmV3IGYpLmV4ZWN1dGVNYW55KF8sdGhpcy5tX2djcyx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyLDIpO2lmKG51bGwhPT1vKXtsZXQgdD1vLm5leHQoKTtyPW51bGwsbz1udWxsO2NvbnN0IHM9SChpLHQsITApLGw9VyhzKTt0PW4udW5wcm9qZWN0KHQsbCx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyKSx0aGlzLnB1dEluR3JpZEN1cnNvcnMoZSx0LGksITAsbSxhLGgsYyx1KX1mb3IobGV0IGU9MDtlPDY7ZSsrKWlmKG51bGwhPXVbZV0pe2xldCBzPXVbZV0ubmV4dCgpO3VbZV09bnVsbCxjW2VdPW51bGwsdCYmbnVsbCE9PWxbZV0mJihzPShuZXcgRCkuZXhlY3V0ZShsW2VdLHMsaSx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyKSk7Y29uc3Qgbj1IKGkscywhMCkscj1XKG4pO3M9aFtlXS51bnByb2plY3QocyxyLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIpLHM9KG5ldyBJKS5leGVjdXRlKHMsdGhpcy5tX2djcywhMCx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyKSxfLnRpY2soYmUocykpLGQudG9jaygpfWc9ZC5uZXh0KCl9ZWxzZXtsZXQgdCxtPSExO2lmKGUpe2xldCBlPXMubV9kZW5zaWZpZWQ7aWYocy5tX2RlbnNpZmllZD1udWxsLG51bGwhPT1lKXtjb25zdCBzPW5ldyBaO3Muc2NhbGUoMS90aGlzLm1fcnB1LDEvdGhpcy5tX3JwdSksZS5hcHBseVRyYW5zZm9ybWF0aW9uKHMpLGQucHJvamVjdChlKTtjb25zdCBuPUgobnVsbCxlLCEwKTtlPXcoZSxuLCExLCEwLC0xLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIsMCwhMSksdGhpcy5tX2Rpc3RhbmNlPjA/KHIudGljayhiZShlKSksby50b2NrKCkpOih0PWUsbT0hMCl9fWxldCBhPW8ubmV4dCgpO3I9bnVsbCxvPW51bGwsbSYmKGE9KG5ldyBEKS5leGVjdXRlKHQsYSxpLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIpKTtjb25zdCBoPUgoaSxhLCEwKSxjPVcoaCk7Zz1uLnVucHJvamVjdChhLGMsdGhpcy5tX3Byb2dyZXNzVHJhY2tlciksZz0obmV3IEkpLmV4ZWN1dGUoZyx0aGlzLm1fZ2NzLCEwLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIpfXJldHVybiBnPShuZXcgeCkuZm9sZEludG8zNjBSYW5nZUdlb2RldGljKGcsdGhpcy5tX2djcywyKSxnfXB1dEluR3JpZEN1cnNvcnMoZSx0LHMsbixpLHIsbyxtLGEpe2NvbnN0IGg9W251bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsXTt0aGlzLnByb2Nlc3NJbkdyaWQoZSx0LG4saSxyLG8saCk7Zm9yKGxldCBjPTA7Yzw2O2MrKyludWxsIT09aFtjXSYmKG51bGw9PT1tW2NdJiYobVtjXT1uZXcgUyxhW2NdPShuZXcgZikuZXhlY3V0ZU1hbnkobVtjXSxzLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIsMikpLG1bY10udGljayhiZShoW2NdKSksYVtjXS50b2NrKCkpfXByb2Nlc3NJbkdyaWQoZSx0LHMsbixpLHIsbyl7Y29uc3QgbT0uMDEsYT10aGlzLmluc2VydEdlb2RldGljUG9pbnRzQWxvbmdHcmlkKHQsaSxtKTtmb3IobGV0IGg9MDtoPDY7aCsrKXtpZihuW2hdKWNvbnRpbnVlO2NvbnN0IGU9aVtoXS5jbG9uZSgpO2UuaW5mbGF0ZUNvb3JkcyhtLG0pO2NvbnN0IGM9Vih0LGUpLHU9SihudWxsLGMsITEpLnRvdGFsKCk7bGV0IGw9aWUoYSxlLHUsTnVtYmVyLk5hTix0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyKTtpZihudWxsIT09bCYmIWwuaXNFbXB0eSgpKXtpZihsPT09YSYmKGw9bC5jbG9uZSgpKSxudWxsPT09cltoXSl7Y29uc3QgZT1uZXcgZWU7aDwzP2Uuc2V0Q29vcmRzKDAsMSk6ZS5zZXRDb29yZHMoMCwtMSk7Y29uc3QgdD1uZXcgZWU7dC5zZXRBZGQoaVtoXS5nZXRDZW50ZXIoKSxlKSxyW2hdPXhlKHRoaXMubV9nY3MsdCl9cltoXS5wcm9qZWN0KGwpO2NvbnN0IGU9SChudWxsLGwsITApO2w9dyhsLGUscywhMCwtMSx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyLDAsITEpLG9baF09bH19fWluc2VydEdlb2RldGljUG9pbnRzQWxvbmdHcmlkKGUsdCxzKXtjb25zdCBuPV8uY29uc3RydWN0KHRbM10ueG1pbix0WzNdLnltaW4sdFsyXS54bWF4LHRbMl0ueW1heCksaT1HKHRoaXMubV9nY3MsbixlLCEwLHRoaXMubV9wcm9ncmVzc1RyYWNrZXIpLHI9bmV3IEYsbz1yLmFkZEdlb21ldHJ5KGkpO3JldHVybiBNKHIsbyx0aGlzLm1fZ2NzLDAsMiwhMCx0WzBdLnhtYXgrcyksTShyLG8sdGhpcy5tX2djcywwLDIsITAsdFsxXS54bWF4K3MpLE0ocixvLHRoaXMubV9nY3MsMCwyLCExLHRbMV0ueW1pbitzKSwwIT09cyYmKE0ocixvLHRoaXMubV9nY3MsMCwyLCEwLHRbMF0ueG1heC1zKSxNKHIsbyx0aGlzLm1fZ2NzLDAsMiwhMCx0WzFdLnhtYXgtcyksTShyLG8sdGhpcy5tX2djcywwLDIsITEsdFsxXS55bWluLXMpKSxyLmdldEdlb21ldHJ5KG8pfWluaXRpYWxpemVHcmlkKGUsdCl7Zm9yKGxldCBzPTA7czw2O3MrKyllW3NdPSExO3RbMF0uc2V0Q29vcmRzKHt4bWluOi10aGlzLm1fZ2NzMTgwLHltaW46MCx4bWF4Oi10aGlzLm1fZ2NzNjAseW1heDp0aGlzLm1fZ2NzOTB9KSx0WzFdLnNldENvb3Jkcyh7eG1pbjotdGhpcy5tX2djczYwLHltaW46MCx4bWF4OnRoaXMubV9nY3M2MCx5bWF4OnRoaXMubV9nY3M5MH0pLHRbMl0uc2V0Q29vcmRzKHt4bWluOnRoaXMubV9nY3M2MCx5bWluOjAseG1heDp0aGlzLm1fZ2NzMTgwLHltYXg6dGhpcy5tX2djczkwfSksdFszXS5zZXRDb29yZHMoe3htaW46LXRoaXMubV9nY3MxODAseW1pbjotdGhpcy5tX2djczkwLHhtYXg6LXRoaXMubV9nY3M2MCx5bWF4OjB9KSx0WzRdLnNldENvb3Jkcyh7eG1pbjotdGhpcy5tX2djczYwLHltaW46LXRoaXMubV9nY3M5MCx4bWF4OnRoaXMubV9nY3M2MCx5bWF4OjB9KSx0WzVdLnNldENvb3Jkcyh7eG1pbjp0aGlzLm1fZ2NzNjAseW1pbjotdGhpcy5tX2djczkwLHhtYXg6dGhpcy5tX2djczE4MCx5bWF4OjB9KX1jaGVja0FuZFByZXBTZWdtZW50Rm9yQ3Jvc3NpbmdBemltdXRoc09yUG9sZVdyYXAoZSx0LHMsbixpLHIpe2NvbnN0IG89ZVswXSxtPWUuYXQoLTEpLGE9by55PG0ueT9vLnk6bS55LGg9by55Pm0ueT9vLnk6bS55LGM9cC5xKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCxhKSx1PXAucSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsaCk7aWYodGhpcy5tX3E5MC0oYyt0K3RoaXMubV9hYnNEaXN0YW5jZSk+LjAwMSYmdGhpcy5tX3E5MCsodS10LXRoaXMubV9hYnNEaXN0YW5jZSk+LjAwMSlyZXR1cm4hMTtjb25zdCBsPXMtc2UsXz1uK3NlLGY9bC1NYXRoLlBJLGQ9bCtNYXRoLlBJLGc9XytNYXRoLlBJLFA9W051bWJlci5OYU5dLHg9W051bWJlci5OYU5dLGI9W051bWJlci5OYU5dLHk9W051bWJlci5OYU5dO2xldCB3PSExO2lmKGxlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCx0aGlzLm1fcnB1LHRoaXMubV9hYnNEaXN0YW5jZSxvLGwsZixtLF8sUCx4KSxsZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsdGhpcy5tX3JwdSx0aGlzLm1fYWJzRGlzdGFuY2UsbSxnLF8sbyxmLGIseSksKF88UFswXSYmUFswXTxnfHxfPHhbMF0mJnhbMF08ZykmJih3PSEwKSx3fHwoZjxiWzBdJiZiWzBdPGx8fGY8eVswXSYmeVswXTxsKSYmKHc9ITApLCF3JiZpKXJldHVybiExO2NvbnN0IEM9W107Zm9yKGxldCBwPWUubGVuZ3RoLTE7cD49MDtwLS0pQy5wdXNoKGVbcF0pO3Iuc2V0RW1wdHkoKSxyLmFkZFBhdGhQb2ludDJEKG51bGwsMCwhMCk7bGV0IHY9MDt2PWNlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCx0aGlzLm1fcnB1LHRoaXMubV9hYnNEaXN0YW5jZSx0aGlzLm1fY3VydmVUeXBlLGUsbCxfLGksdixyKSx2PXVlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCx0aGlzLm1fcnB1LHRoaXMubV9hYnNEaXN0YW5jZSxtLF8sZyx0aGlzLm1fY29ybmVyU3RlcCxpLHYscixQWzBdLHhbMF0pLHY9Y2UodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLHRoaXMubV9ycHUsdGhpcy5tX2Fic0Rpc3RhbmNlLHRoaXMubV9jdXJ2ZVR5cGUsQyxnLGQsaSx2LHIpLHY9dWUodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLHRoaXMubV9ycHUsdGhpcy5tX2Fic0Rpc3RhbmNlLG8sZixsLHRoaXMubV9jb3JuZXJTdGVwLGksdixyLGJbMF0seVswXSk7bGV0IFM9ITE7cmV0dXJuIGl8fChTPXRoaXMuY2hlY2tBbmRQcmVwRm9yUG9sZShyKSksd3x8U31idWZmZXJQb2ludDJEKGUsdCxzKXtzLnNldEVtcHR5KCkscy5hZGRQYXRoUG9pbnQyRChudWxsLDAsITApO2NvbnN0IG49MDt1ZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsdGhpcy5tX3JwdSx0aGlzLm1fYWJzRGlzdGFuY2UsZSwtdGhpcy5tX2Nvcm5lclN0ZXAsMipNYXRoLlBJLHRoaXMubV9jb3JuZXJTdGVwLHQsbixzKTtsZXQgaT0hMTtyZXR1cm4gdHx8KGk9dGhpcy5jaGVja0FuZFByZXBGb3JQb2xlKHMpKSxpfWNoZWNrQW5kUHJlcEZvclBvbGUoZSl7Y29uc3QgdD10aGlzLmNoZWNrQW5kUHJlcEZvclBvbGVUb3VjaChlKSxzPXRoaXMuY2hlY2tBbmRQcmVwRm9yUG9sZVdyYXAoZSk7cmV0dXJuIHR8fHN9Y2hlY2tBbmRQcmVwRm9yUG9sZVRvdWNoKGUpe2NvbnN0IHQ9bmV3IF87cmV0dXJuIGUucXVlcnlFbnZlbG9wZSh0KSwhKCFUKHQueW1heCx0aGlzLm1fZ2NzOTApJiYhVCh0LnltaW4sLXRoaXMubV9nY3M5MCkpJiYodGhpcy5wcmVwUG9sZVRvdWNoKGUpLCEwKX1jaGVja0FuZFByZXBGb3JQb2xlV3JhcChlKXtjb25zdCB0PWUuZ2V0WFkoMCkscz1lLmdldFhZKGUuZ2V0UG9pbnRDb3VudCgpLTEpO3JldHVybiBNYXRoLmFicyh0Lngtcy54KT50aGlzLm1fZ2NzMTgwPyh0aGlzLnByZXBTaW5nbGVQb2xlV3JhcChlKSwhMCk6dGhpcy5jaGVja0FuZFByZXBGb3JEb3VibGVQb2xlV3JhcChlKX1jaGVja0FuZFByZXBGb3JEb3VibGVQb2xlV3JhcChlKXtyZXR1cm4gZS5jYWxjdWxhdGVBcmVhMkQoKTwwJiYodGhpcy5wcmVwRG91YmxlUG9sZVdyYXAoZSksITApfXByZXBQb2xlVG91Y2goZSl7Y29uc3QgdD1uZXcgTzt0Lmluc2VydFBhdGgyRCgtMSxudWxsLDAsMCwhMCk7Y29uc3Qgcz1lLmdldFBhdGhTdGFydCgwKSxuPWUuZ2V0UGF0aEVuZCgwKSxpPW4tcztsZXQgcj0tMTtmb3Iocj1zO3I8bjtyKyspe2NvbnN0IHQ9ZS5nZXRYWShyKSxzPVQodC55LHRoaXMubV9nY3M5MCksbj1UKHQueSwtdGhpcy5tX2djczkwKTtpZighcyYmIW4pYnJlYWt9bGV0IG89cixtPSExLGE9TnVtYmVyLk5hTjtkb3tjb25zdCBuPWUuZ2V0WFkobykscj1UKG4ueSx0aGlzLm1fZ2NzOTApLGg9VChuLnksLXRoaXMubV9nY3M5MCksYz1zKyhvKzEtcyklaTtpZihyfHxoKXtsZXQgcz1lZS5jb25zdHJ1Y3QoYSxuLnkpO3QuaW5zZXJ0UG9pbnQyRCgwLC0xLHMpO2NvbnN0IGk9ZS5nZXRYWShjKSxyPVQoaS55LHRoaXMubV9nY3M5MCksbz1UKGkueSwtdGhpcy5tX2djczkwKTtyfHxvfHwocz1lZS5jb25zdHJ1Y3QoaS54LG4ueSksbT90LnNldFhZKHQuZ2V0UG9pbnRDb3VudCgpLTEscyk6dC5pbnNlcnRQb2ludDJEKDAsLTEscykpLG09ITB9ZWxzZSB0Lmluc2VydFBvaW50MkQoMCwtMSxuKSxhPW4ueCxtPSExO289Y313aGlsZShvIT09cik7ZS5zZXRFbXB0eSgpLGUuYWRkKHQsITEpfXByZXBTaW5nbGVQb2xlV3JhcChlKXtjb25zdCB0PW5ldyBPLHM9bmV3IE8sbj1uZXcgWixpPWUuZ2V0WFkoZS5nZXRQYXRoU3RhcnQoMCkpLHI9ZS5nZXRYWShlLmdldFBhdGhFbmQoMCktMSksbz10aGlzLm1fZ2NzMzYwLG09dGhpcy5tX2djczE4MCxhPW5ldyBfO2Euc2V0Q29vcmRzKHt4bWluOi10aGlzLm1fZ2NzMTgwLHltaW46LXRoaXMubV9nY3M5MCx4bWF4OnRoaXMubV9nY3MxODAseW1heDp0aGlzLm1fZ2NzOTB9KTtjb25zdCBoPW5ldyBfO2UucXVlcnlFbnZlbG9wZShoKTtjb25zdCBjPU1hdGguY2VpbChoLndpZHRoKCkvbyk7bGV0IHUsbDtpLng+ci54Pyh1PS1vLGw9dGhpcy5tX2djczkwKToodT1vLGw9LXRoaXMubV9nY3M5MCksbi5zZXRTaGlmdENvb3Jkcyh1LDApLHQuYWRkUGF0aChlLDAsITApLHMuYWRkKHQsITEpO2NvbnN0IGY9bmV3IFU7Zm9yKGxldCBfPTA7XzxjO18rKylzLmFwcGx5VHJhbnNmb3JtYXRpb24obikscy5nZXRQb2ludEJ5VmFsKDAsZiksdC5saW5lVG9Qb2ludChmKSx0LmFkZFNlZ21lbnRzRnJvbVBhdGgocywwLDAscy5nZXRTZWdtZW50Q291bnQoKS0xLCExKTtjb25zdCBkPXQuZ2V0WFkoMCksZz10LmdldFhZKHQuZ2V0UG9pbnRDb3VudCgpLTEpO2QueT1sLGcueT1sLHQubGluZVRvKGcpO2NvbnN0IHA9bmV3IGVlO2ZvcihwLnNldENvb3Jkc1BvaW50MkQoZykscC54LT0uNSp1O01hdGguYWJzKHAueC1kLngpPm07KXQubGluZVRvKHApLHAueC09LjUqdTt0LmxpbmVUbyhkKTtjb25zdCBQPWEuZ2V0Q2VudGVyWCgpLHg9bmV3IF87dC5xdWVyeUVudmVsb3BlKHgpO2xldCBiPTA7Y29uc3QgeT14LmdldENlbnRlcigpLng7eS1QPm0/Yj0tTWF0aC5jZWlsKCh5LVAtbSkvbyk6UC15Pm0mJihiPU1hdGguY2VpbCgoUC15LW0pL28pKSwwIT09YiYmKG4uc2V0U2hpZnRDb29yZHMoYipvLDApLHQuYXBwbHlUcmFuc2Zvcm1hdGlvbihuKSk7Y29uc3Qgdz1uZXcgRixDPXcuYWRkR2VvbWV0cnkodCk7TSh3LEMsdGhpcy5tX2djcywwLDIsITAsYS54bWluKSxNKHcsQyx0aGlzLm1fZ2NzLDAsMiwhMCxhLnhtYXgpO2NvbnN0IHY9dy5nZXRHZW9tZXRyeShDKSxTPVYodixhKTtTLmluZmxhdGVDb29yZHMoMCwxKTtjb25zdCBEPUoobnVsbCxTLCEwKS50b3RhbCgpLEk9aWUodixhLEQsTnVtYmVyLk5hTix0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyKTtlLnNldEVtcHR5KCksZS5hZGQoSSwhMSl9cHJlcERvdWJsZVBvbGVXcmFwKGUpe2NvbnN0IHQ9dGhpcy5tX2djczM2MCxzPXRoaXMubV9nY3MxODAsbj1uZXcgXztuLnNldENvb3Jkcyh7eG1pbjotdGhpcy5tX2djczE4MCx5bWluOi10aGlzLm1fZ2NzOTAseG1heDp0aGlzLm1fZ2NzMTgwLHltYXg6dGhpcy5tX2djczkwfSk7Y29uc3QgaT1uLmdldENlbnRlcigpLngscj1uZXcgXztlLnF1ZXJ5UGF0aEVudmVsb3BlKDAscik7bGV0IG8sbT0wLGE9ci5nZXRDZW50ZXIoKS54O2lmKGEtaT5zP209LU1hdGguY2VpbCgoYS1pLXMpL3QpOmktYT5zJiYobT1NYXRoLmNlaWwoKGktYS1zKS90KSksMCE9PW0pe2NvbnN0IHM9bmV3IFo7cy5zZXRTaGlmdENvb3JkcyhtKnQsMCksZS5nZXRJbXBsKCkuYXBwbHlUcmFuc2Zvcm1hdGlvblRvUGF0aChzLDApLGUucXVlcnlQYXRoRW52ZWxvcGUoMCxyKSxhPXIuZ2V0Q2VudGVyKCkueH1jb25zdCBoPW5ldyBfO24uY29udGFpbnNFeGNsdXNpdmVFbnZlbG9wZShyKT8obz0hMSxoLnNldENvb3Jkcyh7ZW52MkQ6bn0pKToobz0hMCxoLnNldENvb3Jkcyh7ZW52MkQ6bn0pLGgueG1pbi09dCxoLnhtYXgrPXQpO2xldCBjPWUuY3JlYXRlSW5zdGFuY2UoKTtjLmFkZFBhdGhQb2ludDJEKG51bGwsMCwhMCk7Y29uc3QgdT1uZXcgZWU7aWYodS5zZXRDb29yZHMoaC54bWluLGgueW1pbiksYy5pbnNlcnRQb2ludDJEKDAsLTEsdSksdS5zZXRDb29yZHMoaC54bWluLGgueW1heCksYy5pbnNlcnRQb2ludDJEKDAsLTEsdSksdS5zZXRDb29yZHMoLjUqKGgueG1pbitoLnhtYXgpLGgueW1heCksYy5pbnNlcnRQb2ludDJEKDAsLTEsdSksdS5zZXRDb29yZHMoaC54bWF4LGgueW1heCksYy5pbnNlcnRQb2ludDJEKDAsLTEsdSksdS5zZXRDb29yZHMoaC54bWF4LGgueW1pbiksYy5pbnNlcnRQb2ludDJEKDAsLTEsdSksdS5zZXRDb29yZHMoLjUqKGgueG1pbitoLnhtYXgpLGgueW1pbiksYy5pbnNlcnRQb2ludDJEKDAsLTEsdSksbyl7Yy5hZGRQYXRoKGUsMCwhMCk7Y29uc3Qgcz1uZXcgWjthPGk/cy5zZXRTaGlmdENvb3Jkcyh0LDApOnMuc2V0U2hpZnRDb29yZHMoLXQsMCksZS5nZXRJbXBsKCkuYXBwbHlUcmFuc2Zvcm1hdGlvblRvUGF0aChzLDApLGMuYWRkUGF0aChlLDAsITApO2NvbnN0IHI9bmV3IEYsbz1yLmFkZEdlb21ldHJ5KGMpO00ocixvLHRoaXMubV9nY3MsMCwyLCEwLG4ueG1pbiksTShyLG8sdGhpcy5tX2djcywwLDIsITAsbi54bWF4KSxjPXIuZ2V0R2VvbWV0cnkobyk7Y29uc3QgbT1WKGMsbik7bS5pbmZsYXRlQ29vcmRzKDAsMSk7Y29uc3QgaD1KKG51bGwsbSwhMCkudG90YWwoKTtjPWllKGMsbixoLE51bWJlci5OYU4sdGhpcy5tX3Byb2dyZXNzVHJhY2tlcil9ZWxzZSBjLmFkZFBhdGgoZSwwLCEwKTtlLnNldEVtcHR5KCksZS5hZGQoYywhMSl9c2V0TWluQ29ybmVyU3RlcCgpe2NvbnN0IGU9e3N0YWNrOltdLGVycm9yOnZvaWQgMCxoYXNFcnJvcjohMX07dHJ5e2xldCBzPU1hdGgubWluKE1hdGguUEkqdGhpcy5tX2EtdGhpcy5tX2Fic0Rpc3RhbmNlLHRoaXMubV9hYnNEaXN0YW5jZSk7cz1NYXRoLm1pbihzLC4xMjUqdGhpcy5tX2EqTWF0aC5QSSk7Y29uc3Qgbj1uZXcgZWU7bi5zZXRDb29yZHMoMCwxMCp0aGlzLm1fcnB1KTtjb25zdCBpPTA7bGV0IHI9NDUqdGhpcy5tX3JwdTtjb25zdCBvPUIoZSxuZXcgdGUobmV3IE4sbmV3IE4pLCExKSxtPUIoZSxuZXcgdGUobmV3IE4sbmV3IE4pLCExKSxhPUIoZSxuZXcgdGUobmV3IE4sbmV3IE4pLCExKSxoPUIoZSxuZXcgdGUobmV3IE4sbmV3IE4pLCExKSxjPW5ldyBlZSx1PW5ldyBlZSxsPW5ldyBlZSxfPW5ldyBlZTtmb3Ioay5nZW9kZXNpY0Nvb3JkaW5hdGUodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLG4ueCxuLnkscyxpLG8uYXQoMCksby5hdCgxKSksYy5zZXRDb29yZHMoby5hdCgwKS52YWwsby5hdCgxKS52YWwpLGsuZ2VvZGVzaWNDb29yZGluYXRlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCxuLngsbi55LHMscixtLmF0KDApLG0uYXQoMSkpLHUuc2V0Q29vcmRzKG0uYXQoMCkudmFsLG0uYXQoMSkudmFsKTs7KXtjb25zdCBlPXtzdGFjazpbXSxlcnJvcjp2b2lkIDAsaGFzRXJyb3I6ITF9O3RyeXtjb25zdCB0PS41KihpK3IpO2suZ2VvZGVzaWNDb29yZGluYXRlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCxuLngsbi55LHMsdCxhLmF0KDApLGEuYXQoMSkpLGwuc2V0Q29vcmRzKGEuYXQoMCkudmFsLGEuYXQoMSkudmFsKTtjb25zdCBvPUIoZSxuZXcgTiwhMSksZj1CKGUsbmV3IE4sITEpO2suZ2VvZGV0aWNEaXN0YW5jZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsYy54LGMueSx1LngsdS55LG8sZixudWxsLDIpLGsuZ2VvZGV0aWNDb29yZGluYXRlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCxjLngsYy55LC41Km8udmFsLGYudmFsLGguYXQoMCksaC5hdCgxKSwyKSxfLnNldENvb3JkcyhoLmF0KDApLnZhbCxoLmF0KDEpLnZhbCk7Y29uc3QgZD1CKGUsbmV3IE4sITEpO2suZ2VvZGV0aWNEaXN0YW5jZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsbC54LGwueSxfLngsXy55LGQsbnVsbCxudWxsLDIpO2lmKGQudmFsPD10aGlzLm1fY29udmVyZ2VuY2VPZmZzZXQpYnJlYWs7cio9Ljksay5nZW9kZXNpY0Nvb3JkaW5hdGUodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLG4ueCxuLnkscyxyLG0uYXQoMCksbS5hdCgxKSksdS5zZXRDb29yZHMobS5hdCgwKS52YWwsbS5hdCgxKS52YWwpfWNhdGNoKHQpe2UuZXJyb3I9dCxlLmhhc0Vycm9yPSEwfWZpbmFsbHl7WShlKX19Y29uc3QgZj1yLWksZD0yKk1hdGguUEkvTWF0aC5jZWlsKDIqTWF0aC5QSS9mKTt0aGlzLm1fY29ybmVyU3RlcD1kfWNhdGNoKHMpe2UuZXJyb3I9cyxlLmhhc0Vycm9yPSEwfWZpbmFsbHl7WShlKX19c2V0TWluU2VnbWVudFN0ZXAoKXtjb25zdCBlPXtzdGFjazpbXSxlcnJvcjp2b2lkIDAsaGFzRXJyb3I6ITF9O3RyeXtsZXQgbj1NYXRoLm1pbihNYXRoLlBJKnRoaXMubV9hLXRoaXMubV9hYnNEaXN0YW5jZSx0aGlzLm1fYWJzRGlzdGFuY2UpO249TWF0aC5taW4obiwuMTI1KnRoaXMubV9hKk1hdGguUEkpO2NvbnN0IGk9bmV3IGVlLHI9bmV3IGVlO2kuc2V0Q29vcmRzKDAsMTAqdGhpcy5tX3JwdSksci5zZXRDb29yZHMoMTAqdGhpcy5tX3JwdSwxMCp0aGlzLm1fcnB1KTtjb25zdCBvPUIoZSxuZXcgTiwhMSksbT1CKGUsbmV3IE4sITEpLGE9QihlLG5ldyBOLCExKTtrLmdlb2RldGljRGlzdGFuY2UodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLGkueCxpLnksci54LHIueSxhLG8sbSx0aGlzLm1fY3VydmVUeXBlKTtjb25zdCBoPUIoZSxuZXcgdGUobmV3IE4sbmV3IE4pLCExKSxjPUIoZSxuZXcgdGUobmV3IE4sbmV3IE4pLCExKSx1PW5ldyBlZSxsPUIoZSxuZXcgTiwhMSksXz1CKGUsbmV3IHRlKG5ldyBOLG5ldyBOKSwhMSksZj1CKGUsbmV3IHRlKG5ldyBOLG5ldyBOKSwhMSksZD1CKGUsbmV3IHRlKG5ldyBOLG5ldyBOKSwhMSksZz1CKGUsbmV3IHRlKG5ldyBOLG5ldyBOKSwhMSkscD1uZXcgZWUsUD1uZXcgZWUseD1uZXcgZWUsYj1uZXcgZWUseT0wO2xldCB3PTE7Y29uc3QgQz1vLnZhbCx2PW0udmFsLFM9Qy0uNSpNYXRoLlBJLEQ9disuNSpNYXRoLlBJLEk9YS52YWw7Zm9yKGsuZ2VvZGVzaWNDb29yZGluYXRlKHRoaXMubV9hLHRoaXMubV9lU3F1YXJlZCxpLngsaS55LG4sUyxfLmF0KDApLF8uYXQoMSkpLHAuc2V0Q29vcmRzKF8uYXQoMCkudmFsLF8uYXQoMSkudmFsKSxrLmdlb2Rlc2ljQ29vcmRpbmF0ZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsci54LHIueSxuLEQsZi5hdCgwKSxmLmF0KDEpKSxQLnNldENvb3JkcyhmLmF0KDApLnZhbCxmLmF0KDEpLnZhbCk7Oyl7Y29uc3QgZT17c3RhY2s6W10sZXJyb3I6dm9pZCAwLGhhc0Vycm9yOiExfTt0cnl7Y29uc3Qgcz0uNSooeSt3KTtrLmdlb2RldGljQ29vcmRpbmF0ZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsaS54LGkueSxzKkksQyxoLmF0KDApLGguYXQoMSksdGhpcy5tX2N1cnZlVHlwZSksdS5zZXRDb29yZHMoaC5hdCgwKS52YWwsaC5hdCgxKS52YWwpLGsuZ2VvZGV0aWNEaXN0YW5jZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsaS54LGkueSx1LngsdS55LG51bGwsbnVsbCxsLHRoaXMubV9jdXJ2ZVR5cGUpO2NvbnN0IG89bC52YWwrLjUqTWF0aC5QSTtrLmdlb2Rlc2ljQ29vcmRpbmF0ZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsdS54LHUueSxuLG8sZC5hdCgwKSxkLmF0KDEpKSx4LnNldENvb3JkcyhkLmF0KDApLnZhbCxkLmF0KDEpLnZhbCk7Y29uc3QgbT1CKGUsbmV3IE4sITEpLGE9QihlLG5ldyBOLCExKTtrLmdlb2RldGljRGlzdGFuY2UodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLHAueCxwLnksUC54LFAueSxtLGEsbnVsbCwyKSxrLmdlb2RldGljQ29vcmRpbmF0ZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQscC54LHAueSwuNSptLnZhbCxhLnZhbCxnLmF0KDApLGcuYXQoMSksMiksYi5zZXRDb29yZHMoZy5hdCgwKS52YWwsZy5hdCgxKS52YWwpO2NvbnN0IF89QihlLG5ldyBOLCExKTtrLmdlb2RldGljRGlzdGFuY2UodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLHgueCx4LnksYi54LGIueSxfLG51bGwsbnVsbCwyKTtpZihfLnZhbDw9dGhpcy5tX2NvbnZlcmdlbmNlT2Zmc2V0KWJyZWFrO3tjb25zdCBlPXtzdGFjazpbXSxlcnJvcjp2b2lkIDAsaGFzRXJyb3I6ITF9O3RyeXt3Kj0uOSxrLmdlb2RldGljQ29vcmRpbmF0ZSh0aGlzLm1fYSx0aGlzLm1fZVNxdWFyZWQsaS54LGkueSx3KkksQyxjLmF0KDApLGMuYXQoMSksdGhpcy5tX2N1cnZlVHlwZSksci5zZXRDb29yZHMoYy5hdCgwKS52YWwsYy5hdCgxKS52YWwpO2NvbnN0IHQ9QihlLG5ldyBOLCExKTtrLmdlb2RldGljRGlzdGFuY2UodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLGkueCxpLnksci54LHIueSxudWxsLG51bGwsdCx0aGlzLm1fY3VydmVUeXBlKTtjb25zdCBzPXQudmFsKy41Kk1hdGguUEk7ay5nZW9kZXNpY0Nvb3JkaW5hdGUodGhpcy5tX2EsdGhpcy5tX2VTcXVhcmVkLHIueCxyLnksbixzLGYuYXQoMCksZi5hdCgxKSksUC5zZXRDb29yZHMoZi5hdCgwKS52YWwsZi5hdCgxKS52YWwpfWNhdGNoKHQpe2UuZXJyb3I9dCxlLmhhc0Vycm9yPSEwfWZpbmFsbHl7WShlKX19fWNhdGNoKHMpe2UuZXJyb3I9cyxlLmhhc0Vycm9yPSEwfWZpbmFsbHl7WShlKX19bGV0IEc9dypJO0c+MWU1JiYoRz0xZTUpLHRoaXMubV9zZWdtZW50U3RlcD1HfWNhdGNoKG4pe2UuZXJyb3I9bixlLmhhc0Vycm9yPSEwfWZpbmFsbHl7WShlKX19c2V0Q29udmVyZ2VuY2VPZmZzZXQoKXtsZXQgZTtlPXRoaXMubV9hYnNEaXN0YW5jZT41ZTQ/MTAwOnRoaXMubV9hYnNEaXN0YW5jZT4xZTQ/MTA6MSx0aGlzLm1fYWJzRGlzdGFuY2UvZTw1MDAmJihlPXRoaXMubV9hYnNEaXN0YW5jZS81MDApLGU8LjAxJiYoZT0uMDEpLHRoaXMubV9jb252ZXJnZW5jZU9mZnNldD1lfX1mdW5jdGlvbiBoZShlLHQscyxuLGkscixvKXtpZihlLmlzRW1wdHkoKSlyZXR1cm4gbmV3IE8oe3ZkOmUuZ2V0RGVzY3JpcHRpb24oKX0pO2xldCBmPWU7aWYoYShmKSl7Y29uc3QgZT0xMCp0LmdldFRvbGVyYW5jZSgwKTtmPShuZXcgb2UpLmV4ZWN1dGUoZiwwLGUsMCxvLDEyZTMpfWNvbnN0IHc9bmV3IGFlKG8pO3cubV9zcj10LHcubV9nY3M9dC5nZXRHQ1MoKSx3Lm1fdHJhbnNmb3JtPWQodCx3Lm1fZ2NzLG51bGwpO2NvbnN0IEM9ZygpO3cubV9nY3MucXVlcnlTcGhlcm9pZERhdGEoQyk7Y29uc3Qgdj1uZXcgXztmLnF1ZXJ5RW52ZWxvcGUodiksdy5tX2E9Qy5tYWpvclNlbWlBeGlzLHcubV9lU3F1YXJlZD1DLmUyLHcubV9ycHU9dy5tX2djcy5nZXRVbml0KCkuZ2V0VW5pdFRvQmFzZUZhY3RvcigpLHcubV9nY3M5MD0uNSpNYXRoLlBJL3cubV9ycHUsdy5tX2djczE4MD1NYXRoLlBJL3cubV9ycHUsdy5tX2djczM2MD0yKk1hdGguUEkvdy5tX3JwdSx3Lm1fZ2NzNjA9dy5tX2djczM2MC82LHcubV9xOTA9cC5xOTAody5tX2Esdy5tX2VTcXVhcmVkKSx3Lm1fZWxsaXB0aWNUb0dlb2Rlc2ljTWF4UmF0aW89LjUqdy5tX2EqTWF0aC5QSS93Lm1fcTkwO2NvbnN0IFM9dy5tX2djcy5nZXRUb2xlcmFuY2UoMCk7dy5tX3JhZFRvbGVyYW5jZT1TKncubV9ycHUsND09PXM/KHcubV9jdXJ2ZVR5cGU9Mix3Lm1fYlNoYXBlUHJlc2VydmluZz0hMCk6KHcubV9jdXJ2ZVR5cGU9cyx3Lm1fYlNoYXBlUHJlc2VydmluZz0hMSksdy5tX2Rpc3RhbmNlPW4sdy5tX2Fic0Rpc3RhbmNlPU1hdGguYWJzKG4pLE51bWJlci5pc05hTihpKXx8aTw9MD93LnNldENvbnZlcmdlbmNlT2Zmc2V0KCk6dy5tX2NvbnZlcmdlbmNlT2Zmc2V0PU1hdGgubWF4KGksLjAwMSksdy5tX2NvbnZlcmdlbmNlT2Zmc2V0Lz1yO2xldCBELEk9Zi5nZXRHZW9tZXRyeVR5cGUoKTtpZihoKEkpKXtjb25zdCBlPW5ldyBqKHt2ZDpmLmdldERlc2NyaXB0aW9uKCl9KTtlLmFkZFNlZ21lbnQoZiwhMCksRD1lLEk9bS5lbnVtUG9seWxpbmV9ZWxzZSBpZihJPT09bS5lbnVtRW52ZWxvcGUpe2NvbnN0IGU9Zix0PW5ldyBfO2UucXVlcnlFbnZlbG9wZSh0KTtjb25zdCBzPVcoSih3Lm1fc3IsdiwhMCkpO2lmKHQubWluRGltZW5zaW9uKCk8PXMpaWYoMD09PXQubWF4RGltZW5zaW9uKCkpe2NvbnN0IHQ9bmV3IFUoe3ZkOmYuZ2V0RGVzY3JpcHRpb24oKX0pO2UuZ2V0Q2VudGVyKHQpLEQ9dCxJPW0uZW51bVBvaW50fWVsc2V7Y29uc3QgdD1uZXcgaih7dmQ6Zi5nZXREZXNjcmlwdGlvbigpfSk7dC5hZGRFbnZlbG9wZShlLCExKSxEPXQsST1tLmVudW1Qb2x5bGluZX1lbHNle2NvbnN0IHQ9bmV3IE8oe3ZkOmYuZ2V0RGVzY3JpcHRpb24oKX0pO3QuYWRkRW52ZWxvcGUoZSwhMSksRD10LEk9bS5lbnVtUG9seWdvbn19ZWxzZSBEPWY7aWYody5zZXRNaW5Db3JuZXJTdGVwKCksYyhJKXx8dy5zZXRNaW5TZWdtZW50U3RlcCgpLHcubV9hYnNEaXN0YW5jZTw9LjUqdy5tX2NvbnZlcmdlbmNlT2Zmc2V0KXJldHVybiBJIT09bS5lbnVtUG9seWdvbj9uZXcgTyh7dmQ6RC5nZXREZXNjcmlwdGlvbigpfSk6dy5tX2JTaGFwZVByZXNlcnZpbmc/RDpQKEQsdy5tX3NyLHcubV9jdXJ2ZVR5cGUsdy5tX3NlZ21lbnRTdGVwLC0xLG8pO2lmKHcubV9kaXN0YW5jZTwwJiZJIT09bS5lbnVtUG9seWdvbilyZXR1cm4gbmV3IE8oe3ZkOkQuZ2V0RGVzY3JpcHRpb24oKX0pO2lmKHcubV9iU2hhcGVQcmVzZXJ2aW5nJiZ1KEkpKXtjb25zdCBlPVAoRCx0LDQsTnVtYmVyLk5hTix3Lm1fY29udmVyZ2VuY2VPZmZzZXQsbyk7RD0obmV3IHgpLmV4ZWN1dGUoZSx3Lm1fdHJhbnNmb3JtLG8pfWVsc2UgRD0obmV3IHgpLmV4ZWN1dGUoRCx3Lm1fdHJhbnNmb3JtLG8pO2lmKEQ9YihELHcubV9nY3MpLEQuaXNFbXB0eSgpKXJldHVybiBuZXcgTyh7dmQ6RC5nZXREZXNjcmlwdGlvbigpfSk7IXcubV9iU2hhcGVQcmVzZXJ2aW5nJiZ1KEkpJiYoRD15KHcubV9ycHUsRCkpLEQ9ZmUoRCx3Lm1fZ2NzKTtsZXQgRz1uZXcgTztzd2l0Y2goSSl7Y2FzZSBtLmVudW1Qb2x5Z29uOkc9dy5idWZmZXJQb2x5Z29uKEQpO2JyZWFrO2Nhc2UgbS5lbnVtUG9seWxpbmU6Rz13LmJ1ZmZlclBvbHlsaW5lKEQpO2JyZWFrO2Nhc2UgbS5lbnVtTXVsdGlQb2ludDpHPXcuYnVmZmVyTXVsdGlQb2ludChEKTticmVhaztjYXNlIG0uZW51bVBvaW50Okc9dy5idWZmZXJQb2ludChEKTticmVhaztkZWZhdWx0OmwoXCJcIil9Y29uc3QgTT0obmV3IHgpLmV4ZWN1dGUoRyx3Lm1fdHJhbnNmb3JtLmdldEludmVyc2UoKSxvKTtyZXR1cm4gTS5tZXJnZVZlcnRleERlc2NyaXB0aW9uKEQuZ2V0RGVzY3JpcHRpb24oKSksTX1mdW5jdGlvbiBjZShlLHQscyxuLGkscixvLG0sYSxoLGMpe2NvbnN0IHU9e3N0YWNrOltdLGVycm9yOnZvaWQgMCxoYXNFcnJvcjohMX07dHJ5e2NvbnN0IGw9bmV3IGVlO2wuc2V0TkFOKCksYXx8Yy5nZXRQb2ludENvdW50KCk+MCYmKGwuc2V0Q29vcmRzUG9pbnQyRChjLmdldFhZKGMuZ2V0UG9pbnRDb3VudCgpLTEpKSxsLnNjYWxlKHMpKTtjb25zdCBfPUIodSxuZXcgTiwhMSksZj1CKHUsbmV3IHRlKG5ldyBOLG5ldyBOKSwhMSksZD1uZXcgZWUsZz1uZXcgZWUscD1yLmF0KC0xKSxQPTEvcztmb3IobGV0IHM9MDtzPHIubGVuZ3RoO3MrKyl7Y29uc3QgdT1yW3NdO2xldCB4OzA9PT1zP3g9bzpzPT09ci5sZW5ndGgtMT94PW06KGsuZ2VvZGV0aWNEaXN0YW5jZShlLHQscC54LHAueSx1LngsdS55LG51bGwsbnVsbCxfLGkpLHg9Xy52YWwtLjUqTWF0aC5QSSksay5nZW9kZXNpY0Nvb3JkaW5hdGUoZSx0LHUueCx1Lnksbix4LGYuYXQoMCksZi5hdCgxKSksYT9nLnNldENvb3JkcyhmLmF0KDApLnZhbCxmLmF0KDEpLnZhbCk6KGQuc2V0Q29vcmRzKGYuYXQoMCkudmFsLGYuYXQoMSkudmFsKSxoPV9lKHUueCxkLngsbC54LGgpLGcuc2V0Q29vcmRzKGgrZC54LGQueSksbC5zZXRDb29yZHNQb2ludDJEKGcpKSxnLnNjYWxlKFApLGMuaW5zZXJ0UG9pbnQyRCgwLC0xLGcpfXJldHVybiBofWNhdGNoKGwpe3UuZXJyb3I9bCx1Lmhhc0Vycm9yPSEwfWZpbmFsbHl7WSh1KX19ZnVuY3Rpb24gdWUoZSx0LHMsbixpLHIsbyxtLGEsaCxjLHU9TnVtYmVyLk5hTixsPU51bWJlci5OYU4pe2NvbnN0IF89e3N0YWNrOltdLGVycm9yOnZvaWQgMCxoYXNFcnJvcjohMX07dHJ5e2lmKG8tcjxtKXJldHVybiBoO2NvbnN0IGY9QihfLG5ldyB0ZShuZXcgTixuZXcgTiksITEpLGQ9bmV3IGVlLGc9bmV3IGVlLHA9bmV3IGVlO2cuc2V0TkFOKCksYXx8Yy5nZXRQb2ludENvdW50KCk+MCYmKGcuc2V0Q29vcmRzUG9pbnQyRChjLmdldFhZKGMuZ2V0UG9pbnRDb3VudCgpLTEpKSxnLnNjYWxlKHMpKTtsZXQgUD1NYXRoLmNlaWwoci9tKSx4PVArKyptO3g9PT1yJiYoeD1QKysqbSk7bGV0IGI9cjtjb25zdCB5PTEvcztmb3IoO3g8byttJiYoYjx1JiZ1PHg/KHg9dSxQLS0pOmI8bCYmbDx4JiYoeD1sLFAtLSksISh4Pj1vKSk7KWsuZ2VvZGVzaWNDb29yZGluYXRlKGUsdCxpLngsaS55LG4seCxmLmF0KDApLGYuYXQoMSkpLGE/cC5zZXRDb29yZHMoZi5hdCgwKS52YWwsZi5hdCgxKS52YWwpOihkLnNldENvb3JkcyhmLmF0KDApLnZhbCxmLmF0KDEpLnZhbCksaD1fZShpLngsZC54LGcueCxoKSxwLnNldENvb3JkcyhoK2QueCxkLnkpLGcuc2V0Q29vcmRzUG9pbnQyRChwKSkscC5zY2FsZSh5KSxjLmluc2VydFBvaW50MkQoMCwtMSxwKSxiPXgseD1QKysqbTtyZXR1cm4gaH1jYXRjaChmKXtfLmVycm9yPWYsXy5oYXNFcnJvcj0hMH1maW5hbGx5e1koXyl9fWZ1bmN0aW9uIGxlKGUsdCxzLG4saSxyLG8sbSxhLGgsYyl7Y29uc3QgdT17c3RhY2s6W10sZXJyb3I6dm9pZCAwLGhhc0Vycm9yOiExfTt0cnl7Y29uc3Qgcz1uZXcgZWUsbD1uZXcgZWUsXz1CKHUsbmV3IHRlKG5ldyBOLG5ldyBOKSwhMSk7ay5nZW9kZXNpY0Nvb3JkaW5hdGUoZSx0LGkueCxpLnksbixyLF8uYXQoMCksXy5hdCgxKSkscy5zZXRDb29yZHMoXy5hdCgwKS52YWwsXy5hdCgxKS52YWwpLGsuZ2VvZGVzaWNDb29yZGluYXRlKGUsdCxpLngsaS55LG4sbyxfLmF0KDApLF8uYXQoMSkpLGwuc2V0Q29vcmRzKF8uYXQoMCkudmFsLF8uYXQoMSkudmFsKTtjb25zdCBmPUIodSxuZXcgTiwhMSk7Zm9yKGsuZ2VvZGV0aWNEaXN0YW5jZShlLHQsbS54LG0ueSxzLngscy55LG51bGwsZixudWxsLDApLGhbMF09Zi52YWwsay5nZW9kZXRpY0Rpc3RhbmNlKGUsdCxtLngsbS55LGwueCxsLnksbnVsbCxmLG51bGwsMCksY1swXT1mLnZhbDtoWzBdPD1jWzBdOyloWzBdKz1uZTtmb3IoO2hbMF0+Y1swXTspaFswXS09bmU7Zm9yKDtoWzBdPj1hOyloWzBdLT1uZSxjWzBdLT1uZTtmb3IoO2hbMF08YTspaFswXSs9bmUsY1swXSs9bmV9Y2F0Y2gobCl7dS5lcnJvcj1sLHUuaGFzRXJyb3I9ITB9ZmluYWxseXtZKHUpfX1mdW5jdGlvbiBfZShlLHQscyxuKXtpZihOdW1iZXIuaXNOYU4ocykpe2Zvcig7bit0LWU+TWF0aC5QSTspbi09bmU7Zm9yKDtlLShuK3QpPk1hdGguUEk7KW4rPW5lO3JldHVybiBufXJldHVybiBuK3Qtcz5NYXRoLlBJP24tPW5lOnMtKG4rdCk+TWF0aC5QSSYmKG4rPW5lKSxufWZ1bmN0aW9uIGZlKGUsdCl7Y29uc3Qgcz1lLmdldEdlb21ldHJ5VHlwZSgpO2xldCBuO2lmKG49dShzKT9lLmdldFBhdGhDb3VudCgpOnM9PT1tLmVudW1NdWx0aVBvaW50P2UuZ2V0UG9pbnRDb3VudCgpOjEsMT09PW4pcmV0dXJuIGU7Y29uc3QgaT1bXSxyPVtdO2ZvcihsZXQgbT0wO208bjttKyspe2kucHVzaChtKTtjb25zdCBuPW5ldyBlZTtpZih1KHMpKXtjb25zdCB0PW5ldyBfO2UucXVlcnlQYXRoRW52ZWxvcGUobSx0KSxuLmFzc2lnbih0LmdldENlbnRlcigpKX1lbHNlIG4uYXNzaWduKGUuZ2V0WFkobSkpO2NvbnN0IG89dC50b0dlb2hhc2gobik7ci5wdXNoKG8pfWkuc29ydCgoKGUsdCk9PnJbZV08clt0XT8tMTpyW2VdPnJbdF0/MTowKSk7Y29uc3Qgbz1lLmNyZWF0ZUluc3RhbmNlKCk7Zm9yKGxldCBtPTA7bTxuO20rKyl7Y29uc3QgdD1pW21dO3Uocyk/by5hZGRQYXRoKGUsdCwhMCk6by5hZGRQb2ludHMoZSx0LHQrMSl9cmV0dXJuIG99ZnVuY3Rpb24gZGUoZSx0LHMsbixpLHIpe2NvbnN0IG89e3N0YWNrOltdLGVycm9yOnZvaWQgMCxoYXNFcnJvcjohMX07dHJ5e2lmKG4+PXIpcmV0dXJuITE7Y29uc3QgbT1zWzBdLGE9cy5hdCgtMSksaD1CKG8sbmV3IE4sITEpLGM9QihvLG5ldyBOLCExKSx1PUIobyxuZXcgTiwhMSk7ay5ncmVhdEVsbGlwdGljRGlzdGFuY2UoZSx0LGkueCxpLnksbS54LG0ueSxoLG51bGwsbnVsbCksay5ncmVhdEVsbGlwdGljRGlzdGFuY2UoZSx0LGkueCxpLnksYS54LGEueSxjLG51bGwsbnVsbCksay5ncmVhdEVsbGlwdGljRGlzdGFuY2UoZSx0LG0ueCxtLnksYS54LGEueSx1LG51bGwsbnVsbCk7bGV0IGw9TWF0aC5taW4oaC52YWwsYy52YWwpK3UudmFsLF89bCtuO2lmKF88cilyZXR1cm4hMDtjb25zdCBmPUIobyxuZXcgTiwhMSk7bD1NYXRoLm1heChoLnZhbCxjLnZhbCk7Zm9yKGxldCBuPTE7bjxzLmxlbmd0aC0xO24rKyl7Y29uc3Qgcj1zW25dO2suZ3JlYXRFbGxpcHRpY0Rpc3RhbmNlKGUsdCxpLngsaS55LHIueCxyLnksZixudWxsLG51bGwpLGYudmFsPmwmJihsPWYudmFsKX1yZXR1cm4gXz1sK24sXzxyfWNhdGNoKG0pe28uZXJyb3I9bSxvLmhhc0Vycm9yPSEwfWZpbmFsbHl7WShvKX19ZnVuY3Rpb24gZ2UoZSx0LHMsbixpLHIsbyxtKXtsZXQgYTtpZihuLmxlbmd0aCUyPT0wKXtjb25zdCBlPW4ubGVuZ3RoPj4xLHQ9bltlXSxzPW5bZS0xXTthPWVlLmxlcnAodCxzLC41KX1lbHNle2E9bltuLmxlbmd0aC0xPj4xXS5jbG9uZSgpfWNvbnN0IGg9YS5jbG9uZSgpLGM9QShlLHQsaCw3NS8xODAqTWF0aC5QSSk7cmV0dXJuISFkZShlLHQsbixpLGgsYykmJihudWxsIT09ciYmKHIuc2V0Q29vcmRzUG9pbnQyRChhKSxyLnNjYWxlKDEvcykpLG51bGwhPT1vJiZvLnNldENvb3Jkc1BvaW50MkQoaCksbnVsbCE9PW0mJihtWzBdPWMpLCEwKX1mdW5jdGlvbiBwZShlLHQscyxuLGkscil7Y29uc3Qgbz17c3RhY2s6W10sZXJyb3I6dm9pZCAwLGhhc0Vycm9yOiExfTt0cnl7aWYobj49cilyZXR1cm4hMTtjb25zdCBtPUIobyxuZXcgTiwhMSk7ay5ncmVhdEVsbGlwdGljRGlzdGFuY2UoZSx0LGkueCxpLnkscy54LHMueSxtLG51bGwsbnVsbCk7cmV0dXJuIG0udmFsK248cn1jYXRjaChtKXtvLmVycm9yPW0sby5oYXNFcnJvcj0hMH1maW5hbGx5e1kobyl9fWZ1bmN0aW9uIFBlKGUsdCxzLG4saSxyLG8sbSl7Y29uc3QgYT1BKGUsdCxuLDc1LzE4MCpNYXRoLlBJKTtyZXR1cm4hIXBlKGUsdCxuLGksbixhKSYmKG51bGwhPT1yJiYoci5zZXRDb29yZHNQb2ludDJEKG4pLHIuc2NhbGUoMS9zKSksbnVsbCE9PW8mJm8uc2V0Q29vcmRzUG9pbnQyRChuKSxudWxsIT09bSYmKG1bMF09YSksITApfWZ1bmN0aW9uIHhlKGUsdCl7cmV0dXJuIG5ldyBYKGUsdCl9ZnVuY3Rpb24gYmUoZSl7cmV0dXJuIEwoZSwwKXx8UShlLDApLGV9Y2xhc3MgeWV7Y29uc3RydWN0b3IoZSl7dGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYz0hMSx0aGlzLm1fYk5lZWRzU2ltcGxpZnk9ITEsdGhpcy5tX2dub21vbmljPW51bGwsdGhpcy5tX2dub21vbmljQ2VudGVyUmFkPW5ldyBlZSx0aGlzLm1fbWluR25vbW9uaWNSYWRpdXM9TnVtYmVyLk5hTix0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyPWV9aXNSdW5uaW5nSW5Hbm9tb25pYygpe3JldHVybiB0aGlzLm1fYlJ1bm5pbmdJbkdub21vbmljfW5lZWRzU2ltcGxpZnkoKXtyZXR1cm4gdGhpcy5tX2JOZWVkc1NpbXBsaWZ5fWdldEdub21vbmljKCl7cmV0dXJuIHRoaXMubV9nbm9tb25pY319Y2xhc3Mgd2UgZXh0ZW5kcyB5ZXtjb25zdHJ1Y3RvcihlLHQscyl7c3VwZXIoZS5tX3Byb2dyZXNzVHJhY2tlciksdGhpcy5tX3NlZ0l0ZXI9bnVsbCx0aGlzLm1fYk5leHRTZWdtZW50Q2Fubm90Sm9pbj0hMSx0aGlzLm1fY3VycmVudERlbnNpZmllZERlbHRhPVswXSx0aGlzLm1fY3VycmVudEJ1ZmZlcmVkRGVsdGE9MCx0aGlzLm1fbGFzdEF6aW11dGg9MCx0aGlzLm1fc3RhcnRBemltdXRoPVswXSx0aGlzLm1fZW5kQXppbXV0aD1bMF0sdGhpcy5tX251bVdpbmRzPTAsdGhpcy5tX2RlYnVnQ291bnRlcj0wLHRoaXMubV9idWZmZXJIZWxwZXI9bmV3IE8sdGhpcy5tX2RlbnNpZmllZFBvaW50cz1bXSx0aGlzLm1fYnVmZmVyZXI9ZSx0aGlzLm1fbXVsdGlQYXRoPXQsdGhpcy5tX2RlbnNpZmllZD1zLHRoaXMubV9iTmVlZHNTaW1wbGlmeT0hMDtjb25zdCBuPW5ldyBfO3RoaXMubV9tdWx0aVBhdGgucXVlcnlFbnZlbG9wZShuKTtjb25zdCBpPW4uZ2V0Q2VudGVyKCkscj1pLmNsb25lKCk7ci5zY2FsZSh0aGlzLm1fYnVmZmVyZXIubV9ycHUpLHRoaXMubV9nbm9tb25pYz14ZSh0aGlzLm1fYnVmZmVyZXIubV9nY3MsaSksdGhpcy5tX2dub21vbmljQ2VudGVyUmFkPXIuY2xvbmUoKSx0aGlzLm1fbWluR25vbW9uaWNSYWRpdXM9QSh0aGlzLm1fYnVmZmVyZXIubV9hLHRoaXMubV9idWZmZXJlci5tX2VTcXVhcmVkLHIsNzUvMTgwKk1hdGguUEkpfW5leHQoKXtsZXQgZTtpZih0aGlzLm1fYk5leHRTZWdtZW50Q2Fubm90Sm9pbilyZXR1cm4gdGhpcy5tX2JOZXh0U2VnbWVudENhbm5vdEpvaW49ITEsdGhpcy5tX3NlZ0l0ZXIubmV4dFNlZ21lbnQoKSxlPXRoaXMubV9idWZmZXJIZWxwZXIuY2xvbmUoKSxlO2lmKG51bGw9PT10aGlzLm1fc2VnSXRlcil7aWYodGhpcy5tX3NlZ0l0ZXI9dGhpcy5tX211bHRpUGF0aC5nZXRJbXBsKCkucXVlcnlTZWdtZW50SXRlcmF0b3IoKSwhdGhpcy5tX3NlZ0l0ZXIubmV4dFBhdGgoKSlyZXR1cm4gbnVsbDtudWxsIT09dGhpcy5tX2RlbnNpZmllZCYmdGhpcy5tX2RlbnNpZmllZC5hZGRQYXRoUG9pbnQyRChudWxsLDAsITApfWlmKCF0aGlzLm1fc2VnSXRlci5oYXNOZXh0U2VnbWVudCgpKXtpZighdGhpcy5tX3NlZ0l0ZXIubmV4dFBhdGgoKSlyZXR1cm4gbnVsbDtudWxsIT10aGlzLm1fZGVuc2lmaWVkJiZ0aGlzLm1fZGVuc2lmaWVkLmFkZFBhdGhQb2ludDJEKG51bGwsMCwhMCl9bGV0IHQ9bnVsbDt0aGlzLm1fY3VycmVudEJ1ZmZlcmVkRGVsdGE9MCx0aGlzLm1fY3VycmVudERlbnNpZmllZERlbHRhPVswXSx0aGlzLm1fbnVtV2luZHM9MCx0aGlzLm1fbGFzdEF6aW11dGg9TnVtYmVyLk5hTix0aGlzLm1fYk5leHRTZWdtZW50Q2Fubm90Sm9pbj0hMSx0aGlzLm1fZGVuc2lmaWVkUG9pbnRzLmxlbmd0aD0wO2NvbnN0IHM9MTY7bGV0IG49MDtjb25zdCBpPW5ldyBlZSxyPW5ldyBlZTtmb3IoO3RoaXMubV9zZWdJdGVyLmhhc05leHRTZWdtZW50KCkmJnRoaXMubV9udW1XaW5kczxzOyl7Y29uc3QgZT10aGlzLm1fc2VnSXRlci5uZXh0U2VnbWVudCgpO2lmKGkuc2V0Q29vcmRzUG9pbnQyRChlLmdldFN0YXJ0WFkoKSksci5zZXRDb29yZHNQb2ludDJEKGUuZ2V0RW5kWFkoKSksaS5zY2FsZSh0aGlzLm1fYnVmZmVyZXIubV9ycHUpLHIuc2NhbGUodGhpcy5tX2J1ZmZlcmVyLm1fcnB1KSxFKGkscikpaS54PXIueDtlbHNlIGlmKHEoaSxyKSlyLng9aS54O2Vsc2V7bGV0IGU9LTEsdD0tMTtjb25zdCBzPXRoaXMubV9zZWdJdGVyLmdldFBhdGhJbmRleCgpLG49dGhpcy5tX211bHRpUGF0aC5nZXRQYXRoU3RhcnQocyksbz10aGlzLm1fbXVsdGlQYXRoLmdldFBhdGhFbmQocyk7aWYoZT10aGlzLm1fc2VnSXRlci5nZXRTdGFydFBvaW50SW5kZXgoKS0xLHQ9dGhpcy5tX3NlZ0l0ZXIuZ2V0RW5kUG9pbnRJbmRleCgpKzEsZTxuJiYoZT10aGlzLm1fbXVsdGlQYXRoLmlzQ2xvc2VkUGF0aChzKT9vLTE6LTEpLHQ+by0xJiYodD10aGlzLm1fbXVsdGlQYXRoLmlzQ2xvc2VkUGF0aChzKT9uOi0xKSwtMSE9PWUpe2NvbnN0IHQ9dGhpcy5tX211bHRpUGF0aC5nZXRYWShlKTt0LnNjYWxlKHRoaXMubV9idWZmZXJlci5tX3JwdSkscSh0LGkpJiYoaS54PXQueCl9aWYoLTEhPT10KXtjb25zdCBlPXRoaXMubV9tdWx0aVBhdGguZ2V0WFkodCk7ZS5zY2FsZSh0aGlzLm1fYnVmZmVyZXIubV9ycHUpLEUocixlKSYmKHIueD1lLngpfX10aGlzLm1fZGVuc2lmaWVkUG9pbnRzLmxlbmd0aD0wO2NvbnN0IHM9Uih0aGlzLm1fYnVmZmVyZXIubV9hLHRoaXMubV9idWZmZXJlci5tX2VTcXVhcmVkLHRoaXMubV9idWZmZXJlci5tX2N1cnZlVHlwZSxpLHIsdGhpcy5tX2J1ZmZlcmVyLm1fc2VnbWVudFN0ZXAsTnVtYmVyLk5hTix0aGlzLm1fYnVmZmVyZXIubV9yYWRUb2xlcmFuY2UsdGhpcy5tX3N0YXJ0QXppbXV0aCx0aGlzLm1fZW5kQXppbXV0aCx0aGlzLm1fZGVuc2lmaWVkUG9pbnRzLHRoaXMubV9jdXJyZW50RGVuc2lmaWVkRGVsdGEpO2lmKDA9PT1uKXRoaXMubV9iUnVubmluZ0luR25vbW9uaWM9dGhpcy5pc1NlZ21lbnRCdWZmZXJJbkN1cnJlbnRHbm9tb25pYyh0aGlzLm1fZGVuc2lmaWVkUG9pbnRzKSx0aGlzLm1fYlJ1bm5pbmdJbkdub21vbmljfHwodGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYz10aGlzLnRyeVVwZGF0ZUdub21vbmljKHRoaXMubV9kZW5zaWZpZWRQb2ludHMpKTtlbHNlIGlmKHRoaXMubV9iUnVubmluZ0luR25vbW9uaWMpe2lmKCF0aGlzLmlzU2VnbWVudEJ1ZmZlckluQ3VycmVudEdub21vbmljKHRoaXMubV9kZW5zaWZpZWRQb2ludHMpKXt0aGlzLm1fc2VnSXRlci5wcmV2aW91c1NlZ21lbnQoKSx0aGlzLm1fc2VnSXRlci5wcmV2aW91c1NlZ21lbnQoKSx0aGlzLm1fc2VnSXRlci5uZXh0U2VnbWVudCgpO2JyZWFrfX1lbHNle2lmKGdlKHRoaXMubV9idWZmZXJlci5tX2EsdGhpcy5tX2J1ZmZlcmVyLm1fZVNxdWFyZWQsdGhpcy5tX2J1ZmZlcmVyLm1fcnB1LHRoaXMubV9kZW5zaWZpZWRQb2ludHMsdGhpcy5tX2J1ZmZlcmVyLm1fYWJzRGlzdGFuY2UqdGhpcy5tX2J1ZmZlcmVyLm1fZWxsaXB0aWNUb0dlb2Rlc2ljTWF4UmF0aW8sbnVsbCxudWxsLG51bGwpKXt0aGlzLm1fc2VnSXRlci5wcmV2aW91c1NlZ21lbnQoKSx0aGlzLm1fc2VnSXRlci5wcmV2aW91c1NlZ21lbnQoKSx0aGlzLm1fc2VnSXRlci5uZXh0U2VnbWVudCgpO2JyZWFrfX1pZigwPT09c3x8eihpLHIpPyh0aGlzLm1fYnVmZmVySGVscGVyLnNldEVtcHR5KCksdGhpcy5tX2J1ZmZlcmVyLmJ1ZmZlclBvaW50MkQoaSx0aGlzLm1fYlJ1bm5pbmdJbkdub21vbmljLHRoaXMubV9idWZmZXJIZWxwZXIpLHRoaXMubV9iTmV4dFNlZ21lbnRDYW5ub3RKb2luPSEwKToodGhpcy5tX2J1ZmZlckhlbHBlci5zZXRFbXB0eSgpLHRoaXMubV9iTmV4dFNlZ21lbnRDYW5ub3RKb2luPXRoaXMuY2hlY2tBbmRQcmVwU2VnbWVudEZvckNyb3NzaW5nQXppbXV0aHNPclBvbGVXcmFwKHMsdGhpcy5tX2J1ZmZlckhlbHBlcikpLHRoaXMubV9iTmV4dFNlZ21lbnRDYW5ub3RKb2luKXt0aGlzLm1fc2VnSXRlci5wcmV2aW91c1NlZ21lbnQoKSx0aGlzLm1fc2VnSXRlci5oYXNQcmV2aW91c1NlZ21lbnQoKT8odGhpcy5tX3NlZ0l0ZXIucHJldmlvdXNTZWdtZW50KCksdGhpcy5tX3NlZ0l0ZXIubmV4dFNlZ21lbnQoKSk6dGhpcy5tX3NlZ0l0ZXIucmVzZXRUb0ZpcnN0U2VnbWVudCgpLG51bGwhPXRoaXMubV9kZW5zaWZpZWQmJnRoaXMubV9kZW5zaWZpZWQuaW5zZXJ0UG9pbnRzRnJvbVBvaW50cyh0aGlzLm1fZGVuc2lmaWVkLmdldFBhdGhDb3VudCgpLTEsLTEsdGhpcy5tX2RlbnNpZmllZFBvaW50cywwLHRoaXMubV9kZW5zaWZpZWRQb2ludHMubGVuZ3RoLTEsITApO2JyZWFrfW51bGwhPXRoaXMubV9kZW5zaWZpZWQmJnRoaXMubV9kZW5zaWZpZWQuaW5zZXJ0UG9pbnRzRnJvbVBvaW50cyh0aGlzLm1fZGVuc2lmaWVkLmdldFBhdGhDb3VudCgpLTEsLTEsdGhpcy5tX2RlbnNpZmllZFBvaW50cywwLHRoaXMubV9kZW5zaWZpZWRQb2ludHMubGVuZ3RoLTEsITApLG51bGw9PT10JiYodD1uZXcgTyx0LmFkZFBhdGhQb2ludDJEKG51bGwsMCwhMCkpLHRoaXMuYWRkSm9pbkFuZEJ1ZmZlckxlZnRTaWRlKHQpLG4rK31pZih0aGlzLm1fY3VycmVudERlbnNpZmllZERlbHRhPVswXSxuPjApe2NvbnN0IGU9dGhpcy5tX3NlZ0l0ZXIuZ2V0U3RhcnRQb2ludEluZGV4KCkscz10aGlzLm1fc2VnSXRlci5nZXRQYXRoSW5kZXgoKTtmb3IoO24+MDspe2lmKHRoaXMubV9zZWdJdGVyLnByZXZpb3VzU2VnbWVudCgpLGkuc2V0Q29vcmRzUG9pbnQyRCh0aGlzLm1fbXVsdGlQYXRoLmdldFhZKHRoaXMubV9zZWdJdGVyLmdldFN0YXJ0UG9pbnRJbmRleCgpKSksci5zZXRDb29yZHNQb2ludDJEKHRoaXMubV9tdWx0aVBhdGguZ2V0WFkodGhpcy5tX3NlZ0l0ZXIuZ2V0RW5kUG9pbnRJbmRleCgpKSksaS5zY2FsZSh0aGlzLm1fYnVmZmVyZXIubV9ycHUpLHIuc2NhbGUodGhpcy5tX2J1ZmZlcmVyLm1fcnB1KSx0aGlzLm1fYlJ1bm5pbmdJbkdub21vbmljKWlmKEUoaSxyKSlpLng9ci54O2Vsc2UgaWYocShpLHIpKXIueD1pLng7ZWxzZXtsZXQgZT0tMSx0PS0xO2NvbnN0IHM9dGhpcy5tX3NlZ0l0ZXIuZ2V0UGF0aEluZGV4KCksbj10aGlzLm1fbXVsdGlQYXRoLmdldFBhdGhTdGFydChzKSxvPXRoaXMubV9tdWx0aVBhdGguZ2V0UGF0aEVuZChzKTtpZihlPXRoaXMubV9zZWdJdGVyLmdldFN0YXJ0UG9pbnRJbmRleCgpLTEsdD10aGlzLm1fc2VnSXRlci5nZXRFbmRQb2ludEluZGV4KCkrMSxlPG4mJihlPXRoaXMubV9tdWx0aVBhdGguaXNDbG9zZWRQYXRoKHMpP28tMTotMSksdD5vLTEmJih0PXRoaXMubV9tdWx0aVBhdGguaXNDbG9zZWRQYXRoKHMpP246LTEpLC0xIT09ZSl7Y29uc3QgdD10aGlzLm1fbXVsdGlQYXRoLmdldFhZKGUpO3Quc2NhbGUodGhpcy5tX2J1ZmZlcmVyLm1fcnB1KSxxKHQsaSkmJihpLng9dC54KX1pZigtMSE9PXQpe2NvbnN0IGU9dGhpcy5tX211bHRpUGF0aC5nZXRYWSh0KTtlLnNjYWxlKHRoaXMubV9idWZmZXJlci5tX3JwdSksRShyLGUpJiYoci54PWUueCl9fXRoaXMubV9kZW5zaWZpZWRQb2ludHMubGVuZ3RoPTAsUih0aGlzLm1fYnVmZmVyZXIubV9hLHRoaXMubV9idWZmZXJlci5tX2VTcXVhcmVkLHRoaXMubV9idWZmZXJlci5tX2N1cnZlVHlwZSxyLGksdGhpcy5tX2J1ZmZlcmVyLm1fc2VnbWVudFN0ZXAsTnVtYmVyLk5hTix0aGlzLm1fYnVmZmVyZXIubV9yYWRUb2xlcmFuY2UsdGhpcy5tX3N0YXJ0QXppbXV0aCx0aGlzLm1fZW5kQXppbXV0aCx0aGlzLm1fZGVuc2lmaWVkUG9pbnRzLHRoaXMubV9jdXJyZW50RGVuc2lmaWVkRGVsdGEpLHRoaXMuYWRkSm9pbkFuZEJ1ZmZlckxlZnRTaWRlKHQpLG4tLX1yZXR1cm4gaS5zZXRDb29yZHNQb2ludDJEKHRoaXMubV9tdWx0aVBhdGguZ2V0WFkodGhpcy5tX3NlZ0l0ZXIuZ2V0U3RhcnRQb2ludEluZGV4KCkpKSxpLnNjYWxlKHRoaXMubV9idWZmZXJlci5tX3JwdSksdGhpcy5tX2N1cnJlbnRCdWZmZXJlZERlbHRhPXVlKHRoaXMubV9idWZmZXJlci5tX2EsdGhpcy5tX2J1ZmZlcmVyLm1fZVNxdWFyZWQsdGhpcy5tX2J1ZmZlcmVyLm1fcnB1LHRoaXMubV9idWZmZXJlci5tX2Fic0Rpc3RhbmNlLGksdGhpcy5tX2xhc3RBemltdXRoKy41Kk1hdGguUEksdGhpcy5tX2xhc3RBemltdXRoKzEuNSpNYXRoLlBJLHRoaXMubV9idWZmZXJlci5tX2Nvcm5lclN0ZXAsdGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYyx0aGlzLm1fY3VycmVudEJ1ZmZlcmVkRGVsdGEsdCksdGhpcy5tX3NlZ0l0ZXIucmVzZXRUb1ZlcnRleChlLHMpLHRoaXMubV9zZWdJdGVyLm5leHRTZWdtZW50KCksdH1yZXR1cm4gdGhpcy5tX2JOZXh0U2VnbWVudENhbm5vdEpvaW49ITEsdGhpcy5tX3NlZ0l0ZXIubmV4dFNlZ21lbnQoKSxlPXRoaXMubV9idWZmZXJIZWxwZXIuY2xvbmUoKSxlfWlzU2VnbWVudEJ1ZmZlckluQ3VycmVudEdub21vbmljKGUpe3JldHVybiBudWxsIT09dGhpcy5tX2dub21vbmljJiZkZSh0aGlzLm1fYnVmZmVyZXIubV9hLHRoaXMubV9idWZmZXJlci5tX2VTcXVhcmVkLGUsdGhpcy5tX2J1ZmZlcmVyLm1fYWJzRGlzdGFuY2UqdGhpcy5tX2J1ZmZlcmVyLm1fZWxsaXB0aWNUb0dlb2Rlc2ljTWF4UmF0aW8sdGhpcy5tX2dub21vbmljQ2VudGVyUmFkLHRoaXMubV9taW5Hbm9tb25pY1JhZGl1cyl9dHJ5VXBkYXRlR25vbW9uaWMoZSl7Y29uc3QgdD1uZXcgZWUscz1uZXcgZWUsbj1bMF07cmV0dXJuIGdlKHRoaXMubV9idWZmZXJlci5tX2EsdGhpcy5tX2J1ZmZlcmVyLm1fZVNxdWFyZWQsdGhpcy5tX2J1ZmZlcmVyLm1fcnB1LGUsdGhpcy5tX2J1ZmZlcmVyLm1fYWJzRGlzdGFuY2UqdGhpcy5tX2J1ZmZlcmVyLm1fZWxsaXB0aWNUb0dlb2Rlc2ljTWF4UmF0aW8sdCxzLG4pPyh0aGlzLm1fZ25vbW9uaWNDZW50ZXJSYWQuc2V0Q29vcmRzUG9pbnQyRChzKSx0aGlzLm1fbWluR25vbW9uaWNSYWRpdXM9blswXSx0aGlzLm1fZ25vbW9uaWM9eGUodGhpcy5tX2J1ZmZlcmVyLm1fZ2NzLHQpLCEwKToodGhpcy5tX2dub21vbmljPW51bGwsITEpfWNoZWNrQW5kUHJlcFNlZ21lbnRGb3JDcm9zc2luZ0F6aW11dGhzT3JQb2xlV3JhcChlLHQpe3JldHVybiB0aGlzLm1fYnVmZmVyZXIuY2hlY2tBbmRQcmVwU2VnbWVudEZvckNyb3NzaW5nQXppbXV0aHNPclBvbGVXcmFwKHRoaXMubV9kZW5zaWZpZWRQb2ludHMsZSx0aGlzLm1fc3RhcnRBemltdXRoWzBdLHRoaXMubV9lbmRBemltdXRoWzBdLHRoaXMubV9iUnVubmluZ0luR25vbW9uaWMsdCl9YWRkSm9pbkFuZEJ1ZmZlckxlZnRTaWRlKGUpe2NvbnN0IHQ9dGhpcy5tX2RlbnNpZmllZFBvaW50c1swXTtsZXQgcz1OdW1iZXIuTmFOLG49dGhpcy5tX3N0YXJ0QXppbXV0aFswXS1zZTtjb25zdCBpPXRoaXMubV9lbmRBemltdXRoWzBdK3NlO2xldCByPSExO2lmKCFOdW1iZXIuaXNOYU4odGhpcy5tX2xhc3RBemltdXRoKSl7dGhpcy5tX2xhc3RBemltdXRoPj10aGlzLm1fc3RhcnRBemltdXRoWzBdPyhzPXRoaXMubV9sYXN0QXppbXV0aCtzZSxuPXMrTWF0aC5QSS0odGhpcy5tX2xhc3RBemltdXRoLXRoaXMubV9zdGFydEF6aW11dGhbMF0pKToocz10aGlzLm1fbGFzdEF6aW11dGgrc2Usbj1zK01hdGguUEktKG5lLSh0aGlzLm1fc3RhcnRBemltdXRoWzBdLXRoaXMubV9sYXN0QXppbXV0aCkpKSxyPSEodGhpcy5tX2xhc3RBemltdXRoPj10aGlzLm1fc3RhcnRBemltdXRoWzBdJiZ0aGlzLm1fbGFzdEF6aW11dGgtdGhpcy5tX3N0YXJ0QXppbXV0aFswXTw9TWF0aC5QSSkmJiEodGhpcy5tX2xhc3RBemltdXRoPHRoaXMubV9zdGFydEF6aW11dGhbMF0mJnRoaXMubV9zdGFydEF6aW11dGhbMF0tdGhpcy5tX2xhc3RBemltdXRoPj1NYXRoLlBJKTtsZXQgaT0hMTtpZihNYXRoLmFicyhuLXMpPD0uNSp0aGlzLm1fYnVmZmVyZXIubV9jb3JuZXJTdGVwJiYocnx8KGk9ITApKSxpKXtpZihlLnJlbW92ZVBvaW50RnJvbVBhdGgoMCxlLmdldFBvaW50Q291bnQoKS0xKSwhdGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYyl7Y29uc3QgdD1uZXcgZWU7dC5zZXRDb29yZHNQb2ludDJEKGUuZ2V0WFkoZS5nZXRQb2ludENvdW50KCktMSkpLHQuc2NhbGUodGhpcy5tX2J1ZmZlcmVyLm1fcnB1KSx0LngtdGhpcy5tX2N1cnJlbnRCdWZmZXJlZERlbHRhPC1NYXRoLlBJP3RoaXMubV9jdXJyZW50QnVmZmVyZWREZWx0YS09bmU6dC54LXRoaXMubV9jdXJyZW50QnVmZmVyZWREZWx0YT5NYXRoLlBJJiYodGhpcy5tX2N1cnJlbnRCdWZmZXJlZERlbHRhKz1uZSl9bj0uNSoobitzKX1lbHNlIGlmKHIpe2NvbnN0IHM9bmV3IGVlO3Muc2V0Q29vcmRzUG9pbnQyRCh0KSxzLnNjYWxlKDEvdGhpcy5tX2J1ZmZlcmVyLm1fcnB1KSxlLmluc2VydFBvaW50MkQoMCwtMSxzKX1lbHNlIHVlKHRoaXMubV9idWZmZXJlci5tX2EsdGhpcy5tX2J1ZmZlcmVyLm1fZVNxdWFyZWQsdGhpcy5tX2J1ZmZlcmVyLm1fcnB1LHRoaXMubV9idWZmZXJlci5tX2Fic0Rpc3RhbmNlLHRoaXMubV9kZW5zaWZpZWRQb2ludHNbMF0scyxuLHRoaXMubV9idWZmZXJlci5tX2Nvcm5lclN0ZXAsdGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYyx0aGlzLm1fY3VycmVudEJ1ZmZlcmVkRGVsdGEsZSl9dGhpcy5tX3N0YXJ0QXppbXV0aFswXSE9PXRoaXMubV9sYXN0QXppbXV0aCYmdGhpcy5tX251bVdpbmRzKyssY2UodGhpcy5tX2J1ZmZlcmVyLm1fYSx0aGlzLm1fYnVmZmVyZXIubV9lU3F1YXJlZCx0aGlzLm1fYnVmZmVyZXIubV9ycHUsdGhpcy5tX2J1ZmZlcmVyLm1fYWJzRGlzdGFuY2UsdGhpcy5tX2J1ZmZlcmVyLm1fY3VydmVUeXBlLHRoaXMubV9kZW5zaWZpZWRQb2ludHMsbixpLHRoaXMubV9iUnVubmluZ0luR25vbW9uaWMsdGhpcy5tX2N1cnJlbnRCdWZmZXJlZERlbHRhLGUpLHRoaXMubV9sYXN0QXppbXV0aD10aGlzLm1fZW5kQXppbXV0aFswXX19Y2xhc3MgQ2UgZXh0ZW5kcyB5ZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUubV9wcm9ncmVzc1RyYWNrZXIpLHRoaXMubV9wb2ludEluZGV4PS0xLHRoaXMubV9idWZmZXJlcj1lLHRoaXMubV9tdWx0aVBvaW50PXQsdGhpcy5tX2JOZWVkc1NpbXBsaWZ5PSExO2NvbnN0IHM9bmV3IF87dGhpcy5tX211bHRpUG9pbnQucXVlcnlFbnZlbG9wZShzKTtjb25zdCBuPXMuZ2V0Q2VudGVyKCksaT1uLmNsb25lKCk7aS5zY2FsZSh0aGlzLm1fYnVmZmVyZXIubV9ycHUpLHRoaXMubV9nbm9tb25pYz14ZSh0aGlzLm1fYnVmZmVyZXIubV9nY3MsbiksdGhpcy5tX2dub21vbmljQ2VudGVyUmFkPWkuY2xvbmUoKSx0aGlzLm1fbWluR25vbW9uaWNSYWRpdXM9QSh0aGlzLm1fYnVmZmVyZXIubV9hLHRoaXMubV9idWZmZXJlci5tX2VTcXVhcmVkLGksNzUvMTgwKk1hdGguUEkpfW5leHQoKXtpZih0aGlzLm1fYk5lZWRzU2ltcGxpZnk9ITEsKyt0aGlzLm1fcG9pbnRJbmRleD09PXRoaXMubV9tdWx0aVBvaW50LmdldFBvaW50Q291bnQoKSlyZXR1cm4gbnVsbDtjb25zdCBlPXRoaXMubV9tdWx0aVBvaW50LmdldFhZKHRoaXMubV9wb2ludEluZGV4KTtlLnNjYWxlKHRoaXMubV9idWZmZXJlci5tX3JwdSksdGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYz10aGlzLmlzUG9pbnRCdWZmZXJJbkN1cnJlbnRHbm9tb25pYyhlKSx0aGlzLm1fYlJ1bm5pbmdJbkdub21vbmljfHwodGhpcy5tX2JSdW5uaW5nSW5Hbm9tb25pYz10aGlzLnRyeVVwZGF0ZUdub21vbmljKGUpKTtjb25zdCB0PW5ldyBPLHM9dGhpcy5tX2J1ZmZlcmVyLmJ1ZmZlclBvaW50MkQoZSx0aGlzLm1fYlJ1bm5pbmdJbkdub21vbmljLHQpO3JldHVybiB0aGlzLm1fYk5lZWRzU2ltcGxpZnk9cyx0fWlzUG9pbnRCdWZmZXJJbkN1cnJlbnRHbm9tb25pYyhlKXtyZXR1cm4gbnVsbCE9PXRoaXMubV9nbm9tb25pYyYmcGUodGhpcy5tX2J1ZmZlcmVyLm1fYSx0aGlzLm1fYnVmZmVyZXIubV9lU3F1YXJlZCxlLHRoaXMubV9idWZmZXJlci5tX2Fic0Rpc3RhbmNlKnRoaXMubV9idWZmZXJlci5tX2VsbGlwdGljVG9HZW9kZXNpY01heFJhdGlvLHRoaXMubV9nbm9tb25pY0NlbnRlclJhZCx0aGlzLm1fbWluR25vbW9uaWNSYWRpdXMpfXRyeVVwZGF0ZUdub21vbmljKGUpe2NvbnN0IHQ9bmV3IGVlLHM9bmV3IGVlLG49WzBdO3JldHVybiBQZSh0aGlzLm1fYnVmZmVyZXIubV9hLHRoaXMubV9idWZmZXJlci5tX2VTcXVhcmVkLHRoaXMubV9idWZmZXJlci5tX3JwdSxlLHRoaXMubV9idWZmZXJlci5tX2Fic0Rpc3RhbmNlKnRoaXMubV9idWZmZXJlci5tX2VsbGlwdGljVG9HZW9kZXNpY01heFJhdGlvLHQscyxuKT8odGhpcy5tX2dub21vbmljQ2VudGVyUmFkLnNldENvb3Jkc1BvaW50MkQocyksdGhpcy5tX21pbkdub21vbmljUmFkaXVzPW5bMF0sdGhpcy5tX2dub21vbmljPXhlKHRoaXMubV9idWZmZXJlci5tX2djcyx0KSwhMCk6KHRoaXMubV9nbm9tb25pYz1udWxsLCExKX19Y2xhc3MgdmV7Z2V0T3BlcmF0b3JUeXBlKCl7cmV0dXJuIDEwMTEwfXN1cHBvcnRzQ3VydmVzKCl7cmV0dXJuITB9YWNjZWxlcmF0ZUdlb21ldHJ5KGUsdCxzKXtyZXR1cm4hMX1jYW5BY2NlbGVyYXRlR2VvbWV0cnkoZSl7cmV0dXJuITF9ZXhlY3V0ZU1hbnkoZSx0LHMsbixpLHIsbyxtKXtpZihvKXtjb25zdCBvPW5ldyBTZShlLHQscyxuLGksITEscixtKTtyZXR1cm4obmV3IGYpLmV4ZWN1dGVNYW55KG8sdCxtKX1yZXR1cm4gbmV3IFNlKGUsdCxzLG4saSwhMSxyLG0pfWV4ZWN1dGUodCxuLGkscixvLG0sYSl7Y29uc3QgaD1uZXcgZShbdF0pLGM9W3JdLHU9dGhpcy5leGVjdXRlTWFueShoLG4saSxjLG8sITEsbSxhKS5uZXh0KCk7cmV0dXJuIHV8fHMoXCJnZW9kZXNpYyBidWZmZXIgbnVsbCBvdXRwdXRcIiksdX19Y2xhc3MgU2UgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKGUsdCxzLHIsbyxtLGEsaCl7c3VwZXIoKSx0aGlzLm1fY3VycmVudFVuaW9uRW52ZWxvcGUyRD1uZXcgXyx0aGlzLm1faW5kZXg9LTEsdGhpcy5tX2RpbmRleD0tMSx0aGlzLm1fcHJvZ3Jlc3NUcmFja2VyPWgsbSYmbihcIlwiKSx0fHxpKFwiXCIpOzA9PT10LmdldENvb3JkaW5hdGVTeXN0ZW1UeXBlKCkmJmkoXCJcIiksdGhpcy5tX2lucHV0R2VvbXM9ZSx0aGlzLm1fc3BhdGlhbFJlZmVyZW5jZT10LHRoaXMubV9jdXJ2ZVR5cGU9cyx0aGlzLm1fZGlzdGFuY2VzPXIsdGhpcy5tX2NvbnZlcmdlbmNlT2Zmc2V0PW8sdGhpcy5tX2JPdXRsaW5lT25seT1tLHRoaXMubV9iVW5pb249YX1uZXh0KCl7bGV0IGU7Zm9yKDtlPXRoaXMubV9pbnB1dEdlb21zLm5leHQoKTspcmV0dXJuIHIoZSksdGhpcy5tX2luZGV4PXRoaXMubV9pbnB1dEdlb21zLmdldEdlb21ldHJ5SUQoKSx0aGlzLm1fZGluZGV4KzE8dGhpcy5tX2Rpc3RhbmNlcy5sZW5ndGgmJnRoaXMubV9kaW5kZXgrKyx0aGlzLmdlb2Rlc2ljQnVmZmVyKGUsdGhpcy5tX2Rpc3RhbmNlc1t0aGlzLm1fZGluZGV4XSk7cmV0dXJuIG51bGx9Z2V0R2VvbWV0cnlJRCgpe3JldHVybiB0aGlzLm1faW5kZXh9dG9jaygpe3JldHVybiEwfWdldFJhbmsoKXtyZXR1cm4gMX1nZW9kZXNpY0J1ZmZlcihlLHQpe3JldHVybiBtZShlLHRoaXMubV9zcGF0aWFsUmVmZXJlbmNlLHRoaXMubV9jdXJ2ZVR5cGUsdCx0aGlzLm1fY29udmVyZ2VuY2VPZmZzZXQsdGhpcy5tX3Byb2dyZXNzVHJhY2tlcil9fWV4cG9ydHt2ZSBhcyBPcGVyYXRvckdlb2Rlc2ljQnVmZmVyfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==