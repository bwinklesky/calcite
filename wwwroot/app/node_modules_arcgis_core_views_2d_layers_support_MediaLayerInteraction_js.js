export const __webpack_id__ = "node_modules_arcgis_core_views_2d_layers_support_MediaLayerInteraction_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_views_2d_layers_support_MediaLayerInteraction_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/MediaLayerInteraction.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/MediaLayerInteraction.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MediaLayerInteraction: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _input_InputManager_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../input/InputManager.js */ "./node_modules/@arcgis/core/views/input/InputManager.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h={redo:"r",undo:"z"},p=Symbol(),m=Symbol(),u=Symbol();let _=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._tool=null,this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_10__.UpdatingHandles,this.enabled=!1,this._onPointerMove=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.debounce)((async e=>{const t=await this._updatingHandles.addPromise(this._findElementAtScreenPoint(e));this.destroyed||(this.removeHandles(m),t&&t!==this.selectedElement&&(this.view.cursor="pointer",this.addHandles((0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__.makeHandle)((()=>this.view.cursor=null)),m)))}))}initialize(){this.addHandles((0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__.destroyHandle)(this._updatingHandles)),this._updatingHandles.add((()=>this.enabled),(e=>this._setEnabled(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),this._updatingHandles.add((()=>this._preferredInteractionTool),(()=>this._preferredInteractionToolChanged()))}get _validatedSelectedElement(){const e=this.selectedElement;if(!e)return null;const{layer:{source:t}}=this;return t?"hasElement"in t?t.hasElement(e)?e:null:t===e?e:null:null}get _preferredInteractionTool(){return this.options?.tool??"transform"}get updating(){return this._updatingHandles.updating}_setEnabled(e){if(this.removeHandles(p),!e)return;const{view:t}=this;this.addHandles([t.on("immediate-click",(e=>this._onClick(e)),_input_InputManager_js__WEBPACK_IMPORTED_MODULE_11__.ViewEventPriorities.TOOL),t.on("pointer-move",(e=>this._onPointerMove(e).catch((()=>{}))),_input_InputManager_js__WEBPACK_IMPORTED_MODULE_11__.ViewEventPriorities.TOOL),t.on("key-down",(e=>{e.key===h.undo&&this._tool?.canUndo()&&(this._tool.undo(),e.stopPropagation()),e.key===h.redo&&this._tool?.canRedo()&&(this._tool.redo(),e.stopPropagation())})),this._updatingHandles.add((()=>this._validatedSelectedElement),(e=>this._selectedElementChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__.makeHandle)((()=>{t.cursor=null,this._removeTool()}))],p)}async _findElementAtScreenPoint(e){const t=(await this.view.hitTest(e,{include:[this.layer]})).results[0];return"media"===t?.type?t.element:null}async _onClick(e){await this._updatingHandles.addPromise(e.defer((async()=>{const t=await this._findElementAtScreenPoint(e);this.destroyed||(t&&e.stopPropagation(),this.selectedElement=t,this.selectedElement&&(this.view.cursor=null))})))}_preferredInteractionToolChanged(){const{_tool:e}=this;e&&(this._preferredInteractionTool===e.type||this._updatingHandles.addPromise(this._recreateTool()))}async _recreateTool(){this.removeHandles(u),this._removeTool();const e=this._validatedSelectedElement;if(!e)return;const t=new AbortController;this.addHandles((0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__.abortHandle)(t),u);const{TransformTool:s,ControlPointsTransformTool:n}=await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_chunks_Point2D_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_chunks_Transformation2D_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_chunks_Envelope2D_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_chunks_ProjectionTransformation_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_geometry_operators_support_jsonConverter_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_interactive_editGeometry_EditGeometryOperations_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_interactive_InteractiveToolBase_js-node_modules_arcgis-ec9fbe"), __webpack_require__.e("vendors-node_modules_arcgis_core_chunks_Distance2DCalculator-CXhBP-8I_js-node_modules_arcgis_-ba59e7"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_interactive_GraphicManipulator_js-node_modules_arcgis_-c544b1"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_draw_DrawOperation_js-node_modules_arcgis_core_views_d-a7684a"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_interactive_tooltip_infos_TooltipInfoWithCoordinates_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_draw_DrawGraphicTool_js-node_modules_arcgis_core_views-ee6dd3"), __webpack_require__.e("vendors-node_modules_arcgis_core_views_2d_interactive_editingTools_MediaTransformToolsWrapper-ea6dee"), __webpack_require__.e("node_modules_arcgis_core_views_2d_interactive_editingTools_js-node_modules_arcgis_core_views_-3c62ca")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../interactive/editingTools.js */ "./node_modules/@arcgis/core/views/2d/interactive/editingTools.js"));if(t.signal.aborted)return;const{view:r}=this;switch(this._preferredInteractionTool){case"transform":this._tool=new s({target:e,view:r});break;case"reshape":this._tool=new n({mediaElement:e,view:r})}this.addHandles((0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__.makeHandle)((()=>{this._tool&&(r.tools.remove(this._tool),this._tool=null)})),this._tool),r.addAndActivateTool(this._tool)}_removeTool(){this._tool&&this.removeHandles(this._tool)}async _selectedElementChanged(e){e?.georeference?await this._updatingHandles.addPromise(this._recreateTool()):this._removeTool()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"_validatedSelectedElement",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"_preferredInteractionTool",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],_.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],_.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"selectedElement",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"enabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"options",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],_.prototype,"updating",null),_=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.support.MediaLayerInteraction")],_);


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19zdXBwb3J0X01lZGlhTGF5ZXJJbnRlcmFjdGlvbl9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQzJ0QixTQUFTLGtCQUFrQixrQ0FBa0Msb0JBQW9CLHlEQUFDLENBQUMsZUFBZSxtREFBbUQsOEVBQUMscUNBQXFDLCtEQUFDLFlBQVksa0ZBQWtGLGdIQUFnSCxnRUFBQyxtQ0FBbUMsR0FBRyxhQUFhLGdCQUFnQixtRUFBQywrRkFBK0YsMkRBQUMsZ0hBQWdILGdDQUFnQyw2QkFBNkIsa0JBQWtCLE1BQU0sT0FBTyxVQUFVLE1BQU0sbUVBQW1FLGdDQUFnQyx1Q0FBdUMsZUFBZSxzQ0FBc0MsZUFBZSxtQ0FBbUMsTUFBTSxPQUFPLE1BQU0sOERBQThELHdFQUFDLG1FQUFtRSxJQUFJLHdFQUFDLDRCQUE0Qiw4SkFBOEosdUdBQXVHLDJEQUFDLEVBQUUsZ0VBQUMsT0FBTyxpQ0FBaUMsT0FBTyxtQ0FBbUMsb0NBQW9DLHFCQUFxQixjQUFjLHVDQUF1QyxrQkFBa0IsMERBQTBELGdEQUFnRCw4R0FBOEcsSUFBSSxtQ0FBbUMsTUFBTSxRQUFRLE1BQU0scUdBQXFHLHNCQUFzQix5Q0FBeUMsdUNBQXVDLGFBQWEsNEJBQTRCLGdCQUFnQixpRUFBQyxPQUFPLE1BQU0sNkNBQTZDLE9BQU8sMnREQUEyQyxDQUFDLDJCQUEyQixNQUFNLE9BQU8sTUFBTSx1Q0FBdUMsa0NBQWtDLGdCQUFnQixFQUFFLE1BQU0sZ0NBQWdDLHNCQUFzQixFQUFFLGdCQUFnQixnRUFBQyxPQUFPLHlEQUF5RCxnREFBZ0QsY0FBYywyQ0FBMkMsaUNBQWlDLGtHQUFrRyx1REFBQyxFQUFFLHNGQUFDLGtEQUFrRCx1REFBQyxFQUFFLHNGQUFDLGtEQUFrRCx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLDhCQUE4Qix1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLCtCQUErQix1REFBQyxFQUFFLHNGQUFDLDBDQUEwQyx1REFBQyxFQUFFLHNGQUFDLGtDQUFrQyx1REFBQyxFQUFFLHNGQUFDLGtDQUFrQyx1REFBQyxFQUFFLHNGQUFDLG1DQUFtQyx1REFBQyxFQUFFLHNGQUFDLDJEQUE4RiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvc3VwcG9ydC9NZWRpYUxheWVySW50ZXJhY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyBvLGRlc3Ryb3lIYW5kbGUgYXMgcyxhYm9ydEhhbmRsZSBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnR7ZGVib3VuY2UgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtpbml0aWFsIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL1JhbmRvbUxDRy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBhfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7VXBkYXRpbmdIYW5kbGVzIGFzIGR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9zdXBwb3J0L1VwZGF0aW5nSGFuZGxlcy5qc1wiO2ltcG9ydHtWaWV3RXZlbnRQcmlvcml0aWVzIGFzIGN9ZnJvbVwiLi4vLi4vLi4vaW5wdXQvSW5wdXRNYW5hZ2VyLmpzXCI7Y29uc3QgaD17cmVkbzpcInJcIix1bmRvOlwielwifSxwPVN5bWJvbCgpLG09U3ltYm9sKCksdT1TeW1ib2woKTtsZXQgXz1jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fdG9vbD1udWxsLHRoaXMuX3VwZGF0aW5nSGFuZGxlcz1uZXcgZCx0aGlzLmVuYWJsZWQ9ITEsdGhpcy5fb25Qb2ludGVyTW92ZT1uKChhc3luYyBlPT57Y29uc3QgdD1hd2FpdCB0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl9maW5kRWxlbWVudEF0U2NyZWVuUG9pbnQoZSkpO3RoaXMuZGVzdHJveWVkfHwodGhpcy5yZW1vdmVIYW5kbGVzKG0pLHQmJnQhPT10aGlzLnNlbGVjdGVkRWxlbWVudCYmKHRoaXMudmlldy5jdXJzb3I9XCJwb2ludGVyXCIsdGhpcy5hZGRIYW5kbGVzKG8oKCgpPT50aGlzLnZpZXcuY3Vyc29yPW51bGwpKSxtKSkpfSkpfWluaXRpYWxpemUoKXt0aGlzLmFkZEhhbmRsZXMocyh0aGlzLl91cGRhdGluZ0hhbmRsZXMpKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5lbmFibGVkKSwoZT0+dGhpcy5fc2V0RW5hYmxlZChlKSksciksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuX3ByZWZlcnJlZEludGVyYWN0aW9uVG9vbCksKCgpPT50aGlzLl9wcmVmZXJyZWRJbnRlcmFjdGlvblRvb2xDaGFuZ2VkKCkpKX1nZXQgX3ZhbGlkYXRlZFNlbGVjdGVkRWxlbWVudCgpe2NvbnN0IGU9dGhpcy5zZWxlY3RlZEVsZW1lbnQ7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3R7bGF5ZXI6e3NvdXJjZTp0fX09dGhpcztyZXR1cm4gdD9cImhhc0VsZW1lbnRcImluIHQ/dC5oYXNFbGVtZW50KGUpP2U6bnVsbDp0PT09ZT9lOm51bGw6bnVsbH1nZXQgX3ByZWZlcnJlZEludGVyYWN0aW9uVG9vbCgpe3JldHVybiB0aGlzLm9wdGlvbnM/LnRvb2w/P1widHJhbnNmb3JtXCJ9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX3VwZGF0aW5nSGFuZGxlcy51cGRhdGluZ31fc2V0RW5hYmxlZChlKXtpZih0aGlzLnJlbW92ZUhhbmRsZXMocCksIWUpcmV0dXJuO2NvbnN0e3ZpZXc6dH09dGhpczt0aGlzLmFkZEhhbmRsZXMoW3Qub24oXCJpbW1lZGlhdGUtY2xpY2tcIiwoZT0+dGhpcy5fb25DbGljayhlKSksYy5UT09MKSx0Lm9uKFwicG9pbnRlci1tb3ZlXCIsKGU9PnRoaXMuX29uUG9pbnRlck1vdmUoZSkuY2F0Y2goKCgpPT57fSkpKSxjLlRPT0wpLHQub24oXCJrZXktZG93blwiLChlPT57ZS5rZXk9PT1oLnVuZG8mJnRoaXMuX3Rvb2w/LmNhblVuZG8oKSYmKHRoaXMuX3Rvb2wudW5kbygpLGUuc3RvcFByb3BhZ2F0aW9uKCkpLGUua2V5PT09aC5yZWRvJiZ0aGlzLl90b29sPy5jYW5SZWRvKCkmJih0aGlzLl90b29sLnJlZG8oKSxlLnN0b3BQcm9wYWdhdGlvbigpKX0pKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5fdmFsaWRhdGVkU2VsZWN0ZWRFbGVtZW50KSwoZT0+dGhpcy5fc2VsZWN0ZWRFbGVtZW50Q2hhbmdlZChlKSksciksbygoKCk9Pnt0LmN1cnNvcj1udWxsLHRoaXMuX3JlbW92ZVRvb2woKX0pKV0scCl9YXN5bmMgX2ZpbmRFbGVtZW50QXRTY3JlZW5Qb2ludChlKXtjb25zdCB0PShhd2FpdCB0aGlzLnZpZXcuaGl0VGVzdChlLHtpbmNsdWRlOlt0aGlzLmxheWVyXX0pKS5yZXN1bHRzWzBdO3JldHVyblwibWVkaWFcIj09PXQ/LnR5cGU/dC5lbGVtZW50Om51bGx9YXN5bmMgX29uQ2xpY2soZSl7YXdhaXQgdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UoZS5kZWZlcigoYXN5bmMoKT0+e2NvbnN0IHQ9YXdhaXQgdGhpcy5fZmluZEVsZW1lbnRBdFNjcmVlblBvaW50KGUpO3RoaXMuZGVzdHJveWVkfHwodCYmZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLnNlbGVjdGVkRWxlbWVudD10LHRoaXMuc2VsZWN0ZWRFbGVtZW50JiYodGhpcy52aWV3LmN1cnNvcj1udWxsKSl9KSkpfV9wcmVmZXJyZWRJbnRlcmFjdGlvblRvb2xDaGFuZ2VkKCl7Y29uc3R7X3Rvb2w6ZX09dGhpcztlJiYodGhpcy5fcHJlZmVycmVkSW50ZXJhY3Rpb25Ub29sPT09ZS50eXBlfHx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl9yZWNyZWF0ZVRvb2woKSkpfWFzeW5jIF9yZWNyZWF0ZVRvb2woKXt0aGlzLnJlbW92ZUhhbmRsZXModSksdGhpcy5fcmVtb3ZlVG9vbCgpO2NvbnN0IGU9dGhpcy5fdmFsaWRhdGVkU2VsZWN0ZWRFbGVtZW50O2lmKCFlKXJldHVybjtjb25zdCB0PW5ldyBBYm9ydENvbnRyb2xsZXI7dGhpcy5hZGRIYW5kbGVzKGkodCksdSk7Y29uc3R7VHJhbnNmb3JtVG9vbDpzLENvbnRyb2xQb2ludHNUcmFuc2Zvcm1Ub29sOm59PWF3YWl0IGltcG9ydChcIi4uLy4uL2ludGVyYWN0aXZlL2VkaXRpbmdUb29scy5qc1wiKTtpZih0LnNpZ25hbC5hYm9ydGVkKXJldHVybjtjb25zdHt2aWV3OnJ9PXRoaXM7c3dpdGNoKHRoaXMuX3ByZWZlcnJlZEludGVyYWN0aW9uVG9vbCl7Y2FzZVwidHJhbnNmb3JtXCI6dGhpcy5fdG9vbD1uZXcgcyh7dGFyZ2V0OmUsdmlldzpyfSk7YnJlYWs7Y2FzZVwicmVzaGFwZVwiOnRoaXMuX3Rvb2w9bmV3IG4oe21lZGlhRWxlbWVudDplLHZpZXc6cn0pfXRoaXMuYWRkSGFuZGxlcyhvKCgoKT0+e3RoaXMuX3Rvb2wmJihyLnRvb2xzLnJlbW92ZSh0aGlzLl90b29sKSx0aGlzLl90b29sPW51bGwpfSkpLHRoaXMuX3Rvb2wpLHIuYWRkQW5kQWN0aXZhdGVUb29sKHRoaXMuX3Rvb2wpfV9yZW1vdmVUb29sKCl7dGhpcy5fdG9vbCYmdGhpcy5yZW1vdmVIYW5kbGVzKHRoaXMuX3Rvb2wpfWFzeW5jIF9zZWxlY3RlZEVsZW1lbnRDaGFuZ2VkKGUpe2U/Lmdlb3JlZmVyZW5jZT9hd2FpdCB0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl9yZWNyZWF0ZVRvb2woKSk6dGhpcy5fcmVtb3ZlVG9vbCgpfX07ZShbbCgpXSxfLnByb3RvdHlwZSxcIl92YWxpZGF0ZWRTZWxlY3RlZEVsZW1lbnRcIixudWxsKSxlKFtsKCldLF8ucHJvdG90eXBlLFwiX3ByZWZlcnJlZEludGVyYWN0aW9uVG9vbFwiLG51bGwpLGUoW2woe2NvbnN0cnVjdE9ubHk6ITB9KV0sXy5wcm90b3R5cGUsXCJ2aWV3XCIsdm9pZCAwKSxlKFtsKHtjb25zdHJ1Y3RPbmx5OiEwfSldLF8ucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLGUoW2woKV0sXy5wcm90b3R5cGUsXCJzZWxlY3RlZEVsZW1lbnRcIix2b2lkIDApLGUoW2woKV0sXy5wcm90b3R5cGUsXCJlbmFibGVkXCIsdm9pZCAwKSxlKFtsKCldLF8ucHJvdG90eXBlLFwib3B0aW9uc1wiLHZvaWQgMCksZShbbCgpXSxfLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksXz1lKFthKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuc3VwcG9ydC5NZWRpYUxheWVySW50ZXJhY3Rpb25cIildLF8pO2V4cG9ydHtfIGFzIE1lZGlhTGF5ZXJJbnRlcmFjdGlvbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=