export const __webpack_id__ = "vendors-node_modules_arcgis_core_layers_graphics_controllers_I3SOnDemandController_js-node_mo-50d301";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_layers_graphics_controllers_I3SOnDemandController_js-node_mo-50d301"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/core/ReactiveSet.js":
/*!*******************************************************!*\
  !*** ./node_modules/@arcgis/core/core/ReactiveSet.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accessorSupport/tracking.js */ "./node_modules/@arcgis/core/core/accessorSupport/tracking.js");
/* harmony import */ var _accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accessorSupport/tracking/SimpleObservable.js */ "./node_modules/@arcgis/core/core/accessorSupport/tracking/SimpleObservable.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(e){this._observable=new _accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__.SimpleObservable,this._set=new Set(e)}get size(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.size}add(e){const s=this._set.size;return this._set.add(e),this._set.size!==s&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const s=this._set.delete(e);return s&&this._observable.notify(),s}entries(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.entries()}forEach(s,t){(0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.forEach(((e,r)=>s.call(t,e,r,this)),t)}has(s){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.has(s)}keys(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.keys()}values(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.values()}[Symbol.iterator](){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   projectBoundingSphere: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _projectors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./projectors.js */ "./node_modules/@arcgis/core/geometry/projection/projectors.js");
/* harmony import */ var _support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/Ellipsoid.js */ "./node_modules/@arcgis/core/geometry/support/Ellipsoid.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function l(e,r,l,f){if(null==r||null==f)return!1;const p=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_2__.getProjectorClassification)(r,f);if(null==p?.projector)return!1;if(p.projector===_projectors_js__WEBPACK_IMPORTED_MODULE_2__.copy3)return l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=e[3],!0;const{source:E,dest:m,projector:R}=p;if(m.spatialReferenceId===_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.WEB_MERCATOR){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_2__.projectionTable[E.spatialReferenceId][_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.WGS84];return null!=r&&(r(e,0,u,0),(0,_projectors_js__WEBPACK_IMPORTED_MODULE_2__.wgs84ToWebMercator)(u,0,l,0),l[3]=a(u[1],e[2],e[3],_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__.earth.radius),!0)}if(E.spatialReferenceId!==_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.WGS84&&E.spatialReferenceId!==_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.CGCS2000||m.spatialReferenceId!==_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.PLATE_CARREE){R(e,0,l,0);const r=E.metersPerUnit??1,t=m.metersPerUnit??1;l[3]=e[3]*r/t}else{const r=_projectors_js__WEBPACK_IMPORTED_MODULE_2__.projectionTable[E.spatialReferenceId][_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.SPHERICAL_ECEF],t=_projectors_js__WEBPACK_IMPORTED_MODULE_2__.projectionTable[_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.SPHERICAL_ECEF][_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.PLATE_CARREE];let n=e[3];null!=r&&null!=t&&(n=a(e[1],e[2],e[3],_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__.earth.radius)),R(e,0,l,0),l[3]=n}return!0}function a(e,r,t,n){const o=n+r;if(o<n/2||t>o)return Number.MAX_VALUE;const s=Math.abs(f*e)+Math.asin(t/o);return s>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(s)}const u=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),f=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.deg2rad)(1);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Promise.js */ "./node_modules/@arcgis/core/core/Promise.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/projection/projectBoundingRect.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingRect.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../support/PromiseQueue.js */ "./node_modules/@arcgis/core/layers/support/PromiseQueue.js");
/* harmony import */ var _views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../views/ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _views_3d_layers_i3s_I3SClientNodeLoader_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SClientNodeLoader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js");
/* harmony import */ var _views_3d_layers_i3s_I3SFrameTask_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SFrameTask.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js");
/* harmony import */ var _views_3d_layers_i3s_I3SIndex_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SIndex.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js");
/* harmony import */ var _views_3d_layers_i3s_I3SLodHandling_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SLodHandling.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js");
/* harmony import */ var _views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _views_3d_layers_i3s_I3SNodeLoader_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SNodeLoader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js");
/* harmony import */ var _views_3d_layers_i3s_I3SStreamDataController_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SStreamDataController.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js");
/* harmony import */ var _views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _views_3d_layers_i3s_I3SViewportQueries_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SViewportQueries.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js");
/* harmony import */ var _views_3d_layers_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../views/3d/layers/support/I3SLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js");
/* harmony import */ var _views_3d_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../views/3d/support/extentUtils.js */ "./node_modules/@arcgis/core/views/3d/support/extentUtils.js");
/* harmony import */ var _views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../views/3d/support/index.js */ "./node_modules/@arcgis/core/views/3d/support/index.js");
/* harmony import */ var _views_3d_support_MemoryController_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../views/3d/support/MemoryController.js */ "./node_modules/@arcgis/core/views/3d/support/MemoryController.js");
/* harmony import */ var _views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../views/support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const O=100,P=2,U=1e4,q=1e-4,G=1.2,Q=500,j=1.5;let T=class extends(_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__["default"].EsriPromiseMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"])){get isMeshPyramid(){return"mesh-pyramids"===this.layer.profile||"MeshPyramid"===this.layer.store?.lodType}get isGraphics3D(){return"points"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(null==this.layer.priority||"High"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(_views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_26__.ClientType.I3S_INDEX);return new _views_3d_layers_i3s_I3SStreamDataController_js__WEBPACK_IMPORTED_MODULE_21__.I3SStreamDataController(e,this.layer.customParameters,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(_views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_26__.ClientType.I3S_DATA);return new _views_3d_layers_i3s_I3SStreamDataController_js__WEBPACK_IMPORTED_MODULE_21__.I3SStreamDataController(e,this.layer.customParameters,this.layer.apiKey)}get crsVertex(){return (0,_views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_22__.getVertexCrs)(this.layer)}get crsIndex(){return (0,_views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_22__.getIndexCrs)(this.layer)}get layer(){return this.layerView.i3slayer}get running(){return this.updating}get rootNodeVisible(){if(this._index){const e=this._index.rootNode;if(e)return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}get requiredAttributes(){return this._requiredAttributes}constructor(e){super(e),this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.worker=null,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._idleStateCallbacks=null,this._newLoadingNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"]({deallocator:null}),this._modificationsNodeFilteringArray=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"],this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._idleQueue=new _support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_13__.PromiseQueue,this._elevationUpdateNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"]({deallocator:null}),this._errorCount=0}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new _views_3d_layers_i3s_I3SLodHandling_js__WEBPACK_IMPORTED_MODULE_18__["default"](e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("disable-feature:idb-cache"),"fields"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([s])=>{if(this.destroyed||!e||e.destroyed||!s)return;const{view:r,clientGeometry:a}=e,{resourceController:l}=r;if(this._setClippingArea(r.clippingArea),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>r?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>r.quality),(()=>this._setCameraDirty()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.sync),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.contentVisible),(e=>{const t=e?()=>this._updateIdleState(!0):()=>this._updateViewData(),i=e?()=>this._updateIdleState(!1):()=>{};e&&null!=this._index&&this._index.invalidateAllElevationRanges(),this._idleStateCallbacks?(e||this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=l.scheduler.registerIdleStateCallbacks(t,i)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.initial),(0,_views_3d_layers_i3s_I3SFrameTask_js__WEBPACK_IMPORTED_MODULE_16__.addCallback)(e.view.resourceController.scheduler,this),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>r.state?.contentCamera),(()=>this._setCameraDirty())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.lodFactor),(()=>this._setCameraDirty())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.availableFields),(()=>this._requiredFieldsChange())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.holeFilling),(e=>null!=this._index&&(this._index.holeFilling=e)))]),this._viewportQueries=new _views_3d_layers_i3s_I3SViewportQueries_js__WEBPACK_IMPORTED_MODULE_23__["default"](this.crsIndex,r.renderCoordsHelper,r.state.contentCamera,!r.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?r.basemapTerrain:r.elevationProvider,(0,_views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_14__.viewingModeFromString)(r.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this._lod,angleDependentLoD:this._lod<.5}),this._clientNodeLoader=new _views_3d_layers_i3s_I3SClientNodeLoader_js__WEBPACK_IMPORTED_MODULE_15__.I3SClientNodeLoader(this.layer.uid,{indexSR:this.crsIndex,vertexSR:this.crsVertex,renderSR:r.renderCoordsHelper.spatialReference},r.resourceController.memoryController,this.worker),this._index=new _views_3d_layers_i3s_I3SIndex_js__WEBPACK_IMPORTED_MODULE_17__.I3SIndex((0,_views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_14__.viewingModeFromString)(r.viewingMode),t,s,this.indexStreamController,this._clientNodeLoader,this._viewportQueries,_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this),e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.NodeState.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?.(t)??null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid||this.isGraphics3D),this._index.imModificationsChanged(!!e.hasModifications),this._index.layerFilterChanged(!!e.hasGeometryFilter),null!=a){for(const e of a)this._addMesh(e.mesh,e.oid);this.addHandles(a.on("change",(e=>{for(const t of e.removed)this._removeMesh(t.oid);for(const t of e.added)this._addMesh(t.mesh,t.oid)})))}this._startNodeLoading()})))}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;null!=t&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);null!=i&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._nodeLoader=null,k.prune()}get viewportQueries(){return this._viewportQueries}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=R(e,i),r=R(t,i);return s>=0&&r>=0?{index:s,name:t[r].name,field:t[r],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();E(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_12__.create)();(0,_views_3d_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_25__.toBoundingRect)(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){null!=this._viewportQueries&&(this._viewportQueries.setPointOfInterest(e),null!=this._index&&(this._index.progressiveLoadPenalty=H.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),null!=this._viewportQueries&&null!=this._index&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}_addMesh(e,t){if(null==this._index)return;const i=this._clientNodeLoader.createMeshNodeInfo(e,t),s=this._index.addClientNodeToIndex(i.id,i.mbs);this._clientNodeLoader.addMeshNode(s,i),this._evaluateUpdating(),this.notifyChange("rootNodeVisible")}_removeMesh(e){const t=this._clientNodeLoader.getMeshNodeIndex(e);if(null!=t){if(null==this._index)throw new Error("delayed removal of client side i3s node geometry not supported yet.");{const e=(e,t)=>{this.layerView.removeNode(t),this._clientNodeLoader.removeNode(e),this.layerView.deleteCachedNodeData&&null!=e&&this.layerView.deleteCachedNodeData(e),this.layerView.deleteCachedGPUData?.(this.layerView.loadCachedGPUData?.(t))},i=(e,t,i)=>{this._clientNodeLoader.updateNodeIndex(e,t,i),this.layerView.updateNodeIndex&&this.layerView.updateNodeIndex(t,i)};this._index.removeClientNodeFromIndex(t,e,i),this.notifyChange("rootNodeVisible")}}}updateElevationChanged(e,t){const i=this._index;if(null==i?.rootNode||null==t)return null;this.crsIndex.equals(t)||((0,_geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_11__.projectBoundingRect)(e,t,B,this.crsIndex),e=B);const s=this._elevationUpdateNodes;return s.clear(),(0,_views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_22__.findIntersectingNodes)(e,i.rootNode,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}removeAllGeometryObbs(){null!=this._index&&this._index.removeAllGeometryObbs()}getRenderMbs(e){return null!=this._viewportQueries?this._viewportQueries.getServiceMbsInRenderSR(e):null}_elevationInfoChanged(e){null!=this._index&&(this._index.updateElevationInfo(e,this.isMeshPyramid||this.isGraphics3D),this._setCameraDirty())}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get _isIntegratedMesh(){return"integrated-mesh"===this.layer.type}get unloadedMemoryEstimate(){return null!=this._index&&this.layerView.contentVisible?this._index.unloadedMemoryEstimate*this._lodDropFactor:0}async _loadNodeData(e,t){return e.index<0?this._clientNodeLoader.loadNodeData(e.id,t):this._nodeLoader.loadNodeData(e,t)}async _loadAttributes(e,t,i){return(e.index<0?this._clientNodeLoader:this._nodeLoader).loadAttributes(e,t,i)}get indexDepth(){return null!=this._index?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData?this._disableMemCache=e:this._disableMemCache=!0}runTask(e,t){return this.layerView.contentVisible?this.layerView.visible&&null!=this._index?(this._processWithErrorLogging(e,t),this._index.maxPriority):-1/0:(this._updateViewData(),this._evaluateUpdating(),-1/0)}_processWithErrorLogging(e,t){try{this._process(e,t)}catch(s){this._errorCount<50?_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(`Error during processing: ${s} at ${s.stack}`):50===this._errorCount&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("Too many errors for this layer. Further errors will not be displayed."),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null!=this._nodeLoader&&null!=this._index&&(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this._isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this._isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.indexLoading,t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(null==this._index)return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading||t===this._get("leavesReached")||this._set("leavesReached",t)}return this._index.load()}_prefetchIndex(){return!(null==this._index||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||null==this._index||null==this._viewportQueries)return;const e=!this._index.isLoading,t=this.featureTarget*this._baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.indexMissing>Q){if(this._featureLOD<=q)return;this._featureLOD/=j,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=U||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this._lod,r=this._index.checkFeatureTarget(t,s);r!==s&&(this._featureLOD=r/this._baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*G||e&&i.estimate>t))return;if(this._featureLOD<=q)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(U,Math.max(q,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(null==t)return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);null!=s&&!this.layerView.isNodeLoaded(s.index);s=t.getParent(s.index))if(this._enableFromGPUCache(s,_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.NodeState.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(null==this._index)return!1;let i=(this._isIdle?O:P)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());null!=t&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const r=this._index.getNode(s.add.back());if(null==r||r.cacheState!==_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.CacheState.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(r),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=P)&&(this._downloadingCount<_views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_26__.maxDownloadSlots&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView){if(this.layerView.contentVisible){const i=(this._index?.indexMissing??0)+3*(this._index?.updates.add.length??0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.updating||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling||null!=this._index&&this._index.isPrefetching),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}else e=this._cameraDirty,t=e?0:1;this.updating=e,this.updatingProgress=t}}_updateViewData(){if(!this._cameraDirty||null==this._index||null==this._viewportQueries)return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=H.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange("rootNodeVisible")}_getProgressiveLoadFactor(){return this.layerView.view.quality<1?1:this.layerView.progressiveLoadFactor}get _lod(){return this._featureLOD*this._baseLOD}get _baseLOD(){const e=this.layerView.lodFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*this.layerView.view.quality}get _lodDropFactor(){if(this.fixedFeatureTarget)return 1;return(Math.min(this.layerView.view.quality,.5)-_views_3d_support_MemoryController_js__WEBPACK_IMPORTED_MODULE_27__.minQuality)/(.5-_views_3d_support_MemoryController_js__WEBPACK_IMPORTED_MODULE_27__.minQuality)}isGeometryVisible(e){return!!this._index?.isGeometryVisible(e.index)}updateVisibility(e){this._index?.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){this._index?.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){this._index?.invalidateVisibilityObbs()}modificationsChanged(){this._index?.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&!(null==this._index||!this._index.isGeometryVisible(e.index))}_shouldDropNode(e){if(null==this._viewportQueries)return!1;const t=this._lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||null==e||null==this._viewportQueries)return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new _views_3d_layers_i3s_I3SNodeLoader_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.layer,this.dataStreamController,_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this),this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading(((e,t)=>this._removeNodes(e,t,z.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(null==t||null==this._viewportQueries)return!1;k.clear(),this.layerView.getLoadedNodeIndices(k);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return k.filterInPlace((e=>{const i=t.getNode(e);return null==i||!t.isGeometryVisible(e)||s(i)})),k.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(k,e,z.pop),!(i&&this._lodDropFactor<1)&&(0===k.length||(k.clear(),!1))}markNodeToRemove(e){k.push(e)}removeMarkedNodes(){this._removeNodes(k,_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_28__.noBudget,z.pop)}_removeNodes(e,t,i){if(0!==e.length&&!t.done)for(null!=this._index&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),r=this._index;i===z.fadeout&&this.layerView.nodeFadeoutEnabled&&null!=r&&r.isGeometryVisible(s)?this.layerView.fadeNode(s,_views_3d_layers_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_24__.FadeDirection.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}}_needsUpdate(e){if(e.resources.isEmpty||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}async _updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t),this._evaluateUpdating();try{const i=this.layerView.getLoadedAttributes(e.index),s=E(i,this._requiredAttributes)?this.layerView.getAttributeData(e.index):await this._loadAttributes(e,this._requiredAttributes,t.signal);await this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:s},t.signal)),t.signal)}catch(i){if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)}this._updatingNodes.delete(e.index),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("already loading node "+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&null!=this._index&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.CacheState.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.CacheState.Uncached,!0))).catch((t=>!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(t)&&(e.cacheState=_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.CacheState.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||null==this._index)return!1;if(t===_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.NodeState.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e.index);return null!=t?.attributeInfo&&E(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){null!=this._index&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;null!=i&&i.updateChildrenLoaded(e,t?1:-1)}async _loadCached(e,t){if(this._enableFromGPUCache(e,_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.NodeState.Leaf))return!0;const i=this.layerView;if(this.disableIDBCache||!i.loadCachedNodeData||!i.addCachedNodeData)return!1;const s=(t,i)=>this._nodeLoader.loadTextures(e,t,i),r=(t,i)=>this._clientNodeLoader.loadTextures(e,t,i),a=e.index>=0?s:r,d=await this.schedule((()=>i.loadCachedNodeData(e,t,a)),t);if(null==d)return!1;const o=this._requiredAttributes,n=await this.reschedule((()=>this._loadAttributes(e,o,t)),t);return await this.reschedule((()=>i.addCachedNodeData(e,d,{loadedAttributes:o,attributeData:n},t)),t),this._nodeAdded(),!0}_loadUncached(e,t){return this._downloadingCount++,this._loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_19__.CacheState.Cached})).catch((t=>{if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(t))throw _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("#loadNodeData()",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,null!=this._index&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&null!=this._index&&this._index.resetFailedNodes())}get test(){}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),null!=this._index&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;null!=t&&t.layerFilterChanged(e),this._setCameraDirty()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"isMeshPyramid",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"isGraphics3D",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"useMaximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"indexStreamController",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"dataStreamController",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"crsVertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"crsIndex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],T.prototype,"featureTarget",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],T.prototype,"fixedFeatureTarget",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],T.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],T.prototype,"layer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],T.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"running",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],T.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],T.prototype,"leavesReached",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],T.prototype,"worker",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0,dependsOn:[]})],T.prototype,"rootNodeVisible",null),T=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.layers.graphics.controllers.I3SOnDemandController")],T);const k=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"]({deallocator:null});function E(e,t){return null!=e&&e.length===t.length&&e.every((e=>R(t,e.name)>=0))}function R(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const H={distancePenalty:10},B=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_12__.create)();var z;!function(e){e[e.pop=0]="pop",e[e.fadeout=1]="fadeout"}(z||(z={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EncodedMeshTexture: () => (/* binding */ t),
/* harmony export */   imageFromBinaryData: () => (/* binding */ o),
/* harmony export */   isEncodedMeshTexture: () => (/* binding */ n),
/* harmony export */   jsonFromBinaryData: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t){this.data=t,this.type="encoded-mesh-texture",this.encoding=_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__.TextureEncodingMimeType.KTX2_ENCODING}}function n(e){return"encoded-mesh-texture"===e?.type}async function r(e){const t=new Blob([e]),n=await t.text();return JSON.parse(n)}async function o(n,r){if(r===_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__.TextureEncodingMimeType.KTX2_ENCODING)return new t(n);const o=new Blob([n],{type:r});let c=URL.createObjectURL(o);switch(r){case"image/jpeg":c+="#.jpg";break;case"image/png":c+="#.png"}const s=new Image;if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-iPhone"))return new Promise(((e,t)=>{const n=()=>{o(),e(s)},r=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(c),s.removeEventListener("load",n),s.removeEventListener("error",r)};s.addEventListener("load",n),s.addEventListener("error",r),s.src=c}));try{s.src=c,await s.decode()}catch(a){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(c),s}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/CachedMeshData.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/CachedMeshData.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CachedMeshData: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e){this.loadedMesh=e}get cachedMemory(){return this.loadedMesh.usedMemory}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertMeshMaterialToPBRMaterial: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../Color.js */ "./node_modules/@arcgis/core/Color.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _support_requestUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../support/requestUtils.js */ "./node_modules/@arcgis/core/support/requestUtils.js");
/* harmony import */ var _glTF_internal_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../glTF/internal/resourceUtils.js */ "./node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/* harmony import */ var _webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl-engine/materials/pbrUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js");
/* harmony import */ var _webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../webscene/support/AlphaCutoff.js */ "./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function c(o){const t=[],r=[];if(null==o){return{material:{alphaMode:"opaque",alphaCutoff:_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_7__.alphaCutoff,doubleSided:!0,cullFace:0,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[1,1,1,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6000000238418579},wrapTextures:!1,hasParametersFromSource:!0},requiredTextures:t,textureData:r}}const s=d(o);"auto"===o.alphaMode&&console.warn('alphaMode "auto" not supported by I3S PBRMaterial - defaulting to "blend".');const c=(0,_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_6__.useSchematicPBR)({normalTexture:o.normalTexture,emissiveTexture:s?o.emissiveTexture:null,emissiveFactor:s?_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].toUnitRGB(o.emissiveColor):null,occlusionTexture:s?o.occlusionTexture:null,metallicRoughnessTexture:s?o.metallicRoughnessTexture:null,metallicFactor:s?o.metallic:null,roughnessFactor:s?o.roughness:null}),g=c?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_6__.schematicMRRFactors[0]:s?o.metallic:0,p=c?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_6__.schematicMRRFactors[1]:s?o.roughness:0;return{material:{alphaMode:"auto"===o.alphaMode?"blend":o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,cullFace:o.doubleSided?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_5__.CullFaceOptions.None:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_5__.CullFaceOptions.Back,normalTextureId:await m(o.normalTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Normal),emissiveTextureId:s?await m(o.emissiveTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Emissive):-1,occlusionTextureId:s?await m(o.occlusionTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Occlusion):-1,emissiveFactor:s&&null!=o.emissiveColor?_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].toUnitRGB(o.emissiveColor):[0,0,0],metallicRoughness:{baseColorFactor:null!=o.color?_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].toUnitRGBA(o.color):[1,1,1,1],baseColorTextureId:await m(o.colorTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color),metallicRoughnessTextureId:s?await m(o.metallicRoughnessTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.MetallicRoughness):-1,metallicFactor:g,roughnessFactor:p},wrapTextures:!0,hasParametersFromSource:c},requiredTextures:t,textureData:r}}async function m(e,a,n,i){if(null==e)return-1;const l=n.length,u=e.data,c=e.url;if(null!=u){if(u instanceof HTMLImageElement||u instanceof HTMLCanvasElement)return n.push({id:l,usage:i,data:u,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG}),a.push({id:l,usage:i,encodings:[{name:void 0,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG}]}),l;if(u instanceof HTMLVideoElement)return-1;if(u instanceof ImageData)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("scenelayer","ImageData textures not supported yet for client side I3S nodes");if(u instanceof _glTF_internal_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.EncodedMeshTexture)return n.push({id:l,usage:i,data:u.data,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX2}),a.push({id:l,usage:i,encodings:[{name:void 0,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX2}]}),l}else if(null!=c){const e=new Image;e.src=c;const o=await (0,_support_requestUtils_js__WEBPACK_IMPORTED_MODULE_2__.loadImageAsync)(e,e.src,!1,void 0);return n.push({id:l,usage:i,data:o,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG}),a.push({id:l,usage:i,encodings:[{name:void 0,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG}]}),l}return-1}function d(e){return e.hasOwnProperty("metallicRoughnessTexture")}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SClientNodeLoader: () => (/* binding */ f),
/* harmony export */   createSphereFromExtent: () => (/* binding */ y),
/* harmony export */   sizeOfFloat32: () => (/* binding */ b),
/* harmony export */   sizeOfInt32: () => (/* binding */ S),
/* harmony export */   sizeOfUInt64: () => (/* binding */ N),
/* harmony export */   sizeOfUInt8: () => (/* binding */ _),
/* harmony export */   transformNormals: () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_MemCache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/MemCache.js */ "./node_modules/@arcgis/core/core/MemCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/math/mat3.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/mat3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/meshVertexSpaceUtils.js */ "./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _CachedMeshData_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./CachedMeshData.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/CachedMeshData.js");
/* harmony import */ var _I3SClientMaterialUtil_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./I3SClientMaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f{constructor(e,t,r,o){this._uid=e,this._worker=o,this._id2Meta=new Map,this._oid2Meta=new Map,this._indexSR=t.indexSR,this._vertexSR=t.vertexSR,this._renderSR=t.renderSR,this._memCache=r.newCache(`sl-client-mesh-data-${this._uid}`)}get uid(){return this._uid}get worker(){return this._worker}get indexSR(){return this._indexSR}get renderSR(){return this._renderSR}createMeshNodeInfo(e,t){const r=`mesh${t}`,o=e.extent,n=o.spatialReference,s=this._indexSR,a=y(o,e.origin);(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_9__.projectBoundingSphere)(a,n,a,s);return{type:"mesh",id:r,version:w(e),oid:t,mbs:a,componentNodeIds:[],unloadedMesh:e,nodeIndex:null,loadMeshPromise:null}}addMeshNode(t,r){if(null!=this.getMeshNodeIndex(r.oid))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("scenelayer",`I3SClientNodeLoader: client side mesh for feature oid=${r.oid} already exists`);r.nodeIndex=t,this._id2Meta.set(r.id,r),this._oid2Meta.set(r.oid,r)}getMeshNodeIndex(e){const t=this._oid2Meta.get(e);return null==t||"mesh"!==t.type?null:t.nodeIndex}getMeshNodeInfo(e){const t=this._oid2Meta.values();for(const r of t)if("mesh"===r.type&&r.id===e)return r;return null}removeNode(e){const t=this._id2Meta.get(e);null!=t&&(this._id2Meta.delete(e),"mesh"===t.type&&this._oid2Meta.delete(t.oid))}async loadNodeJSON(t){const r=this._id2Meta.get(t);if(null==r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("scenelayer",`I3SClientNodeLoader::loadNodeJSON unable to find node ${t}`);switch(r.type){case"mesh":return this._loadMeshNodeJSON(r);case"mesh-component":return p(r);default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("scenelayer",`I3SClientNodeLoader::loadNodeJSON unable to handle node ${t}`)}}async _loadMeshNodeJSON(e){const t=e.id,r=(await this._getMeshData(e)).loadedMesh;if(null==r.components||0===r.components.length)return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null};const o=[],n=r.components;for(let s=0;s<n.length;++s){const r=`${t}-component${s}`,n={type:"mesh-component",id:r,mbs:e.mbs,componentIndex:s,meshNodeInfo:e,textureData:new Map};this._id2Meta.set(n.id,n),e.componentNodeIds.push(r),o.push({id:n.id,href:null,mbs:n.mbs,obb:null})}return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:o}}updateNodeIndex(e,t,r){const o=this._id2Meta.get(e);o&&"mesh"===o.type&&(o.nodeIndex=r)}async loadNodeData(r,n){const s=this._id2Meta.get(r);if(null==s||"mesh-component"!==s.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("scenelayer",`Failed to load client node data for node ${r} (unexpected node info)`);const a=s.meshNodeInfo,i=await this._getMeshData(a),l=i.loadedMesh,d=a.oid;if(null==l.components)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("scenelayer",`Failed to load client node data for node ${r} (unexpected null reference)`);const c=l.components[s.componentIndex],{material:u,requiredTextures:m,textureData:f}=await (0,_I3SClientMaterialUtil_js__WEBPACK_IMPORTED_MODULE_13__.convertMeshMaterialToPBRMaterial)(c.material);if(null!=f)for(const e of f)null!=e&&s.textureData.set(e.id,e);const p={params:{material:u},type:"ArrayBufferView"},{vertexSpace:y,origin:M,transform:w}=l,S=[M.x,M.y,M.z??0];i.projectionPromise||((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.assertIsSome)(this._worker,"SceneLayerWorker is needed to project mesh"),i.projectionPromise=this._worker.project({positions:l.vertexAttributes.position,localMatrix:w?.localMatrix,vertexSpace:y.toJSON(),origin:S,inSpatialReference:l.spatialReference.toJSON(),outSpatialReference:this._vertexSR.toJSON()},n));const{projected:b,original:_,projectedOrigin:N}=await i.projectionPromise;l.vertexAttributes.position=_;const{transformed:v,original:D}=await x(c,i,this._worker,n);l.vertexAttributes.normal=D,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(n);const{geometryBuffer:R,geometryDescriptor:j}=g(b,c.faces,v,l.vertexAttributes.uv,l.vertexAttributes.color,d);return{geometryData:{featureDataPosition:N,featureIds:[],geometries:[p]},attributeDataInfo:{attributeData:{},loadedAttributes:[]},geometryBuffer:R,geometryDescriptor:j,requiredTextures:m,textureData:f,normalReferenceFrame:this._vertexSR.isGeographic?"east-north-up":"vertex-reference-frame"}}async loadAttributes(e,t,r){const o=e.numFeatures,n={};for(const{field:{name:s}}of t)n[s]=new Array(o);return n}async loadTextures(e,t,r){const o=e.id,n=this._id2Meta.get(o);if(null==n||"mesh-component"!==n.type)throw new Error(`Failed to load textures for node ${e.id} (unexpected node info)`);const s=[];for(const a of t)s.push(n.textureData.get(a.id)||null);return s}async _getMeshData(e){const t=e.version,o=this._memCache.get(t);if(null==o){if(null!=e.loadMeshPromise)return e.loadMeshPromise;const o=async(o,n)=>{const s=e.unloadedMesh.clone();try{await s.load()}catch(i){n(i)}const a=new _CachedMeshData_js__WEBPACK_IMPORTED_MODULE_12__.CachedMeshData(s);this._memCache.put(t,a,_core_MemCache_js__WEBPACK_IMPORTED_MODULE_2__.MinPriority),e.loadMeshPromise=null,o(a)};return e.loadMeshPromise=new Promise(((e,t)=>o(e,t))),e.loadMeshPromise}return o}}async function p(e){return{id:e.id,version:e.meshNodeInfo.version,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null,isEmpty:!1}}function y(e,t){const{spatialReference:r}=e,o=[1,-1],n=[.5*e.width,.5*e.height,e.hasZ?.5*(e.zmax-e.zmin):0],s=r.isGeographic?r.metersPerUnit:1,a=e.center;let i=0;if(e.hasZ)for(let l=0;l<2;++l)for(let e=0;e<2;++e)for(let r=0;r<2;++r){const d=(a.x+o[l]*n[0]-t.x)*s,c=(a.y+o[e]*n[1]-t.y)*s,u=a.z+o[r]*n[2]-t.z;i=Math.max(d*d+c*c+u*u,i)}else for(let l=0;l<2;++l)for(let e=0;e<2;++e){const r=(a.x+o[l]*n[0]-t.x)*s,d=(a.y+o[e]*n[1]-t.y)*s;i=Math.max(r*r+d*d,i)}return (0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.h)([t.x,t.y,t.z],Math.sqrt(i))}async function x(e,r,o,n){const{transform:d,vertexAttributes:c}=r.loadedMesh,u="source"===e.shading?c.normal:null;if(!(null!=u&&null!=d&&(0!==d.rotationAngle||!(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_7__.q)(d.scale,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.ONES))))return{transformed:u,original:c.normal};if(!r.normalsTransformPromise){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.assertIsSome)(o,"SceneLayerWorker is needed to transform mesh normals");const e=(0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_6__.create)();(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_5__.normalFromMat4)(e,d.localMatrix),r.normalsTransformPromise=o.transformNormals({normalMatrix:e,normals:u},n)}return r.normalsTransformPromise}function g(e,t,r,o,n,s){const a=1,i=(t?.length??0)/3,l=3*i;let d=0,c=0,u=!1,m=0,h=!1,f=0,p=!1,y=0,x=0,g=0;d+=S,d+=S,c=d,d+=3*l*b,null!=r&&(u=!0,m=d,d+=3*l*b),null!=o&&(h=!0,f=d,d+=2*l*b),null!=n&&(p=!0,y=d,d+=4*l*_),x=d,d+=a*N,g=d,d+=2*a*S;const w=new ArrayBuffer(d),v=new Uint8Array(w);M(v,0,l),M(v,S,a);const D=new Float32Array(w,c),R=null!=r?new Float32Array(w,m):null,j=null!=o?new Float32Array(w,f):null,I=null!=n?new Uint8Array(w,y):null;for(let M=0;M<i;++M){const s=3*M;for(let a=0;a<3;++a){const i=t[s+a],l=3*i,d=9*M+3*a;if(D[d]=e[l],D[d+1]=e[l+1],D[d+2]=e[l+2],R&&(R[d]=r[l],R[d+1]=r[l+1],R[d+2]=r[l+2]),j){const e=2*i,t=6*M+2*a;j[t]=o[e],j[t+1]=o[e+1]}if(I){const e=4*i,t=12*M+4*a;I[t]=n[e],I[t+1]=n[e+1],I[t+2]=n[e+2],I[t+3]=n[e+3]}}}M(v,x,s),M(v,x+S,s/2**32),M(v,g,0),M(v,g+S,i-1);return{geometryBuffer:w,geometryDescriptor:{isDraco:!1,isLegacy:!0,color:p,normal:u,uv0:h,uvRegion:!1,featureIndex:!0}}}function M(e,t,r){e[t]=255&r,e[t+1]=255&r>>8,e[t+2]=255&r>>16,e[t+3]=255&r>>24}function w(e){const t=e.metadata.displaySource?.source;if(null==t||!Array.isArray(t)||!t.length||t[0]instanceof File)return (0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_4__.generateUUID)();const r=t;let o="";for(const n of r)o+=n.makeHash();return o+JSON.stringify(e.transform?.toJSON()??"")+((0,_geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_10__.isRelativeVertexSpace)(e.vertexSpace)?JSON.stringify(e.vertexSpace.origin):"")+JSON.stringify(e.spatialReference)}const S=4,b=4,_=1,N=8;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addCallback: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let a=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(),this.referenceCount=0,this.callbacks=new Array,this.runIndex=0}get running(){return this.callbacks.some((r=>r.running))}runTask(r){this._sort();const s=this.callbacks,t={numIndexLoading:0,numNodesLoading:0};for(let e=0;e<s.length&&!r.done;++e)s[e].priority=s[e].runTask(r,t),this.runIndex=e}_sort(){const r=this.callbacks;let s=r.length;for(let t=this.runIndex;t>0;t--){const e=r[t-1];let o=t;for(;o<r.length&&e.priority<=r[o].priority&&(o!==s||e.priority<r[o].priority);)r[o-1]=r[o],o++;r[o-1]=e,s=o-1}this.runIndex=0}add(r){this._sort(),r.priority=1/0,this.callbacks.unshift(r),this.notifyChange("running")}remove(r){(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.removeUnordered)(this.callbacks,r),this.runIndex=this.callbacks.length,this._sort(),this.notifyChange("running")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],a.prototype,"running",null),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.i3s.I3SFrameTask")],a);class l{constructor(r,s){this.task=r,this.handle=s}}const c=new Map;function h(r,s){let t=c.get(r);if(null==t){const s=new a,e=r.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_8__.TaskPriority.I3S_CONTROLLER,s);t=new l(s,e),c.set(r,t)}return t.task.add(s),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__.makeHandle)((()=>{if(null==t)return;t.task.remove(s);t.task.callbacks.length>0||(c.delete(r),t.handle.remove(),t.task.destroy()),t=null}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SIndex: () => (/* binding */ b),
/* harmony export */   selectErrorMetric: () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _ValidatedNode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ValidatedNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/ValidatedNode.js");
/* harmony import */ var _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../support/ElevationRange.js */ "./node_modules/@arcgis/core/views/3d/support/ElevationRange.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class N{constructor(e,t,i,n,s){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=n,this.node=s,this.useAsHole=0,this.filterImpact=_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeFilterImpact.NotChecked,this.traversalState=null,this.parent=-1}invalidateBounds(){this.node?.invalidateServiceBVsInRenderSR(),this.ref?.invalidateServiceBVsInRenderSR()}}class p{constructor(e=new Array,t=new Array){this.nodes=e,this.children=t,this.lastTraversed=0,this.numNodesWithLoadedChildren=0}}class b{get _useNodePages(){return this._pageSize>0}constructor(t,i,n,s,o,r,l,d,h,u,c,g,_,f,m,v){this.viewingMode=t,this._layer=i,this._streamDataController=s,this._clientNodeLoader=o,this._viewportQueries=r,this._logger=l,this.holeFilling=d,this._isLoaded=h,this._isReloading=u,this._isSelected=c,this._enable=g,this._needsUpdate=_,this._canRequest=f,this._computeVisibilityObb=m,this._computeNodeFiltering=v,this._dirty=!0,this._nodePages=new Map,this._clientNodePage=null,this._pageSize=0,this._rootIndex=0,this._lodMetric=_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.None,this._lodConversion=e=>e,this._isEditable=!1,this._urlPrefix="",this._loadingNodes=new Set,this._loadingPages=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._version=x(0),this._visibilityCacheVersion=x(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missingPagesAndNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),this._prefetchNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),this._updates=new y(this._missingPagesAndNodes),this._imModificationUncategorized=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this._pageQueue=new Array,this._newPages=new Array,this.needNodeElevationRange=!1,this.layerHasModifications=!1,this._layerHasFilter=!1,this._frameNumber=0,this._traverseDescendantsQueue=[0],this._traverseDescendantsNestingLevel=0,this._isEditable=null!=i.associatedLayer?.infoFor3D,i.serviceUpdateTimeStamp?.lastUpdate&&(this._lastUpdate=`${i.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this._viewportQueries?this._viewportQueries.maxLodLevel:1,this._init(n)}_init(e){if("page"===e.type){const t=e.rootPage;switch(this._urlPrefix=e.urlPrefix,this._pageSize=e.pageSize,e.lodMetric){case"maxScreenThreshold":this._lodMetric=_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.MaxScreenThreshold;break;case"maxScreenThresholdSQ":this._lodMetric=_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.MaxScreenThreshold,this._lodConversion=F}if(this._isEditable){this._rootIndex=-1;const i=E(e.rootIndex,e.pageSize),n=t.nodes[i],s={nodes:[{index:this._rootIndex,children:[e.rootIndex],mesh:void 0,obb:n.obb,lodThreshold:n.lodThreshold}]};this._addPage(w(this._rootIndex,this._pageSize),s),this.getNode(-1).serviceObbInIndexSR=void 0}else this._rootIndex=e.rootIndex;this._addPage(w(e.rootIndex,this._pageSize),t),this._updateParentsAndLevel()}else if("node"===e.type){this._urlPrefix=e.urlPrefix;const t=new p;if(this._nodePages.set(0,t),this._isEditable){this._clientNodePage=new p;const t={id:"-1",version:null,mbs:e.rootNode.mbs,obb:e.rootNode.obb,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:[{id:"root",href:"../root",mbs:e.rootNode.mbs,obb:e.rootNode.obb}]};this._rootIndex=this._makeClientRefNode(new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeBase(t.id,null),-1);const i=this._validateNode(t.id,t);i&&this._addNode(i,this._rootIndex)}else this._rootIndex=this._makeRefNode(new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeBase(e.rootNode.id,null),-1);const i=this._validateNode(e.rootNode.id,e.rootNode);i&&this._addNode(i,0)}}addClientNodeToIndex(e,t){const i=-1,n=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeBase(e,t),s=this._makeClientRefNode(n,i);return this._linkChildToParentNode(i,s),this.requestUpdate(),s}removeClientNodeFromIndex(e,t,i){this._destroyClientRefNode(e,t,i),this.requestUpdate()}_loadPage(e){this._loadingPages.add(e);const i=this._urlPrefix+e;this._streamDataController.request(i,"json").then((t=>{this._pageQueue.push({pageIndex:e,page:t})})).catch((i=>{this._loadingPages.delete(e),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(i)||(this._failedPages.add(e),this._logger.error("#loadPage()",this._layer,`Error when loading page ${e}`,i))}))}_addQueuedPages(e){for(;this._pageQueue.length>0&&!e.done;){const{pageIndex:t,page:i}=this._pageQueue.shift();this._addPage(t,i),this._loadingPages.delete(t),e.madeProgress(),this.needNodeElevationRange&&this._newPages.push(t)}this._updateParentsAndLevel()}_invalidateElevationRangeForNewPages(e){if(this.needNodeElevationRange)for(;this._newPages.length>0&&!e.done;){const e=this._nodePages.get(this._newPages.shift());e?.nodes.forEach((e=>{let t=e.parent;for(;null!=t&&t!==this._rootIndex;){const e=this.getNode(t);e&&!Number.isNaN(e?.elevationRangeMin)&&(e.invalidateElevationRange(),this.invalidateBoundingVolumeCache(t)),t=this.getParentIndex(t)}}))}}_addPage(e,t){const i=[],s=[],o=t.nodes.map(((t,o)=>{const r=i.length,a=t.children?t.children.length:0;s.push(this._rootIndex);for(let e=0;e<a;e++)i.push(t.children[e]);const l=`${t.index}`,h=_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.Obb.fromJSON(t.obb),u=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.h)(h.center,h.radius),c=t.mesh?.attribute,g=t.mesh?.geometry,_=t.mesh?.material,f={hasSharedResource:!1,isEmpty:null==g,attributes:null!=c?.resource?`${c.resource}`:void 0,geometry:null!=g?.resource?`${g.resource}`:void 0,texture:null!=_?.resource?`${_.resource}`:void 0,geometryDefinition:g?g.definition:-1,materialDefinition:_?_.definition:-1},m=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.Node(l,M(o,e,this._pageSize),u,a,0,f,this._lastUpdate,this._lodMetric,this._lodConversion(t.lodThreshold),g?.featureCount??null);return m.serviceObbInIndexSR=h,m.visibilityObbInRenderSR=this._computeVisibilityObb(m),m.vertexCount=g?g.vertexCount:0,new N(r,a,P(this._visibilityCacheVersion),null,m)})),r=new p(o,i);-1===e?this._clientNodePage=r:this._nodePages.set(e,r)}_updateParentsAndLevel(){const e=new Array,t=(t,i,n)=>{const s=this._getPage(t);if(null!=s){const o=E(t,this._pageSize),r=s.nodes[o];r.parent=null!=i?i:-1;const a=r.node;null!=a&&(a.level=n,e.push(t))}};for(t(this._rootIndex,null,0);e.length;){const i=e.pop(),n=this.getNode(i);if(null!=n)for(let e=0;e<n.childCount;e++){t(this.getChildIndex(n.index,e),i,n.level+1),this._maxLevel=Math.max(this._maxLevel,n.level+1)}}}_getPage(e){const t=w(e,this._pageSize);return this._getPageFromPageIndex(t)}_getPageFromPageIndex(e){return e<0?this._clientNodePage:this._nodePages.get(e)}_getNodeInternal(e){const t=this._getPage(e);return null==t?null:(t.lastTraversed=this._frameNumber,t.nodes[E(e,this._pageSize)])}_addNode(e,t){e.children&&this.populateChildren(t,e.children);const i=this.getParent(t),n=null!=i?i.level+1:0;this._maxLevel=Math.max(this._maxLevel,e.children?n+1:n);const{lodMetric:s,maxError:o}=O(e.lodSelection),r=this._getNodeInternal(t),a=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.Node(e.id,t,e.mbs,r.childCount,n,e.resources,e.version,s,o,e.numFeatures);r.node=a,e.obb&&(a.serviceObbInIndexSR=_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.Obb.fromJSON(e.obb)),a.visibilityObbInRenderSR=this._computeVisibilityObb(a);const l=r.ref;return null!=l&&(null==l.serviceMbsInIndexSR&&(l.serviceMbsInIndexSR=e.mbs),a.shareServiceBVsInRenderSRWith(l),l.visibilityObbInRenderSR=a.visibilityObbInRenderSR),a}_makeRefNode(e,t){const i=this._nodePages.get(0);if(t<-1)return this._makeClientRefNode(e,t);if(null==i)return-1;const n=i.nodes.length,s=new N(0,0,P(this._visibilityCacheVersion),e,null);return i.nodes.push(s),s.parent=t,e.invalidateServiceBVsInRenderSR(),n}_makeClientRefNode(e,t){const i=this._clientNodePage;if(null==i)return-1;if(t>=0)throw new Error("I3SIndex::client side nodes can not be made children of service side nodes.");const n=-(i.nodes.length+1),s=new N(0,0,P(this._visibilityCacheVersion),e,null);return i.nodes.push(s),s.parent=t,e.invalidateServiceBVsInRenderSR(),n}_linkChildToParentNode(e,t){const i=this._clientNodePage;if(null==i||e>=0)return;const n=E(e,this._pageSize),s=E(t,this._pageSize),o=i.nodes[n],r=o.childOffset;i.children.splice(o.childOffset+o.childCount,0,t);const a=1;o.childCount+=a,null!=o.node&&(o.node.childCount+=a);for(const l of i.nodes)l.childOffset>r&&(l.childOffset+=a);i.nodes[s].parent=e,this._updateParentBoundingInformation(e)}_destroyClientRefNode(e,t,i){const n=this._clientNodePage;if(null==n)return;const s=this.getParentIndex(e);if(null==s)return;const o=new Set,r=new Map,a=e=>{const i=E(e,this._pageSize),s=n.nodes[i];if(s.childCount>0)for(let t=s.childOffset;t<s.childOffset+s.childCount;++t)a(n.children[t]);const r=s.node?.id??s.ref?.id;if(null==r)throw new Error("Node has no id");t(r,e),o.add(s)};a(e);const l=n.nodes,d=n.children,h=n.nodes.map((()=>-1)),u=[],c=[];for(let g=0;g<l.length;++g){const e=l[g];if(o.has(e))continue;const t=u.length,n=M(g,-1,this._pageSize),s=M(t,-1,this._pageSize);if(e.node&&(e.node.index=s),h[g]=s,u.push(e),n!==s){const t=e.node?.id??e.ref?.id;if(null==t)throw new Error("Node has no id");i(t,n,s),r.set(n,s)}}for(let g=0;g<u.length;++g){const e=M(g,-1,this._pageSize),t=u[g],i=c.length;for(let n=t.childOffset;n<t.childOffset+t.childCount;++n){const t=d[n];if(t>=0)c.push(t);else{const i=E(t,this._pageSize),n=l[i];if(o.has(n))continue;const s=h[i];c.push(s),n.parent=e}}t.childOffset=i,t.childCount=c.length-i,t.node&&(t.node.childCount=t.childCount)}n.nodes=u,n.children=c,this._updateParentBoundingInformation(h[E(s,this._pageSize)])}_updateParentBoundingInformation(e){let t=e;do{let e=null;const n=this._clientNodeLoader.indexSR,a=this._clientNodeLoader.renderSR,l=this._getNodeInternal(t);if(null==l)return;for(let o=0;o<l.childCount;o++){const l=this.getChildIndex(t,o),d=this._getNodeInternal(l),h=null!=d?d.ref||d.node:null;if(null!=h&&h.serviceMbsInIndexSR[3]>0)if(null==e)e=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.k)(h.serviceMbsInIndexSR,D);else{const t=k,s=z,o=T;(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__.projectBoundingSphere)(h.serviceMbsInIndexSR,n,t,a),(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__.projectBoundingSphere)(e,n,s,a),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.u)(t,s,o),(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__.projectBoundingSphere)(o,a,e,n)}}const d=t=>{null!=t&&(t.serviceObbInIndexSR=null,null!=e?(t.serviceMbsInIndexSR??=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.k)(e,t.serviceMbsInIndexSR)):(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_6__.invalidateMbs)(t.serviceMbsInIndexSR),t.invalidateServiceBVsInRenderSR(),t.geometryObbInRenderSR=null)};d(l.ref),d(l.node),this.invalidateNodeVisibilityCacheInternal(l),t=this.getParentIndex(t)}while(null!=t)}populateChildren(e,t){const i=this._getNodeInternal(e),n=this._getPage(e);i.childOffset=n.children.length,i.childCount=t.length;for(let s=0;s<t.length;s++){const i=this._makeRefNode(t[s],e);n.children.push(i)}}getNode(e){const t=this._getNodeInternal(e);return null!=t?t.node:null}getIndexById(e){let t;return this._forAllNodes(((i,n)=>{(null!=i.node&&i.node.id===e||null!=i.ref&&i.ref.id===e)&&(t=n)})),t}getNodeById(e){const t=this.getIndexById(e);return null!=t&&t>=0?this.getNode(t):null}getChildIndex(e,t){const i=this._getPage(e);if(null==i)return-1;const n=i.nodes[E(e,this._pageSize)];return i.children[n.childOffset+t]}getParentIndex(e){const t=this._getPage(e);return null!=t&&e!==this._rootIndex?t.nodes[E(e,this._pageSize)]?.parent:null}getParent(e){const t=this.getParentIndex(e);return null!=t?this.getNode(t):null}isLeaf(e){const t=this._getNodeInternal(e);return null!=t&&0===t.childCount}get rootNode(){return this.getNode(this._rootIndex)}get isEditable(){return this._isEditable}removeAllGeometryObbs(){this._forAllNodes((e=>{null!=e.node&&(e.node.geometryObbInRenderSR=null)}))}invalidateVisibilityCache(){this._visibilityCacheVersion=x(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(e){const t=this._getNodeInternal(e);null!=t&&this.invalidateNodeVisibilityCacheInternal(t)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=P(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(e){const t=this._getNodeInternal(e);null!=t&&(t?.invalidateBounds(),this.invalidateNodeVisibilityCacheInternal(t))}updateElevationChanged(e){const t=this._getNodeInternal(e);if(null==t)return;if(!this.needNodeElevationRange)return void this.invalidateBoundingVolumeCache(e);const i=null!=t.node?t.node:t.ref;null!=i&&i.invalidateElevationRange()}invalidateGeometryVisibility(e){const t=this._getNodeInternal(e),i=t?.node;i&&(i.geometryObbInRenderSR=null,i.invalidateServiceBVsInRenderSR())}invalidateVisibilityObbs(){null!=this.rootNode&&this.traverse(this.rootNode,(e=>(e.visibilityObbInRenderSR=this._computeVisibilityObb(e),e.geometryObbInRenderSR=null,!0)))}_isElevationRangeUpToDate(e){if(!this.needNodeElevationRange)return!0;const t=e?.node??e?.ref;return!t||t.elevationRangeValid}updateElevationRange(e){this._updateElevationRangeInternal(e,null)}_updateElevationRangeInternal(e,t){const i=this._getNodeInternal(e);if(!i)return!1;const n=i?.node??i?.ref;if(!n)return!1;if(n.elevationRangeValid)return t?.expandElevationRange(n),!0;const s=new _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_8__.ElevationRange;let o=!1;for(let l=0;l<i.childCount;l++){const t=this.getChildIndex(e,l),i=this._updateElevationRangeInternal(t,s);o=o||!i}if(0===i.childCount||o){const e=!i.node?.resources.isEmpty;this._viewportQueries.expandElevationRange(n,e,s)}const r=n.elevationRangeMin,a=n.elevationRangeMax;return r===s.elevationRangeMin&&a===s.elevationRangeMax?(t?.expandElevationRange(n),!0):(i.node?.setElevationRange(s),i.ref?.setElevationRange(s),this.invalidateBoundingVolumeCache(e),t?.expandElevationRange(n),!0)}isNodeVisible(e){const t=this._getNodeInternal(e);if(null==t)return!0;const i=t.ref;if(null!=i&&!i.serviceMbsInIndexSR)return!0;if(this._isElevationRangeUpToDate(t)&&R(t.visibilityCache,this._visibilityCacheVersion))return C(t.visibilityCache);const n=t.node,s=this._viewportQueries;if(n){const e=s.ensureElevationAgnosticBoundingVolume(n),i=s.isElevationAgnosticBoundingVolumeVisible(e);let o=i;if(this.needNodeElevationRange&&i){const t=s.getNodeObbInRenderSRIndependentOfElevationOffset(n);null!=t&&(o=s.isObbVisibleIndependentOfElevation(e,t))}if(!o)return t.visibilityCache=S(!1,this._visibilityCacheVersion),!1}if(this._layerHasFilter&&this._computeNodeFiltering&&(null!=n||null!=i)&&t.filterImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeFilterImpact.NotChecked){const e=null!=n?n.serviceMbsInIndexSR:null!=i?i.serviceMbsInIndexSR:null;t.filterImpact=null!=e?this._computeNodeFiltering(e):_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeFilterImpact.Unmodified}const o=null!=n&&t.filterImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeFilterImpact.Culled;let r=!(null!=n&&n.imModificationImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeIMModificationImpact.Culled)&&!o;if(r){const t=!n||i&&!n.visibilityObbInRenderSR?i??null:n;if(null!=t){this.needNodeElevationRange&&this.updateElevationRange(e);r=s.isNodeVisible(t)}}return t.visibilityCache=S(r,this._visibilityCacheVersion),r}isGeometryVisible(e){if(!this.isNodeVisible(e))return!1;const t=this._getNodeInternal(e);return!!(null==t?.node?.geometryObbInRenderSR||this.layerHasModifications&&t.node.imModificationImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeIMModificationImpact.NotChecked)||this._viewportQueries.isGeometryVisible(t.node)}_traverseCoverage(e,t,i,n,s){const o=this._getPage(e);if(null==o||0===t.childCount)return;const r=t.childOffset+t.childCount,a=new Array;for(let l=t.childOffset;l<r;++l){const e=o.children[l],t=this._getNodeInternal(e);null!=t?.node&&this.isGeometryVisible(e)&&a.push(t)}n/=a.length;for(const l of a){const e=l.node.index;this._isLoaded(e)||this._isReloading(e)?(s.delta=Math.max(s.delta,i),s.coverage+=n):this._traverseCoverage(e,l,i+1,n,s)}}useNodeAsHole(e){if("off"===this.holeFilling)return!1;const t=this._getNodeInternal(e);if(null==t)return!1;if("always"===this.holeFilling)return!0;if(R(t.useAsHole,this._version))return C(t.useAsHole);const i={delta:0,coverage:0};this._traverseCoverage(e,t,0,1,i);const n=i.delta*i.coverage<=.5;return t.useAsHole=S(n,this._version),n}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=x(this._version)}imModificationsChanged(e){this.layerHasModifications=e,this._forAllNodes((({node:e})=>{null!=e&&(e.imModificationImpact=_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeIMModificationImpact.NotChecked,e.visibilityObbInRenderSR=this._computeVisibilityObb(e),e.hasModifications&&this.invalidateGeometryVisibility(e.index))})),this.invalidateVisibilityCache()}layerFilterChanged(e){this._layerHasFilter=e,this._forAllNodes((e=>{if(null!=e){e.filterImpact=_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeFilterImpact.NotChecked;const t=e.node;null!=t&&this.invalidateNodeVisibilityCache(t.index)}})),this.invalidateVisibilityCache()}update(e,t,i){if(!this._dirty)return;this._pageQueue.length>0&&this._addQueuedPages(t),this._invalidateElevationRangeForNewPages(t),this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missingPagesAndNodes.clear(),this._prefetchNodes.clear(),this._updates.reset(e),I.clear();let n=!0;const s=new A,o=new L,r=this._imModificationUncategorized;r.clear();const a=new Set;let l=0;const d=(a,d,h)=>{const c=w(a,this._pageSize);if(null==d){let e=this._entryPriority(a);return e===1/0&&(e=this._entryPriority(h)),I.set(c,Math.max(e,I.get(c)||0)),this._loadingPages.has(c)||this._failedPages.has(c)||(this._missingPagesAndNodes.push(c),++l),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const g=d.node;if(this._updateNodeFeatureEstimate(g,o),null==g){const e=this._entryPriority(a);return this._loadingNodes.has(a)||this._failedNodes.has(a)||(this._missingPagesAndNodes.push(a),I.set(a,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const _=this._getPage(a);if(0===this._missingPagesAndNodes.length&&!this._useNodePages)for(let e=0;e<d.childCount;e++){const t=_.children[d.childOffset+e],i=this._getNodeInternal(t);null!=i&&!i.node&&!this._loadingNodes.has(t)&&!this._failedNodes.has(t)&&t>=0&&(I.set(t,this._entryPriority(t)),this._prefetchNodes.push(t))}if(g.failed||g.resources.isEmpty)return void(n&&d.childCount>0&&this._isSelected(g)&&(n=!1));if(this._isLoaded(a)){if(s.known+=g.memory,++s.knownNodes,this._isSelected(g)?d.childCount>0&&(n=!1):(s.unremoved+=g.memory,n=!1),this._needsUpdate(g)){const e=this._entryPriority(a);I.set(a,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(a)}return}if(g.memory&&(s.known+=g.memory,++s.knownNodes),!this._isSelected(g))return void(this._isReloading(a)&&this._updates.remove.push(a));if(d.childCount>0&&(n=!1),g.memory?(s.missing+=g.memory,s.known+=g.memory,++s.knownNodes):++s.missingNodes,e.includes(g.index))return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this._entryPriority(a)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==g.index)));if(!t.done&&this._enable(g))return void t.madeProgress();const f=this._entryPriority(a);I.set(a,f),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,f),this._updates.add.push(a),this.layerHasModifications&&i&&null!=g&&g.imModificationImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeIMModificationImpact.NotChecked&&r.push(a)};this.traverseVisible(d,a),this._frameNumber++,this._missingPagesAndNodes.sort(((e,t)=>e-t)),this._missingPagesAndNodes.filterInPlace(((e,t)=>t<1||this._missingPagesAndNodes.data[t-1]!==e)),this._missingPagesAndNodes.sort(((e,t)=>I.get(e)-I.get(t))),this._missingPagesAndNodes.length>0&&(this._maxUnloadedPrio=I.get(this._missingPagesAndNodes.back()),this._prefetchNodes.clear()),this._removeUnusedNodePages(a,l);const h=this._updates.add;h.length>0&&this.layerHasModifications&&(r.length>0&&i?.(r),h.filterInPlace((e=>{const t=this._getNodeInternal(e),i=null==t?.node||t.node.imModificationImpact!==_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeIMModificationImpact.Culled;return i||this.invalidateNodeVisibilityCache(e),i}))),this._unloadedMemoryEstimate=s.missing-s.unremoved,s.knownNodes>3&&s.missingNodes>0&&(this._unloadedMemoryEstimate+=s.known/s.knownNodes*s.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(o),this._featureEstimate.leavesReached=n,this._updates.add.filterInPlace((e=>I.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>I.get(e)-I.get(t))),this._updates.update.sort(((e,t)=>I.get(e)-I.get(t))),this._indexMissing=this._loadingPages.size+this._loadingNodes.size+this._missingPagesAndNodes.length,this._dirty=this._indexMissing>0,I.clear()}checkFeatureTarget(e,t){const i=this._viewportQueries.updateScreenSpaceErrorBias(t);let n=t,s=t,o=i,r=10;for(;r--;){const i=new L;this._updateFeatureEstimate(n,i);if(this._computeFeatureEstimate(i)<=e){if(n>=t||i.missingNodes>0||0===r)break;o=n,n=.5*(n+s)}else s=n,n=.5*(n+o)}return this._version=x(this._version),this._viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,n)}_removeUnusedNodePages(e,t){if(!this._useNodePages)return;const i=e.size,n=this._nodePages,s=n.size+this._loadingPages.size+t;if(s>B&&s>i){const t=new Array;for(const[i,s]of n)0!==s.numNodesWithLoadedChildren||e.has(i)||t.push([s.lastTraversed,i]);t.sort(((e,t)=>e[0]-t[0])).some((e=>{const t=e[1];return this._deleteNodePage(t),n.size<=B}))}}_updateFeatureEstimate(e,t){this._version=x(this._version),this._viewportQueries.updateScreenSpaceErrorBias(e),this.traverseVisible(((e,i)=>this._updateNodeFeatureEstimate(i?.node,t)))}_updateNodeFeatureEstimate(e,t){null!=e&&!e.failed&&this._isSelected(e)&&(null!=e.numFeatures?(t.numFeatures+=e.numFeatures,++t.knownNodes):++t.missingNodes)}_computeFeatureEstimate(e){let t=e.numFeatures;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.numFeatures/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missingPagesAndNodes)}prefetch(){return this._prefetchNodes.sort(((e,t)=>I.get(e)-I.get(t))),this._load(this._prefetchNodes)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();){const t=e.pop();this._useNodePages&&t>=0?this._loadPage(t):this._loadNode(t)}return!0}get isLoading(){return this._indexMissing>0}get isPrefetching(){return this._prefetchNodes.length>0}get indexLoading(){return this._loadingPages.size+this._loadingNodes.size}get indexMissing(){return this._indexMissing}get unloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}get maxPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}nodeTraversalState(e){if(null==e)return null;const t=e.index,i=this._getNodeInternal(t);if(!i)return null;let n=i?.traversalState;if(n&&R(n.version,this._version))return n;const s=this._viewportQueries.getLodLevel(e),o=this._viewportQueries.hasLOD(e);let r=!0;if(o){const e=this.getParentIndex(t);if(null!=e){const t=this._getNodeInternal(e),i=t?.traversalState;r=!!i&&s>i.lodLevel}else r=s>0}else r=0===e.childCount;return n?(n.lodLevel=s,n.isChosen=r,n.version=S(!0,this._version),n):(n=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeTraversalState(o,r,s,S(!0,this._version)),i.traversalState=n,n)}async _loadNode(e){this._loadingNodes.add(e);const i=this._getNodeInternal(e).ref;if(null==i)return void this._failedNodes.add(e);const n=i.id,s=this._urlPrefix+n,o=()=>{this._loadingNodes.delete(e),0===this._missingPagesAndNodes.length&&0===this._loadingNodes.size&&this.requestUpdate()};let r=null;try{r=e>=0?await this._streamDataController.request(s,"json"):await this._clientNodeLoader.loadNodeJSON(n)}catch(d){return o(),void((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(d)||(this._logger.error("#loadNode()",this._layer,"Error loading node: "+s),this._failedNodes.add(e)))}o();const a=this._validateNode(n,r);if(null==a)return;a.obb&&this.invalidateNodeVisibilityCache(e);const l=this._addNode(a,e);this.nodeTraversalState(l)}_validateNode(e,t){if(null==t||"object"!=typeof t||t.id!==e)return this._logger.error("#validateNode()",this._layer,`Invalid node. Wrong type or wrong id "${e}"`),null;if(!Array.isArray(t.mbs))return this._logger.error("#validateNode()",this._layer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&"./shared"!==t.sharedResource.href&&"./shared/"!==t.sharedResource.href&&this._logger.warn("#validateNode()",this._layer,`Invalid shared resource href on node "${e}"`);const i=t.geometryData;null==i||Array.isArray(i)&&0===i.length||Array.isArray(i)&&1===i.length&&"./geometries/0"===i[0].href||this._logger.warn("#validateNode()",this._layer,`Invalid geometry data on node "${e}"`);const n=t.attributeData,s=this._layer.attributeStorageInfo;null==n||Array.isArray(n)&&!n.some(((e,t)=>e.href!==`./attributes/${s?.[t]?.key??`f_${t}`}/0`))||this._logger.warn("#validateNode()",this._layer,`Invalid attribute data on node "${e}"`),t.featureData&&t.featureData.length>1&&this._logger.warn("#validateNode()",this._layer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const o=t.hasOwnProperty("obb")&&!this.ignoreServiceObb?t.obb:void 0,r=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:void 0,a=t=>{if(null==t)return null;const i=t=>this._logger.error("#validateNode()",this._layer,`Invalid node reference on node ${e}: ${t}`);if("number"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if("string"!=typeof t.id||!Array.isArray(t.mbs))return i("Missing or invalid id."),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!=="../"+t.id&&this._logger.error("#validateNode()",this._layer,`Invalid node href on node "${e}"`);const n=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.NodeBase(`${t.id}`,t.mbs);return n.serviceObbInIndexSR=!this.ignoreServiceObb&&t.hasOwnProperty("obb")&&t.obb?_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.Obb.fromJSON(t.obb):null,n.visibilityObbInRenderSR=this._computeVisibilityObb(n),n},d=Array.isArray(t.children)?t.children.map(a).filter((e=>null!=e)):null,h=t.featureData?.length??!1,u=!0===t.isEmpty;return new _ValidatedNode_js__WEBPACK_IMPORTED_MODULE_7__.ValidatedNode(e,t.mbs,o,"string"==typeof t.version?t.version:null,{isEmpty:!h&&u,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:void 0,texture:t.textureData&&t.textureData.length>0?e:void 0,geometry:null!=t.geometryData?e:void 0},d,Array.isArray(t.lodSelection)?t.lodSelection:null,r)}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this._forAllNodes((e=>{null!=e.node&&(e.node.failed=!1)}))}_entryPriority(e){const t=this._getNodeInternal(e),i=this.getParentIndex(e);if(null==t||null==i&&null==t.node)return null==i?1/0:this._entryPriority(i);let n=0;if(t.node&&null!=i){const e=this._getNodeInternal(i).traversalState;null!=e&&(n=e.lodLevel)}let s=this.progressiveLoadPenalty;for(let r=e;null!=r;r=this.getParentIndex(r))if(this._isLoaded(r)){s=0;break}const o=null!=t.ref?this._viewportQueries.distToPOI(t.ref):null!=t.node?this._viewportQueries.distToPOI(t.node):0;return-o-n*(o+this.progressiveLoadPenalty)+s}traverseVisible(e,t){const i=this._getNodeInternal(this._rootIndex);null!=i?this._traverseVisible(this._rootIndex,null,i,e,t):e(this._rootIndex,null,null)}_traverseVisible(e,t,i,n,s){const o=w(e,this._pageSize);if(s&&s.add(o),i.node&&0===i.childCount)return void(this.isGeometryVisible(e)&&n(e,i,t));if(!this.isNodeVisible(e))return;if(n(e,i,t),null==i.node)return;const r=this.nodeTraversalState(i.node);if(r?.nodeHasLOD&&r.lodLevel===this._maxLodLevel)return;const a=this._getPageFromPageIndex(o);for(let l=0;l<i.childCount;l++){const t=a.children[i.childOffset+l],o=this._getNodeInternal(t);if(o)this._traverseVisible(t,e,o,n,s);else{if(s){const e=w(t,this._pageSize);s.add(e)}n(t,null,e)}}}traverse(e,t){t(e)&&this.traverseDescendants(e,t)}traverseDescendants(e,t){++this._traverseDescendantsNestingLevel;const i=e.index,n=this._pageSize,s=w(i,n),o=this._getPageFromPageIndex(s);if(null==o)return;const r=this._frameNumber,a=this._nodePages,l=E(i,n),d=o.nodes[l],h=d.childCount;if(o.lastTraversed=r,0===h)return;const u=new Array,c=1===this._traverseDescendantsNestingLevel?this._traverseDescendantsQueue:[0];let g=0;{const{childOffset:e,childCount:t}=d,{children:i}=o;c.length=2**Math.ceil(Math.log2(g+t));for(let n=e;n<e+t;++n){const e=i[n];e>=0?(c[g]=e,++g):u.push(e)}}if(u.length>0){const e=this._clientNodePage;if(e){const i=e.children;let n=0;for(;n<u.length;){const s=u[n];++n;const o=-s-1,r=e.nodes[o],a=r.node;if(!a||!t(a))continue;const{childCount:l}=r;if(0===l)continue;const{childOffset:d}=r,h=d+l;for(let e=d;e<h;++e)u.push(i[e])}}}if(g>0){let e=0;if(n>0){let i=s*n,l=o,d=l.nodes;for(;e<g;){const s=c[e];let o;if(++e,i<=s&&s<i+n)o=l;else{const e=s/n|0,t=a.get(e);if(void 0===t)continue;o=t,o.lastTraversed=r,l=o,d=l.nodes,i=n*e}const h=d[s-i],u=h.node;if(null==u||!1===t(u))continue;const{childCount:_}=h;if(0===_)continue;const f=g+_;for(c.length<f&&(c.length=2**Math.ceil(Math.log2(g+_)));c.length<g+_;)c.length+=c.length;const m=o.children,{childOffset:v}=h,N=v+_;for(let e=v;e<N;++e)c[g]=m[e],++g}}else{const i=a.get(0);if(i)for(;e<g;){const n=c[e++],s=i.nodes[n],o=s.node;if(!o||!t(o))continue;const{childCount:r}=s;if(0===r)continue;c.length=Math.max(c.length,2**Math.ceil(Math.log2(g+r)));const a=i.children,{childOffset:l}=s,d=l+r;for(let e=l;e<d;++e)c[g]=a[e],++g}}}--this._traverseDescendantsNestingLevel}updateChildrenLoaded(e,t){let i=this.getNode(e);for(;null!=i;){const e=i.childrenLoaded,n=e+t;i.childrenLoaded=n;const s=0===e?1:0===n?-1:0,o=i.index;if(0!==s){this._getPage(o).numNodesWithLoadedChildren+=s}i=this.getParent(o)}}checkChildrenLoadedInvariant(){return!0}updateElevationInfo(e,t){this.needNodeElevationRange=t&&!!e&&("relative-to-ground"===e.mode||"relative-to-scene"===e.mode||"on-the-ground"===e.mode),this._viewportQueries.updateElevationInfo(e),this.invalidateAllElevationRanges()}invalidateAllElevationRanges(){this._forAllNodes((e=>{e?.invalidateBounds(),e.node?.invalidateElevationRange(),e.ref?.invalidateElevationRange()}))}_forAllNodes(e){if(null!=this._clientNodePage){const t=this._clientNodePage;for(let i=0;i<t.nodes.length;i++)e(t.nodes[i],-(i+1))}for(const[t,i]of this._nodePages){const n=t*this._pageSize;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],n+t)}}clearCaches(){if(this._useNodePages){const e=this._nodePages,t=new Set;this.traverseVisible((e=>t.add(w(e,this._pageSize))));for(const[i,n]of e)if(0!==n.numNodesWithLoadedChildren||t.has(i))for(const e of n.nodes)e.traversalState=null;else this._deleteNodePage(i)}}_deleteNodePage(e){this._nodePages.delete(e)}get test(){}}const I=new Map;class y{constructor(t){this.missing=t,this.update=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),this.add=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),this.remove=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),this.cancel=[]}reset(e){this.add.clear(),this.update.clear(),this.cancel=e}}function P(e){return (0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_6__.addWraparound)(e,-2)}function x(e){return (0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_6__.addWraparound)(e,2)}function S(e,t){return t+(e?1:0)}function R(e,t){return(-2&e)===t}function C(e){return!(1&~e)}function w(e,t){return e<0?-1:t>0?e/t|0:0}function E(e,t){return e<0?-e-1:0===t?e:e%t}function M(e,t,i){return-1===t?-(e+1):0===i?e:t*i+e}const V=[["maxScreenThreshold",_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.MaxScreenThreshold],["screenSpaceRelative",_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.ScreenSpaceRelative],["removedFeatureDiameter",_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.RemovedFeatureDiameter],["distanceRangeFromDefaultCamera",_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.DistanceRangeFromDefaultCamera]];function O(e){if(e)for(let t=0;t<e.length;t++)for(const i of V)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:_I3SNode_js__WEBPACK_IMPORTED_MODULE_5__.LodMetric.None,maxError:0}}class A{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}class L{constructor(){this.numFeatures=0,this.knownNodes=0,this.missingNodes=0}}function F(e){return Math.sqrt(e*(4/Math.PI))}const D=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),k=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),z=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),T=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),B=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-mobile")?100:300;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _I3SNode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/I3SLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(e){this._layerView=e,this._lodGlobalDirty=!1}startNodeLoading(e,i,s){this._maxLodLevel=s.maxLodLevel,this._index=i,this._removeNodes=e}shouldLoadNode(e){if(null==e)return!1;const i=this._index.nodeTraversalState(e);return!!this._isChosenMaxLOD(i)||!!i.isChosen&&this._childrenRequireLoading(e)}setLodGlobalDirty(){this._lodGlobalDirty=!0}get requiresLODGlobalHandling(){return null!=this._index&&!0===this._lodGlobalDirty}lodGlobalHandling(e){if(!this.requiresLODGlobalHandling)return!1;this._lodGlobalDirty=!1;const i=this._layerView.view.resourceController.memoryController.usedMemory,s=Math.max(0,Math.floor(10*(i-1)));t.clear(),this._lodGlobalHandling(this._index.rootNode,s,!1,!!this._layerView.nodeCrossfadingEnabled);const o=t.length;this._removeNodes(t,e);const d=t.length<o;return 0!==t.length&&(this._lodGlobalDirty=!0),t.clear(),d}_lodGlobalHandling(e,o,d,l){if(null==e)return!1;const n=e.index,r=this._index,a=this._layerView,h=r.nodeTraversalState(e),u=this._isChosenMaxLOD(h),_=e.resources.isEmpty;if(u&&_)return e.childrenLoaded>0&&this._removeChildrenRecursive(e),!0;const c=a.isNodeLoaded(n);if(l&&c&&u){const i=!d&&this.hasNoVisibleChildren(e);a.fadeNode(n,_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn,!i)}const x=c&&(!a.isNodeFullyFadedIn||a.isNodeFullyFadedIn(n));if(c&&(a.updateNodeState(n,u?_I3SNode_js__WEBPACK_IMPORTED_MODULE_1__.NodeState.Leaf:_I3SNode_js__WEBPACK_IMPORTED_MODULE_1__.NodeState.Hole),u))return x&&this._removeChildrenRecursive(e),x;const L=e.childCount>0;let y=L;if(L)for(let i=0;i<e.childCount;i++){const e=r.getChildIndex(n,i),s=r.getNode(e);if(null!=s){!r.isGeometryVisible(e)||this._lodGlobalHandling(s,o,d||x,l)||(y=!1)}else r.isNodeVisible(e)&&(y=!1)}const m=c&&!u&&(y||t.length<o);m&&t.push(n),!l||m||!c||d||y||a.fadeNode(n,_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn,!1);const N=e.resources.isEmpty;return y||x&&!m||N}_removeChildrenRecursive(e){this._index.traverseDescendants(e,(e=>((this._layerView.isNodeLoaded(e.index)||this._layerView.isNodeReloading(e.index))&&t.push(e.index),e.childrenLoaded>0)))}hasNoVisibleChildren(e){let i=!0;return this._index.traverseDescendants(e,(e=>!(!i||!this._index.isNodeVisible(e.index))&&(this._layerView.isNodeLoaded(e.index)?(i=!1,!1):e.childrenLoaded>0))),i}_childrenRequireLoading(e){let i=!1,s=!0;return this._index.traverseDescendants(e,(e=>{if(!s||!this._index.isNodeVisible(e.index))return!1;const o=this._index.nodeTraversalState(e);return this._isChosenMaxLOD(o)&&this._index.isGeometryVisible(e.index)&&(i=!0),this._layerView.isNodeLoaded(e.index)?(s=!1,!1):e.childrenLoaded>0})),s&&i}_isChosenMaxLOD(e){return e.isChosen&&(!e.nodeHasLOD||e.lodLevel===this._maxLodLevel)}}const t=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null});


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   configureMaterial: () => (/* binding */ N),
/* harmony export */   createTexture: () => (/* binding */ R),
/* harmony export */   defaultMaterial: () => (/* binding */ D),
/* harmony export */   getMaterialAndTextures: () => (/* binding */ b),
/* harmony export */   getMaterialAndTexturesFromShared: () => (/* binding */ P),
/* harmony export */   getSupportedEncodings: () => (/* binding */ k),
/* harmony export */   selectEncoding: () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _core_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/colorUtils.js */ "./node_modules/@arcgis/core/core/colorUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _symbols_support_materialUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../symbols/support/materialUtils.js */ "./node_modules/@arcgis/core/symbols/support/materialUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl-engine/core/material/RenderTexture.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js");
/* harmony import */ var _webgl_engine_core_shaderLibrary_util_EllipsoidMode_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/EllipsoidMode.js");
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/* harmony import */ var _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../webgl-engine/lib/Texture.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js");
/* harmony import */ var _webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../webgl-engine/materials/pbrUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../webscene/support/AlphaCutoff.js */ "./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(o,r,s){const t=new Map,l=(e,o)=>{if(null==e)return-1;const r=t.get(e.id);if(r)return r.usage|=o,r.id;const s=t.size;return t.set(e.id,{id:s,usage:o}),s},n=r.pbrMetallicRoughness,i=n?.baseColorFactor?(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__.validateColorAndOpacity)(n.baseColorFactor):null,u=r.emissiveFactor,m=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("disable-feature:diffuse-rendering-i3s")||s?(0,_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.useSchematicPBRI3S)({normalTexture:r.normalTexture,emissiveTexture:r.emissiveTexture,emissiveFactor:r.emissiveFactor,occlusionTexture:r.occlusionTexture,metallicRoughnessTexture:n?.metallicRoughnessTexture,metallicFactor:n?.metallicFactor,roughnessFactor:n?.roughnessFactor}):(0,_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.useSchematicPBR)({normalTexture:r.normalTexture,emissiveTexture:r.emissiveTexture,emissiveFactor:r.emissiveFactor,occlusionTexture:r.occlusionTexture,metallicRoughnessTexture:n?.metallicRoughnessTexture,metallicFactor:n?.metallicFactor,roughnessFactor:n?.roughnessFactor}),d=m?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.schematicMRRFactors[0]:n?.metallicFactor??_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.advancedMRRFactors[0],p=m?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.schematicMRRFactors[1]:n?.roughnessFactor??_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.advancedMRRFactors[1],x="mask"===r.alphaMode?_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color|_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.AlphaMask:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color,F={baseColorFactor:i?[i[0],i[1],i[2],i[3]]:[1,1,1,1],baseColorTextureId:l(n?.baseColorTexture,x),metallicRoughnessTextureId:l(n?.metallicRoughnessTexture,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.MetallicRoughness),metallicFactor:d,roughnessFactor:p},b={alphaMode:r.alphaMode,alphaCutoff:r.alphaCutoff,doubleSided:r.doubleSided,cullFace:"none"===r.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.None:"back"===r.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.Back:"front"===r.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.Front:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.None,normalTextureId:l(r.normalTexture,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Normal),emissiveTextureId:l(r.emissiveTexture,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Emissive),occlusionTextureId:l(r.occlusionTexture,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Occlusion),emissiveFactor:u?[u[0],u[1],u[2]]:[0,0,0],metallicRoughness:F,wrapTextures:!1,hasParametersFromSource:m},M=[];return t.forEach((({usage:e},r)=>{const s=null!=o&&o[r]&&o[r].formats,a=s?C(s.map((({name:e,format:o})=>({name:e,encoding:S[o]})))):[];M.push({id:r,usage:e,encodings:a})})),{material:b,textures:M}}function C(e){return e.sort(((e,o)=>e.encoding-o.encoding))}const S={ktx2:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX2,basis:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.Basis,dds:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.DDS_S3TC,png:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG,jpg:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.JPG,"ktx-etc2":_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX_ETC2},M={[_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.TextureEncodingMimeType.KTX2_ENCODING]:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.Basis,[_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.TextureEncodingMimeType.BASIS_ENCODING]:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.Basis,[_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.TextureEncodingMimeType.DDS_ENCODING]:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.DDS_S3TC,"image/png":_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG,"image/jpg":_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.JPG,"image/jpeg":_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.JPG,"image/ktx":_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX_ETC2};function P(e){const s=e?.materialDefinitions?Object.keys(e.materialDefinitions)[0]:null,t=e?.textureDefinitions?Object.keys(e.textureDefinitions)[0]:null,l=s?e.materialDefinitions?.[s]:null,n=t?e.textureDefinitions?.[t]:null,i=D();if(null!=l){const e=l.params;e.diffuse&&((0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__.validateColor)(e.diffuse),i.metallicRoughness.baseColorFactor=[e.diffuse[0],e.diffuse[1],e.diffuse[2],1]),null!=e.doubleSided&&(i.doubleSided=e.doubleSided,i.cullFace=e.doubleSided?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.None:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.Back),"none"!==e.cullFace&&"front"!==e.cullFace&&"back"!==e.cullFace||(i.cullFace="none"===e.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.None:"back"===e.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.Back:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.Front),e.transparency&&(i.metallicRoughness.baseColorFactor[3]=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(1-e.transparency,0,1)),(e.useVertexColorAlpha||i.metallicRoughness.baseColorFactor[3]<1)&&(i.alphaMode="blend")}const u=[];if(null!=n){const e=0;!n.wrap||"repeat"!==n.wrap[0]&&"repeat"!==n.wrap[1]||(i.wrapTextures=!0);let o=_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color;"rgba"===n.channels&&(i.alphaMode="blend",o|=_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.AlphaMask);const r=n.images.length-1,s=n.images[r],t=e=>e?.split("/").pop(),l=Array.isArray(n.encoding)?C(n.encoding.map(((e,o)=>({name:t(s.href[o]),encoding:M[e]||0})))):[{name:t(s.href),encoding:M[n.encoding]||0}];u.push({id:e,usage:o,encodings:l}),i.metallicRoughness.baseColorTextureId=e}return{material:i,textures:u}}const D=()=>({alphaMode:"opaque",alphaCutoff:_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_11__.alphaCutoff,doubleSided:!0,cullFace:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.CullFaceOptions.None,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function R(e,o,r,s,t,l){if(null==e?.data)return null;const n=e.data,i=s.renderingContext.parameters.maxMaxAnisotropy,u=i>1,c=r||!o.wrapTextures?w:E,m=G(e.encoding),d=e.usage&_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color?"opaque"===o.alphaMode?3:4:3,g=j(e.encoding,e.usage)?{compressionTracker:t,compressionCallback:l}:void 0;return new _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_8__.Texture(n,{mipmap:u,maxAnisotropy:i,encoding:m,wrap:c,components:d,compressionOptions:g,noUnpackFlip:!0})}const w={s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_10__.TextureWrapMode.CLAMP_TO_EDGE,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_10__.TextureWrapMode.CLAMP_TO_EDGE},E={s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_10__.TextureWrapMode.REPEAT,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_10__.TextureWrapMode.REPEAT};function N(o,r,t,l,n,c){const d=c.rendererTextureUsage,p=e=>v(l,t,e&d),g=(0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__.validateColorAndOpacity)(r.metallicRoughness.baseColorFactor);o.baseColor=[g[0],g[1],g[2],g[3]],o.hasParametersFromSource=!!r.hasParametersFromSource,o.usePBR=c.usePBR,o.mrrFactors=[r.metallicRoughness.metallicFactor,r.metallicRoughness.roughnessFactor,r.hasParametersFromSource?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.schematicMRRFactors[2]:_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_9__.advancedMRRFactors[2]],o.emissiveBaseColor=r.emissiveFactor,o.emissiveSource=_symbols_support_materialUtils_js__WEBPACK_IMPORTED_MODULE_3__.EmissiveSourceMode.Emissive,o.isIntegratedMesh=c.isIntegratedMesh,o.textureAlphaCutoff="mask"===r.alphaMode?r.alphaCutoff:_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_11__.alphaCutoff,o.alphaDiscardMode="opaque"===r.alphaMode?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.AlphaDiscardMode.Opaque:"mask"===r.alphaMode?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.AlphaDiscardMode.Mask:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.AlphaDiscardMode.MaskBlend;const f=[],x=p(_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color|_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.AlphaMask);null!=x&&(o.baseColorTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_5__.RenderTexture(n,x),f.push(o.baseColorTexture.loadPromise));const b=p(_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.MetallicRoughness);null!=b&&(o.metallicRoughnessTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_5__.RenderTexture(n,b),f.push(o.metallicRoughnessTexture.loadPromise));const C=p(_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Emissive);null!=C&&(o.emissionTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_5__.RenderTexture(n,C),f.push(o.emissionTexture.loadPromise));const S=p(_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Occlusion);null!=S&&(o.occlusionTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_5__.RenderTexture(n,S),f.push(o.occlusionTexture.loadPromise));const M=p(_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Normal);return null!=M&&(o.normalTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_5__.RenderTexture(n,M),f.push(o.normalTexture.loadPromise)),o.commonMaterialParameters.hasSlicePlane=c.slicePlaneEnabled,o.commonMaterialParameters.doubleSided=r.doubleSided,o.commonMaterialParameters.cullFace=r.cullFace,o.ellipsoidMode=(0,_webgl_engine_core_shaderLibrary_util_EllipsoidMode_js__WEBPACK_IMPORTED_MODULE_6__.getEllipsoidMode)(c.viewSpatialReference),Promise.all(f)}function k(e){const o=!!e.compressedTextureS3TC,r=!!e.compressedTextureETC,s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("disable-feature:i3s-basis")?0:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.Basis|_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX2,a=_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.JPG|_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG,l=s|_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.DDS_S3TC;return a|(o?l:0)|(r?s:0)}function I(e,o){if(null!=o)return e.find((e=>0!==(e.encoding&o)))}function v(e,o,r){if(null==e||r===_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.None)return null;for(let s=0;s<e.length;s++){const a=e[s];if(null!=a&&0!==(a.usage&r)){const e=o[s];return null!=e?e.id:null}}return null}function j(e,o){return!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("enable-feature:esri-compress-IM-textures")&&(0!==(e&_enums_js__WEBPACK_IMPORTED_MODULE_4__.uncompressedFormats)&&!(o&~_enums_js__WEBPACK_IMPORTED_MODULE_4__.compressibleUsages))}function G(e){switch(e){case _enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX2:return _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.TextureEncodingMimeType.KTX2_ENCODING;case _enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.Basis:return _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.TextureEncodingMimeType.BASIS_ENCODING;case _enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.DDS_S3TC:return _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.TextureEncodingMimeType.DDS_ENCODING;case _enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG:return"image/png";case _enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.JPG:return"image/jpeg";case _enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.KTX_ETC2:return"image/ktx";default:return""}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CacheState: () => (/* binding */ a),
/* harmony export */   LodMetric: () => (/* binding */ d),
/* harmony export */   Node: () => (/* binding */ h),
/* harmony export */   NodeBase: () => (/* binding */ s),
/* harmony export */   NodeFilterImpact: () => (/* binding */ o),
/* harmony export */   NodeIMModificationImpact: () => (/* binding */ r),
/* harmony export */   NodeState: () => (/* binding */ c),
/* harmony export */   NodeTraversalState: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../support/ElevationRange.js */ "./node_modules/@arcgis/core/views/3d/support/ElevationRange.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_3__.ElevationRange{constructor(e,n){super(NaN,NaN),this.id=e,this.serviceMbsInIndexSR=n,this.serviceMbsInRenderSR=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_1__.f)(0,0,0,-1)}invalidateServiceBVsInRenderSR(){(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_2__.invalidateMbs)(this.serviceMbsInRenderSR),this.serviceObbInRenderSR?.invalidate()}shareServiceBVsInRenderSRWith(e){this.serviceObbInRenderSR=e.serviceObbInRenderSR,this.serviceMbsInRenderSR=e.serviceMbsInRenderSR}}var o,r,a,d,c;!function(e){e[e.Unmodified=0]="Unmodified",e[e.Culled=1]="Culled",e[e.NotChecked=2]="NotChecked"}(o||(o={})),function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(r||(r={}));class h extends s{constructor(i,n,t,s,o,d,c,h,l,u){super(i,t),this.index=n,this.childCount=s,this.level=o,this.resources=d,this.version=c,this.lodMetric=h,this.maxError=l,this.numFeatures=u,this.failed=!1,this.cacheState=a.Unknown,this.vertexCount=0,this.memory=0,this.childrenLoaded=0,this.hasModifications=!1,this.imModificationImpact=r.NotChecked,this.elevationAgnosticBoundingVolume=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.fromValues)(0,0,0,-1)}invalidateServiceBVsInRenderSR(){super.invalidateServiceBVsInRenderSR(),this.elevationAgnosticBoundingVolume[3]=-1}}!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(a||(a={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(d||(d={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(c||(c={}));class l{constructor(e,i,n,t){this.nodeHasLOD=e,this.isChosen=i,this.lodLevel=n,this.version=t}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./I3SBinaryReader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js");
/* harmony import */ var _I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./I3SMaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d{constructor(e,t,r,i,o,n){if(this._streamDataController=t,this._logger=r,this._defaultGeometrySchema=i,this._requiredAttributes=o,this._options=n,this._logLayer=e,this._layerUrl=e.parsedUrl.path,this._geometryDefinitions=e.geometryDefinitions,e.materialDefinitions){const t=e.textureSetDefinitions;this._materialAndTextures=e.materialDefinitions.map((r=>(0,_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__.getMaterialAndTextures)(t,r,"integrated-mesh"===e.type)))}}_load(e,t,r){return this._streamDataController.request(e,t,r)}_loadAttribute(e,t,r){const i=`${this._layerUrl}/nodes/${e.resources.attributes}/attributes/${t.key}/0`;return this._load(i,"binary",r).then((e=>(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_6__.readBinaryAttribute)(t,e)))}async loadAttributes(e,t,r){const o=await Promise.allSettled(t.map((t=>this._loadAttribute(e,t.attributeStorageInfo,r)))),n={};for(let s=0;s<t.length;++s){const r=o[s],a=t[s];if("fulfilled"===r.status){const e=r.value;n[a.name]=e}else{const t=r.reason;(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(t),this._logger.error("#loadAttributes",this._logLayer,`Failed to load attributeData for '${a.name}' on node '${e.id}'`,t)}}return n}async loadNodeData(r,i){const o=null!=this._requiredAttributes&&r.resources.attributes?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this.loadAttributes(r,this._requiredAttributes,i)):null,{bufferDefinition:n,bufferIndex:s}=_(this._geometryDefinitions,r),u=!!r.resources.geometry,f=u?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this._loadGeometry(r.resources.geometry,s,i)):null,d=r.resources.hasSharedResource?await this._loadShared(r,i):null,y=r.resources.materialDefinition,D=this._materialAndTextures&&null!=y&&y>=0?this._materialAndTextures[y]:null!=d?(0,_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__.getMaterialAndTexturesFromShared)(d):null,b=D?.material,x=D?.textures??[],p=`${r.id}`,A=!u&&this._options.loadFeatureData,$=A?await this._loadFeatureData(p,i):null,T=A?m($):c(b),j=null==T?h($):null,w=x.length>0?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this.loadTextures(r,x,i)):null;let I=null,S=null;if(f){I=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.assertResult)(await f);const e=g(this._defaultGeometrySchema,d);S=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_6__.createGeometryDescriptor)(n,e)}const U=w?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.assertResult)(await w):null,q=o?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.assertResult)(await o):{},B=q?{attributeData:q,loadedAttributes:this._requiredAttributes}:null;if(null!=T)return{geometryData:T,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:S,requiredTextures:x,textureData:U};if(null!=j)return{pointData:j,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:S,requiredTextures:x,textureData:U};throw new Error}static _addAbsoluteHrefTexture(e,t){const r=e.textureDefinitions;if(null!=r)for(const i of Object.keys(r))for(const e of r[i].images)Array.isArray(e.href)?e.hrefConcat=e.href.map((e=>(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeAbsolute)(e,t))):e.hrefConcat=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeAbsolute)(e.href,t)}static _fixTextureEncodings(e){const t=e.textureDefinitions;if(null!=t)for(const r in t){const e=t[r];if(Array.isArray(e.encoding))for(let t=0;t<e.encoding.length;t++){const r=e.encoding[t];"data:"===r.slice(0,5)&&(e.encoding[t]=r.slice(5))}else{const t=e.encoding;"data:"===t.slice(0,5)&&(e.encoding=t.slice(5))}}}async _loadShared(e,t){if(null==e.resources.geometry)return{};const r=`${this._layerUrl}/nodes/${e.resources.geometry}/shared`,i=await this._load(r,"json",t);return d._fixTextureEncodings(i),d._addAbsoluteHrefTexture(i,r),i}_loadTexture(e,t,r,i,o){return i===_enums_js__WEBPACK_IMPORTED_MODULE_5__.TextureEncoding.DDS_S3TC||i===_enums_js__WEBPACK_IMPORTED_MODULE_5__.TextureEncoding.KTX2||i===_enums_js__WEBPACK_IMPORTED_MODULE_5__.TextureEncoding.Basis?this._load(e,"binary",o).then((e=>({id:t,usage:r,data:e,encoding:i}))):this._load(e,"image",o).then((e=>({id:t,usage:r,data:e,encoding:i})))}loadTextures(e,t,r){const i=this._options.textureUsageMask;return Promise.all(t.map((t=>{if(0===(t.usage&i))return null;const o=(0,_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__.selectEncoding)(t.encodings,this._options.textureEncodings);if(null==o)return this._logger.error("#loadTextures",this._logLayer,`No known encoding for texture found on node ${e.id}`),Promise.reject();const n=e.resources.texture||e.id,s=`${this._layerUrl}/nodes/${n}/textures/${o.name}`;return this._loadTexture(s,t.id,t.usage,o.encoding,r)})))}_loadFeatureData(e,t){const r=`${this._layerUrl}/nodes/${e}/features/0`;return this._load(r,"json",t)}_loadGeometry(e,t,r){const i=`${this._layerUrl}/nodes/${e}/geometries/${t}`;return this._load(i,"binary",r)}}function c(e){return{featureIds:[],geometries:[{type:"ArrayBufferView",params:{material:e}}],featureDataPosition:[0,0,0]}}function m(e){if(!e)return null;for(const t of e.featureData){const e=t.geometries;if(null!=e)for(const r of e)return{featureIds:[t.id],featureDataPosition:t.position,geometries:[r]}}return null}function h(e){if(!e)return null;const t=new Array;for(const r of e.featureData)null!=r.position&&t.push({featureIds:[r.id],featureDataPosition:r.position,geometries:[]});return t}function g(e,t){if(!e||!t?.materialDefinitions)return e;const i=Object.keys(t.materialDefinitions)[0];return!t.materialDefinitions[i].params.vertexRegions&&e.vertexAttributes.region&&delete(e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e)).vertexAttributes.region,e}function _(e,t){const r={bufferDefinition:null,bufferIndex:0},i=t.resources.geometryDefinition;if(null==e||null==i||i<0)return r;const o=i>=0?e[i].geometryBuffers:null;if(null==o)return r;for(let n=0;n<o.length;n++){const e=o[n];if(null==e.compressedAttributes)r.bufferIndex=n,r.bufferDefinition=o[n];else if("draco"===e.compressedAttributes.encoding&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("disable-feature:i3s-draco"))return r.bufferIndex=n,r.bufferDefinition=e,r}return r}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SOverrides: () => (/* binding */ A)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/memoryEstimations.js */ "./node_modules/@arcgis/core/core/memoryEstimations.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_ReactiveSet_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../core/ReactiveSet.js */ "./node_modules/@arcgis/core/core/ReactiveSet.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../intl/number.js */ "./node_modules/@arcgis/core/intl/number.js");
/* harmony import */ var _layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../layers/support/featureQueryAll.js */ "./node_modules/@arcgis/core/layers/support/featureQueryAll.js");
/* harmony import */ var _support_requestUtils_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../support/requestUtils.js */ "./node_modules/@arcgis/core/support/requestUtils.js");
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let A=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(e),this._warnMaximumChangedObjectsExceeded=!1,this._maximumNumberOfEditOVerrides=S,this._definitionExpressionDirty=!0,this._interactiveEditingSessions=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__["default"],this.geometryOverrides=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__["default"],this._clientGeometryCache=new Map,this._attributeChangedObjectIds=new _core_ReactiveSet_js__WEBPACK_IMPORTED_MODULE_12__["default"],this._geometryChangedObjectIds=new _core_ReactiveSet_js__WEBPACK_IMPORTED_MODULE_12__["default"],this._pendingFetchChangedObjectIds=null,this._pendingFetchAbortController=new AbortController,this._applyGeometryOverridesTask=null,this._featureIdLocks=new Map}initialize(){this._memCache=new G(this.memoryController.newCache(`i3s-attribute-overrides-${this.layer.uid}`)),this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.watch)((()=>this.layer.definitionExpression),(async()=>{this._definitionExpressionDirty=!0,this._pendingFetchChangedObjectIds||(this._applyGeometryOverridesTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.abortMaybe)(this._applyGeometryOverridesTask),this._applyGeometryOverridesTask=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__.createTask)((e=>this._queryAndAddGeometryOverrides(e))),await this._applyGeometryOverridesTask.promise)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.sync)),this._pendingFetchChangedObjectIds=this._fetchChangedObjectIds(this._pendingFetchAbortController?.signal),this._pendingFetchChangedObjectIds.finally((()=>{this._pendingFetchAbortController=null,this._pendingFetchChangedObjectIds=null}))}destroy(){this._set("layer",null),this._memCache=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.destroyMaybe)(this._memCache),this._pendingFetchAbortController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.abortMaybe)(this._pendingFetchAbortController),this._pendingFetchChangedObjectIds=null,this._featureIdLocks.clear()}get is3DOFL(){return null!=this._associatedLayer?.infoFor3D}get sortedGeometryChangedObjectIds(){return this.is3DOFL?[...this._geometryChangedObjectIds].sort(((e,t)=>e-t)):[]}get _associatedLayer(){return null==this.layer?null:this.layer.associatedLayer}get hasGeometryChanges(){return this._geometryChangedObjectIds.size>0}get updating(){return!!this.is3DOFL&&!!(this._pendingFetchChangedObjectIds||this._applyGeometryOverridesTask&&!this._applyGeometryOverridesTask.finished)}get isEmpty(){return null==this._pendingFetchChangedObjectIds&&0===this._attributeChangedObjectIds.size&&0===this._geometryChangedObjectIds.size}featureHasGeometryChanges(e){return this._geometryChangedObjectIds.has(e)}featureHasAttributeChanges(e){return this._attributeChangedObjectIds.has(e)}createInteractiveEditSession(e){this._attributeChangedObjectIds.add(e);const t=this._interactiveEditingSessions,r=new x(e,(()=>{t.remove(r)}));return t.unshift(r),r}async applyAttributeOverrides(e,t,r,s=[]){if(this._pendingFetchChangedObjectIds&&await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__.whenOrAbort)(this._pendingFetchChangedObjectIds,r),null==t)return;const{attributeData:i,loadedAttributes:o}=t;if(null==o||null==i||0===this._attributeChangedObjectIds.size)return;const n=new Set;for(const d of o)n.add(d.index);for(const d of s)n.has(d.index)||(o.push(d),i[d.name]=new Array(e.length));const a=await this._lockFeatureIds(e);try{const t={attributeData:i,loadedAttributes:o},s=this._getOverridesFromCache(e,t,this._attributeChangedObjectIds),{objectIds:n,fieldNames:a}=s;if(0===n.length||0===a.length)return;const d=await this._queryAttributeOverridesFromAssociatedLayer(n,a,r);if(null==d)return;this._processOverridesFromAssociatedLayer(e,d,a,t)}finally{a.remove()}}updateGeometry(e,t){this._geometryChangedObjectIds.add(e);const r=this._clientGeometryCache.get(e);if(null!=r&&(this.geometryOverrides.remove(r),this._clientGeometryCache.delete(e)),null!=t){const r={oid:e,mesh:t};this.geometryOverrides.add(r),this._clientGeometryCache.set(e,r)}}updateAttributeValue(e,t,r){this._attributeChangedObjectIds.add(e),this._cacheAttributeValue(e,t,r)}featureAdded(e){this.is3DOFL&&this._geometryChangedObjectIds.add(e),this._attributeChangedObjectIds.add(e)}_cacheAttributeValue(e,t,r){this._memCache.put(e,t,r)}_getOverridesFromCache(e,{loadedAttributes:t,attributeData:r},s){const i=new Array;for(const a of t)i[a.index]=r[a.name];const o=new Set,n=new Set;for(let a=0;a<e.length;a++){const r=e[a];if(s.has(r))for(const e of t){const t=this._attributeFromCache(r,e.index);void 0===t?(o.add(r),n.add(e.name)):i[e.index][a]=t}}return{objectIds:Array.from(o),fieldNames:Array.from(n)}}_attributeFromCache(e,t){const r=this._fromInteractiveEditingSession(e,t);return void 0!==r?r:this._memCache.get(e,t)}_fromInteractiveEditingSession(e,t){if(null!=this._interactiveEditingSessions)for(const r of this._interactiveEditingSessions){if(r.objectId!==e)continue;const s=r.getAttribute(t);if(void 0!==s)return s}}async _queryAttributeOverridesFromAssociatedLayer(e,t,r){if(0===e.length)return null;this._logWarningIfMaximumObjectsExceeded();const{associatedLayer:s}=this.layer;if(null==s)return null;const i=s.createQuery(),{objectIdField:o}=s,n=[o,...t];i.where=this.layer.definitionExpression||"1=1",i.returnGeometry=!1,i.outFields=n,i.cacheHint=!0;const a=await this._executeBatchQuery(s,e,i,r),d=[];for(const c of a)if(c.ok)for(const e of c.value.features)d.push(e);return d}async _queryGeometryOverridesFromAssociatedLayer(e,t){if(0===e.length||!this.is3DOFL)return null;const r=this.layer.associatedLayer,s=r.infoFor3D,{spatialReference:i}=r,{state:{viewingMode:o},spatialReference:n}=this.view,a=o===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_20__.ViewingMode.Global,d=i.isGeographic;if(a&&!d)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(this).warn("unsupported-pcs-edits-in-global-view",this.layer.title,k(i,n,this.view.viewingMode,E.Mode)),null;if(!a&&d)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(this).warn("unsupported-gcs-edits-in-local-view",this.layer.title,k(i,n,this.view.viewingMode,E.Mode)),null;if(!((0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_16__.equals)(i,n)||a&&n.isWebMercator&&i.isWGS84))return _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(this).warn("unsupported-mismatched-spatial-reference-edits",this.layer.title,k(i,n,this.view.viewingMode,E.SpatialReference)),null;this._logWarningIfMaximumObjectsExceeded();const{objectIdField:h,globalIdField:l}=r,u=[h,...null!=l?[l]:[]],m=r.createQuery();m.where=this.layer.definitionExpression||"1=1",m.returnGeometry=!0,m.outFields=u,m.cacheHint=!0,m.returnZ=r.hasZ,m.returnM=r.hasM;const{assetMapFromAssetMapsJSON:p,extractMesh:g}=await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_meshUtils_vertexSpaceConversion_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_MeshComponent_js-node_modules_arcgis_core_g-4bdb58"), __webpack_require__.e("vendors-node_modules_arcgis_core_geometry_Mesh_js"), __webpack_require__.e("node_modules_arcgis_core_rest_support_meshFeatureSet_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../rest/support/meshFeatureSet.js */ "./node_modules/@arcgis/core/rest/support/meshFeatureSet.js")),y=await this._executeBatchQuery(r,e,m,t),f=[];for(const c of y){if(!c.ok)continue;const e=c.value,{assetMaps:t,features:r,globalIdFieldName:o}=e;if(null==t)continue;const n=p(s,t);for(const a of r){const e=g(a,o,i,s,n),t=a;null!=e?(t.geometry=e,f.push(t)):t.geometry=null}}return f}_logWarningIfMaximumObjectsExceeded(){if(!this._warnMaximumChangedObjectsExceeded)return;this._warnMaximumChangedObjectsExceeded=!1;let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_17__.formatNumber)(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;e+=t?.loaded?` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:` (${this.layer.parsedUrl.path})`,_core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(this).warn("#queryOverrides()",this.layer.title,`${e}.`)}async _executeBatchQuery(e,t,r,i){if(0===t.length)return[];const n=(0,_layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_18__.getMaximumQuerySize)(e);t=[...t].sort(((e,t)=>e-t));const a=(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.splitIntoChunks)(t,n).map((t=>{const s=r.clone();return s.objectIds=t,(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__.resultOrAbort)((0,_layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_18__.queryAllJSON)(e,s,{signal:i}))}));return Promise.all(a)}_processOverridesFromAssociatedLayer(e,t,r,{loadedAttributes:s,attributeData:i}){const o=this._associatedLayer;if(null==o)return;const n=o.objectIdField,a=r.map((t=>(t in i||(i[t]=new Array(e.length)),i[t]))),d=new Map(s.map((e=>[e.name,e.index]))),c=r.map((e=>d.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const l of t){const e=l.attributes[n];for(let t=0;t<r.length;t++){const s=c[t],i=h.get(e),o=l.attributes[r[t]];a[t][i]=o,this._cacheAttributeValue(e,s,o)}}}async _fetchChangedObjectIds(e){const r=this.layer;await r.load({signal:e}),this._geometryChangedObjectIds.clear(),this._attributeChangedObjectIds.clear();const{associatedLayer:s}=r;if(null==s||!s.capabilities?.operations?.supportsChangeTracking)return;const i=this._getFetchChangedObjectIdsServerGen();if(null==i)return;const o=s.layerId,a=this.is3DOFL,d={...s.customParameters,f:"json",returnIdsOnly:!0,layers:`[${o}]`,returnUpdates:!0,returnDeletes:a,returnInserts:a,layerServerGens:JSON.stringify([{id:o,serverGen:i}])};if(null!=s.apiKey&&(d.token=s.apiKey),a){const e=s.infoFor3D;d.fieldsToCompare=JSON.stringify({fields:[...Object.values(e.transformFieldRoles),e.sourceHashField]})}const h=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__.result)((0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(`${s.url}/extractChanges`,{method:"post",query:d,timeout:M,signal:e}));if(!h.ok&&(0,_support_requestUtils_js__WEBPACK_IMPORTED_MODULE_19__.isTimeoutError)(h.error)){const e=this.layer.title;_core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(this).warn("extractChanges:timeout",e,`${e} could not obtain edited features that are not cached in the scene service. Display of features may not be up to date with the latest edits. Consider re-caching the scene service.`)}if(h.ok&&1===h.value.data?.edits?.length){const t=h.value.data.edits[0],r=t?.objectIds,s=t?.fieldUpdates,i=r?.adds??[],o=r?.updates??[],n=r?.deletes??[],d=[...i,...o,...n],c=a?[...i,...s??o,...n]:[],l=Math.min(this._maximumNumberOfEditOVerrides,d.length);l<d.length&&(this._warnMaximumChangedObjectsExceeded=!0);const u=d.sort(((e,t)=>e-t));for(let e=0;e<l;++e){const t=u[e];this._attributeChangedObjectIds.add(t)}for(const e of c)this._geometryChangedObjectIds.add(e);for(;this._definitionExpressionDirty;)await this._queryAndAddGeometryOverrides(e)}}async _queryAndAddGeometryOverrides(e){this._definitionExpressionDirty=!1;const t=this.layer,{associatedLayer:r}=t;if(null!=r&&r.capabilities?.operations?.supportsChangeTracking&&this.is3DOFL&&this._geometryChangedObjectIds.size>0){const t=await this._queryGeometryOverridesFromAssociatedLayer(Array.from(this._geometryChangedObjectIds),e);if(null!=t)for(const e of t)null!=e.geometry&&this.updateGeometry(e.attributes[r.objectIdField],e.geometry)}}_getFetchChangedObjectIdsServerGen(){const e=this.layer;if(null!=e.serviceUpdateTimeStamp?.lastUpdate)return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return null!=t?.serverGens?.minServerGen?t.serverGens.minServerGen:null}async _lockFeatureIds(e){const t=this._featureIdLocks;let r=!0;for(;r;){const s=new Array;for(const r of e){const e=t.get(r);e&&s.push(e)}0===s.length?r=!1:await Promise.all(s)}const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__.createResolver)(),i=s.promise;for(const o of e)t.set(o,i);return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__.makeHandle)((()=>{for(const r of e)t.delete(r);s.resolve()}))}get test(){}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)({constructOnly:!0})],A.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)({constructOnly:!0})],A.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)({readOnly:!0})],A.prototype,"is3DOFL",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_interactiveEditingSessions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)({readOnly:!0})],A.prototype,"sortedGeometryChangedObjectIds",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)({readOnly:!0})],A.prototype,"geometryOverrides",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_clientGeometryCache",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_associatedLayer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)({constructOnly:!0})],A.prototype,"memoryController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_attributeChangedObjectIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_geometryChangedObjectIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"hasGeometryChanges",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_pendingFetchChangedObjectIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_pendingFetchAbortController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"_applyGeometryOverridesTask",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_14__.property)()],A.prototype,"isEmpty",null),A=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_15__.subclass)("esri.views.3d.layers.i3s.I3SOverrides")],A);class x{constructor(e,t){this.objectId=e,this._remove=t,this._updates=new Map,this._isActive=!0}getAttribute(e){return this._updates.get(e)}setAttribute(e,t){this.isActive&&this._updates.set(e,t)}remove(){this.isActive&&(this._isActive=!1,this._remove())}get isActive(){return this._isActive}}class G{constructor(e){this._cache=e}destroy(){this._cache.destroy()}put(e,t,r){this._cache.put(this._getKey(e,t),new L(r))}get(e,t){return this._cache.get(this._getKey(e,t))?.value}_getKey(e,t){return`${e}-${t}`}}class L{constructor(e){this.value=e,this.cachedMemory="string"==typeof e?(0,_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_10__.estimateStringMemory)(e):_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_10__.estimateNumberMemory}}const M=1e4,S=5e4;var E;function k(e,t,r,s){return`Displaying the edits of a SceneLayer with a${s===E.Mode?e.isGeographic?" geographic ":" projected ":" "}spatial reference (wkid:${e.wkid}) in ${r} viewing mode${s===E.SpatialReference?` with spatial reference (wkid:${t.wkid}) `:" "}is not supported. No geometry edits will be displayed for this layer.\nPlease consider re-caching the scene service or changing the ${s===E.Mode?"viewing mode":"view spatial reference"} to display edits.`}!function(e){e[e.Mode=0]="Mode",e[e.SpatialReference=1]="SpatialReference"}(E||(E={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SStreamDataController: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{constructor(e,t,r){this._requester=e,this._customParameters=t,this._apiKey=r,this._activeRequests=new Set}get busy(){return this._requester.busy}request(r,s,o){const a=new AbortController,l=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.onAbortOrThrow)(o,(()=>a.abort())),i={signal:a.signal,query:{...this._customParameters,token:this._apiKey}},n=this._requester.request(r,s,i),u={response:n,abortController:a,abortHandle:l};return this._activeRequests.add(u),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.always)(n,(()=>{u.abortController=null,u.abortHandle?.remove(),u.abortHandle=null,this._activeRequests.delete(u)})),n}cancelAll(){this._activeRequests.forEach((e=>{e.abortController?.abort(),e.abortController=null,e.abortHandle?.remove()})),this._activeRequests.clear()}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ H)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../chunks/vec42.js */ "./node_modules/@arcgis/core/chunks/vec42.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../geometry/ellipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/ellipsoidUtils.js");
/* harmony import */ var _geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../geometry/spatialReferenceEllipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../geometry/projection/projectors.js */ "./node_modules/@arcgis/core/geometry/projection/projectors.js");
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/support/frustum.js */ "./node_modules/@arcgis/core/geometry/support/frustum.js");
/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/support/plane.js */ "./node_modules/@arcgis/core/geometry/support/plane.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../layers/graphics/dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../graphics/elevationAlignmentUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js");
/* harmony import */ var _graphics_ElevationContext_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../graphics/ElevationContext.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js");
/* harmony import */ var _graphics_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../graphics/featureExpressionInfoUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js");
/* harmony import */ var _I3SNode_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const z=1e5;class H{get _frustumMbsCenter(){return this._frustumMbs}get _frustumMbsRadius(){return this._frustumMbs[3]}get _frustumPlanes(){return this._frustum}constructor(e,t,i,s,n,r,o,a,c={}){this._indexSR=e,this._renderCoordsHelper=t,this._clippingArea=n,this._elevationProvider=r,this._viewingMode=o,this._options=c,this._frustum=(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_8__.create)(),this._frustumMbs=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.create)(),this._useFrustumCulling=!1,this._poi=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),this._elevationContext=null,this.minDistance=1/0,this.maxDistance=0,this.maxLodLevel=2,this._tmpObb=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.Obb,this._tmp1=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),this._tmp2=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),this._tmp3=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),this._tmp0=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),this._screenspaceErrorBias=c.screenspaceErrorBias||1,this._progressiveLoadFactor=c.progressiveLoadFactor||1,this.updateCamera(i,s);const u=this._renderCoordsHelper.spatialReference;this._renderSR=u,this._renderSRSphericalPCPF=(0,_geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_5__.getSphericalPCPF)(u),this._isGlobalMode=u===this._renderSRSphericalPCPF,this.updateElevationInfo(a),this._tmpPoint=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_12__.makeDehydratedPoint)(0,0,0,e),this._isECEFOBBInLocalMode=this._indexSR.isWGS84&&(u.isWebMercator||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_10__.isPlateCarree)(u)),this._indexSREllipsoidRadius=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__.getReferenceEllipsoid)(this._indexSR).radius,this._indexSRSphericalPCPF=(0,_geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_5__.getSphericalPCPF)(e),this._projectorIndexSRToIndexSRSphericalPCPF=(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_7__.getProjector)(this._indexSR,this._indexSRSphericalPCPF)}updateElevationInfo(e){null!=e?(this._elevationContext=_graphics_ElevationContext_js__WEBPACK_IMPORTED_MODULE_15__.ElevationContext.fromElevationInfo(e),this._elevationContext.updateFeatureExpressionInfoContext((0,_graphics_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_16__.createContextWithoutExpressionSupport)((0,_graphics_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_16__.extractExpressionInfo)(e,!1)))):this._elevationContext=null}updateCamera(n,r){if(this._useFrustumCulling=r,r){(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_8__.fromMatrix)(n.viewMatrix,n.projectionMatrix,this._frustum,X);{const r=n.eye,o=Z;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(o,n.viewForward);const a=Y;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(a,X[4],r);const c=.5*(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(a,a)/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(o,a),u=this._frustumMbs;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.b)(u,r,o,c);const l=1+c;u[3]=l}}this._screenSizeFactor=1/(n.perScreenPixelRatio/2),this._camPos=n.eye,this.minDistance=1/0,this.maxDistance=0}setPointOfInterest(e){this._poi=e}updateScreenSpaceErrorBias(e){const t=this._screenspaceErrorBias;return this._screenspaceErrorBias=e,t}updateClippingArea(e){this._clippingArea=e}expandElevationRange(e,t,i){if(null==this._elevationContext)return;const s=e.serviceMbsInIndexSR;if(!s)return;const n="relative-to-scene"===this._elevationContext.mode?"scene":"ground";if(this._elevationProvider.getSphereElevationBounds){const e=this._elevationProvider.getSphereElevationBounds(s,this._indexSR,n);return void(e&&i.expandElevationRange(e))}const r=s[0],o=s[1],a=s[2],c=this._elevationProvider.getElevation(r,o,a,this._indexSR,n);c&&i.expandElevationRangeValues(c,c);const u=t?null:this._elevationProvider.getRootElevationBounds?.();u&&i.expandElevationRange(u)}getServiceMbsInRenderSR(e){const t=e.serviceMbsInRenderSR;if((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_18__.isValidMbs)(t))return t;e.serviceMbsInIndexSR&&(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,e.serviceMbsInIndexSR);const i=e.elevationRangeMin;if(this._elevationContext&&Number.isFinite(i)){let s=0,n=0;const r=e.elevationRangeMax;switch(this._elevationContext.mode){case"relative-to-ground":case"relative-to-scene":s=this._elevationContext.geometryZWithOffset(t[2],this._renderCoordsHelper)+i-t[2],n=r-i;break;case"on-the-ground":s=i-t[2],n=r-i}t[2]+=s+.5*n,t[3]+=.5*n}else this._elevationContext&&t[3]<z&&(this._tmpPoint.x=t[0],this._tmpPoint.y=t[1],this._tmpPoint.z=t[2],t[2]=(0,_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_14__.evaluateElevationAlignmentAtPoint)(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper));return (0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_6__.projectBoundingSphere)(t,this._indexSR,t,this._renderSR),t}getAndUpdateVisibilityObbInRenderSR(e){{const t=e.visibilityObbInRenderSR;if(t)return t}const t=.01*this._indexSREllipsoidRadius,{serviceMbsInIndexSR:i,serviceObbInIndexSR:s}=e;if(null==s||!i||!s.isValid||this._isECEFOBBInLocalMode&&(s.halfSizeX>t||s.halfSizeY>t||s.halfSizeZ>t))return null;{let t=e.serviceObbInRenderSR;if(null==t)t=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.Obb,e.serviceObbInRenderSR=t;else if(t.isValid)return t;const n=i[3];let r=0,o=0;const a=s.centerZ,c=this._renderCoordsHelper,u=this._elevationContext;if(u&&e.elevationRangeValid){const t=e.elevationRangeMin,i=e.elevationRangeMax;switch(u.mode){case"relative-to-ground":case"relative-to-scene":r=u.geometryZWithOffset(a,c)+t-a,o=i-t;break;case"on-the-ground":r=t-a,o=i-t}}else if(u&&n<z){const e=this._tmpPoint;e.x=s.centerX,e.y=s.centerY,e.z=a,r=(0,_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_14__.evaluateElevationAlignmentAtPoint)(e,this._elevationProvider,u,c)-a}const l=o>0,h=l?this._tmpObb:t;return s.transform(h,this._indexSR,this._renderSR,r,this._renderSRSphericalPCPF,this._indexSRSphericalPCPF,this._projectorIndexSRToIndexSRSphericalPCPF),l&&(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.computeOffsetObb)(h,0,o,this._viewingMode,t),t}}getNodeObbInRenderSRIndependentOfElevationOffset(e){{const t=e.visibilityObbInRenderSR??e.serviceObbInRenderSR??null;if(t?.isValid)return t}const t=e.serviceObbInIndexSR;return t?(t.transform(ee,this._indexSR,this._renderSR,void 0,this._renderSRSphericalPCPF,this._indexSRSphericalPCPF,this._projectorIndexSRToIndexSRSphericalPCPF),ee):null}ensureElevationAgnosticBoundingVolume(e){return-1===e.elevationAgnosticBoundingVolume[3]&&e.level>0&&(this._viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_13__.ViewingMode.Global?this._updateElevationAgnosticBoundingVolumeGlobal(e):this._updateElevationAgnosticBoundingVolumeLocal(e)),e.elevationAgnosticBoundingVolume}_updateElevationAgnosticBoundingVolumeGlobal(t){const s=this.getNodeObbInRenderSRIndependentOfElevationOffset(t),o=t.elevationAgnosticBoundingVolume;let a,c=-1;if(s){const t=te;s.getCenter(t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(t,t),a=t,s.getCorners(ie);for(const s of ie){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(s,s);const n=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(s,t);if(n<=0)return void(o[3]=-1);const r=Math.sqrt(1-n*n);c=Math.max(c,r)}}else{const i=t.serviceMbsInRenderSR;if(!(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_18__.isValidMbs)(i))return void(o[3]=-1);{const t=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.c)(te,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(i)),s=i[3],u=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.H)(t);if(u<s)return void(o[3]=-1);c=s/u,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(t,t),a=t}}(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__.i)(o,a);const u=.001;o[3]=c+u}_updateElevationAgnosticBoundingVolumeLocal(e){const t=e.elevationAgnosticBoundingVolume,i=this.getNodeObbInRenderSRIndependentOfElevationOffset(e);if(i){const e=i.getCenter(te);e[2]=0,(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__.i)(t,e);let s=0;const n=se;i.getCorners(ie);for(const t of ie){t[2]=0;const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.x)(n,t);s=Math.max(s,e)}t[3]=Math.sqrt(s)}else{const i=e.serviceMbsInRenderSR;if((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_18__.isValidMbs)(i)){const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.c)(te,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(i));e[2]=0,(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__.i)(t,e),t[3]=i[3]}}}isNodeVisible(e){const t=this.getServiceMbsInRenderSR(e);if(!this._isMBSinClippingArea(t))return!1;if(!this._useFrustumCulling)return!0;const i=this.getAndUpdateVisibilityObbInRenderSR(e);return i?i.doesIntersectFrustumConservativeApproximation(this._frustum):(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_8__.intersectsSphere)(this._frustum,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.w)(t))}isElevationAgnosticBoundingVolumeVisible(e){return!this._useFrustumCulling||(-1===e[3]||(this._viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_13__.ViewingMode.Global?this._isConeVisibleInFrustum(e):this._isCylinderVisibleInFrustum(e)))}_isConeVisibleInFrustum(n){if(!this._isConeVisibleInFrustumMbs(n))return!1;const r=n[3];if(-1===r||r>.9)return!0;const o=this._frustumPlanes,c=this._frustumMbsCenter,u=n,l=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(u,c),h=this._frustumMbsRadius,d=l-h,m=l+h;if(d<=0)return!0;const _=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(K,u,d),p=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(Q,u,m),f=r/Math.sqrt(1-r*r);for(const v of o){const n=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.getNormal)(v),r=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)($,n),o=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(r,u);if(Math.abs(1-o)<.01)continue;const c=ne;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(c,u,o),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(c,c,r),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(c,c);const l=re;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.b)(l,_,c,d*f);if((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.signedDistance)(v,l)<=0)continue;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.b)(l,p,c,m*f);if((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.signedDistance)(v,l)<=0)continue;return!1}return!0}_isConeVisibleInFrustumMbs(e){const t=e[3];if(t>.9)return!0;const s=this._frustumMbsRadius,n=this._frustumMbsCenter,o=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.H)(n);if(o<=s)return!0;const u=e,l=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(u,n);{const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(J,u,l);if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.F)(e,n)<s)return!0}const h=l/o;if(l<=0){return-h<s}const d=Math.sqrt(1-h*h);if(d<t)return!0;const m=s/o;return d*Math.sqrt(1-m*m)-m*h<t}isObbVisibleIndependentOfElevation(e,t){if(!this._useFrustumCulling)return!0;if(-1===e[3])return!0;const s=this._frustumMbsRadius,n=this._frustumMbsCenter,r=this._frustumPlanes,o=ie;if(t.getCorners(o),this._viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_13__.ViewingMode.Global){const t=e,c=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(t,n),u=c-s,l=c+s;if(u<=0)return!0;for(const e of r){let s=!0;for(const n of o){const r=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(n,t),o=oe;if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(o,n,u/r),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.signedDistance)(e,o)<=0){s=!1;break}const c=oe;if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(c,n,l/r),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.signedDistance)(e,c)<=0){s=!1;break}}if(s)return!1}}else{const e=n[2]-s,t=n[2]+s;for(const i of r){let s=!0;const n=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.getNormal)(i),r=n[0],a=n[1],c=n[2],u=i[3];for(const i of o){const n=r*i[0]+a*i[1]+u;if(n+c*e<=0||n+c*t<=0){s=!1;break}}if(s)return!1}}return!0}_isCylinderVisibleInFrustum(e){const t=this._frustumMbsCenter,i=this._frustumMbsRadius,s=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.c)(J,t);s[2]=0;const r=e[3];return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.F)(s,e)<=r+i}isGeometryVisible(e){if(!this._useFrustumCulling)return!0;const t=e.geometryObbInRenderSR;return t?.doesIntersectFrustumConservativeApproximation(this._frustum)??this.isNodeVisible(e)}_isMBSinClippingArea(e){return null==this._clippingArea||(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_18__.intersectBoundingRectWithMbs)(this._clippingArea,e)!==_I3SUtil_js__WEBPACK_IMPORTED_MODULE_18__.MbsIntersectResult.OUTSIDE}_screenSpaceDiameterMbs(e,t){const i=this.getServiceMbsInRenderSR(e),s=Math.sqrt((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.s)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(i),this._camPos)),n=s-i[3];return this._updateMinMaxDistance(s),n<0?.5*Number.MAX_VALUE:t/n*this._screenSizeFactor}calcCameraDistance(e){return this.calcCameraDistanceToCenter(e)-this.getServiceMbsInRenderSR(e)[3]}calcCameraDistanceToCenter(e){const t=this.getServiceMbsInRenderSR(e),i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.j)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t),this._camPos);return this._updateMinMaxDistance(i),i}calcAngleDependentLoD(e){const t=this.getServiceMbsInRenderSR(e),i=t[3],s=(Math.abs(t[0]*(t[0]-this._camPos[0])+t[1]*(t[1]-this._camPos[1])+t[2]*(t[2]-this._camPos[2]))/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.l)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t))+i)/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.j)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t),this._camPos);return Math.min(1,s)}hasLOD(e){return e.lodMetric!==_I3SNode_js__WEBPACK_IMPORTED_MODULE_17__.LodMetric.None}_getDistanceGlobeMode(e,t){const s=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.l)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t)),n=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.l)(e)-s;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._tmp0,e,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(e,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t))/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.k)(e));const r=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.s)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t),this._tmp0),o=t[3];if(r<=o*o)return Math.abs(n);{const r=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._tmp0,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t),1/s),c=s,u=o*o/2/c,d=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._tmp1,r,c-u),p=e,f=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.d)(this._tmp2,p,d),v=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.d)(this._tmp2,f,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._tmp3,r,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(r,f))),g=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.f)(this._tmp2,d,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._tmp2,v,o/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.l)(v)));let b=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.j)(p,g);if(n>=2e5){const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.d)(this._tmp1,p,g);let t=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.e)(e,r)/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.l)(e);t<.08&&(t=1e-4),b/=t}return b}}_getDistance(e,t){return this._isGlobalMode?this._getDistanceGlobeMode(e,t):W(e,t)}_updateMinMaxDistance(e){e>0?(this.minDistance=Math.min(this.minDistance,e),this.maxDistance=Math.max(this.maxDistance,e)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-e))}getLodLevel(e){if(e.lodMetric===_I3SNode_js__WEBPACK_IMPORTED_MODULE_17__.LodMetric.None)return 0;if(0===e.childCount)return this.maxLodLevel;if(this._useFrustumCulling&&this._progressiveLoadFactor<1){const t=this._progressiveLoadFactor*this._screenspaceErrorBias,i=this._screenspaceErrorBias;return this.evaluateLODmetric(e,t)?this.evaluateLODmetric(e,i)?2:1:0}return this.evaluateLODmetric(e,this._screenspaceErrorBias)?this.maxLodLevel:0}evaluateLODmetric(e,t){switch(e.lodMetric){case _I3SNode_js__WEBPACK_IMPORTED_MODULE_17__.LodMetric.ScreenSpaceRelative:{const i=this.getServiceMbsInRenderSR(e),s=this._getDistance(this._camPos,i),n=2*s/this._screenSizeFactor,r=s+i[3];return this._updateMinMaxDistance(r),e.maxError*t<=n}case _I3SNode_js__WEBPACK_IMPORTED_MODULE_17__.LodMetric.MaxScreenThreshold:{let i=this._screenSpaceDiameterMbs(e,e.serviceMbsInIndexSR[3]*t);return this._options.angleDependentLoD&&(i*=this.calcAngleDependentLoD(e)),i<e.maxError}case _I3SNode_js__WEBPACK_IMPORTED_MODULE_17__.LodMetric.RemovedFeatureDiameter:return this._screenSpaceDiameterMbs(e,e.maxError)*t<10;case _I3SNode_js__WEBPACK_IMPORTED_MODULE_17__.LodMetric.DistanceRangeFromDefaultCamera:return this.calcCameraDistance(e)>e.maxError*t}return!1}distToPOI(e){const t=this.getServiceMbsInRenderSR(e);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.j)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.a)(t),this._poi)-t[3]}distCameraToPOI(){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.j)(this._camPos,this._poi)}}function W(e,t){const i=e[0]-t[0],s=e[1]-t[1],n=e[2]-t[2],r=i*i+s*s,o=t[3];if(r<=o*o)return Math.abs(n);const a=Math.sqrt(r)-o;return Math.sqrt(n*n+a*a)}const Z=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),X=(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_8__.createPoints)(),Y=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),J=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),K=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),Q=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),$=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),ee=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.Obb,te=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),ie=[(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)()],se=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),ne=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),re=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)(),oe=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/ValidatedNode.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/ValidatedNode.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ValidatedNode: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(s,t,i,e,h,o,r,c){this.id=s,this.mbs=t,this.obb=i,this.version=e,this.resources=h,this.children=o,this.lodSelection=r,this.numFeatures=c}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextureEncoding: () => (/* binding */ e),
/* harmony export */   TextureUsage: () => (/* binding */ o),
/* harmony export */   compressibleUsages: () => (/* binding */ l),
/* harmony export */   uncompressedFormats: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e;!function(e){e[e.KTX2=1]="KTX2",e[e.Basis=2]="Basis",e[e.DDS_S3TC=4]="DDS_S3TC",e[e.PNG=8]="PNG",e[e.JPG=16]="JPG",e[e.KTX_ETC2=32]="KTX_ETC2"}(e||(e={}));const s=e.PNG|e.JPG;var o;!function(e){e[e.None=0]="None",e[e.Color=1]="Color",e[e.MetallicRoughness=2]="MetallicRoughness",e[e.Normal=4]="Normal",e[e.Occlusion=8]="Occlusion",e[e.Emissive=16]="Emissive",e[e.AlphaMask=32]="AlphaMask",e[e.ColorTextures=19]="ColorTextures",e[e.GeometryTextures=36]="GeometryTextures",e[e.GeometryTexturesPBR=44]="GeometryTexturesPBR",e[e.AllTextures=37]="AllTextures",e[e.AllTexturesPBR=63]="AllTexturesPBR"}(o||(o={}));const l=o.Color|o.MetallicRoughness;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FadeDirection: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var a;!function(a){a[a.FadeIn=0]="FadeIn",a[a.FadeOut=1]="FadeOut"}(a||(a={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RenderTexture: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(s,r){this._textures=s,this.loadPromise=null,this._disposed=!1;const i=this._textures.acquire(r);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isPromiseLike)(i)?(i.then((t=>{this._disposed?(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.releaseMaybe)(t):this._textureRef=t})),this.loadPromise=i):this._textureRef=i}dispose(){this._textureRef=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.releaseMaybe)(this._textureRef),this._disposed=!0}get glTexture(){return null!=this._textureRef?this._textureRef.glTexture:null}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/popupUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFetchPopupTemplate: () => (/* binding */ p),
/* harmony export */   getRequiredFields: () => (/* binding */ n),
/* harmony export */   hasPopupTemplate: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes("*"))return["*"];const o=t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.getFeatureEditFields)(n):[],f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX2dyYXBoaWNzX2NvbnRyb2xsZXJzX0kzU09uRGVtYW5kQ29udHJvbGxlcl9qcy1ub2RlX21vLTUwZDMwMS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDOEksUUFBUSxlQUFlLHFCQUFxQiwyRkFBQyxzQkFBc0IsV0FBVyxPQUFPLHlFQUFDLGtDQUFrQyxPQUFPLHVCQUF1QiwyRUFBMkUsUUFBUSxnRUFBZ0UsVUFBVSw0QkFBNEIsc0NBQXNDLFVBQVUsT0FBTyx5RUFBQyx1Q0FBdUMsYUFBYSx5RUFBQyxvRUFBb0UsT0FBTyxPQUFPLHlFQUFDLG9DQUFvQyxPQUFPLE9BQU8seUVBQUMsb0NBQW9DLFNBQVMsT0FBTyx5RUFBQyxzQ0FBc0Msb0JBQW9CLE9BQU8seUVBQUMsZ0RBQWdELG1CQUFtQiwyQkFBMkIsMEJBQTBCLHNDQUEyRDs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0oxL0I7QUFDQTtBQUNBO0FBQ0E7QUFDbVQsb0JBQW9CLDZCQUE2QixRQUFRLDBFQUFDLE1BQU0sK0JBQStCLGlCQUFpQixpREFBQyxtREFBbUQsTUFBTSw0QkFBNEIsR0FBRywwQkFBMEIsd0RBQUMsZUFBZSxRQUFRLDJEQUFDLHVCQUF1Qix3REFBQyxRQUFRLDRCQUE0QixrRUFBQyxnQ0FBZ0Msd0RBQUMsYUFBYSwwQkFBMEIsd0RBQUMsK0JBQStCLHdEQUFDLGtDQUFrQyx3REFBQyxlQUFlLFdBQVcsZ0RBQWdELGNBQWMsS0FBSyxRQUFRLDJEQUFDLHVCQUF1Qix3REFBQyxtQkFBbUIsMkRBQUMsQ0FBQyx3REFBQyxpQkFBaUIsd0RBQUMsZUFBZSxXQUFXLHNDQUFzQyx3REFBQyw0QkFBNEIsU0FBUyxvQkFBb0IsWUFBWSxzQ0FBc0MscUNBQXFDLG1EQUFtRCxRQUFRLG1GQUFDLEtBQUssMkRBQUMsSUFBdUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnh0QztBQUNBO0FBQ0E7QUFDQTtBQUNxN0QsK0NBQStDLG9CQUFvQix3REFBQyxrQkFBa0IseURBQUMsR0FBRyxvQkFBb0Isc0ZBQXNGLG1CQUFtQixvQ0FBb0MsaUNBQWlDLHFGQUFxRiw0QkFBNEIseUVBQXlFLG1FQUFDLFlBQVksV0FBVyxxR0FBQyxrREFBa0QsMkJBQTJCLHlFQUF5RSxtRUFBQyxXQUFXLFdBQVcscUdBQUMsa0RBQWtELGdCQUFnQixPQUFPLDhFQUFDLGFBQWEsZUFBZSxPQUFPLDZFQUFDLGFBQWEsWUFBWSwrQkFBK0IsY0FBYyxxQkFBcUIsc0JBQXNCLGdCQUFnQiw2QkFBNkIsc0VBQXNFLFNBQVMsWUFBWSxtQkFBbUIseUJBQXlCLGdDQUFnQyxlQUFlLDZTQUE2Uyw0REFBQyxFQUFFLGlCQUFpQiw0Q0FBNEMsNERBQUMsNlZBQTZWLG1FQUFDLGdDQUFnQyw0REFBQyxFQUFFLGlCQUFpQixxQkFBcUIsYUFBYSxNQUFNLG9CQUFvQixNQUFNLHNGQUFzRiwrRUFBQyxxRkFBcUYsd0RBQUcsME1BQTBNLDhDQUE4QyxNQUFNLHdCQUF3QixJQUFJLHFCQUFxQixHQUFHLDBEQUEwRCw2REFBQyx1RkFBdUYsMkRBQUMsRUFBRSw2REFBQyw4Q0FBOEMsd0RBQUMsRUFBRSw2REFBQyw2QkFBNkIsNEdBQTRHLCtSQUErUixFQUFFLDJEQUFDLEVBQUUsa0ZBQUMsMkNBQTJDLDZEQUFDLDBEQUEwRCxpREFBaUQsR0FBRyw2REFBQyw0REFBNEQsNkRBQUMsMkRBQTJELDZEQUFDLGlEQUFpRCw2REFBQyw2REFBNkQsNkRBQUMsc0dBQXNHLG1GQUFDLG9MQUFvTCw2RUFBQywwQ0FBMEMscUhBQXFILDZCQUE2Qiw2RkFBQyxpQkFBaUIsNkZBQTZGLG9FQUFvRSx1RUFBQyxDQUFDLDZFQUFDLDRGQUE0Rix1REFBQyw0SUFBNEksdUVBQUMscVlBQXFZLDZDQUE2QyxtQ0FBbUMsaURBQWlELG1EQUFtRCxJQUFJLHlCQUF5QixJQUFJLGdDQUFnQyxxQ0FBcUMsdUdBQXVHLHFCQUFxQix1REFBdUQsa0dBQWtHLFVBQVUscUtBQXFLLHNCQUFzQiw2QkFBNkIseUJBQXlCLDZGQUE2Riw2RUFBNkUsK0NBQStDLHdCQUF3QixtQkFBbUIsNERBQTRELE1BQU0sb0NBQW9DLHdCQUF3QixzQ0FBc0MsdUhBQXVILGdCQUFnQiwyREFBMkQsb0JBQW9CLFFBQVEsNEVBQUMsR0FBRyxpRkFBQyw4RkFBOEYsMkJBQTJCLHlOQUF5TixzQkFBc0IsdU1BQXVNLGtCQUFrQixvRkFBb0YsY0FBYyw0QkFBNEIsc0dBQXNHLHNHQUFzRyxlQUFlLG1EQUFtRCxZQUFZLDZHQUE2RyxnQkFBZ0IsbU9BQW1PLGFBQWEsbUhBQW1ILG9GQUFvRiw0QkFBNEIsb0JBQW9CLDBDQUEwQywwQkFBMEIsaUdBQUMsMkJBQTJCLG1DQUFtQyxpQkFBaUIsdUZBQUMsc0hBQXNILHdCQUF3Qix1REFBdUQsZ0JBQWdCLHlGQUF5Rix5QkFBeUIscUhBQXFILHFCQUFxQiw4RUFBOEUsY0FBYyxpQ0FBaUMsZ0JBQWdCLG9DQUFvQyx3QkFBd0IsMENBQTBDLDZCQUE2QixpSEFBaUgseUJBQXlCLGdHQUFnRyw2QkFBNkIsZ0ZBQWdGLGlCQUFpQixnREFBZ0QsdUJBQXVCLG1IQUFtSCxhQUFhLHdNQUF3TSw4QkFBOEIsSUFBSSxtQkFBbUIsU0FBUyxvQkFBb0IsdURBQUMsbURBQW1ELEdBQUcsS0FBSyxRQUFRLDBCQUEwQix1REFBQyxvSEFBb0gsY0FBYyx5bkJBQXluQixpQkFBaUIsOEJBQThCLHNCQUFzQiwrVkFBK1Ysa0RBQWtELG9GQUFvRiwwQkFBMEIsaUJBQWlCLGdIQUFnSCxvQkFBb0IsMkZBQTJGLGdHQUFnRywwREFBMEQsOEJBQThCLDhDQUE4Qyx5QkFBeUIsdUVBQXVFLGtEQUFrRCxvQkFBb0Isd0RBQXdELG9FQUFvRSxLQUFLLDZDQUE2Qyw4QkFBOEIsbUVBQW1FLGtKQUFrSixpQkFBaUIsb0JBQW9CLG9CQUFvQixLQUFLLHdDQUF3QyxFQUFFLG9DQUFvQyx5QkFBeUIsK0NBQStDLHFEQUFxRCx1RUFBQyxRQUFRLGlCQUFpQixPQUFPLHVCQUF1QixtQkFBbUIsOEJBQThCLGlEQUFpRCw0QkFBNEIsd0RBQXdELDJCQUEyQiw0REFBNEQsS0FBSywyQkFBMkIsRUFBRSw0Q0FBNEMsc0RBQXNELEtBQUssNkJBQTZCLEVBQUUsSUFBSSwwQ0FBMEMsMkJBQTJCLHdFQUFDLDBDQUEwQywrQ0FBK0MsdUJBQXVCLGtCQUFrQiw4SUFBOEksZUFBZSxrQ0FBa0MsNENBQTRDLHFCQUFxQiw4RkFBOEYseUVBQUMsbUNBQW1DLG9CQUFvQixhQUFhLG1CQUFtQixrQ0FBa0Msd0dBQXdHLGdXQUFnVyxpQ0FBaUMseUNBQXlDLGtCQUFrQiw2RUFBNkUsNkJBQTZCLHFDQUFxQyxTQUFTLHVkQUF1ZCw0QkFBNEIsNEVBQTRFLFdBQVcsc0NBQXNDLGVBQWUsaUNBQWlDLHVFQUF1RSxxQkFBcUIsb0NBQW9DLGdEQUFnRCw4RUFBQyxNQUFNLDhFQUFDLEVBQUUscUJBQXFCLGdEQUFnRCxvQkFBb0IsOENBQThDLGdDQUFnQyw2Q0FBNkMsMkJBQTJCLHdDQUF3Qyx1QkFBdUIsK0ZBQStGLG1CQUFtQixzSUFBc0ksbUJBQW1CLHdDQUF3Qyw0QkFBNEIsNkRBQTZELCtLQUErSyxvQkFBb0IsNEJBQTRCLG9CQUFvQixzRUFBc0UsZ0pBQWdKLFNBQVMsZ0tBQWdLLHFCQUFxQiw4RUFBQyxzQ0FBc0MsdURBQUMsMktBQTJLLDhDQUE4QywyQkFBMkIsZ0JBQWdCLGlEQUFpRCxvQkFBb0IsdU1BQXVNLHlCQUF5QixvQkFBb0IsaURBQWlELGlEQUFpRCxvRkFBb0YsNEJBQTRCLHFCQUFxQiw4Q0FBOEMsOElBQThJLG9CQUFvQixVQUFVLG9CQUFvQixvQkFBb0Isa0VBQUMsUUFBUSxvQkFBb0IsNEVBQTRFLG9CQUFvQixFQUFFLDhCQUE4Qiw0R0FBNEcsb0ZBQUMsNERBQTRELGdCQUFnQixrRUFBa0Usb0RBQW9ELDZDQUE2QywyQkFBMkIsNEJBQTRCLDREQUE0RCxJQUFJLDZMQUE2TCxrRUFBa0UsMERBQTBELHNCQUFzQixTQUFTLElBQUksbUVBQUMsb0RBQW9ELDJEQUEyRCxXQUFXLDZEQUE2RCxhQUFhLCtDQUErQyx1REFBQyx3REFBd0QsNEJBQTRCLHNHQUFzRyw0SEFBNEgsY0FBYyxJQUFJLG1FQUFDLFlBQVksaUJBQWlCLGlHQUFpRyxHQUFHLHFCQUFxQixzQkFBc0Isd0VBQUMsa0dBQWtHLHdFQUFDLDJCQUEyQixtRUFBQyxtQkFBbUIsd0VBQUMsZ0JBQWdCLHlCQUF5QixxREFBcUQsT0FBTyx1RUFBQyxvREFBb0QsbUNBQW1DLHlFQUF5RSxzQkFBc0Isa0RBQWtELDJJQUEySSxhQUFhLDhHQUE4RyxzQkFBc0Isb0JBQW9CLDBDQUEwQyx1QkFBdUIsOEJBQThCLHVFQUFDLGdCQUFnQix1QkFBdUIsOEVBQThFLG9MQUFvTCxvQkFBb0IsOEZBQThGLDJEQUEyRCxtQ0FBbUMsNkJBQTZCLG1CQUFtQixtRUFBbUUsaUNBQWlDLHlHQUF5RywrQkFBK0Isd0VBQUMsUUFBUSxjQUFjLElBQUksbUVBQUMsVUFBVSx1REFBQyw0RUFBNEUsS0FBSyxtRUFBbUUsR0FBRyxvQkFBb0IsOEhBQThILFlBQVksa0JBQWtCLDhHQUE4Ryx5QkFBeUIsb0JBQW9CLDBEQUEwRCx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSxxQ0FBcUMsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksb0NBQW9DLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLGtEQUFrRCx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSw2Q0FBNkMsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksNENBQTRDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLGlDQUFpQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSxnQ0FBZ0MsdURBQUMsRUFBRSxzRkFBQyx3Q0FBd0MsdURBQUMsRUFBRSxzRkFBQyw2Q0FBNkMsdURBQUMsRUFBRSxzRkFBQyxvQ0FBb0MsdURBQUMsRUFBRSxzRkFBQyw4QkFBOEIsdURBQUMsRUFBRSxzRkFBQyxtQ0FBbUMsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksK0JBQStCLHVEQUFDLEVBQUUsc0ZBQUMsMkNBQTJDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLHVDQUF1Qyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLGdDQUFnQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUseUJBQXlCLHlDQUF5Qyx1REFBQyxFQUFFLHVGQUFDLCtEQUErRCxZQUFZLDREQUFDLEVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCLGtFQUFrRSxnQkFBZ0Isd0JBQXdCLFlBQVksV0FBVyw0Q0FBNEMsU0FBUyxTQUFTLG1CQUFtQixHQUFHLDRFQUFDLEdBQUcsTUFBTSxhQUFhLDBDQUEwQyxTQUFTLEdBQXdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0o5bndCO0FBQ0E7QUFDQTtBQUNBO0FBQzZILFFBQVEsZUFBZSwyREFBMkQseUZBQUMsZ0JBQWdCLGNBQWMsdUNBQXVDLG9CQUFvQix1Q0FBdUMscUJBQXFCLHNCQUFzQixPQUFPLHlGQUFDLCtCQUErQixzQkFBc0IsT0FBTyxFQUFFLDZCQUE2QixVQUFVLDRCQUE0QixNQUFNLDJCQUEyQixrQkFBa0IsR0FBRyx3REFBRyw0Q0FBNEMsYUFBYSxTQUFTLE9BQU8sU0FBUyxRQUFRLHlGQUF5RixtRUFBbUUsR0FBRyxJQUFJLHlCQUF5QixTQUFTLGlEQUFpRCxnQ0FBMkk7Ozs7Ozs7Ozs7Ozs7OztBQ0p4aEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGVBQWUsa0JBQWtCLG1CQUFtQixtQ0FBK0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSjNIO0FBQ0E7QUFDQTtBQUNBO0FBQ3FoQixvQkFBb0IsZ0JBQWdCLFlBQVksT0FBTyxVQUFVLCtCQUErQix5RUFBQyxtSUFBbUksaUlBQWlJLDRDQUE0QyxtQ0FBbUMsYUFBYSxpSEFBaUgsUUFBUSxvRkFBQyxFQUFFLHdGQUF3RixpREFBQywyTUFBMk0sTUFBTSxvRkFBQyx1QkFBdUIsb0ZBQUMsb0JBQW9CLE9BQU8sVUFBVSw4SEFBOEgsaUZBQUMsTUFBTSxpRkFBQyxrREFBa0QsbURBQUMsMkRBQTJELG1EQUFDLGtFQUFrRSxtREFBQyx1REFBdUQsaURBQUMsdURBQXVELDhCQUE4QixpREFBQyw2RUFBNkUsbURBQUMsNEVBQTRFLG1EQUFDLDBEQUEwRCwyQ0FBMkMsbUNBQW1DLDBCQUEwQixvQkFBb0Isa0NBQWtDLFlBQVksZ0ZBQWdGLDZCQUE2QixzREFBQyxLQUFLLFVBQVUseUJBQXlCLHFCQUFxQixzREFBQyxLQUFLLEVBQUUsSUFBSSwwQ0FBMEMsb0NBQW9DLHNEQUFDLGdGQUFnRixnQkFBZ0IsK0VBQUMsZ0JBQWdCLGtDQUFrQyxzREFBQyxNQUFNLFVBQVUseUJBQXlCLHFCQUFxQixzREFBQyxNQUFNLEVBQUUsSUFBSSxpQkFBaUIsa0JBQWtCLFFBQVEsY0FBYyx3RUFBQyxvQkFBb0IsZUFBZSw2QkFBNkIsc0RBQUMsS0FBSyxVQUFVLHlCQUF5QixxQkFBcUIsc0RBQUMsS0FBSyxFQUFFLElBQUksU0FBUyxjQUFjLG9EQUFrRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKamlHO0FBQ0E7QUFDQTtBQUNBO0FBQ3U2QixRQUFRLHFCQUFxQixxTUFBcU0sVUFBVSxHQUFHLFVBQVUsaUJBQWlCLGFBQWEsb0JBQW9CLGNBQWMscUJBQXFCLGVBQWUsc0JBQXNCLHdCQUF3QixlQUFlLEVBQUUsa0VBQWtFLG9HQUFDLFVBQVUsT0FBTyxrSEFBa0gsaUJBQWlCLGdEQUFnRCxzREFBQyx1RUFBdUUsT0FBTyxpQkFBaUIsb0VBQW9FLG9CQUFvQiw4QkFBOEIsaURBQWlELG1CQUFtQixnQ0FBZ0MsdURBQXVELFlBQVksY0FBYyw2QkFBNkIsaUZBQWlGLHNCQUFzQiw2QkFBNkIscUJBQXFCLHNEQUFDLHVFQUF1RSxFQUFFLEdBQUcsZUFBZSw0Q0FBNEMsaUNBQWlDLGtCQUFrQixzREFBQyx5RUFBeUUsRUFBRSxJQUFJLDJCQUEyQix1REFBdUQsc0RBQXNELDhIQUE4SCwwQkFBMEIsWUFBWSxXQUFXLEtBQUssV0FBVyxFQUFFLFlBQVksRUFBRSxLQUFLLDBGQUEwRiw2REFBNkQscUNBQXFDLEVBQUUsT0FBTywySEFBMkgsdUJBQXVCLDZCQUE2QixvQ0FBb0Msd0JBQXdCLDZCQUE2QixnREFBZ0Qsc0RBQUMsMERBQTBELEdBQUcseUJBQXlCLDJFQUEyRSxnQ0FBZ0Msc0RBQUMsMERBQTBELEdBQUcsOEJBQThCLHdDQUF3Qyw0Q0FBNEMsT0FBTyw0RkFBQyxhQUFhLCtEQUErRCxTQUFTLFFBQVEsV0FBVyx3QkFBd0IsRUFBRSxtQ0FBbUMsc0JBQXNCLHNCQUFzQiw0REFBQyxzR0FBc0csNExBQTRMLEtBQUssTUFBTSx5Q0FBeUMsMkJBQTJCLDhCQUE4QixNQUFNLHlCQUF5Qiw2QkFBNkIsNEJBQTRCLHFFQUFDLElBQUksTUFBTSxzQ0FBc0MsaUVBQWlFLE9BQU8sY0FBYyxtREFBbUQsb0JBQW9CLGdCQUFnQixxQkFBcUIsbUtBQW1LLDRCQUE0QiwyQkFBMkIsVUFBVSxPQUFPLFFBQVEsdUJBQXVCLFNBQVMsMEJBQTBCLG9DQUFvQywwRkFBMEYsTUFBTSx5QkFBeUIsV0FBVyx1REFBdUQsU0FBUyxzQkFBc0IsMENBQTBDLFlBQVksb0RBQW9ELHFCQUFxQiwrQkFBK0IsSUFBSSxlQUFlLFNBQVMsS0FBSyxZQUFZLCtEQUFDLElBQUksdUJBQXVCLDBEQUFDLCtCQUErQix3RUFBd0UsVUFBVSxvQkFBb0IsT0FBTyw4SkFBOEosZ0JBQWdCLE1BQU0sbUJBQW1CLGlIQUFpSCxRQUFRLHNCQUFzQixJQUFJLGdCQUFnQixJQUFJLGdCQUFnQixJQUFJLEtBQUssMEVBQTBFLDBCQUEwQixpQkFBaUIsSUFBSSxnQkFBZ0IsSUFBSSxLQUFLLHNEQUFzRCxzQkFBc0IsT0FBTyxxREFBQyw2QkFBNkIsMEJBQTBCLE1BQU0sK0JBQStCLG1EQUFtRCw4Q0FBOEMsbURBQUMsU0FBUyw2RUFBQyxXQUFXLGlDQUFpQywrQkFBK0IsNERBQUMsMkRBQTJELFFBQVEsbUZBQUMsR0FBRyxtRkFBQyxnRUFBZ0UseUJBQXlCLElBQUksaUNBQWlDLHdCQUF3QixtQ0FBbUMsK0NBQStDLHNJQUFzSSwrQ0FBK0Msa0JBQWtCLDJJQUEySSxZQUFZLElBQUksS0FBSyxZQUFZLFlBQVksSUFBSSxLQUFLLCtCQUErQix1RkFBdUYsc0JBQXNCLHdCQUF3QixNQUFNLHVCQUF1QixzREFBc0QsZ0RBQWdELE9BQU8scUNBQXFDLDRFQUE0RSxrQkFBa0IsNkRBQTZELGNBQWMseUNBQXlDLHFFQUFxRSwyREFBQyxHQUFHLFVBQVUsU0FBUyxpQ0FBaUMsb0RBQW9ELGlHQUFDLDRGQUE0RixzQkFBZ0w7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0poOVA7QUFDQTtBQUNBO0FBQ0E7QUFDb2dCLG9CQUFvQix5REFBQyxDQUFDLGNBQWMsdUVBQXVFLGNBQWMsMkNBQTJDLFdBQVcsYUFBYSwwQkFBMEIscUNBQXFDLFlBQVksb0JBQW9CLG9EQUFvRCxRQUFRLHVCQUF1QixlQUFlLHdCQUF3QixJQUFJLEtBQUssZUFBZSxRQUFRLEtBQUsseUVBQXlFLGlCQUFpQixlQUFlLGdCQUFnQixPQUFPLG1GQUFtRixVQUFVLG9FQUFDLG1HQUFtRyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSxpQ0FBaUMsdURBQUMsRUFBRSxzRkFBQyw4Q0FBOEMsUUFBUSxpQkFBaUIsMkJBQTJCLGdCQUFnQixnQkFBZ0IsZUFBZSxZQUFZLCtCQUErQiwrREFBQyxtQkFBbUIsd0JBQXdCLHFCQUFxQixnRUFBQyxPQUFPLGtCQUFrQixpQkFBaUIsbUZBQW1GLEdBQTRCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0o3c0Q7QUFDQTtBQUNBO0FBQ0E7QUFDMnJCLFFBQVEsdUJBQXVCLHNIQUFzSCx5REFBQyxvREFBb0QsbUJBQW1CLHdGQUF3RixRQUFRLHFDQUFxQyxxRkFBcUYsUUFBUSxvQkFBb0Isd0JBQXdCLDZDQUE2Qyw2YUFBNmEsa0RBQUMsa1lBQWtZLDRCQUE0QiwrREFBK0QsNERBQUMsRUFBRSxpQkFBaUIsMEJBQTBCLDREQUFDLEVBQUUsaUJBQWlCLHdGQUF3Riw0REFBQyxFQUFFLGlCQUFpQiwrWUFBK1ksb0NBQW9DLDZGQUE2RixTQUFTLG9CQUFvQixtQkFBbUIsMEVBQTBFLHlDQUF5QyxrREFBQyxvQkFBb0IsTUFBTSwyQ0FBMkMsa0RBQUMsMENBQTBDLHFCQUFxQixtQkFBbUIsa0RBQWtELFFBQVEsK0ZBQStGLEdBQUcsK0ZBQStGLGlDQUFpQyw2RUFBNkUseUJBQXlCLDRCQUE0QixjQUFjLDhDQUE4QywyQkFBMkIsU0FBUyxnSkFBZ0osK0RBQStELEdBQUcsNENBQTRDLGlEQUFDLGdCQUFnQixtQ0FBbUMsb0NBQW9DLDJDQUEyQyxpREFBQyx5QkFBeUIscURBQXFELHVCQUF1QiwwQkFBMEIsaUJBQWlCLGlEQUFDLHFDQUFxQywrREFBK0QsaUNBQWlDLHVEQUF1RCxhQUFhLDBCQUEwQiwwQkFBMEIsdURBQXVELHNCQUFzQixtQkFBbUIsRUFBRSxjQUFjLDZCQUE2QixtRUFBQyx1R0FBdUcsRUFBRSxNQUFNLEdBQUcsbUJBQW1CLEtBQUssa0NBQWtDLEVBQUUsTUFBTSxtQkFBbUIseUJBQXlCLHFIQUFxSCw4QkFBOEIsd0NBQXdDLG9DQUFvQyxpQ0FBaUMsRUFBRSxvREFBb0Qsc0JBQXNCLGVBQWUsS0FBSyw2QkFBNkIsRUFBRSx3QkFBd0IsdUlBQXVJLElBQUksY0FBYyx1Q0FBdUMsa0RBQWtELHdCQUF3QixZQUFZLElBQUksMEJBQTBCLFdBQVcsUUFBUSxJQUFJLGdFQUFDLG1CQUFtQixvREFBQyxpRkFBaUYscUVBQXFFLFdBQVcsdUNBQXVDLFdBQVcsc0NBQXNDLFdBQVcsbUZBQW1GLE9BQU8sNkNBQUMsNkhBQTZILHlLQUF5SyxnQkFBZ0IsdURBQXVELHlCQUF5Qiw4QkFBOEIseUJBQXlCLFlBQVkseUNBQXlDLHNCQUFzQixlQUFlLGlDQUFpQyw4QkFBOEIsU0FBUyxFQUFFLGtDQUFrQyx1QkFBdUIsZUFBZSxLQUFLLGlHQUFpRyxZQUFZLDRCQUE0QixxQ0FBcUMseUJBQXlCLHVEQUF1RCxvQkFBb0IseUJBQXlCLHFGQUFxRixjQUFjLGdEQUFnRCxnREFBZ0QseURBQXlELE1BQU0sdUJBQXVCLG9EQUFvRCw2Q0FBQyxzRUFBc0UsdUNBQXVDLGdFQUFDLDBFQUEwRSxjQUFjLHNLQUFzSyxrQkFBa0IsK0JBQStCLDRDQUE0QyxvQkFBb0IsMkVBQTJFLHVFQUF1RSx3QkFBd0IsNkJBQTZCLG9CQUFvQix1R0FBdUcsZ0ZBQWdGLHVFQUF1RSw0QkFBNEIsNkJBQTZCLHdCQUF3QiwrRUFBK0Usa0RBQWtELFVBQVUscURBQXFELDJEQUEyRCw2REFBNkQsNkJBQTZCLDZCQUE2QixrQkFBa0IsK0JBQStCLGtCQUFrQixnQ0FBZ0MseUNBQXlDLDBDQUEwQyw2QkFBNkIscUJBQXFCLDhCQUE4Qiw2Q0FBNkMsaUJBQWlCLEtBQUssK0RBQStELFlBQVksV0FBVyxLQUFLLGFBQWEscUJBQXFCLG1FQUFtRSxvREFBb0QsOEJBQThCLDZDQUE2QyxxQkFBcUIsWUFBWSxXQUFXLEtBQUssaURBQWlELHdCQUF3Qiw2QkFBNkIsS0FBSyxhQUFhLGtCQUFrQixLQUFLLG1DQUFtQyxxQkFBcUIsYUFBYSxzQkFBc0IsaUZBQWlGLHFGQUFxRixvQ0FBb0MsUUFBUSxHQUFHLFdBQVcsb0dBQW9HLGtCQUFrQixZQUFZLGVBQWUsS0FBSyx3RkFBd0Ysb0RBQW9ELG9EQUFDLDBCQUEwQixLQUFLLGtCQUFrQixvR0FBQyw4QkFBOEIsb0dBQUMsVUFBVSxvREFBQyxRQUFRLG9HQUFDLFdBQVcsWUFBWSxzRUFBc0Usb0RBQUMsR0FBRyxvREFBQywyQkFBMkIsMERBQUMsMEZBQTBGLDBGQUEwRixlQUFlLHNCQUFzQixvREFBb0Qsc0RBQXNELFlBQVksV0FBVyxLQUFLLGtDQUFrQyxvQkFBb0IsV0FBVyxpQ0FBaUMsMkJBQTJCLGdCQUFnQixNQUFNLGtDQUFrQyxnRUFBZ0UsS0FBSyxlQUFlLDZCQUE2QiwwQ0FBMEMsbUJBQW1CLHlCQUF5QixvQkFBb0IscUNBQXFDLG1DQUFtQyxrQkFBa0IseUJBQXlCLDhFQUE4RSxhQUFhLCtCQUErQixvQ0FBb0MsVUFBVSxpQ0FBaUMsaUNBQWlDLGVBQWUscUNBQXFDLGlCQUFpQix3QkFBd0Isd0JBQXdCLHVCQUF1QixrREFBa0QsR0FBRyw0QkFBNEIsNkRBQTZELGlDQUFpQyxpQ0FBaUMsdURBQXVELHlDQUF5QyxrREFBa0QsaUNBQWlDLGlDQUFpQywrRUFBK0UsMEJBQTBCLGlDQUFpQyxrQkFBa0Isa0ZBQWtGLGtDQUFrQyxzQ0FBc0MsZ0NBQWdDLDJDQUEyQyxxRUFBcUUsMkJBQTJCLGlKQUFpSiw2QkFBNkIseUNBQXlDLHdCQUF3QixnQ0FBZ0Msd0JBQXdCLDJDQUEyQyxtQ0FBbUMsaUNBQWlDLGVBQWUsd0JBQXdCLGVBQWUsOERBQThELFlBQVksc0VBQUMsQ0FBQyxTQUFTLFlBQVksZUFBZSxLQUFLLDBFQUEwRSxRQUFRLHdCQUF3QixtQ0FBbUMsa0RBQWtELGtEQUFrRCx1TkFBdU4saUJBQWlCLGlDQUFpQyxvQkFBb0IsY0FBYyw0Q0FBNEMsb0hBQW9ILHVDQUF1QyxNQUFNLG1HQUFtRyxRQUFRLG1DQUFtQyw4REFBOEQsdURBQXVELHFFQUFxRSwwRkFBMEYseURBQUMsYUFBYSx5RUFBeUUscURBQXFELHlEQUFDLFlBQVksa0NBQWtDLHlEQUFDLFFBQVEsMENBQTBDLGlFQUFDLGFBQWEsTUFBTSxvREFBb0QsWUFBWSwwREFBMEQsc0JBQXNCLDZEQUE2RCxxQkFBcUIsbUNBQW1DLGlDQUFpQyx5R0FBeUcsaUVBQUMsOERBQThELDZCQUE2Qix5QkFBeUIsb0NBQW9DLCtDQUErQyx3QkFBd0IsSUFBSSxLQUFLLGlEQUFpRCxvREFBb0QsWUFBWSxrQkFBa0IscUJBQXFCLHlIQUF5SCxpQkFBaUIscUNBQXFDLGlDQUFpQyxvQkFBb0Isd0NBQXdDLHNEQUFzRCxTQUFTLG9CQUFvQixrQ0FBa0MsK0JBQStCLHdDQUF3QyxlQUFlLHNCQUFzQixZQUFZLG1CQUFtQixVQUFVLHVEQUF1RCxnQkFBZ0IsbUVBQW1FLDBCQUEwQixrREFBa0QsT0FBTyxJQUFJLGlDQUFpQyxpRUFBQyxvSUFBb0ksb0NBQW9DLHNCQUFzQiw4Q0FBOEMsWUFBWSxlQUFlLHlEQUFDLFlBQVksZUFBZSxzREFBc0Qsb0NBQW9DLGNBQWMsdUJBQXVCLCtSQUErUixTQUFTLDBEQUEwRCxVQUFVLGdCQUFnQixRQUFRLGtCQUFrQiw0QkFBNEIsWUFBWSw2QkFBNkIsNE9BQTRPLGVBQWUsaURBQWlELCtCQUErQiw4S0FBOEsseUJBQXlCLDBFQUEwRSxlQUFlLEtBQUssK0RBQStELDZJQUE2SSw2RkFBNkYsc0JBQXNCLGtJQUFrSSwrQkFBK0Isb0dBQW9HLE9BQU8scUlBQXFJLGdTQUFnUyx5REFBeUQsK0JBQStCLGtLQUFrSyxpRUFBQyx3QkFBd0IsNFpBQTRaLDBCQUEwQixpRkFBaUYsZ0ZBQWdGLGlFQUFDLFFBQVEsa0RBQWtELHduQkFBd25CLHdCQUF3Qiw0REFBNEQscUJBQXFCLEtBQUssSUFBSSxFQUFFLGNBQWMsaUNBQWlDLHVDQUF1Qyx1Q0FBdUMsZUFBZSxvQkFBb0Isd0dBQXdHLDRCQUE0Qiw4QkFBOEIsb0VBQW9FLGFBQWEsa0JBQWtCLDJGQUEyRixxQ0FBcUMsYUFBYSx5Q0FBeUMsSUFBSSw0QkFBNEIsNkpBQTZKLGdDQUFnQyw4SEFBOEgsMkJBQTJCLG9CQUFvQixzR0FBc0csT0FBTyw4Q0FBOEMsV0FBVyw0RkFBNEYsU0FBUyw4Q0FBOEMsS0FBSywrQkFBK0IsRUFBRSxnQkFBZ0IsNkRBQTZELFNBQVMsZ0JBQWdCLDRCQUE0QixvQkFBb0Isb0NBQW9DLG1CQUFtQix1REFBdUQsbUJBQW1CLDBCQUEwQiw2QkFBNkIsb0NBQW9DLGNBQWMscUJBQXFCLHNCQUFzQiw2QkFBNkIsa0JBQWtCLCtEQUErRCxzQkFBc0IsdUJBQXVCLDJDQUEyQyxrQkFBa0Isd0JBQXdCLDBDQUEwQywrRUFBK0UsU0FBUyxNQUFNLCtCQUErQixZQUFZLHFEQUFxRCxvQkFBb0IsV0FBVyx3QkFBd0IsNEVBQTRFLDJEQUFDLGtEQUFrRCxtQkFBbUIsMEJBQTBCLHFDQUFxQyxnREFBZ0Qsd0NBQXdDLHVIQUF1SCxXQUFXLElBQUksdUdBQXVHLFNBQVMsZ0JBQWdCLG1FQUFDLHdHQUF3RyxJQUFJLGdDQUFnQyxrQkFBa0IsNkNBQTZDLDJCQUEyQiwyQkFBMkIsbUJBQW1CLDBJQUEwSSxFQUFFLFNBQVMsb0hBQW9ILEVBQUUsU0FBUyxvTEFBb0wsRUFBRSxJQUFJLHVCQUF1Qix5TEFBeUwsRUFBRSxJQUFJLDJEQUEyRCxvRUFBb0Usa0JBQWtCLEVBQUUsRUFBRSwwRkFBMEYsRUFBRSxtR0FBbUcsR0FBRyxNQUFNLHNCQUFzQixpREFBaUQsK05BQStOLHVCQUF1Qiw4RkFBOEYsRUFBRSxJQUFJLEVBQUUsR0FBRyxpQ0FBaUMsTUFBTSxtQ0FBbUMsNkZBQTZGLDBFQUEwRSxLQUFLLFNBQVMsNEdBQTRHLEVBQUUsSUFBSSxZQUFZLGlEQUFDLElBQUksS0FBSyxTQUFTLG9GQUFvRixnRUFBQyxnRkFBZ0Ysc0hBQXNILFdBQVcsNERBQUMsc0RBQXNELHlMQUF5TCx3REFBd0QsbUJBQW1CLDJFQUEyRSxpQ0FBaUMsR0FBRyxrQkFBa0IsMERBQTBELDRFQUE0RSxRQUFRLG9CQUFvQixnREFBZ0Qsd0JBQXdCLGtDQUFrQyxZQUFZLFFBQVEsK0NBQStDLElBQUksTUFBTSxrSEFBa0gsNkNBQTZDLHFCQUFxQiwrQ0FBK0MsdUZBQXVGLDRCQUE0Qiw0QkFBNEIseUZBQXlGLGlDQUFpQyxnQ0FBZ0Msd0NBQXdDLHdEQUF3RCxzQ0FBc0MsWUFBWSxlQUFlLEtBQUssK0RBQStELHNDQUFzQyxLQUFLLE1BQU0sNEJBQTRCLFNBQVMsY0FBYyxjQUFjLG9DQUFvQyx5QkFBeUIsd0NBQXdDLDBFQUEwRSxrQkFBa0IsaUZBQWlGLGtDQUFrQyxpR0FBaUcsU0FBUyxNQUFNLDJCQUEyQixJQUFJLFdBQVcsR0FBRyxzQ0FBc0MsWUFBWSxNQUFNLEtBQUssYUFBYSw2QkFBNkIsZUFBZSw2QkFBNkIsTUFBTSxtQkFBbUIsUUFBUSxLQUFLLFdBQVcsRUFBRSxhQUFhLElBQUksbUNBQW1DLHNCQUFzQixNQUFNLGFBQWEsR0FBRyxrQkFBa0IsTUFBTSxjQUFjLFNBQVMsWUFBWSxJQUFJLG1CQUFtQixRQUFRLFFBQVEsUUFBUSx3QkFBd0IsS0FBSyxJQUFJLEVBQUUsYUFBYSxNQUFNLHVCQUF1QixLQUFLLHlCQUF5Qix1QkFBdUIsMENBQTBDLHdCQUF3QiwrQkFBK0IsTUFBTSxhQUFhLEdBQUcsa0JBQWtCLFlBQVksd0RBQXdELGFBQWEsb0JBQW9CLG9CQUFvQixjQUFjLFNBQVMsWUFBWSxJQUFJLG1CQUFtQixLQUFLLGlCQUFpQixVQUFVLElBQUksRUFBRSxxQ0FBcUMsc0JBQXNCLE1BQU0sYUFBYSxHQUFHLGtCQUFrQix5REFBeUQsb0JBQW9CLGNBQWMsU0FBUyxZQUFZLElBQUksb0JBQW9CLHdDQUF3QywwQkFBMEIsc0JBQXNCLEtBQUssUUFBUSxFQUFFLCtCQUErQixtQkFBbUIscUNBQXFDLFVBQVUsK0NBQStDLHFCQUFxQiwrQkFBK0IsU0FBUyx5QkFBeUIsNk1BQTZNLCtCQUErQix1QkFBdUIsMkZBQTJGLEdBQUcsZ0JBQWdCLCtCQUErQiw2QkFBNkIsWUFBWSxpQkFBaUIseUJBQXlCLGtDQUFrQyx5QkFBeUIsWUFBWSxpQkFBaUIsdUJBQXVCLGNBQWMsdUJBQXVCLGtDQUFrQyxzREFBc0QsOEdBQThHLDhCQUE4QixtQkFBbUIsMEJBQTBCLGFBQWEsZ0JBQWdCLFFBQVEsZUFBZSwrQkFBK0IsNERBQUMsRUFBRSxpQkFBaUIsZUFBZSw0REFBQyxFQUFFLGlCQUFpQixrQkFBa0IsNERBQUMsRUFBRSxpQkFBaUIsaUJBQWlCLFNBQVMsb0RBQW9ELGNBQWMsT0FBTywwREFBQyxPQUFPLGNBQWMsT0FBTywwREFBQyxNQUFNLGdCQUFnQixpQkFBaUIsZ0JBQWdCLGlCQUFpQixjQUFjLGNBQWMsZ0JBQWdCLDBCQUEwQixnQkFBZ0IsNEJBQTRCLGtCQUFrQixrQ0FBa0MsK0JBQStCLGtEQUFDLDRDQUE0QyxrREFBQyxnREFBZ0Qsa0RBQUMsMkRBQTJELGtEQUFDLGtDQUFrQyxjQUFjLGlCQUFpQixXQUFXLHNEQUFzRCx1Q0FBdUMsT0FBTyxVQUFVLGtEQUFDLGtCQUFrQixRQUFRLGNBQWMsb0ZBQW9GLFFBQVEsY0FBYywwREFBMEQsY0FBYyxnQ0FBZ0MsUUFBUSxvREFBQyxLQUFLLG9EQUFDLEtBQUssb0RBQUMsS0FBSyxvREFBQyxLQUFLLHdEQUFHLHdCQUFxRTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnZpOUI7QUFDQTtBQUNBO0FBQ0E7QUFDbUosUUFBUSxlQUFlLDBDQUEwQyx3QkFBd0Isa0VBQWtFLGtCQUFrQixvQkFBb0IsMENBQTBDLCtFQUErRSxvQkFBb0Isd0JBQXdCLGdDQUFnQyxvREFBb0QscUJBQXFCLDRDQUE0Qyx3QkFBd0IsK0dBQStHLHNHQUFzRyxpQkFBaUIsdUJBQXVCLG1CQUFtQiwyREFBMkQsNEJBQTRCLG9CQUFvQiwwSEFBMEgsdUVBQXVFLDBCQUEwQixZQUFZLHlDQUF5QyxhQUFhLG1FQUFDLFlBQVksNERBQTRELDZCQUE2QixrREFBQyxNQUFNLGtEQUFDLHVEQUF1RCx1QkFBdUIsUUFBUSxpQkFBaUIsZUFBZSxLQUFLLDRDQUE0QyxZQUFZLHFFQUFxRSxnQ0FBZ0MsK0JBQStCLDJDQUEyQyxtRUFBQyxZQUFZLDRCQUE0QixtQkFBbUIsNEJBQTRCLGdLQUFnSyx3QkFBd0IsU0FBUyxrS0FBa0ssMkJBQTJCLGNBQWMsOENBQThDLG9EQUFvRCwwQ0FBMEMsa0pBQWtKLFFBQVEsbUJBQW1CLG9FQUFvRSxZQUFZLDREQUFDLEVBQUUsaUJBQWlCLEVBQXVCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdHFGO0FBQ0E7QUFDQTtBQUNBO0FBQ2lnQyxrQkFBa0IsMEJBQTBCLG9CQUFvQixvQkFBb0IsNEJBQTRCLGVBQWUsbUJBQW1CLGFBQWEsSUFBSSwrQ0FBK0MsNEVBQUMsOENBQThDLHdEQUFHLDZDQUE2Qyx1RkFBQyxFQUFFLDZQQUE2UCxFQUFFLG9GQUFDLEVBQUUsNlBBQTZQLE1BQU0sb0ZBQUMsdUJBQXVCLG1GQUFDLFFBQVEsb0ZBQUMsd0JBQXdCLG1GQUFDLDJCQUEyQixtREFBQyxPQUFPLG1EQUFDLFdBQVcsbURBQUMsVUFBVSx1SkFBdUosbURBQUMsdURBQXVELElBQUksdUdBQXVHLGlGQUFDLDBCQUEwQixpRkFBQywyQkFBMkIsaUZBQUMsT0FBTyxpRkFBQyx3Q0FBd0MsbURBQUMsK0NBQStDLG1EQUFDLG1EQUFtRCxtREFBQyxvSEFBb0gsTUFBTSxvQkFBb0IsUUFBUSxNQUFNLG1EQUFtRCxnQkFBZ0IsS0FBSyxxQkFBcUIsUUFBUSxRQUFRLHlCQUF5QixFQUFFLElBQUksdUJBQXVCLGNBQWMsOENBQThDLFNBQVMsS0FBSyxzREFBQyxZQUFZLHNEQUFDLFdBQVcsc0RBQUMsY0FBYyxzREFBQyxTQUFTLHNEQUFDLGdCQUFnQixzREFBQyxVQUFVLElBQUksQ0FBQyx5RkFBQyxnQkFBZ0Isc0RBQUMsUUFBUSx5RkFBQyxpQkFBaUIsc0RBQUMsUUFBUSx5RkFBQyxlQUFlLHNEQUFDLHNCQUFzQixzREFBQyxpQkFBaUIsc0RBQUMsa0JBQWtCLHNEQUFDLGlCQUFpQixzREFBQyxXQUFXLGNBQWMseU5BQXlOLFlBQVksaUJBQWlCLFlBQVksa0VBQUMsdUtBQXVLLGlGQUFDLE1BQU0saUZBQUMsdUdBQXVHLGlGQUFDLDBCQUEwQixpRkFBQyxNQUFNLGlGQUFDLGdFQUFnRSx5REFBQyxpSEFBaUgsV0FBVyxZQUFZLFVBQVUseUVBQXlFLE1BQU0sbURBQUMsT0FBTyw2Q0FBNkMsbURBQUMsWUFBWSx3SEFBd0gsbUNBQW1DLE9BQU8seUNBQXlDLEVBQUUsUUFBUSx5QkFBeUIsMkNBQTJDLE9BQU8sdUJBQXVCLGNBQWMsK0JBQStCLDBFQUFDLHlCQUF5QixpRkFBQyw4R0FBOEcscUhBQXFILDRDQUE0QyxFQUFFLHdCQUF3Qiw2QkFBNkIseUhBQXlILG1EQUFDLDZEQUE2RCwyQ0FBMkMsUUFBUSxXQUFXLGlFQUFDLElBQUksNkZBQTZGLEVBQUUsU0FBUyxFQUFFLDZEQUFDLGlCQUFpQiw2REFBQyxlQUFlLElBQUksRUFBRSw2REFBQyxVQUFVLDZEQUFDLFNBQVMsd0JBQXdCLGlEQUFpRCw0RUFBQyxzQ0FBc0MseU5BQXlOLG9GQUFDLElBQUksbUZBQUMsMkRBQTJELGlGQUFDLHdHQUF3RywwRUFBQywyQ0FBMkMsa0ZBQUMsNkJBQTZCLGtGQUFDLE1BQU0sa0ZBQUMsV0FBVyxlQUFlLG1EQUFDLE9BQU8sbURBQUMsWUFBWSxpQ0FBaUMsdUZBQUMsOENBQThDLFVBQVUsbURBQUMsb0JBQW9CLHlDQUF5Qyx1RkFBQyxzREFBc0QsVUFBVSxtREFBQyxXQUFXLGdDQUFnQyx1RkFBQyw2Q0FBNkMsVUFBVSxtREFBQyxZQUFZLGlDQUFpQyx1RkFBQyw4Q0FBOEMsVUFBVSxtREFBQyxTQUFTLHFDQUFxQyx1RkFBQyw0TkFBNE4sd0dBQUMsd0NBQXdDLGNBQWMsK0RBQStELHdEQUFHLGdDQUFnQyxzREFBQyxPQUFPLHNEQUFDLFFBQVEsc0RBQUMsS0FBSyxzREFBQyxTQUFTLHNEQUFDLFVBQVUseUJBQXlCLGdCQUFnQixrREFBa0Qsa0JBQWtCLGdCQUFnQixtREFBQyxrQkFBa0IsWUFBWSxXQUFXLEtBQUssYUFBYSw2QkFBNkIsYUFBYSwwQkFBMEIsWUFBWSxnQkFBZ0IsUUFBUSx3REFBRyxzREFBc0QsMERBQUMsUUFBUSx5REFBQyxHQUFHLGNBQWMsVUFBVSxLQUFLLHNEQUFDLGFBQWEseUZBQUMsZUFBZSxLQUFLLHNEQUFDLGNBQWMseUZBQUMsZ0JBQWdCLEtBQUssc0RBQUMsaUJBQWlCLHlGQUFDLGNBQWMsS0FBSyxzREFBQyx1QkFBdUIsS0FBSyxzREFBQyx3QkFBd0IsS0FBSyxzREFBQyw0QkFBNEIsa0JBQTBNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0psME87QUFDQTtBQUNBO0FBQ0E7QUFDbVAsZ0JBQWdCLHNFQUFDLENBQUMsaUJBQWlCLDhFQUE4RSxvREFBQyxXQUFXLGlDQUFpQywwREFBQyxvRUFBb0UsaUNBQWlDLG1HQUFtRyxjQUFjLGFBQWEscUZBQXFGLFNBQVMsZUFBZSwrSkFBK0osU0FBUyxHQUFHLGtCQUFrQixpQ0FBaUMsZ1ZBQWdWLHVGQUFDLFdBQVcsaUNBQWlDLG1GQUFtRixhQUFhLDJFQUEyRSxTQUFTLGVBQWUsaVBBQWlQLFNBQVMsZUFBZSxzQ0FBc0MsU0FBUyxHQUFHLFFBQVEscUJBQXFCLGtFQUE0Tjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKcGpFO0FBQ0E7QUFDQTtBQUNBO0FBQ21pQixRQUFRLHlCQUF5QixnUEFBZ1AsZ0NBQWdDLHdEQUF3RCwyRUFBQyxvQ0FBb0MsYUFBYSxpREFBaUQsc0JBQXNCLFdBQVcsZUFBZSxTQUFTLHVCQUF1QixjQUFjLE1BQU0sSUFBSSx5Q0FBeUMsd0VBQUMsUUFBUSw0QkFBNEIsbUdBQW1HLFlBQVksV0FBVyxLQUFLLG9CQUFvQiwyQkFBMkIsZ0JBQWdCLFlBQVksS0FBSyxpQkFBaUIsd0VBQUMsNkZBQTZGLE9BQU8sYUFBYSxLQUFLLE9BQU8sU0FBUyx3QkFBd0IsK0RBQStELDJEQUFDLDBEQUEwRCxpQ0FBaUMsNkRBQTZELDJEQUFDLHNPQUFzTyxxRkFBQyw4Q0FBOEMsS0FBSywrSEFBK0gsMkRBQUMsZ0NBQWdDLGtCQUFrQixNQUFNLEVBQUUsaUVBQUMsVUFBVSx5Q0FBeUMsRUFBRSw2RUFBQyxNQUFNLFVBQVUsaUVBQUMsbUJBQW1CLGlFQUFDLFlBQVksTUFBTSwwREFBMEQsTUFBTSxrQkFBa0IsMkdBQTJHLGtCQUFrQix3R0FBd0csZ0JBQWdCLG9DQUFvQyw2QkFBNkIsc0hBQXNILCtEQUFDLHFCQUFxQiwrREFBQyxXQUFXLCtCQUErQiw2QkFBNkIsNkJBQTZCLGFBQWEseUNBQXlDLG9CQUFvQixLQUFLLHNCQUFzQixtREFBbUQsS0FBSyxtQkFBbUIsa0RBQWtELHVCQUF1Qix1Q0FBdUMsV0FBVyxlQUFlLFNBQVMscUJBQXFCLHdDQUF3QyxrRUFBa0Usd0JBQXdCLFdBQVcsc0RBQUMsZUFBZSxzREFBQyxXQUFXLHNEQUFDLDJDQUEyQywrQkFBK0IsdUNBQXVDLCtCQUErQixJQUFJLG9CQUFvQix1Q0FBdUMsOEJBQThCLCtCQUErQixRQUFRLG1FQUFDLDZDQUE2QyxtSEFBbUgsS0FBSyxvQkFBb0IsdUNBQXVDLGVBQWUsU0FBUyxFQUFFLFlBQVksT0FBTyxFQUFFLHNEQUFzRCxJQUFJLHNCQUFzQixXQUFXLGVBQWUsU0FBUyxFQUFFLGFBQWEsOEJBQThCLHFCQUFxQixXQUFXLGVBQWUsU0FBUyxFQUFFLGNBQWMsRUFBRSxFQUFFLGlDQUFpQyxjQUFjLE9BQU8sMkJBQTJCLCtCQUErQixZQUFZLCtCQUErQixjQUFjLGtCQUFrQiw4QkFBOEIscUJBQXFCLG1DQUFtQyxpRUFBaUUsWUFBWSxjQUFjLGtCQUFrQixrQkFBa0IsdURBQXVELCtEQUErRCxFQUFFLFNBQVMsZ0JBQWdCLHdDQUF3Qyw4Q0FBOEMsMEZBQTBGLG9EQUFDLCtCQUErQixnQkFBZ0IsU0FBUyxvQ0FBb0Msa0NBQWtDLGtDQUFrQyx1Q0FBdUMsb0JBQW9CLFlBQVksV0FBVyxLQUFLLGFBQWEsd0VBQXdFLG9EQUFvRCx3REFBRyw0RUFBNEUsU0FBOEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p6NEs7QUFDQTtBQUNBO0FBQ0E7QUFDNjFDLG9CQUFvQix5REFBQyxDQUFDLGVBQWUsaUtBQWlLLDJEQUFDLDRCQUE0QiwyREFBQyx1RUFBdUUsNkRBQUMsb0NBQW9DLDZEQUFDLGtLQUFrSyxhQUFhLCtFQUErRSxlQUFlLG9CQUFvQiw4REFBQyxrREFBa0QseUdBQXlHLDBEQUFDLG9FQUFvRSwrREFBQyw2RkFBNkYsRUFBRSx5REFBQyw4SkFBOEosK0VBQStFLEdBQUcsVUFBVSx1Q0FBdUMsNERBQUMsbURBQW1ELDBEQUFDLHlHQUF5RyxjQUFjLDhDQUE4QyxxQ0FBcUMsOEVBQThFLHVCQUF1Qix3REFBd0QseUJBQXlCLDZDQUE2QyxlQUFlLDJJQUEySSxjQUFjLG1JQUFtSSw2QkFBNkIsNkNBQTZDLDhCQUE4Qiw4Q0FBOEMsZ0NBQWdDLHVDQUF1Qyx5REFBeUQsWUFBWSxHQUFHLHNCQUFzQiwwQ0FBMEMsNkNBQTZDLG1FQUFDLHNEQUFzRCxNQUFNLG1DQUFtQyxHQUFHLHFFQUFxRSxnQkFBZ0IsZ0NBQWdDLDJFQUEyRSxzQ0FBc0MsSUFBSSxTQUFTLG1DQUFtQyxxRUFBcUUseUJBQXlCLEdBQUcscUNBQXFDLHNFQUFzRSxrQkFBa0IsbURBQW1ELFFBQVEsWUFBWSxvQkFBb0Isc0NBQXNDLHlDQUF5Qyw0RkFBNEYsU0FBUyxjQUFjLGtFQUFrRSw0QkFBNEIsd0VBQXdFLGdCQUFnQiwyRkFBMkYsNEJBQTRCLDBCQUEwQiwwQkFBMEIsbUNBQW1DLElBQUksa0JBQWtCLHNDQUFzQywwQkFBMEIsWUFBWSxXQUFXLEtBQUssYUFBYSw4QkFBOEIsNENBQTRDLHFEQUFxRCxPQUFPLGtEQUFrRCx5QkFBeUIsaURBQWlELDRDQUE0QyxvQ0FBb0MsMkZBQTJGLDJCQUEyQiwwQkFBMEIsd0JBQXdCLHlEQUF5RCw0QkFBNEIsMkNBQTJDLE1BQU0sa0JBQWtCLFlBQVksdUJBQXVCLHlCQUF5QixnQkFBZ0IsY0FBYyxnR0FBZ0csb0RBQW9ELG1FQUFtRSxTQUFTLHNEQUFzRCwyQ0FBMkMsa0RBQWtELG1CQUFtQixJQUFJLE9BQU8sY0FBYyxvQkFBb0IsaUJBQWlCLHlEQUFDLHlCQUF5QixnQkFBZ0IsdURBQUMsd0hBQXdILGdCQUFnQix1REFBQyx1SEFBdUgsS0FBSyxtRkFBQyw2Q0FBNkMsdURBQUMsOElBQThJLDJDQUEyQyxNQUFNLGdDQUFnQyw2Q0FBNkMsa0lBQWtJLE1BQU0sMENBQTBDLE9BQU8sNGtCQUFvRCwrQ0FBK0Msa0JBQWtCLGtCQUFrQixpQkFBaUIsMkNBQTJDLEdBQUcsb0JBQW9CLGVBQWUsa0JBQWtCLHlCQUF5QixrREFBa0QsU0FBUyxzQ0FBc0MsbURBQW1ELDJDQUEyQyxxS0FBcUssOERBQUMsc0NBQXNDLHVEQUF1RCw4QkFBOEIsa0JBQWtCLGFBQWEscUJBQXFCLEtBQUssaUJBQWlCLDBCQUEwQixHQUFHLHVEQUFDLDhEQUE4RCxFQUFFLElBQUksa0NBQWtDLHlCQUF5QixRQUFRLHdGQUFDLElBQUksNEJBQTRCLFFBQVEsb0VBQUMsZUFBZSxrQkFBa0IscUJBQXFCLGtFQUFDLENBQUMsaUZBQUMsTUFBTSxTQUFTLEdBQUcsR0FBRyxzQkFBc0IsNENBQTRDLG1DQUFtQyxFQUFFLDhCQUE4QixrQkFBa0IsdUxBQXVMLGtCQUFrQix3QkFBd0IsWUFBWSxXQUFXLEtBQUssNkNBQTZDLDZDQUE2QyxnQ0FBZ0MsbUJBQW1CLGNBQWMsU0FBUyxpRkFBaUYsTUFBTSxrQkFBa0IsR0FBRyx1RUFBdUUsa0RBQWtELGtCQUFrQixvQ0FBb0MsMkRBQTJELEVBQUUscUZBQXFGLGlCQUFpQixJQUFJLHlDQUF5QyxvQkFBb0Isa0NBQWtDLG1FQUFtRSxFQUFFLGNBQWMsMkRBQUMsQ0FBQyx1REFBQyxJQUFJLE1BQU0sa0JBQWtCLHlDQUF5QyxHQUFHLFVBQVUseUVBQUMsV0FBVyx5QkFBeUIsdURBQUMsb0RBQW9ELEdBQUcscUxBQXFMLDBDQUEwQyxxTkFBcU4seURBQXlELDZCQUE2QixZQUFZLElBQUksS0FBSyxhQUFhLHVDQUF1Qyx1REFBdUQsS0FBSyxnQ0FBZ0MsOENBQThDLHVDQUF1QyxtQ0FBbUMsb0JBQW9CLGtCQUFrQixHQUFHLHFIQUFxSCw0R0FBNEcsNkdBQTZHLHFDQUFxQyxtQkFBbUIseUZBQXlGLDBCQUEwQix3RUFBd0UseUJBQXlCLDZCQUE2QixTQUFTLEtBQUssRUFBRSxFQUFFLGtCQUFrQixrQkFBa0IsaUJBQWlCLGFBQWEsdUNBQXVDLFFBQVEsc0VBQUMsZUFBZSw0QkFBNEIsT0FBTyxnRUFBQyxPQUFPLDZCQUE2QixZQUFZLEdBQUcsY0FBYyx1REFBQyxFQUFFLHVGQUFDLEVBQUUsaUJBQWlCLDhCQUE4Qix1REFBQyxFQUFFLHVGQUFDLEVBQUUsaUJBQWlCLCtCQUErQix1REFBQyxFQUFFLHVGQUFDLEVBQUUsWUFBWSwrQkFBK0IsdURBQUMsRUFBRSx1RkFBQyxzREFBc0QsdURBQUMsRUFBRSx1RkFBQyxFQUFFLFlBQVksc0RBQXNELHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxZQUFZLDJDQUEyQyx1REFBQyxFQUFFLHVGQUFDLCtDQUErQyx1REFBQyxFQUFFLHVGQUFDLHlDQUF5Qyx1REFBQyxFQUFFLHVGQUFDLEVBQUUsaUJBQWlCLDBDQUEwQyx1REFBQyxFQUFFLHVGQUFDLHFEQUFxRCx1REFBQyxFQUFFLHVGQUFDLG9EQUFvRCx1REFBQyxFQUFFLHVGQUFDLDJDQUEyQyx1REFBQyxFQUFFLHVGQUFDLHdEQUF3RCx1REFBQyxFQUFFLHVGQUFDLHVEQUF1RCx1REFBQyxFQUFFLHVGQUFDLHNEQUFzRCx1REFBQyxFQUFFLHVGQUFDLGlDQUFpQyx1REFBQyxFQUFFLHVGQUFDLGtDQUFrQyx1REFBQyxFQUFFLHVGQUFDLDhDQUE4QyxRQUFRLGlCQUFpQix1RUFBdUUsZ0JBQWdCLDRCQUE0QixrQkFBa0Isc0NBQXNDLFNBQVMsa0RBQWtELGVBQWUsdUJBQXVCLFFBQVEsZUFBZSxjQUFjLFVBQVUsc0JBQXNCLFdBQVcsNENBQTRDLFNBQVMsaURBQWlELGFBQWEsU0FBUyxFQUFFLEdBQUcsRUFBRSxHQUFHLFFBQVEsZUFBZSxrREFBa0QsaUZBQUMsSUFBSSw2RUFBQyxFQUFFLGtCQUFrQixNQUFNLG9CQUFvQixvREFBb0QsMkRBQTJELDBCQUEwQixPQUFPLE9BQU8sR0FBRyxjQUFjLHdEQUF3RCxPQUFPLFFBQVEsc0lBQXNJLG9EQUFvRCxtQkFBbUIsYUFBYSw4REFBOEQsU0FBUyxHQUE2Qjs7Ozs7Ozs7Ozs7Ozs7OztBQ0pud2E7QUFDQTtBQUNBO0FBQ0E7QUFDOEUsUUFBUSxtQkFBbUIsdUZBQXVGLFdBQVcsNEJBQTRCLGVBQWUsOEJBQThCLHFFQUFDLHVCQUF1Qix1QkFBdUIsOENBQThDLHFDQUFxQyw0Q0FBNEMsbUNBQW1DLDZEQUFDLFNBQVMsaUdBQWlHLEtBQUssWUFBWSxrQ0FBa0MsMEVBQTBFLGlDQUFzRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKbnhCO0FBQ0E7QUFDQTtBQUNBO0FBQ2lxRCxZQUFZLFFBQVEsd0JBQXdCLHdCQUF3Qix3QkFBd0IsMkJBQTJCLHFCQUFxQixxQkFBcUIsZ0NBQWdDLEVBQUUsNElBQTRJLG9FQUFDLG9CQUFvQixtRkFBQyx3Q0FBd0MsbUZBQUMsMkdBQTJHLGlFQUFDLFlBQVksbUZBQUMsY0FBYyxtRkFBQyxjQUFjLG1GQUFDLGNBQWMsbUZBQUMsc0lBQXNJLGtEQUFrRCw2Q0FBNkMsNkZBQUMsa0dBQWtHLHlGQUFDLDhFQUE4RSwwRkFBQyxrQ0FBa0Msa0ZBQUMsa0RBQWtELDZGQUFDLGlEQUFpRCxnRkFBQywyQ0FBMkMsdUJBQXVCLGdDQUFnQyw0RUFBQyxnRkFBZ0YsK0dBQUMsQ0FBQywrRkFBQyxzQ0FBc0Msa0JBQWtCLGdDQUFnQyx3RUFBQyxtREFBbUQsa0JBQWtCLG1EQUFDLGtCQUFrQixVQUFVLG1EQUFDLFdBQVcsV0FBVyxtREFBQyxNQUFNLG1EQUFDLHlCQUF5QixtREFBQyxVQUFVLFlBQVksUUFBUSw4R0FBOEcsc0JBQXNCLFlBQVksOEJBQThCLG1DQUFtQyxzQ0FBc0Msc0JBQXNCLHFCQUFxQiw0QkFBNEIsdUNBQXVDLDhCQUE4QixhQUFhLDJFQUEyRSxxREFBcUQsNEVBQTRFLDBDQUEwQyx5RkFBeUYscUNBQXFDLGtFQUFrRSw2QkFBNkIsMkJBQTJCLCtCQUErQixHQUFHLHdEQUFDLGFBQWEsdUJBQXVCLG1EQUFDLDBCQUEwQiw0QkFBNEIsK0NBQStDLFlBQVksNEJBQTRCLG9DQUFvQywwSUFBMEksTUFBTSxtQ0FBbUMsd0JBQXdCLDZHQUE2Ryx3R0FBQywwRkFBMEYsT0FBTyxvR0FBQyxxQ0FBcUMsd0NBQXdDLGtDQUFrQyxjQUFjLDBDQUEwQyw0Q0FBNEMsR0FBRyxtSEFBbUgsNkJBQTZCLGlCQUFpQixpRUFBQywwQkFBMEIsMkJBQTJCLGFBQWEsWUFBWSxzRUFBc0UsNkJBQTZCLGtEQUFrRCxlQUFlLHdGQUF3RixNQUFNLGlDQUFpQyxnQkFBZ0IsdUJBQXVCLG9DQUFvQyx3R0FBQyxrQ0FBa0MsK0JBQStCLDRKQUE0SixrRkFBQywrQkFBK0IscURBQXFELGdFQUFnRSx1QkFBdUIsOEJBQThCLDJLQUEySyx5Q0FBeUMsaUZBQWlGLHlEQUFDLG9KQUFvSixnREFBZ0QscUdBQXFHLFdBQVcsTUFBTSxXQUFXLGVBQWUsbURBQUMsMkJBQTJCLG1CQUFtQixtREFBQyxNQUFNLFFBQVEsbURBQUMsTUFBTSw2QkFBNkIseUJBQXlCLGlCQUFpQixLQUFLLCtCQUErQixJQUFJLHdEQUFDLDBCQUEwQixRQUFRLG1EQUFDLElBQUkscURBQUMsY0FBYyxtREFBQyxJQUFJLDRCQUE0QixNQUFNLG1EQUFDLFdBQVcsbURBQUMsTUFBTSxhQUFhLFNBQVMsK0NBQStDLHFHQUFxRyxNQUFNLHdCQUF3QixPQUFPLG1EQUFDLE1BQU0sUUFBUSxXQUFXLGlCQUFpQixtQkFBbUIsT0FBTyxRQUFRLG1EQUFDLE1BQU0sZ0JBQWdCLGtCQUFrQixLQUFLLCtCQUErQixHQUFHLHdEQUFDLEtBQUssUUFBUSxtREFBQyxJQUFJLHFEQUFDLEtBQUssT0FBTyxtREFBQyxrQkFBa0IsaUJBQWlCLHdDQUF3QywwQ0FBMEMscUNBQXFDLG9EQUFvRCx3RUFBd0UsOEVBQUMsZUFBZSxxREFBQyxLQUFLLDRDQUE0QyxpRUFBaUUseURBQUMsOEVBQThFLDJCQUEyQixnREFBZ0QsYUFBYSx5QkFBeUIsMkRBQTJELG1EQUFDLDJDQUEyQyxpQkFBaUIsUUFBUSxtREFBQyxVQUFVLG1EQUFDLDZCQUE2QixrQkFBa0IsUUFBUSxxRUFBQyxNQUFNLG1EQUFDLFFBQVEsbURBQUMsTUFBTSw4QkFBOEIsV0FBVyxtREFBQyxRQUFRLG1EQUFDLFFBQVEsbURBQUMsTUFBTSxXQUFXLG1EQUFDLFlBQVksR0FBRywwRUFBQyxrQkFBa0IsbURBQUMsWUFBWSxHQUFHLDBFQUFDLGtCQUFrQixTQUFTLFNBQVMsOEJBQThCLGFBQWEsaUJBQWlCLDBEQUEwRCxtREFBQyxJQUFJLGlCQUFpQixZQUFZLG1EQUFDLE9BQU8sUUFBUSxtREFBQyxRQUFRLEdBQUcsbURBQUMsaUJBQWlCLFlBQVksU0FBUyxXQUFXLHlCQUF5QixnQkFBZ0IsWUFBWSxnQ0FBZ0Msd0NBQXdDLHFDQUFxQyxzQkFBc0IsbUZBQW1GLHVDQUF1Qyx5REFBQyxTQUFTLFlBQVksbURBQUMsa0JBQWtCLGlCQUFpQixrQkFBa0IsU0FBUyxrQkFBa0IsUUFBUSxtREFBQyxXQUFXLEdBQUcsbURBQUMsVUFBVSwwRUFBQyxVQUFVLEtBQUssTUFBTSxXQUFXLEdBQUcsbURBQUMsVUFBVSwwRUFBQyxVQUFVLEtBQUssT0FBTyxlQUFlLEtBQUssd0JBQXdCLGtCQUFrQixTQUFTLFFBQVEscUVBQUMsZ0NBQWdDLGtCQUFrQix3QkFBd0IsdUJBQXVCLEtBQUssT0FBTyxlQUFlLFNBQVMsK0JBQStCLDBEQUEwRCxtREFBQyxNQUFNLE9BQU8sYUFBYSxPQUFPLG1EQUFDLFdBQVcscUJBQXFCLHFDQUFxQyxnQ0FBZ0MsOEZBQThGLHdCQUF3QixpQ0FBaUMsMEVBQUMseUJBQXlCLDREQUFDLFNBQVMsNkJBQTZCLG9EQUFvRCxtREFBQyxDQUFDLHFEQUFDLDRCQUE0Qix3RkFBd0Ysc0JBQXNCLDZFQUE2RSw4QkFBOEIsMENBQTBDLG1EQUFDLENBQUMscURBQUMsa0JBQWtCLHVDQUF1Qyx5QkFBeUIsZ0pBQWdKLG1EQUFDLENBQUMscURBQUMsUUFBUSxtREFBQyxDQUFDLHFEQUFDLGtCQUFrQixxQkFBcUIsVUFBVSxxQkFBcUIsbURBQUMsTUFBTSwyQkFBMkIsUUFBUSxtREFBQyxDQUFDLHFEQUFDLE9BQU8sbURBQUMsTUFBTSxtREFBQyxjQUFjLG1EQUFDLEdBQUcscURBQUMsS0FBSyxtREFBQyxLQUFLLFFBQVEsbURBQUMsQ0FBQyxxREFBQyx1QkFBdUIsOEJBQThCLFFBQVEsbURBQUMsWUFBWSxxREFBQyx5QkFBeUIsbURBQUMseUJBQXlCLG1EQUFDLG1CQUFtQixtREFBQyxjQUFjLG1EQUFDLGNBQWMsbURBQUMsVUFBVSxtREFBQyxjQUFjLG1EQUFDLGdCQUFnQixtREFBQyxNQUFNLE1BQU0sbURBQUMsTUFBTSxXQUFXLFFBQVEsbURBQUMsaUJBQWlCLE1BQU0sbURBQUMsTUFBTSxtREFBQyxJQUFJLHFCQUFxQixVQUFVLGtCQUFrQixpRUFBaUUseUJBQXlCLHNLQUFzSyxlQUFlLGlCQUFpQixtREFBQyxlQUFlLDRDQUE0QywyREFBMkQsNEZBQTRGLHFFQUFxRSwrRUFBK0UsdUJBQXVCLG9CQUFvQixLQUFLLG1EQUFDLHNCQUFzQixrSEFBa0gscURBQXFELEtBQUssbURBQUMscUJBQXFCLGlFQUFpRSx3RkFBd0YsS0FBSyxtREFBQywrRUFBK0UsS0FBSyxtREFBQywrRUFBK0UsU0FBUyxhQUFhLHdDQUF3QyxPQUFPLG1EQUFDLENBQUMscURBQUMsb0JBQW9CLGtCQUFrQixPQUFPLG1EQUFDLDBCQUEwQixnQkFBZ0IsMkRBQTJELDZCQUE2Qix1QkFBdUIsMEJBQTBCLFFBQVEsbUZBQUMsS0FBSywwRUFBQyxLQUFLLG1GQUFDLEtBQUssbUZBQUMsS0FBSyxtRkFBQyxLQUFLLG1GQUFDLEtBQUssbUZBQUMsVUFBVSxpRUFBQyxJQUFJLG1GQUFDLE9BQU8sbUZBQUMsR0FBRyxtRkFBQyxHQUFHLG1GQUFDLEdBQUcsbUZBQUMsR0FBRyxtRkFBQyxHQUFHLG1GQUFDLEdBQUcsbUZBQUMsR0FBRyxtRkFBQyxPQUFPLG1GQUFDLE1BQU0sbUZBQUMsTUFBTSxtRkFBQyxNQUFNLG1GQUFDLEdBQXdCOzs7Ozs7Ozs7Ozs7Ozs7QUNKandZO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2QkFBNkIsd0hBQW1KOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKeEw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGFBQWEsa0lBQWtJLFNBQVMsR0FBRyxvQkFBb0IsTUFBTSxhQUFhLGlaQUFpWixTQUFTLEdBQUcsb0NBQW9JOzs7Ozs7Ozs7Ozs7Ozs7QUNKenVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxhQUFhLGdEQUFnRCxTQUFTLEdBQThCOzs7Ozs7Ozs7Ozs7Ozs7OztBQ0oxRztBQUNBO0FBQ0E7QUFDQTtBQUNnSSxRQUFRLGlCQUFpQix5REFBeUQsa0NBQWtDLG9FQUFDLGlCQUFpQixlQUFlLDREQUFDLHVCQUF1QiwwQ0FBMEMsVUFBVSxpQkFBaUIsNERBQUMscUNBQXFDLGdCQUFnQiwrREFBMEY7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0psZ0I7QUFDQTtBQUNBO0FBQ0E7QUFDNEYsc0NBQXNDLG9CQUFvQixrREFBa0Qsc0JBQXNCLElBQUksOERBQThELEdBQUcsK0JBQStCLFVBQVUsbUZBQUMsU0FBUyx3RUFBQyw0QkFBNEIsb0pBQW9KLE1BQU0sV0FBVyxHQUFHLHVEQUF1RCxLQUFLLGdCQUFnQix3SUFBd0ksZ0JBQWdCLGtCQUFrQiw4QkFBOEIsRUFBa0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9SZWFjdGl2ZVNldC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0Qm91bmRpbmdTcGhlcmUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9jb250cm9sbGVycy9JM1NPbkRlbWFuZENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2dsVEYvaW50ZXJuYWwvcmVzb3VyY2VVdGlscy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9DYWNoZWRNZXNoRGF0YS5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NDbGllbnRNYXRlcmlhbFV0aWwuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTQ2xpZW50Tm9kZUxvYWRlci5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NGcmFtZVRhc2suanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTSW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTTG9kSGFuZGxpbmcuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTTWF0ZXJpYWxVdGlsLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU05vZGUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTTm9kZUxvYWRlci5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NPdmVycmlkZXMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTU3RyZWFtRGF0YUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTVmlld3BvcnRRdWVyaWVzLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL1ZhbGlkYXRlZE5vZGUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvZW51bXMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9zdXBwb3J0L0kzU0xheWVyVmlldy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2NvcmUvbWF0ZXJpYWwvUmVuZGVyVGV4dHVyZS5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvbGF5ZXJzL3N1cHBvcnQvcG9wdXBVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3RyYWNrQWNjZXNzIGFzIGV9ZnJvbVwiLi9hY2Nlc3NvclN1cHBvcnQvdHJhY2tpbmcuanNcIjtpbXBvcnR7U2ltcGxlT2JzZXJ2YWJsZSBhcyBzfWZyb21cIi4vYWNjZXNzb3JTdXBwb3J0L3RyYWNraW5nL1NpbXBsZU9ic2VydmFibGUuanNcIjtjbGFzcyB0e2NvbnN0cnVjdG9yKGUpe3RoaXMuX29ic2VydmFibGU9bmV3IHMsdGhpcy5fc2V0PW5ldyBTZXQoZSl9Z2V0IHNpemUoKXtyZXR1cm4gZSh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9zZXQuc2l6ZX1hZGQoZSl7Y29uc3Qgcz10aGlzLl9zZXQuc2l6ZTtyZXR1cm4gdGhpcy5fc2V0LmFkZChlKSx0aGlzLl9zZXQuc2l6ZSE9PXMmJnRoaXMuX29ic2VydmFibGUubm90aWZ5KCksdGhpc31jbGVhcigpe3RoaXMuX3NldC5zaXplPjAmJih0aGlzLl9zZXQuY2xlYXIoKSx0aGlzLl9vYnNlcnZhYmxlLm5vdGlmeSgpKX1kZWxldGUoZSl7Y29uc3Qgcz10aGlzLl9zZXQuZGVsZXRlKGUpO3JldHVybiBzJiZ0aGlzLl9vYnNlcnZhYmxlLm5vdGlmeSgpLHN9ZW50cmllcygpe3JldHVybiBlKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX3NldC5lbnRyaWVzKCl9Zm9yRWFjaChzLHQpe2UodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fc2V0LmZvckVhY2goKChlLHIpPT5zLmNhbGwodCxlLHIsdGhpcykpLHQpfWhhcyhzKXtyZXR1cm4gZSh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9zZXQuaGFzKHMpfWtleXMoKXtyZXR1cm4gZSh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9zZXQua2V5cygpfXZhbHVlcygpe3JldHVybiBlKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX3NldC52YWx1ZXMoKX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiBlKHRoaXMuX29ic2VydmFibGUpLHRoaXMuX3NldFtTeW1ib2wuaXRlcmF0b3JdKCl9W1N5bWJvbC5kaXNwb3NlXSgpe3RoaXMuX29ic2VydmFibGUuZGVzdHJveSgpfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIHRoaXMuX3NldFtTeW1ib2wudG9TdHJpbmdUYWddfX1leHBvcnR7dCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZGVnMnJhZCBhcyBlfWZyb21cIi4uLy4uL2NvcmUvbWF0aFV0aWxzLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyByfWZyb21cIi4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjM2Y2NC5qc1wiO2ltcG9ydHtnZXRQcm9qZWN0b3JDbGFzc2lmaWNhdGlvbiBhcyB0LGNvcHkzIGFzIG4sUHJvamVjdGlvbklEIGFzIG8scHJvamVjdGlvblRhYmxlIGFzIHMsd2dzODRUb1dlYk1lcmNhdG9yIGFzIGl9ZnJvbVwiLi9wcm9qZWN0b3JzLmpzXCI7aW1wb3J0e2VhcnRoIGFzIGN9ZnJvbVwiLi4vc3VwcG9ydC9FbGxpcHNvaWQuanNcIjtmdW5jdGlvbiBsKGUscixsLGYpe2lmKG51bGw9PXJ8fG51bGw9PWYpcmV0dXJuITE7Y29uc3QgcD10KHIsZik7aWYobnVsbD09cD8ucHJvamVjdG9yKXJldHVybiExO2lmKHAucHJvamVjdG9yPT09bilyZXR1cm4gbFswXT1lWzBdLGxbMV09ZVsxXSxsWzJdPWVbMl0sbFszXT1lWzNdLCEwO2NvbnN0e3NvdXJjZTpFLGRlc3Q6bSxwcm9qZWN0b3I6Un09cDtpZihtLnNwYXRpYWxSZWZlcmVuY2VJZD09PW8uV0VCX01FUkNBVE9SKXtjb25zdCByPXNbRS5zcGF0aWFsUmVmZXJlbmNlSWRdW28uV0dTODRdO3JldHVybiBudWxsIT1yJiYocihlLDAsdSwwKSxpKHUsMCxsLDApLGxbM109YSh1WzFdLGVbMl0sZVszXSxjLnJhZGl1cyksITApfWlmKEUuc3BhdGlhbFJlZmVyZW5jZUlkIT09by5XR1M4NCYmRS5zcGF0aWFsUmVmZXJlbmNlSWQhPT1vLkNHQ1MyMDAwfHxtLnNwYXRpYWxSZWZlcmVuY2VJZCE9PW8uUExBVEVfQ0FSUkVFKXtSKGUsMCxsLDApO2NvbnN0IHI9RS5tZXRlcnNQZXJVbml0Pz8xLHQ9bS5tZXRlcnNQZXJVbml0Pz8xO2xbM109ZVszXSpyL3R9ZWxzZXtjb25zdCByPXNbRS5zcGF0aWFsUmVmZXJlbmNlSWRdW28uU1BIRVJJQ0FMX0VDRUZdLHQ9c1tvLlNQSEVSSUNBTF9FQ0VGXVtvLlBMQVRFX0NBUlJFRV07bGV0IG49ZVszXTtudWxsIT1yJiZudWxsIT10JiYobj1hKGVbMV0sZVsyXSxlWzNdLGMucmFkaXVzKSksUihlLDAsbCwwKSxsWzNdPW59cmV0dXJuITB9ZnVuY3Rpb24gYShlLHIsdCxuKXtjb25zdCBvPW4rcjtpZihvPG4vMnx8dD5vKXJldHVybiBOdW1iZXIuTUFYX1ZBTFVFO2NvbnN0IHM9TWF0aC5hYnMoZiplKStNYXRoLmFzaW4odC9vKTtyZXR1cm4gcz49TWF0aC5QSS8yP051bWJlci5NQVhfVkFMVUU6dC9NYXRoLmNvcyhzKX1jb25zdCB1PXIoKSxmPWUoMSk7ZXhwb3J0e2wgYXMgcHJvamVjdEJvdW5kaW5nU3BoZXJlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vLi4vLi4vY29yZS9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uL2NvcmUvUHJvbWlzZS5qc1wiO2ltcG9ydHtpc0Fib3J0RXJyb3IgYXMgYX1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHt3YXRjaCBhcyBkLGluaXRpYWwgYXMgbyxzeW5jIGFzIG59ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGx9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9SYW5kb21MQ0cuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgaH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e3Byb2plY3RCb3VuZGluZ1JlY3QgYXMgdX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIF99ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtQcm9taXNlUXVldWUgYXMgY31mcm9tXCIuLi8uLi9zdXBwb3J0L1Byb21pc2VRdWV1ZS5qc1wiO2ltcG9ydHt2aWV3aW5nTW9kZUZyb21TdHJpbmcgYXMgcH1mcm9tXCIuLi8uLi8uLi92aWV3cy9WaWV3aW5nTW9kZS5qc1wiO2ltcG9ydHtJM1NDbGllbnROb2RlTG9hZGVyIGFzIGd9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NDbGllbnROb2RlTG9hZGVyLmpzXCI7aW1wb3J0e2FkZENhbGxiYWNrIGFzIG19ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NGcmFtZVRhc2suanNcIjtpbXBvcnR7STNTSW5kZXggYXMgeX1mcm9tXCIuLi8uLi8uLi92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0luZGV4LmpzXCI7aW1wb3J0IGYgZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NMb2RIYW5kbGluZy5qc1wiO2ltcG9ydHtOb2RlU3RhdGUgYXMgeCxDYWNoZVN0YXRlIGFzIE59ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NOb2RlLmpzXCI7aW1wb3J0IGIgZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NOb2RlTG9hZGVyLmpzXCI7aW1wb3J0e0kzU1N0cmVhbURhdGFDb250cm9sbGVyIGFzIHd9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NTdHJlYW1EYXRhQ29udHJvbGxlci5qc1wiO2ltcG9ydHtnZXRWZXJ0ZXhDcnMgYXMgdixnZXRJbmRleENycyBhcyBDLGZpbmRJbnRlcnNlY3RpbmdOb2RlcyBhcyBMfWZyb21cIi4uLy4uLy4uL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTVXRpbC5qc1wiO2ltcG9ydCBEIGZyb21cIi4uLy4uLy4uL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTVmlld3BvcnRRdWVyaWVzLmpzXCI7aW1wb3J0e0ZhZGVEaXJlY3Rpb24gYXMgVn1mcm9tXCIuLi8uLi8uLi92aWV3cy8zZC9sYXllcnMvc3VwcG9ydC9JM1NMYXllclZpZXcuanNcIjtpbXBvcnR7dG9Cb3VuZGluZ1JlY3QgYXMgSX1mcm9tXCIuLi8uLi8uLi92aWV3cy8zZC9zdXBwb3J0L2V4dGVudFV0aWxzLmpzXCI7aW1wb3J0e0NsaWVudFR5cGUgYXMgQSxtYXhEb3dubG9hZFNsb3RzIGFzIFN9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2Qvc3VwcG9ydC9pbmRleC5qc1wiO2ltcG9ydHttaW5RdWFsaXR5IGFzIE19ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2Qvc3VwcG9ydC9NZW1vcnlDb250cm9sbGVyLmpzXCI7aW1wb3J0e25vQnVkZ2V0IGFzIEZ9ZnJvbVwiLi4vLi4vLi4vdmlld3Mvc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtjb25zdCBPPTEwMCxQPTIsVT0xZTQscT0xZS00LEc9MS4yLFE9NTAwLGo9MS41O2xldCBUPWNsYXNzIGV4dGVuZHMoci5Fc3JpUHJvbWlzZU1peGluKHQpKXtnZXQgaXNNZXNoUHlyYW1pZCgpe3JldHVyblwibWVzaC1weXJhbWlkc1wiPT09dGhpcy5sYXllci5wcm9maWxlfHxcIk1lc2hQeXJhbWlkXCI9PT10aGlzLmxheWVyLnN0b3JlPy5sb2RUeXBlfWdldCBpc0dyYXBoaWNzM0QoKXtyZXR1cm5cInBvaW50c1wiPT09dGhpcy5sYXllci5wcm9maWxlfWdldCB1c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcygpe3JldHVybiF0aGlzLmlzTWVzaFB5cmFtaWQmJihudWxsPT10aGlzLmxheWVyLnByaW9yaXR5fHxcIkhpZ2hcIj09PXRoaXMubGF5ZXIucHJpb3JpdHkpfWdldCBpbmRleFN0cmVhbUNvbnRyb2xsZXIoKXtjb25zdCBlPXRoaXMubGF5ZXJWaWV3LnZpZXcucmVzb3VyY2VDb250cm9sbGVyLmNyZWF0ZVN0cmVhbURhdGFSZXF1ZXN0ZXIoQS5JM1NfSU5ERVgpO3JldHVybiBuZXcgdyhlLHRoaXMubGF5ZXIuY3VzdG9tUGFyYW1ldGVycyx0aGlzLmxheWVyLmFwaUtleSl9Z2V0IGRhdGFTdHJlYW1Db250cm9sbGVyKCl7Y29uc3QgZT10aGlzLmxheWVyVmlldy52aWV3LnJlc291cmNlQ29udHJvbGxlci5jcmVhdGVTdHJlYW1EYXRhUmVxdWVzdGVyKEEuSTNTX0RBVEEpO3JldHVybiBuZXcgdyhlLHRoaXMubGF5ZXIuY3VzdG9tUGFyYW1ldGVycyx0aGlzLmxheWVyLmFwaUtleSl9Z2V0IGNyc1ZlcnRleCgpe3JldHVybiB2KHRoaXMubGF5ZXIpfWdldCBjcnNJbmRleCgpe3JldHVybiBDKHRoaXMubGF5ZXIpfWdldCBsYXllcigpe3JldHVybiB0aGlzLmxheWVyVmlldy5pM3NsYXllcn1nZXQgcnVubmluZygpe3JldHVybiB0aGlzLnVwZGF0aW5nfWdldCByb290Tm9kZVZpc2libGUoKXtpZih0aGlzLl9pbmRleCl7Y29uc3QgZT10aGlzLl9pbmRleC5yb290Tm9kZTtpZihlKXJldHVybiB0aGlzLl91cGRhdGVWaWV3RGF0YSgpLHRoaXMuX2luZGV4LmlzTm9kZVZpc2libGUoZS5pbmRleCl9cmV0dXJuITB9Z2V0IGluZGV4KCl7cmV0dXJuIHRoaXMuX2luZGV4fWdldCByZXF1aXJlZEF0dHJpYnV0ZXMoKXtyZXR1cm4gdGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzfWNvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZmVhdHVyZVRhcmdldD01ZTQsdGhpcy5maXhlZEZlYXR1cmVUYXJnZXQ9ITEsdGhpcy51cGRhdGluZz0hMCx0aGlzLnVwZGF0aW5nUHJvZ3Jlc3M9MSx0aGlzLmxlYXZlc1JlYWNoZWQ9ITEsdGhpcy53b3JrZXI9bnVsbCx0aGlzLl9mZWF0dXJlTE9EPTEsdGhpcy5fc3RhYmxlRmVhdHVyZUxPRD0hMSx0aGlzLl9pc0lkbGU9ITEsdGhpcy5fY2FtZXJhRGlydHk9ITAsdGhpcy5faW52aXNpYmxlRGlydHk9ITEsdGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzPW51bGwsdGhpcy5fbmV3TG9hZGluZ05vZGVzPW5ldyBzKHtkZWFsbG9jYXRvcjpudWxsfSksdGhpcy5fbW9kaWZpY2F0aW9uc05vZGVGaWx0ZXJpbmdBcnJheT1uZXcgcyx0aGlzLl9kb3dubG9hZGluZ0NvdW50PTAsdGhpcy5fbG9hZGluZ05vZGVzPW5ldyBNYXAsdGhpcy5fdXBkYXRpbmdOb2Rlcz1uZXcgTWFwLHRoaXMuX3Byb2dyZXNzTWF4TnVtTm9kZXM9MSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXM9bmV3IEFycmF5LHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlc0RpcnR5PSEwLHRoaXMuX3VwZGF0ZXNEaXNhYmxlZD0hMSx0aGlzLmRpc2FibGVJREJDYWNoZT0hMSx0aGlzLl9kaXNhYmxlTWVtQ2FjaGU9ITEsdGhpcy5fcmVzdGFydE5vZGVMb2FkaW5nPSExLHRoaXMuX2ZpZWxkcz1udWxsLHRoaXMuX2F0dHJpYnV0ZVN0b3JhZ2VJbmZvPW51bGwsdGhpcy5faWRsZVF1ZXVlPW5ldyBjLHRoaXMuX2VsZXZhdGlvblVwZGF0ZU5vZGVzPW5ldyBzKHtkZWFsbG9jYXRvcjpudWxsfSksdGhpcy5fZXJyb3JDb3VudD0wfWluaXRpYWxpemUoKXtjb25zdHtsYXllclZpZXc6ZSxsYXllcjp0fT10aGlzO3RoaXMuX2Rpc2FibGVNZW1DYWNoZT0hZS5sb2FkQ2FjaGVkR1BVRGF0YXx8IWUuYWRkQ2FjaGVkR1BVRGF0YSx0aGlzLl9sb2RIYW5kbGluZz1uZXcgZihlKSx0aGlzLl9kZWZhdWx0R2VvbWV0cnlTY2hlbWE9dC5zdG9yZS5kZWZhdWx0R2VvbWV0cnlTY2hlbWEsdGhpcy5kaXNhYmxlSURCQ2FjaGU9ISFoYXMoXCJkaXNhYmxlLWZlYXR1cmU6aWRiLWNhY2hlXCIpLFwiZmllbGRzXCJpbiB0JiYodGhpcy5fZmllbGRzPXQuZmllbGRzLHRoaXMuX2F0dHJpYnV0ZVN0b3JhZ2VJbmZvPXQuYXR0cmlidXRlU3RvcmFnZUluZm8pLHRoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZShQcm9taXNlLmFsbChbdC5pbmRleEluZm8sdC53aGVuKCksZS53aGVuKCldKS50aGVuKCgoW3NdKT0+e2lmKHRoaXMuZGVzdHJveWVkfHwhZXx8ZS5kZXN0cm95ZWR8fCFzKXJldHVybjtjb25zdHt2aWV3OnIsY2xpZW50R2VvbWV0cnk6YX09ZSx7cmVzb3VyY2VDb250cm9sbGVyOmx9PXI7aWYodGhpcy5fc2V0Q2xpcHBpbmdBcmVhKHIuY2xpcHBpbmdBcmVhKSx0aGlzLmFkZEhhbmRsZXMoW2QoKCgpPT5yPy5wb2ludHNPZkludGVyZXN0Py5mb2N1cz8ucmVuZGVyTG9jYXRpb24pLChlPT50aGlzLl9wb2ludE9mSW50ZXJlc3RDaGFuZ2VkKGUpKSxvKSxkKCgoKT0+ci5xdWFsaXR5KSwoKCk9PnRoaXMuX3NldENhbWVyYURpcnR5KCkpLG4pLGQoKCgpPT5lLmNvbnRlbnRWaXNpYmxlKSwoZT0+e2NvbnN0IHQ9ZT8oKT0+dGhpcy5fdXBkYXRlSWRsZVN0YXRlKCEwKTooKT0+dGhpcy5fdXBkYXRlVmlld0RhdGEoKSxpPWU/KCk9PnRoaXMuX3VwZGF0ZUlkbGVTdGF0ZSghMSk6KCk9Pnt9O2UmJm51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5pbnZhbGlkYXRlQWxsRWxldmF0aW9uUmFuZ2VzKCksdGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzPyhlfHx0aGlzLmNhbmNlbE5vZGVMb2FkaW5nKCksdGhpcy5yZXN0YXJ0Tm9kZUxvYWRpbmcoKSx0aGlzLl9pZGxlU3RhdGVDYWxsYmFja3MuaWRsZUJlZ2luPXQsdGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzLmlkbGVFbmQ9aSk6dGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzPWwuc2NoZWR1bGVyLnJlZ2lzdGVySWRsZVN0YXRlQ2FsbGJhY2tzKHQsaSl9KSxvKSxtKGUudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIuc2NoZWR1bGVyLHRoaXMpLGQoKCgpPT5bdGhpcy5mZWF0dXJlVGFyZ2V0LHRoaXMuZml4ZWRGZWF0dXJlVGFyZ2V0XSksKCgpPT57dGhpcy5fc2V0Q2FtZXJhRGlydHkoKSx0aGlzLl9zdGFibGVGZWF0dXJlTE9EPSExfSkpLGQoKCgpPT5yLnN0YXRlPy5jb250ZW50Q2FtZXJhKSwoKCk9PnRoaXMuX3NldENhbWVyYURpcnR5KCkpKSxkKCgoKT0+dC5lbGV2YXRpb25JbmZvKSwoZT0+dGhpcy5fZWxldmF0aW9uSW5mb0NoYW5nZWQoZSkpKSxkKCgoKT0+ZS5sb2RGYWN0b3IpLCgoKT0+dGhpcy5fc2V0Q2FtZXJhRGlydHkoKSkpLGQoKCgpPT5lLmF2YWlsYWJsZUZpZWxkcyksKCgpPT50aGlzLl9yZXF1aXJlZEZpZWxkc0NoYW5nZSgpKSksZCgoKCk9PmUuaG9sZUZpbGxpbmcpLChlPT5udWxsIT10aGlzLl9pbmRleCYmKHRoaXMuX2luZGV4LmhvbGVGaWxsaW5nPWUpKSldKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXM9bmV3IEQodGhpcy5jcnNJbmRleCxyLnJlbmRlckNvb3Jkc0hlbHBlcixyLnN0YXRlLmNvbnRlbnRDYW1lcmEsIXIuc3RhdGUuZml4ZWRDb250ZW50Q2FtZXJhfHx0aGlzLmlzR3JhcGhpY3MzRCx0aGlzLl9jbGlwcGluZ0FyZWEsdGhpcy5pc01lc2hQeXJhbWlkP3IuYmFzZW1hcFRlcnJhaW46ci5lbGV2YXRpb25Qcm92aWRlcixwKHIudmlld2luZ01vZGUpLHRoaXMubGF5ZXIuZWxldmF0aW9uSW5mbyx7cHJvZ3Jlc3NpdmVMb2FkRmFjdG9yOnRoaXMuX2dldFByb2dyZXNzaXZlTG9hZEZhY3RvcigpLHNjcmVlbnNwYWNlRXJyb3JCaWFzOnRoaXMuX2xvZCxhbmdsZURlcGVuZGVudExvRDp0aGlzLl9sb2Q8LjV9KSx0aGlzLl9jbGllbnROb2RlTG9hZGVyPW5ldyBnKHRoaXMubGF5ZXIudWlkLHtpbmRleFNSOnRoaXMuY3JzSW5kZXgsdmVydGV4U1I6dGhpcy5jcnNWZXJ0ZXgscmVuZGVyU1I6ci5yZW5kZXJDb29yZHNIZWxwZXIuc3BhdGlhbFJlZmVyZW5jZX0sci5yZXNvdXJjZUNvbnRyb2xsZXIubWVtb3J5Q29udHJvbGxlcix0aGlzLndvcmtlciksdGhpcy5faW5kZXg9bmV3IHkocChyLnZpZXdpbmdNb2RlKSx0LHMsdGhpcy5pbmRleFN0cmVhbUNvbnRyb2xsZXIsdGhpcy5fY2xpZW50Tm9kZUxvYWRlcix0aGlzLl92aWV3cG9ydFF1ZXJpZXMsaS5nZXRMb2dnZXIodGhpcyksZS5ob2xlRmlsbGluZywodD0+ZS5pc05vZGVMb2FkZWQodCkpLCh0PT5lLmlzTm9kZVJlbG9hZGluZyh0KSksKGU9PnRoaXMuX3Nob3VsZExvYWROb2RlKGUpKSwoZT0+dGhpcy5fZW5hYmxlRnJvbUdQVUNhY2hlKGUseC5MZWFmKSksKGU9PnRoaXMuX25lZWRzVXBkYXRlKGUpKSwoKCk9PiF0aGlzLmluZGV4U3RyZWFtQ29udHJvbGxlci5idXN5KSwodD0+ZS5jb21wdXRlVmlzaWJpbGl0eU9iYj8uKHQpPz9udWxsKSxlPy5jb21wdXRlTm9kZUZpbHRlcmluZz90PT5lLmNvbXB1dGVOb2RlRmlsdGVyaW5nKHQpOnZvaWQgMCksdGhpcy5faW5kZXgudXBkYXRlRWxldmF0aW9uSW5mbyh0aGlzLmxheWVyLmVsZXZhdGlvbkluZm8sdGhpcy5pc01lc2hQeXJhbWlkfHx0aGlzLmlzR3JhcGhpY3MzRCksdGhpcy5faW5kZXguaW1Nb2RpZmljYXRpb25zQ2hhbmdlZCghIWUuaGFzTW9kaWZpY2F0aW9ucyksdGhpcy5faW5kZXgubGF5ZXJGaWx0ZXJDaGFuZ2VkKCEhZS5oYXNHZW9tZXRyeUZpbHRlciksbnVsbCE9YSl7Zm9yKGNvbnN0IGUgb2YgYSl0aGlzLl9hZGRNZXNoKGUubWVzaCxlLm9pZCk7dGhpcy5hZGRIYW5kbGVzKGEub24oXCJjaGFuZ2VcIiwoZT0+e2Zvcihjb25zdCB0IG9mIGUucmVtb3ZlZCl0aGlzLl9yZW1vdmVNZXNoKHQub2lkKTtmb3IoY29uc3QgdCBvZiBlLmFkZGVkKXRoaXMuX2FkZE1lc2godC5tZXNoLHQub2lkKX0pKSl9dGhpcy5fc3RhcnROb2RlTG9hZGluZygpfSkpKX11cGRhdGVOb2RlTW9kaWZpY2F0aW9uU3RhdHVzKGUpe2NvbnN0IHQ9dGhpcy5faW5kZXgsaT10aGlzLmxheWVyVmlldztudWxsIT10JiZpPy51cGRhdGVOb2RlTW9kaWZpY2F0aW9uU3RhdHVzJiYodGhpcy5fbW9kaWZpY2F0aW9uc05vZGVGaWx0ZXJpbmdBcnJheS5jbGVhcigpLGUuZm9yQWxsKChlPT57Y29uc3QgaT10LmdldE5vZGUoZSk7bnVsbCE9aSYmdGhpcy5fbW9kaWZpY2F0aW9uc05vZGVGaWx0ZXJpbmdBcnJheS5wdXNoKGkpfSkpLGkudXBkYXRlTm9kZU1vZGlmaWNhdGlvblN0YXR1cyh0aGlzLl9tb2RpZmljYXRpb25zTm9kZUZpbHRlcmluZ0FycmF5KSx0aGlzLl9pbnZpc2libGVEaXJ0eT0hMCl9ZGVzdHJveSgpe3RoaXMuY2FuY2VsTm9kZUxvYWRpbmcoKSx0aGlzLl9pZGxlU3RhdGVDYWxsYmFja3MmJih0aGlzLl9pc0lkbGU9ITEsdGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzLnJlbW92ZSgpLHRoaXMuX2lkbGVTdGF0ZUNhbGxiYWNrcz1udWxsKSx0aGlzLl9ub2RlTG9hZGVyPW51bGwsay5wcnVuZSgpfWdldCB2aWV3cG9ydFF1ZXJpZXMoKXtyZXR1cm4gdGhpcy5fdmlld3BvcnRRdWVyaWVzfV9nZXRSZXF1aXJlZEF0dHJpYnV0ZXMoKXtpZihudWxsPT10aGlzLl9hdHRyaWJ1dGVTdG9yYWdlSW5mb3x8IXRoaXMuX2ZpZWxkc3x8IXRoaXMubGF5ZXJWaWV3LmF2YWlsYWJsZUZpZWxkcylyZXR1cm5bXTtjb25zdCBlPXRoaXMuX2F0dHJpYnV0ZVN0b3JhZ2VJbmZvLHQ9dGhpcy5fZmllbGRzLGk9dGhpcy5sYXllci5vYmplY3RJZEZpZWxkO3JldHVybiB0aGlzLmxheWVyVmlldy5hdmFpbGFibGVGaWVsZHMubWFwKChpPT57Y29uc3Qgcz1SKGUsaSkscj1SKHQsaSk7cmV0dXJuIHM+PTAmJnI+PTA/e2luZGV4OnMsbmFtZTp0W3JdLm5hbWUsZmllbGQ6dFtyXSxhdHRyaWJ1dGVTdG9yYWdlSW5mbzplW3NdfTpudWxsfSkpLmZpbHRlcigoZT0+bnVsbCE9ZSYmZS5uYW1lIT09aSkpfV9yZXF1aXJlZEZpZWxkc0NoYW5nZSgpe2NvbnN0IGU9dGhpcy5fZ2V0UmVxdWlyZWRBdHRyaWJ1dGVzKCk7RSh0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsZSl8fCh0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXM9ZSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXNEaXJ0eT0hMSx0aGlzLnJlc3RhcnROb2RlTG9hZGluZygpKX1yZXF1ZXN0VXBkYXRlKCl7dGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzRGlydHk9ITAsdGhpcy5yZXN0YXJ0Tm9kZUxvYWRpbmcoKX1fc2V0Q2xpcHBpbmdBcmVhKGUpe2NvbnN0IHQ9XygpO0koZSx0LHRoaXMubGF5ZXJWaWV3LnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSk/dGhpcy5fY2xpcHBpbmdBcmVhPXQ6dGhpcy5fY2xpcHBpbmdBcmVhPW51bGx9X3BvaW50T2ZJbnRlcmVzdENoYW5nZWQoZSl7bnVsbCE9dGhpcy5fdmlld3BvcnRRdWVyaWVzJiYodGhpcy5fdmlld3BvcnRRdWVyaWVzLnNldFBvaW50T2ZJbnRlcmVzdChlKSxudWxsIT10aGlzLl9pbmRleCYmKHRoaXMuX2luZGV4LnByb2dyZXNzaXZlTG9hZFBlbmFsdHk9SC5kaXN0YW5jZVBlbmFsdHkqdGhpcy5fdmlld3BvcnRRdWVyaWVzLmRpc3RDYW1lcmFUb1BPSSgpLHRoaXMuX2luZGV4LnJlcXVlc3RVcGRhdGUoKSkpfXVwZGF0ZUNsaXBwaW5nQXJlYShlKXt0aGlzLl9zZXRDbGlwcGluZ0FyZWEoZSksbnVsbCE9dGhpcy5fdmlld3BvcnRRdWVyaWVzJiZudWxsIT10aGlzLl9pbmRleCYmKHRoaXMuX3ZpZXdwb3J0UXVlcmllcy51cGRhdGVDbGlwcGluZ0FyZWEodGhpcy5fY2xpcHBpbmdBcmVhKSx0aGlzLl9pbmRleC5pbnZhbGlkYXRlVmlzaWJpbGl0eUNhY2hlKCkpLHRoaXMuX3NldENhbWVyYURpcnR5KCl9X3NldENhbWVyYURpcnR5KCl7dGhpcy5fY2FtZXJhRGlydHk9ITAsdGhpcy5fbG9kSGFuZGxpbmcuc2V0TG9kR2xvYmFsRGlydHkoKSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCl9X2FkZE1lc2goZSx0KXtpZihudWxsPT10aGlzLl9pbmRleClyZXR1cm47Y29uc3QgaT10aGlzLl9jbGllbnROb2RlTG9hZGVyLmNyZWF0ZU1lc2hOb2RlSW5mbyhlLHQpLHM9dGhpcy5faW5kZXguYWRkQ2xpZW50Tm9kZVRvSW5kZXgoaS5pZCxpLm1icyk7dGhpcy5fY2xpZW50Tm9kZUxvYWRlci5hZGRNZXNoTm9kZShzLGkpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKSx0aGlzLm5vdGlmeUNoYW5nZShcInJvb3ROb2RlVmlzaWJsZVwiKX1fcmVtb3ZlTWVzaChlKXtjb25zdCB0PXRoaXMuX2NsaWVudE5vZGVMb2FkZXIuZ2V0TWVzaE5vZGVJbmRleChlKTtpZihudWxsIT10KXtpZihudWxsPT10aGlzLl9pbmRleCl0aHJvdyBuZXcgRXJyb3IoXCJkZWxheWVkIHJlbW92YWwgb2YgY2xpZW50IHNpZGUgaTNzIG5vZGUgZ2VvbWV0cnkgbm90IHN1cHBvcnRlZCB5ZXQuXCIpO3tjb25zdCBlPShlLHQpPT57dGhpcy5sYXllclZpZXcucmVtb3ZlTm9kZSh0KSx0aGlzLl9jbGllbnROb2RlTG9hZGVyLnJlbW92ZU5vZGUoZSksdGhpcy5sYXllclZpZXcuZGVsZXRlQ2FjaGVkTm9kZURhdGEmJm51bGwhPWUmJnRoaXMubGF5ZXJWaWV3LmRlbGV0ZUNhY2hlZE5vZGVEYXRhKGUpLHRoaXMubGF5ZXJWaWV3LmRlbGV0ZUNhY2hlZEdQVURhdGE/Lih0aGlzLmxheWVyVmlldy5sb2FkQ2FjaGVkR1BVRGF0YT8uKHQpKX0saT0oZSx0LGkpPT57dGhpcy5fY2xpZW50Tm9kZUxvYWRlci51cGRhdGVOb2RlSW5kZXgoZSx0LGkpLHRoaXMubGF5ZXJWaWV3LnVwZGF0ZU5vZGVJbmRleCYmdGhpcy5sYXllclZpZXcudXBkYXRlTm9kZUluZGV4KHQsaSl9O3RoaXMuX2luZGV4LnJlbW92ZUNsaWVudE5vZGVGcm9tSW5kZXgodCxlLGkpLHRoaXMubm90aWZ5Q2hhbmdlKFwicm9vdE5vZGVWaXNpYmxlXCIpfX19dXBkYXRlRWxldmF0aW9uQ2hhbmdlZChlLHQpe2NvbnN0IGk9dGhpcy5faW5kZXg7aWYobnVsbD09aT8ucm9vdE5vZGV8fG51bGw9PXQpcmV0dXJuIG51bGw7dGhpcy5jcnNJbmRleC5lcXVhbHModCl8fCh1KGUsdCxCLHRoaXMuY3JzSW5kZXgpLGU9Qik7Y29uc3Qgcz10aGlzLl9lbGV2YXRpb25VcGRhdGVOb2RlcztyZXR1cm4gcy5jbGVhcigpLEwoZSxpLnJvb3ROb2RlLGksKGU9PnMucHVzaChlLmluZGV4KSkpLHMubGVuZ3RoJiYocy5mb3JBbGwoKGU9PmkudXBkYXRlRWxldmF0aW9uQ2hhbmdlZChlKSkpLHRoaXMuX3NldENhbWVyYURpcnR5KCkpLHN9cmVtb3ZlQWxsR2VvbWV0cnlPYmJzKCl7bnVsbCE9dGhpcy5faW5kZXgmJnRoaXMuX2luZGV4LnJlbW92ZUFsbEdlb21ldHJ5T2JicygpfWdldFJlbmRlck1icyhlKXtyZXR1cm4gbnVsbCE9dGhpcy5fdmlld3BvcnRRdWVyaWVzP3RoaXMuX3ZpZXdwb3J0UXVlcmllcy5nZXRTZXJ2aWNlTWJzSW5SZW5kZXJTUihlKTpudWxsfV9lbGV2YXRpb25JbmZvQ2hhbmdlZChlKXtudWxsIT10aGlzLl9pbmRleCYmKHRoaXMuX2luZGV4LnVwZGF0ZUVsZXZhdGlvbkluZm8oZSx0aGlzLmlzTWVzaFB5cmFtaWR8fHRoaXMuaXNHcmFwaGljczNEKSx0aGlzLl9zZXRDYW1lcmFEaXJ0eSgpKX1yZXN0YXJ0Tm9kZUxvYWRpbmcoKXt0aGlzLl9yZXN0YXJ0Tm9kZUxvYWRpbmc9ITAsdGhpcy5jYW5jZWxOb2RlTG9hZGluZygpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKX1zY2hlZHVsZShlLHQpe3JldHVybiB0aGlzLl9pZGxlUXVldWUucHVzaChlLHQpfXJlc2NoZWR1bGUoZSx0KXtyZXR1cm4gdGhpcy5faWRsZVF1ZXVlLnVuc2hpZnQoZSx0KX1nZXQgX2lzSW50ZWdyYXRlZE1lc2goKXtyZXR1cm5cImludGVncmF0ZWQtbWVzaFwiPT09dGhpcy5sYXllci50eXBlfWdldCB1bmxvYWRlZE1lbW9yeUVzdGltYXRlKCl7cmV0dXJuIG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLmxheWVyVmlldy5jb250ZW50VmlzaWJsZT90aGlzLl9pbmRleC51bmxvYWRlZE1lbW9yeUVzdGltYXRlKnRoaXMuX2xvZERyb3BGYWN0b3I6MH1hc3luYyBfbG9hZE5vZGVEYXRhKGUsdCl7cmV0dXJuIGUuaW5kZXg8MD90aGlzLl9jbGllbnROb2RlTG9hZGVyLmxvYWROb2RlRGF0YShlLmlkLHQpOnRoaXMuX25vZGVMb2FkZXIubG9hZE5vZGVEYXRhKGUsdCl9YXN5bmMgX2xvYWRBdHRyaWJ1dGVzKGUsdCxpKXtyZXR1cm4oZS5pbmRleDwwP3RoaXMuX2NsaWVudE5vZGVMb2FkZXI6dGhpcy5fbm9kZUxvYWRlcikubG9hZEF0dHJpYnV0ZXMoZSx0LGkpfWdldCBpbmRleERlcHRoKCl7cmV0dXJuIG51bGwhPXRoaXMuX2luZGV4P3RoaXMuX2luZGV4Lm1heExldmVsOjB9c2V0IGRpc2FibGVNZW1DYWNoZShlKXt0aGlzLmxheWVyVmlldy5sb2FkQ2FjaGVkR1BVRGF0YSYmdGhpcy5sYXllclZpZXcuYWRkQ2FjaGVkR1BVRGF0YT90aGlzLl9kaXNhYmxlTWVtQ2FjaGU9ZTp0aGlzLl9kaXNhYmxlTWVtQ2FjaGU9ITB9cnVuVGFzayhlLHQpe3JldHVybiB0aGlzLmxheWVyVmlldy5jb250ZW50VmlzaWJsZT90aGlzLmxheWVyVmlldy52aXNpYmxlJiZudWxsIT10aGlzLl9pbmRleD8odGhpcy5fcHJvY2Vzc1dpdGhFcnJvckxvZ2dpbmcoZSx0KSx0aGlzLl9pbmRleC5tYXhQcmlvcml0eSk6LTEvMDoodGhpcy5fdXBkYXRlVmlld0RhdGEoKSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCksLTEvMCl9X3Byb2Nlc3NXaXRoRXJyb3JMb2dnaW5nKGUsdCl7dHJ5e3RoaXMuX3Byb2Nlc3MoZSx0KX1jYXRjaChzKXt0aGlzLl9lcnJvckNvdW50PDUwP2kuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKGBFcnJvciBkdXJpbmcgcHJvY2Vzc2luZzogJHtzfSBhdCAke3Muc3RhY2t9YCk6NTA9PT10aGlzLl9lcnJvckNvdW50JiZpLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIlRvbyBtYW55IGVycm9ycyBmb3IgdGhpcyBsYXllci4gRnVydGhlciBlcnJvcnMgd2lsbCBub3QgYmUgZGlzcGxheWVkLlwiKSx0aGlzLl9lcnJvckNvdW50Kyt9fV9wcm9jZXNzKGUsdCl7dGhpcy5fcmVzdGFydE5vZGVMb2FkaW5nJiZ0aGlzLl9zdGFydE5vZGVMb2FkaW5nKCksbnVsbCE9dGhpcy5fbm9kZUxvYWRlciYmbnVsbCE9dGhpcy5faW5kZXgmJih0aGlzLl91cGRhdGVWaWV3RGF0YSgpLHRoaXMuX2ludmlzaWJsZURpcnR5JiZ0aGlzLl9yZW1vdmVJbnZpc2libGVOb2RlcyhlKSYmKHRoaXMuX2ludmlzaWJsZURpcnR5PSExKSx0aGlzLl9pc0ludGVncmF0ZWRNZXNoJiYoZS5lbmFibGVkPSExKSxlLnJ1bigoKCk9PnRoaXMuX3Byb2Nlc3NJbmRleChlKSkpLHRoaXMuX3VwZGF0ZUZlYXR1cmVMT0QoKSxlLnJ1bigoKCk9PnRoaXMuX3Byb2Nlc3NDYWNoZShlKSkpLHRoaXMuX2lzSW50ZWdyYXRlZE1lc2gmJihlLmVuYWJsZWQ9ITApLGUucnVuKCgoKT0+dGhpcy5fcHJvY2Vzc05vZGVzKGUsdCkpKSx0aGlzLl9pZGxlUXVldWUucnVuVGFzayhlKSxlLnJ1bigoKCk9PnRoaXMuX3ByZWZldGNoSW5kZXgoKSkpLHQubnVtSW5kZXhMb2FkaW5nKz10aGlzLl9pbmRleC5pbmRleExvYWRpbmcsdC5udW1Ob2Rlc0xvYWRpbmcrPXRoaXMuX2Rvd25sb2FkaW5nQ291bnQsZS5ydW4oKCgpPT50aGlzLl9sb2RIYW5kbGluZy5sb2RHbG9iYWxIYW5kbGluZyhlKSkpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKSl9X3Byb2Nlc3NJbmRleChlKXtpZihudWxsPT10aGlzLl9pbmRleClyZXR1cm4hMTtpZih0aGlzLl9pbmRleC5kaXJ0eSl7dGhpcy5fbmV3TG9hZGluZ05vZGVzLmNsZWFyKCksdGhpcy5faW5kZXgudXBkYXRlKEFycmF5LmZyb20odGhpcy5fbG9hZGluZ05vZGVzLmtleXMoKSksZSwoZT0+dGhpcy51cGRhdGVOb2RlTW9kaWZpY2F0aW9uU3RhdHVzKGUpKSksdGhpcy5fZGlzYWJsZU1lbUNhY2hlfHwodGhpcy5fbmV3TG9hZGluZ05vZGVzLnB1c2hBcnJheSh0aGlzLl9pbmRleC51cGRhdGVzLmFkZC5kYXRhLHRoaXMuX2luZGV4LnVwZGF0ZXMuYWRkLmxlbmd0aCksdGhpcy5fbmV3TG9hZGluZ05vZGVzLnB1c2hBcnJheSh0aGlzLl9pbmRleC51cGRhdGVzLm1pc3NpbmcuZGF0YSx0aGlzLl9pbmRleC51cGRhdGVzLm1pc3NpbmcubGVuZ3RoKSk7Y29uc3QgdD10aGlzLl9pbmRleC5mZWF0dXJlRXN0aW1hdGUubGVhdmVzUmVhY2hlZDt0aGlzLl9pbmRleC5pc0xvYWRpbmd8fHQ9PT10aGlzLl9nZXQoXCJsZWF2ZXNSZWFjaGVkXCIpfHx0aGlzLl9zZXQoXCJsZWF2ZXNSZWFjaGVkXCIsdCl9cmV0dXJuIHRoaXMuX2luZGV4LmxvYWQoKX1fcHJlZmV0Y2hJbmRleCgpe3JldHVybiEobnVsbD09dGhpcy5faW5kZXh8fHRoaXMuX2xvYWRpbmdOb2Rlcy5zaXplPjB8fHRoaXMuX2luZGV4LnVwZGF0ZXMuYWRkLmxlbmd0aD4wKSYmdGhpcy5faW5kZXgucHJlZmV0Y2goKX1fdXBkYXRlRmVhdHVyZUxPRCgpe2lmKCF0aGlzLnVzZU1heGltdW1OdW1iZXJPZkZlYXR1cmVzfHxudWxsPT10aGlzLl9pbmRleHx8bnVsbD09dGhpcy5fdmlld3BvcnRRdWVyaWVzKXJldHVybjtjb25zdCBlPSF0aGlzLl9pbmRleC5pc0xvYWRpbmcsdD10aGlzLmZlYXR1cmVUYXJnZXQqdGhpcy5fYmFzZUxPRCxpPXRoaXMuX2luZGV4LmZlYXR1cmVFc3RpbWF0ZTtpZihpLmVzdGltYXRlPWkuZXN0aW1hdGV8fHQvMix0aGlzLl9pbmRleC5pbmRleE1pc3Npbmc+USl7aWYodGhpcy5fZmVhdHVyZUxPRDw9cSlyZXR1cm47dGhpcy5fZmVhdHVyZUxPRC89aix0aGlzLl9zdGFibGVGZWF0dXJlTE9EPSExfWVsc2UgaWYoZSYmaS5lc3RpbWF0ZTx0KXtpZihpLmxlYXZlc1JlYWNoZWR8fHRoaXMuX2ZlYXR1cmVMT0Q+PVV8fHRoaXMuX3N0YWJsZUZlYXR1cmVMT0QpcmV0dXJuO2NvbnN0IGU9TWF0aC5taW4oMTAsTWF0aC5tYXgodC9pLmVzdGltYXRlLDEuMDAxKSk7dGhpcy5fZmVhdHVyZUxPRCo9ZTtjb25zdCBzPXRoaXMuX2xvZCxyPXRoaXMuX2luZGV4LmNoZWNrRmVhdHVyZVRhcmdldCh0LHMpO3IhPT1zJiYodGhpcy5fZmVhdHVyZUxPRD1yL3RoaXMuX2Jhc2VMT0QsdGhpcy5fc3RhYmxlRmVhdHVyZUxPRD0hMCl9ZWxzZXtpZighKGkuZXN0aW1hdGU+dCpHfHxlJiZpLmVzdGltYXRlPnQpKXJldHVybjtpZih0aGlzLl9mZWF0dXJlTE9EPD1xKXJldHVybjt0aGlzLl9mZWF0dXJlTE9ELz0xKy4yNSooaS5lc3RpbWF0ZS90LTEpLHRoaXMuX3N0YWJsZUZlYXR1cmVMT0Q9ITF9dGhpcy5fZmVhdHVyZUxPRD1NYXRoLm1pbihVLE1hdGgubWF4KHEsdGhpcy5fZmVhdHVyZUxPRCkpLHRoaXMuX3ZpZXdwb3J0UXVlcmllcy51cGRhdGVTY3JlZW5TcGFjZUVycm9yQmlhcyh0aGlzLl9sb2QpLHRoaXMuX2luZGV4LnJlcXVlc3RVcGRhdGUoKX1fcHJvY2Vzc0NhY2hlKGUpe2NvbnN0IHQ9dGhpcy5faW5kZXg7aWYobnVsbD09dClyZXR1cm4hMTtmb3IoO3RoaXMuX25ld0xvYWRpbmdOb2Rlcy5sZW5ndGg+MCYmIWUuZG9uZTspe2NvbnN0IGk9dGhpcy5fbmV3TG9hZGluZ05vZGVzLnBvcCgpO2ZvcihsZXQgcz10LmdldFBhcmVudChpKTtudWxsIT1zJiYhdGhpcy5sYXllclZpZXcuaXNOb2RlTG9hZGVkKHMuaW5kZXgpO3M9dC5nZXRQYXJlbnQocy5pbmRleCkpaWYodGhpcy5fZW5hYmxlRnJvbUdQVUNhY2hlKHMseC5Ib2xlKSl7ZS5tYWRlUHJvZ3Jlc3MoKTticmVha319cmV0dXJuIGUuaGFzUHJvZ3Jlc3NlZH1fcHJvY2Vzc05vZGVzKGUsdCl7aWYobnVsbD09dGhpcy5faW5kZXgpcmV0dXJuITE7bGV0IGk9KHRoaXMuX2lzSWRsZT9POlApLXRoaXMuX2xvYWRpbmdOb2Rlcy5zaXplO2NvbnN0IHM9dGhpcy5faW5kZXgudXBkYXRlcztmb3Iocy5jYW5jZWwuZm9yRWFjaCh0aGlzLl9jYW5jZWxOb2RlLHRoaXMpLHMuY2FuY2VsPVtdO3MucmVtb3ZlLmxlbmd0aD4wJiYhZS5kb25lOyl0aGlzLmxheWVyVmlldy5yZW1vdmVOb2RlKHMucmVtb3ZlLnBvcCgpKSxlLm1hZGVQcm9ncmVzcygpO2Zvcig7cy51cGRhdGUubGVuZ3RoPjAmJiFlLmRvbmU7KXtjb25zdCB0PXRoaXMuX2luZGV4LmdldE5vZGUocy51cGRhdGUucG9wKCkpO251bGwhPXQmJih0aGlzLl91cGRhdGVMb2FkZWROb2RlKHQpLGUubWFkZVByb2dyZXNzKCkpfWZvcig7cy5hZGQubGVuZ3RoPjAmJiFlLmRvbmUmJmk+MDspey0taTtjb25zdCByPXRoaXMuX2luZGV4LmdldE5vZGUocy5hZGQuYmFjaygpKTtpZihudWxsPT1yfHxyLmNhY2hlU3RhdGUhPT1OLkNhY2hlZCYmIXRoaXMuX2hhc05vZGVMb2FkVG9rZW4odCkpYnJlYWs7cy5hZGQucG9wKCksdGhpcy5fbG9hZE5vZGUociksZS5tYWRlUHJvZ3Jlc3MoKX1yZXR1cm4gZS5oYXNQcm9ncmVzc2VkfV9jYW5jZWxBbGxOb2Rlcygpe3RoaXMuX2xvYWRpbmdOb2Rlcy5mb3JFYWNoKChlPT5lLmFib3J0KCkpKSx0aGlzLl9sb2FkaW5nTm9kZXMuY2xlYXIoKSx0aGlzLl91cGRhdGluZ05vZGVzLmZvckVhY2goKGU9PmUuYWJvcnQoKSkpLHRoaXMuX3VwZGF0aW5nTm9kZXMuY2xlYXIoKX1fY2FuY2VsTm9kZShlKXtjb25zdCB0PXRoaXMuX2xvYWRpbmdOb2Rlcy5nZXQoZSk7dCYmKHQuYWJvcnQoKSx0aGlzLl9sb2FkaW5nTm9kZXMuZGVsZXRlKGUpKX1faGFzTm9kZUxvYWRUb2tlbihlKXtyZXR1cm4hKCF0aGlzLl9pc0lkbGUmJmUubnVtTm9kZXNMb2FkaW5nK3RoaXMuX2xvYWRpbmdOb2Rlcy5zaXplPj1QKSYmKHRoaXMuX2Rvd25sb2FkaW5nQ291bnQ8UyYmIXRoaXMuZGF0YVN0cmVhbUNvbnRyb2xsZXIuYnVzeSl9X2V2YWx1YXRlVXBkYXRpbmcoKXtsZXQgZT0hMSx0PTA7aWYodGhpcy5sYXllclZpZXcpe2lmKHRoaXMubGF5ZXJWaWV3LmNvbnRlbnRWaXNpYmxlKXtjb25zdCBpPSh0aGlzLl9pbmRleD8uaW5kZXhNaXNzaW5nPz8wKSszKih0aGlzLl9pbmRleD8udXBkYXRlcy5hZGQubGVuZ3RoPz8wKSsyKnRoaXMuX2xvYWRpbmdOb2Rlcy5zaXplO2U9ISEoaT4wfHx0aGlzLl91cGRhdGluZ05vZGVzLnNpemU+MHx8dGhpcy5fcmVzdGFydE5vZGVMb2FkaW5nfHx0aGlzLl9jYW1lcmFEaXJ0eXx8dGhpcy5faWRsZVF1ZXVlLnVwZGF0aW5nfHx0aGlzLl9sb2RIYW5kbGluZyYmdGhpcy5fbG9kSGFuZGxpbmcucmVxdWlyZXNMT0RHbG9iYWxIYW5kbGluZ3x8bnVsbCE9dGhpcy5faW5kZXgmJnRoaXMuX2luZGV4LmlzUHJlZmV0Y2hpbmcpLDA9PT1pJiYodGhpcy5fcHJvZ3Jlc3NNYXhOdW1Ob2Rlcz0xKSx0aGlzLl9wcm9ncmVzc01heE51bU5vZGVzPU1hdGgubWF4KGksdGhpcy5fcHJvZ3Jlc3NNYXhOdW1Ob2RlcyksdD0xLWkvdGhpcy5fcHJvZ3Jlc3NNYXhOdW1Ob2Rlc31lbHNlIGU9dGhpcy5fY2FtZXJhRGlydHksdD1lPzA6MTt0aGlzLnVwZGF0aW5nPWUsdGhpcy51cGRhdGluZ1Byb2dyZXNzPXR9fV91cGRhdGVWaWV3RGF0YSgpe2lmKCF0aGlzLl9jYW1lcmFEaXJ0eXx8bnVsbD09dGhpcy5faW5kZXh8fG51bGw9PXRoaXMuX3ZpZXdwb3J0UXVlcmllcylyZXR1cm47Y29uc3QgZT10aGlzLmxheWVyVmlldy52aWV3LHtjb250ZW50Q2FtZXJhOnQsZml4ZWRDb250ZW50Q2FtZXJhOml9PWUuc3RhdGU7dGhpcy5fdmlld3BvcnRRdWVyaWVzLnVwZGF0ZUNhbWVyYSh0LCFpfHx0aGlzLmlzR3JhcGhpY3MzRCksdGhpcy5fdmlld3BvcnRRdWVyaWVzLnNldFBvaW50T2ZJbnRlcmVzdChlLnBvaW50c09mSW50ZXJlc3QuZm9jdXMucmVuZGVyTG9jYXRpb24pLHRoaXMuX3ZpZXdwb3J0UXVlcmllcy51cGRhdGVTY3JlZW5TcGFjZUVycm9yQmlhcyh0aGlzLl9sb2QpLHRoaXMuX2luZGV4LmludmFsaWRhdGVWaXNpYmlsaXR5Q2FjaGUoKSx0aGlzLl9pbmRleC5wcm9ncmVzc2l2ZUxvYWRQZW5hbHR5PUguZGlzdGFuY2VQZW5hbHR5KnRoaXMuX3ZpZXdwb3J0UXVlcmllcy5kaXN0Q2FtZXJhVG9QT0koKSx0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCksdGhpcy5fc3RhYmxlRmVhdHVyZUxPRD0hMSx0aGlzLl9pbnZpc2libGVEaXJ0eT0hMCx0aGlzLl9jYW1lcmFEaXJ0eT0hMSx0aGlzLm5vdGlmeUNoYW5nZShcInJvb3ROb2RlVmlzaWJsZVwiKX1fZ2V0UHJvZ3Jlc3NpdmVMb2FkRmFjdG9yKCl7cmV0dXJuIHRoaXMubGF5ZXJWaWV3LnZpZXcucXVhbGl0eTwxPzE6dGhpcy5sYXllclZpZXcucHJvZ3Jlc3NpdmVMb2FkRmFjdG9yfWdldCBfbG9kKCl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVMT0QqdGhpcy5fYmFzZUxPRH1nZXQgX2Jhc2VMT0QoKXtjb25zdCBlPXRoaXMubGF5ZXJWaWV3LmxvZEZhY3RvcjtyZXR1cm4gdGhpcy5maXhlZEZlYXR1cmVUYXJnZXQ/MTooZT4wP2U6MSkqdGhpcy5sYXllclZpZXcudmlldy5xdWFsaXR5fWdldCBfbG9kRHJvcEZhY3Rvcigpe2lmKHRoaXMuZml4ZWRGZWF0dXJlVGFyZ2V0KXJldHVybiAxO3JldHVybihNYXRoLm1pbih0aGlzLmxheWVyVmlldy52aWV3LnF1YWxpdHksLjUpLU0pLyguNS1NKX1pc0dlb21ldHJ5VmlzaWJsZShlKXtyZXR1cm4hIXRoaXMuX2luZGV4Py5pc0dlb21ldHJ5VmlzaWJsZShlLmluZGV4KX11cGRhdGVWaXNpYmlsaXR5KGUpe3RoaXMuX2luZGV4Py5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZShlKX1pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUpe3RoaXMuX2luZGV4Py5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUpfWludmFsaWRhdGVWaXNpYmlsaXR5T2Jicygpe3RoaXMuX2luZGV4Py5pbnZhbGlkYXRlVmlzaWJpbGl0eU9iYnMoKX1tb2RpZmljYXRpb25zQ2hhbmdlZCgpe3RoaXMuX2luZGV4Py5pbU1vZGlmaWNhdGlvbnNDaGFuZ2VkKCEhdGhpcy5sYXllclZpZXcuaGFzTW9kaWZpY2F0aW9ucyksdGhpcy5faW52aXNpYmxlRGlydHk9ITB9X3Nob3VsZExvYWROb2RlKGUpe3JldHVybiEoIXRoaXMuX2xvZEhhbmRsaW5nLnNob3VsZExvYWROb2RlKGUpfHx0aGlzLl9zaG91bGREcm9wTm9kZShlKSkmJiEobnVsbD09dGhpcy5faW5kZXh8fCF0aGlzLl9pbmRleC5pc0dlb21ldHJ5VmlzaWJsZShlLmluZGV4KSl9X3Nob3VsZERyb3BOb2RlKGUpe2lmKG51bGw9PXRoaXMuX3ZpZXdwb3J0UXVlcmllcylyZXR1cm4hMTtjb25zdCB0PXRoaXMuX2xvZERyb3BGYWN0b3I7aWYodD49MXx8IXRoaXMuX2xvZEhhbmRsaW5nLmhhc05vVmlzaWJsZUNoaWxkcmVuKGUpKXJldHVybiExO3JldHVybiBNYXRoLmFicyh0aGlzLl92aWV3cG9ydFF1ZXJpZXMuY2FsY0NhbWVyYURpc3RhbmNlVG9DZW50ZXIoZSkpLXRoaXMuX3ZpZXdwb3J0UXVlcmllcy5taW5EaXN0YW5jZT4odGhpcy5fdmlld3BvcnRRdWVyaWVzLm1heERpc3RhbmNlLXRoaXMuX3ZpZXdwb3J0UXVlcmllcy5taW5EaXN0YW5jZSkqdH1fc3RhcnROb2RlTG9hZGluZygpe3RoaXMuX3Jlc3RhcnROb2RlTG9hZGluZz0hMTtjb25zdCBlPXRoaXMuX2luZGV4O2lmKHRoaXMuX3VwZGF0ZXNEaXNhYmxlZHx8bnVsbD09ZXx8bnVsbD09dGhpcy5fdmlld3BvcnRRdWVyaWVzKXJldHVybjt0aGlzLl91cGRhdGVWaWV3RGF0YSgpLHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlc0RpcnR5JiYodGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzPXRoaXMuX2dldFJlcXVpcmVkQXR0cmlidXRlcygpLHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlc0RpcnR5PSExKTtjb25zdCB0PXt0ZXh0dXJlRW5jb2RpbmdzOnRoaXMubGF5ZXJWaWV3LnN1cHBvcnRlZFRleHR1cmVFbmNvZGluZ3MsdGV4dHVyZVVzYWdlTWFzazp0aGlzLmxheWVyVmlldy5yZW5kZXJlclRleHR1cmVVc2FnZSxsb2FkRmVhdHVyZURhdGE6dGhpcy51c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc307dGhpcy5fbm9kZUxvYWRlcj1uZXcgYih0aGlzLmxheWVyLHRoaXMuZGF0YVN0cmVhbUNvbnRyb2xsZXIsaS5nZXRMb2dnZXIodGhpcyksdGhpcy5fZGVmYXVsdEdlb21ldHJ5U2NoZW1hLHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyx0KSxlLnJlcXVlc3RVcGRhdGUoKSx0aGlzLl9sb2RIYW5kbGluZy5zdGFydE5vZGVMb2FkaW5nKCgoZSx0KT0+dGhpcy5fcmVtb3ZlTm9kZXMoZSx0LHouZmFkZW91dCkpLGUse21heExvZExldmVsOnRoaXMuX3ZpZXdwb3J0UXVlcmllcy5tYXhMb2RMZXZlbH0pLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKX1pc05vZGVMb2FkaW5nKCl7cmV0dXJuIG51bGwhPXRoaXMuX25vZGVMb2FkZXImJm51bGwhPXRoaXMuX2luZGV4fWNhbmNlbE5vZGVMb2FkaW5nKCl7dGhpcy5pc05vZGVMb2FkaW5nKCkmJih0aGlzLmluZGV4U3RyZWFtQ29udHJvbGxlci5jYW5jZWxBbGwoKSx0aGlzLmRhdGFTdHJlYW1Db250cm9sbGVyLmNhbmNlbEFsbCgpLHRoaXMuX2lkbGVRdWV1ZS5jYW5jZWxBbGwoKSx0aGlzLl9jYW5jZWxBbGxOb2RlcygpLHRoaXMuX25vZGVMb2FkZXI9bnVsbCx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCkpfV9yZW1vdmVJbnZpc2libGVOb2RlcyhlKXtjb25zdCB0PXRoaXMuX2luZGV4O2lmKG51bGw9PXR8fG51bGw9PXRoaXMuX3ZpZXdwb3J0UXVlcmllcylyZXR1cm4hMTtrLmNsZWFyKCksdGhpcy5sYXllclZpZXcuZ2V0TG9hZGVkTm9kZUluZGljZXMoayk7Y29uc3QgaT0wPT09dGhpcy5fdmlld3BvcnRRdWVyaWVzLm1heERpc3RhbmNlLHM9aT8oKT0+ITE6ZT0+dGhpcy5fc2hvdWxkRHJvcE5vZGUoZSk7cmV0dXJuIGsuZmlsdGVySW5QbGFjZSgoZT0+e2NvbnN0IGk9dC5nZXROb2RlKGUpO3JldHVybiBudWxsPT1pfHwhdC5pc0dlb21ldHJ5VmlzaWJsZShlKXx8cyhpKX0pKSxrLmxlbmd0aD4wJiZ0aGlzLl9sb2RIYW5kbGluZy5zZXRMb2RHbG9iYWxEaXJ0eSgpLHRoaXMuX3JlbW92ZU5vZGVzKGssZSx6LnBvcCksIShpJiZ0aGlzLl9sb2REcm9wRmFjdG9yPDEpJiYoMD09PWsubGVuZ3RofHwoay5jbGVhcigpLCExKSl9bWFya05vZGVUb1JlbW92ZShlKXtrLnB1c2goZSl9cmVtb3ZlTWFya2VkTm9kZXMoKXt0aGlzLl9yZW1vdmVOb2RlcyhrLEYsei5wb3ApfV9yZW1vdmVOb2RlcyhlLHQsaSl7aWYoMCE9PWUubGVuZ3RoJiYhdC5kb25lKWZvcihudWxsIT10aGlzLl9pbmRleCYmdGhpcy5faW5kZXgucmVxdWVzdFVwZGF0ZSgpO2UubGVuZ3RoPjAmJiF0LmRvbmU7KXtjb25zdCBzPWUucG9wKCkscj10aGlzLl9pbmRleDtpPT09ei5mYWRlb3V0JiZ0aGlzLmxheWVyVmlldy5ub2RlRmFkZW91dEVuYWJsZWQmJm51bGwhPXImJnIuaXNHZW9tZXRyeVZpc2libGUocyk/dGhpcy5sYXllclZpZXcuZmFkZU5vZGUocyxWLkZhZGVPdXQsITApOnRoaXMubGF5ZXJWaWV3LnJlbW92ZU5vZGUocyksdC5tYWRlUHJvZ3Jlc3MoKX19X25lZWRzVXBkYXRlKGUpe2lmKGUucmVzb3VyY2VzLmlzRW1wdHl8fHRoaXMuX3VwZGF0aW5nTm9kZXMuaGFzKGUuaW5kZXgpKXJldHVybiExO2NvbnN0IHQ9dGhpcy5sYXllclZpZXcuZ2V0TG9hZGVkQXR0cmlidXRlcyhlLmluZGV4KTtyZXR1cm4gbnVsbCE9dCYmdCE9PXRoaXMuX3JlcXVpcmVkQXR0cmlidXRlc31hc3luYyBfdXBkYXRlTG9hZGVkTm9kZShlKXtjb25zdCB0PW5ldyBBYm9ydENvbnRyb2xsZXI7dGhpcy5fdXBkYXRpbmdOb2Rlcy5zZXQoZS5pbmRleCx0KSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCk7dHJ5e2NvbnN0IGk9dGhpcy5sYXllclZpZXcuZ2V0TG9hZGVkQXR0cmlidXRlcyhlLmluZGV4KSxzPUUoaSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMpP3RoaXMubGF5ZXJWaWV3LmdldEF0dHJpYnV0ZURhdGEoZS5pbmRleCk6YXdhaXQgdGhpcy5fbG9hZEF0dHJpYnV0ZXMoZSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsdC5zaWduYWwpO2F3YWl0IHRoaXMuc2NoZWR1bGUoKCgpPT50aGlzLmxheWVyVmlldy51cGRhdGVBdHRyaWJ1dGVzKGUuaW5kZXgse2xvYWRlZEF0dHJpYnV0ZXM6dGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzLGF0dHJpYnV0ZURhdGE6c30sdC5zaWduYWwpKSx0LnNpZ25hbCl9Y2F0Y2goaSl7aWYoIWEoaSkpcmV0dXJuIHRoaXMubGF5ZXJWaWV3LnVwZGF0ZUF0dHJpYnV0ZXMoZS5pbmRleCx7bG9hZGVkQXR0cmlidXRlczp0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsYXR0cmlidXRlRGF0YTp7fX0sdC5zaWduYWwpfXRoaXMuX3VwZGF0aW5nTm9kZXMuZGVsZXRlKGUuaW5kZXgpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKX1fbG9hZE5vZGUoZSl7aWYodGhpcy5fbG9hZGluZ05vZGVzLmhhcyhlLmluZGV4KSlyZXR1cm4gdm9pZCBpLmdldExvZ2dlcih0aGlzKS5lcnJvcihcImFscmVhZHkgbG9hZGluZyBub2RlIFwiK2UuaW5kZXgpO2NvbnN0IHQ9bmV3IEFib3J0Q29udHJvbGxlcjt0aGlzLl9sb2FkaW5nTm9kZXMuc2V0KGUuaW5kZXgsdCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpLHRoaXMuX2xvYWRBbmRBZGROb2RlKGUsdC5zaWduYWwpLnRoZW4oKGk9PntpJiZudWxsIT10aGlzLl9pbmRleCYmdGhpcy5fbG9hZGluZ05vZGVzLmdldChlLmluZGV4KT09PXQmJih0aGlzLl9sb2FkaW5nTm9kZXMuZGVsZXRlKGUuaW5kZXgpLHRoaXMuX2luZGV4LnJlcXVlc3RVcGRhdGUoKSl9KSkuY2F0Y2goKGU9PntpZighYShlKSl0aHJvdyBlfSkpLmZpbmFsbHkoKCgpPT57dGhpcy5fbG9hZGluZ05vZGVzLmdldChlLmluZGV4KT09PXQmJnRoaXMuX2xvYWRpbmdOb2Rlcy5kZWxldGUoZS5pbmRleCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpfSkpfV9sb2FkQW5kQWRkTm9kZShlLHQpe3JldHVybiBlLmNhY2hlU3RhdGU9PT1OLlVuY2FjaGVkP3RoaXMuX2xvYWRVbmNhY2hlZChlLHQpLnRoZW4oKCgpPT4hMSkpOnRoaXMuX2xvYWRDYWNoZWQoZSx0KS50aGVuKCh0PT4hdCYmKGUuY2FjaGVTdGF0ZT1OLlVuY2FjaGVkLCEwKSkpLmNhdGNoKCh0PT4hYSh0KSYmKGUuY2FjaGVTdGF0ZT1OLlVuY2FjaGVkLCEwKSkpfV9lbmFibGVGcm9tR1BVQ2FjaGUoZSx0KXtpZih0aGlzLl9kaXNhYmxlTWVtQ2FjaGV8fG51bGw9PXRoaXMuX2luZGV4KXJldHVybiExO2lmKHQ9PT14LkhvbGUmJiF0aGlzLl9pbmRleC51c2VOb2RlQXNIb2xlKGUuaW5kZXgpKXJldHVybiEwO2NvbnN0IGk9dGhpcy5fbG9hZENhY2hlZEdQVURhdGEoZSk7cmV0dXJuISFpJiYodGhpcy5sYXllclZpZXcuYWRkQ2FjaGVkR1BVRGF0YShlLGksdCksdGhpcy5fbm9kZUFkZGVkKCksITApfV9sb2FkQ2FjaGVkR1BVRGF0YShlKXtjb25zdCB0PXRoaXMubGF5ZXJWaWV3LmxvYWRDYWNoZWRHUFVEYXRhKGUuaW5kZXgpO3JldHVybiBudWxsIT10Py5hdHRyaWJ1dGVJbmZvJiZFKHQuYXR0cmlidXRlSW5mby5sb2FkZWRBdHRyaWJ1dGVzLHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyk/dDoodGhpcy5sYXllclZpZXcuZGVsZXRlQ2FjaGVkR1BVRGF0YSh0KSxudWxsKX1fbm9kZUFkZGVkKCl7bnVsbCE9dGhpcy5faW5kZXgmJnRoaXMuX2luZGV4LnJlcXVlc3RVcGRhdGUoKSx0aGlzLl9sb2RIYW5kbGluZy5zZXRMb2RHbG9iYWxEaXJ0eSgpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKX11cGRhdGVMb2FkU3RhdHVzKGUsdCl7Y29uc3QgaT10aGlzLl9pbmRleDtudWxsIT1pJiZpLnVwZGF0ZUNoaWxkcmVuTG9hZGVkKGUsdD8xOi0xKX1hc3luYyBfbG9hZENhY2hlZChlLHQpe2lmKHRoaXMuX2VuYWJsZUZyb21HUFVDYWNoZShlLHguTGVhZikpcmV0dXJuITA7Y29uc3QgaT10aGlzLmxheWVyVmlldztpZih0aGlzLmRpc2FibGVJREJDYWNoZXx8IWkubG9hZENhY2hlZE5vZGVEYXRhfHwhaS5hZGRDYWNoZWROb2RlRGF0YSlyZXR1cm4hMTtjb25zdCBzPSh0LGkpPT50aGlzLl9ub2RlTG9hZGVyLmxvYWRUZXh0dXJlcyhlLHQsaSkscj0odCxpKT0+dGhpcy5fY2xpZW50Tm9kZUxvYWRlci5sb2FkVGV4dHVyZXMoZSx0LGkpLGE9ZS5pbmRleD49MD9zOnIsZD1hd2FpdCB0aGlzLnNjaGVkdWxlKCgoKT0+aS5sb2FkQ2FjaGVkTm9kZURhdGEoZSx0LGEpKSx0KTtpZihudWxsPT1kKXJldHVybiExO2NvbnN0IG89dGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzLG49YXdhaXQgdGhpcy5yZXNjaGVkdWxlKCgoKT0+dGhpcy5fbG9hZEF0dHJpYnV0ZXMoZSxvLHQpKSx0KTtyZXR1cm4gYXdhaXQgdGhpcy5yZXNjaGVkdWxlKCgoKT0+aS5hZGRDYWNoZWROb2RlRGF0YShlLGQse2xvYWRlZEF0dHJpYnV0ZXM6byxhdHRyaWJ1dGVEYXRhOm59LHQpKSx0KSx0aGlzLl9ub2RlQWRkZWQoKSwhMH1fbG9hZFVuY2FjaGVkKGUsdCl7cmV0dXJuIHRoaXMuX2Rvd25sb2FkaW5nQ291bnQrKyx0aGlzLl9sb2FkTm9kZURhdGEoZSx0KS5jYXRjaCgoZT0+e3Rocm93IHRoaXMuX2Rvd25sb2FkaW5nQ291bnQtLSxlfSkpLnRoZW4oKGk9Pih0aGlzLl9kb3dubG9hZGluZ0NvdW50LS0sdGhpcy5zY2hlZHVsZSgoKCk9PnRoaXMubGF5ZXJWaWV3LmFkZE5vZGUoZSxpLHQpKSx0KSkpKS50aGVuKCgoKT0+e3RoaXMuX25vZGVBZGRlZCgpLGUuY2FjaGVTdGF0ZT1OLkNhY2hlZH0pKS5jYXRjaCgodD0+e2lmKCFhKHQpKXRocm93IGkuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiI2xvYWROb2RlRGF0YSgpXCIsdGhpcy5sYXllcixgRmFpbGVkIHRvIGxvYWQgbm9kZSAnJHtlLmlkfSdgLHQpLGUuZmFpbGVkPSEwLG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCksdH0pKX1fdXBkYXRlSWRsZVN0YXRlKGUpe2UhPT10aGlzLl9pc0lkbGUmJih0aGlzLl9pc0lkbGU9ZSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCksZSYmdGhpcy5faW5kZXgmJm51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXNldEZhaWxlZE5vZGVzKCkpfWdldCB0ZXN0KCl7fW5vdGlmeUxPRFVwZGF0ZSgpe3RoaXMuX2xvZEhhbmRsaW5nLnNldExvZEdsb2JhbERpcnR5KCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpLG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCl9Z2VvbWV0cnlGaWx0ZXJDaGFuZ2VkKGUpe2NvbnN0IHQ9dGhpcy5faW5kZXg7bnVsbCE9dCYmdC5sYXllckZpbHRlckNoYW5nZWQoZSksdGhpcy5fc2V0Q2FtZXJhRGlydHkoKX19O2UoW2woe3JlYWRPbmx5OiEwfSldLFQucHJvdG90eXBlLFwiaXNNZXNoUHlyYW1pZFwiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLFQucHJvdG90eXBlLFwiaXNHcmFwaGljczNEXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sVC5wcm90b3R5cGUsXCJ1c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc1wiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLFQucHJvdG90eXBlLFwiaW5kZXhTdHJlYW1Db250cm9sbGVyXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sVC5wcm90b3R5cGUsXCJkYXRhU3RyZWFtQ29udHJvbGxlclwiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLFQucHJvdG90eXBlLFwiY3JzVmVydGV4XCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sVC5wcm90b3R5cGUsXCJjcnNJbmRleFwiLG51bGwpLGUoW2woKV0sVC5wcm90b3R5cGUsXCJmZWF0dXJlVGFyZ2V0XCIsdm9pZCAwKSxlKFtsKCldLFQucHJvdG90eXBlLFwiZml4ZWRGZWF0dXJlVGFyZ2V0XCIsdm9pZCAwKSxlKFtsKCldLFQucHJvdG90eXBlLFwibGF5ZXJWaWV3XCIsdm9pZCAwKSxlKFtsKCldLFQucHJvdG90eXBlLFwibGF5ZXJcIixudWxsKSxlKFtsKCldLFQucHJvdG90eXBlLFwidXBkYXRpbmdcIix2b2lkIDApLGUoW2woe3JlYWRPbmx5OiEwfSldLFQucHJvdG90eXBlLFwicnVubmluZ1wiLG51bGwpLGUoW2woKV0sVC5wcm90b3R5cGUsXCJ1cGRhdGluZ1Byb2dyZXNzXCIsdm9pZCAwKSxlKFtsKHtyZWFkT25seTohMH0pXSxULnByb3RvdHlwZSxcImxlYXZlc1JlYWNoZWRcIix2b2lkIDApLGUoW2woe2NvbnN0cnVjdE9ubHk6ITB9KV0sVC5wcm90b3R5cGUsXCJ3b3JrZXJcIix2b2lkIDApLGUoW2woe3JlYWRPbmx5OiEwLGRlcGVuZHNPbjpbXX0pXSxULnByb3RvdHlwZSxcInJvb3ROb2RlVmlzaWJsZVwiLG51bGwpLFQ9ZShbaChcImVzcmkubGF5ZXJzLmdyYXBoaWNzLmNvbnRyb2xsZXJzLkkzU09uRGVtYW5kQ29udHJvbGxlclwiKV0sVCk7Y29uc3Qgaz1uZXcgcyh7ZGVhbGxvY2F0b3I6bnVsbH0pO2Z1bmN0aW9uIEUoZSx0KXtyZXR1cm4gbnVsbCE9ZSYmZS5sZW5ndGg9PT10Lmxlbmd0aCYmZS5ldmVyeSgoZT0+Uih0LGUubmFtZSk+PTApKX1mdW5jdGlvbiBSKGUsdCl7Y29uc3QgaT10LnRvTG93ZXJDYXNlKCk7Zm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspaWYoZVtzXS5uYW1lLnRvTG93ZXJDYXNlKCk9PT1pKXJldHVybiBzO3JldHVybi0xfWNvbnN0IEg9e2Rpc3RhbmNlUGVuYWx0eToxMH0sQj1fKCk7dmFyIHo7IWZ1bmN0aW9uKGUpe2VbZS5wb3A9MF09XCJwb3BcIixlW2UuZmFkZW91dD0xXT1cImZhZGVvdXRcIn0oenx8KHo9e30pKTtleHBvcnR7VCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e1RleHR1cmVFbmNvZGluZ01pbWVUeXBlIGFzIGV9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9iYXNpY0ludGVyZmFjZXMuanNcIjtjbGFzcyB0e2NvbnN0cnVjdG9yKHQpe3RoaXMuZGF0YT10LHRoaXMudHlwZT1cImVuY29kZWQtbWVzaC10ZXh0dXJlXCIsdGhpcy5lbmNvZGluZz1lLktUWDJfRU5DT0RJTkd9fWZ1bmN0aW9uIG4oZSl7cmV0dXJuXCJlbmNvZGVkLW1lc2gtdGV4dHVyZVwiPT09ZT8udHlwZX1hc3luYyBmdW5jdGlvbiByKGUpe2NvbnN0IHQ9bmV3IEJsb2IoW2VdKSxuPWF3YWl0IHQudGV4dCgpO3JldHVybiBKU09OLnBhcnNlKG4pfWFzeW5jIGZ1bmN0aW9uIG8obixyKXtpZihyPT09ZS5LVFgyX0VOQ09ESU5HKXJldHVybiBuZXcgdChuKTtjb25zdCBvPW5ldyBCbG9iKFtuXSx7dHlwZTpyfSk7bGV0IGM9VVJMLmNyZWF0ZU9iamVjdFVSTChvKTtzd2l0Y2gocil7Y2FzZVwiaW1hZ2UvanBlZ1wiOmMrPVwiIy5qcGdcIjticmVhaztjYXNlXCJpbWFnZS9wbmdcIjpjKz1cIiMucG5nXCJ9Y29uc3Qgcz1uZXcgSW1hZ2U7aWYoaGFzKFwiZXNyaS1pUGhvbmVcIikpcmV0dXJuIG5ldyBQcm9taXNlKCgoZSx0KT0+e2NvbnN0IG49KCk9PntvKCksZShzKX0scj1lPT57bygpLHQoZSl9LG89KCk9PntVUkwucmV2b2tlT2JqZWN0VVJMKGMpLHMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixuKSxzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHIpfTtzLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbikscy5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixyKSxzLnNyYz1jfSkpO3RyeXtzLnNyYz1jLGF3YWl0IHMuZGVjb2RlKCl9Y2F0Y2goYSl7Y29uc29sZS53YXJuKFwiRmFpbGVkIGRlY29kaW5nIEhUTUxJbWFnZUVsZW1lbnRcIil9cmV0dXJuIFVSTC5yZXZva2VPYmplY3RVUkwoYyksc31leHBvcnR7dCBhcyBFbmNvZGVkTWVzaFRleHR1cmUsbyBhcyBpbWFnZUZyb21CaW5hcnlEYXRhLG4gYXMgaXNFbmNvZGVkTWVzaFRleHR1cmUsciBhcyBqc29uRnJvbUJpbmFyeURhdGF9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIGV7Y29uc3RydWN0b3IoZSl7dGhpcy5sb2FkZWRNZXNoPWV9Z2V0IGNhY2hlZE1lbW9yeSgpe3JldHVybiB0aGlzLmxvYWRlZE1lc2gudXNlZE1lbW9yeX19ZXhwb3J0e2UgYXMgQ2FjaGVkTWVzaERhdGF9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL0NvbG9yLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtsb2FkSW1hZ2VBc3luYyBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL3N1cHBvcnQvcmVxdWVzdFV0aWxzLmpzXCI7aW1wb3J0e0VuY29kZWRNZXNoVGV4dHVyZSBhcyByfWZyb21cIi4uLy4uL2dsVEYvaW50ZXJuYWwvcmVzb3VyY2VVdGlscy5qc1wiO2ltcG9ydHtUZXh0dXJlVXNhZ2UgYXMgYSxUZXh0dXJlRW5jb2RpbmcgYXMgc31mcm9tXCIuL2VudW1zLmpzXCI7aW1wb3J0e0N1bGxGYWNlT3B0aW9ucyBhcyBufWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvYmFzaWNJbnRlcmZhY2VzLmpzXCI7aW1wb3J0e3VzZVNjaGVtYXRpY1BCUiBhcyBpLHNjaGVtYXRpY01SUkZhY3RvcnMgYXMgbH1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbWF0ZXJpYWxzL3BiclV0aWxzLmpzXCI7aW1wb3J0e2FscGhhQ3V0b2ZmIGFzIHV9ZnJvbVwiLi4vLi4vLi4vLi4vd2Vic2NlbmUvc3VwcG9ydC9BbHBoYUN1dG9mZi5qc1wiO2FzeW5jIGZ1bmN0aW9uIGMobyl7Y29uc3QgdD1bXSxyPVtdO2lmKG51bGw9PW8pe3JldHVybnttYXRlcmlhbDp7YWxwaGFNb2RlOlwib3BhcXVlXCIsYWxwaGFDdXRvZmY6dSxkb3VibGVTaWRlZDohMCxjdWxsRmFjZTowLG5vcm1hbFRleHR1cmVJZDotMSxlbWlzc2l2ZVRleHR1cmVJZDotMSxvY2NsdXNpb25UZXh0dXJlSWQ6LTEsZW1pc3NpdmVGYWN0b3I6WzAsMCwwXSxtZXRhbGxpY1JvdWdobmVzczp7YmFzZUNvbG9yRmFjdG9yOlsxLDEsMSwxXSxiYXNlQ29sb3JUZXh0dXJlSWQ6LTEsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlSWQ6LTEsbWV0YWxsaWNGYWN0b3I6MCxyb3VnaG5lc3NGYWN0b3I6LjYwMDAwMDAyMzg0MTg1Nzl9LHdyYXBUZXh0dXJlczohMSxoYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZTohMH0scmVxdWlyZWRUZXh0dXJlczp0LHRleHR1cmVEYXRhOnJ9fWNvbnN0IHM9ZChvKTtcImF1dG9cIj09PW8uYWxwaGFNb2RlJiZjb25zb2xlLndhcm4oJ2FscGhhTW9kZSBcImF1dG9cIiBub3Qgc3VwcG9ydGVkIGJ5IEkzUyBQQlJNYXRlcmlhbCAtIGRlZmF1bHRpbmcgdG8gXCJibGVuZFwiLicpO2NvbnN0IGM9aSh7bm9ybWFsVGV4dHVyZTpvLm5vcm1hbFRleHR1cmUsZW1pc3NpdmVUZXh0dXJlOnM/by5lbWlzc2l2ZVRleHR1cmU6bnVsbCxlbWlzc2l2ZUZhY3RvcjpzP2UudG9Vbml0UkdCKG8uZW1pc3NpdmVDb2xvcik6bnVsbCxvY2NsdXNpb25UZXh0dXJlOnM/by5vY2NsdXNpb25UZXh0dXJlOm51bGwsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlOnM/by5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmU6bnVsbCxtZXRhbGxpY0ZhY3RvcjpzP28ubWV0YWxsaWM6bnVsbCxyb3VnaG5lc3NGYWN0b3I6cz9vLnJvdWdobmVzczpudWxsfSksZz1jP2xbMF06cz9vLm1ldGFsbGljOjAscD1jP2xbMV06cz9vLnJvdWdobmVzczowO3JldHVybnttYXRlcmlhbDp7YWxwaGFNb2RlOlwiYXV0b1wiPT09by5hbHBoYU1vZGU/XCJibGVuZFwiOm8uYWxwaGFNb2RlLGFscGhhQ3V0b2ZmOm8uYWxwaGFDdXRvZmYsZG91YmxlU2lkZWQ6by5kb3VibGVTaWRlZCxjdWxsRmFjZTpvLmRvdWJsZVNpZGVkP24uTm9uZTpuLkJhY2ssbm9ybWFsVGV4dHVyZUlkOmF3YWl0IG0oby5ub3JtYWxUZXh0dXJlLHQscixhLk5vcm1hbCksZW1pc3NpdmVUZXh0dXJlSWQ6cz9hd2FpdCBtKG8uZW1pc3NpdmVUZXh0dXJlLHQscixhLkVtaXNzaXZlKTotMSxvY2NsdXNpb25UZXh0dXJlSWQ6cz9hd2FpdCBtKG8ub2NjbHVzaW9uVGV4dHVyZSx0LHIsYS5PY2NsdXNpb24pOi0xLGVtaXNzaXZlRmFjdG9yOnMmJm51bGwhPW8uZW1pc3NpdmVDb2xvcj9lLnRvVW5pdFJHQihvLmVtaXNzaXZlQ29sb3IpOlswLDAsMF0sbWV0YWxsaWNSb3VnaG5lc3M6e2Jhc2VDb2xvckZhY3RvcjpudWxsIT1vLmNvbG9yP2UudG9Vbml0UkdCQShvLmNvbG9yKTpbMSwxLDEsMV0sYmFzZUNvbG9yVGV4dHVyZUlkOmF3YWl0IG0oby5jb2xvclRleHR1cmUsdCxyLGEuQ29sb3IpLG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZUlkOnM/YXdhaXQgbShvLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSx0LHIsYS5NZXRhbGxpY1JvdWdobmVzcyk6LTEsbWV0YWxsaWNGYWN0b3I6Zyxyb3VnaG5lc3NGYWN0b3I6cH0sd3JhcFRleHR1cmVzOiEwLGhhc1BhcmFtZXRlcnNGcm9tU291cmNlOmN9LHJlcXVpcmVkVGV4dHVyZXM6dCx0ZXh0dXJlRGF0YTpyfX1hc3luYyBmdW5jdGlvbiBtKGUsYSxuLGkpe2lmKG51bGw9PWUpcmV0dXJuLTE7Y29uc3QgbD1uLmxlbmd0aCx1PWUuZGF0YSxjPWUudXJsO2lmKG51bGwhPXUpe2lmKHUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHx1IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpcmV0dXJuIG4ucHVzaCh7aWQ6bCx1c2FnZTppLGRhdGE6dSxlbmNvZGluZzpzLlBOR30pLGEucHVzaCh7aWQ6bCx1c2FnZTppLGVuY29kaW5nczpbe25hbWU6dm9pZCAwLGVuY29kaW5nOnMuUE5HfV19KSxsO2lmKHUgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KXJldHVybi0xO2lmKHUgaW5zdGFuY2VvZiBJbWFnZURhdGEpdGhyb3cgbmV3IG8oXCJzY2VuZWxheWVyXCIsXCJJbWFnZURhdGEgdGV4dHVyZXMgbm90IHN1cHBvcnRlZCB5ZXQgZm9yIGNsaWVudCBzaWRlIEkzUyBub2Rlc1wiKTtpZih1IGluc3RhbmNlb2YgcilyZXR1cm4gbi5wdXNoKHtpZDpsLHVzYWdlOmksZGF0YTp1LmRhdGEsZW5jb2Rpbmc6cy5LVFgyfSksYS5wdXNoKHtpZDpsLHVzYWdlOmksZW5jb2RpbmdzOlt7bmFtZTp2b2lkIDAsZW5jb2Rpbmc6cy5LVFgyfV19KSxsfWVsc2UgaWYobnVsbCE9Yyl7Y29uc3QgZT1uZXcgSW1hZ2U7ZS5zcmM9Yztjb25zdCBvPWF3YWl0IHQoZSxlLnNyYywhMSx2b2lkIDApO3JldHVybiBuLnB1c2goe2lkOmwsdXNhZ2U6aSxkYXRhOm8sZW5jb2Rpbmc6cy5QTkd9KSxhLnB1c2goe2lkOmwsdXNhZ2U6aSxlbmNvZGluZ3M6W3tuYW1lOnZvaWQgMCxlbmNvZGluZzpzLlBOR31dfSksbH1yZXR1cm4tMX1mdW5jdGlvbiBkKGUpe3JldHVybiBlLmhhc093blByb3BlcnR5KFwibWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlXCIpfWV4cG9ydHtjIGFzIGNvbnZlcnRNZXNoTWF0ZXJpYWxUb1BCUk1hdGVyaWFsfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e2Fzc2VydElzU29tZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7TWluUHJpb3JpdHkgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL01lbUNhY2hlLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7Z2VuZXJhdGVVVUlEIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91dWlkLmpzXCI7aW1wb3J0e25vcm1hbEZyb21NYXQ0IGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL21hdGgvbWF0My5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL21hdDNmNjQuanNcIjtpbXBvcnR7cSBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtPTkVTIGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy92ZWMzZjY0LmpzXCI7aW1wb3J0e3Byb2plY3RCb3VuZGluZ1NwaGVyZSBhcyBkfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJvdW5kaW5nU3BoZXJlLmpzXCI7aW1wb3J0e2lzUmVsYXRpdmVWZXJ0ZXhTcGFjZSBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvbWVzaFZlcnRleFNwYWNlVXRpbHMuanNcIjtpbXBvcnR7aCBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnR7Q2FjaGVkTWVzaERhdGEgYXMgbX1mcm9tXCIuL0NhY2hlZE1lc2hEYXRhLmpzXCI7aW1wb3J0e2NvbnZlcnRNZXNoTWF0ZXJpYWxUb1BCUk1hdGVyaWFsIGFzIGh9ZnJvbVwiLi9JM1NDbGllbnRNYXRlcmlhbFV0aWwuanNcIjtjbGFzcyBme2NvbnN0cnVjdG9yKGUsdCxyLG8pe3RoaXMuX3VpZD1lLHRoaXMuX3dvcmtlcj1vLHRoaXMuX2lkMk1ldGE9bmV3IE1hcCx0aGlzLl9vaWQyTWV0YT1uZXcgTWFwLHRoaXMuX2luZGV4U1I9dC5pbmRleFNSLHRoaXMuX3ZlcnRleFNSPXQudmVydGV4U1IsdGhpcy5fcmVuZGVyU1I9dC5yZW5kZXJTUix0aGlzLl9tZW1DYWNoZT1yLm5ld0NhY2hlKGBzbC1jbGllbnQtbWVzaC1kYXRhLSR7dGhpcy5fdWlkfWApfWdldCB1aWQoKXtyZXR1cm4gdGhpcy5fdWlkfWdldCB3b3JrZXIoKXtyZXR1cm4gdGhpcy5fd29ya2VyfWdldCBpbmRleFNSKCl7cmV0dXJuIHRoaXMuX2luZGV4U1J9Z2V0IHJlbmRlclNSKCl7cmV0dXJuIHRoaXMuX3JlbmRlclNSfWNyZWF0ZU1lc2hOb2RlSW5mbyhlLHQpe2NvbnN0IHI9YG1lc2gke3R9YCxvPWUuZXh0ZW50LG49by5zcGF0aWFsUmVmZXJlbmNlLHM9dGhpcy5faW5kZXhTUixhPXkobyxlLm9yaWdpbik7ZChhLG4sYSxzKTtyZXR1cm57dHlwZTpcIm1lc2hcIixpZDpyLHZlcnNpb246dyhlKSxvaWQ6dCxtYnM6YSxjb21wb25lbnROb2RlSWRzOltdLHVubG9hZGVkTWVzaDplLG5vZGVJbmRleDpudWxsLGxvYWRNZXNoUHJvbWlzZTpudWxsfX1hZGRNZXNoTm9kZSh0LHIpe2lmKG51bGwhPXRoaXMuZ2V0TWVzaE5vZGVJbmRleChyLm9pZCkpdGhyb3cgbmV3IGUoXCJzY2VuZWxheWVyXCIsYEkzU0NsaWVudE5vZGVMb2FkZXI6IGNsaWVudCBzaWRlIG1lc2ggZm9yIGZlYXR1cmUgb2lkPSR7ci5vaWR9IGFscmVhZHkgZXhpc3RzYCk7ci5ub2RlSW5kZXg9dCx0aGlzLl9pZDJNZXRhLnNldChyLmlkLHIpLHRoaXMuX29pZDJNZXRhLnNldChyLm9pZCxyKX1nZXRNZXNoTm9kZUluZGV4KGUpe2NvbnN0IHQ9dGhpcy5fb2lkMk1ldGEuZ2V0KGUpO3JldHVybiBudWxsPT10fHxcIm1lc2hcIiE9PXQudHlwZT9udWxsOnQubm9kZUluZGV4fWdldE1lc2hOb2RlSW5mbyhlKXtjb25zdCB0PXRoaXMuX29pZDJNZXRhLnZhbHVlcygpO2Zvcihjb25zdCByIG9mIHQpaWYoXCJtZXNoXCI9PT1yLnR5cGUmJnIuaWQ9PT1lKXJldHVybiByO3JldHVybiBudWxsfXJlbW92ZU5vZGUoZSl7Y29uc3QgdD10aGlzLl9pZDJNZXRhLmdldChlKTtudWxsIT10JiYodGhpcy5faWQyTWV0YS5kZWxldGUoZSksXCJtZXNoXCI9PT10LnR5cGUmJnRoaXMuX29pZDJNZXRhLmRlbGV0ZSh0Lm9pZCkpfWFzeW5jIGxvYWROb2RlSlNPTih0KXtjb25zdCByPXRoaXMuX2lkMk1ldGEuZ2V0KHQpO2lmKG51bGw9PXIpdGhyb3cgbmV3IGUoXCJzY2VuZWxheWVyXCIsYEkzU0NsaWVudE5vZGVMb2FkZXI6OmxvYWROb2RlSlNPTiB1bmFibGUgdG8gZmluZCBub2RlICR7dH1gKTtzd2l0Y2goci50eXBlKXtjYXNlXCJtZXNoXCI6cmV0dXJuIHRoaXMuX2xvYWRNZXNoTm9kZUpTT04ocik7Y2FzZVwibWVzaC1jb21wb25lbnRcIjpyZXR1cm4gcChyKTtkZWZhdWx0OnRocm93IG5ldyBlKFwic2NlbmVsYXllclwiLGBJM1NDbGllbnROb2RlTG9hZGVyOjpsb2FkTm9kZUpTT04gdW5hYmxlIHRvIGhhbmRsZSBub2RlICR7dH1gKX19YXN5bmMgX2xvYWRNZXNoTm9kZUpTT04oZSl7Y29uc3QgdD1lLmlkLHI9KGF3YWl0IHRoaXMuX2dldE1lc2hEYXRhKGUpKS5sb2FkZWRNZXNoO2lmKG51bGw9PXIuY29tcG9uZW50c3x8MD09PXIuY29tcG9uZW50cy5sZW5ndGgpcmV0dXJue2lkOnQsdmVyc2lvbjpudWxsLG1iczplLm1icyxvYmI6bnVsbCxzaGFyZWRSZXNvdXJjZTpudWxsLGdlb21ldHJ5RGF0YTpudWxsLGF0dHJpYnV0ZURhdGE6bnVsbCxmZWF0dXJlRGF0YTpudWxsLGNoaWxkcmVuOm51bGx9O2NvbnN0IG89W10sbj1yLmNvbXBvbmVudHM7Zm9yKGxldCBzPTA7czxuLmxlbmd0aDsrK3Mpe2NvbnN0IHI9YCR7dH0tY29tcG9uZW50JHtzfWAsbj17dHlwZTpcIm1lc2gtY29tcG9uZW50XCIsaWQ6cixtYnM6ZS5tYnMsY29tcG9uZW50SW5kZXg6cyxtZXNoTm9kZUluZm86ZSx0ZXh0dXJlRGF0YTpuZXcgTWFwfTt0aGlzLl9pZDJNZXRhLnNldChuLmlkLG4pLGUuY29tcG9uZW50Tm9kZUlkcy5wdXNoKHIpLG8ucHVzaCh7aWQ6bi5pZCxocmVmOm51bGwsbWJzOm4ubWJzLG9iYjpudWxsfSl9cmV0dXJue2lkOnQsdmVyc2lvbjpudWxsLG1iczplLm1icyxvYmI6bnVsbCxzaGFyZWRSZXNvdXJjZTpudWxsLGdlb21ldHJ5RGF0YTpudWxsLGF0dHJpYnV0ZURhdGE6bnVsbCxmZWF0dXJlRGF0YTpudWxsLGNoaWxkcmVuOm99fXVwZGF0ZU5vZGVJbmRleChlLHQscil7Y29uc3Qgbz10aGlzLl9pZDJNZXRhLmdldChlKTtvJiZcIm1lc2hcIj09PW8udHlwZSYmKG8ubm9kZUluZGV4PXIpfWFzeW5jIGxvYWROb2RlRGF0YShyLG4pe2NvbnN0IHM9dGhpcy5faWQyTWV0YS5nZXQocik7aWYobnVsbD09c3x8XCJtZXNoLWNvbXBvbmVudFwiIT09cy50eXBlKXRocm93IG5ldyBlKFwic2NlbmVsYXllclwiLGBGYWlsZWQgdG8gbG9hZCBjbGllbnQgbm9kZSBkYXRhIGZvciBub2RlICR7cn0gKHVuZXhwZWN0ZWQgbm9kZSBpbmZvKWApO2NvbnN0IGE9cy5tZXNoTm9kZUluZm8saT1hd2FpdCB0aGlzLl9nZXRNZXNoRGF0YShhKSxsPWkubG9hZGVkTWVzaCxkPWEub2lkO2lmKG51bGw9PWwuY29tcG9uZW50cyl0aHJvdyBuZXcgZShcInNjZW5lbGF5ZXJcIixgRmFpbGVkIHRvIGxvYWQgY2xpZW50IG5vZGUgZGF0YSBmb3Igbm9kZSAke3J9ICh1bmV4cGVjdGVkIG51bGwgcmVmZXJlbmNlKWApO2NvbnN0IGM9bC5jb21wb25lbnRzW3MuY29tcG9uZW50SW5kZXhdLHttYXRlcmlhbDp1LHJlcXVpcmVkVGV4dHVyZXM6bSx0ZXh0dXJlRGF0YTpmfT1hd2FpdCBoKGMubWF0ZXJpYWwpO2lmKG51bGwhPWYpZm9yKGNvbnN0IGUgb2YgZiludWxsIT1lJiZzLnRleHR1cmVEYXRhLnNldChlLmlkLGUpO2NvbnN0IHA9e3BhcmFtczp7bWF0ZXJpYWw6dX0sdHlwZTpcIkFycmF5QnVmZmVyVmlld1wifSx7dmVydGV4U3BhY2U6eSxvcmlnaW46TSx0cmFuc2Zvcm06d309bCxTPVtNLngsTS55LE0uej8/MF07aS5wcm9qZWN0aW9uUHJvbWlzZXx8KHQodGhpcy5fd29ya2VyLFwiU2NlbmVMYXllcldvcmtlciBpcyBuZWVkZWQgdG8gcHJvamVjdCBtZXNoXCIpLGkucHJvamVjdGlvblByb21pc2U9dGhpcy5fd29ya2VyLnByb2plY3Qoe3Bvc2l0aW9uczpsLnZlcnRleEF0dHJpYnV0ZXMucG9zaXRpb24sbG9jYWxNYXRyaXg6dz8ubG9jYWxNYXRyaXgsdmVydGV4U3BhY2U6eS50b0pTT04oKSxvcmlnaW46UyxpblNwYXRpYWxSZWZlcmVuY2U6bC5zcGF0aWFsUmVmZXJlbmNlLnRvSlNPTigpLG91dFNwYXRpYWxSZWZlcmVuY2U6dGhpcy5fdmVydGV4U1IudG9KU09OKCl9LG4pKTtjb25zdHtwcm9qZWN0ZWQ6YixvcmlnaW5hbDpfLHByb2plY3RlZE9yaWdpbjpOfT1hd2FpdCBpLnByb2plY3Rpb25Qcm9taXNlO2wudmVydGV4QXR0cmlidXRlcy5wb3NpdGlvbj1fO2NvbnN0e3RyYW5zZm9ybWVkOnYsb3JpZ2luYWw6RH09YXdhaXQgeChjLGksdGhpcy5fd29ya2VyLG4pO2wudmVydGV4QXR0cmlidXRlcy5ub3JtYWw9RCxvKG4pO2NvbnN0e2dlb21ldHJ5QnVmZmVyOlIsZ2VvbWV0cnlEZXNjcmlwdG9yOmp9PWcoYixjLmZhY2VzLHYsbC52ZXJ0ZXhBdHRyaWJ1dGVzLnV2LGwudmVydGV4QXR0cmlidXRlcy5jb2xvcixkKTtyZXR1cm57Z2VvbWV0cnlEYXRhOntmZWF0dXJlRGF0YVBvc2l0aW9uOk4sZmVhdHVyZUlkczpbXSxnZW9tZXRyaWVzOltwXX0sYXR0cmlidXRlRGF0YUluZm86e2F0dHJpYnV0ZURhdGE6e30sbG9hZGVkQXR0cmlidXRlczpbXX0sZ2VvbWV0cnlCdWZmZXI6UixnZW9tZXRyeURlc2NyaXB0b3I6aixyZXF1aXJlZFRleHR1cmVzOm0sdGV4dHVyZURhdGE6Zixub3JtYWxSZWZlcmVuY2VGcmFtZTp0aGlzLl92ZXJ0ZXhTUi5pc0dlb2dyYXBoaWM/XCJlYXN0LW5vcnRoLXVwXCI6XCJ2ZXJ0ZXgtcmVmZXJlbmNlLWZyYW1lXCJ9fWFzeW5jIGxvYWRBdHRyaWJ1dGVzKGUsdCxyKXtjb25zdCBvPWUubnVtRmVhdHVyZXMsbj17fTtmb3IoY29uc3R7ZmllbGQ6e25hbWU6c319b2YgdCluW3NdPW5ldyBBcnJheShvKTtyZXR1cm4gbn1hc3luYyBsb2FkVGV4dHVyZXMoZSx0LHIpe2NvbnN0IG89ZS5pZCxuPXRoaXMuX2lkMk1ldGEuZ2V0KG8pO2lmKG51bGw9PW58fFwibWVzaC1jb21wb25lbnRcIiE9PW4udHlwZSl0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIHRleHR1cmVzIGZvciBub2RlICR7ZS5pZH0gKHVuZXhwZWN0ZWQgbm9kZSBpbmZvKWApO2NvbnN0IHM9W107Zm9yKGNvbnN0IGEgb2YgdClzLnB1c2gobi50ZXh0dXJlRGF0YS5nZXQoYS5pZCl8fG51bGwpO3JldHVybiBzfWFzeW5jIF9nZXRNZXNoRGF0YShlKXtjb25zdCB0PWUudmVyc2lvbixvPXRoaXMuX21lbUNhY2hlLmdldCh0KTtpZihudWxsPT1vKXtpZihudWxsIT1lLmxvYWRNZXNoUHJvbWlzZSlyZXR1cm4gZS5sb2FkTWVzaFByb21pc2U7Y29uc3Qgbz1hc3luYyhvLG4pPT57Y29uc3Qgcz1lLnVubG9hZGVkTWVzaC5jbG9uZSgpO3RyeXthd2FpdCBzLmxvYWQoKX1jYXRjaChpKXtuKGkpfWNvbnN0IGE9bmV3IG0ocyk7dGhpcy5fbWVtQ2FjaGUucHV0KHQsYSxyKSxlLmxvYWRNZXNoUHJvbWlzZT1udWxsLG8oYSl9O3JldHVybiBlLmxvYWRNZXNoUHJvbWlzZT1uZXcgUHJvbWlzZSgoKGUsdCk9Pm8oZSx0KSkpLGUubG9hZE1lc2hQcm9taXNlfXJldHVybiBvfX1hc3luYyBmdW5jdGlvbiBwKGUpe3JldHVybntpZDplLmlkLHZlcnNpb246ZS5tZXNoTm9kZUluZm8udmVyc2lvbixtYnM6ZS5tYnMsb2JiOm51bGwsc2hhcmVkUmVzb3VyY2U6bnVsbCxnZW9tZXRyeURhdGE6bnVsbCxhdHRyaWJ1dGVEYXRhOm51bGwsZmVhdHVyZURhdGE6bnVsbCxjaGlsZHJlbjpudWxsLGlzRW1wdHk6ITF9fWZ1bmN0aW9uIHkoZSx0KXtjb25zdHtzcGF0aWFsUmVmZXJlbmNlOnJ9PWUsbz1bMSwtMV0sbj1bLjUqZS53aWR0aCwuNSplLmhlaWdodCxlLmhhc1o/LjUqKGUuem1heC1lLnptaW4pOjBdLHM9ci5pc0dlb2dyYXBoaWM/ci5tZXRlcnNQZXJVbml0OjEsYT1lLmNlbnRlcjtsZXQgaT0wO2lmKGUuaGFzWilmb3IobGV0IGw9MDtsPDI7KytsKWZvcihsZXQgZT0wO2U8MjsrK2UpZm9yKGxldCByPTA7cjwyOysrcil7Y29uc3QgZD0oYS54K29bbF0qblswXS10LngpKnMsYz0oYS55K29bZV0qblsxXS10LnkpKnMsdT1hLnorb1tyXSpuWzJdLXQuejtpPU1hdGgubWF4KGQqZCtjKmMrdSp1LGkpfWVsc2UgZm9yKGxldCBsPTA7bDwyOysrbClmb3IobGV0IGU9MDtlPDI7KytlKXtjb25zdCByPShhLngrb1tsXSpuWzBdLXQueCkqcyxkPShhLnkrb1tlXSpuWzFdLXQueSkqcztpPU1hdGgubWF4KHIqcitkKmQsaSl9cmV0dXJuIHUoW3QueCx0LnksdC56XSxNYXRoLnNxcnQoaSkpfWFzeW5jIGZ1bmN0aW9uIHgoZSxyLG8sbil7Y29uc3R7dHJhbnNmb3JtOmQsdmVydGV4QXR0cmlidXRlczpjfT1yLmxvYWRlZE1lc2gsdT1cInNvdXJjZVwiPT09ZS5zaGFkaW5nP2Mubm9ybWFsOm51bGw7aWYoIShudWxsIT11JiZudWxsIT1kJiYoMCE9PWQucm90YXRpb25BbmdsZXx8IWkoZC5zY2FsZSxsKSkpKXJldHVybnt0cmFuc2Zvcm1lZDp1LG9yaWdpbmFsOmMubm9ybWFsfTtpZighci5ub3JtYWxzVHJhbnNmb3JtUHJvbWlzZSl7dChvLFwiU2NlbmVMYXllcldvcmtlciBpcyBuZWVkZWQgdG8gdHJhbnNmb3JtIG1lc2ggbm9ybWFsc1wiKTtjb25zdCBlPWEoKTtzKGUsZC5sb2NhbE1hdHJpeCksci5ub3JtYWxzVHJhbnNmb3JtUHJvbWlzZT1vLnRyYW5zZm9ybU5vcm1hbHMoe25vcm1hbE1hdHJpeDplLG5vcm1hbHM6dX0sbil9cmV0dXJuIHIubm9ybWFsc1RyYW5zZm9ybVByb21pc2V9ZnVuY3Rpb24gZyhlLHQscixvLG4scyl7Y29uc3QgYT0xLGk9KHQ/Lmxlbmd0aD8/MCkvMyxsPTMqaTtsZXQgZD0wLGM9MCx1PSExLG09MCxoPSExLGY9MCxwPSExLHk9MCx4PTAsZz0wO2QrPVMsZCs9UyxjPWQsZCs9MypsKmIsbnVsbCE9ciYmKHU9ITAsbT1kLGQrPTMqbCpiKSxudWxsIT1vJiYoaD0hMCxmPWQsZCs9MipsKmIpLG51bGwhPW4mJihwPSEwLHk9ZCxkKz00KmwqXykseD1kLGQrPWEqTixnPWQsZCs9MiphKlM7Y29uc3Qgdz1uZXcgQXJyYXlCdWZmZXIoZCksdj1uZXcgVWludDhBcnJheSh3KTtNKHYsMCxsKSxNKHYsUyxhKTtjb25zdCBEPW5ldyBGbG9hdDMyQXJyYXkodyxjKSxSPW51bGwhPXI/bmV3IEZsb2F0MzJBcnJheSh3LG0pOm51bGwsaj1udWxsIT1vP25ldyBGbG9hdDMyQXJyYXkodyxmKTpudWxsLEk9bnVsbCE9bj9uZXcgVWludDhBcnJheSh3LHkpOm51bGw7Zm9yKGxldCBNPTA7TTxpOysrTSl7Y29uc3Qgcz0zKk07Zm9yKGxldCBhPTA7YTwzOysrYSl7Y29uc3QgaT10W3MrYV0sbD0zKmksZD05Kk0rMyphO2lmKERbZF09ZVtsXSxEW2QrMV09ZVtsKzFdLERbZCsyXT1lW2wrMl0sUiYmKFJbZF09cltsXSxSW2QrMV09cltsKzFdLFJbZCsyXT1yW2wrMl0pLGope2NvbnN0IGU9MippLHQ9NipNKzIqYTtqW3RdPW9bZV0salt0KzFdPW9bZSsxXX1pZihJKXtjb25zdCBlPTQqaSx0PTEyKk0rNCphO0lbdF09bltlXSxJW3QrMV09bltlKzFdLElbdCsyXT1uW2UrMl0sSVt0KzNdPW5bZSszXX19fU0odix4LHMpLE0odix4K1Mscy8yKiozMiksTSh2LGcsMCksTSh2LGcrUyxpLTEpO3JldHVybntnZW9tZXRyeUJ1ZmZlcjp3LGdlb21ldHJ5RGVzY3JpcHRvcjp7aXNEcmFjbzohMSxpc0xlZ2FjeTohMCxjb2xvcjpwLG5vcm1hbDp1LHV2MDpoLHV2UmVnaW9uOiExLGZlYXR1cmVJbmRleDohMH19fWZ1bmN0aW9uIE0oZSx0LHIpe2VbdF09MjU1JnIsZVt0KzFdPTI1NSZyPj44LGVbdCsyXT0yNTUmcj4+MTYsZVt0KzNdPTI1NSZyPj4yNH1mdW5jdGlvbiB3KGUpe2NvbnN0IHQ9ZS5tZXRhZGF0YS5kaXNwbGF5U291cmNlPy5zb3VyY2U7aWYobnVsbD09dHx8IUFycmF5LmlzQXJyYXkodCl8fCF0Lmxlbmd0aHx8dFswXWluc3RhbmNlb2YgRmlsZSlyZXR1cm4gbigpO2NvbnN0IHI9dDtsZXQgbz1cIlwiO2Zvcihjb25zdCBuIG9mIHIpbys9bi5tYWtlSGFzaCgpO3JldHVybiBvK0pTT04uc3RyaW5naWZ5KGUudHJhbnNmb3JtPy50b0pTT04oKT8/XCJcIikrKGMoZS52ZXJ0ZXhTcGFjZSk/SlNPTi5zdHJpbmdpZnkoZS52ZXJ0ZXhTcGFjZS5vcmlnaW4pOlwiXCIpK0pTT04uc3RyaW5naWZ5KGUuc3BhdGlhbFJlZmVyZW5jZSl9Y29uc3QgUz00LGI9NCxfPTEsTj04O2V4cG9ydHtmIGFzIEkzU0NsaWVudE5vZGVMb2FkZXIseSBhcyBjcmVhdGVTcGhlcmVGcm9tRXh0ZW50LGIgYXMgc2l6ZU9mRmxvYXQzMixTIGFzIHNpemVPZkludDMyLE4gYXMgc2l6ZU9mVUludDY0LF8gYXMgc2l6ZU9mVUludDgseCBhcyB0cmFuc2Zvcm1Ob3JtYWxzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3JlbW92ZVVub3JkZXJlZCBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHttYWtlSGFuZGxlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYW5kbGVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7VGFza1ByaW9yaXR5IGFzIGl9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtsZXQgYT1jbGFzcyBleHRlbmRzIHN7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucmVmZXJlbmNlQ291bnQ9MCx0aGlzLmNhbGxiYWNrcz1uZXcgQXJyYXksdGhpcy5ydW5JbmRleD0wfWdldCBydW5uaW5nKCl7cmV0dXJuIHRoaXMuY2FsbGJhY2tzLnNvbWUoKHI9PnIucnVubmluZykpfXJ1blRhc2socil7dGhpcy5fc29ydCgpO2NvbnN0IHM9dGhpcy5jYWxsYmFja3MsdD17bnVtSW5kZXhMb2FkaW5nOjAsbnVtTm9kZXNMb2FkaW5nOjB9O2ZvcihsZXQgZT0wO2U8cy5sZW5ndGgmJiFyLmRvbmU7KytlKXNbZV0ucHJpb3JpdHk9c1tlXS5ydW5UYXNrKHIsdCksdGhpcy5ydW5JbmRleD1lfV9zb3J0KCl7Y29uc3Qgcj10aGlzLmNhbGxiYWNrcztsZXQgcz1yLmxlbmd0aDtmb3IobGV0IHQ9dGhpcy5ydW5JbmRleDt0PjA7dC0tKXtjb25zdCBlPXJbdC0xXTtsZXQgbz10O2Zvcig7bzxyLmxlbmd0aCYmZS5wcmlvcml0eTw9cltvXS5wcmlvcml0eSYmKG8hPT1zfHxlLnByaW9yaXR5PHJbb10ucHJpb3JpdHkpOylyW28tMV09cltvXSxvKys7cltvLTFdPWUscz1vLTF9dGhpcy5ydW5JbmRleD0wfWFkZChyKXt0aGlzLl9zb3J0KCksci5wcmlvcml0eT0xLzAsdGhpcy5jYWxsYmFja3MudW5zaGlmdChyKSx0aGlzLm5vdGlmeUNoYW5nZShcInJ1bm5pbmdcIil9cmVtb3ZlKHIpe3QodGhpcy5jYWxsYmFja3MsciksdGhpcy5ydW5JbmRleD10aGlzLmNhbGxiYWNrcy5sZW5ndGgsdGhpcy5fc29ydCgpLHRoaXMubm90aWZ5Q2hhbmdlKFwicnVubmluZ1wiKX19O3IoW28oe3JlYWRPbmx5OiEwfSldLGEucHJvdG90eXBlLFwicnVubmluZ1wiLG51bGwpLGE9cihbbihcImVzcmkudmlld3MuM2QubGF5ZXJzLmkzcy5JM1NGcmFtZVRhc2tcIildLGEpO2NsYXNzIGx7Y29uc3RydWN0b3IocixzKXt0aGlzLnRhc2s9cix0aGlzLmhhbmRsZT1zfX1jb25zdCBjPW5ldyBNYXA7ZnVuY3Rpb24gaChyLHMpe2xldCB0PWMuZ2V0KHIpO2lmKG51bGw9PXQpe2NvbnN0IHM9bmV3IGEsZT1yLnJlZ2lzdGVyVGFzayhpLkkzU19DT05UUk9MTEVSLHMpO3Q9bmV3IGwocyxlKSxjLnNldChyLHQpfXJldHVybiB0LnRhc2suYWRkKHMpLGUoKCgpPT57aWYobnVsbD09dClyZXR1cm47dC50YXNrLnJlbW92ZShzKTt0LnRhc2suY2FsbGJhY2tzLmxlbmd0aD4wfHwoYy5kZWxldGUociksdC5oYW5kbGUucmVtb3ZlKCksdC50YXNrLmRlc3Ryb3koKSksdD1udWxsfSkpfWV4cG9ydHtoIGFzIGFkZENhbGxiYWNrfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydHtpc0Fib3J0RXJyb3IgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtwcm9qZWN0Qm91bmRpbmdTcGhlcmUgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCb3VuZGluZ1NwaGVyZS5qc1wiO2ltcG9ydHtoIGFzIG4sayBhcyBzLGMgYXMgbyx1IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3NwaGVyZS5qc1wiO2ltcG9ydHtMb2RNZXRyaWMgYXMgYSxOb2RlQmFzZSBhcyBsLE5vZGUgYXMgZCxOb2RlRmlsdGVySW1wYWN0IGFzIGgsTm9kZUlNTW9kaWZpY2F0aW9uSW1wYWN0IGFzIHUsTm9kZVRyYXZlcnNhbFN0YXRlIGFzIGN9ZnJvbVwiLi9JM1NOb2RlLmpzXCI7aW1wb3J0e2ludmFsaWRhdGVNYnMgYXMgZyxhZGRXcmFwYXJvdW5kIGFzIF99ZnJvbVwiLi9JM1NVdGlsLmpzXCI7aW1wb3J0e1ZhbGlkYXRlZE5vZGUgYXMgZn1mcm9tXCIuL1ZhbGlkYXRlZE5vZGUuanNcIjtpbXBvcnR7RWxldmF0aW9uUmFuZ2UgYXMgbX1mcm9tXCIuLi8uLi9zdXBwb3J0L0VsZXZhdGlvblJhbmdlLmpzXCI7aW1wb3J0e09iYiBhcyB2fWZyb21cIi4uLy4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveC5qc1wiO2NsYXNzIE57Y29uc3RydWN0b3IoZSx0LGksbixzKXt0aGlzLmNoaWxkT2Zmc2V0PWUsdGhpcy5jaGlsZENvdW50PXQsdGhpcy52aXNpYmlsaXR5Q2FjaGU9aSx0aGlzLnJlZj1uLHRoaXMubm9kZT1zLHRoaXMudXNlQXNIb2xlPTAsdGhpcy5maWx0ZXJJbXBhY3Q9aC5Ob3RDaGVja2VkLHRoaXMudHJhdmVyc2FsU3RhdGU9bnVsbCx0aGlzLnBhcmVudD0tMX1pbnZhbGlkYXRlQm91bmRzKCl7dGhpcy5ub2RlPy5pbnZhbGlkYXRlU2VydmljZUJWc0luUmVuZGVyU1IoKSx0aGlzLnJlZj8uaW52YWxpZGF0ZVNlcnZpY2VCVnNJblJlbmRlclNSKCl9fWNsYXNzIHB7Y29uc3RydWN0b3IoZT1uZXcgQXJyYXksdD1uZXcgQXJyYXkpe3RoaXMubm9kZXM9ZSx0aGlzLmNoaWxkcmVuPXQsdGhpcy5sYXN0VHJhdmVyc2VkPTAsdGhpcy5udW1Ob2Rlc1dpdGhMb2FkZWRDaGlsZHJlbj0wfX1jbGFzcyBie2dldCBfdXNlTm9kZVBhZ2VzKCl7cmV0dXJuIHRoaXMuX3BhZ2VTaXplPjB9Y29uc3RydWN0b3IodCxpLG4scyxvLHIsbCxkLGgsdSxjLGcsXyxmLG0sdil7dGhpcy52aWV3aW5nTW9kZT10LHRoaXMuX2xheWVyPWksdGhpcy5fc3RyZWFtRGF0YUNvbnRyb2xsZXI9cyx0aGlzLl9jbGllbnROb2RlTG9hZGVyPW8sdGhpcy5fdmlld3BvcnRRdWVyaWVzPXIsdGhpcy5fbG9nZ2VyPWwsdGhpcy5ob2xlRmlsbGluZz1kLHRoaXMuX2lzTG9hZGVkPWgsdGhpcy5faXNSZWxvYWRpbmc9dSx0aGlzLl9pc1NlbGVjdGVkPWMsdGhpcy5fZW5hYmxlPWcsdGhpcy5fbmVlZHNVcGRhdGU9Xyx0aGlzLl9jYW5SZXF1ZXN0PWYsdGhpcy5fY29tcHV0ZVZpc2liaWxpdHlPYmI9bSx0aGlzLl9jb21wdXRlTm9kZUZpbHRlcmluZz12LHRoaXMuX2RpcnR5PSEwLHRoaXMuX25vZGVQYWdlcz1uZXcgTWFwLHRoaXMuX2NsaWVudE5vZGVQYWdlPW51bGwsdGhpcy5fcGFnZVNpemU9MCx0aGlzLl9yb290SW5kZXg9MCx0aGlzLl9sb2RNZXRyaWM9YS5Ob25lLHRoaXMuX2xvZENvbnZlcnNpb249ZT0+ZSx0aGlzLl9pc0VkaXRhYmxlPSExLHRoaXMuX3VybFByZWZpeD1cIlwiLHRoaXMuX2xvYWRpbmdOb2Rlcz1uZXcgU2V0LHRoaXMuX2xvYWRpbmdQYWdlcz1uZXcgU2V0LHRoaXMuX2ZhaWxlZE5vZGVzPW5ldyBTZXQsdGhpcy5fZmFpbGVkUGFnZXM9bmV3IFNldCx0aGlzLl9pbmRleE1pc3Npbmc9MSx0aGlzLl9tYXhVbmxvYWRlZFByaW89TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLHRoaXMuX21heFByb2Nlc3NpbmdQcmlvPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSx0aGlzLl92ZXJzaW9uPXgoMCksdGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbj14KDApLHRoaXMuX21heExldmVsPTEsdGhpcy5fZmVhdHVyZUVzdGltYXRlPXtlc3RpbWF0ZTowLGxlYXZlc1JlYWNoZWQ6ITF9LHRoaXMuX3VubG9hZGVkTWVtb3J5RXN0aW1hdGU9MCx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcz1uZXcgZSh7ZGVhbGxvY2F0b3I6bnVsbH0pLHRoaXMuX3ByZWZldGNoTm9kZXM9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLl91cGRhdGVzPW5ldyB5KHRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzKSx0aGlzLl9pbU1vZGlmaWNhdGlvblVuY2F0ZWdvcml6ZWQ9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLmlnbm9yZVNlcnZpY2VPYmI9ITEsdGhpcy5wcm9ncmVzc2l2ZUxvYWRQZW5hbHR5PTAsdGhpcy5fcGFnZVF1ZXVlPW5ldyBBcnJheSx0aGlzLl9uZXdQYWdlcz1uZXcgQXJyYXksdGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlPSExLHRoaXMubGF5ZXJIYXNNb2RpZmljYXRpb25zPSExLHRoaXMuX2xheWVySGFzRmlsdGVyPSExLHRoaXMuX2ZyYW1lTnVtYmVyPTAsdGhpcy5fdHJhdmVyc2VEZXNjZW5kYW50c1F1ZXVlPVswXSx0aGlzLl90cmF2ZXJzZURlc2NlbmRhbnRzTmVzdGluZ0xldmVsPTAsdGhpcy5faXNFZGl0YWJsZT1udWxsIT1pLmFzc29jaWF0ZWRMYXllcj8uaW5mb0ZvcjNELGkuc2VydmljZVVwZGF0ZVRpbWVTdGFtcD8ubGFzdFVwZGF0ZSYmKHRoaXMuX2xhc3RVcGRhdGU9YCR7aS5zZXJ2aWNlVXBkYXRlVGltZVN0YW1wLmxhc3RVcGRhdGV9YCksdGhpcy5fbWF4TG9kTGV2ZWw9dGhpcy5fdmlld3BvcnRRdWVyaWVzP3RoaXMuX3ZpZXdwb3J0UXVlcmllcy5tYXhMb2RMZXZlbDoxLHRoaXMuX2luaXQobil9X2luaXQoZSl7aWYoXCJwYWdlXCI9PT1lLnR5cGUpe2NvbnN0IHQ9ZS5yb290UGFnZTtzd2l0Y2godGhpcy5fdXJsUHJlZml4PWUudXJsUHJlZml4LHRoaXMuX3BhZ2VTaXplPWUucGFnZVNpemUsZS5sb2RNZXRyaWMpe2Nhc2VcIm1heFNjcmVlblRocmVzaG9sZFwiOnRoaXMuX2xvZE1ldHJpYz1hLk1heFNjcmVlblRocmVzaG9sZDticmVhaztjYXNlXCJtYXhTY3JlZW5UaHJlc2hvbGRTUVwiOnRoaXMuX2xvZE1ldHJpYz1hLk1heFNjcmVlblRocmVzaG9sZCx0aGlzLl9sb2RDb252ZXJzaW9uPUZ9aWYodGhpcy5faXNFZGl0YWJsZSl7dGhpcy5fcm9vdEluZGV4PS0xO2NvbnN0IGk9RShlLnJvb3RJbmRleCxlLnBhZ2VTaXplKSxuPXQubm9kZXNbaV0scz17bm9kZXM6W3tpbmRleDp0aGlzLl9yb290SW5kZXgsY2hpbGRyZW46W2Uucm9vdEluZGV4XSxtZXNoOnZvaWQgMCxvYmI6bi5vYmIsbG9kVGhyZXNob2xkOm4ubG9kVGhyZXNob2xkfV19O3RoaXMuX2FkZFBhZ2Uodyh0aGlzLl9yb290SW5kZXgsdGhpcy5fcGFnZVNpemUpLHMpLHRoaXMuZ2V0Tm9kZSgtMSkuc2VydmljZU9iYkluSW5kZXhTUj12b2lkIDB9ZWxzZSB0aGlzLl9yb290SW5kZXg9ZS5yb290SW5kZXg7dGhpcy5fYWRkUGFnZSh3KGUucm9vdEluZGV4LHRoaXMuX3BhZ2VTaXplKSx0KSx0aGlzLl91cGRhdGVQYXJlbnRzQW5kTGV2ZWwoKX1lbHNlIGlmKFwibm9kZVwiPT09ZS50eXBlKXt0aGlzLl91cmxQcmVmaXg9ZS51cmxQcmVmaXg7Y29uc3QgdD1uZXcgcDtpZih0aGlzLl9ub2RlUGFnZXMuc2V0KDAsdCksdGhpcy5faXNFZGl0YWJsZSl7dGhpcy5fY2xpZW50Tm9kZVBhZ2U9bmV3IHA7Y29uc3QgdD17aWQ6XCItMVwiLHZlcnNpb246bnVsbCxtYnM6ZS5yb290Tm9kZS5tYnMsb2JiOmUucm9vdE5vZGUub2JiLHNoYXJlZFJlc291cmNlOm51bGwsZ2VvbWV0cnlEYXRhOm51bGwsYXR0cmlidXRlRGF0YTpudWxsLGZlYXR1cmVEYXRhOm51bGwsY2hpbGRyZW46W3tpZDpcInJvb3RcIixocmVmOlwiLi4vcm9vdFwiLG1iczplLnJvb3ROb2RlLm1icyxvYmI6ZS5yb290Tm9kZS5vYmJ9XX07dGhpcy5fcm9vdEluZGV4PXRoaXMuX21ha2VDbGllbnRSZWZOb2RlKG5ldyBsKHQuaWQsbnVsbCksLTEpO2NvbnN0IGk9dGhpcy5fdmFsaWRhdGVOb2RlKHQuaWQsdCk7aSYmdGhpcy5fYWRkTm9kZShpLHRoaXMuX3Jvb3RJbmRleCl9ZWxzZSB0aGlzLl9yb290SW5kZXg9dGhpcy5fbWFrZVJlZk5vZGUobmV3IGwoZS5yb290Tm9kZS5pZCxudWxsKSwtMSk7Y29uc3QgaT10aGlzLl92YWxpZGF0ZU5vZGUoZS5yb290Tm9kZS5pZCxlLnJvb3ROb2RlKTtpJiZ0aGlzLl9hZGROb2RlKGksMCl9fWFkZENsaWVudE5vZGVUb0luZGV4KGUsdCl7Y29uc3QgaT0tMSxuPW5ldyBsKGUsdCkscz10aGlzLl9tYWtlQ2xpZW50UmVmTm9kZShuLGkpO3JldHVybiB0aGlzLl9saW5rQ2hpbGRUb1BhcmVudE5vZGUoaSxzKSx0aGlzLnJlcXVlc3RVcGRhdGUoKSxzfXJlbW92ZUNsaWVudE5vZGVGcm9tSW5kZXgoZSx0LGkpe3RoaXMuX2Rlc3Ryb3lDbGllbnRSZWZOb2RlKGUsdCxpKSx0aGlzLnJlcXVlc3RVcGRhdGUoKX1fbG9hZFBhZ2UoZSl7dGhpcy5fbG9hZGluZ1BhZ2VzLmFkZChlKTtjb25zdCBpPXRoaXMuX3VybFByZWZpeCtlO3RoaXMuX3N0cmVhbURhdGFDb250cm9sbGVyLnJlcXVlc3QoaSxcImpzb25cIikudGhlbigodD0+e3RoaXMuX3BhZ2VRdWV1ZS5wdXNoKHtwYWdlSW5kZXg6ZSxwYWdlOnR9KX0pKS5jYXRjaCgoaT0+e3RoaXMuX2xvYWRpbmdQYWdlcy5kZWxldGUoZSksdChpKXx8KHRoaXMuX2ZhaWxlZFBhZ2VzLmFkZChlKSx0aGlzLl9sb2dnZXIuZXJyb3IoXCIjbG9hZFBhZ2UoKVwiLHRoaXMuX2xheWVyLGBFcnJvciB3aGVuIGxvYWRpbmcgcGFnZSAke2V9YCxpKSl9KSl9X2FkZFF1ZXVlZFBhZ2VzKGUpe2Zvcig7dGhpcy5fcGFnZVF1ZXVlLmxlbmd0aD4wJiYhZS5kb25lOyl7Y29uc3R7cGFnZUluZGV4OnQscGFnZTppfT10aGlzLl9wYWdlUXVldWUuc2hpZnQoKTt0aGlzLl9hZGRQYWdlKHQsaSksdGhpcy5fbG9hZGluZ1BhZ2VzLmRlbGV0ZSh0KSxlLm1hZGVQcm9ncmVzcygpLHRoaXMubmVlZE5vZGVFbGV2YXRpb25SYW5nZSYmdGhpcy5fbmV3UGFnZXMucHVzaCh0KX10aGlzLl91cGRhdGVQYXJlbnRzQW5kTGV2ZWwoKX1faW52YWxpZGF0ZUVsZXZhdGlvblJhbmdlRm9yTmV3UGFnZXMoZSl7aWYodGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlKWZvcig7dGhpcy5fbmV3UGFnZXMubGVuZ3RoPjAmJiFlLmRvbmU7KXtjb25zdCBlPXRoaXMuX25vZGVQYWdlcy5nZXQodGhpcy5fbmV3UGFnZXMuc2hpZnQoKSk7ZT8ubm9kZXMuZm9yRWFjaCgoZT0+e2xldCB0PWUucGFyZW50O2Zvcig7bnVsbCE9dCYmdCE9PXRoaXMuX3Jvb3RJbmRleDspe2NvbnN0IGU9dGhpcy5nZXROb2RlKHQpO2UmJiFOdW1iZXIuaXNOYU4oZT8uZWxldmF0aW9uUmFuZ2VNaW4pJiYoZS5pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2UoKSx0aGlzLmludmFsaWRhdGVCb3VuZGluZ1ZvbHVtZUNhY2hlKHQpKSx0PXRoaXMuZ2V0UGFyZW50SW5kZXgodCl9fSkpfX1fYWRkUGFnZShlLHQpe2NvbnN0IGk9W10scz1bXSxvPXQubm9kZXMubWFwKCgodCxvKT0+e2NvbnN0IHI9aS5sZW5ndGgsYT10LmNoaWxkcmVuP3QuY2hpbGRyZW4ubGVuZ3RoOjA7cy5wdXNoKHRoaXMuX3Jvb3RJbmRleCk7Zm9yKGxldCBlPTA7ZTxhO2UrKylpLnB1c2godC5jaGlsZHJlbltlXSk7Y29uc3QgbD1gJHt0LmluZGV4fWAsaD12LmZyb21KU09OKHQub2JiKSx1PW4oaC5jZW50ZXIsaC5yYWRpdXMpLGM9dC5tZXNoPy5hdHRyaWJ1dGUsZz10Lm1lc2g/Lmdlb21ldHJ5LF89dC5tZXNoPy5tYXRlcmlhbCxmPXtoYXNTaGFyZWRSZXNvdXJjZTohMSxpc0VtcHR5Om51bGw9PWcsYXR0cmlidXRlczpudWxsIT1jPy5yZXNvdXJjZT9gJHtjLnJlc291cmNlfWA6dm9pZCAwLGdlb21ldHJ5Om51bGwhPWc/LnJlc291cmNlP2Ake2cucmVzb3VyY2V9YDp2b2lkIDAsdGV4dHVyZTpudWxsIT1fPy5yZXNvdXJjZT9gJHtfLnJlc291cmNlfWA6dm9pZCAwLGdlb21ldHJ5RGVmaW5pdGlvbjpnP2cuZGVmaW5pdGlvbjotMSxtYXRlcmlhbERlZmluaXRpb246Xz9fLmRlZmluaXRpb246LTF9LG09bmV3IGQobCxNKG8sZSx0aGlzLl9wYWdlU2l6ZSksdSxhLDAsZix0aGlzLl9sYXN0VXBkYXRlLHRoaXMuX2xvZE1ldHJpYyx0aGlzLl9sb2RDb252ZXJzaW9uKHQubG9kVGhyZXNob2xkKSxnPy5mZWF0dXJlQ291bnQ/P251bGwpO3JldHVybiBtLnNlcnZpY2VPYmJJbkluZGV4U1I9aCxtLnZpc2liaWxpdHlPYmJJblJlbmRlclNSPXRoaXMuX2NvbXB1dGVWaXNpYmlsaXR5T2JiKG0pLG0udmVydGV4Q291bnQ9Zz9nLnZlcnRleENvdW50OjAsbmV3IE4ocixhLFAodGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbiksbnVsbCxtKX0pKSxyPW5ldyBwKG8saSk7LTE9PT1lP3RoaXMuX2NsaWVudE5vZGVQYWdlPXI6dGhpcy5fbm9kZVBhZ2VzLnNldChlLHIpfV91cGRhdGVQYXJlbnRzQW5kTGV2ZWwoKXtjb25zdCBlPW5ldyBBcnJheSx0PSh0LGksbik9Pntjb25zdCBzPXRoaXMuX2dldFBhZ2UodCk7aWYobnVsbCE9cyl7Y29uc3Qgbz1FKHQsdGhpcy5fcGFnZVNpemUpLHI9cy5ub2Rlc1tvXTtyLnBhcmVudD1udWxsIT1pP2k6LTE7Y29uc3QgYT1yLm5vZGU7bnVsbCE9YSYmKGEubGV2ZWw9bixlLnB1c2godCkpfX07Zm9yKHQodGhpcy5fcm9vdEluZGV4LG51bGwsMCk7ZS5sZW5ndGg7KXtjb25zdCBpPWUucG9wKCksbj10aGlzLmdldE5vZGUoaSk7aWYobnVsbCE9bilmb3IobGV0IGU9MDtlPG4uY2hpbGRDb3VudDtlKyspe3QodGhpcy5nZXRDaGlsZEluZGV4KG4uaW5kZXgsZSksaSxuLmxldmVsKzEpLHRoaXMuX21heExldmVsPU1hdGgubWF4KHRoaXMuX21heExldmVsLG4ubGV2ZWwrMSl9fX1fZ2V0UGFnZShlKXtjb25zdCB0PXcoZSx0aGlzLl9wYWdlU2l6ZSk7cmV0dXJuIHRoaXMuX2dldFBhZ2VGcm9tUGFnZUluZGV4KHQpfV9nZXRQYWdlRnJvbVBhZ2VJbmRleChlKXtyZXR1cm4gZTwwP3RoaXMuX2NsaWVudE5vZGVQYWdlOnRoaXMuX25vZGVQYWdlcy5nZXQoZSl9X2dldE5vZGVJbnRlcm5hbChlKXtjb25zdCB0PXRoaXMuX2dldFBhZ2UoZSk7cmV0dXJuIG51bGw9PXQ/bnVsbDoodC5sYXN0VHJhdmVyc2VkPXRoaXMuX2ZyYW1lTnVtYmVyLHQubm9kZXNbRShlLHRoaXMuX3BhZ2VTaXplKV0pfV9hZGROb2RlKGUsdCl7ZS5jaGlsZHJlbiYmdGhpcy5wb3B1bGF0ZUNoaWxkcmVuKHQsZS5jaGlsZHJlbik7Y29uc3QgaT10aGlzLmdldFBhcmVudCh0KSxuPW51bGwhPWk/aS5sZXZlbCsxOjA7dGhpcy5fbWF4TGV2ZWw9TWF0aC5tYXgodGhpcy5fbWF4TGV2ZWwsZS5jaGlsZHJlbj9uKzE6bik7Y29uc3R7bG9kTWV0cmljOnMsbWF4RXJyb3I6b309TyhlLmxvZFNlbGVjdGlvbikscj10aGlzLl9nZXROb2RlSW50ZXJuYWwodCksYT1uZXcgZChlLmlkLHQsZS5tYnMsci5jaGlsZENvdW50LG4sZS5yZXNvdXJjZXMsZS52ZXJzaW9uLHMsbyxlLm51bUZlYXR1cmVzKTtyLm5vZGU9YSxlLm9iYiYmKGEuc2VydmljZU9iYkluSW5kZXhTUj12LmZyb21KU09OKGUub2JiKSksYS52aXNpYmlsaXR5T2JiSW5SZW5kZXJTUj10aGlzLl9jb21wdXRlVmlzaWJpbGl0eU9iYihhKTtjb25zdCBsPXIucmVmO3JldHVybiBudWxsIT1sJiYobnVsbD09bC5zZXJ2aWNlTWJzSW5JbmRleFNSJiYobC5zZXJ2aWNlTWJzSW5JbmRleFNSPWUubWJzKSxhLnNoYXJlU2VydmljZUJWc0luUmVuZGVyU1JXaXRoKGwpLGwudmlzaWJpbGl0eU9iYkluUmVuZGVyU1I9YS52aXNpYmlsaXR5T2JiSW5SZW5kZXJTUiksYX1fbWFrZVJlZk5vZGUoZSx0KXtjb25zdCBpPXRoaXMuX25vZGVQYWdlcy5nZXQoMCk7aWYodDwtMSlyZXR1cm4gdGhpcy5fbWFrZUNsaWVudFJlZk5vZGUoZSx0KTtpZihudWxsPT1pKXJldHVybi0xO2NvbnN0IG49aS5ub2Rlcy5sZW5ndGgscz1uZXcgTigwLDAsUCh0aGlzLl92aXNpYmlsaXR5Q2FjaGVWZXJzaW9uKSxlLG51bGwpO3JldHVybiBpLm5vZGVzLnB1c2gocykscy5wYXJlbnQ9dCxlLmludmFsaWRhdGVTZXJ2aWNlQlZzSW5SZW5kZXJTUigpLG59X21ha2VDbGllbnRSZWZOb2RlKGUsdCl7Y29uc3QgaT10aGlzLl9jbGllbnROb2RlUGFnZTtpZihudWxsPT1pKXJldHVybi0xO2lmKHQ+PTApdGhyb3cgbmV3IEVycm9yKFwiSTNTSW5kZXg6OmNsaWVudCBzaWRlIG5vZGVzIGNhbiBub3QgYmUgbWFkZSBjaGlsZHJlbiBvZiBzZXJ2aWNlIHNpZGUgbm9kZXMuXCIpO2NvbnN0IG49LShpLm5vZGVzLmxlbmd0aCsxKSxzPW5ldyBOKDAsMCxQKHRoaXMuX3Zpc2liaWxpdHlDYWNoZVZlcnNpb24pLGUsbnVsbCk7cmV0dXJuIGkubm9kZXMucHVzaChzKSxzLnBhcmVudD10LGUuaW52YWxpZGF0ZVNlcnZpY2VCVnNJblJlbmRlclNSKCksbn1fbGlua0NoaWxkVG9QYXJlbnROb2RlKGUsdCl7Y29uc3QgaT10aGlzLl9jbGllbnROb2RlUGFnZTtpZihudWxsPT1pfHxlPj0wKXJldHVybjtjb25zdCBuPUUoZSx0aGlzLl9wYWdlU2l6ZSkscz1FKHQsdGhpcy5fcGFnZVNpemUpLG89aS5ub2Rlc1tuXSxyPW8uY2hpbGRPZmZzZXQ7aS5jaGlsZHJlbi5zcGxpY2Uoby5jaGlsZE9mZnNldCtvLmNoaWxkQ291bnQsMCx0KTtjb25zdCBhPTE7by5jaGlsZENvdW50Kz1hLG51bGwhPW8ubm9kZSYmKG8ubm9kZS5jaGlsZENvdW50Kz1hKTtmb3IoY29uc3QgbCBvZiBpLm5vZGVzKWwuY2hpbGRPZmZzZXQ+ciYmKGwuY2hpbGRPZmZzZXQrPWEpO2kubm9kZXNbc10ucGFyZW50PWUsdGhpcy5fdXBkYXRlUGFyZW50Qm91bmRpbmdJbmZvcm1hdGlvbihlKX1fZGVzdHJveUNsaWVudFJlZk5vZGUoZSx0LGkpe2NvbnN0IG49dGhpcy5fY2xpZW50Tm9kZVBhZ2U7aWYobnVsbD09bilyZXR1cm47Y29uc3Qgcz10aGlzLmdldFBhcmVudEluZGV4KGUpO2lmKG51bGw9PXMpcmV0dXJuO2NvbnN0IG89bmV3IFNldCxyPW5ldyBNYXAsYT1lPT57Y29uc3QgaT1FKGUsdGhpcy5fcGFnZVNpemUpLHM9bi5ub2Rlc1tpXTtpZihzLmNoaWxkQ291bnQ+MClmb3IobGV0IHQ9cy5jaGlsZE9mZnNldDt0PHMuY2hpbGRPZmZzZXQrcy5jaGlsZENvdW50OysrdClhKG4uY2hpbGRyZW5bdF0pO2NvbnN0IHI9cy5ub2RlPy5pZD8/cy5yZWY/LmlkO2lmKG51bGw9PXIpdGhyb3cgbmV3IEVycm9yKFwiTm9kZSBoYXMgbm8gaWRcIik7dChyLGUpLG8uYWRkKHMpfTthKGUpO2NvbnN0IGw9bi5ub2RlcyxkPW4uY2hpbGRyZW4saD1uLm5vZGVzLm1hcCgoKCk9Pi0xKSksdT1bXSxjPVtdO2ZvcihsZXQgZz0wO2c8bC5sZW5ndGg7KytnKXtjb25zdCBlPWxbZ107aWYoby5oYXMoZSkpY29udGludWU7Y29uc3QgdD11Lmxlbmd0aCxuPU0oZywtMSx0aGlzLl9wYWdlU2l6ZSkscz1NKHQsLTEsdGhpcy5fcGFnZVNpemUpO2lmKGUubm9kZSYmKGUubm9kZS5pbmRleD1zKSxoW2ddPXMsdS5wdXNoKGUpLG4hPT1zKXtjb25zdCB0PWUubm9kZT8uaWQ/P2UucmVmPy5pZDtpZihudWxsPT10KXRocm93IG5ldyBFcnJvcihcIk5vZGUgaGFzIG5vIGlkXCIpO2kodCxuLHMpLHIuc2V0KG4scyl9fWZvcihsZXQgZz0wO2c8dS5sZW5ndGg7KytnKXtjb25zdCBlPU0oZywtMSx0aGlzLl9wYWdlU2l6ZSksdD11W2ddLGk9Yy5sZW5ndGg7Zm9yKGxldCBuPXQuY2hpbGRPZmZzZXQ7bjx0LmNoaWxkT2Zmc2V0K3QuY2hpbGRDb3VudDsrK24pe2NvbnN0IHQ9ZFtuXTtpZih0Pj0wKWMucHVzaCh0KTtlbHNle2NvbnN0IGk9RSh0LHRoaXMuX3BhZ2VTaXplKSxuPWxbaV07aWYoby5oYXMobikpY29udGludWU7Y29uc3Qgcz1oW2ldO2MucHVzaChzKSxuLnBhcmVudD1lfX10LmNoaWxkT2Zmc2V0PWksdC5jaGlsZENvdW50PWMubGVuZ3RoLWksdC5ub2RlJiYodC5ub2RlLmNoaWxkQ291bnQ9dC5jaGlsZENvdW50KX1uLm5vZGVzPXUsbi5jaGlsZHJlbj1jLHRoaXMuX3VwZGF0ZVBhcmVudEJvdW5kaW5nSW5mb3JtYXRpb24oaFtFKHMsdGhpcy5fcGFnZVNpemUpXSl9X3VwZGF0ZVBhcmVudEJvdW5kaW5nSW5mb3JtYXRpb24oZSl7bGV0IHQ9ZTtkb3tsZXQgZT1udWxsO2NvbnN0IG49dGhpcy5fY2xpZW50Tm9kZUxvYWRlci5pbmRleFNSLGE9dGhpcy5fY2xpZW50Tm9kZUxvYWRlci5yZW5kZXJTUixsPXRoaXMuX2dldE5vZGVJbnRlcm5hbCh0KTtpZihudWxsPT1sKXJldHVybjtmb3IobGV0IG89MDtvPGwuY2hpbGRDb3VudDtvKyspe2NvbnN0IGw9dGhpcy5nZXRDaGlsZEluZGV4KHQsbyksZD10aGlzLl9nZXROb2RlSW50ZXJuYWwobCksaD1udWxsIT1kP2QucmVmfHxkLm5vZGU6bnVsbDtpZihudWxsIT1oJiZoLnNlcnZpY2VNYnNJbkluZGV4U1JbM10+MClpZihudWxsPT1lKWU9cyhoLnNlcnZpY2VNYnNJbkluZGV4U1IsRCk7ZWxzZXtjb25zdCB0PWsscz16LG89VDtpKGguc2VydmljZU1ic0luSW5kZXhTUixuLHQsYSksaShlLG4scyxhKSxyKHQscyxvKSxpKG8sYSxlLG4pfX1jb25zdCBkPXQ9PntudWxsIT10JiYodC5zZXJ2aWNlT2JiSW5JbmRleFNSPW51bGwsbnVsbCE9ZT8odC5zZXJ2aWNlTWJzSW5JbmRleFNSPz89bygpLHMoZSx0LnNlcnZpY2VNYnNJbkluZGV4U1IpKTpnKHQuc2VydmljZU1ic0luSW5kZXhTUiksdC5pbnZhbGlkYXRlU2VydmljZUJWc0luUmVuZGVyU1IoKSx0Lmdlb21ldHJ5T2JiSW5SZW5kZXJTUj1udWxsKX07ZChsLnJlZiksZChsLm5vZGUpLHRoaXMuaW52YWxpZGF0ZU5vZGVWaXNpYmlsaXR5Q2FjaGVJbnRlcm5hbChsKSx0PXRoaXMuZ2V0UGFyZW50SW5kZXgodCl9d2hpbGUobnVsbCE9dCl9cG9wdWxhdGVDaGlsZHJlbihlLHQpe2NvbnN0IGk9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpLG49dGhpcy5fZ2V0UGFnZShlKTtpLmNoaWxkT2Zmc2V0PW4uY2hpbGRyZW4ubGVuZ3RoLGkuY2hpbGRDb3VudD10Lmxlbmd0aDtmb3IobGV0IHM9MDtzPHQubGVuZ3RoO3MrKyl7Y29uc3QgaT10aGlzLl9tYWtlUmVmTm9kZSh0W3NdLGUpO24uY2hpbGRyZW4ucHVzaChpKX19Z2V0Tm9kZShlKXtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtyZXR1cm4gbnVsbCE9dD90Lm5vZGU6bnVsbH1nZXRJbmRleEJ5SWQoZSl7bGV0IHQ7cmV0dXJuIHRoaXMuX2ZvckFsbE5vZGVzKCgoaSxuKT0+eyhudWxsIT1pLm5vZGUmJmkubm9kZS5pZD09PWV8fG51bGwhPWkucmVmJiZpLnJlZi5pZD09PWUpJiYodD1uKX0pKSx0fWdldE5vZGVCeUlkKGUpe2NvbnN0IHQ9dGhpcy5nZXRJbmRleEJ5SWQoZSk7cmV0dXJuIG51bGwhPXQmJnQ+PTA/dGhpcy5nZXROb2RlKHQpOm51bGx9Z2V0Q2hpbGRJbmRleChlLHQpe2NvbnN0IGk9dGhpcy5fZ2V0UGFnZShlKTtpZihudWxsPT1pKXJldHVybi0xO2NvbnN0IG49aS5ub2Rlc1tFKGUsdGhpcy5fcGFnZVNpemUpXTtyZXR1cm4gaS5jaGlsZHJlbltuLmNoaWxkT2Zmc2V0K3RdfWdldFBhcmVudEluZGV4KGUpe2NvbnN0IHQ9dGhpcy5fZ2V0UGFnZShlKTtyZXR1cm4gbnVsbCE9dCYmZSE9PXRoaXMuX3Jvb3RJbmRleD90Lm5vZGVzW0UoZSx0aGlzLl9wYWdlU2l6ZSldPy5wYXJlbnQ6bnVsbH1nZXRQYXJlbnQoZSl7Y29uc3QgdD10aGlzLmdldFBhcmVudEluZGV4KGUpO3JldHVybiBudWxsIT10P3RoaXMuZ2V0Tm9kZSh0KTpudWxsfWlzTGVhZihlKXtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtyZXR1cm4gbnVsbCE9dCYmMD09PXQuY2hpbGRDb3VudH1nZXQgcm9vdE5vZGUoKXtyZXR1cm4gdGhpcy5nZXROb2RlKHRoaXMuX3Jvb3RJbmRleCl9Z2V0IGlzRWRpdGFibGUoKXtyZXR1cm4gdGhpcy5faXNFZGl0YWJsZX1yZW1vdmVBbGxHZW9tZXRyeU9iYnMoKXt0aGlzLl9mb3JBbGxOb2RlcygoZT0+e251bGwhPWUubm9kZSYmKGUubm9kZS5nZW9tZXRyeU9iYkluUmVuZGVyU1I9bnVsbCl9KSl9aW52YWxpZGF0ZVZpc2liaWxpdHlDYWNoZSgpe3RoaXMuX3Zpc2liaWxpdHlDYWNoZVZlcnNpb249eCh0aGlzLl92aXNpYmlsaXR5Q2FjaGVWZXJzaW9uKX1pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZShlKXtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtudWxsIT10JiZ0aGlzLmludmFsaWRhdGVOb2RlVmlzaWJpbGl0eUNhY2hlSW50ZXJuYWwodCl9aW52YWxpZGF0ZU5vZGVWaXNpYmlsaXR5Q2FjaGVJbnRlcm5hbChlKXtlLnZpc2liaWxpdHlDYWNoZT1QKHRoaXMuX3Zpc2liaWxpdHlDYWNoZVZlcnNpb24pfWludmFsaWRhdGVCb3VuZGluZ1ZvbHVtZUNhY2hlKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO251bGwhPXQmJih0Py5pbnZhbGlkYXRlQm91bmRzKCksdGhpcy5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZUludGVybmFsKHQpKX11cGRhdGVFbGV2YXRpb25DaGFuZ2VkKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO2lmKG51bGw9PXQpcmV0dXJuO2lmKCF0aGlzLm5lZWROb2RlRWxldmF0aW9uUmFuZ2UpcmV0dXJuIHZvaWQgdGhpcy5pbnZhbGlkYXRlQm91bmRpbmdWb2x1bWVDYWNoZShlKTtjb25zdCBpPW51bGwhPXQubm9kZT90Lm5vZGU6dC5yZWY7bnVsbCE9aSYmaS5pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2UoKX1pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpLGk9dD8ubm9kZTtpJiYoaS5nZW9tZXRyeU9iYkluUmVuZGVyU1I9bnVsbCxpLmludmFsaWRhdGVTZXJ2aWNlQlZzSW5SZW5kZXJTUigpKX1pbnZhbGlkYXRlVmlzaWJpbGl0eU9iYnMoKXtudWxsIT10aGlzLnJvb3ROb2RlJiZ0aGlzLnRyYXZlcnNlKHRoaXMucm9vdE5vZGUsKGU9PihlLnZpc2liaWxpdHlPYmJJblJlbmRlclNSPXRoaXMuX2NvbXB1dGVWaXNpYmlsaXR5T2JiKGUpLGUuZ2VvbWV0cnlPYmJJblJlbmRlclNSPW51bGwsITApKSl9X2lzRWxldmF0aW9uUmFuZ2VVcFRvRGF0ZShlKXtpZighdGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlKXJldHVybiEwO2NvbnN0IHQ9ZT8ubm9kZT8/ZT8ucmVmO3JldHVybiF0fHx0LmVsZXZhdGlvblJhbmdlVmFsaWR9dXBkYXRlRWxldmF0aW9uUmFuZ2UoZSl7dGhpcy5fdXBkYXRlRWxldmF0aW9uUmFuZ2VJbnRlcm5hbChlLG51bGwpfV91cGRhdGVFbGV2YXRpb25SYW5nZUludGVybmFsKGUsdCl7Y29uc3QgaT10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSk7aWYoIWkpcmV0dXJuITE7Y29uc3Qgbj1pPy5ub2RlPz9pPy5yZWY7aWYoIW4pcmV0dXJuITE7aWYobi5lbGV2YXRpb25SYW5nZVZhbGlkKXJldHVybiB0Py5leHBhbmRFbGV2YXRpb25SYW5nZShuKSwhMDtjb25zdCBzPW5ldyBtO2xldCBvPSExO2ZvcihsZXQgbD0wO2w8aS5jaGlsZENvdW50O2wrKyl7Y29uc3QgdD10aGlzLmdldENoaWxkSW5kZXgoZSxsKSxpPXRoaXMuX3VwZGF0ZUVsZXZhdGlvblJhbmdlSW50ZXJuYWwodCxzKTtvPW98fCFpfWlmKDA9PT1pLmNoaWxkQ291bnR8fG8pe2NvbnN0IGU9IWkubm9kZT8ucmVzb3VyY2VzLmlzRW1wdHk7dGhpcy5fdmlld3BvcnRRdWVyaWVzLmV4cGFuZEVsZXZhdGlvblJhbmdlKG4sZSxzKX1jb25zdCByPW4uZWxldmF0aW9uUmFuZ2VNaW4sYT1uLmVsZXZhdGlvblJhbmdlTWF4O3JldHVybiByPT09cy5lbGV2YXRpb25SYW5nZU1pbiYmYT09PXMuZWxldmF0aW9uUmFuZ2VNYXg/KHQ/LmV4cGFuZEVsZXZhdGlvblJhbmdlKG4pLCEwKTooaS5ub2RlPy5zZXRFbGV2YXRpb25SYW5nZShzKSxpLnJlZj8uc2V0RWxldmF0aW9uUmFuZ2UocyksdGhpcy5pbnZhbGlkYXRlQm91bmRpbmdWb2x1bWVDYWNoZShlKSx0Py5leHBhbmRFbGV2YXRpb25SYW5nZShuKSwhMCl9aXNOb2RlVmlzaWJsZShlKXtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtpZihudWxsPT10KXJldHVybiEwO2NvbnN0IGk9dC5yZWY7aWYobnVsbCE9aSYmIWkuc2VydmljZU1ic0luSW5kZXhTUilyZXR1cm4hMDtpZih0aGlzLl9pc0VsZXZhdGlvblJhbmdlVXBUb0RhdGUodCkmJlIodC52aXNpYmlsaXR5Q2FjaGUsdGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbikpcmV0dXJuIEModC52aXNpYmlsaXR5Q2FjaGUpO2NvbnN0IG49dC5ub2RlLHM9dGhpcy5fdmlld3BvcnRRdWVyaWVzO2lmKG4pe2NvbnN0IGU9cy5lbnN1cmVFbGV2YXRpb25BZ25vc3RpY0JvdW5kaW5nVm9sdW1lKG4pLGk9cy5pc0VsZXZhdGlvbkFnbm9zdGljQm91bmRpbmdWb2x1bWVWaXNpYmxlKGUpO2xldCBvPWk7aWYodGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlJiZpKXtjb25zdCB0PXMuZ2V0Tm9kZU9iYkluUmVuZGVyU1JJbmRlcGVuZGVudE9mRWxldmF0aW9uT2Zmc2V0KG4pO251bGwhPXQmJihvPXMuaXNPYmJWaXNpYmxlSW5kZXBlbmRlbnRPZkVsZXZhdGlvbihlLHQpKX1pZighbylyZXR1cm4gdC52aXNpYmlsaXR5Q2FjaGU9UyghMSx0aGlzLl92aXNpYmlsaXR5Q2FjaGVWZXJzaW9uKSwhMX1pZih0aGlzLl9sYXllckhhc0ZpbHRlciYmdGhpcy5fY29tcHV0ZU5vZGVGaWx0ZXJpbmcmJihudWxsIT1ufHxudWxsIT1pKSYmdC5maWx0ZXJJbXBhY3Q9PT1oLk5vdENoZWNrZWQpe2NvbnN0IGU9bnVsbCE9bj9uLnNlcnZpY2VNYnNJbkluZGV4U1I6bnVsbCE9aT9pLnNlcnZpY2VNYnNJbkluZGV4U1I6bnVsbDt0LmZpbHRlckltcGFjdD1udWxsIT1lP3RoaXMuX2NvbXB1dGVOb2RlRmlsdGVyaW5nKGUpOmguVW5tb2RpZmllZH1jb25zdCBvPW51bGwhPW4mJnQuZmlsdGVySW1wYWN0PT09aC5DdWxsZWQ7bGV0IHI9IShudWxsIT1uJiZuLmltTW9kaWZpY2F0aW9uSW1wYWN0PT09dS5DdWxsZWQpJiYhbztpZihyKXtjb25zdCB0PSFufHxpJiYhbi52aXNpYmlsaXR5T2JiSW5SZW5kZXJTUj9pPz9udWxsOm47aWYobnVsbCE9dCl7dGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlJiZ0aGlzLnVwZGF0ZUVsZXZhdGlvblJhbmdlKGUpO3I9cy5pc05vZGVWaXNpYmxlKHQpfX1yZXR1cm4gdC52aXNpYmlsaXR5Q2FjaGU9UyhyLHRoaXMuX3Zpc2liaWxpdHlDYWNoZVZlcnNpb24pLHJ9aXNHZW9tZXRyeVZpc2libGUoZSl7aWYoIXRoaXMuaXNOb2RlVmlzaWJsZShlKSlyZXR1cm4hMTtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtyZXR1cm4hIShudWxsPT10Py5ub2RlPy5nZW9tZXRyeU9iYkluUmVuZGVyU1J8fHRoaXMubGF5ZXJIYXNNb2RpZmljYXRpb25zJiZ0Lm5vZGUuaW1Nb2RpZmljYXRpb25JbXBhY3Q9PT11Lk5vdENoZWNrZWQpfHx0aGlzLl92aWV3cG9ydFF1ZXJpZXMuaXNHZW9tZXRyeVZpc2libGUodC5ub2RlKX1fdHJhdmVyc2VDb3ZlcmFnZShlLHQsaSxuLHMpe2NvbnN0IG89dGhpcy5fZ2V0UGFnZShlKTtpZihudWxsPT1vfHwwPT09dC5jaGlsZENvdW50KXJldHVybjtjb25zdCByPXQuY2hpbGRPZmZzZXQrdC5jaGlsZENvdW50LGE9bmV3IEFycmF5O2ZvcihsZXQgbD10LmNoaWxkT2Zmc2V0O2w8cjsrK2wpe2NvbnN0IGU9by5jaGlsZHJlbltsXSx0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtudWxsIT10Py5ub2RlJiZ0aGlzLmlzR2VvbWV0cnlWaXNpYmxlKGUpJiZhLnB1c2godCl9bi89YS5sZW5ndGg7Zm9yKGNvbnN0IGwgb2YgYSl7Y29uc3QgZT1sLm5vZGUuaW5kZXg7dGhpcy5faXNMb2FkZWQoZSl8fHRoaXMuX2lzUmVsb2FkaW5nKGUpPyhzLmRlbHRhPU1hdGgubWF4KHMuZGVsdGEsaSkscy5jb3ZlcmFnZSs9bik6dGhpcy5fdHJhdmVyc2VDb3ZlcmFnZShlLGwsaSsxLG4scyl9fXVzZU5vZGVBc0hvbGUoZSl7aWYoXCJvZmZcIj09PXRoaXMuaG9sZUZpbGxpbmcpcmV0dXJuITE7Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSk7aWYobnVsbD09dClyZXR1cm4hMTtpZihcImFsd2F5c1wiPT09dGhpcy5ob2xlRmlsbGluZylyZXR1cm4hMDtpZihSKHQudXNlQXNIb2xlLHRoaXMuX3ZlcnNpb24pKXJldHVybiBDKHQudXNlQXNIb2xlKTtjb25zdCBpPXtkZWx0YTowLGNvdmVyYWdlOjB9O3RoaXMuX3RyYXZlcnNlQ292ZXJhZ2UoZSx0LDAsMSxpKTtjb25zdCBuPWkuZGVsdGEqaS5jb3ZlcmFnZTw9LjU7cmV0dXJuIHQudXNlQXNIb2xlPVMobix0aGlzLl92ZXJzaW9uKSxufWdldCBtYXhMZXZlbCgpe3JldHVybiB0aGlzLl9tYXhMZXZlbH1nZXQgZGlydHkoKXtyZXR1cm4gdGhpcy5fZGlydHl9ZGVzdHJveSgpe3RoaXMuX3VwZGF0ZXMuYWRkLnBydW5lKCksdGhpcy5fdXBkYXRlcy51cGRhdGUucHJ1bmUoKX1yZXF1ZXN0VXBkYXRlKCl7dGhpcy5fZGlydHk9ITAsdGhpcy5faW5kZXhNaXNzaW5nPTEsdGhpcy5fdmVyc2lvbj14KHRoaXMuX3ZlcnNpb24pfWltTW9kaWZpY2F0aW9uc0NoYW5nZWQoZSl7dGhpcy5sYXllckhhc01vZGlmaWNhdGlvbnM9ZSx0aGlzLl9mb3JBbGxOb2RlcygoKHtub2RlOmV9KT0+e251bGwhPWUmJihlLmltTW9kaWZpY2F0aW9uSW1wYWN0PXUuTm90Q2hlY2tlZCxlLnZpc2liaWxpdHlPYmJJblJlbmRlclNSPXRoaXMuX2NvbXB1dGVWaXNpYmlsaXR5T2JiKGUpLGUuaGFzTW9kaWZpY2F0aW9ucyYmdGhpcy5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUuaW5kZXgpKX0pKSx0aGlzLmludmFsaWRhdGVWaXNpYmlsaXR5Q2FjaGUoKX1sYXllckZpbHRlckNoYW5nZWQoZSl7dGhpcy5fbGF5ZXJIYXNGaWx0ZXI9ZSx0aGlzLl9mb3JBbGxOb2RlcygoZT0+e2lmKG51bGwhPWUpe2UuZmlsdGVySW1wYWN0PWguTm90Q2hlY2tlZDtjb25zdCB0PWUubm9kZTtudWxsIT10JiZ0aGlzLmludmFsaWRhdGVOb2RlVmlzaWJpbGl0eUNhY2hlKHQuaW5kZXgpfX0pKSx0aGlzLmludmFsaWRhdGVWaXNpYmlsaXR5Q2FjaGUoKX11cGRhdGUoZSx0LGkpe2lmKCF0aGlzLl9kaXJ0eSlyZXR1cm47dGhpcy5fcGFnZVF1ZXVlLmxlbmd0aD4wJiZ0aGlzLl9hZGRRdWV1ZWRQYWdlcyh0KSx0aGlzLl9pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2VGb3JOZXdQYWdlcyh0KSx0aGlzLl9tYXhVbmxvYWRlZFByaW89TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLHRoaXMuX21heFByb2Nlc3NpbmdQcmlvPU51bWJlci5ORUdBVElWRV9JTkZJTklUWSx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5jbGVhcigpLHRoaXMuX3ByZWZldGNoTm9kZXMuY2xlYXIoKSx0aGlzLl91cGRhdGVzLnJlc2V0KGUpLEkuY2xlYXIoKTtsZXQgbj0hMDtjb25zdCBzPW5ldyBBLG89bmV3IEwscj10aGlzLl9pbU1vZGlmaWNhdGlvblVuY2F0ZWdvcml6ZWQ7ci5jbGVhcigpO2NvbnN0IGE9bmV3IFNldDtsZXQgbD0wO2NvbnN0IGQ9KGEsZCxoKT0+e2NvbnN0IGM9dyhhLHRoaXMuX3BhZ2VTaXplKTtpZihudWxsPT1kKXtsZXQgZT10aGlzLl9lbnRyeVByaW9yaXR5KGEpO3JldHVybiBlPT09MS8wJiYoZT10aGlzLl9lbnRyeVByaW9yaXR5KGgpKSxJLnNldChjLE1hdGgubWF4KGUsSS5nZXQoYyl8fDApKSx0aGlzLl9sb2FkaW5nUGFnZXMuaGFzKGMpfHx0aGlzLl9mYWlsZWRQYWdlcy5oYXMoYyl8fCh0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5wdXNoKGMpLCsrbCksdm9pZCh0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbz1NYXRoLm1heCh0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbyxlKSl9Y29uc3QgZz1kLm5vZGU7aWYodGhpcy5fdXBkYXRlTm9kZUZlYXR1cmVFc3RpbWF0ZShnLG8pLG51bGw9PWcpe2NvbnN0IGU9dGhpcy5fZW50cnlQcmlvcml0eShhKTtyZXR1cm4gdGhpcy5fbG9hZGluZ05vZGVzLmhhcyhhKXx8dGhpcy5fZmFpbGVkTm9kZXMuaGFzKGEpfHwodGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMucHVzaChhKSxJLnNldChhLGUpKSx2b2lkKHRoaXMuX21heFByb2Nlc3NpbmdQcmlvPU1hdGgubWF4KHRoaXMuX21heFByb2Nlc3NpbmdQcmlvLGUpKX1jb25zdCBfPXRoaXMuX2dldFBhZ2UoYSk7aWYoMD09PXRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzLmxlbmd0aCYmIXRoaXMuX3VzZU5vZGVQYWdlcylmb3IobGV0IGU9MDtlPGQuY2hpbGRDb3VudDtlKyspe2NvbnN0IHQ9Xy5jaGlsZHJlbltkLmNoaWxkT2Zmc2V0K2VdLGk9dGhpcy5fZ2V0Tm9kZUludGVybmFsKHQpO251bGwhPWkmJiFpLm5vZGUmJiF0aGlzLl9sb2FkaW5nTm9kZXMuaGFzKHQpJiYhdGhpcy5fZmFpbGVkTm9kZXMuaGFzKHQpJiZ0Pj0wJiYoSS5zZXQodCx0aGlzLl9lbnRyeVByaW9yaXR5KHQpKSx0aGlzLl9wcmVmZXRjaE5vZGVzLnB1c2godCkpfWlmKGcuZmFpbGVkfHxnLnJlc291cmNlcy5pc0VtcHR5KXJldHVybiB2b2lkKG4mJmQuY2hpbGRDb3VudD4wJiZ0aGlzLl9pc1NlbGVjdGVkKGcpJiYobj0hMSkpO2lmKHRoaXMuX2lzTG9hZGVkKGEpKXtpZihzLmtub3duKz1nLm1lbW9yeSwrK3Mua25vd25Ob2Rlcyx0aGlzLl9pc1NlbGVjdGVkKGcpP2QuY2hpbGRDb3VudD4wJiYobj0hMSk6KHMudW5yZW1vdmVkKz1nLm1lbW9yeSxuPSExKSx0aGlzLl9uZWVkc1VwZGF0ZShnKSl7Y29uc3QgZT10aGlzLl9lbnRyeVByaW9yaXR5KGEpO0kuc2V0KGEsZSksdGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW89TWF0aC5tYXgodGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW8sZSksdGhpcy5fdXBkYXRlcy51cGRhdGUucHVzaChhKX1yZXR1cm59aWYoZy5tZW1vcnkmJihzLmtub3duKz1nLm1lbW9yeSwrK3Mua25vd25Ob2RlcyksIXRoaXMuX2lzU2VsZWN0ZWQoZykpcmV0dXJuIHZvaWQodGhpcy5faXNSZWxvYWRpbmcoYSkmJnRoaXMuX3VwZGF0ZXMucmVtb3ZlLnB1c2goYSkpO2lmKGQuY2hpbGRDb3VudD4wJiYobj0hMSksZy5tZW1vcnk/KHMubWlzc2luZys9Zy5tZW1vcnkscy5rbm93bis9Zy5tZW1vcnksKytzLmtub3duTm9kZXMpOisrcy5taXNzaW5nTm9kZXMsZS5pbmNsdWRlcyhnLmluZGV4KSlyZXR1cm4gdGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW89TWF0aC5tYXgodGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW8sdGhpcy5fZW50cnlQcmlvcml0eShhKSksdm9pZCh0aGlzLl91cGRhdGVzLmNhbmNlbD10aGlzLl91cGRhdGVzLmNhbmNlbC5maWx0ZXIoKGU9PmUhPT1nLmluZGV4KSkpO2lmKCF0LmRvbmUmJnRoaXMuX2VuYWJsZShnKSlyZXR1cm4gdm9pZCB0Lm1hZGVQcm9ncmVzcygpO2NvbnN0IGY9dGhpcy5fZW50cnlQcmlvcml0eShhKTtJLnNldChhLGYpLHRoaXMuX21heFByb2Nlc3NpbmdQcmlvPU1hdGgubWF4KHRoaXMuX21heFByb2Nlc3NpbmdQcmlvLGYpLHRoaXMuX3VwZGF0ZXMuYWRkLnB1c2goYSksdGhpcy5sYXllckhhc01vZGlmaWNhdGlvbnMmJmkmJm51bGwhPWcmJmcuaW1Nb2RpZmljYXRpb25JbXBhY3Q9PT11Lk5vdENoZWNrZWQmJnIucHVzaChhKX07dGhpcy50cmF2ZXJzZVZpc2libGUoZCxhKSx0aGlzLl9mcmFtZU51bWJlcisrLHRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzLnNvcnQoKChlLHQpPT5lLXQpKSx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5maWx0ZXJJblBsYWNlKCgoZSx0KT0+dDwxfHx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5kYXRhW3QtMV0hPT1lKSksdGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMuc29ydCgoKGUsdCk9PkkuZ2V0KGUpLUkuZ2V0KHQpKSksdGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMubGVuZ3RoPjAmJih0aGlzLl9tYXhVbmxvYWRlZFByaW89SS5nZXQodGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMuYmFjaygpKSx0aGlzLl9wcmVmZXRjaE5vZGVzLmNsZWFyKCkpLHRoaXMuX3JlbW92ZVVudXNlZE5vZGVQYWdlcyhhLGwpO2NvbnN0IGg9dGhpcy5fdXBkYXRlcy5hZGQ7aC5sZW5ndGg+MCYmdGhpcy5sYXllckhhc01vZGlmaWNhdGlvbnMmJihyLmxlbmd0aD4wJiZpPy4ociksaC5maWx0ZXJJblBsYWNlKChlPT57Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSksaT1udWxsPT10Py5ub2RlfHx0Lm5vZGUuaW1Nb2RpZmljYXRpb25JbXBhY3QhPT11LkN1bGxlZDtyZXR1cm4gaXx8dGhpcy5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZShlKSxpfSkpKSx0aGlzLl91bmxvYWRlZE1lbW9yeUVzdGltYXRlPXMubWlzc2luZy1zLnVucmVtb3ZlZCxzLmtub3duTm9kZXM+MyYmcy5taXNzaW5nTm9kZXM+MCYmKHRoaXMuX3VubG9hZGVkTWVtb3J5RXN0aW1hdGUrPXMua25vd24vcy5rbm93bk5vZGVzKnMubWlzc2luZ05vZGVzKSx0aGlzLl91bmxvYWRlZE1lbW9yeUVzdGltYXRlPS44Kk1hdGgubWF4KDAsdGhpcy5fdW5sb2FkZWRNZW1vcnlFc3RpbWF0ZSksdGhpcy5fZmVhdHVyZUVzdGltYXRlLmVzdGltYXRlPXRoaXMuX2NvbXB1dGVGZWF0dXJlRXN0aW1hdGUobyksdGhpcy5fZmVhdHVyZUVzdGltYXRlLmxlYXZlc1JlYWNoZWQ9bix0aGlzLl91cGRhdGVzLmFkZC5maWx0ZXJJblBsYWNlKChlPT5JLmdldChlKT49dGhpcy5fbWF4VW5sb2FkZWRQcmlvKSkuc29ydCgoKGUsdCk9PkkuZ2V0KGUpLUkuZ2V0KHQpKSksdGhpcy5fdXBkYXRlcy51cGRhdGUuc29ydCgoKGUsdCk9PkkuZ2V0KGUpLUkuZ2V0KHQpKSksdGhpcy5faW5kZXhNaXNzaW5nPXRoaXMuX2xvYWRpbmdQYWdlcy5zaXplK3RoaXMuX2xvYWRpbmdOb2Rlcy5zaXplK3RoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzLmxlbmd0aCx0aGlzLl9kaXJ0eT10aGlzLl9pbmRleE1pc3Npbmc+MCxJLmNsZWFyKCl9Y2hlY2tGZWF0dXJlVGFyZ2V0KGUsdCl7Y29uc3QgaT10aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlU2NyZWVuU3BhY2VFcnJvckJpYXModCk7bGV0IG49dCxzPXQsbz1pLHI9MTA7Zm9yKDtyLS07KXtjb25zdCBpPW5ldyBMO3RoaXMuX3VwZGF0ZUZlYXR1cmVFc3RpbWF0ZShuLGkpO2lmKHRoaXMuX2NvbXB1dGVGZWF0dXJlRXN0aW1hdGUoaSk8PWUpe2lmKG4+PXR8fGkubWlzc2luZ05vZGVzPjB8fDA9PT1yKWJyZWFrO289bixuPS41KihuK3MpfWVsc2Ugcz1uLG49LjUqKG4rbyl9cmV0dXJuIHRoaXMuX3ZlcnNpb249eCh0aGlzLl92ZXJzaW9uKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlU2NyZWVuU3BhY2VFcnJvckJpYXMoaSksTWF0aC5taW4odCxuKX1fcmVtb3ZlVW51c2VkTm9kZVBhZ2VzKGUsdCl7aWYoIXRoaXMuX3VzZU5vZGVQYWdlcylyZXR1cm47Y29uc3QgaT1lLnNpemUsbj10aGlzLl9ub2RlUGFnZXMscz1uLnNpemUrdGhpcy5fbG9hZGluZ1BhZ2VzLnNpemUrdDtpZihzPkImJnM+aSl7Y29uc3QgdD1uZXcgQXJyYXk7Zm9yKGNvbnN0W2ksc11vZiBuKTAhPT1zLm51bU5vZGVzV2l0aExvYWRlZENoaWxkcmVufHxlLmhhcyhpKXx8dC5wdXNoKFtzLmxhc3RUcmF2ZXJzZWQsaV0pO3Quc29ydCgoKGUsdCk9PmVbMF0tdFswXSkpLnNvbWUoKGU9Pntjb25zdCB0PWVbMV07cmV0dXJuIHRoaXMuX2RlbGV0ZU5vZGVQYWdlKHQpLG4uc2l6ZTw9Qn0pKX19X3VwZGF0ZUZlYXR1cmVFc3RpbWF0ZShlLHQpe3RoaXMuX3ZlcnNpb249eCh0aGlzLl92ZXJzaW9uKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlU2NyZWVuU3BhY2VFcnJvckJpYXMoZSksdGhpcy50cmF2ZXJzZVZpc2libGUoKChlLGkpPT50aGlzLl91cGRhdGVOb2RlRmVhdHVyZUVzdGltYXRlKGk/Lm5vZGUsdCkpKX1fdXBkYXRlTm9kZUZlYXR1cmVFc3RpbWF0ZShlLHQpe251bGwhPWUmJiFlLmZhaWxlZCYmdGhpcy5faXNTZWxlY3RlZChlKSYmKG51bGwhPWUubnVtRmVhdHVyZXM/KHQubnVtRmVhdHVyZXMrPWUubnVtRmVhdHVyZXMsKyt0Lmtub3duTm9kZXMpOisrdC5taXNzaW5nTm9kZXMpfV9jb21wdXRlRmVhdHVyZUVzdGltYXRlKGUpe2xldCB0PWUubnVtRmVhdHVyZXM7cmV0dXJuIGUua25vd25Ob2Rlcz4zJiZlLm1pc3NpbmdOb2Rlcz4wJiYodCs9ZS5udW1GZWF0dXJlcy9lLmtub3duTm9kZXMqZS5taXNzaW5nTm9kZXMpLE1hdGgubWF4KDAsdCl9bG9hZCgpe3JldHVybiB0aGlzLl9sb2FkKHRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzKX1wcmVmZXRjaCgpe3JldHVybiB0aGlzLl9wcmVmZXRjaE5vZGVzLnNvcnQoKChlLHQpPT5JLmdldChlKS1JLmdldCh0KSkpLHRoaXMuX2xvYWQodGhpcy5fcHJlZmV0Y2hOb2Rlcyl9X2xvYWQoZSl7aWYoMD09PWUubGVuZ3RofHwhdGhpcy5fY2FuUmVxdWVzdCgpKXJldHVybiExO2Zvcig7ZS5sZW5ndGg+MCYmdGhpcy5fY2FuUmVxdWVzdCgpOyl7Y29uc3QgdD1lLnBvcCgpO3RoaXMuX3VzZU5vZGVQYWdlcyYmdD49MD90aGlzLl9sb2FkUGFnZSh0KTp0aGlzLl9sb2FkTm9kZSh0KX1yZXR1cm4hMH1nZXQgaXNMb2FkaW5nKCl7cmV0dXJuIHRoaXMuX2luZGV4TWlzc2luZz4wfWdldCBpc1ByZWZldGNoaW5nKCl7cmV0dXJuIHRoaXMuX3ByZWZldGNoTm9kZXMubGVuZ3RoPjB9Z2V0IGluZGV4TG9hZGluZygpe3JldHVybiB0aGlzLl9sb2FkaW5nUGFnZXMuc2l6ZSt0aGlzLl9sb2FkaW5nTm9kZXMuc2l6ZX1nZXQgaW5kZXhNaXNzaW5nKCl7cmV0dXJuIHRoaXMuX2luZGV4TWlzc2luZ31nZXQgdW5sb2FkZWRNZW1vcnlFc3RpbWF0ZSgpe3JldHVybiB0aGlzLl91bmxvYWRlZE1lbW9yeUVzdGltYXRlfWdldCB1cGRhdGVzKCl7cmV0dXJuIHRoaXMuX3VwZGF0ZXN9Z2V0IGZlYXR1cmVFc3RpbWF0ZSgpe3JldHVybiB0aGlzLl9mZWF0dXJlRXN0aW1hdGV9Z2V0IG1heFByaW9yaXR5KCl7cmV0dXJuIE1hdGgubWF4KHRoaXMuX21heFByb2Nlc3NpbmdQcmlvLHRoaXMuX21heFVubG9hZGVkUHJpbyl9bm9kZVRyYXZlcnNhbFN0YXRlKGUpe2lmKG51bGw9PWUpcmV0dXJuIG51bGw7Y29uc3QgdD1lLmluZGV4LGk9dGhpcy5fZ2V0Tm9kZUludGVybmFsKHQpO2lmKCFpKXJldHVybiBudWxsO2xldCBuPWk/LnRyYXZlcnNhbFN0YXRlO2lmKG4mJlIobi52ZXJzaW9uLHRoaXMuX3ZlcnNpb24pKXJldHVybiBuO2NvbnN0IHM9dGhpcy5fdmlld3BvcnRRdWVyaWVzLmdldExvZExldmVsKGUpLG89dGhpcy5fdmlld3BvcnRRdWVyaWVzLmhhc0xPRChlKTtsZXQgcj0hMDtpZihvKXtjb25zdCBlPXRoaXMuZ2V0UGFyZW50SW5kZXgodCk7aWYobnVsbCE9ZSl7Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSksaT10Py50cmF2ZXJzYWxTdGF0ZTtyPSEhaSYmcz5pLmxvZExldmVsfWVsc2Ugcj1zPjB9ZWxzZSByPTA9PT1lLmNoaWxkQ291bnQ7cmV0dXJuIG4/KG4ubG9kTGV2ZWw9cyxuLmlzQ2hvc2VuPXIsbi52ZXJzaW9uPVMoITAsdGhpcy5fdmVyc2lvbiksbik6KG49bmV3IGMobyxyLHMsUyghMCx0aGlzLl92ZXJzaW9uKSksaS50cmF2ZXJzYWxTdGF0ZT1uLG4pfWFzeW5jIF9sb2FkTm9kZShlKXt0aGlzLl9sb2FkaW5nTm9kZXMuYWRkKGUpO2NvbnN0IGk9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpLnJlZjtpZihudWxsPT1pKXJldHVybiB2b2lkIHRoaXMuX2ZhaWxlZE5vZGVzLmFkZChlKTtjb25zdCBuPWkuaWQscz10aGlzLl91cmxQcmVmaXgrbixvPSgpPT57dGhpcy5fbG9hZGluZ05vZGVzLmRlbGV0ZShlKSwwPT09dGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMubGVuZ3RoJiYwPT09dGhpcy5fbG9hZGluZ05vZGVzLnNpemUmJnRoaXMucmVxdWVzdFVwZGF0ZSgpfTtsZXQgcj1udWxsO3RyeXtyPWU+PTA/YXdhaXQgdGhpcy5fc3RyZWFtRGF0YUNvbnRyb2xsZXIucmVxdWVzdChzLFwianNvblwiKTphd2FpdCB0aGlzLl9jbGllbnROb2RlTG9hZGVyLmxvYWROb2RlSlNPTihuKX1jYXRjaChkKXtyZXR1cm4gbygpLHZvaWQodChkKXx8KHRoaXMuX2xvZ2dlci5lcnJvcihcIiNsb2FkTm9kZSgpXCIsdGhpcy5fbGF5ZXIsXCJFcnJvciBsb2FkaW5nIG5vZGU6IFwiK3MpLHRoaXMuX2ZhaWxlZE5vZGVzLmFkZChlKSkpfW8oKTtjb25zdCBhPXRoaXMuX3ZhbGlkYXRlTm9kZShuLHIpO2lmKG51bGw9PWEpcmV0dXJuO2Eub2JiJiZ0aGlzLmludmFsaWRhdGVOb2RlVmlzaWJpbGl0eUNhY2hlKGUpO2NvbnN0IGw9dGhpcy5fYWRkTm9kZShhLGUpO3RoaXMubm9kZVRyYXZlcnNhbFN0YXRlKGwpfV92YWxpZGF0ZU5vZGUoZSx0KXtpZihudWxsPT10fHxcIm9iamVjdFwiIT10eXBlb2YgdHx8dC5pZCE9PWUpcmV0dXJuIHRoaXMuX2xvZ2dlci5lcnJvcihcIiN2YWxpZGF0ZU5vZGUoKVwiLHRoaXMuX2xheWVyLGBJbnZhbGlkIG5vZGUuIFdyb25nIHR5cGUgb3Igd3JvbmcgaWQgXCIke2V9XCJgKSxudWxsO2lmKCFBcnJheS5pc0FycmF5KHQubWJzKSlyZXR1cm4gdGhpcy5fbG9nZ2VyLmVycm9yKFwiI3ZhbGlkYXRlTm9kZSgpXCIsdGhpcy5fbGF5ZXIsYEludmFsaWQgYm91bmRpbmcgdm9sdW1lIG9uIG5vZGUgJHtlfS5gKSxudWxsO3Quc2hhcmVkUmVzb3VyY2UmJlwiLi9zaGFyZWRcIiE9PXQuc2hhcmVkUmVzb3VyY2UuaHJlZiYmXCIuL3NoYXJlZC9cIiE9PXQuc2hhcmVkUmVzb3VyY2UuaHJlZiYmdGhpcy5fbG9nZ2VyLndhcm4oXCIjdmFsaWRhdGVOb2RlKClcIix0aGlzLl9sYXllcixgSW52YWxpZCBzaGFyZWQgcmVzb3VyY2UgaHJlZiBvbiBub2RlIFwiJHtlfVwiYCk7Y29uc3QgaT10Lmdlb21ldHJ5RGF0YTtudWxsPT1pfHxBcnJheS5pc0FycmF5KGkpJiYwPT09aS5sZW5ndGh8fEFycmF5LmlzQXJyYXkoaSkmJjE9PT1pLmxlbmd0aCYmXCIuL2dlb21ldHJpZXMvMFwiPT09aVswXS5ocmVmfHx0aGlzLl9sb2dnZXIud2FybihcIiN2YWxpZGF0ZU5vZGUoKVwiLHRoaXMuX2xheWVyLGBJbnZhbGlkIGdlb21ldHJ5IGRhdGEgb24gbm9kZSBcIiR7ZX1cImApO2NvbnN0IG49dC5hdHRyaWJ1dGVEYXRhLHM9dGhpcy5fbGF5ZXIuYXR0cmlidXRlU3RvcmFnZUluZm87bnVsbD09bnx8QXJyYXkuaXNBcnJheShuKSYmIW4uc29tZSgoKGUsdCk9PmUuaHJlZiE9PWAuL2F0dHJpYnV0ZXMvJHtzPy5bdF0/LmtleT8/YGZfJHt0fWB9LzBgKSl8fHRoaXMuX2xvZ2dlci53YXJuKFwiI3ZhbGlkYXRlTm9kZSgpXCIsdGhpcy5fbGF5ZXIsYEludmFsaWQgYXR0cmlidXRlIGRhdGEgb24gbm9kZSBcIiR7ZX1cImApLHQuZmVhdHVyZURhdGEmJnQuZmVhdHVyZURhdGEubGVuZ3RoPjEmJnRoaXMuX2xvZ2dlci53YXJuKFwiI3ZhbGlkYXRlTm9kZSgpXCIsdGhpcy5fbGF5ZXIsYE5vZGUgJHtlfSBoYXMgJHt0LmZlYXR1cmVEYXRhLmxlbmd0aH0gYnVuZGxlcy4gT25seSB0aGUgZmlyc3QgYnVuZGxlIHdpbGwgYmUgbG9hZGVkLmApO2NvbnN0IG89dC5oYXNPd25Qcm9wZXJ0eShcIm9iYlwiKSYmIXRoaXMuaWdub3JlU2VydmljZU9iYj90Lm9iYjp2b2lkIDAscj10LmZlYXR1cmVEYXRhJiYxPT09dC5mZWF0dXJlRGF0YS5sZW5ndGgmJnQuZmVhdHVyZURhdGFbMF0uZmVhdHVyZVJhbmdlP3QuZmVhdHVyZURhdGFbMF0uZmVhdHVyZVJhbmdlWzFdLXQuZmVhdHVyZURhdGFbMF0uZmVhdHVyZVJhbmdlWzBdKzE6dm9pZCAwLGE9dD0+e2lmKG51bGw9PXQpcmV0dXJuIG51bGw7Y29uc3QgaT10PT50aGlzLl9sb2dnZXIuZXJyb3IoXCIjdmFsaWRhdGVOb2RlKClcIix0aGlzLl9sYXllcixgSW52YWxpZCBub2RlIHJlZmVyZW5jZSBvbiBub2RlICR7ZX06ICR7dH1gKTtpZihcIm51bWJlclwiPT10eXBlb2YgdC5pZClpKGBpZCAke3QuaWR9IGlzIGEgbnVtYmVyIGluc3RlYWQgb2YgYSBzdHJpbmcuYCk7ZWxzZSBpZihcInN0cmluZ1wiIT10eXBlb2YgdC5pZHx8IUFycmF5LmlzQXJyYXkodC5tYnMpKXJldHVybiBpKFwiTWlzc2luZyBvciBpbnZhbGlkIGlkLlwiKSxudWxsO2lmKCFBcnJheS5pc0FycmF5KHQubWJzKSlyZXR1cm4gaShgSW52YWxpZCBib3VuZGluZyB2b2x1bWUgb24gcmVmZXJlbmNlICR7dC5pZH0uYCksbnVsbDt0LmhyZWYmJnQuaHJlZiE9PVwiLi4vXCIrdC5pZCYmdGhpcy5fbG9nZ2VyLmVycm9yKFwiI3ZhbGlkYXRlTm9kZSgpXCIsdGhpcy5fbGF5ZXIsYEludmFsaWQgbm9kZSBocmVmIG9uIG5vZGUgXCIke2V9XCJgKTtjb25zdCBuPW5ldyBsKGAke3QuaWR9YCx0Lm1icyk7cmV0dXJuIG4uc2VydmljZU9iYkluSW5kZXhTUj0hdGhpcy5pZ25vcmVTZXJ2aWNlT2JiJiZ0Lmhhc093blByb3BlcnR5KFwib2JiXCIpJiZ0Lm9iYj92LmZyb21KU09OKHQub2JiKTpudWxsLG4udmlzaWJpbGl0eU9iYkluUmVuZGVyU1I9dGhpcy5fY29tcHV0ZVZpc2liaWxpdHlPYmIobiksbn0sZD1BcnJheS5pc0FycmF5KHQuY2hpbGRyZW4pP3QuY2hpbGRyZW4ubWFwKGEpLmZpbHRlcigoZT0+bnVsbCE9ZSkpOm51bGwsaD10LmZlYXR1cmVEYXRhPy5sZW5ndGg/PyExLHU9ITA9PT10LmlzRW1wdHk7cmV0dXJuIG5ldyBmKGUsdC5tYnMsbyxcInN0cmluZ1wiPT10eXBlb2YgdC52ZXJzaW9uP3QudmVyc2lvbjpudWxsLHtpc0VtcHR5OiFoJiZ1LGhhc1NoYXJlZFJlc291cmNlOm51bGwhPXQuc2hhcmVkUmVzb3VyY2UsYXR0cmlidXRlczp0LmF0dHJpYnV0ZURhdGE/ZTp2b2lkIDAsdGV4dHVyZTp0LnRleHR1cmVEYXRhJiZ0LnRleHR1cmVEYXRhLmxlbmd0aD4wP2U6dm9pZCAwLGdlb21ldHJ5Om51bGwhPXQuZ2VvbWV0cnlEYXRhP2U6dm9pZCAwfSxkLEFycmF5LmlzQXJyYXkodC5sb2RTZWxlY3Rpb24pP3QubG9kU2VsZWN0aW9uOm51bGwscil9cmVzZXRGYWlsZWROb2Rlcygpe3RoaXMuX2ZhaWxlZE5vZGVzLmNsZWFyKCksdGhpcy5fZmFpbGVkUGFnZXMuY2xlYXIoKSx0aGlzLl9mb3JBbGxOb2RlcygoZT0+e251bGwhPWUubm9kZSYmKGUubm9kZS5mYWlsZWQ9ITEpfSkpfV9lbnRyeVByaW9yaXR5KGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpLGk9dGhpcy5nZXRQYXJlbnRJbmRleChlKTtpZihudWxsPT10fHxudWxsPT1pJiZudWxsPT10Lm5vZGUpcmV0dXJuIG51bGw9PWk/MS8wOnRoaXMuX2VudHJ5UHJpb3JpdHkoaSk7bGV0IG49MDtpZih0Lm5vZGUmJm51bGwhPWkpe2NvbnN0IGU9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGkpLnRyYXZlcnNhbFN0YXRlO251bGwhPWUmJihuPWUubG9kTGV2ZWwpfWxldCBzPXRoaXMucHJvZ3Jlc3NpdmVMb2FkUGVuYWx0eTtmb3IobGV0IHI9ZTtudWxsIT1yO3I9dGhpcy5nZXRQYXJlbnRJbmRleChyKSlpZih0aGlzLl9pc0xvYWRlZChyKSl7cz0wO2JyZWFrfWNvbnN0IG89bnVsbCE9dC5yZWY/dGhpcy5fdmlld3BvcnRRdWVyaWVzLmRpc3RUb1BPSSh0LnJlZik6bnVsbCE9dC5ub2RlP3RoaXMuX3ZpZXdwb3J0UXVlcmllcy5kaXN0VG9QT0kodC5ub2RlKTowO3JldHVybi1vLW4qKG8rdGhpcy5wcm9ncmVzc2l2ZUxvYWRQZW5hbHR5KStzfXRyYXZlcnNlVmlzaWJsZShlLHQpe2NvbnN0IGk9dGhpcy5fZ2V0Tm9kZUludGVybmFsKHRoaXMuX3Jvb3RJbmRleCk7bnVsbCE9aT90aGlzLl90cmF2ZXJzZVZpc2libGUodGhpcy5fcm9vdEluZGV4LG51bGwsaSxlLHQpOmUodGhpcy5fcm9vdEluZGV4LG51bGwsbnVsbCl9X3RyYXZlcnNlVmlzaWJsZShlLHQsaSxuLHMpe2NvbnN0IG89dyhlLHRoaXMuX3BhZ2VTaXplKTtpZihzJiZzLmFkZChvKSxpLm5vZGUmJjA9PT1pLmNoaWxkQ291bnQpcmV0dXJuIHZvaWQodGhpcy5pc0dlb21ldHJ5VmlzaWJsZShlKSYmbihlLGksdCkpO2lmKCF0aGlzLmlzTm9kZVZpc2libGUoZSkpcmV0dXJuO2lmKG4oZSxpLHQpLG51bGw9PWkubm9kZSlyZXR1cm47Y29uc3Qgcj10aGlzLm5vZGVUcmF2ZXJzYWxTdGF0ZShpLm5vZGUpO2lmKHI/Lm5vZGVIYXNMT0QmJnIubG9kTGV2ZWw9PT10aGlzLl9tYXhMb2RMZXZlbClyZXR1cm47Y29uc3QgYT10aGlzLl9nZXRQYWdlRnJvbVBhZ2VJbmRleChvKTtmb3IobGV0IGw9MDtsPGkuY2hpbGRDb3VudDtsKyspe2NvbnN0IHQ9YS5jaGlsZHJlbltpLmNoaWxkT2Zmc2V0K2xdLG89dGhpcy5fZ2V0Tm9kZUludGVybmFsKHQpO2lmKG8pdGhpcy5fdHJhdmVyc2VWaXNpYmxlKHQsZSxvLG4scyk7ZWxzZXtpZihzKXtjb25zdCBlPXcodCx0aGlzLl9wYWdlU2l6ZSk7cy5hZGQoZSl9bih0LG51bGwsZSl9fX10cmF2ZXJzZShlLHQpe3QoZSkmJnRoaXMudHJhdmVyc2VEZXNjZW5kYW50cyhlLHQpfXRyYXZlcnNlRGVzY2VuZGFudHMoZSx0KXsrK3RoaXMuX3RyYXZlcnNlRGVzY2VuZGFudHNOZXN0aW5nTGV2ZWw7Y29uc3QgaT1lLmluZGV4LG49dGhpcy5fcGFnZVNpemUscz13KGksbiksbz10aGlzLl9nZXRQYWdlRnJvbVBhZ2VJbmRleChzKTtpZihudWxsPT1vKXJldHVybjtjb25zdCByPXRoaXMuX2ZyYW1lTnVtYmVyLGE9dGhpcy5fbm9kZVBhZ2VzLGw9RShpLG4pLGQ9by5ub2Rlc1tsXSxoPWQuY2hpbGRDb3VudDtpZihvLmxhc3RUcmF2ZXJzZWQ9ciwwPT09aClyZXR1cm47Y29uc3QgdT1uZXcgQXJyYXksYz0xPT09dGhpcy5fdHJhdmVyc2VEZXNjZW5kYW50c05lc3RpbmdMZXZlbD90aGlzLl90cmF2ZXJzZURlc2NlbmRhbnRzUXVldWU6WzBdO2xldCBnPTA7e2NvbnN0e2NoaWxkT2Zmc2V0OmUsY2hpbGRDb3VudDp0fT1kLHtjaGlsZHJlbjppfT1vO2MubGVuZ3RoPTIqKk1hdGguY2VpbChNYXRoLmxvZzIoZyt0KSk7Zm9yKGxldCBuPWU7bjxlK3Q7KytuKXtjb25zdCBlPWlbbl07ZT49MD8oY1tnXT1lLCsrZyk6dS5wdXNoKGUpfX1pZih1Lmxlbmd0aD4wKXtjb25zdCBlPXRoaXMuX2NsaWVudE5vZGVQYWdlO2lmKGUpe2NvbnN0IGk9ZS5jaGlsZHJlbjtsZXQgbj0wO2Zvcig7bjx1Lmxlbmd0aDspe2NvbnN0IHM9dVtuXTsrK247Y29uc3Qgbz0tcy0xLHI9ZS5ub2Rlc1tvXSxhPXIubm9kZTtpZighYXx8IXQoYSkpY29udGludWU7Y29uc3R7Y2hpbGRDb3VudDpsfT1yO2lmKDA9PT1sKWNvbnRpbnVlO2NvbnN0e2NoaWxkT2Zmc2V0OmR9PXIsaD1kK2w7Zm9yKGxldCBlPWQ7ZTxoOysrZSl1LnB1c2goaVtlXSl9fX1pZihnPjApe2xldCBlPTA7aWYobj4wKXtsZXQgaT1zKm4sbD1vLGQ9bC5ub2Rlcztmb3IoO2U8Zzspe2NvbnN0IHM9Y1tlXTtsZXQgbztpZigrK2UsaTw9cyYmczxpK24pbz1sO2Vsc2V7Y29uc3QgZT1zL258MCx0PWEuZ2V0KGUpO2lmKHZvaWQgMD09PXQpY29udGludWU7bz10LG8ubGFzdFRyYXZlcnNlZD1yLGw9byxkPWwubm9kZXMsaT1uKmV9Y29uc3QgaD1kW3MtaV0sdT1oLm5vZGU7aWYobnVsbD09dXx8ITE9PT10KHUpKWNvbnRpbnVlO2NvbnN0e2NoaWxkQ291bnQ6X309aDtpZigwPT09Xyljb250aW51ZTtjb25zdCBmPWcrXztmb3IoYy5sZW5ndGg8ZiYmKGMubGVuZ3RoPTIqKk1hdGguY2VpbChNYXRoLmxvZzIoZytfKSkpO2MubGVuZ3RoPGcrXzspYy5sZW5ndGgrPWMubGVuZ3RoO2NvbnN0IG09by5jaGlsZHJlbix7Y2hpbGRPZmZzZXQ6dn09aCxOPXYrXztmb3IobGV0IGU9djtlPE47KytlKWNbZ109bVtlXSwrK2d9fWVsc2V7Y29uc3QgaT1hLmdldCgwKTtpZihpKWZvcig7ZTxnOyl7Y29uc3Qgbj1jW2UrK10scz1pLm5vZGVzW25dLG89cy5ub2RlO2lmKCFvfHwhdChvKSljb250aW51ZTtjb25zdHtjaGlsZENvdW50OnJ9PXM7aWYoMD09PXIpY29udGludWU7Yy5sZW5ndGg9TWF0aC5tYXgoYy5sZW5ndGgsMioqTWF0aC5jZWlsKE1hdGgubG9nMihnK3IpKSk7Y29uc3QgYT1pLmNoaWxkcmVuLHtjaGlsZE9mZnNldDpsfT1zLGQ9bCtyO2ZvcihsZXQgZT1sO2U8ZDsrK2UpY1tnXT1hW2VdLCsrZ319fS0tdGhpcy5fdHJhdmVyc2VEZXNjZW5kYW50c05lc3RpbmdMZXZlbH11cGRhdGVDaGlsZHJlbkxvYWRlZChlLHQpe2xldCBpPXRoaXMuZ2V0Tm9kZShlKTtmb3IoO251bGwhPWk7KXtjb25zdCBlPWkuY2hpbGRyZW5Mb2FkZWQsbj1lK3Q7aS5jaGlsZHJlbkxvYWRlZD1uO2NvbnN0IHM9MD09PWU/MTowPT09bj8tMTowLG89aS5pbmRleDtpZigwIT09cyl7dGhpcy5fZ2V0UGFnZShvKS5udW1Ob2Rlc1dpdGhMb2FkZWRDaGlsZHJlbis9c31pPXRoaXMuZ2V0UGFyZW50KG8pfX1jaGVja0NoaWxkcmVuTG9hZGVkSW52YXJpYW50KCl7cmV0dXJuITB9dXBkYXRlRWxldmF0aW9uSW5mbyhlLHQpe3RoaXMubmVlZE5vZGVFbGV2YXRpb25SYW5nZT10JiYhIWUmJihcInJlbGF0aXZlLXRvLWdyb3VuZFwiPT09ZS5tb2RlfHxcInJlbGF0aXZlLXRvLXNjZW5lXCI9PT1lLm1vZGV8fFwib24tdGhlLWdyb3VuZFwiPT09ZS5tb2RlKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlRWxldmF0aW9uSW5mbyhlKSx0aGlzLmludmFsaWRhdGVBbGxFbGV2YXRpb25SYW5nZXMoKX1pbnZhbGlkYXRlQWxsRWxldmF0aW9uUmFuZ2VzKCl7dGhpcy5fZm9yQWxsTm9kZXMoKGU9PntlPy5pbnZhbGlkYXRlQm91bmRzKCksZS5ub2RlPy5pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2UoKSxlLnJlZj8uaW52YWxpZGF0ZUVsZXZhdGlvblJhbmdlKCl9KSl9X2ZvckFsbE5vZGVzKGUpe2lmKG51bGwhPXRoaXMuX2NsaWVudE5vZGVQYWdlKXtjb25zdCB0PXRoaXMuX2NsaWVudE5vZGVQYWdlO2ZvcihsZXQgaT0wO2k8dC5ub2Rlcy5sZW5ndGg7aSsrKWUodC5ub2Rlc1tpXSwtKGkrMSkpfWZvcihjb25zdFt0LGldb2YgdGhpcy5fbm9kZVBhZ2VzKXtjb25zdCBuPXQqdGhpcy5fcGFnZVNpemU7Zm9yKGxldCB0PTA7dDxpLm5vZGVzLmxlbmd0aDt0KyspZShpLm5vZGVzW3RdLG4rdCl9fWNsZWFyQ2FjaGVzKCl7aWYodGhpcy5fdXNlTm9kZVBhZ2VzKXtjb25zdCBlPXRoaXMuX25vZGVQYWdlcyx0PW5ldyBTZXQ7dGhpcy50cmF2ZXJzZVZpc2libGUoKGU9PnQuYWRkKHcoZSx0aGlzLl9wYWdlU2l6ZSkpKSk7Zm9yKGNvbnN0W2ksbl1vZiBlKWlmKDAhPT1uLm51bU5vZGVzV2l0aExvYWRlZENoaWxkcmVufHx0LmhhcyhpKSlmb3IoY29uc3QgZSBvZiBuLm5vZGVzKWUudHJhdmVyc2FsU3RhdGU9bnVsbDtlbHNlIHRoaXMuX2RlbGV0ZU5vZGVQYWdlKGkpfX1fZGVsZXRlTm9kZVBhZ2UoZSl7dGhpcy5fbm9kZVBhZ2VzLmRlbGV0ZShlKX1nZXQgdGVzdCgpe319Y29uc3QgST1uZXcgTWFwO2NsYXNzIHl7Y29uc3RydWN0b3IodCl7dGhpcy5taXNzaW5nPXQsdGhpcy51cGRhdGU9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLmFkZD1uZXcgZSh7ZGVhbGxvY2F0b3I6bnVsbH0pLHRoaXMucmVtb3ZlPW5ldyBlKHtkZWFsbG9jYXRvcjpudWxsfSksdGhpcy5jYW5jZWw9W119cmVzZXQoZSl7dGhpcy5hZGQuY2xlYXIoKSx0aGlzLnVwZGF0ZS5jbGVhcigpLHRoaXMuY2FuY2VsPWV9fWZ1bmN0aW9uIFAoZSl7cmV0dXJuIF8oZSwtMil9ZnVuY3Rpb24geChlKXtyZXR1cm4gXyhlLDIpfWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm4gdCsoZT8xOjApfWZ1bmN0aW9uIFIoZSx0KXtyZXR1cm4oLTImZSk9PT10fWZ1bmN0aW9uIEMoZSl7cmV0dXJuISgxJn5lKX1mdW5jdGlvbiB3KGUsdCl7cmV0dXJuIGU8MD8tMTp0PjA/ZS90fDA6MH1mdW5jdGlvbiBFKGUsdCl7cmV0dXJuIGU8MD8tZS0xOjA9PT10P2U6ZSV0fWZ1bmN0aW9uIE0oZSx0LGkpe3JldHVybi0xPT09dD8tKGUrMSk6MD09PWk/ZTp0KmkrZX1jb25zdCBWPVtbXCJtYXhTY3JlZW5UaHJlc2hvbGRcIixhLk1heFNjcmVlblRocmVzaG9sZF0sW1wic2NyZWVuU3BhY2VSZWxhdGl2ZVwiLGEuU2NyZWVuU3BhY2VSZWxhdGl2ZV0sW1wicmVtb3ZlZEZlYXR1cmVEaWFtZXRlclwiLGEuUmVtb3ZlZEZlYXR1cmVEaWFtZXRlcl0sW1wiZGlzdGFuY2VSYW5nZUZyb21EZWZhdWx0Q2FtZXJhXCIsYS5EaXN0YW5jZVJhbmdlRnJvbURlZmF1bHRDYW1lcmFdXTtmdW5jdGlvbiBPKGUpe2lmKGUpZm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0KyspZm9yKGNvbnN0IGkgb2YgVilpZihpWzBdPT09ZVt0XS5tZXRyaWNUeXBlKXJldHVybntsb2RNZXRyaWM6aVsxXSxtYXhFcnJvcjplW3RdLm1heEVycm9yfTtyZXR1cm57bG9kTWV0cmljOmEuTm9uZSxtYXhFcnJvcjowfX1jbGFzcyBBe2NvbnN0cnVjdG9yKCl7dGhpcy5rbm93bj0wLHRoaXMua25vd25Ob2Rlcz0wLHRoaXMubWlzc2luZz0wLHRoaXMubWlzc2luZ05vZGVzPTAsdGhpcy51bnJlbW92ZWQ9MH19Y2xhc3MgTHtjb25zdHJ1Y3Rvcigpe3RoaXMubnVtRmVhdHVyZXM9MCx0aGlzLmtub3duTm9kZXM9MCx0aGlzLm1pc3NpbmdOb2Rlcz0wfX1mdW5jdGlvbiBGKGUpe3JldHVybiBNYXRoLnNxcnQoZSooNC9NYXRoLlBJKSl9Y29uc3QgRD1vKCksaz1vKCksej1vKCksVD1vKCksQj1oYXMoXCJlc3JpLW1vYmlsZVwiKT8xMDA6MzAwO2V4cG9ydHtiIGFzIEkzU0luZGV4LE8gYXMgc2VsZWN0RXJyb3JNZXRyaWN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvUG9vbGVkQXJyYXkuanNcIjtpbXBvcnR7Tm9kZVN0YXRlIGFzIGl9ZnJvbVwiLi9JM1NOb2RlLmpzXCI7aW1wb3J0e0ZhZGVEaXJlY3Rpb24gYXMgc31mcm9tXCIuLi9zdXBwb3J0L0kzU0xheWVyVmlldy5qc1wiO2NsYXNzIG97Y29uc3RydWN0b3IoZSl7dGhpcy5fbGF5ZXJWaWV3PWUsdGhpcy5fbG9kR2xvYmFsRGlydHk9ITF9c3RhcnROb2RlTG9hZGluZyhlLGkscyl7dGhpcy5fbWF4TG9kTGV2ZWw9cy5tYXhMb2RMZXZlbCx0aGlzLl9pbmRleD1pLHRoaXMuX3JlbW92ZU5vZGVzPWV9c2hvdWxkTG9hZE5vZGUoZSl7aWYobnVsbD09ZSlyZXR1cm4hMTtjb25zdCBpPXRoaXMuX2luZGV4Lm5vZGVUcmF2ZXJzYWxTdGF0ZShlKTtyZXR1cm4hIXRoaXMuX2lzQ2hvc2VuTWF4TE9EKGkpfHwhIWkuaXNDaG9zZW4mJnRoaXMuX2NoaWxkcmVuUmVxdWlyZUxvYWRpbmcoZSl9c2V0TG9kR2xvYmFsRGlydHkoKXt0aGlzLl9sb2RHbG9iYWxEaXJ0eT0hMH1nZXQgcmVxdWlyZXNMT0RHbG9iYWxIYW5kbGluZygpe3JldHVybiBudWxsIT10aGlzLl9pbmRleCYmITA9PT10aGlzLl9sb2RHbG9iYWxEaXJ0eX1sb2RHbG9iYWxIYW5kbGluZyhlKXtpZighdGhpcy5yZXF1aXJlc0xPREdsb2JhbEhhbmRsaW5nKXJldHVybiExO3RoaXMuX2xvZEdsb2JhbERpcnR5PSExO2NvbnN0IGk9dGhpcy5fbGF5ZXJWaWV3LnZpZXcucmVzb3VyY2VDb250cm9sbGVyLm1lbW9yeUNvbnRyb2xsZXIudXNlZE1lbW9yeSxzPU1hdGgubWF4KDAsTWF0aC5mbG9vcigxMCooaS0xKSkpO3QuY2xlYXIoKSx0aGlzLl9sb2RHbG9iYWxIYW5kbGluZyh0aGlzLl9pbmRleC5yb290Tm9kZSxzLCExLCEhdGhpcy5fbGF5ZXJWaWV3Lm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQpO2NvbnN0IG89dC5sZW5ndGg7dGhpcy5fcmVtb3ZlTm9kZXModCxlKTtjb25zdCBkPXQubGVuZ3RoPG87cmV0dXJuIDAhPT10Lmxlbmd0aCYmKHRoaXMuX2xvZEdsb2JhbERpcnR5PSEwKSx0LmNsZWFyKCksZH1fbG9kR2xvYmFsSGFuZGxpbmcoZSxvLGQsbCl7aWYobnVsbD09ZSlyZXR1cm4hMTtjb25zdCBuPWUuaW5kZXgscj10aGlzLl9pbmRleCxhPXRoaXMuX2xheWVyVmlldyxoPXIubm9kZVRyYXZlcnNhbFN0YXRlKGUpLHU9dGhpcy5faXNDaG9zZW5NYXhMT0QoaCksXz1lLnJlc291cmNlcy5pc0VtcHR5O2lmKHUmJl8pcmV0dXJuIGUuY2hpbGRyZW5Mb2FkZWQ+MCYmdGhpcy5fcmVtb3ZlQ2hpbGRyZW5SZWN1cnNpdmUoZSksITA7Y29uc3QgYz1hLmlzTm9kZUxvYWRlZChuKTtpZihsJiZjJiZ1KXtjb25zdCBpPSFkJiZ0aGlzLmhhc05vVmlzaWJsZUNoaWxkcmVuKGUpO2EuZmFkZU5vZGUobixzLkZhZGVJbiwhaSl9Y29uc3QgeD1jJiYoIWEuaXNOb2RlRnVsbHlGYWRlZElufHxhLmlzTm9kZUZ1bGx5RmFkZWRJbihuKSk7aWYoYyYmKGEudXBkYXRlTm9kZVN0YXRlKG4sdT9pLkxlYWY6aS5Ib2xlKSx1KSlyZXR1cm4geCYmdGhpcy5fcmVtb3ZlQ2hpbGRyZW5SZWN1cnNpdmUoZSkseDtjb25zdCBMPWUuY2hpbGRDb3VudD4wO2xldCB5PUw7aWYoTClmb3IobGV0IGk9MDtpPGUuY2hpbGRDb3VudDtpKyspe2NvbnN0IGU9ci5nZXRDaGlsZEluZGV4KG4saSkscz1yLmdldE5vZGUoZSk7aWYobnVsbCE9cyl7IXIuaXNHZW9tZXRyeVZpc2libGUoZSl8fHRoaXMuX2xvZEdsb2JhbEhhbmRsaW5nKHMsbyxkfHx4LGwpfHwoeT0hMSl9ZWxzZSByLmlzTm9kZVZpc2libGUoZSkmJih5PSExKX1jb25zdCBtPWMmJiF1JiYoeXx8dC5sZW5ndGg8byk7bSYmdC5wdXNoKG4pLCFsfHxtfHwhY3x8ZHx8eXx8YS5mYWRlTm9kZShuLHMuRmFkZUluLCExKTtjb25zdCBOPWUucmVzb3VyY2VzLmlzRW1wdHk7cmV0dXJuIHl8fHgmJiFtfHxOfV9yZW1vdmVDaGlsZHJlblJlY3Vyc2l2ZShlKXt0aGlzLl9pbmRleC50cmF2ZXJzZURlc2NlbmRhbnRzKGUsKGU9PigodGhpcy5fbGF5ZXJWaWV3LmlzTm9kZUxvYWRlZChlLmluZGV4KXx8dGhpcy5fbGF5ZXJWaWV3LmlzTm9kZVJlbG9hZGluZyhlLmluZGV4KSkmJnQucHVzaChlLmluZGV4KSxlLmNoaWxkcmVuTG9hZGVkPjApKSl9aGFzTm9WaXNpYmxlQ2hpbGRyZW4oZSl7bGV0IGk9ITA7cmV0dXJuIHRoaXMuX2luZGV4LnRyYXZlcnNlRGVzY2VuZGFudHMoZSwoZT0+ISghaXx8IXRoaXMuX2luZGV4LmlzTm9kZVZpc2libGUoZS5pbmRleCkpJiYodGhpcy5fbGF5ZXJWaWV3LmlzTm9kZUxvYWRlZChlLmluZGV4KT8oaT0hMSwhMSk6ZS5jaGlsZHJlbkxvYWRlZD4wKSkpLGl9X2NoaWxkcmVuUmVxdWlyZUxvYWRpbmcoZSl7bGV0IGk9ITEscz0hMDtyZXR1cm4gdGhpcy5faW5kZXgudHJhdmVyc2VEZXNjZW5kYW50cyhlLChlPT57aWYoIXN8fCF0aGlzLl9pbmRleC5pc05vZGVWaXNpYmxlKGUuaW5kZXgpKXJldHVybiExO2NvbnN0IG89dGhpcy5faW5kZXgubm9kZVRyYXZlcnNhbFN0YXRlKGUpO3JldHVybiB0aGlzLl9pc0Nob3Nlbk1heExPRChvKSYmdGhpcy5faW5kZXguaXNHZW9tZXRyeVZpc2libGUoZS5pbmRleCkmJihpPSEwKSx0aGlzLl9sYXllclZpZXcuaXNOb2RlTG9hZGVkKGUuaW5kZXgpPyhzPSExLCExKTplLmNoaWxkcmVuTG9hZGVkPjB9KSkscyYmaX1faXNDaG9zZW5NYXhMT0QoZSl7cmV0dXJuIGUuaXNDaG9zZW4mJighZS5ub2RlSGFzTE9EfHxlLmxvZExldmVsPT09dGhpcy5fbWF4TG9kTGV2ZWwpfX1jb25zdCB0PW5ldyBlKHtkZWFsbG9jYXRvcjpudWxsfSk7ZXhwb3J0e28gYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3ZhbGlkYXRlQ29sb3JBbmRPcGFjaXR5IGFzIGUsdmFsaWRhdGVDb2xvciBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvY29sb3JVdGlscy5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7Y2xhbXAgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL21hdGhVdGlscy5qc1wiO2ltcG9ydHtFbWlzc2l2ZVNvdXJjZU1vZGUgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9zeW1ib2xzL3N1cHBvcnQvbWF0ZXJpYWxVdGlscy5qc1wiO2ltcG9ydHtUZXh0dXJlVXNhZ2UgYXMgYSxUZXh0dXJlRW5jb2RpbmcgYXMgdCx1bmNvbXByZXNzZWRGb3JtYXRzIGFzIGwsY29tcHJlc3NpYmxlVXNhZ2VzIGFzIG59ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtSZW5kZXJUZXh0dXJlIGFzIGl9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2NvcmUvbWF0ZXJpYWwvUmVuZGVyVGV4dHVyZS5qc1wiO2ltcG9ydHtnZXRFbGxpcHNvaWRNb2RlIGFzIHV9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2NvcmUvc2hhZGVyTGlicmFyeS91dGlsL0VsbGlwc29pZE1vZGUuanNcIjtpbXBvcnR7Q3VsbEZhY2VPcHRpb25zIGFzIGMsQWxwaGFEaXNjYXJkTW9kZSBhcyBtLFRleHR1cmVFbmNvZGluZ01pbWVUeXBlIGFzIGR9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9iYXNpY0ludGVyZmFjZXMuanNcIjtpbXBvcnR7VGV4dHVyZSBhcyBwfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvVGV4dHVyZS5qc1wiO2ltcG9ydHt1c2VTY2hlbWF0aWNQQlJJM1MgYXMgZyx1c2VTY2hlbWF0aWNQQlIgYXMgZixzY2hlbWF0aWNNUlJGYWN0b3JzIGFzIGgsYWR2YW5jZWRNUlJGYWN0b3JzIGFzIFR9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL21hdGVyaWFscy9wYnJVdGlscy5qc1wiO2ltcG9ydHtUZXh0dXJlV3JhcE1vZGUgYXMgeH1mcm9tXCIuLi8uLi8uLi93ZWJnbC9lbnVtcy5qc1wiO2ltcG9ydHthbHBoYUN1dG9mZiBhcyBGfWZyb21cIi4uLy4uLy4uLy4uL3dlYnNjZW5lL3N1cHBvcnQvQWxwaGFDdXRvZmYuanNcIjtmdW5jdGlvbiBiKG8scixzKXtjb25zdCB0PW5ldyBNYXAsbD0oZSxvKT0+e2lmKG51bGw9PWUpcmV0dXJuLTE7Y29uc3Qgcj10LmdldChlLmlkKTtpZihyKXJldHVybiByLnVzYWdlfD1vLHIuaWQ7Y29uc3Qgcz10LnNpemU7cmV0dXJuIHQuc2V0KGUuaWQse2lkOnMsdXNhZ2U6b30pLHN9LG49ci5wYnJNZXRhbGxpY1JvdWdobmVzcyxpPW4/LmJhc2VDb2xvckZhY3Rvcj9lKG4uYmFzZUNvbG9yRmFjdG9yKTpudWxsLHU9ci5lbWlzc2l2ZUZhY3RvcixtPWhhcyhcImRpc2FibGUtZmVhdHVyZTpkaWZmdXNlLXJlbmRlcmluZy1pM3NcIil8fHM/Zyh7bm9ybWFsVGV4dHVyZTpyLm5vcm1hbFRleHR1cmUsZW1pc3NpdmVUZXh0dXJlOnIuZW1pc3NpdmVUZXh0dXJlLGVtaXNzaXZlRmFjdG9yOnIuZW1pc3NpdmVGYWN0b3Isb2NjbHVzaW9uVGV4dHVyZTpyLm9jY2x1c2lvblRleHR1cmUsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlOm4/Lm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSxtZXRhbGxpY0ZhY3RvcjpuPy5tZXRhbGxpY0ZhY3Rvcixyb3VnaG5lc3NGYWN0b3I6bj8ucm91Z2huZXNzRmFjdG9yfSk6Zih7bm9ybWFsVGV4dHVyZTpyLm5vcm1hbFRleHR1cmUsZW1pc3NpdmVUZXh0dXJlOnIuZW1pc3NpdmVUZXh0dXJlLGVtaXNzaXZlRmFjdG9yOnIuZW1pc3NpdmVGYWN0b3Isb2NjbHVzaW9uVGV4dHVyZTpyLm9jY2x1c2lvblRleHR1cmUsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlOm4/Lm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSxtZXRhbGxpY0ZhY3RvcjpuPy5tZXRhbGxpY0ZhY3Rvcixyb3VnaG5lc3NGYWN0b3I6bj8ucm91Z2huZXNzRmFjdG9yfSksZD1tP2hbMF06bj8ubWV0YWxsaWNGYWN0b3I/P1RbMF0scD1tP2hbMV06bj8ucm91Z2huZXNzRmFjdG9yPz9UWzFdLHg9XCJtYXNrXCI9PT1yLmFscGhhTW9kZT9hLkNvbG9yfGEuQWxwaGFNYXNrOmEuQ29sb3IsRj17YmFzZUNvbG9yRmFjdG9yOmk/W2lbMF0saVsxXSxpWzJdLGlbM11dOlsxLDEsMSwxXSxiYXNlQ29sb3JUZXh0dXJlSWQ6bChuPy5iYXNlQ29sb3JUZXh0dXJlLHgpLG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZUlkOmwobj8ubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLGEuTWV0YWxsaWNSb3VnaG5lc3MpLG1ldGFsbGljRmFjdG9yOmQscm91Z2huZXNzRmFjdG9yOnB9LGI9e2FscGhhTW9kZTpyLmFscGhhTW9kZSxhbHBoYUN1dG9mZjpyLmFscGhhQ3V0b2ZmLGRvdWJsZVNpZGVkOnIuZG91YmxlU2lkZWQsY3VsbEZhY2U6XCJub25lXCI9PT1yLmN1bGxGYWNlP2MuTm9uZTpcImJhY2tcIj09PXIuY3VsbEZhY2U/Yy5CYWNrOlwiZnJvbnRcIj09PXIuY3VsbEZhY2U/Yy5Gcm9udDpjLk5vbmUsbm9ybWFsVGV4dHVyZUlkOmwoci5ub3JtYWxUZXh0dXJlLGEuTm9ybWFsKSxlbWlzc2l2ZVRleHR1cmVJZDpsKHIuZW1pc3NpdmVUZXh0dXJlLGEuRW1pc3NpdmUpLG9jY2x1c2lvblRleHR1cmVJZDpsKHIub2NjbHVzaW9uVGV4dHVyZSxhLk9jY2x1c2lvbiksZW1pc3NpdmVGYWN0b3I6dT9bdVswXSx1WzFdLHVbMl1dOlswLDAsMF0sbWV0YWxsaWNSb3VnaG5lc3M6Rix3cmFwVGV4dHVyZXM6ITEsaGFzUGFyYW1ldGVyc0Zyb21Tb3VyY2U6bX0sTT1bXTtyZXR1cm4gdC5mb3JFYWNoKCgoe3VzYWdlOmV9LHIpPT57Y29uc3Qgcz1udWxsIT1vJiZvW3JdJiZvW3JdLmZvcm1hdHMsYT1zP0Mocy5tYXAoKCh7bmFtZTplLGZvcm1hdDpvfSk9Pih7bmFtZTplLGVuY29kaW5nOlNbb119KSkpKTpbXTtNLnB1c2goe2lkOnIsdXNhZ2U6ZSxlbmNvZGluZ3M6YX0pfSkpLHttYXRlcmlhbDpiLHRleHR1cmVzOk19fWZ1bmN0aW9uIEMoZSl7cmV0dXJuIGUuc29ydCgoKGUsbyk9PmUuZW5jb2Rpbmctby5lbmNvZGluZykpfWNvbnN0IFM9e2t0eDI6dC5LVFgyLGJhc2lzOnQuQmFzaXMsZGRzOnQuRERTX1MzVEMscG5nOnQuUE5HLGpwZzp0LkpQRyxcImt0eC1ldGMyXCI6dC5LVFhfRVRDMn0sTT17W2QuS1RYMl9FTkNPRElOR106dC5CYXNpcyxbZC5CQVNJU19FTkNPRElOR106dC5CYXNpcyxbZC5ERFNfRU5DT0RJTkddOnQuRERTX1MzVEMsXCJpbWFnZS9wbmdcIjp0LlBORyxcImltYWdlL2pwZ1wiOnQuSlBHLFwiaW1hZ2UvanBlZ1wiOnQuSlBHLFwiaW1hZ2Uva3R4XCI6dC5LVFhfRVRDMn07ZnVuY3Rpb24gUChlKXtjb25zdCBzPWU/Lm1hdGVyaWFsRGVmaW5pdGlvbnM/T2JqZWN0LmtleXMoZS5tYXRlcmlhbERlZmluaXRpb25zKVswXTpudWxsLHQ9ZT8udGV4dHVyZURlZmluaXRpb25zP09iamVjdC5rZXlzKGUudGV4dHVyZURlZmluaXRpb25zKVswXTpudWxsLGw9cz9lLm1hdGVyaWFsRGVmaW5pdGlvbnM/LltzXTpudWxsLG49dD9lLnRleHR1cmVEZWZpbml0aW9ucz8uW3RdOm51bGwsaT1EKCk7aWYobnVsbCE9bCl7Y29uc3QgZT1sLnBhcmFtcztlLmRpZmZ1c2UmJihvKGUuZGlmZnVzZSksaS5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3I9W2UuZGlmZnVzZVswXSxlLmRpZmZ1c2VbMV0sZS5kaWZmdXNlWzJdLDFdKSxudWxsIT1lLmRvdWJsZVNpZGVkJiYoaS5kb3VibGVTaWRlZD1lLmRvdWJsZVNpZGVkLGkuY3VsbEZhY2U9ZS5kb3VibGVTaWRlZD9jLk5vbmU6Yy5CYWNrKSxcIm5vbmVcIiE9PWUuY3VsbEZhY2UmJlwiZnJvbnRcIiE9PWUuY3VsbEZhY2UmJlwiYmFja1wiIT09ZS5jdWxsRmFjZXx8KGkuY3VsbEZhY2U9XCJub25lXCI9PT1lLmN1bGxGYWNlP2MuTm9uZTpcImJhY2tcIj09PWUuY3VsbEZhY2U/Yy5CYWNrOmMuRnJvbnQpLGUudHJhbnNwYXJlbmN5JiYoaS5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3JbM109cigxLWUudHJhbnNwYXJlbmN5LDAsMSkpLChlLnVzZVZlcnRleENvbG9yQWxwaGF8fGkubWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yWzNdPDEpJiYoaS5hbHBoYU1vZGU9XCJibGVuZFwiKX1jb25zdCB1PVtdO2lmKG51bGwhPW4pe2NvbnN0IGU9MDshbi53cmFwfHxcInJlcGVhdFwiIT09bi53cmFwWzBdJiZcInJlcGVhdFwiIT09bi53cmFwWzFdfHwoaS53cmFwVGV4dHVyZXM9ITApO2xldCBvPWEuQ29sb3I7XCJyZ2JhXCI9PT1uLmNoYW5uZWxzJiYoaS5hbHBoYU1vZGU9XCJibGVuZFwiLG98PWEuQWxwaGFNYXNrKTtjb25zdCByPW4uaW1hZ2VzLmxlbmd0aC0xLHM9bi5pbWFnZXNbcl0sdD1lPT5lPy5zcGxpdChcIi9cIikucG9wKCksbD1BcnJheS5pc0FycmF5KG4uZW5jb2RpbmcpP0Mobi5lbmNvZGluZy5tYXAoKChlLG8pPT4oe25hbWU6dChzLmhyZWZbb10pLGVuY29kaW5nOk1bZV18fDB9KSkpKTpbe25hbWU6dChzLmhyZWYpLGVuY29kaW5nOk1bbi5lbmNvZGluZ118fDB9XTt1LnB1c2goe2lkOmUsdXNhZ2U6byxlbmNvZGluZ3M6bH0pLGkubWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZUlkPWV9cmV0dXJue21hdGVyaWFsOmksdGV4dHVyZXM6dX19Y29uc3QgRD0oKT0+KHthbHBoYU1vZGU6XCJvcGFxdWVcIixhbHBoYUN1dG9mZjpGLGRvdWJsZVNpZGVkOiEwLGN1bGxGYWNlOmMuTm9uZSxub3JtYWxUZXh0dXJlSWQ6LTEsZW1pc3NpdmVUZXh0dXJlSWQ6LTEsb2NjbHVzaW9uVGV4dHVyZUlkOi0xLGVtaXNzaXZlRmFjdG9yOlswLDAsMF0sbWV0YWxsaWNSb3VnaG5lc3M6e2Jhc2VDb2xvckZhY3RvcjpbLjgsLjgsLjgsMV0sYmFzZUNvbG9yVGV4dHVyZUlkOi0xLG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZUlkOi0xLG1ldGFsbGljRmFjdG9yOjAscm91Z2huZXNzRmFjdG9yOi42fSx3cmFwVGV4dHVyZXM6ITEsaGFzUGFyYW1ldGVyc0Zyb21Tb3VyY2U6ITB9KTtmdW5jdGlvbiBSKGUsbyxyLHMsdCxsKXtpZihudWxsPT1lPy5kYXRhKXJldHVybiBudWxsO2NvbnN0IG49ZS5kYXRhLGk9cy5yZW5kZXJpbmdDb250ZXh0LnBhcmFtZXRlcnMubWF4TWF4QW5pc290cm9weSx1PWk+MSxjPXJ8fCFvLndyYXBUZXh0dXJlcz93OkUsbT1HKGUuZW5jb2RpbmcpLGQ9ZS51c2FnZSZhLkNvbG9yP1wib3BhcXVlXCI9PT1vLmFscGhhTW9kZT8zOjQ6MyxnPWooZS5lbmNvZGluZyxlLnVzYWdlKT97Y29tcHJlc3Npb25UcmFja2VyOnQsY29tcHJlc3Npb25DYWxsYmFjazpsfTp2b2lkIDA7cmV0dXJuIG5ldyBwKG4se21pcG1hcDp1LG1heEFuaXNvdHJvcHk6aSxlbmNvZGluZzptLHdyYXA6Yyxjb21wb25lbnRzOmQsY29tcHJlc3Npb25PcHRpb25zOmcsbm9VbnBhY2tGbGlwOiEwfSl9Y29uc3Qgdz17czp4LkNMQU1QX1RPX0VER0UsdDp4LkNMQU1QX1RPX0VER0V9LEU9e3M6eC5SRVBFQVQsdDp4LlJFUEVBVH07ZnVuY3Rpb24gTihvLHIsdCxsLG4sYyl7Y29uc3QgZD1jLnJlbmRlcmVyVGV4dHVyZVVzYWdlLHA9ZT0+dihsLHQsZSZkKSxnPWUoci5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3IpO28uYmFzZUNvbG9yPVtnWzBdLGdbMV0sZ1syXSxnWzNdXSxvLmhhc1BhcmFtZXRlcnNGcm9tU291cmNlPSEhci5oYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZSxvLnVzZVBCUj1jLnVzZVBCUixvLm1yckZhY3RvcnM9W3IubWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3Isci5tZXRhbGxpY1JvdWdobmVzcy5yb3VnaG5lc3NGYWN0b3Isci5oYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZT9oWzJdOlRbMl1dLG8uZW1pc3NpdmVCYXNlQ29sb3I9ci5lbWlzc2l2ZUZhY3RvcixvLmVtaXNzaXZlU291cmNlPXMuRW1pc3NpdmUsby5pc0ludGVncmF0ZWRNZXNoPWMuaXNJbnRlZ3JhdGVkTWVzaCxvLnRleHR1cmVBbHBoYUN1dG9mZj1cIm1hc2tcIj09PXIuYWxwaGFNb2RlP3IuYWxwaGFDdXRvZmY6RixvLmFscGhhRGlzY2FyZE1vZGU9XCJvcGFxdWVcIj09PXIuYWxwaGFNb2RlP20uT3BhcXVlOlwibWFza1wiPT09ci5hbHBoYU1vZGU/bS5NYXNrOm0uTWFza0JsZW5kO2NvbnN0IGY9W10seD1wKGEuQ29sb3J8YS5BbHBoYU1hc2spO251bGwhPXgmJihvLmJhc2VDb2xvclRleHR1cmU9bmV3IGkobix4KSxmLnB1c2goby5iYXNlQ29sb3JUZXh0dXJlLmxvYWRQcm9taXNlKSk7Y29uc3QgYj1wKGEuTWV0YWxsaWNSb3VnaG5lc3MpO251bGwhPWImJihvLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZT1uZXcgaShuLGIpLGYucHVzaChvLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZS5sb2FkUHJvbWlzZSkpO2NvbnN0IEM9cChhLkVtaXNzaXZlKTtudWxsIT1DJiYoby5lbWlzc2lvblRleHR1cmU9bmV3IGkobixDKSxmLnB1c2goby5lbWlzc2lvblRleHR1cmUubG9hZFByb21pc2UpKTtjb25zdCBTPXAoYS5PY2NsdXNpb24pO251bGwhPVMmJihvLm9jY2x1c2lvblRleHR1cmU9bmV3IGkobixTKSxmLnB1c2goby5vY2NsdXNpb25UZXh0dXJlLmxvYWRQcm9taXNlKSk7Y29uc3QgTT1wKGEuTm9ybWFsKTtyZXR1cm4gbnVsbCE9TSYmKG8ubm9ybWFsVGV4dHVyZT1uZXcgaShuLE0pLGYucHVzaChvLm5vcm1hbFRleHR1cmUubG9hZFByb21pc2UpKSxvLmNvbW1vbk1hdGVyaWFsUGFyYW1ldGVycy5oYXNTbGljZVBsYW5lPWMuc2xpY2VQbGFuZUVuYWJsZWQsby5jb21tb25NYXRlcmlhbFBhcmFtZXRlcnMuZG91YmxlU2lkZWQ9ci5kb3VibGVTaWRlZCxvLmNvbW1vbk1hdGVyaWFsUGFyYW1ldGVycy5jdWxsRmFjZT1yLmN1bGxGYWNlLG8uZWxsaXBzb2lkTW9kZT11KGMudmlld1NwYXRpYWxSZWZlcmVuY2UpLFByb21pc2UuYWxsKGYpfWZ1bmN0aW9uIGsoZSl7Y29uc3Qgbz0hIWUuY29tcHJlc3NlZFRleHR1cmVTM1RDLHI9ISFlLmNvbXByZXNzZWRUZXh0dXJlRVRDLHM9aGFzKFwiZGlzYWJsZS1mZWF0dXJlOmkzcy1iYXNpc1wiKT8wOnQuQmFzaXN8dC5LVFgyLGE9dC5KUEd8dC5QTkcsbD1zfHQuRERTX1MzVEM7cmV0dXJuIGF8KG8/bDowKXwocj9zOjApfWZ1bmN0aW9uIEkoZSxvKXtpZihudWxsIT1vKXJldHVybiBlLmZpbmQoKGU9PjAhPT0oZS5lbmNvZGluZyZvKSkpfWZ1bmN0aW9uIHYoZSxvLHIpe2lmKG51bGw9PWV8fHI9PT1hLk5vbmUpcmV0dXJuIG51bGw7Zm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspe2NvbnN0IGE9ZVtzXTtpZihudWxsIT1hJiYwIT09KGEudXNhZ2Umcikpe2NvbnN0IGU9b1tzXTtyZXR1cm4gbnVsbCE9ZT9lLmlkOm51bGx9fXJldHVybiBudWxsfWZ1bmN0aW9uIGooZSxvKXtyZXR1cm4hIWhhcyhcImVuYWJsZS1mZWF0dXJlOmVzcmktY29tcHJlc3MtSU0tdGV4dHVyZXNcIikmJigwIT09KGUmbCkmJiEobyZ+bikpfWZ1bmN0aW9uIEcoZSl7c3dpdGNoKGUpe2Nhc2UgdC5LVFgyOnJldHVybiBkLktUWDJfRU5DT0RJTkc7Y2FzZSB0LkJhc2lzOnJldHVybiBkLkJBU0lTX0VOQ09ESU5HO2Nhc2UgdC5ERFNfUzNUQzpyZXR1cm4gZC5ERFNfRU5DT0RJTkc7Y2FzZSB0LlBORzpyZXR1cm5cImltYWdlL3BuZ1wiO2Nhc2UgdC5KUEc6cmV0dXJuXCJpbWFnZS9qcGVnXCI7Y2FzZSB0LktUWF9FVEMyOnJldHVyblwiaW1hZ2Uva3R4XCI7ZGVmYXVsdDpyZXR1cm5cIlwifX1leHBvcnR7TiBhcyBjb25maWd1cmVNYXRlcmlhbCxSIGFzIGNyZWF0ZVRleHR1cmUsRCBhcyBkZWZhdWx0TWF0ZXJpYWwsYiBhcyBnZXRNYXRlcmlhbEFuZFRleHR1cmVzLFAgYXMgZ2V0TWF0ZXJpYWxBbmRUZXh0dXJlc0Zyb21TaGFyZWQsayBhcyBnZXRTdXBwb3J0ZWRFbmNvZGluZ3MsSSBhcyBzZWxlY3RFbmNvZGluZ307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2Zyb21WYWx1ZXMgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzRmNjQuanNcIjtpbXBvcnR7ZiBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnR7aW52YWxpZGF0ZU1icyBhcyBufWZyb21cIi4vSTNTVXRpbC5qc1wiO2ltcG9ydHtFbGV2YXRpb25SYW5nZSBhcyB0fWZyb21cIi4uLy4uL3N1cHBvcnQvRWxldmF0aW9uUmFuZ2UuanNcIjtjbGFzcyBzIGV4dGVuZHMgdHtjb25zdHJ1Y3RvcihlLG4pe3N1cGVyKE5hTixOYU4pLHRoaXMuaWQ9ZSx0aGlzLnNlcnZpY2VNYnNJbkluZGV4U1I9bix0aGlzLnNlcnZpY2VNYnNJblJlbmRlclNSPWkoMCwwLDAsLTEpfWludmFsaWRhdGVTZXJ2aWNlQlZzSW5SZW5kZXJTUigpe24odGhpcy5zZXJ2aWNlTWJzSW5SZW5kZXJTUiksdGhpcy5zZXJ2aWNlT2JiSW5SZW5kZXJTUj8uaW52YWxpZGF0ZSgpfXNoYXJlU2VydmljZUJWc0luUmVuZGVyU1JXaXRoKGUpe3RoaXMuc2VydmljZU9iYkluUmVuZGVyU1I9ZS5zZXJ2aWNlT2JiSW5SZW5kZXJTUix0aGlzLnNlcnZpY2VNYnNJblJlbmRlclNSPWUuc2VydmljZU1ic0luUmVuZGVyU1J9fXZhciBvLHIsYSxkLGM7IWZ1bmN0aW9uKGUpe2VbZS5Vbm1vZGlmaWVkPTBdPVwiVW5tb2RpZmllZFwiLGVbZS5DdWxsZWQ9MV09XCJDdWxsZWRcIixlW2UuTm90Q2hlY2tlZD0yXT1cIk5vdENoZWNrZWRcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlW2UuVW5tb2RpZmllZD0wXT1cIlVubW9kaWZpZWRcIixlW2UuUG90ZW50aWFsbHlNb2RpZmllZD0xXT1cIlBvdGVudGlhbGx5TW9kaWZpZWRcIixlW2UuQ3VsbGVkPTJdPVwiQ3VsbGVkXCIsZVtlLlVua25vd249M109XCJVbmtub3duXCIsZVtlLk5vdENoZWNrZWQ9NF09XCJOb3RDaGVja2VkXCJ9KHJ8fChyPXt9KSk7Y2xhc3MgaCBleHRlbmRzIHN7Y29uc3RydWN0b3IoaSxuLHQscyxvLGQsYyxoLGwsdSl7c3VwZXIoaSx0KSx0aGlzLmluZGV4PW4sdGhpcy5jaGlsZENvdW50PXMsdGhpcy5sZXZlbD1vLHRoaXMucmVzb3VyY2VzPWQsdGhpcy52ZXJzaW9uPWMsdGhpcy5sb2RNZXRyaWM9aCx0aGlzLm1heEVycm9yPWwsdGhpcy5udW1GZWF0dXJlcz11LHRoaXMuZmFpbGVkPSExLHRoaXMuY2FjaGVTdGF0ZT1hLlVua25vd24sdGhpcy52ZXJ0ZXhDb3VudD0wLHRoaXMubWVtb3J5PTAsdGhpcy5jaGlsZHJlbkxvYWRlZD0wLHRoaXMuaGFzTW9kaWZpY2F0aW9ucz0hMSx0aGlzLmltTW9kaWZpY2F0aW9uSW1wYWN0PXIuTm90Q2hlY2tlZCx0aGlzLmVsZXZhdGlvbkFnbm9zdGljQm91bmRpbmdWb2x1bWU9ZSgwLDAsMCwtMSl9aW52YWxpZGF0ZVNlcnZpY2VCVnNJblJlbmRlclNSKCl7c3VwZXIuaW52YWxpZGF0ZVNlcnZpY2VCVnNJblJlbmRlclNSKCksdGhpcy5lbGV2YXRpb25BZ25vc3RpY0JvdW5kaW5nVm9sdW1lWzNdPS0xfX0hZnVuY3Rpb24oZSl7ZVtlLlVua25vd249MF09XCJVbmtub3duXCIsZVtlLlVuY2FjaGVkPTFdPVwiVW5jYWNoZWRcIixlW2UuQ2FjaGVkPTJdPVwiQ2FjaGVkXCJ9KGF8fChhPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLk1heFNjcmVlblRocmVzaG9sZD0xXT1cIk1heFNjcmVlblRocmVzaG9sZFwiLGVbZS5TY3JlZW5TcGFjZVJlbGF0aXZlPTJdPVwiU2NyZWVuU3BhY2VSZWxhdGl2ZVwiLGVbZS5SZW1vdmVkRmVhdHVyZURpYW1ldGVyPTNdPVwiUmVtb3ZlZEZlYXR1cmVEaWFtZXRlclwiLGVbZS5EaXN0YW5jZVJhbmdlRnJvbURlZmF1bHRDYW1lcmE9NF09XCJEaXN0YW5jZVJhbmdlRnJvbURlZmF1bHRDYW1lcmFcIn0oZHx8KGQ9e30pKSxmdW5jdGlvbihlKXtlW2UuSG9sZT0wXT1cIkhvbGVcIixlW2UuTGVhZj0xXT1cIkxlYWZcIn0oY3x8KGM9e30pKTtjbGFzcyBse2NvbnN0cnVjdG9yKGUsaSxuLHQpe3RoaXMubm9kZUhhc0xPRD1lLHRoaXMuaXNDaG9zZW49aSx0aGlzLmxvZExldmVsPW4sdGhpcy52ZXJzaW9uPXR9fWV4cG9ydHthIGFzIENhY2hlU3RhdGUsZCBhcyBMb2RNZXRyaWMsaCBhcyBOb2RlLHMgYXMgTm9kZUJhc2UsbyBhcyBOb2RlRmlsdGVySW1wYWN0LHIgYXMgTm9kZUlNTW9kaWZpY2F0aW9uSW1wYWN0LGMgYXMgTm9kZVN0YXRlLGwgYXMgTm9kZVRyYXZlcnNhbFN0YXRlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cmVzdWx0IGFzIGUsYXNzZXJ0UmVzdWx0IGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hc3luY1V0aWxzLmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtjbG9uZSBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbGFuZy5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRFcnJvciBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e21ha2VBYnNvbHV0ZSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnR7VGV4dHVyZUVuY29kaW5nIGFzIG59ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtyZWFkQmluYXJ5QXR0cmlidXRlIGFzIHMsY3JlYXRlR2VvbWV0cnlEZXNjcmlwdG9yIGFzIGF9ZnJvbVwiLi9JM1NCaW5hcnlSZWFkZXIuanNcIjtpbXBvcnR7Z2V0TWF0ZXJpYWxBbmRUZXh0dXJlcyBhcyB1LGdldE1hdGVyaWFsQW5kVGV4dHVyZXNGcm9tU2hhcmVkIGFzIGwsc2VsZWN0RW5jb2RpbmcgYXMgZn1mcm9tXCIuL0kzU01hdGVyaWFsVXRpbC5qc1wiO2NsYXNzIGR7Y29uc3RydWN0b3IoZSx0LHIsaSxvLG4pe2lmKHRoaXMuX3N0cmVhbURhdGFDb250cm9sbGVyPXQsdGhpcy5fbG9nZ2VyPXIsdGhpcy5fZGVmYXVsdEdlb21ldHJ5U2NoZW1hPWksdGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzPW8sdGhpcy5fb3B0aW9ucz1uLHRoaXMuX2xvZ0xheWVyPWUsdGhpcy5fbGF5ZXJVcmw9ZS5wYXJzZWRVcmwucGF0aCx0aGlzLl9nZW9tZXRyeURlZmluaXRpb25zPWUuZ2VvbWV0cnlEZWZpbml0aW9ucyxlLm1hdGVyaWFsRGVmaW5pdGlvbnMpe2NvbnN0IHQ9ZS50ZXh0dXJlU2V0RGVmaW5pdGlvbnM7dGhpcy5fbWF0ZXJpYWxBbmRUZXh0dXJlcz1lLm1hdGVyaWFsRGVmaW5pdGlvbnMubWFwKChyPT51KHQscixcImludGVncmF0ZWQtbWVzaFwiPT09ZS50eXBlKSkpfX1fbG9hZChlLHQscil7cmV0dXJuIHRoaXMuX3N0cmVhbURhdGFDb250cm9sbGVyLnJlcXVlc3QoZSx0LHIpfV9sb2FkQXR0cmlidXRlKGUsdCxyKXtjb25zdCBpPWAke3RoaXMuX2xheWVyVXJsfS9ub2Rlcy8ke2UucmVzb3VyY2VzLmF0dHJpYnV0ZXN9L2F0dHJpYnV0ZXMvJHt0LmtleX0vMGA7cmV0dXJuIHRoaXMuX2xvYWQoaSxcImJpbmFyeVwiLHIpLnRoZW4oKGU9PnModCxlKSkpfWFzeW5jIGxvYWRBdHRyaWJ1dGVzKGUsdCxyKXtjb25zdCBvPWF3YWl0IFByb21pc2UuYWxsU2V0dGxlZCh0Lm1hcCgodD0+dGhpcy5fbG9hZEF0dHJpYnV0ZShlLHQuYXR0cmlidXRlU3RvcmFnZUluZm8scikpKSksbj17fTtmb3IobGV0IHM9MDtzPHQubGVuZ3RoOysrcyl7Y29uc3Qgcj1vW3NdLGE9dFtzXTtpZihcImZ1bGZpbGxlZFwiPT09ci5zdGF0dXMpe2NvbnN0IGU9ci52YWx1ZTtuW2EubmFtZV09ZX1lbHNle2NvbnN0IHQ9ci5yZWFzb247aSh0KSx0aGlzLl9sb2dnZXIuZXJyb3IoXCIjbG9hZEF0dHJpYnV0ZXNcIix0aGlzLl9sb2dMYXllcixgRmFpbGVkIHRvIGxvYWQgYXR0cmlidXRlRGF0YSBmb3IgJyR7YS5uYW1lfScgb24gbm9kZSAnJHtlLmlkfSdgLHQpfX1yZXR1cm4gbn1hc3luYyBsb2FkTm9kZURhdGEocixpKXtjb25zdCBvPW51bGwhPXRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyYmci5yZXNvdXJjZXMuYXR0cmlidXRlcz9lKHRoaXMubG9hZEF0dHJpYnV0ZXMocix0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsaSkpOm51bGwse2J1ZmZlckRlZmluaXRpb246bixidWZmZXJJbmRleDpzfT1fKHRoaXMuX2dlb21ldHJ5RGVmaW5pdGlvbnMsciksdT0hIXIucmVzb3VyY2VzLmdlb21ldHJ5LGY9dT9lKHRoaXMuX2xvYWRHZW9tZXRyeShyLnJlc291cmNlcy5nZW9tZXRyeSxzLGkpKTpudWxsLGQ9ci5yZXNvdXJjZXMuaGFzU2hhcmVkUmVzb3VyY2U/YXdhaXQgdGhpcy5fbG9hZFNoYXJlZChyLGkpOm51bGwseT1yLnJlc291cmNlcy5tYXRlcmlhbERlZmluaXRpb24sRD10aGlzLl9tYXRlcmlhbEFuZFRleHR1cmVzJiZudWxsIT15JiZ5Pj0wP3RoaXMuX21hdGVyaWFsQW5kVGV4dHVyZXNbeV06bnVsbCE9ZD9sKGQpOm51bGwsYj1EPy5tYXRlcmlhbCx4PUQ/LnRleHR1cmVzPz9bXSxwPWAke3IuaWR9YCxBPSF1JiZ0aGlzLl9vcHRpb25zLmxvYWRGZWF0dXJlRGF0YSwkPUE/YXdhaXQgdGhpcy5fbG9hZEZlYXR1cmVEYXRhKHAsaSk6bnVsbCxUPUE/bSgkKTpjKGIpLGo9bnVsbD09VD9oKCQpOm51bGwsdz14Lmxlbmd0aD4wP2UodGhpcy5sb2FkVGV4dHVyZXMocix4LGkpKTpudWxsO2xldCBJPW51bGwsUz1udWxsO2lmKGYpe0k9dChhd2FpdCBmKTtjb25zdCBlPWcodGhpcy5fZGVmYXVsdEdlb21ldHJ5U2NoZW1hLGQpO1M9YShuLGUpfWNvbnN0IFU9dz90KGF3YWl0IHcpOm51bGwscT1vP3QoYXdhaXQgbyk6e30sQj1xP3thdHRyaWJ1dGVEYXRhOnEsbG9hZGVkQXR0cmlidXRlczp0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXN9Om51bGw7aWYobnVsbCE9VClyZXR1cm57Z2VvbWV0cnlEYXRhOlQsYXR0cmlidXRlRGF0YUluZm86QixnZW9tZXRyeUJ1ZmZlcjpJLGdlb21ldHJ5RGVzY3JpcHRvcjpTLHJlcXVpcmVkVGV4dHVyZXM6eCx0ZXh0dXJlRGF0YTpVfTtpZihudWxsIT1qKXJldHVybntwb2ludERhdGE6aixhdHRyaWJ1dGVEYXRhSW5mbzpCLGdlb21ldHJ5QnVmZmVyOkksZ2VvbWV0cnlEZXNjcmlwdG9yOlMscmVxdWlyZWRUZXh0dXJlczp4LHRleHR1cmVEYXRhOlV9O3Rocm93IG5ldyBFcnJvcn1zdGF0aWMgX2FkZEFic29sdXRlSHJlZlRleHR1cmUoZSx0KXtjb25zdCByPWUudGV4dHVyZURlZmluaXRpb25zO2lmKG51bGwhPXIpZm9yKGNvbnN0IGkgb2YgT2JqZWN0LmtleXMocikpZm9yKGNvbnN0IGUgb2YgcltpXS5pbWFnZXMpQXJyYXkuaXNBcnJheShlLmhyZWYpP2UuaHJlZkNvbmNhdD1lLmhyZWYubWFwKChlPT5vKGUsdCkpKTplLmhyZWZDb25jYXQ9byhlLmhyZWYsdCl9c3RhdGljIF9maXhUZXh0dXJlRW5jb2RpbmdzKGUpe2NvbnN0IHQ9ZS50ZXh0dXJlRGVmaW5pdGlvbnM7aWYobnVsbCE9dClmb3IoY29uc3QgciBpbiB0KXtjb25zdCBlPXRbcl07aWYoQXJyYXkuaXNBcnJheShlLmVuY29kaW5nKSlmb3IobGV0IHQ9MDt0PGUuZW5jb2RpbmcubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lLmVuY29kaW5nW3RdO1wiZGF0YTpcIj09PXIuc2xpY2UoMCw1KSYmKGUuZW5jb2RpbmdbdF09ci5zbGljZSg1KSl9ZWxzZXtjb25zdCB0PWUuZW5jb2Rpbmc7XCJkYXRhOlwiPT09dC5zbGljZSgwLDUpJiYoZS5lbmNvZGluZz10LnNsaWNlKDUpKX19fWFzeW5jIF9sb2FkU2hhcmVkKGUsdCl7aWYobnVsbD09ZS5yZXNvdXJjZXMuZ2VvbWV0cnkpcmV0dXJue307Y29uc3Qgcj1gJHt0aGlzLl9sYXllclVybH0vbm9kZXMvJHtlLnJlc291cmNlcy5nZW9tZXRyeX0vc2hhcmVkYCxpPWF3YWl0IHRoaXMuX2xvYWQocixcImpzb25cIix0KTtyZXR1cm4gZC5fZml4VGV4dHVyZUVuY29kaW5ncyhpKSxkLl9hZGRBYnNvbHV0ZUhyZWZUZXh0dXJlKGksciksaX1fbG9hZFRleHR1cmUoZSx0LHIsaSxvKXtyZXR1cm4gaT09PW4uRERTX1MzVEN8fGk9PT1uLktUWDJ8fGk9PT1uLkJhc2lzP3RoaXMuX2xvYWQoZSxcImJpbmFyeVwiLG8pLnRoZW4oKGU9Pih7aWQ6dCx1c2FnZTpyLGRhdGE6ZSxlbmNvZGluZzppfSkpKTp0aGlzLl9sb2FkKGUsXCJpbWFnZVwiLG8pLnRoZW4oKGU9Pih7aWQ6dCx1c2FnZTpyLGRhdGE6ZSxlbmNvZGluZzppfSkpKX1sb2FkVGV4dHVyZXMoZSx0LHIpe2NvbnN0IGk9dGhpcy5fb3B0aW9ucy50ZXh0dXJlVXNhZ2VNYXNrO3JldHVybiBQcm9taXNlLmFsbCh0Lm1hcCgodD0+e2lmKDA9PT0odC51c2FnZSZpKSlyZXR1cm4gbnVsbDtjb25zdCBvPWYodC5lbmNvZGluZ3MsdGhpcy5fb3B0aW9ucy50ZXh0dXJlRW5jb2RpbmdzKTtpZihudWxsPT1vKXJldHVybiB0aGlzLl9sb2dnZXIuZXJyb3IoXCIjbG9hZFRleHR1cmVzXCIsdGhpcy5fbG9nTGF5ZXIsYE5vIGtub3duIGVuY29kaW5nIGZvciB0ZXh0dXJlIGZvdW5kIG9uIG5vZGUgJHtlLmlkfWApLFByb21pc2UucmVqZWN0KCk7Y29uc3Qgbj1lLnJlc291cmNlcy50ZXh0dXJlfHxlLmlkLHM9YCR7dGhpcy5fbGF5ZXJVcmx9L25vZGVzLyR7bn0vdGV4dHVyZXMvJHtvLm5hbWV9YDtyZXR1cm4gdGhpcy5fbG9hZFRleHR1cmUocyx0LmlkLHQudXNhZ2Usby5lbmNvZGluZyxyKX0pKSl9X2xvYWRGZWF0dXJlRGF0YShlLHQpe2NvbnN0IHI9YCR7dGhpcy5fbGF5ZXJVcmx9L25vZGVzLyR7ZX0vZmVhdHVyZXMvMGA7cmV0dXJuIHRoaXMuX2xvYWQocixcImpzb25cIix0KX1fbG9hZEdlb21ldHJ5KGUsdCxyKXtjb25zdCBpPWAke3RoaXMuX2xheWVyVXJsfS9ub2Rlcy8ke2V9L2dlb21ldHJpZXMvJHt0fWA7cmV0dXJuIHRoaXMuX2xvYWQoaSxcImJpbmFyeVwiLHIpfX1mdW5jdGlvbiBjKGUpe3JldHVybntmZWF0dXJlSWRzOltdLGdlb21ldHJpZXM6W3t0eXBlOlwiQXJyYXlCdWZmZXJWaWV3XCIscGFyYW1zOnttYXRlcmlhbDplfX1dLGZlYXR1cmVEYXRhUG9zaXRpb246WzAsMCwwXX19ZnVuY3Rpb24gbShlKXtpZighZSlyZXR1cm4gbnVsbDtmb3IoY29uc3QgdCBvZiBlLmZlYXR1cmVEYXRhKXtjb25zdCBlPXQuZ2VvbWV0cmllcztpZihudWxsIT1lKWZvcihjb25zdCByIG9mIGUpcmV0dXJue2ZlYXR1cmVJZHM6W3QuaWRdLGZlYXR1cmVEYXRhUG9zaXRpb246dC5wb3NpdGlvbixnZW9tZXRyaWVzOltyXX19cmV0dXJuIG51bGx9ZnVuY3Rpb24gaChlKXtpZighZSlyZXR1cm4gbnVsbDtjb25zdCB0PW5ldyBBcnJheTtmb3IoY29uc3QgciBvZiBlLmZlYXR1cmVEYXRhKW51bGwhPXIucG9zaXRpb24mJnQucHVzaCh7ZmVhdHVyZUlkczpbci5pZF0sZmVhdHVyZURhdGFQb3NpdGlvbjpyLnBvc2l0aW9uLGdlb21ldHJpZXM6W119KTtyZXR1cm4gdH1mdW5jdGlvbiBnKGUsdCl7aWYoIWV8fCF0Py5tYXRlcmlhbERlZmluaXRpb25zKXJldHVybiBlO2NvbnN0IGk9T2JqZWN0LmtleXModC5tYXRlcmlhbERlZmluaXRpb25zKVswXTtyZXR1cm4hdC5tYXRlcmlhbERlZmluaXRpb25zW2ldLnBhcmFtcy52ZXJ0ZXhSZWdpb25zJiZlLnZlcnRleEF0dHJpYnV0ZXMucmVnaW9uJiZkZWxldGUoZT1yKGUpKS52ZXJ0ZXhBdHRyaWJ1dGVzLnJlZ2lvbixlfWZ1bmN0aW9uIF8oZSx0KXtjb25zdCByPXtidWZmZXJEZWZpbml0aW9uOm51bGwsYnVmZmVySW5kZXg6MH0saT10LnJlc291cmNlcy5nZW9tZXRyeURlZmluaXRpb247aWYobnVsbD09ZXx8bnVsbD09aXx8aTwwKXJldHVybiByO2NvbnN0IG89aT49MD9lW2ldLmdlb21ldHJ5QnVmZmVyczpudWxsO2lmKG51bGw9PW8pcmV0dXJuIHI7Zm9yKGxldCBuPTA7bjxvLmxlbmd0aDtuKyspe2NvbnN0IGU9b1tuXTtpZihudWxsPT1lLmNvbXByZXNzZWRBdHRyaWJ1dGVzKXIuYnVmZmVySW5kZXg9bixyLmJ1ZmZlckRlZmluaXRpb249b1tuXTtlbHNlIGlmKFwiZHJhY29cIj09PWUuY29tcHJlc3NlZEF0dHJpYnV0ZXMuZW5jb2RpbmcmJiFoYXMoXCJkaXNhYmxlLWZlYXR1cmU6aTNzLWRyYWNvXCIpKXJldHVybiByLmJ1ZmZlckluZGV4PW4sci5idWZmZXJEZWZpbml0aW9uPWUscn1yZXR1cm4gcn1leHBvcnR7ZCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydHtzcGxpdEludG9DaHVua3MgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlVGFzayBhcyBpLHJlc3VsdE9yQWJvcnQgYXMgbyxyZXN1bHQgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FzeW5jVXRpbHMuanNcIjtpbXBvcnQgYSBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0NvbGxlY3Rpb24uanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyBkfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0IGMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7YWJvcnRNYXliZSBhcyBoLGRlc3Ryb3lNYXliZSBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7ZXN0aW1hdGVTdHJpbmdNZW1vcnkgYXMgdSxlc3RpbWF0ZU51bWJlck1lbW9yeSBhcyBtfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWVtb3J5RXN0aW1hdGlvbnMuanNcIjtpbXBvcnR7d2hlbk9yQWJvcnQgYXMgcCxjcmVhdGVSZXNvbHZlciBhcyBnfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0IHkgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9SZWFjdGl2ZVNldC5qc1wiO2ltcG9ydHt3YXRjaCBhcyBmLHN5bmMgYXMgX31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgYn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHZ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtlcXVhbHMgYXMgT31mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NwYXRpYWxSZWZlcmVuY2VVdGlscy5qc1wiO2ltcG9ydHtmb3JtYXROdW1iZXIgYXMgan1mcm9tXCIuLi8uLi8uLi8uLi9pbnRsL251bWJlci5qc1wiO2ltcG9ydHtnZXRNYXhpbXVtUXVlcnlTaXplIGFzIEMscXVlcnlBbGxKU09OIGFzIHd9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmVhdHVyZVF1ZXJ5QWxsLmpzXCI7aW1wb3J0e2lzVGltZW91dEVycm9yIGFzIEl9ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9yZXF1ZXN0VXRpbHMuanNcIjtpbXBvcnR7Vmlld2luZ01vZGUgYXMgRn1mcm9tXCIuLi8uLi8uLi9WaWV3aW5nTW9kZS5qc1wiO2xldCBBPWNsYXNzIGV4dGVuZHMgcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl93YXJuTWF4aW11bUNoYW5nZWRPYmplY3RzRXhjZWVkZWQ9ITEsdGhpcy5fbWF4aW11bU51bWJlck9mRWRpdE9WZXJyaWRlcz1TLHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRGlydHk9ITAsdGhpcy5faW50ZXJhY3RpdmVFZGl0aW5nU2Vzc2lvbnM9bmV3IGEsdGhpcy5nZW9tZXRyeU92ZXJyaWRlcz1uZXcgYSx0aGlzLl9jbGllbnRHZW9tZXRyeUNhY2hlPW5ldyBNYXAsdGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcz1uZXcgeSx0aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHM9bmV3IHksdGhpcy5fcGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkcz1udWxsLHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyLHRoaXMuX2FwcGx5R2VvbWV0cnlPdmVycmlkZXNUYXNrPW51bGwsdGhpcy5fZmVhdHVyZUlkTG9ja3M9bmV3IE1hcH1pbml0aWFsaXplKCl7dGhpcy5fbWVtQ2FjaGU9bmV3IEcodGhpcy5tZW1vcnlDb250cm9sbGVyLm5ld0NhY2hlKGBpM3MtYXR0cmlidXRlLW92ZXJyaWRlcy0ke3RoaXMubGF5ZXIudWlkfWApKSx0aGlzLmFkZEhhbmRsZXMoZigoKCk9PnRoaXMubGF5ZXIuZGVmaW5pdGlvbkV4cHJlc3Npb24pLChhc3luYygpPT57dGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25EaXJ0eT0hMCx0aGlzLl9wZW5kaW5nRmV0Y2hDaGFuZ2VkT2JqZWN0SWRzfHwodGhpcy5fYXBwbHlHZW9tZXRyeU92ZXJyaWRlc1Rhc2s9aCh0aGlzLl9hcHBseUdlb21ldHJ5T3ZlcnJpZGVzVGFzayksdGhpcy5fYXBwbHlHZW9tZXRyeU92ZXJyaWRlc1Rhc2s9aSgoZT0+dGhpcy5fcXVlcnlBbmRBZGRHZW9tZXRyeU92ZXJyaWRlcyhlKSkpLGF3YWl0IHRoaXMuX2FwcGx5R2VvbWV0cnlPdmVycmlkZXNUYXNrLnByb21pc2UpfSksXykpLHRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHM9dGhpcy5fZmV0Y2hDaGFuZ2VkT2JqZWN0SWRzKHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlcj8uc2lnbmFsKSx0aGlzLl9wZW5kaW5nRmV0Y2hDaGFuZ2VkT2JqZWN0SWRzLmZpbmFsbHkoKCgpPT57dGhpcy5fcGVuZGluZ0ZldGNoQWJvcnRDb250cm9sbGVyPW51bGwsdGhpcy5fcGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkcz1udWxsfSkpfWRlc3Ryb3koKXt0aGlzLl9zZXQoXCJsYXllclwiLG51bGwpLHRoaXMuX21lbUNhY2hlPWwodGhpcy5fbWVtQ2FjaGUpLHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlcj1oKHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlciksdGhpcy5fcGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkcz1udWxsLHRoaXMuX2ZlYXR1cmVJZExvY2tzLmNsZWFyKCl9Z2V0IGlzM0RPRkwoKXtyZXR1cm4gbnVsbCE9dGhpcy5fYXNzb2NpYXRlZExheWVyPy5pbmZvRm9yM0R9Z2V0IHNvcnRlZEdlb21ldHJ5Q2hhbmdlZE9iamVjdElkcygpe3JldHVybiB0aGlzLmlzM0RPRkw/Wy4uLnRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkc10uc29ydCgoKGUsdCk9PmUtdCkpOltdfWdldCBfYXNzb2NpYXRlZExheWVyKCl7cmV0dXJuIG51bGw9PXRoaXMubGF5ZXI/bnVsbDp0aGlzLmxheWVyLmFzc29jaWF0ZWRMYXllcn1nZXQgaGFzR2VvbWV0cnlDaGFuZ2VzKCl7cmV0dXJuIHRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcy5zaXplPjB9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuISF0aGlzLmlzM0RPRkwmJiEhKHRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHN8fHRoaXMuX2FwcGx5R2VvbWV0cnlPdmVycmlkZXNUYXNrJiYhdGhpcy5fYXBwbHlHZW9tZXRyeU92ZXJyaWRlc1Rhc2suZmluaXNoZWQpfWdldCBpc0VtcHR5KCl7cmV0dXJuIG51bGw9PXRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHMmJjA9PT10aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLnNpemUmJjA9PT10aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuc2l6ZX1mZWF0dXJlSGFzR2VvbWV0cnlDaGFuZ2VzKGUpe3JldHVybiB0aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuaGFzKGUpfWZlYXR1cmVIYXNBdHRyaWJ1dGVDaGFuZ2VzKGUpe3JldHVybiB0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLmhhcyhlKX1jcmVhdGVJbnRlcmFjdGl2ZUVkaXRTZXNzaW9uKGUpe3RoaXMuX2F0dHJpYnV0ZUNoYW5nZWRPYmplY3RJZHMuYWRkKGUpO2NvbnN0IHQ9dGhpcy5faW50ZXJhY3RpdmVFZGl0aW5nU2Vzc2lvbnMscj1uZXcgeChlLCgoKT0+e3QucmVtb3ZlKHIpfSkpO3JldHVybiB0LnVuc2hpZnQocikscn1hc3luYyBhcHBseUF0dHJpYnV0ZU92ZXJyaWRlcyhlLHQscixzPVtdKXtpZih0aGlzLl9wZW5kaW5nRmV0Y2hDaGFuZ2VkT2JqZWN0SWRzJiZhd2FpdCBwKHRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHMsciksbnVsbD09dClyZXR1cm47Y29uc3R7YXR0cmlidXRlRGF0YTppLGxvYWRlZEF0dHJpYnV0ZXM6b309dDtpZihudWxsPT1vfHxudWxsPT1pfHwwPT09dGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcy5zaXplKXJldHVybjtjb25zdCBuPW5ldyBTZXQ7Zm9yKGNvbnN0IGQgb2YgbyluLmFkZChkLmluZGV4KTtmb3IoY29uc3QgZCBvZiBzKW4uaGFzKGQuaW5kZXgpfHwoby5wdXNoKGQpLGlbZC5uYW1lXT1uZXcgQXJyYXkoZS5sZW5ndGgpKTtjb25zdCBhPWF3YWl0IHRoaXMuX2xvY2tGZWF0dXJlSWRzKGUpO3RyeXtjb25zdCB0PXthdHRyaWJ1dGVEYXRhOmksbG9hZGVkQXR0cmlidXRlczpvfSxzPXRoaXMuX2dldE92ZXJyaWRlc0Zyb21DYWNoZShlLHQsdGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcykse29iamVjdElkczpuLGZpZWxkTmFtZXM6YX09cztpZigwPT09bi5sZW5ndGh8fDA9PT1hLmxlbmd0aClyZXR1cm47Y29uc3QgZD1hd2FpdCB0aGlzLl9xdWVyeUF0dHJpYnV0ZU92ZXJyaWRlc0Zyb21Bc3NvY2lhdGVkTGF5ZXIobixhLHIpO2lmKG51bGw9PWQpcmV0dXJuO3RoaXMuX3Byb2Nlc3NPdmVycmlkZXNGcm9tQXNzb2NpYXRlZExheWVyKGUsZCxhLHQpfWZpbmFsbHl7YS5yZW1vdmUoKX19dXBkYXRlR2VvbWV0cnkoZSx0KXt0aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuYWRkKGUpO2NvbnN0IHI9dGhpcy5fY2xpZW50R2VvbWV0cnlDYWNoZS5nZXQoZSk7aWYobnVsbCE9ciYmKHRoaXMuZ2VvbWV0cnlPdmVycmlkZXMucmVtb3ZlKHIpLHRoaXMuX2NsaWVudEdlb21ldHJ5Q2FjaGUuZGVsZXRlKGUpKSxudWxsIT10KXtjb25zdCByPXtvaWQ6ZSxtZXNoOnR9O3RoaXMuZ2VvbWV0cnlPdmVycmlkZXMuYWRkKHIpLHRoaXMuX2NsaWVudEdlb21ldHJ5Q2FjaGUuc2V0KGUscil9fXVwZGF0ZUF0dHJpYnV0ZVZhbHVlKGUsdCxyKXt0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLmFkZChlKSx0aGlzLl9jYWNoZUF0dHJpYnV0ZVZhbHVlKGUsdCxyKX1mZWF0dXJlQWRkZWQoZSl7dGhpcy5pczNET0ZMJiZ0aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuYWRkKGUpLHRoaXMuX2F0dHJpYnV0ZUNoYW5nZWRPYmplY3RJZHMuYWRkKGUpfV9jYWNoZUF0dHJpYnV0ZVZhbHVlKGUsdCxyKXt0aGlzLl9tZW1DYWNoZS5wdXQoZSx0LHIpfV9nZXRPdmVycmlkZXNGcm9tQ2FjaGUoZSx7bG9hZGVkQXR0cmlidXRlczp0LGF0dHJpYnV0ZURhdGE6cn0scyl7Y29uc3QgaT1uZXcgQXJyYXk7Zm9yKGNvbnN0IGEgb2YgdClpW2EuaW5kZXhdPXJbYS5uYW1lXTtjb25zdCBvPW5ldyBTZXQsbj1uZXcgU2V0O2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKXtjb25zdCByPWVbYV07aWYocy5oYXMocikpZm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD10aGlzLl9hdHRyaWJ1dGVGcm9tQ2FjaGUocixlLmluZGV4KTt2b2lkIDA9PT10PyhvLmFkZChyKSxuLmFkZChlLm5hbWUpKTppW2UuaW5kZXhdW2FdPXR9fXJldHVybntvYmplY3RJZHM6QXJyYXkuZnJvbShvKSxmaWVsZE5hbWVzOkFycmF5LmZyb20obil9fV9hdHRyaWJ1dGVGcm9tQ2FjaGUoZSx0KXtjb25zdCByPXRoaXMuX2Zyb21JbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9uKGUsdCk7cmV0dXJuIHZvaWQgMCE9PXI/cjp0aGlzLl9tZW1DYWNoZS5nZXQoZSx0KX1fZnJvbUludGVyYWN0aXZlRWRpdGluZ1Nlc3Npb24oZSx0KXtpZihudWxsIT10aGlzLl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9ucylmb3IoY29uc3QgciBvZiB0aGlzLl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9ucyl7aWYoci5vYmplY3RJZCE9PWUpY29udGludWU7Y29uc3Qgcz1yLmdldEF0dHJpYnV0ZSh0KTtpZih2b2lkIDAhPT1zKXJldHVybiBzfX1hc3luYyBfcXVlcnlBdHRyaWJ1dGVPdmVycmlkZXNGcm9tQXNzb2NpYXRlZExheWVyKGUsdCxyKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIG51bGw7dGhpcy5fbG9nV2FybmluZ0lmTWF4aW11bU9iamVjdHNFeGNlZWRlZCgpO2NvbnN0e2Fzc29jaWF0ZWRMYXllcjpzfT10aGlzLmxheWVyO2lmKG51bGw9PXMpcmV0dXJuIG51bGw7Y29uc3QgaT1zLmNyZWF0ZVF1ZXJ5KCkse29iamVjdElkRmllbGQ6b309cyxuPVtvLC4uLnRdO2kud2hlcmU9dGhpcy5sYXllci5kZWZpbml0aW9uRXhwcmVzc2lvbnx8XCIxPTFcIixpLnJldHVybkdlb21ldHJ5PSExLGkub3V0RmllbGRzPW4saS5jYWNoZUhpbnQ9ITA7Y29uc3QgYT1hd2FpdCB0aGlzLl9leGVjdXRlQmF0Y2hRdWVyeShzLGUsaSxyKSxkPVtdO2Zvcihjb25zdCBjIG9mIGEpaWYoYy5vaylmb3IoY29uc3QgZSBvZiBjLnZhbHVlLmZlYXR1cmVzKWQucHVzaChlKTtyZXR1cm4gZH1hc3luYyBfcXVlcnlHZW9tZXRyeU92ZXJyaWRlc0Zyb21Bc3NvY2lhdGVkTGF5ZXIoZSx0KXtpZigwPT09ZS5sZW5ndGh8fCF0aGlzLmlzM0RPRkwpcmV0dXJuIG51bGw7Y29uc3Qgcj10aGlzLmxheWVyLmFzc29jaWF0ZWRMYXllcixzPXIuaW5mb0ZvcjNELHtzcGF0aWFsUmVmZXJlbmNlOml9PXIse3N0YXRlOnt2aWV3aW5nTW9kZTpvfSxzcGF0aWFsUmVmZXJlbmNlOm59PXRoaXMudmlldyxhPW89PT1GLkdsb2JhbCxkPWkuaXNHZW9ncmFwaGljO2lmKGEmJiFkKXJldHVybiBjLmdldExvZ2dlcih0aGlzKS53YXJuKFwidW5zdXBwb3J0ZWQtcGNzLWVkaXRzLWluLWdsb2JhbC12aWV3XCIsdGhpcy5sYXllci50aXRsZSxrKGksbix0aGlzLnZpZXcudmlld2luZ01vZGUsRS5Nb2RlKSksbnVsbDtpZighYSYmZClyZXR1cm4gYy5nZXRMb2dnZXIodGhpcykud2FybihcInVuc3VwcG9ydGVkLWdjcy1lZGl0cy1pbi1sb2NhbC12aWV3XCIsdGhpcy5sYXllci50aXRsZSxrKGksbix0aGlzLnZpZXcudmlld2luZ01vZGUsRS5Nb2RlKSksbnVsbDtpZighKE8oaSxuKXx8YSYmbi5pc1dlYk1lcmNhdG9yJiZpLmlzV0dTODQpKXJldHVybiBjLmdldExvZ2dlcih0aGlzKS53YXJuKFwidW5zdXBwb3J0ZWQtbWlzbWF0Y2hlZC1zcGF0aWFsLXJlZmVyZW5jZS1lZGl0c1wiLHRoaXMubGF5ZXIudGl0bGUsayhpLG4sdGhpcy52aWV3LnZpZXdpbmdNb2RlLEUuU3BhdGlhbFJlZmVyZW5jZSkpLG51bGw7dGhpcy5fbG9nV2FybmluZ0lmTWF4aW11bU9iamVjdHNFeGNlZWRlZCgpO2NvbnN0e29iamVjdElkRmllbGQ6aCxnbG9iYWxJZEZpZWxkOmx9PXIsdT1baCwuLi5udWxsIT1sP1tsXTpbXV0sbT1yLmNyZWF0ZVF1ZXJ5KCk7bS53aGVyZT10aGlzLmxheWVyLmRlZmluaXRpb25FeHByZXNzaW9ufHxcIjE9MVwiLG0ucmV0dXJuR2VvbWV0cnk9ITAsbS5vdXRGaWVsZHM9dSxtLmNhY2hlSGludD0hMCxtLnJldHVyblo9ci5oYXNaLG0ucmV0dXJuTT1yLmhhc007Y29uc3R7YXNzZXRNYXBGcm9tQXNzZXRNYXBzSlNPTjpwLGV4dHJhY3RNZXNoOmd9PWF3YWl0IGltcG9ydChcIi4uLy4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9tZXNoRmVhdHVyZVNldC5qc1wiKSx5PWF3YWl0IHRoaXMuX2V4ZWN1dGVCYXRjaFF1ZXJ5KHIsZSxtLHQpLGY9W107Zm9yKGNvbnN0IGMgb2YgeSl7aWYoIWMub2spY29udGludWU7Y29uc3QgZT1jLnZhbHVlLHthc3NldE1hcHM6dCxmZWF0dXJlczpyLGdsb2JhbElkRmllbGROYW1lOm99PWU7aWYobnVsbD09dCljb250aW51ZTtjb25zdCBuPXAocyx0KTtmb3IoY29uc3QgYSBvZiByKXtjb25zdCBlPWcoYSxvLGkscyxuKSx0PWE7bnVsbCE9ZT8odC5nZW9tZXRyeT1lLGYucHVzaCh0KSk6dC5nZW9tZXRyeT1udWxsfX1yZXR1cm4gZn1fbG9nV2FybmluZ0lmTWF4aW11bU9iamVjdHNFeGNlZWRlZCgpe2lmKCF0aGlzLl93YXJuTWF4aW11bUNoYW5nZWRPYmplY3RzRXhjZWVkZWQpcmV0dXJuO3RoaXMuX3dhcm5NYXhpbXVtQ2hhbmdlZE9iamVjdHNFeGNlZWRlZD0hMTtsZXQgZT1gVGhlIG51bWJlciBvZiBlZGl0ZWQgb2JqZWN0cyB0aGF0IGFyZSBub3QgeWV0IGNhY2hlZCBpbiB0aGUgc2NlbmUgc2VydmljZSBleGNlZWRzIHRoZSBtYXhpbXVtIGxpbWl0LiBBdHRyaWJ1dGUgY2hhbmdlcyB3aWxsIG9ubHkgYmUgYXZhaWxhYmxlIGZvciB0aGUgZmlyc3QgJHtqKHRoaXMuX21heGltdW1OdW1iZXJPZkVkaXRPVmVycmlkZXMpfSBvYmplY3RzLiBQbGVhc2UgY29uc2lkZXIgcmUtY2FjaGluZyB0aGUgc2NlbmUgc2VydmljZWA7Y29uc3QgdD10aGlzLmxheWVyLnBvcnRhbEl0ZW07ZSs9dD8ubG9hZGVkP2AgKCR7dC5wb3J0YWwudXJsfS9ob21lL2l0ZW0uaHRtbD9pZD0ke3QuaWR9I3NldHRpbmdzKWA6YCAoJHt0aGlzLmxheWVyLnBhcnNlZFVybC5wYXRofSlgLGMuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oXCIjcXVlcnlPdmVycmlkZXMoKVwiLHRoaXMubGF5ZXIudGl0bGUsYCR7ZX0uYCl9YXN5bmMgX2V4ZWN1dGVCYXRjaFF1ZXJ5KGUsdCxyLGkpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm5bXTtjb25zdCBuPUMoZSk7dD1bLi4udF0uc29ydCgoKGUsdCk9PmUtdCkpO2NvbnN0IGE9cyh0LG4pLm1hcCgodD0+e2NvbnN0IHM9ci5jbG9uZSgpO3JldHVybiBzLm9iamVjdElkcz10LG8odyhlLHMse3NpZ25hbDppfSkpfSkpO3JldHVybiBQcm9taXNlLmFsbChhKX1fcHJvY2Vzc092ZXJyaWRlc0Zyb21Bc3NvY2lhdGVkTGF5ZXIoZSx0LHIse2xvYWRlZEF0dHJpYnV0ZXM6cyxhdHRyaWJ1dGVEYXRhOml9KXtjb25zdCBvPXRoaXMuX2Fzc29jaWF0ZWRMYXllcjtpZihudWxsPT1vKXJldHVybjtjb25zdCBuPW8ub2JqZWN0SWRGaWVsZCxhPXIubWFwKCh0PT4odCBpbiBpfHwoaVt0XT1uZXcgQXJyYXkoZS5sZW5ndGgpKSxpW3RdKSkpLGQ9bmV3IE1hcChzLm1hcCgoZT0+W2UubmFtZSxlLmluZGV4XSkpKSxjPXIubWFwKChlPT5kLmdldChlKSkpLGg9bmV3IE1hcChBcnJheS5mcm9tKGUsKChlLHQpPT5bZSx0XSkpKTtmb3IoY29uc3QgbCBvZiB0KXtjb25zdCBlPWwuYXR0cmlidXRlc1tuXTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3Qgcz1jW3RdLGk9aC5nZXQoZSksbz1sLmF0dHJpYnV0ZXNbclt0XV07YVt0XVtpXT1vLHRoaXMuX2NhY2hlQXR0cmlidXRlVmFsdWUoZSxzLG8pfX19YXN5bmMgX2ZldGNoQ2hhbmdlZE9iamVjdElkcyhlKXtjb25zdCByPXRoaXMubGF5ZXI7YXdhaXQgci5sb2FkKHtzaWduYWw6ZX0pLHRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcy5jbGVhcigpLHRoaXMuX2F0dHJpYnV0ZUNoYW5nZWRPYmplY3RJZHMuY2xlYXIoKTtjb25zdHthc3NvY2lhdGVkTGF5ZXI6c309cjtpZihudWxsPT1zfHwhcy5jYXBhYmlsaXRpZXM/Lm9wZXJhdGlvbnM/LnN1cHBvcnRzQ2hhbmdlVHJhY2tpbmcpcmV0dXJuO2NvbnN0IGk9dGhpcy5fZ2V0RmV0Y2hDaGFuZ2VkT2JqZWN0SWRzU2VydmVyR2VuKCk7aWYobnVsbD09aSlyZXR1cm47Y29uc3Qgbz1zLmxheWVySWQsYT10aGlzLmlzM0RPRkwsZD17Li4ucy5jdXN0b21QYXJhbWV0ZXJzLGY6XCJqc29uXCIscmV0dXJuSWRzT25seTohMCxsYXllcnM6YFske299XWAscmV0dXJuVXBkYXRlczohMCxyZXR1cm5EZWxldGVzOmEscmV0dXJuSW5zZXJ0czphLGxheWVyU2VydmVyR2VuczpKU09OLnN0cmluZ2lmeShbe2lkOm8sc2VydmVyR2VuOml9XSl9O2lmKG51bGwhPXMuYXBpS2V5JiYoZC50b2tlbj1zLmFwaUtleSksYSl7Y29uc3QgZT1zLmluZm9Gb3IzRDtkLmZpZWxkc1RvQ29tcGFyZT1KU09OLnN0cmluZ2lmeSh7ZmllbGRzOlsuLi5PYmplY3QudmFsdWVzKGUudHJhbnNmb3JtRmllbGRSb2xlcyksZS5zb3VyY2VIYXNoRmllbGRdfSl9Y29uc3QgaD1hd2FpdCBuKHQoYCR7cy51cmx9L2V4dHJhY3RDaGFuZ2VzYCx7bWV0aG9kOlwicG9zdFwiLHF1ZXJ5OmQsdGltZW91dDpNLHNpZ25hbDplfSkpO2lmKCFoLm9rJiZJKGguZXJyb3IpKXtjb25zdCBlPXRoaXMubGF5ZXIudGl0bGU7Yy5nZXRMb2dnZXIodGhpcykud2FybihcImV4dHJhY3RDaGFuZ2VzOnRpbWVvdXRcIixlLGAke2V9IGNvdWxkIG5vdCBvYnRhaW4gZWRpdGVkIGZlYXR1cmVzIHRoYXQgYXJlIG5vdCBjYWNoZWQgaW4gdGhlIHNjZW5lIHNlcnZpY2UuIERpc3BsYXkgb2YgZmVhdHVyZXMgbWF5IG5vdCBiZSB1cCB0byBkYXRlIHdpdGggdGhlIGxhdGVzdCBlZGl0cy4gQ29uc2lkZXIgcmUtY2FjaGluZyB0aGUgc2NlbmUgc2VydmljZS5gKX1pZihoLm9rJiYxPT09aC52YWx1ZS5kYXRhPy5lZGl0cz8ubGVuZ3RoKXtjb25zdCB0PWgudmFsdWUuZGF0YS5lZGl0c1swXSxyPXQ/Lm9iamVjdElkcyxzPXQ/LmZpZWxkVXBkYXRlcyxpPXI/LmFkZHM/P1tdLG89cj8udXBkYXRlcz8/W10sbj1yPy5kZWxldGVzPz9bXSxkPVsuLi5pLC4uLm8sLi4ubl0sYz1hP1suLi5pLC4uLnM/P28sLi4ubl06W10sbD1NYXRoLm1pbih0aGlzLl9tYXhpbXVtTnVtYmVyT2ZFZGl0T1ZlcnJpZGVzLGQubGVuZ3RoKTtsPGQubGVuZ3RoJiYodGhpcy5fd2Fybk1heGltdW1DaGFuZ2VkT2JqZWN0c0V4Y2VlZGVkPSEwKTtjb25zdCB1PWQuc29ydCgoKGUsdCk9PmUtdCkpO2ZvcihsZXQgZT0wO2U8bDsrK2Upe2NvbnN0IHQ9dVtlXTt0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLmFkZCh0KX1mb3IoY29uc3QgZSBvZiBjKXRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcy5hZGQoZSk7Zm9yKDt0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkRpcnR5Oylhd2FpdCB0aGlzLl9xdWVyeUFuZEFkZEdlb21ldHJ5T3ZlcnJpZGVzKGUpfX1hc3luYyBfcXVlcnlBbmRBZGRHZW9tZXRyeU92ZXJyaWRlcyhlKXt0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkRpcnR5PSExO2NvbnN0IHQ9dGhpcy5sYXllcix7YXNzb2NpYXRlZExheWVyOnJ9PXQ7aWYobnVsbCE9ciYmci5jYXBhYmlsaXRpZXM/Lm9wZXJhdGlvbnM/LnN1cHBvcnRzQ2hhbmdlVHJhY2tpbmcmJnRoaXMuaXMzRE9GTCYmdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzLnNpemU+MCl7Y29uc3QgdD1hd2FpdCB0aGlzLl9xdWVyeUdlb21ldHJ5T3ZlcnJpZGVzRnJvbUFzc29jaWF0ZWRMYXllcihBcnJheS5mcm9tKHRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcyksZSk7aWYobnVsbCE9dClmb3IoY29uc3QgZSBvZiB0KW51bGwhPWUuZ2VvbWV0cnkmJnRoaXMudXBkYXRlR2VvbWV0cnkoZS5hdHRyaWJ1dGVzW3Iub2JqZWN0SWRGaWVsZF0sZS5nZW9tZXRyeSl9fV9nZXRGZXRjaENoYW5nZWRPYmplY3RJZHNTZXJ2ZXJHZW4oKXtjb25zdCBlPXRoaXMubGF5ZXI7aWYobnVsbCE9ZS5zZXJ2aWNlVXBkYXRlVGltZVN0YW1wPy5sYXN0VXBkYXRlKXJldHVybiBlLnNlcnZpY2VVcGRhdGVUaW1lU3RhbXAubGFzdFVwZGF0ZTtjb25zdCB0PWUuYXNzb2NpYXRlZExheWVyO3JldHVybiBudWxsIT10Py5zZXJ2ZXJHZW5zPy5taW5TZXJ2ZXJHZW4/dC5zZXJ2ZXJHZW5zLm1pblNlcnZlckdlbjpudWxsfWFzeW5jIF9sb2NrRmVhdHVyZUlkcyhlKXtjb25zdCB0PXRoaXMuX2ZlYXR1cmVJZExvY2tzO2xldCByPSEwO2Zvcig7cjspe2NvbnN0IHM9bmV3IEFycmF5O2Zvcihjb25zdCByIG9mIGUpe2NvbnN0IGU9dC5nZXQocik7ZSYmcy5wdXNoKGUpfTA9PT1zLmxlbmd0aD9yPSExOmF3YWl0IFByb21pc2UuYWxsKHMpfWNvbnN0IHM9ZygpLGk9cy5wcm9taXNlO2Zvcihjb25zdCBvIG9mIGUpdC5zZXQobyxpKTtyZXR1cm4gZCgoKCk9Pntmb3IoY29uc3QgciBvZiBlKXQuZGVsZXRlKHIpO3MucmVzb2x2ZSgpfSkpfWdldCB0ZXN0KCl7fX07ZShbYih7Y29uc3RydWN0T25seTohMH0pXSxBLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLGUoW2Ioe2NvbnN0cnVjdE9ubHk6ITB9KV0sQS5wcm90b3R5cGUsXCJsYXllclwiLHZvaWQgMCksZShbYih7cmVhZE9ubHk6ITB9KV0sQS5wcm90b3R5cGUsXCJpczNET0ZMXCIsbnVsbCksZShbYigpXSxBLnByb3RvdHlwZSxcIl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9uc1wiLHZvaWQgMCksZShbYih7cmVhZE9ubHk6ITB9KV0sQS5wcm90b3R5cGUsXCJzb3J0ZWRHZW9tZXRyeUNoYW5nZWRPYmplY3RJZHNcIixudWxsKSxlKFtiKHtyZWFkT25seTohMH0pXSxBLnByb3RvdHlwZSxcImdlb21ldHJ5T3ZlcnJpZGVzXCIsdm9pZCAwKSxlKFtiKCldLEEucHJvdG90eXBlLFwiX2NsaWVudEdlb21ldHJ5Q2FjaGVcIix2b2lkIDApLGUoW2IoKV0sQS5wcm90b3R5cGUsXCJfYXNzb2NpYXRlZExheWVyXCIsbnVsbCksZShbYih7Y29uc3RydWN0T25seTohMH0pXSxBLnByb3RvdHlwZSxcIm1lbW9yeUNvbnRyb2xsZXJcIix2b2lkIDApLGUoW2IoKV0sQS5wcm90b3R5cGUsXCJfYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkc1wiLHZvaWQgMCksZShbYigpXSxBLnByb3RvdHlwZSxcIl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHNcIix2b2lkIDApLGUoW2IoKV0sQS5wcm90b3R5cGUsXCJoYXNHZW9tZXRyeUNoYW5nZXNcIixudWxsKSxlKFtiKCldLEEucHJvdG90eXBlLFwiX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHNcIix2b2lkIDApLGUoW2IoKV0sQS5wcm90b3R5cGUsXCJfcGVuZGluZ0ZldGNoQWJvcnRDb250cm9sbGVyXCIsdm9pZCAwKSxlKFtiKCldLEEucHJvdG90eXBlLFwiX2FwcGx5R2VvbWV0cnlPdmVycmlkZXNUYXNrXCIsdm9pZCAwKSxlKFtiKCldLEEucHJvdG90eXBlLFwidXBkYXRpbmdcIixudWxsKSxlKFtiKCldLEEucHJvdG90eXBlLFwiaXNFbXB0eVwiLG51bGwpLEE9ZShbdihcImVzcmkudmlld3MuM2QubGF5ZXJzLmkzcy5JM1NPdmVycmlkZXNcIildLEEpO2NsYXNzIHh7Y29uc3RydWN0b3IoZSx0KXt0aGlzLm9iamVjdElkPWUsdGhpcy5fcmVtb3ZlPXQsdGhpcy5fdXBkYXRlcz1uZXcgTWFwLHRoaXMuX2lzQWN0aXZlPSEwfWdldEF0dHJpYnV0ZShlKXtyZXR1cm4gdGhpcy5fdXBkYXRlcy5nZXQoZSl9c2V0QXR0cmlidXRlKGUsdCl7dGhpcy5pc0FjdGl2ZSYmdGhpcy5fdXBkYXRlcy5zZXQoZSx0KX1yZW1vdmUoKXt0aGlzLmlzQWN0aXZlJiYodGhpcy5faXNBY3RpdmU9ITEsdGhpcy5fcmVtb3ZlKCkpfWdldCBpc0FjdGl2ZSgpe3JldHVybiB0aGlzLl9pc0FjdGl2ZX19Y2xhc3MgR3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9jYWNoZT1lfWRlc3Ryb3koKXt0aGlzLl9jYWNoZS5kZXN0cm95KCl9cHV0KGUsdCxyKXt0aGlzLl9jYWNoZS5wdXQodGhpcy5fZ2V0S2V5KGUsdCksbmV3IEwocikpfWdldChlLHQpe3JldHVybiB0aGlzLl9jYWNoZS5nZXQodGhpcy5fZ2V0S2V5KGUsdCkpPy52YWx1ZX1fZ2V0S2V5KGUsdCl7cmV0dXJuYCR7ZX0tJHt0fWB9fWNsYXNzIEx7Y29uc3RydWN0b3IoZSl7dGhpcy52YWx1ZT1lLHRoaXMuY2FjaGVkTWVtb3J5PVwic3RyaW5nXCI9PXR5cGVvZiBlP3UoZSk6bX19Y29uc3QgTT0xZTQsUz01ZTQ7dmFyIEU7ZnVuY3Rpb24gayhlLHQscixzKXtyZXR1cm5gRGlzcGxheWluZyB0aGUgZWRpdHMgb2YgYSBTY2VuZUxheWVyIHdpdGggYSR7cz09PUUuTW9kZT9lLmlzR2VvZ3JhcGhpYz9cIiBnZW9ncmFwaGljIFwiOlwiIHByb2plY3RlZCBcIjpcIiBcIn1zcGF0aWFsIHJlZmVyZW5jZSAod2tpZDoke2Uud2tpZH0pIGluICR7cn0gdmlld2luZyBtb2RlJHtzPT09RS5TcGF0aWFsUmVmZXJlbmNlP2Agd2l0aCBzcGF0aWFsIHJlZmVyZW5jZSAod2tpZDoke3Qud2tpZH0pIGA6XCIgXCJ9aXMgbm90IHN1cHBvcnRlZC4gTm8gZ2VvbWV0cnkgZWRpdHMgd2lsbCBiZSBkaXNwbGF5ZWQgZm9yIHRoaXMgbGF5ZXIuXFxuUGxlYXNlIGNvbnNpZGVyIHJlLWNhY2hpbmcgdGhlIHNjZW5lIHNlcnZpY2Ugb3IgY2hhbmdpbmcgdGhlICR7cz09PUUuTW9kZT9cInZpZXdpbmcgbW9kZVwiOlwidmlldyBzcGF0aWFsIHJlZmVyZW5jZVwifSB0byBkaXNwbGF5IGVkaXRzLmB9IWZ1bmN0aW9uKGUpe2VbZS5Nb2RlPTBdPVwiTW9kZVwiLGVbZS5TcGF0aWFsUmVmZXJlbmNlPTFdPVwiU3BhdGlhbFJlZmVyZW5jZVwifShFfHwoRT17fSkpO2V4cG9ydHtBIGFzIEkzU092ZXJyaWRlc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e29uQWJvcnRPclRocm93IGFzIGUsYWx3YXlzIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtjbGFzcyBye2NvbnN0cnVjdG9yKGUsdCxyKXt0aGlzLl9yZXF1ZXN0ZXI9ZSx0aGlzLl9jdXN0b21QYXJhbWV0ZXJzPXQsdGhpcy5fYXBpS2V5PXIsdGhpcy5fYWN0aXZlUmVxdWVzdHM9bmV3IFNldH1nZXQgYnVzeSgpe3JldHVybiB0aGlzLl9yZXF1ZXN0ZXIuYnVzeX1yZXF1ZXN0KHIscyxvKXtjb25zdCBhPW5ldyBBYm9ydENvbnRyb2xsZXIsbD1lKG8sKCgpPT5hLmFib3J0KCkpKSxpPXtzaWduYWw6YS5zaWduYWwscXVlcnk6ey4uLnRoaXMuX2N1c3RvbVBhcmFtZXRlcnMsdG9rZW46dGhpcy5fYXBpS2V5fX0sbj10aGlzLl9yZXF1ZXN0ZXIucmVxdWVzdChyLHMsaSksdT17cmVzcG9uc2U6bixhYm9ydENvbnRyb2xsZXI6YSxhYm9ydEhhbmRsZTpsfTtyZXR1cm4gdGhpcy5fYWN0aXZlUmVxdWVzdHMuYWRkKHUpLHQobiwoKCk9Pnt1LmFib3J0Q29udHJvbGxlcj1udWxsLHUuYWJvcnRIYW5kbGU/LnJlbW92ZSgpLHUuYWJvcnRIYW5kbGU9bnVsbCx0aGlzLl9hY3RpdmVSZXF1ZXN0cy5kZWxldGUodSl9KSksbn1jYW5jZWxBbGwoKXt0aGlzLl9hY3RpdmVSZXF1ZXN0cy5mb3JFYWNoKChlPT57ZS5hYm9ydENvbnRyb2xsZXI/LmFib3J0KCksZS5hYm9ydENvbnRyb2xsZXI9bnVsbCxlLmFib3J0SGFuZGxlPy5yZW1vdmUoKX0pKSx0aGlzLl9hY3RpdmVSZXF1ZXN0cy5jbGVhcigpfX1leHBvcnR7ciBhcyBJM1NTdHJlYW1EYXRhQ29udHJvbGxlcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e24gYXMgZSxhIGFzIHQsZSBhcyBpLGIgYXMgcyxjIGFzIG4sSCBhcyByLHggYXMgbyxnIGFzIGEsRiBhcyBjLHMgYXMgdSxqIGFzIGwsbCBhcyBoLGsgYXMgZCxkIGFzIG0sZiBhcyBffWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgcH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzNmNjQuanNcIjtpbXBvcnR7YyBhcyBmLGkgYXMgdn1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjNDIuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGd9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy92ZWM0ZjY0LmpzXCI7aW1wb3J0e2dldFJlZmVyZW5jZUVsbGlwc29pZCBhcyBifWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L2VsbGlwc29pZFV0aWxzLmpzXCI7aW1wb3J0e2dldFNwaGVyaWNhbFBDUEYgYXMgUn1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zcGF0aWFsUmVmZXJlbmNlRWxsaXBzb2lkVXRpbHMuanNcIjtpbXBvcnR7cHJvamVjdEJvdW5kaW5nU3BoZXJlIGFzIFN9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0Qm91bmRpbmdTcGhlcmUuanNcIjtpbXBvcnR7Z2V0UHJvamVjdG9yIGFzIE19ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0b3JzLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyB4LGZyb21NYXRyaXggYXMgQyxjcmVhdGVQb2ludHMgYXMgSSxpbnRlcnNlY3RzU3BoZXJlIGFzIFB9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9mcnVzdHVtLmpzXCI7aW1wb3J0e2dldE5vcm1hbCBhcyBFLHNpZ25lZERpc3RhbmNlIGFzIER9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9wbGFuZS5qc1wiO2ltcG9ydHtpc1BsYXRlQ2FycmVlIGFzIEZ9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7YSBhcyBPLHcgYXMgQn1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3Mvc3BoZXJlLmpzXCI7aW1wb3J0e21ha2VEZWh5ZHJhdGVkUG9pbnQgYXMgVn1mcm9tXCIuLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvZGVoeWRyYXRlZFBvaW50LmpzXCI7aW1wb3J0e1ZpZXdpbmdNb2RlIGFzIGp9ZnJvbVwiLi4vLi4vLi4vVmlld2luZ01vZGUuanNcIjtpbXBvcnR7ZXZhbHVhdGVFbGV2YXRpb25BbGlnbm1lbnRBdFBvaW50IGFzIEF9ZnJvbVwiLi4vZ3JhcGhpY3MvZWxldmF0aW9uQWxpZ25tZW50VXRpbHMuanNcIjtpbXBvcnR7RWxldmF0aW9uQ29udGV4dCBhcyBMfWZyb21cIi4uL2dyYXBoaWNzL0VsZXZhdGlvbkNvbnRleHQuanNcIjtpbXBvcnR7Y3JlYXRlQ29udGV4dFdpdGhvdXRFeHByZXNzaW9uU3VwcG9ydCBhcyB5LGV4dHJhY3RFeHByZXNzaW9uSW5mbyBhcyB3fWZyb21cIi4uL2dyYXBoaWNzL2ZlYXR1cmVFeHByZXNzaW9uSW5mb1V0aWxzLmpzXCI7aW1wb3J0e0xvZE1ldHJpYyBhcyBHfWZyb21cIi4vSTNTTm9kZS5qc1wiO2ltcG9ydHtpc1ZhbGlkTWJzIGFzIE4saW50ZXJzZWN0Qm91bmRpbmdSZWN0V2l0aE1icyBhcyBVLE1ic0ludGVyc2VjdFJlc3VsdCBhcyBrfWZyb21cIi4vSTNTVXRpbC5qc1wiO2ltcG9ydHtPYmIgYXMgVCxjb21wdXRlT2Zmc2V0T2JiIGFzIHF9ZnJvbVwiLi4vLi4vc3VwcG9ydC9vcmllbnRlZEJvdW5kaW5nQm94LmpzXCI7Y29uc3Qgej0xZTU7Y2xhc3MgSHtnZXQgX2ZydXN0dW1NYnNDZW50ZXIoKXtyZXR1cm4gdGhpcy5fZnJ1c3R1bU1ic31nZXQgX2ZydXN0dW1NYnNSYWRpdXMoKXtyZXR1cm4gdGhpcy5fZnJ1c3R1bU1ic1szXX1nZXQgX2ZydXN0dW1QbGFuZXMoKXtyZXR1cm4gdGhpcy5fZnJ1c3R1bX1jb25zdHJ1Y3RvcihlLHQsaSxzLG4scixvLGEsYz17fSl7dGhpcy5faW5kZXhTUj1lLHRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlcj10LHRoaXMuX2NsaXBwaW5nQXJlYT1uLHRoaXMuX2VsZXZhdGlvblByb3ZpZGVyPXIsdGhpcy5fdmlld2luZ01vZGU9byx0aGlzLl9vcHRpb25zPWMsdGhpcy5fZnJ1c3R1bT14KCksdGhpcy5fZnJ1c3R1bU1icz1nKCksdGhpcy5fdXNlRnJ1c3R1bUN1bGxpbmc9ITEsdGhpcy5fcG9pPXAoKSx0aGlzLl9lbGV2YXRpb25Db250ZXh0PW51bGwsdGhpcy5taW5EaXN0YW5jZT0xLzAsdGhpcy5tYXhEaXN0YW5jZT0wLHRoaXMubWF4TG9kTGV2ZWw9Mix0aGlzLl90bXBPYmI9bmV3IFQsdGhpcy5fdG1wMT1wKCksdGhpcy5fdG1wMj1wKCksdGhpcy5fdG1wMz1wKCksdGhpcy5fdG1wMD1wKCksdGhpcy5fc2NyZWVuc3BhY2VFcnJvckJpYXM9Yy5zY3JlZW5zcGFjZUVycm9yQmlhc3x8MSx0aGlzLl9wcm9ncmVzc2l2ZUxvYWRGYWN0b3I9Yy5wcm9ncmVzc2l2ZUxvYWRGYWN0b3J8fDEsdGhpcy51cGRhdGVDYW1lcmEoaSxzKTtjb25zdCB1PXRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlci5zcGF0aWFsUmVmZXJlbmNlO3RoaXMuX3JlbmRlclNSPXUsdGhpcy5fcmVuZGVyU1JTcGhlcmljYWxQQ1BGPVIodSksdGhpcy5faXNHbG9iYWxNb2RlPXU9PT10aGlzLl9yZW5kZXJTUlNwaGVyaWNhbFBDUEYsdGhpcy51cGRhdGVFbGV2YXRpb25JbmZvKGEpLHRoaXMuX3RtcFBvaW50PVYoMCwwLDAsZSksdGhpcy5faXNFQ0VGT0JCSW5Mb2NhbE1vZGU9dGhpcy5faW5kZXhTUi5pc1dHUzg0JiYodS5pc1dlYk1lcmNhdG9yfHxGKHUpKSx0aGlzLl9pbmRleFNSRWxsaXBzb2lkUmFkaXVzPWIodGhpcy5faW5kZXhTUikucmFkaXVzLHRoaXMuX2luZGV4U1JTcGhlcmljYWxQQ1BGPVIoZSksdGhpcy5fcHJvamVjdG9ySW5kZXhTUlRvSW5kZXhTUlNwaGVyaWNhbFBDUEY9TSh0aGlzLl9pbmRleFNSLHRoaXMuX2luZGV4U1JTcGhlcmljYWxQQ1BGKX11cGRhdGVFbGV2YXRpb25JbmZvKGUpe251bGwhPWU/KHRoaXMuX2VsZXZhdGlvbkNvbnRleHQ9TC5mcm9tRWxldmF0aW9uSW5mbyhlKSx0aGlzLl9lbGV2YXRpb25Db250ZXh0LnVwZGF0ZUZlYXR1cmVFeHByZXNzaW9uSW5mb0NvbnRleHQoeSh3KGUsITEpKSkpOnRoaXMuX2VsZXZhdGlvbkNvbnRleHQ9bnVsbH11cGRhdGVDYW1lcmEobixyKXtpZih0aGlzLl91c2VGcnVzdHVtQ3VsbGluZz1yLHIpe0Mobi52aWV3TWF0cml4LG4ucHJvamVjdGlvbk1hdHJpeCx0aGlzLl9mcnVzdHVtLFgpO3tjb25zdCByPW4uZXllLG89WjtlKG8sbi52aWV3Rm9yd2FyZCk7Y29uc3QgYT1ZO3QoYSxYWzRdLHIpO2NvbnN0IGM9LjUqaShhLGEpL2kobyxhKSx1PXRoaXMuX2ZydXN0dW1NYnM7cyh1LHIsbyxjKTtjb25zdCBsPTErYzt1WzNdPWx9fXRoaXMuX3NjcmVlblNpemVGYWN0b3I9MS8obi5wZXJTY3JlZW5QaXhlbFJhdGlvLzIpLHRoaXMuX2NhbVBvcz1uLmV5ZSx0aGlzLm1pbkRpc3RhbmNlPTEvMCx0aGlzLm1heERpc3RhbmNlPTB9c2V0UG9pbnRPZkludGVyZXN0KGUpe3RoaXMuX3BvaT1lfXVwZGF0ZVNjcmVlblNwYWNlRXJyb3JCaWFzKGUpe2NvbnN0IHQ9dGhpcy5fc2NyZWVuc3BhY2VFcnJvckJpYXM7cmV0dXJuIHRoaXMuX3NjcmVlbnNwYWNlRXJyb3JCaWFzPWUsdH11cGRhdGVDbGlwcGluZ0FyZWEoZSl7dGhpcy5fY2xpcHBpbmdBcmVhPWV9ZXhwYW5kRWxldmF0aW9uUmFuZ2UoZSx0LGkpe2lmKG51bGw9PXRoaXMuX2VsZXZhdGlvbkNvbnRleHQpcmV0dXJuO2NvbnN0IHM9ZS5zZXJ2aWNlTWJzSW5JbmRleFNSO2lmKCFzKXJldHVybjtjb25zdCBuPVwicmVsYXRpdmUtdG8tc2NlbmVcIj09PXRoaXMuX2VsZXZhdGlvbkNvbnRleHQubW9kZT9cInNjZW5lXCI6XCJncm91bmRcIjtpZih0aGlzLl9lbGV2YXRpb25Qcm92aWRlci5nZXRTcGhlcmVFbGV2YXRpb25Cb3VuZHMpe2NvbnN0IGU9dGhpcy5fZWxldmF0aW9uUHJvdmlkZXIuZ2V0U3BoZXJlRWxldmF0aW9uQm91bmRzKHMsdGhpcy5faW5kZXhTUixuKTtyZXR1cm4gdm9pZChlJiZpLmV4cGFuZEVsZXZhdGlvblJhbmdlKGUpKX1jb25zdCByPXNbMF0sbz1zWzFdLGE9c1syXSxjPXRoaXMuX2VsZXZhdGlvblByb3ZpZGVyLmdldEVsZXZhdGlvbihyLG8sYSx0aGlzLl9pbmRleFNSLG4pO2MmJmkuZXhwYW5kRWxldmF0aW9uUmFuZ2VWYWx1ZXMoYyxjKTtjb25zdCB1PXQ/bnVsbDp0aGlzLl9lbGV2YXRpb25Qcm92aWRlci5nZXRSb290RWxldmF0aW9uQm91bmRzPy4oKTt1JiZpLmV4cGFuZEVsZXZhdGlvblJhbmdlKHUpfWdldFNlcnZpY2VNYnNJblJlbmRlclNSKGUpe2NvbnN0IHQ9ZS5zZXJ2aWNlTWJzSW5SZW5kZXJTUjtpZihOKHQpKXJldHVybiB0O2Uuc2VydmljZU1ic0luSW5kZXhTUiYmZih0LGUuc2VydmljZU1ic0luSW5kZXhTUik7Y29uc3QgaT1lLmVsZXZhdGlvblJhbmdlTWluO2lmKHRoaXMuX2VsZXZhdGlvbkNvbnRleHQmJk51bWJlci5pc0Zpbml0ZShpKSl7bGV0IHM9MCxuPTA7Y29uc3Qgcj1lLmVsZXZhdGlvblJhbmdlTWF4O3N3aXRjaCh0aGlzLl9lbGV2YXRpb25Db250ZXh0Lm1vZGUpe2Nhc2VcInJlbGF0aXZlLXRvLWdyb3VuZFwiOmNhc2VcInJlbGF0aXZlLXRvLXNjZW5lXCI6cz10aGlzLl9lbGV2YXRpb25Db250ZXh0Lmdlb21ldHJ5WldpdGhPZmZzZXQodFsyXSx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIpK2ktdFsyXSxuPXItaTticmVhaztjYXNlXCJvbi10aGUtZ3JvdW5kXCI6cz1pLXRbMl0sbj1yLWl9dFsyXSs9cysuNSpuLHRbM10rPS41Km59ZWxzZSB0aGlzLl9lbGV2YXRpb25Db250ZXh0JiZ0WzNdPHomJih0aGlzLl90bXBQb2ludC54PXRbMF0sdGhpcy5fdG1wUG9pbnQueT10WzFdLHRoaXMuX3RtcFBvaW50Lno9dFsyXSx0WzJdPUEodGhpcy5fdG1wUG9pbnQsdGhpcy5fZWxldmF0aW9uUHJvdmlkZXIsdGhpcy5fZWxldmF0aW9uQ29udGV4dCx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIpKTtyZXR1cm4gUyh0LHRoaXMuX2luZGV4U1IsdCx0aGlzLl9yZW5kZXJTUiksdH1nZXRBbmRVcGRhdGVWaXNpYmlsaXR5T2JiSW5SZW5kZXJTUihlKXt7Y29uc3QgdD1lLnZpc2liaWxpdHlPYmJJblJlbmRlclNSO2lmKHQpcmV0dXJuIHR9Y29uc3QgdD0uMDEqdGhpcy5faW5kZXhTUkVsbGlwc29pZFJhZGl1cyx7c2VydmljZU1ic0luSW5kZXhTUjppLHNlcnZpY2VPYmJJbkluZGV4U1I6c309ZTtpZihudWxsPT1zfHwhaXx8IXMuaXNWYWxpZHx8dGhpcy5faXNFQ0VGT0JCSW5Mb2NhbE1vZGUmJihzLmhhbGZTaXplWD50fHxzLmhhbGZTaXplWT50fHxzLmhhbGZTaXplWj50KSlyZXR1cm4gbnVsbDt7bGV0IHQ9ZS5zZXJ2aWNlT2JiSW5SZW5kZXJTUjtpZihudWxsPT10KXQ9bmV3IFQsZS5zZXJ2aWNlT2JiSW5SZW5kZXJTUj10O2Vsc2UgaWYodC5pc1ZhbGlkKXJldHVybiB0O2NvbnN0IG49aVszXTtsZXQgcj0wLG89MDtjb25zdCBhPXMuY2VudGVyWixjPXRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlcix1PXRoaXMuX2VsZXZhdGlvbkNvbnRleHQ7aWYodSYmZS5lbGV2YXRpb25SYW5nZVZhbGlkKXtjb25zdCB0PWUuZWxldmF0aW9uUmFuZ2VNaW4saT1lLmVsZXZhdGlvblJhbmdlTWF4O3N3aXRjaCh1Lm1vZGUpe2Nhc2VcInJlbGF0aXZlLXRvLWdyb3VuZFwiOmNhc2VcInJlbGF0aXZlLXRvLXNjZW5lXCI6cj11Lmdlb21ldHJ5WldpdGhPZmZzZXQoYSxjKSt0LWEsbz1pLXQ7YnJlYWs7Y2FzZVwib24tdGhlLWdyb3VuZFwiOnI9dC1hLG89aS10fX1lbHNlIGlmKHUmJm48eil7Y29uc3QgZT10aGlzLl90bXBQb2ludDtlLng9cy5jZW50ZXJYLGUueT1zLmNlbnRlclksZS56PWEscj1BKGUsdGhpcy5fZWxldmF0aW9uUHJvdmlkZXIsdSxjKS1hfWNvbnN0IGw9bz4wLGg9bD90aGlzLl90bXBPYmI6dDtyZXR1cm4gcy50cmFuc2Zvcm0oaCx0aGlzLl9pbmRleFNSLHRoaXMuX3JlbmRlclNSLHIsdGhpcy5fcmVuZGVyU1JTcGhlcmljYWxQQ1BGLHRoaXMuX2luZGV4U1JTcGhlcmljYWxQQ1BGLHRoaXMuX3Byb2plY3RvckluZGV4U1JUb0luZGV4U1JTcGhlcmljYWxQQ1BGKSxsJiZxKGgsMCxvLHRoaXMuX3ZpZXdpbmdNb2RlLHQpLHR9fWdldE5vZGVPYmJJblJlbmRlclNSSW5kZXBlbmRlbnRPZkVsZXZhdGlvbk9mZnNldChlKXt7Y29uc3QgdD1lLnZpc2liaWxpdHlPYmJJblJlbmRlclNSPz9lLnNlcnZpY2VPYmJJblJlbmRlclNSPz9udWxsO2lmKHQ/LmlzVmFsaWQpcmV0dXJuIHR9Y29uc3QgdD1lLnNlcnZpY2VPYmJJbkluZGV4U1I7cmV0dXJuIHQ/KHQudHJhbnNmb3JtKGVlLHRoaXMuX2luZGV4U1IsdGhpcy5fcmVuZGVyU1Isdm9pZCAwLHRoaXMuX3JlbmRlclNSU3BoZXJpY2FsUENQRix0aGlzLl9pbmRleFNSU3BoZXJpY2FsUENQRix0aGlzLl9wcm9qZWN0b3JJbmRleFNSVG9JbmRleFNSU3BoZXJpY2FsUENQRiksZWUpOm51bGx9ZW5zdXJlRWxldmF0aW9uQWdub3N0aWNCb3VuZGluZ1ZvbHVtZShlKXtyZXR1cm4tMT09PWUuZWxldmF0aW9uQWdub3N0aWNCb3VuZGluZ1ZvbHVtZVszXSYmZS5sZXZlbD4wJiYodGhpcy5fdmlld2luZ01vZGU9PT1qLkdsb2JhbD90aGlzLl91cGRhdGVFbGV2YXRpb25BZ25vc3RpY0JvdW5kaW5nVm9sdW1lR2xvYmFsKGUpOnRoaXMuX3VwZGF0ZUVsZXZhdGlvbkFnbm9zdGljQm91bmRpbmdWb2x1bWVMb2NhbChlKSksZS5lbGV2YXRpb25BZ25vc3RpY0JvdW5kaW5nVm9sdW1lfV91cGRhdGVFbGV2YXRpb25BZ25vc3RpY0JvdW5kaW5nVm9sdW1lR2xvYmFsKHQpe2NvbnN0IHM9dGhpcy5nZXROb2RlT2JiSW5SZW5kZXJTUkluZGVwZW5kZW50T2ZFbGV2YXRpb25PZmZzZXQodCksbz10LmVsZXZhdGlvbkFnbm9zdGljQm91bmRpbmdWb2x1bWU7bGV0IGEsYz0tMTtpZihzKXtjb25zdCB0PXRlO3MuZ2V0Q2VudGVyKHQpLGUodCx0KSxhPXQscy5nZXRDb3JuZXJzKGllKTtmb3IoY29uc3QgcyBvZiBpZSl7ZShzLHMpO2NvbnN0IG49aShzLHQpO2lmKG48PTApcmV0dXJuIHZvaWQob1szXT0tMSk7Y29uc3Qgcj1NYXRoLnNxcnQoMS1uKm4pO2M9TWF0aC5tYXgoYyxyKX19ZWxzZXtjb25zdCBpPXQuc2VydmljZU1ic0luUmVuZGVyU1I7aWYoIU4oaSkpcmV0dXJuIHZvaWQob1szXT0tMSk7e2NvbnN0IHQ9bih0ZSxPKGkpKSxzPWlbM10sdT1yKHQpO2lmKHU8cylyZXR1cm4gdm9pZChvWzNdPS0xKTtjPXMvdSxlKHQsdCksYT10fX12KG8sYSk7Y29uc3QgdT0uMDAxO29bM109Yyt1fV91cGRhdGVFbGV2YXRpb25BZ25vc3RpY0JvdW5kaW5nVm9sdW1lTG9jYWwoZSl7Y29uc3QgdD1lLmVsZXZhdGlvbkFnbm9zdGljQm91bmRpbmdWb2x1bWUsaT10aGlzLmdldE5vZGVPYmJJblJlbmRlclNSSW5kZXBlbmRlbnRPZkVsZXZhdGlvbk9mZnNldChlKTtpZihpKXtjb25zdCBlPWkuZ2V0Q2VudGVyKHRlKTtlWzJdPTAsdih0LGUpO2xldCBzPTA7Y29uc3Qgbj1zZTtpLmdldENvcm5lcnMoaWUpO2Zvcihjb25zdCB0IG9mIGllKXt0WzJdPTA7Y29uc3QgZT1vKG4sdCk7cz1NYXRoLm1heChzLGUpfXRbM109TWF0aC5zcXJ0KHMpfWVsc2V7Y29uc3QgaT1lLnNlcnZpY2VNYnNJblJlbmRlclNSO2lmKE4oaSkpe2NvbnN0IGU9bih0ZSxPKGkpKTtlWzJdPTAsdih0LGUpLHRbM109aVszXX19fWlzTm9kZVZpc2libGUoZSl7Y29uc3QgdD10aGlzLmdldFNlcnZpY2VNYnNJblJlbmRlclNSKGUpO2lmKCF0aGlzLl9pc01CU2luQ2xpcHBpbmdBcmVhKHQpKXJldHVybiExO2lmKCF0aGlzLl91c2VGcnVzdHVtQ3VsbGluZylyZXR1cm4hMDtjb25zdCBpPXRoaXMuZ2V0QW5kVXBkYXRlVmlzaWJpbGl0eU9iYkluUmVuZGVyU1IoZSk7cmV0dXJuIGk/aS5kb2VzSW50ZXJzZWN0RnJ1c3R1bUNvbnNlcnZhdGl2ZUFwcHJveGltYXRpb24odGhpcy5fZnJ1c3R1bSk6UCh0aGlzLl9mcnVzdHVtLEIodCkpfWlzRWxldmF0aW9uQWdub3N0aWNCb3VuZGluZ1ZvbHVtZVZpc2libGUoZSl7cmV0dXJuIXRoaXMuX3VzZUZydXN0dW1DdWxsaW5nfHwoLTE9PT1lWzNdfHwodGhpcy5fdmlld2luZ01vZGU9PT1qLkdsb2JhbD90aGlzLl9pc0NvbmVWaXNpYmxlSW5GcnVzdHVtKGUpOnRoaXMuX2lzQ3lsaW5kZXJWaXNpYmxlSW5GcnVzdHVtKGUpKSl9X2lzQ29uZVZpc2libGVJbkZydXN0dW0obil7aWYoIXRoaXMuX2lzQ29uZVZpc2libGVJbkZydXN0dW1NYnMobikpcmV0dXJuITE7Y29uc3Qgcj1uWzNdO2lmKC0xPT09cnx8cj4uOSlyZXR1cm4hMDtjb25zdCBvPXRoaXMuX2ZydXN0dW1QbGFuZXMsYz10aGlzLl9mcnVzdHVtTWJzQ2VudGVyLHU9bixsPWkodSxjKSxoPXRoaXMuX2ZydXN0dW1NYnNSYWRpdXMsZD1sLWgsbT1sK2g7aWYoZDw9MClyZXR1cm4hMDtjb25zdCBfPWEoSyx1LGQpLHA9YShRLHUsbSksZj1yL01hdGguc3FydCgxLXIqcik7Zm9yKGNvbnN0IHYgb2Ygbyl7Y29uc3Qgbj1FKHYpLHI9ZSgkLG4pLG89aShyLHUpO2lmKE1hdGguYWJzKDEtbyk8LjAxKWNvbnRpbnVlO2NvbnN0IGM9bmU7YShjLHUsbyksdChjLGMsciksZShjLGMpO2NvbnN0IGw9cmU7cyhsLF8sYyxkKmYpO2lmKEQodixsKTw9MCljb250aW51ZTtzKGwscCxjLG0qZik7aWYoRCh2LGwpPD0wKWNvbnRpbnVlO3JldHVybiExfXJldHVybiEwfV9pc0NvbmVWaXNpYmxlSW5GcnVzdHVtTWJzKGUpe2NvbnN0IHQ9ZVszXTtpZih0Pi45KXJldHVybiEwO2NvbnN0IHM9dGhpcy5fZnJ1c3R1bU1ic1JhZGl1cyxuPXRoaXMuX2ZydXN0dW1NYnNDZW50ZXIsbz1yKG4pO2lmKG88PXMpcmV0dXJuITA7Y29uc3QgdT1lLGw9aSh1LG4pO3tjb25zdCBlPWEoSix1LGwpO2lmKGMoZSxuKTxzKXJldHVybiEwfWNvbnN0IGg9bC9vO2lmKGw8PTApe3JldHVybi1oPHN9Y29uc3QgZD1NYXRoLnNxcnQoMS1oKmgpO2lmKGQ8dClyZXR1cm4hMDtjb25zdCBtPXMvbztyZXR1cm4gZCpNYXRoLnNxcnQoMS1tKm0pLW0qaDx0fWlzT2JiVmlzaWJsZUluZGVwZW5kZW50T2ZFbGV2YXRpb24oZSx0KXtpZighdGhpcy5fdXNlRnJ1c3R1bUN1bGxpbmcpcmV0dXJuITA7aWYoLTE9PT1lWzNdKXJldHVybiEwO2NvbnN0IHM9dGhpcy5fZnJ1c3R1bU1ic1JhZGl1cyxuPXRoaXMuX2ZydXN0dW1NYnNDZW50ZXIscj10aGlzLl9mcnVzdHVtUGxhbmVzLG89aWU7aWYodC5nZXRDb3JuZXJzKG8pLHRoaXMuX3ZpZXdpbmdNb2RlPT09ai5HbG9iYWwpe2NvbnN0IHQ9ZSxjPWkodCxuKSx1PWMtcyxsPWMrcztpZih1PD0wKXJldHVybiEwO2Zvcihjb25zdCBlIG9mIHIpe2xldCBzPSEwO2Zvcihjb25zdCBuIG9mIG8pe2NvbnN0IHI9aShuLHQpLG89b2U7aWYoYShvLG4sdS9yKSxEKGUsbyk8PTApe3M9ITE7YnJlYWt9Y29uc3QgYz1vZTtpZihhKGMsbixsL3IpLEQoZSxjKTw9MCl7cz0hMTticmVha319aWYocylyZXR1cm4hMX19ZWxzZXtjb25zdCBlPW5bMl0tcyx0PW5bMl0rcztmb3IoY29uc3QgaSBvZiByKXtsZXQgcz0hMDtjb25zdCBuPUUoaSkscj1uWzBdLGE9blsxXSxjPW5bMl0sdT1pWzNdO2Zvcihjb25zdCBpIG9mIG8pe2NvbnN0IG49cippWzBdK2EqaVsxXSt1O2lmKG4rYyplPD0wfHxuK2MqdDw9MCl7cz0hMTticmVha319aWYocylyZXR1cm4hMX19cmV0dXJuITB9X2lzQ3lsaW5kZXJWaXNpYmxlSW5GcnVzdHVtKGUpe2NvbnN0IHQ9dGhpcy5fZnJ1c3R1bU1ic0NlbnRlcixpPXRoaXMuX2ZydXN0dW1NYnNSYWRpdXMscz1uKEosdCk7c1syXT0wO2NvbnN0IHI9ZVszXTtyZXR1cm4gYyhzLGUpPD1yK2l9aXNHZW9tZXRyeVZpc2libGUoZSl7aWYoIXRoaXMuX3VzZUZydXN0dW1DdWxsaW5nKXJldHVybiEwO2NvbnN0IHQ9ZS5nZW9tZXRyeU9iYkluUmVuZGVyU1I7cmV0dXJuIHQ/LmRvZXNJbnRlcnNlY3RGcnVzdHVtQ29uc2VydmF0aXZlQXBwcm94aW1hdGlvbih0aGlzLl9mcnVzdHVtKT8/dGhpcy5pc05vZGVWaXNpYmxlKGUpfV9pc01CU2luQ2xpcHBpbmdBcmVhKGUpe3JldHVybiBudWxsPT10aGlzLl9jbGlwcGluZ0FyZWF8fFUodGhpcy5fY2xpcHBpbmdBcmVhLGUpIT09ay5PVVRTSURFfV9zY3JlZW5TcGFjZURpYW1ldGVyTWJzKGUsdCl7Y29uc3QgaT10aGlzLmdldFNlcnZpY2VNYnNJblJlbmRlclNSKGUpLHM9TWF0aC5zcXJ0KHUoTyhpKSx0aGlzLl9jYW1Qb3MpKSxuPXMtaVszXTtyZXR1cm4gdGhpcy5fdXBkYXRlTWluTWF4RGlzdGFuY2UocyksbjwwPy41Kk51bWJlci5NQVhfVkFMVUU6dC9uKnRoaXMuX3NjcmVlblNpemVGYWN0b3J9Y2FsY0NhbWVyYURpc3RhbmNlKGUpe3JldHVybiB0aGlzLmNhbGNDYW1lcmFEaXN0YW5jZVRvQ2VudGVyKGUpLXRoaXMuZ2V0U2VydmljZU1ic0luUmVuZGVyU1IoZSlbM119Y2FsY0NhbWVyYURpc3RhbmNlVG9DZW50ZXIoZSl7Y29uc3QgdD10aGlzLmdldFNlcnZpY2VNYnNJblJlbmRlclNSKGUpLGk9bChPKHQpLHRoaXMuX2NhbVBvcyk7cmV0dXJuIHRoaXMuX3VwZGF0ZU1pbk1heERpc3RhbmNlKGkpLGl9Y2FsY0FuZ2xlRGVwZW5kZW50TG9EKGUpe2NvbnN0IHQ9dGhpcy5nZXRTZXJ2aWNlTWJzSW5SZW5kZXJTUihlKSxpPXRbM10scz0oTWF0aC5hYnModFswXSoodFswXS10aGlzLl9jYW1Qb3NbMF0pK3RbMV0qKHRbMV0tdGhpcy5fY2FtUG9zWzFdKSt0WzJdKih0WzJdLXRoaXMuX2NhbVBvc1syXSkpL2goTyh0KSkraSkvbChPKHQpLHRoaXMuX2NhbVBvcyk7cmV0dXJuIE1hdGgubWluKDEscyl9aGFzTE9EKGUpe3JldHVybiBlLmxvZE1ldHJpYyE9PUcuTm9uZX1fZ2V0RGlzdGFuY2VHbG9iZU1vZGUoZSx0KXtjb25zdCBzPWgoTyh0KSksbj1oKGUpLXM7YSh0aGlzLl90bXAwLGUsaShlLE8odCkpL2QoZSkpO2NvbnN0IHI9dShPKHQpLHRoaXMuX3RtcDApLG89dFszXTtpZihyPD1vKm8pcmV0dXJuIE1hdGguYWJzKG4pO3tjb25zdCByPWEodGhpcy5fdG1wMCxPKHQpLDEvcyksYz1zLHU9bypvLzIvYyxkPWEodGhpcy5fdG1wMSxyLGMtdSkscD1lLGY9bSh0aGlzLl90bXAyLHAsZCksdj1tKHRoaXMuX3RtcDIsZixhKHRoaXMuX3RtcDMscixpKHIsZikpKSxnPV8odGhpcy5fdG1wMixkLGEodGhpcy5fdG1wMix2LG8vaCh2KSkpO2xldCBiPWwocCxnKTtpZihuPj0yZTUpe2NvbnN0IGU9bSh0aGlzLl90bXAxLHAsZyk7bGV0IHQ9aShlLHIpL2goZSk7dDwuMDgmJih0PTFlLTQpLGIvPXR9cmV0dXJuIGJ9fV9nZXREaXN0YW5jZShlLHQpe3JldHVybiB0aGlzLl9pc0dsb2JhbE1vZGU/dGhpcy5fZ2V0RGlzdGFuY2VHbG9iZU1vZGUoZSx0KTpXKGUsdCl9X3VwZGF0ZU1pbk1heERpc3RhbmNlKGUpe2U+MD8odGhpcy5taW5EaXN0YW5jZT1NYXRoLm1pbih0aGlzLm1pbkRpc3RhbmNlLGUpLHRoaXMubWF4RGlzdGFuY2U9TWF0aC5tYXgodGhpcy5tYXhEaXN0YW5jZSxlKSk6KHRoaXMubWluRGlzdGFuY2U9MCx0aGlzLm1heERpc3RhbmNlPU1hdGgubWF4KHRoaXMubWF4RGlzdGFuY2UsLWUpKX1nZXRMb2RMZXZlbChlKXtpZihlLmxvZE1ldHJpYz09PUcuTm9uZSlyZXR1cm4gMDtpZigwPT09ZS5jaGlsZENvdW50KXJldHVybiB0aGlzLm1heExvZExldmVsO2lmKHRoaXMuX3VzZUZydXN0dW1DdWxsaW5nJiZ0aGlzLl9wcm9ncmVzc2l2ZUxvYWRGYWN0b3I8MSl7Y29uc3QgdD10aGlzLl9wcm9ncmVzc2l2ZUxvYWRGYWN0b3IqdGhpcy5fc2NyZWVuc3BhY2VFcnJvckJpYXMsaT10aGlzLl9zY3JlZW5zcGFjZUVycm9yQmlhcztyZXR1cm4gdGhpcy5ldmFsdWF0ZUxPRG1ldHJpYyhlLHQpP3RoaXMuZXZhbHVhdGVMT0RtZXRyaWMoZSxpKT8yOjE6MH1yZXR1cm4gdGhpcy5ldmFsdWF0ZUxPRG1ldHJpYyhlLHRoaXMuX3NjcmVlbnNwYWNlRXJyb3JCaWFzKT90aGlzLm1heExvZExldmVsOjB9ZXZhbHVhdGVMT0RtZXRyaWMoZSx0KXtzd2l0Y2goZS5sb2RNZXRyaWMpe2Nhc2UgRy5TY3JlZW5TcGFjZVJlbGF0aXZlOntjb25zdCBpPXRoaXMuZ2V0U2VydmljZU1ic0luUmVuZGVyU1IoZSkscz10aGlzLl9nZXREaXN0YW5jZSh0aGlzLl9jYW1Qb3MsaSksbj0yKnMvdGhpcy5fc2NyZWVuU2l6ZUZhY3RvcixyPXMraVszXTtyZXR1cm4gdGhpcy5fdXBkYXRlTWluTWF4RGlzdGFuY2UociksZS5tYXhFcnJvcip0PD1ufWNhc2UgRy5NYXhTY3JlZW5UaHJlc2hvbGQ6e2xldCBpPXRoaXMuX3NjcmVlblNwYWNlRGlhbWV0ZXJNYnMoZSxlLnNlcnZpY2VNYnNJbkluZGV4U1JbM10qdCk7cmV0dXJuIHRoaXMuX29wdGlvbnMuYW5nbGVEZXBlbmRlbnRMb0QmJihpKj10aGlzLmNhbGNBbmdsZURlcGVuZGVudExvRChlKSksaTxlLm1heEVycm9yfWNhc2UgRy5SZW1vdmVkRmVhdHVyZURpYW1ldGVyOnJldHVybiB0aGlzLl9zY3JlZW5TcGFjZURpYW1ldGVyTWJzKGUsZS5tYXhFcnJvcikqdDwxMDtjYXNlIEcuRGlzdGFuY2VSYW5nZUZyb21EZWZhdWx0Q2FtZXJhOnJldHVybiB0aGlzLmNhbGNDYW1lcmFEaXN0YW5jZShlKT5lLm1heEVycm9yKnR9cmV0dXJuITF9ZGlzdFRvUE9JKGUpe2NvbnN0IHQ9dGhpcy5nZXRTZXJ2aWNlTWJzSW5SZW5kZXJTUihlKTtyZXR1cm4gbChPKHQpLHRoaXMuX3BvaSktdFszXX1kaXN0Q2FtZXJhVG9QT0koKXtyZXR1cm4gbCh0aGlzLl9jYW1Qb3MsdGhpcy5fcG9pKX19ZnVuY3Rpb24gVyhlLHQpe2NvbnN0IGk9ZVswXS10WzBdLHM9ZVsxXS10WzFdLG49ZVsyXS10WzJdLHI9aSppK3MqcyxvPXRbM107aWYocjw9bypvKXJldHVybiBNYXRoLmFicyhuKTtjb25zdCBhPU1hdGguc3FydChyKS1vO3JldHVybiBNYXRoLnNxcnQobipuK2EqYSl9Y29uc3QgWj1wKCksWD1JKCksWT1wKCksSj1wKCksSz1wKCksUT1wKCksJD1wKCksZWU9bmV3IFQsdGU9cCgpLGllPVtwKCkscCgpLHAoKSxwKCkscCgpLHAoKSxwKCkscCgpXSxzZT1wKCksbmU9cCgpLHJlPXAoKSxvZT1wKCk7ZXhwb3J0e0ggYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY2xhc3Mgc3tjb25zdHJ1Y3RvcihzLHQsaSxlLGgsbyxyLGMpe3RoaXMuaWQ9cyx0aGlzLm1icz10LHRoaXMub2JiPWksdGhpcy52ZXJzaW9uPWUsdGhpcy5yZXNvdXJjZXM9aCx0aGlzLmNoaWxkcmVuPW8sdGhpcy5sb2RTZWxlY3Rpb249cix0aGlzLm51bUZlYXR1cmVzPWN9fWV4cG9ydHtzIGFzIFZhbGlkYXRlZE5vZGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBlOyFmdW5jdGlvbihlKXtlW2UuS1RYMj0xXT1cIktUWDJcIixlW2UuQmFzaXM9Ml09XCJCYXNpc1wiLGVbZS5ERFNfUzNUQz00XT1cIkREU19TM1RDXCIsZVtlLlBORz04XT1cIlBOR1wiLGVbZS5KUEc9MTZdPVwiSlBHXCIsZVtlLktUWF9FVEMyPTMyXT1cIktUWF9FVEMyXCJ9KGV8fChlPXt9KSk7Y29uc3Qgcz1lLlBOR3xlLkpQRzt2YXIgbzshZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLkNvbG9yPTFdPVwiQ29sb3JcIixlW2UuTWV0YWxsaWNSb3VnaG5lc3M9Ml09XCJNZXRhbGxpY1JvdWdobmVzc1wiLGVbZS5Ob3JtYWw9NF09XCJOb3JtYWxcIixlW2UuT2NjbHVzaW9uPThdPVwiT2NjbHVzaW9uXCIsZVtlLkVtaXNzaXZlPTE2XT1cIkVtaXNzaXZlXCIsZVtlLkFscGhhTWFzaz0zMl09XCJBbHBoYU1hc2tcIixlW2UuQ29sb3JUZXh0dXJlcz0xOV09XCJDb2xvclRleHR1cmVzXCIsZVtlLkdlb21ldHJ5VGV4dHVyZXM9MzZdPVwiR2VvbWV0cnlUZXh0dXJlc1wiLGVbZS5HZW9tZXRyeVRleHR1cmVzUEJSPTQ0XT1cIkdlb21ldHJ5VGV4dHVyZXNQQlJcIixlW2UuQWxsVGV4dHVyZXM9MzddPVwiQWxsVGV4dHVyZXNcIixlW2UuQWxsVGV4dHVyZXNQQlI9NjNdPVwiQWxsVGV4dHVyZXNQQlJcIn0ob3x8KG89e30pKTtjb25zdCBsPW8uQ29sb3J8by5NZXRhbGxpY1JvdWdobmVzcztleHBvcnR7ZSBhcyBUZXh0dXJlRW5jb2RpbmcsbyBhcyBUZXh0dXJlVXNhZ2UsbCBhcyBjb21wcmVzc2libGVVc2FnZXMscyBhcyB1bmNvbXByZXNzZWRGb3JtYXRzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgYTshZnVuY3Rpb24oYSl7YVthLkZhZGVJbj0wXT1cIkZhZGVJblwiLGFbYS5GYWRlT3V0PTFdPVwiRmFkZU91dFwifShhfHwoYT17fSkpO2V4cG9ydHthIGFzIEZhZGVEaXJlY3Rpb259O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtyZWxlYXNlTWF5YmUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2lzUHJvbWlzZUxpa2UgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2NsYXNzIHN7Y29uc3RydWN0b3IocyxyKXt0aGlzLl90ZXh0dXJlcz1zLHRoaXMubG9hZFByb21pc2U9bnVsbCx0aGlzLl9kaXNwb3NlZD0hMTtjb25zdCBpPXRoaXMuX3RleHR1cmVzLmFjcXVpcmUocik7dChpKT8oaS50aGVuKCh0PT57dGhpcy5fZGlzcG9zZWQ/ZSh0KTp0aGlzLl90ZXh0dXJlUmVmPXR9KSksdGhpcy5sb2FkUHJvbWlzZT1pKTp0aGlzLl90ZXh0dXJlUmVmPWl9ZGlzcG9zZSgpe3RoaXMuX3RleHR1cmVSZWY9ZSh0aGlzLl90ZXh0dXJlUmVmKSx0aGlzLl9kaXNwb3NlZD0hMH1nZXQgZ2xUZXh0dXJlKCl7cmV0dXJuIG51bGwhPXRoaXMuX3RleHR1cmVSZWY/dGhpcy5fdGV4dHVyZVJlZi5nbFRleHR1cmU6bnVsbH19ZXhwb3J0e3MgYXMgUmVuZGVyVGV4dHVyZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2dldEZlYXR1cmVFZGl0RmllbGRzIGFzIGUsZml4RmllbGRzIGFzIGx9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2FzeW5jIGZ1bmN0aW9uIG4obixwPW4ucG9wdXBUZW1wbGF0ZSl7aWYobnVsbD09cClyZXR1cm5bXTtjb25zdCB1PWF3YWl0IHAuZ2V0UmVxdWlyZWRGaWVsZHMobi5maWVsZHNJbmRleCkse2xhc3RFZGl0SW5mb0VuYWJsZWQ6dH09cCx7b2JqZWN0SWRGaWVsZDpkLHR5cGVJZEZpZWxkOnMsZ2xvYmFsSWRGaWVsZDppLHJlbGF0aW9uc2hpcHM6YX09bjtpZih1LmluY2x1ZGVzKFwiKlwiKSlyZXR1cm5bXCIqXCJdO2NvbnN0IG89dD9lKG4pOltdLGY9bChuLmZpZWxkc0luZGV4LFsuLi51LC4uLm9dKTtyZXR1cm4gcyYmZi5wdXNoKHMpLGYmJmQmJm4uZmllbGRzSW5kZXg/LmhhcyhkKSYmIWYuaW5jbHVkZXMoZCkmJmYucHVzaChkKSxmJiZpJiZuLmZpZWxkc0luZGV4Py5oYXMoaSkmJiFmLmluY2x1ZGVzKGkpJiZmLnB1c2goaSksYSYmYS5mb3JFYWNoKChlPT57Y29uc3R7a2V5RmllbGQ6bH09ZTtmJiZsJiZuLmZpZWxkc0luZGV4Py5oYXMobCkmJiFmLmluY2x1ZGVzKGwpJiZmLnB1c2gobCl9KSksZn1mdW5jdGlvbiBwKGUsbCl7cmV0dXJuIGUucG9wdXBUZW1wbGF0ZT9lLnBvcHVwVGVtcGxhdGU6bnVsbCE9bCYmbC5kZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQmJm51bGwhPWUuZGVmYXVsdFBvcHVwVGVtcGxhdGU/ZS5kZWZhdWx0UG9wdXBUZW1wbGF0ZTpudWxsfWZ1bmN0aW9uIHUoZSxsKXtyZXR1cm4gbnVsbCE9cChlLHtkZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQ6bH0pfWV4cG9ydHtwIGFzIGdldEZldGNoUG9wdXBUZW1wbGF0ZSxuIGFzIGdldFJlcXVpcmVkRmllbGRzLHUgYXMgaGFzUG9wdXBUZW1wbGF0ZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=