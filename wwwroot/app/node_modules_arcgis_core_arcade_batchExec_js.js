export const __webpack_id__ = "node_modules_arcgis_core_arcade_batchExec_js";
export const __webpack_ids__ = ["node_modules_arcgis_core_arcade_batchExec_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/arcade/batchExec.js":
/*!*******************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/batchExec.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createBatchExecutor: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/QueueProcessor.js */ "./node_modules/@arcgis/core/core/QueueProcessor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(t,e,s,i){return new h(t,e,s,i)}class o{constructor(t,s,i){this._executor=t,this._data=s,this._impl=i,this._closed=!1,this._resolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)(),this._impl.open(this)}assertOpen(){if(this._closed)throw new Error("Batch closed.")}get data(){return this.assertOpen(),this._data}get results(){return this._resolver.promise}send(){try{this.assertOpen(),this._closed=!0,this._executor.resume(this),this._impl.close(this),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.settleWithPromise)(this._resolver,this._impl.execute(this._data))}catch(t){this._resolver.reject(t)}}}class h{constructor(t,i,n,o){if(this._runJob=i,this._maxRunning=n,this._abortSignal=o,this._jobIdSeq=0,this._running=new Set,this._blocked=new Set,this._openBatches=new Map,this._state="ready",this._runResolver=null,n<1)throw new Error(`_maxRunning=${n} but cannot be < 1`);this._todo=t[Symbol.iterator](),this._queue=new _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_3__.QueueProcessor({concurrency:1,process:async t=>{if("start"===t.type){const{id:i,args:r}=t,n=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)(),o=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)(),h={id:i,interrupt:n,finished:o.promise};return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.settleWithPromise)(o,this._runJob(r,{id:i,yieldFor:t=>this.yieldFor(h,t)}).then((()=>{this._blocked.has(i)&&this._fail(new Error(`job ${i} completed before resuming`)),this._running.delete(i)||this._fail(new Error(`job ${i} not running?`))}))),await Promise.race([n.promise,h.finished]),void this._tryQueue()}if("continue"===t.type)return t.job.interrupt=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)(),"fulfilled"===t.data.status?t.continuation.resolve(t.data.value):t.continuation.reject(t.data.reason),await Promise.race([t.job.interrupt.promise,t.job.finished]),void this._tryQueue()}})}openBatch(t,e){return new o(this,t,e)}_fail(t,e=!1){if(this._runResolver?.reject(t),this._state="stopped",!e)throw t}_schedule(t){this._queue.push(t).catch((t=>this._fail(t,!0)))}_tryQueue(){if("running"===this._state)if(this._abortSignal?.aborted)this._fail((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createAbortError)(),!0);else{if(this._running.size<this._maxRunning){const t=this._todo.next();if(!t.done){const e=this._jobIdSeq++;return this._running.add(e),void this._schedule({type:"start",id:e,args:t.value})}}if(0===this._running.size)return this._runResolver?.resolve(),this._runResolver=null,void(this._state="stopped");if(this._blocked.size===this._running.size){let t=null,e=-1/0;for(const[s,i]of this._openBatches)i.size>e&&(t=s,e=i.size);return null==t&&this._fail(new Error("deadlock")),void t.send()}}}resume(t){const e=this._openBatches.get(t);if(this._openBatches.delete(t),null!=e)for(const s of e)this._blocked.delete(s)||this._fail(new Error(`job ${s} not suspended`))}async yieldFor(s,i){i.assertOpen(),this._running.has(s.id)||this._fail(new Error(`job ${s.id} not running`)),this._blocked.has(s.id)&&this._fail(new Error(`job ${s.id} already suspended`)),this._blocked.add(s.id),(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.getOrCreateMapValue)(this._openBatches,i,(()=>new Set)).add(s.id),null==s.interrupt&&this._fail(new Error(`job ${s.id} hasn't resumed yet`)),s.interrupt.resolve(),s.interrupt=null;const r=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)();let n;try{n={status:"fulfilled",value:await i.results}}catch(o){n={status:"rejected",reason:o}}return this._schedule({type:"continue",continuation:r,data:n,job:s}),r.promise}run(){"ready"!==this._state&&this._fail(new Error(`executor not ready to start. state=${this._state}`));const t=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)();return this._state="running",this._runResolver=t,this._tryQueue(),t.promise}}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2FyY2FkZV9iYXRjaEV4ZWNfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDa1Asb0JBQW9CLHNCQUFzQixRQUFRLG1CQUFtQiwwRUFBMEUscUVBQUMseUJBQXlCLGFBQWEsaURBQWlELFdBQVcsb0NBQW9DLGNBQWMsOEJBQThCLE9BQU8sSUFBSSxxRkFBcUYsd0VBQUMsZ0RBQWdELFNBQVMsMkJBQTJCLFFBQVEscUJBQXFCLDhOQUE4TixHQUFHLG9CQUFvQixnREFBZ0QsbUVBQUMsRUFBRSxnQ0FBZ0MscUJBQXFCLE1BQU0sWUFBWSxLQUFLLHFFQUFDLEtBQUsscUVBQUMsTUFBTSxxQ0FBcUMsT0FBTyx3RUFBQyxtQkFBbUIsb0NBQW9DLGFBQWEsa0RBQWtELEdBQUcsa0ZBQWtGLEdBQUcsZ0JBQWdCLHFFQUFxRSw4Q0FBOEMscUVBQUMsNkxBQTZMLEVBQUUsZUFBZSx1QkFBdUIsY0FBYyxpRUFBaUUsYUFBYSxpREFBaUQsWUFBWSxvRUFBb0UsdUVBQUMsT0FBTyxLQUFLLHdDQUF3QywwQkFBMEIsWUFBWSx5QkFBeUIsaURBQWlELCtCQUErQixHQUFHLGlIQUFpSCw0Q0FBNEMsa0JBQWtCLDREQUE0RCxrRUFBa0UsVUFBVSxpQ0FBaUMsNkdBQTZHLEdBQUcsaUJBQWlCLG9CQUFvQixvRUFBb0UsTUFBTSxvRUFBb0UsTUFBTSw2Q0FBNkMsc0VBQUMsNkZBQTZGLE1BQU0sNkRBQTZELFFBQVEscUVBQUMsR0FBRyxNQUFNLElBQUksR0FBRywwQ0FBMEMsU0FBUyxHQUFHLDRCQUE0Qix1QkFBdUIsNENBQTRDLFlBQVksTUFBTSxrRkFBa0YsWUFBWSxJQUFJLFFBQVEscUVBQUMsR0FBRyw2RUFBOEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvYXJjYWRlL2JhdGNoRXhlYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0XCIuLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtnZXRPckNyZWF0ZU1hcFZhbHVlIGFzIHR9ZnJvbVwiLi4vY29yZS9NYXBVdGlscy5qc1wiO2ltcG9ydHtjcmVhdGVSZXNvbHZlciBhcyBlLHNldHRsZVdpdGhQcm9taXNlIGFzIHMsY3JlYXRlQWJvcnRFcnJvciBhcyBpfWZyb21cIi4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e1F1ZXVlUHJvY2Vzc29yIGFzIHJ9ZnJvbVwiLi4vY29yZS9RdWV1ZVByb2Nlc3Nvci5qc1wiO2Z1bmN0aW9uIG4odCxlLHMsaSl7cmV0dXJuIG5ldyBoKHQsZSxzLGkpfWNsYXNzIG97Y29uc3RydWN0b3IodCxzLGkpe3RoaXMuX2V4ZWN1dG9yPXQsdGhpcy5fZGF0YT1zLHRoaXMuX2ltcGw9aSx0aGlzLl9jbG9zZWQ9ITEsdGhpcy5fcmVzb2x2ZXI9ZSgpLHRoaXMuX2ltcGwub3Blbih0aGlzKX1hc3NlcnRPcGVuKCl7aWYodGhpcy5fY2xvc2VkKXRocm93IG5ldyBFcnJvcihcIkJhdGNoIGNsb3NlZC5cIil9Z2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5hc3NlcnRPcGVuKCksdGhpcy5fZGF0YX1nZXQgcmVzdWx0cygpe3JldHVybiB0aGlzLl9yZXNvbHZlci5wcm9taXNlfXNlbmQoKXt0cnl7dGhpcy5hc3NlcnRPcGVuKCksdGhpcy5fY2xvc2VkPSEwLHRoaXMuX2V4ZWN1dG9yLnJlc3VtZSh0aGlzKSx0aGlzLl9pbXBsLmNsb3NlKHRoaXMpLHModGhpcy5fcmVzb2x2ZXIsdGhpcy5faW1wbC5leGVjdXRlKHRoaXMuX2RhdGEpKX1jYXRjaCh0KXt0aGlzLl9yZXNvbHZlci5yZWplY3QodCl9fX1jbGFzcyBoe2NvbnN0cnVjdG9yKHQsaSxuLG8pe2lmKHRoaXMuX3J1bkpvYj1pLHRoaXMuX21heFJ1bm5pbmc9bix0aGlzLl9hYm9ydFNpZ25hbD1vLHRoaXMuX2pvYklkU2VxPTAsdGhpcy5fcnVubmluZz1uZXcgU2V0LHRoaXMuX2Jsb2NrZWQ9bmV3IFNldCx0aGlzLl9vcGVuQmF0Y2hlcz1uZXcgTWFwLHRoaXMuX3N0YXRlPVwicmVhZHlcIix0aGlzLl9ydW5SZXNvbHZlcj1udWxsLG48MSl0aHJvdyBuZXcgRXJyb3IoYF9tYXhSdW5uaW5nPSR7bn0gYnV0IGNhbm5vdCBiZSA8IDFgKTt0aGlzLl90b2RvPXRbU3ltYm9sLml0ZXJhdG9yXSgpLHRoaXMuX3F1ZXVlPW5ldyByKHtjb25jdXJyZW5jeToxLHByb2Nlc3M6YXN5bmMgdD0+e2lmKFwic3RhcnRcIj09PXQudHlwZSl7Y29uc3R7aWQ6aSxhcmdzOnJ9PXQsbj1lKCksbz1lKCksaD17aWQ6aSxpbnRlcnJ1cHQ6bixmaW5pc2hlZDpvLnByb21pc2V9O3JldHVybiBzKG8sdGhpcy5fcnVuSm9iKHIse2lkOmkseWllbGRGb3I6dD0+dGhpcy55aWVsZEZvcihoLHQpfSkudGhlbigoKCk9Pnt0aGlzLl9ibG9ja2VkLmhhcyhpKSYmdGhpcy5fZmFpbChuZXcgRXJyb3IoYGpvYiAke2l9IGNvbXBsZXRlZCBiZWZvcmUgcmVzdW1pbmdgKSksdGhpcy5fcnVubmluZy5kZWxldGUoaSl8fHRoaXMuX2ZhaWwobmV3IEVycm9yKGBqb2IgJHtpfSBub3QgcnVubmluZz9gKSl9KSkpLGF3YWl0IFByb21pc2UucmFjZShbbi5wcm9taXNlLGguZmluaXNoZWRdKSx2b2lkIHRoaXMuX3RyeVF1ZXVlKCl9aWYoXCJjb250aW51ZVwiPT09dC50eXBlKXJldHVybiB0LmpvYi5pbnRlcnJ1cHQ9ZSgpLFwiZnVsZmlsbGVkXCI9PT10LmRhdGEuc3RhdHVzP3QuY29udGludWF0aW9uLnJlc29sdmUodC5kYXRhLnZhbHVlKTp0LmNvbnRpbnVhdGlvbi5yZWplY3QodC5kYXRhLnJlYXNvbiksYXdhaXQgUHJvbWlzZS5yYWNlKFt0LmpvYi5pbnRlcnJ1cHQucHJvbWlzZSx0LmpvYi5maW5pc2hlZF0pLHZvaWQgdGhpcy5fdHJ5UXVldWUoKX19KX1vcGVuQmF0Y2godCxlKXtyZXR1cm4gbmV3IG8odGhpcyx0LGUpfV9mYWlsKHQsZT0hMSl7aWYodGhpcy5fcnVuUmVzb2x2ZXI/LnJlamVjdCh0KSx0aGlzLl9zdGF0ZT1cInN0b3BwZWRcIiwhZSl0aHJvdyB0fV9zY2hlZHVsZSh0KXt0aGlzLl9xdWV1ZS5wdXNoKHQpLmNhdGNoKCh0PT50aGlzLl9mYWlsKHQsITApKSl9X3RyeVF1ZXVlKCl7aWYoXCJydW5uaW5nXCI9PT10aGlzLl9zdGF0ZSlpZih0aGlzLl9hYm9ydFNpZ25hbD8uYWJvcnRlZCl0aGlzLl9mYWlsKGkoKSwhMCk7ZWxzZXtpZih0aGlzLl9ydW5uaW5nLnNpemU8dGhpcy5fbWF4UnVubmluZyl7Y29uc3QgdD10aGlzLl90b2RvLm5leHQoKTtpZighdC5kb25lKXtjb25zdCBlPXRoaXMuX2pvYklkU2VxKys7cmV0dXJuIHRoaXMuX3J1bm5pbmcuYWRkKGUpLHZvaWQgdGhpcy5fc2NoZWR1bGUoe3R5cGU6XCJzdGFydFwiLGlkOmUsYXJnczp0LnZhbHVlfSl9fWlmKDA9PT10aGlzLl9ydW5uaW5nLnNpemUpcmV0dXJuIHRoaXMuX3J1blJlc29sdmVyPy5yZXNvbHZlKCksdGhpcy5fcnVuUmVzb2x2ZXI9bnVsbCx2b2lkKHRoaXMuX3N0YXRlPVwic3RvcHBlZFwiKTtpZih0aGlzLl9ibG9ja2VkLnNpemU9PT10aGlzLl9ydW5uaW5nLnNpemUpe2xldCB0PW51bGwsZT0tMS8wO2Zvcihjb25zdFtzLGldb2YgdGhpcy5fb3BlbkJhdGNoZXMpaS5zaXplPmUmJih0PXMsZT1pLnNpemUpO3JldHVybiBudWxsPT10JiZ0aGlzLl9mYWlsKG5ldyBFcnJvcihcImRlYWRsb2NrXCIpKSx2b2lkIHQuc2VuZCgpfX19cmVzdW1lKHQpe2NvbnN0IGU9dGhpcy5fb3BlbkJhdGNoZXMuZ2V0KHQpO2lmKHRoaXMuX29wZW5CYXRjaGVzLmRlbGV0ZSh0KSxudWxsIT1lKWZvcihjb25zdCBzIG9mIGUpdGhpcy5fYmxvY2tlZC5kZWxldGUocyl8fHRoaXMuX2ZhaWwobmV3IEVycm9yKGBqb2IgJHtzfSBub3Qgc3VzcGVuZGVkYCkpfWFzeW5jIHlpZWxkRm9yKHMsaSl7aS5hc3NlcnRPcGVuKCksdGhpcy5fcnVubmluZy5oYXMocy5pZCl8fHRoaXMuX2ZhaWwobmV3IEVycm9yKGBqb2IgJHtzLmlkfSBub3QgcnVubmluZ2ApKSx0aGlzLl9ibG9ja2VkLmhhcyhzLmlkKSYmdGhpcy5fZmFpbChuZXcgRXJyb3IoYGpvYiAke3MuaWR9IGFscmVhZHkgc3VzcGVuZGVkYCkpLHRoaXMuX2Jsb2NrZWQuYWRkKHMuaWQpLHQodGhpcy5fb3BlbkJhdGNoZXMsaSwoKCk9Pm5ldyBTZXQpKS5hZGQocy5pZCksbnVsbD09cy5pbnRlcnJ1cHQmJnRoaXMuX2ZhaWwobmV3IEVycm9yKGBqb2IgJHtzLmlkfSBoYXNuJ3QgcmVzdW1lZCB5ZXRgKSkscy5pbnRlcnJ1cHQucmVzb2x2ZSgpLHMuaW50ZXJydXB0PW51bGw7Y29uc3Qgcj1lKCk7bGV0IG47dHJ5e249e3N0YXR1czpcImZ1bGZpbGxlZFwiLHZhbHVlOmF3YWl0IGkucmVzdWx0c319Y2F0Y2gobyl7bj17c3RhdHVzOlwicmVqZWN0ZWRcIixyZWFzb246b319cmV0dXJuIHRoaXMuX3NjaGVkdWxlKHt0eXBlOlwiY29udGludWVcIixjb250aW51YXRpb246cixkYXRhOm4sam9iOnN9KSxyLnByb21pc2V9cnVuKCl7XCJyZWFkeVwiIT09dGhpcy5fc3RhdGUmJnRoaXMuX2ZhaWwobmV3IEVycm9yKGBleGVjdXRvciBub3QgcmVhZHkgdG8gc3RhcnQuIHN0YXRlPSR7dGhpcy5fc3RhdGV9YCkpO2NvbnN0IHQ9ZSgpO3JldHVybiB0aGlzLl9zdGF0ZT1cInJ1bm5pbmdcIix0aGlzLl9ydW5SZXNvbHZlcj10LHRoaXMuX3RyeVF1ZXVlKCksdC5wcm9taXNlfX1leHBvcnR7biBhcyBjcmVhdGVCYXRjaEV4ZWN1dG9yfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==