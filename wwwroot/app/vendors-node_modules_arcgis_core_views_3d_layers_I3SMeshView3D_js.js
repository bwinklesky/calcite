export const __webpack_id__ = "vendors-node_modules_arcgis_core_views_3d_layers_I3SMeshView3D_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_views_3d_layers_I3SMeshView3D_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/geometry/support/UByteArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/UByteArray.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   newUByteArray: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,n=!1){return e<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.nativeArrayMaxSize?n?new Array(e).fill(0):new Array(e):new Uint8Array(e)}


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/i3s/I3SModule.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/i3s/I3SModule.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   get: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets.js */ "./node_modules/@arcgis/core/assets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(){return n||(n=new Promise((t=>__webpack_require__.e(/*! import() */ "vendors-node_modules_arcgis_core_chunks_i3s_js").then(__webpack_require__.bind(__webpack_require__, /*! ../../chunks/i3s.js */ "./node_modules/@arcgis/core/chunks/i3s.js")).then((t=>t.i)).then((({default:e})=>{const n=e({locateFile:i,onRuntimeInitialized:()=>t(n)});delete n.then})))).catch((t=>{throw t}))),n}function i(e){return (0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.getAssetUrl)(`esri/libs/i3s/${e}`)}let n;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/ContentGeometryLayerView.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/ContentGeometryLayerView.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContentGeometryUpdateEvent: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{constructor(r){this.renderBounds=r}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SMeshView3D: () => (/* binding */ Pt)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Color.js */ "./node_modules/@arcgis/core/Color.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/ByteSizeUnit.js */ "./node_modules/@arcgis/core/core/ByteSizeUnit.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_scheduling_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/scheduling.js */ "./node_modules/@arcgis/core/core/scheduling.js");
/* harmony import */ var _core_SetUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/SetUtils.js */ "./node_modules/@arcgis/core/core/SetUtils.js");
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/math/mat3.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/mat3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js");
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/math/mat4.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/mat4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_quatf64_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/quatf64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/quatf64.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../chunks/vec42.js */ "./node_modules/@arcgis/core/chunks/vec42.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../core/libs/gl-matrix-2/factories/vec4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../geometry/spatialReferenceEllipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js");
/* harmony import */ var _geometry_projection_localLinearScaleFactors_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../geometry/projection/localLinearScaleFactors.js */ "./node_modules/@arcgis/core/geometry/projection/localLinearScaleFactors.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../geometry/projection/projectors.js */ "./node_modules/@arcgis/core/geometry/projection/projectors.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../geometry/support/FloatArray.js */ "./node_modules/@arcgis/core/geometry/support/FloatArray.js");
/* harmony import */ var _geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../geometry/support/Indices.js */ "./node_modules/@arcgis/core/geometry/support/Indices.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _geometry_support_UByteArray_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../../geometry/support/UByteArray.js */ "./node_modules/@arcgis/core/geometry/support/UByteArray.js");
/* harmony import */ var _layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../../../layers/LayerConstants.js */ "./node_modules/@arcgis/core/layers/LayerConstants.js");
/* harmony import */ var _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../../../layers/graphics/controllers/I3SOnDemandController.js */ "./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_SceneModification_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../../../layers/support/SceneModification.js */ "./node_modules/@arcgis/core/layers/support/SceneModification.js");
/* harmony import */ var _renderers_visualVariables_support_visualVariableUtils_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "./node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _support_guards_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../../../support/guards.js */ "./node_modules/@arcgis/core/support/guards.js");
/* harmony import */ var _support_loadArcade_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../../../support/loadArcade.js */ "./node_modules/@arcgis/core/support/loadArcade.js");
/* harmony import */ var _symbols_MeshSymbol3D_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../../../symbols/MeshSymbol3D.js */ "./node_modules/@arcgis/core/symbols/MeshSymbol3D.js");
/* harmony import */ var _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ../../../symbols/SimpleFillSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleFillSymbol.js");
/* harmony import */ var _ContentGeometryLayerView_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./ContentGeometryLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/ContentGeometryLayerView.js");
/* harmony import */ var _I3SMeshViewLabeler_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./I3SMeshViewLabeler.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js");
/* harmony import */ var _I3SMeshViewPerformanceInfo_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./I3SMeshViewPerformanceInfo.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewPerformanceInfo.js");
/* harmony import */ var _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./I3SMeshWorkerHandle.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshWorkerHandle.js");
/* harmony import */ var _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./II3SMeshView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js");
/* harmony import */ var _SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./SceneLayerWorker.js */ "./node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js");
/* harmony import */ var _graphics_graphicUtils_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./graphics/graphicUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js");
/* harmony import */ var _graphics_Labeler_js__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./graphics/Labeler.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Labeler.js");
/* harmony import */ var _i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./i3s/enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _i3s_Highlights_js__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./i3s/Highlights.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js");
/* harmony import */ var _i3s_I3SAsyncElevationUpdater_js__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./i3s/I3SAsyncElevationUpdater.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js");
/* harmony import */ var _i3s_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./i3s/I3SBinaryReader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js");
/* harmony import */ var _i3s_I3SCrossfadeHelper_js__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./i3s/I3SCrossfadeHelper.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js");
/* harmony import */ var _i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./i3s/I3SGeometryUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js");
/* harmony import */ var _i3s_I3SIntersectionHandler_js__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./i3s/I3SIntersectionHandler.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js");
/* harmony import */ var _i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./i3s/I3SMaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js");
/* harmony import */ var _i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./i3s/I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./i3s/I3SOverrides.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js");
/* harmony import */ var _i3s_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./i3s/I3SProjectionUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SProjectionUtil.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _i3s_IDBCache_js__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./i3s/IDBCache.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js");
/* harmony import */ var _i3s_IDBMockCache_js__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./i3s/IDBMockCache.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js");
/* harmony import */ var _i3s_LayerElevationProvider_js__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./i3s/LayerElevationProvider.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/LayerElevationProvider.js");
/* harmony import */ var _i3s_SymbologyInfo_js__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ./i3s/SymbologyInfo.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/SymbologyInfo.js");
/* harmony import */ var _support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ./support/attributeUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/attributeUtils.js");
/* harmony import */ var _support_highlightUtils_js__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ./support/highlightUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/highlightUtils.js");
/* harmony import */ var _support_makeScheduleFunction_js__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ./support/makeScheduleFunction.js */ "./node_modules/@arcgis/core/views/3d/layers/support/makeScheduleFunction.js");
/* harmony import */ var _support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ./support/symbolColorUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js");
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ../support/debugFlags.js */ "./node_modules/@arcgis/core/views/3d/support/debugFlags.js");
/* harmony import */ var _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ../support/ElevationRange.js */ "./node_modules/@arcgis/core/views/3d/support/ElevationRange.js");
/* harmony import */ var _support_extentUtils_js__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ../support/extentUtils.js */ "./node_modules/@arcgis/core/views/3d/support/extentUtils.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/* harmony import */ var _support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ../support/updatingProperties.js */ "./node_modules/@arcgis/core/views/3d/support/updatingProperties.js");
/* harmony import */ var _support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ../support/buffer/glUtil.js */ "./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js");
/* harmony import */ var _webgl_engine_collections_Component_ObjectParameters_js__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ../webgl-engine/collections/Component/ObjectParameters.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/ObjectParameters.js");
/* harmony import */ var _webgl_engine_collections_Component_SourceGeometry_js__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ../webgl-engine/collections/Component/SourceGeometry.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/SourceGeometry.js");
/* harmony import */ var _webgl_engine_collections_Component_Transform_js__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ../webgl-engine/collections/Component/Transform.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Transform.js");
/* harmony import */ var _webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js");
/* harmony import */ var _webgl_engine_lib_BasisUtil_js__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ../webgl-engine/lib/BasisUtil.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js");
/* harmony import */ var _webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ../webgl-engine/lib/edgeRendering/interfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/interfaces.js");
/* harmony import */ var _support_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ../../support/HighlightDefaults.js */ "./node_modules/@arcgis/core/views/support/HighlightDefaults.js");
/* harmony import */ var _support_TextureCompressionTracker_js__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ../../support/TextureCompressionTracker.js */ "./node_modules/@arcgis/core/views/support/TextureCompressionTracker.js");
/* harmony import */ var _webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ../../../webscene/support/AlphaCutoff.js */ "./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Tt=[1,1,1,1];class Dt extends _i3s_I3SCrossfadeHelper_js__WEBPACK_IMPORTED_MODULE_63__.NodeCrossfadeMetaData{constructor(e,t,i,s,r,o,a,n,l){super(),this.node=e,this.featureIds=t,this.objectHandle=i,this.cachedRendererVersion=s,this.attributeInfo=r,this.material=o,this.textures=a,this.anchorIds=n,this.anchors=l,this.cachedElevationAnchors=null,this.cachedEdgeMaterials=new Array,this.edgeMemoryUsage=0}get cachedMemory(){return this.node.memory}get featureExtents(){return this._featureExtents??=new Float64Array(6*this.featureIds.length).fill(Number.POSITIVE_INFINITY),this._featureExtents}}var Ft;!function(e){e[e.CastShadows=4]="CastShadows",e[e.Pickable=5]="Pickable"}(Ft||(Ft={}));const Vt=26,Nt=100*_core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_4__.ByteSizeUnit.MEGABYTES,Pt=t=>{let o=class extends t{constructor(){super(...arguments),this._applySSAO=!0,this._shadeNormals=!0,this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_26__.UpdatingHandles,this._nodeId2Meta=new Map,this._nodeId2MetaReloading=new Map,this._i3sWasmLoaded=!1,this._snappingSourcesTrackers=[],this._compressionTracker=new _support_TextureCompressionTracker_js__WEBPACK_IMPORTED_MODULE_92__.TextureCompressionTracker,this._hasLoadedPBRTextures=!1,this._asyncModuleLoading=0,this._addTasks=new Map,this._currentRenderer=null,this._rendererVersion=0,this._colorVariable=null,this._opacityVariable=null,this._rendererFields=null,this._symbologyFields=null,this._symbologyOverride=null,this._symbologyOverrideFields=null,this._symbolInfos=new Map,this._visibleGeometryChangedSchedulerHandle=null,this._hasComponentData=!1,this._hasVertexColors=!1,this._nodeColorOverride=null,this.updating=!0,this.holeFilling="auto",this._hasColors=!1,this._hasTextures=!1,this._hasData=!1,this.slicePlaneEnabled=!1,this._modifications=new Array,this.ignoresMemoryFactor=!1,this._layerUrl="",this._cacheKeySuffix=null,this._planetRadiusInGlobalMode=0,this._elevationTask=null,this._needFilterResolve=!1,this._filters=[],this._arcade=null,this._tmpAttributeOnlyGraphic=new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"],this._crossfadeHelper=new _i3s_I3SCrossfadeHelper_js__WEBPACK_IMPORTED_MODULE_63__.I3SCrossfadeHelper(this)}get lodCrossfadeoutDuration(){return 0}get lodCrossfadeinDuration(){return 0}get lodCrossfadeUncoveredDuration(){return 0}get layerViewUid(){return this.uid}get layerId(){return this.i3slayer&&this.i3slayer.id}get sublayerId(){return null}get _isIntegratedMesh(){return"integrated-mesh"===this.i3slayer.type}get contentVisible(){return!this.suspended&&this._controller?.rootNodeVisible&&this.fullOpacity>_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_93__.alphaCutoff}get legendEnabled(){return this.contentVisible&&!0===this.i3slayer?.legendEnabled}get updatingProgressValue(){return this._controller?.updatingProgress??0}get hasTexturesOrVertexColors(){return this._hasData?this._hasTextures||this._hasColors?"yes":"probably-not":"unknown"}get rendererTextureUsage(){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.rendererNeedsTextures)(this._currentRenderer)?this._usePBR||this._hasLoadedPBRTextures?_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureUsage.AllTexturesPBR:_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureUsage.AllTextures:this._usePBR||this._hasLoadedPBRTextures?_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureUsage.GeometryTexturesPBR:_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureUsage.GeometryTextures}get elevationOffset(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;return null!=e&&"absolute-height"===e.mode?(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_46__.getElevationOffset)(e,this.i3slayer.spatialReference):0}get elevationInfo(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null==e)return new Jt(_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute,0);const t=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_46__.getElevationOffset)(e,this.i3slayer.spatialReference);switch(e.mode){case"absolute-height":return new Jt(_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute,t);case"relative-to-ground":return new Jt(_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.RelativeToGround,t);case"on-the-ground":return new Jt(_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.OnTheGround,0);default:return new Jt(_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute,0)}}get supportedTextureEncodings(){return (0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_66__.getSupportedEncodings)(this.view.stage.renderView.capabilities)}get clientGeometry(){return this.i3sOverrides.geometryOverrides}get elevationRange(){const e=this._nodeId2Meta,t=new _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_80__.ElevationRange;for(const i of e.values()){if(null==i)continue;const{node:{serviceMbsInIndexSR:e}}=i,[s,r,o,a]=e;t.expandElevationRangeValues(o-a,o+a)}return t.elevationRangeValid?t:null}get fullExtent(){return this.i3slayer.fullExtent}initialize(){const e=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_5__["default"])("enable-feature:idb-mock-cache");this._idbCache=e?new _i3s_IDBMockCache_js__WEBPACK_IMPORTED_MODULE_72__.IDBMockCache(this.view,e):new _i3s_IDBCache_js__WEBPACK_IMPORTED_MODULE_71__.IDBCache("esri-scenelayer-cache","geometries"),this._preLoadBasis(),this.addResolvingPromise(this.i3slayer.indexInfo);const t=this.view.resourceController,i=t.memoryController;this.i3sOverrides=new _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_68__.I3SOverrides({view:this.view,layer:this.i3slayer,memoryController:i}),this._worker=new _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_54__.I3SMeshWorkerHandle((0,_support_makeScheduleFunction_js__WEBPACK_IMPORTED_MODULE_77__.makeScheduleFunction)(t)),this.addResolvingPromise(this._worker.promise);const s=this.i3slayer.store;this.addResolvingPromise(this._worker.setLegacySchema(this.uid,s.defaultGeometrySchema).catch(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.ignoreAbortErrors)),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.checkSceneLayerValid)(this.i3slayer),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.checkSceneLayerCompatibleWithView)(this.i3slayer,this.view),this._layerUrl=this.i3slayer.parsedUrl.path,this._controller=new _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_41__["default"]({layerView:this,worker:this._worker}),this._gpuMemoryEstimate=0,this._texMemoryEstimate=0,this._geoMemoryEstimate=0,this._stage=this.view.stage,this._collection=this._stage.renderView.componentObjectCollection,this.resetHighlights();const r=s.defaultGeometrySchema;if(this._isIntegratedMesh||!r)this._hasComponentData=!1;else{const e=r.featureAttributes;this._hasComponentData=!!(e&&e.faceRange&&e.id)}this._hasVertexColors=null!=(r?.vertexAttributes.color??null)&&!this.i3slayer.cachedDrawingInfo?.color;const o=this.view.resourceController.memoryController.newCache(`sl-${this.uid}`,(e=>this._deleteComponentObject(e)));this._memCache=o;const n=this._controller,d=this._nodeId2Meta,c=this._nodeId2MetaReloading,u=e=>{const t=n.index;if(!t)return;const i=t.rootNode;if(!i)return;const s=t=>{const i=t.index,s=d.get(i)||c.get(i);return e(t,s?.objectHandle??null)};t.traverse(i,s)};this._intersectionHandler=new _i3s_I3SIntersectionHandler_js__WEBPACK_IMPORTED_MODULE_65__.I3SIntersectionHandler({layerViewUid:this.layerViewUid,sublayerId:this.sublayerId,collection:this._collection,slicePlaneEnabled:this.slicePlaneEnabled,isGround:this._isIntegratedMesh,traverseNodeHierarchy:u}),this._elevationProvider=new _i3s_LayerElevationProvider_js__WEBPACK_IMPORTED_MODULE_73__.LayerElevationProvider({view:this.view,layerElevationSource:this,intersectionHandler:this._intersectionHandler}),this._hasLoadedPBRTextures=this._usePBR,this._updatingHandles.add((()=>this.view.clippingArea),(()=>this._clippingAreaChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this._updatingHandles.add((()=>this.fullOpacity),(e=>this._opacityChange(e))),this._updatingHandles.add((()=>this.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(e))),this._updatingHandles.add((()=>this.elevationOffset),((e,t)=>{this._reloadAll(t),this._controller.invalidateVisibilityObbs()})),this._updatingHandles.add((()=>this.elevationInfo),((e,t)=>this._elevationInfoChanged(e,t)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this._updatingHandles.add((()=>!this.suspended&&this.elevationInfo.mode!==_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute),((e,t)=>{e?this.addHandles(this.view.basemapTerrain.on("elevation-change",(({extent:e})=>this._ensureElevationTask().addExtent(e))),ti):t&&this.removeHandles(ti)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this._updatingHandles.add((()=>this._usePBR),(e=>this._updatePBR(e)));const _=()=>{this._reloadAll(),this.clearMemCache()};this._updatingHandles.add((()=>this.rendererTextureUsage),_),this._updatingHandles.add((()=>this.contentVisible),(e=>this._contentVisibleChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this._updatingHandles.add((()=>this.i3slayer.labelsVisible),(()=>this._labelingChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this._updatingHandles.add((()=>this.i3slayer.labelingInfo),(()=>this._labelingChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this._updatingHandles.add((()=>this._modifications),(()=>this._modificationsChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.watch)((()=>_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_79__.debugFlags.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;__webpack_require__.e(/*! import() */ "node_modules_arcgis_core_views_3d_layers_support_I3STreeDebugger_js").then(__webpack_require__.bind(__webpack_require__, /*! ./support/I3STreeDebugger.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3STreeDebugger.js")).then((({I3STreeDebugger:t})=>{!this._treeDebugger&&_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_79__.debugFlags.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_79__.debugFlags.I3S_TREE_SHOW_TILES||(this._treeDebugger=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._treeDebugger))}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.watch)((()=>_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_79__.debugFlags.I3S_SHOW_MODIFICATIONS),(()=>this._showModifications()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.initial)]),this._cacheKeySuffix=this._getCacheKeySuffix(),this._idbCache.init().catch((e=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn(`Failed to initialize IndexedDB cache: ${e}`)));const{view:f}=this,{viewingMode:p,renderCoordsHelper:y}=f;this._planetRadiusInGlobalMode="local"===p?0:y.referenceEllipsoid.radius}destroy(){this._clearAddTasks(),this._elevationTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._elevationTask),this.i3sOverrides=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this.i3sOverrides),this._elevationProvider&&(this._elevationProvider.objectsChanged(this.getVisibleObbs()),this.view.elevationProvider.unregister(this._elevationProvider),this._elevationProvider=null),this._intersectionHandler&&(this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler),this._intersectionHandler=null);const e=this._worker;e&&(e.destroyContext(this.uid).then((()=>e.destroy())),this._worker=null),this._removeAllNodeDataFromStage(),this._memCache=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._memCache),this._collection=null,this._stage=null,this._edgeView=null,this._labeler=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._labeler),this._treeDebugger=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._treeDebugger),this._controller=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._controller),this._highlights.destroy(),this._nodeId2Meta.clear(),this._nodeId2MetaReloading.clear(),this._crossfadeHelper=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._crossfadeHelper),this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null),this._updatingHandles=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._updatingHandles)}_memEstimateTextureAdded(e){const t=e.usedMemory;return this._gpuMemoryEstimate+=t,this._texMemoryEstimate+=t,t}_memEstimateTextureRemoved(e){if(null!=e){const t=e.usedMemory;this._gpuMemoryEstimate-=t,this._texMemoryEstimate-=t}}_memEstimateGeometryAdded(e){const t=this._collection.getObjectGPUMemoryUsage(e);return this._gpuMemoryEstimate+=t,this._geoMemoryEstimate+=t,t}_memEstimateGeometryRemoved(e){const t=this._collection.getObjectGPUMemoryUsage(e);this._gpuMemoryEstimate-=t,this._geoMemoryEstimate-=t}isNodeLoaded(e){return this._nodeId2Meta.has(e)}isNodeReloading(e){return this._nodeId2MetaReloading.has(e)}get usedMemory(){let e=null!=this._labeler?this._labeler.usedMemory:0;return this._nodeId2Meta.forEach((t=>e+=null!=t?t.node.memory:0)),this._nodeId2MetaReloading.forEach((t=>e+=null!=t?t.node.memory:0)),e}get unloadedMemory(){return(null!=this._controller?this._controller.unloadedMemoryEstimate:0)+(null!=this._labeler?this._labeler.unloadedMemoryEstimate:0)}_labelingChanged(){if(!((0,_graphics_Labeler_js__WEBPACK_IMPORTED_MODULE_58__.areLabelsVisible)(this.i3slayer)&&this._supportsLabeling))return void(null!=this._labeler&&(this._labeler.destroy(),this._labeler=null));if(null!=this._labeler)return;const e=new _I3SMeshViewLabeler_js__WEBPACK_IMPORTED_MODULE_52__["default"]({view:this.view,layer:this.i3slayer,collection:this._collection,overrides:this.i3sOverrides,layerViewUid:this.uid});this._nodeId2Meta.forEach((t=>null!=t&&this._addMetaToLabeler(e,t))),this._labeler=e}_loadAsyncModule(e){return++this._asyncModuleLoading,e.then((e=>(--this._asyncModuleLoading,e)),(e=>{throw--this._asyncModuleLoading,e}))}_modificationsChanged(){if(!this._i3sWasmLoaded&&this.hasModifications)return this._i3sWasmLoaded=(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_56__.initialize)().then((()=>{this._i3sWasmLoaded=!0,this._modificationsChanged(),this.notifyUpdate()})),void this.notifyUpdate();if(!0!==this._i3sWasmLoaded)return;const e=this.uid,t=this.i3slayer.spatialReference;this._worker.setModifications(e,this._layerClippingArea,this._modifications,t);const i=(0,_I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_54__.toWasmModification)(this._layerClippingArea,this._modifications,t);(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_56__.setModificationsSync)({context:e,modifications:i,isGeodetic:t.isGeographic}),this._controller.modificationsChanged();const s=this.hasModifications?new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_9__["default"]:null;this._nodeId2Meta.forEach(((e,t)=>{null==e?(this._nodeId2Meta.delete(t),this._controller.updateLoadStatus(t,!1)):e.node.hasModifications?(this._updateFeatureIdCounts(e,-1),this._nodeId2Meta.delete(t),this._nodeId2MetaReloading.set(t,e)):null!=s&&s.push(e.node)})),this.notifyChange("elevationRange"),null!=s&&this._nodeId2MetaReloading.forEach((e=>s.push(e.node))),null!=s&&s.length>0&&(this.updateNodeModificationStatus(s),s.forAll((e=>{if(e.imModificationImpact!==_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_67__.NodeIMModificationImpact.Culled){const t=this._nodeId2Meta.get(e.index);this._controller.invalidateGeometryVisibility(e.index),null!=t?(this._updateFeatureIdCounts(t,-1),this._nodeId2Meta.delete(e.index),this._nodeId2MetaReloading.set(e.index,t),this.notifyChange("elevationRange")):this._nodeId2Meta.has(e.index)&&(this._nodeId2Meta.delete(e.index),this._controller.updateLoadStatus(e.index,!1))}}))),this.clearMemCache(),this._controller.restartNodeLoading(),this._showModifications()}_showModifications(){if(null!=this._modificationGraphics&&(this.view.graphics.removeMany(this._modificationGraphics),this._modificationGraphics=null),!_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_79__.debugFlags.I3S_SHOW_MODIFICATIONS||0===this._modifications.length)return;const e={clip:[227,227,79,.8],mask:[227,139,79,.8],replace:[139,227,79,.8]},t={outline:{color:[255,255,255],width:1}};this._modificationGraphics=[];for(const s of this._modifications){const r=s.geometry;r.spatialReference=this.i3slayer.spatialReference;const o=new _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_50__["default"]({...t,color:e[s.type]});this._modificationGraphics.push(new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]({geometry:r,symbol:o}))}this.view.graphics.addMany(this._modificationGraphics)}_addMetaToLabeler(e,t){e.addNodeMeta(t,((e,t)=>this._createAttributes(e,t)))}_contentVisibleChanged(e){e?(this.view.elevationProvider.register(this._elevationContext,this._elevationProvider),this._stage.view.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler)):(this._removeAllNodeDataFromStage(),this.view.elevationProvider&&this.view.elevationProvider.unregister(this._elevationProvider),this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler))}getLoadedAttributes(e){const t=this._nodeId2Meta.get(e);if(null!=t?.attributeInfo)return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodeId2Meta.get(e);if(null!=t?.attributeInfo)return t.attributeInfo.attributeData}setAttributeData(e,t){const i=this._nodeId2Meta.get(e);null!=i?.attributeInfo&&(i.attributeInfo.attributeData=t,this._attributeValuesChanged(i))}async updateAttributes(e,t,i){const s=this._nodeId2Meta.get(e);null!=s&&(await this.i3sOverrides.applyAttributeOverrides(s.featureIds,t,i,this._controller.requiredAttributes),s.attributeInfo=t,this._controller.reschedule((()=>{this._nodeId2Meta.get(e)===s&&this._attributeValuesChanged(s)}),i).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn("Error while updating attribute values. Layer might not display correctly.",e)})))}_attributeValuesChanged(e){e.cachedRendererVersion=this._getInvalidRendererVersion(),e.appliedFilters=null,null!=this._labeler&&this._labeler.setNodeMetaAttributes(e,((e,t)=>this._createAttributes(e,t))),this._updateEngineObject(e)}clearMemCache(){null!=this._memCache&&this._memCache.clear(),this._addTasks.forEach((e=>e.allowMemCache=!1))}getVisibleNodes(){const e=new Array;return this._nodeId2Meta.forEach((t=>null!=t&&e.push(t.node))),e}getVisibleObbs(){const e=new Array;return this._nodeId2Meta.forEach((t=>t&&e.push(this._collection.getComponentObb(t.objectHandle)))),e}getLoadedNodeIndices(e){this._nodeId2Meta.forEach(((t,i)=>e.push(i))),this._nodeId2MetaReloading.forEach(((t,i)=>e.push(i)))}_preLoadBasis(){!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_5__["default"])("disable-feature:i3s-basis")&&0!==(this.supportedTextureEncodings&_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureEncoding.Basis)&&this.i3slayer.textureSetDefinitions?.some((e=>e.formats.some((e=>"basis"===e.format||"ktx2"===e.format))))&&(0,_webgl_engine_lib_BasisUtil_js__WEBPACK_IMPORTED_MODULE_89__.loadBasisTranscoder)()}_getVertexBufferLayout(e,t){return (0,_support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_84__.glLayout)((0,_webgl_engine_collections_Component_SourceGeometry_js__WEBPACK_IMPORTED_MODULE_86__.createVertexBufferLayout)(this._getGeometryParameters({hasTexture:Wt(e.params.material),hasNormals:t.normal,hasRegions:t.uvRegion})))}_getObjectIdField(){return this.i3slayer.objectIdField||_layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_40__.fallbackObjectIDAttribute}_getGlobalIdField(){return this.i3slayer.globalIdField}_findGraphicNodeAndIndex(e){const t=(0,_support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_75__.attributeLookup)(this.i3slayer.fieldsIndex,e.attributes,this._getObjectIdField());for(const i of this._nodeId2Meta.values()){const e=i?.featureIds.indexOf(t);if(null!=e&&e>=0)return{node:i.node,index:e}}return null}_getGraphicIndices(e,t){const i=this._nodeId2Meta.get(e.index);if(null==i)return[];const s=[],r=this._getObjectIdField(),o=this.i3slayer.fieldsIndex;for(const a of t){const e=(0,_support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_75__.attributeLookup)(o,a.attributes,r),t=i.featureIds.indexOf(e);-1!==t&&s.push(t)}return s}whenGraphicBounds(e){const t=this._findGraphicNodeAndIndex(e);if(!t)return Promise.reject();const i=this.getAABB(t.node.index,t.index);return null==i?Promise.reject():Promise.resolve({boundingBox:i,screenSpaceObjects:[]})}getAABBFromIntersectorTarget(e){return null==e.nodeIndex||null==e.componentIndex?null:this.getAABB(e.nodeIndex,e.componentIndex)}getAABB(e,t){const i=this._nodeId2Meta.get(e);if(null==i?.featureIds||t>=i.featureIds.length)return null;const s=i.objectHandle,r=(0,_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_64__.boundingBoxCornerPoints)(t,this._collection,s,(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_35__.newDoubleArray)(24),0),o=this.view.renderSpatialReference,a=this.view.spatialReference;return (0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_30__.projectBuffer)(r,o,0,r,a,0)?(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_33__.fromBuffer)(r):null}whenGraphicAttributes(e,t){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.whenGraphicAttributes)(this.i3slayer,e,this._getObjectIdField(),t,(()=>[...this._nodeId2Meta.values()].filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.isSome)))}getGraphicFromIntersectorTarget(e,t){if(null==e.nodeIndex||null==e.componentIndex)return null;const i=this._nodeId2Meta.get(e.nodeIndex);if(null==i?.featureIds||e.componentIndex>=i.featureIds.length)return null;const s=this._createLayerGraphic(this._createAttributes(e.componentIndex,i));return t.defer?(t.defer((async()=>(s.geometry=(await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_meshUtils_vertexSpaceConversion_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_MeshComponent_js-node_modules_arcgis_core_g-4bdb58"), __webpack_require__.e("vendors-node_modules_arcgis_core_geometry_Mesh_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_support_MeshTransform_js-node_modules_arcgis_core_views_3d_-41b06e")]).then(__webpack_require__.bind(__webpack_require__, /*! ./i3s/meshUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/meshUtils.js"))).createMesh({layerView:this,nodeIndex:e.nodeIndex,featureIndex:e.componentIndex}),s))),null):s}_getCacheKey(e){return`${this._layerUrl}/v${Vt}/${e}${this._cacheKeySuffix}`}_getCacheKeySuffix(){const e=this.view.renderSpatialReference;if(null==e)return si;if(e===(0,_geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_27__.getSphericalPCPF)(e))return ri;return this.i3slayer.spatialReference.equals(e)?ii:null!=e.wkid?`@${e.wkid}`:null}_getMemCacheKey(e,t=this.elevationOffset){return e+"#"+t}get _idbCacheEnabled(){return!this._controller.disableIDBCache&&!this.hasModifications&&0===this.elevationOffset&&null!=this._cacheKeySuffix}loadCachedGPUData(e){return null!=this._memCache?this._memCache.pop(this._getMemCacheKey(e)):null}deleteCachedGPUData(e){null!=e&&this._deleteComponentObject(e)}_cacheGPUData(e,t=this.elevationOffset){if(null==this._memCache)return void this._deleteComponentObject(e);const i=this._controller.indexDepth-e.node.level;this._memCache.put(this._getMemCacheKey(e.node.index,t),e,i)}loadMissingTextures(e,t,i,s){const r=e?.filter(((e,i)=>{if(0===(e.usage&this.rendererTextureUsage))return!1;if(null==t)return!0;const s=(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_66__.selectEncoding)(e.encodings,this.supportedTextureEncodings),r=t[i];return!!(null==r?.data||s&&r.encoding!==s.encoding)}))??[];return 0===r.length?Promise.resolve(!1):i(r,s).then((i=>{let s=0;for(let r=0;r<e.length;r++)s<i.length&&i[s].id===e[r].id&&(t[r]=i[s],s++);return!0}))}loadCachedNodeData(e,t,i){return this._idbCacheEnabled?this._idbCache.get(this._getCacheKey(e.id),t).then((s=>null==s?null:s.nodeVersion!==e.version?(this._idbCache.remove(this._getCacheKey(e.id)),null):(this.elevationInfo.mode===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute&&(e.geometryObbInRenderSR=_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_82__.Obb.fromData(s.geometryObbData)),this.loadMissingTextures(s.requiredTextures,s.textureData,i,t).then((i=>(i&&this._idbCache.initialized&&null!=s.textureData&&(s.byteSize=$t(s.transformedGeometry,s.textureData),s.textureData.every(Kt)&&this._indexedDbSizeCheck(e,s)&&this._idbCache.put(this._getCacheKey(e.id),s).catch((t=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`)))),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.throwIfAborted)(t),s)))))):Promise.resolve(null)}addNode(e,t,i){return zt(t)?null==t.geometryBuffer?(this._addNodeMeta(e.index,null),Promise.resolve()):this._addData(e,t.attributeDataInfo,(()=>this._transformNode(e,t,i).then((s=>this._safeReschedule((()=>{if(null==s)return e.hasModifications=!1,this._addCachedNodeData(e,null,i);e.hasModifications=s.transformedGeometry.hasModifications;const{obb:r,componentOffsets:o,featureIds:n,anchorIds:l,anchors:d,transformedGeometry:h,globalTrafo:c}=s,u=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.i)(Zt,r.center.x,r.center.y,r.center.z);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.t)(u,u,c);const _=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_82__.Obb(u,[r.extents.x,r.extents.y,r.extents.z],(0,_core_libs_gl_matrix_2_factories_quatf64_js__WEBPACK_IMPORTED_MODULE_21__.fromValues)(r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w));this.elevationInfo.mode===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute&&(e.geometryObbInRenderSR=_),t.geometryData.componentOffsets=o,n&&(t.geometryData.featureIds=Array.from(n)),t.geometryData.anchorIds=l,t.geometryData.anchors=d;const m={nodeVersion:e.version,geometryData:t.geometryData,requiredTextures:t.requiredTextures,textureData:t.textureData,transformedGeometry:h,globalTrafo:c,geometryObbData:_.data,byteSize:$t(h,t.textureData)};if(this._idbCacheEnabled&&this._idbCache.initialized&&this._indexedDbSizeCheck(e,m)){const t=null!=m.textureData?m.textureData.map((e=>Kt(e)?e:null)):null;this._idbCache.put(this._getCacheKey(e.id),{...m,textureData:t}).catch((t=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`)))}return this._addCachedNodeData(e,m,i)}),i))))):Promise.reject()}getElevationRange(e){const t=new _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_80__.ElevationRange,i=this._controller,{index:s}=i;if(!s)return t;const{rootNode:r}=s;if(!r)return t;const o=this._nodeId2Meta,a=e[3],n=i.viewportQueries,l=this._planetRadiusInGlobalMode,{view:d}=this,{renderCoordsHelper:h}=d,c=h.referenceEllipsoid.radius,u=this._collection,_=i=>{const{childrenLoaded:s}=i;if(0===s)return!1;const r=n.getAndUpdateVisibilityObbInRenderSR(i);let d=null,_=-1;if(r){if(_=r.radius,!r.intersectSphereWithMBS(e,_))return!1}else d=n.getServiceMbsInRenderSR(i),d&&(_=d[3]);if(_>=0&&a>=1*_)return null!=r?ni(t,r,l):null!=d&&d[3]>=0&&li(t,d,l),!1;const m=ai;if(m.elevationRangeMin=1/0,m.elevationRangeMax=-1/0,(null!=r||null!=d)&&(null!=r?ni(m,r,l):null!=d&&li(m,d,l),m.elevationRangeMin>=t.elevationRangeMin&&m.elevationRangeMax<=t.elevationRangeMax))return!1;const g=o.get(i.index);if(g){const{geometryObbInRenderSR:s}=i;if(!s||s.intersectSphereWithMBS(e)){if(s){if(a>0*s.radius)return ni(t,s,l),!1}const{objectHandle:e}=g,i=u.getObjectTransform(e),r=h.getAltitude(i.position);u.expandRangeWithComponentObjectElevationRange(e,r,c,t)}}return s-(g?1:0)>0};return s.traverse(r,_),t}computeVisibilityObb(e){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.computeVisibilityObb)(e,this.view.renderSpatialReference,this._controller.crsIndex,this.i3slayer.spatialReference,this.elevationOffset,this._modifications,this.view.renderCoordsHelper.sphericalPCPF)}_transformNode(e,t,i){const s=t.geometryData.geometries??[],r=new Array(s.length);for(let f=0;f<s.length;++f)r[f]=this._getVertexBufferLayout(s[f],t.geometryDescriptor);const o=this.i3slayer.normalReferenceFrame,a=t.normalReferenceFrame??o??"none",n=e.serviceMbsInIndexSR,l=this.elevationOffset,d=this._controller.crsIndex,h=this._controller.crsVertex,c=this.view.renderSpatialReference,u=(0,_i3s_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_69__.computeGlobalTransformation)(n,l,a,d,c),_=(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_31__.getProjectorName)(d,h),m=(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_31__.getProjectorName)(h,c);if(null==_||null==m)return Promise.resolve(null);const g={context:this.uid,geometryBuffer:t.geometryBuffer,geometryData:t.geometryData,geometryDescriptor:t.geometryDescriptor,layouts:r,globalTrafo:u,mbs:n,obbData:e.serviceObbInIndexSR?.data,elevationOffset:l,needNormals:this._controller.isMeshPyramid,normalReferenceFrame:a,indexToVertexProjector:_,vertexToRenderProjector:m};return this._worker.invoke(g,i)}get _supportsNodeCrossFading(){return!this.view?.stage?.renderer.shadowsEnabled}get nodeCrossfadingEnabled(){return this._supportsNodeCrossFading&&(this.lodCrossfadeinDuration>0||this.lodCrossfadeoutDuration>0||this.lodCrossfadeUncoveredDuration>0)}get nodeFadeoutEnabled(){return this._supportsNodeCrossFading&&this.lodCrossfadeoutDuration>0}_setNewNodeOpacity(e){const t=this.nodeCrossfadingEnabled?0:this.fullOpacity;this._setNodeOpacity(e,t)}addCachedGPUData(e,t,i){if(this.elevationInfo.mode===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute&&(e.geometryObbInRenderSR=this._collection.getComponentObb(t.objectHandle).clone()),!this._controller.isGeometryVisible(e))return void this._cacheGPUData(t);null!=this._labeler&&this._addMetaToLabeler(this._labeler,t);const s=e.index;this._addNodeMeta(s,t),this.updateNodeState(s,i),this._collection.setObjectVisibility(t.objectHandle,!0),this._updateMaterial(t),this._setNewNodeOpacity(t),this.elevationInfo.mode!==_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute&&this._ensureElevationTask().schedule(s),this._updateEngineObject(t),this._highlights.objectCreated(t),null!=this._treeDebugger&&this._treeDebugger.update()}addCachedNodeData(e,t,i,s){return this._addData(e,i,(()=>this._addCachedNodeData(e,t,s)))}async deleteCachedNodeData(e){if(this._idbCacheEnabled)return this._idbCache.remove(this._getCacheKey(e))}async _addCachedNodeData(e,t,i){if(!this.contentVisible||!this._controller.isGeometryVisible(e))return void this._removeNodeStageData(e.index,this.elevationOffset,this._nodeId2MetaReloading);if(null==t)return void this._addNodeMeta(e.index,null);const s=this._addTasks.get(e.index),{geometryData:r,transformedGeometry:o,globalTrafo:n}=t;await this.i3sOverrides.applyAttributeOverrides(r.featureIds,s.attributeInfo,i,this._controller.requiredAttributes);const l=null!=t.textureData?t.textureData.filter((e=>null!=e&&0!==(e.usage&this.rendererTextureUsage))):[];!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_5__["default"])("disable-feature:i3s-basis")&&l.some((e=>null!=e&&(e.encoding===_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureEncoding.Basis||e.encoding===_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureEncoding.KTX2)))&&await (0,_webgl_engine_lib_BasisUtil_js__WEBPACK_IMPORTED_MODULE_89__.loadBasisTranscoder)(),e.memory=0;const{componentOffsets:d,geometries:h,featureIds:c,anchorIds:u,anchors:_}=r,m=this._collection,g=h[0],{layout:f,indices:p,interleavedVertexData:y,positionData:b,hasColors:I}=o,{material:O,geometryParameters:j}=this._materialParameters(g,f),S=d||new Uint32Array([0,p?p.length:y.byteLength/f[0].stride]),D={vertices:{data:y,count:y.byteLength/f[0].stride,layoutParameters:j},positionData:{positions:(0,_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_36__.compactFloatArray)(b.data),indices:(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_37__.compactIndices)(b.indices)},indices:p,componentOffsets:S},F=g.transformation?(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_20__.clone)(g.transformation):(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_20__.create)();(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_19__.multiply)(F,n,F);const V=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_19__.getTranslation)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__.create)(),F),N=(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_17__.fromMat4)((0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_18__.create)(),F),H=this.view.renderSpatialReference,k=this.view.basemapTerrain.spatialReference,L=_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_82__.Obb.fromData(t.geometryObbData).center,B=[1,1,1];(0,_geometry_projection_localLinearScaleFactors_js__WEBPACK_IMPORTED_MODULE_28__.localLinearScaleFactors)(L,H,B,k)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).errorOnce("Unsupported coordinate system for IM overlay");const q=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__.create)();(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__.projectVectorToVector)(L,H,q,k);const W=(0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_18__.create)();(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_17__.invert)(W,N);const K=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__.create)();(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.o)(K,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.a)(K,L,V),W);const $=q[0]-K[0]*B[0],Q=q[1]-K[1]*B[1],X=m.createObject(new _webgl_engine_collections_Component_ObjectParameters_js__WEBPACK_IMPORTED_MODULE_85__.ObjectParameters((0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_25__.fromValues)($,Q,B[0],B[1]),new _webgl_engine_collections_Component_Transform_js__WEBPACK_IMPORTED_MODULE_87__.Transform(V,N),_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_82__.Obb.fromData(t.geometryObbData),D)),Y=j.textureCoordinates===_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_88__.TextureCoordinateType.Atlas,{textures:J,texturePromise:te}=this._initMaterialAndTextures(X,O,l,Y,e);e.memory+=this._memEstimateGeometryAdded(X),e.memory+=J.reduce(((e,t)=>e+(null!=t?this._memEstimateTextureAdded(t):0)),0);const ie=!!O.hasParametersFromSource,se="blend"!==O.alphaMode&&O.metallicRoughness.baseColorFactor[3]>=1,re=new Dt(e,c,X,this._getInvalidRendererVersion(),s.attributeInfo,{hasParametersFromSource:ie,isOpaque:se},J,u,_);s.meta=re,this._hasTextures||=t.requiredTextures?.some((({usage:e})=>0!==(e&_i3s_enums_js__WEBPACK_IMPORTED_MODULE_59__.TextureUsage.ColorTextures)))||!!e.resources.texture,this._hasData=!0,this._hasColors||=I,this.notifyChange("hasTexturesOrVertexColors");const oe=this.slicePlaneEnabled;return Promise.all([this._addOrUpdateEdgeRendering(re),te]).then((([t,s])=>(this._addTasks.has(e.index)&&t?.updateObjectVisibility(re.objectHandle,!1).catch((e=>this._logEdgeViewError(e,this.i3slayer.title))),this._safeReschedule((()=>{const i=this._addTasks.get(e.index);if(!i)return;if(this._addNodeMeta(e.index,re),i.meta=null,!this.contentVisible)return void this._removeNodeStageData(e.index,this.elevationOffset);m.setObjectVisibility(X,!0),t?.updateObjectVisibility(re.objectHandle,!0).catch((e=>this._logEdgeViewError(e,this.i3slayer.title))),re.attributeInfo=i.attributeInfo;const s=re.cachedRendererVersion!==this._rendererVersion,r=oe!==this.slicePlaneEnabled;this._updateElevationOffsets(re);const o=re.elevationOffsets;this._updateComponentData(re);const a=this._applyFiltersToNode(re);(s||null!=t&&(r||a||o))&&this._addOrUpdateEdgeRendering(re),null!=this._labeler&&this._addMetaToLabeler(this._labeler,re),this._visibleGeometryChanged(re,Ht.ADD),this._highlights.objectCreated(re),this._updateMaterial(re),this._setNewNodeOpacity(re),null!=this._treeDebugger&&this._treeDebugger.update()}),i)))).catch((e=>{const{meta:t,allowMemCache:i}=s;throw s.meta=null,t&&i?this._cacheGPUData(t):t&&this._deleteComponentObject(t),e}))}_addNodeMeta(e,t){if(this._removeNodeStageData(e,this.elevationOffset,this._nodeId2MetaReloading),this._nodeId2Meta.has(e)){_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).error("Removing duplicated node");const t=this._nodeId2Meta.get(e);t&&(this._deleteComponentObject(t),this._updateFeatureIdCounts(t,-1))}else this._controller.updateLoadStatus(e,!0);t&&(t.lodCrossfadeProgress=null,this.nodeCrossfadingEnabled&&Yt(t.cachedEdgeMaterials,0),this._updateFeatureIdCounts(t,1)),this._nodeId2Meta.set(e,t),this.notifyChange("elevationRange")}_updateElevationOffsets(e){const t=this.view.renderSpatialReference,i=this._controller.crsIndex,s=this.elevationInfo,r=this.view.basemapTerrain,o=r.spatialReference,a=s.mode;if(null==t||null==o||a===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute)return void(e.elevationOffsets=null);const n=this._collection.getObjectTransform(e.objectHandle);e.elevationOffsets=e.elevationOffsets??[];const l=Zt,d=ei,h=a===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.OnTheGround,c=this.view.renderCoordsHelper,u=e.featureIds.length,_=(()=>{if(e.cachedElevationAnchors)return e.cachedElevationAnchors;const s=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_35__.newDoubleArray)(3*u);e.cachedElevationAnchors=s;for(let r=0;r<u;r++){const a=3*r,h=e.anchorIds?.indexOf(r)??-1;e.anchors&&h>=0?((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.i)(l,e.anchors[3*h],e.anchors[3*h+1],e.anchors[3*h+2]),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.f)(l,l,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_38__.a)(e.node.serviceMbsInIndexSR)),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__.projectVectorToVector)(l,i,l,o),s[a]=l[0],s[a+1]=l[1],s[a+2]=c.getAltitude(l)):(this._collection.getComponentAabb(e.objectHandle,r,d,!0),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.i)(l,(d[0]+d[3])/2,(d[1]+d[4])/2,d[2]),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.o)(l,l,n.rotationScale),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.f)(l,l,n.position),s[a+2]=c.getAltitude(l),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__.projectVectorToVector)(l,t,l,o),s[a]=l[0],s[a+1]=l[1])}return s})(),m=s.offset,g=e.elevationOffsets,f=(e,t)=>{const i=h?_[3*e+2]:0;g[e]=m+(t??0)-i};r.getElevations(_,u,f)}_ensureElevationTask(){return null!=this._elevationTask||(this._elevationTask=new _i3s_I3SAsyncElevationUpdater_js__WEBPACK_IMPORTED_MODULE_61__.I3SAsyncElevationUpdater(this.view.resourceController.scheduler,(e=>this._controller.updateElevationChanged(e,this.view.basemapTerrain.spatialReference)?.filterInPlace((e=>null!=this._nodeId2Meta.get(e)))),(e=>this._nodeElevationAlignmentChanged(this._nodeId2Meta.get(e))),(()=>this.elevationInfo?.mode))),this._elevationTask}_elevationInfoChanged(e,t){const i=e.mode!==_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute,s=!!t&&t!==e&&t.mode!==_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute;this._intersectionHandler.updateElevationAlignState(i,this.view.state.viewingMode),i&&!s&&this._controller.removeAllGeometryObbs(),this._nodeId2Meta.forEach((e=>this._nodeElevationAlignmentChanged(e)))}_nodeElevationAlignmentChanged(e){null!=e&&(this._updateElevationOffsets(e),this._updateComponentData(e),this._updateEdgeRendering(e),null!=this._labeler&&this._labeler.updateLabelPositions(e),this._updateSnappingSources(e,Ht.UPDATE),this._elevationProvider.objectChanged(this._collection.getComponentObb(e.objectHandle)))}_safeReschedule(e,t){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.throwIfAborted)(t),this._controller.reschedule(e,t)}_materialParameters(e,t){const i=null!=e.params.material?e.params.material:(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_66__.defaultMaterial)(),s=t.some((e=>"uvRegion"===e.name)),r=t.some((e=>"normalCompressed"===e.name)),o=Wt(i);return{geometryParameters:this._getGeometryParameters({hasTexture:o,hasNormals:r,hasRegions:s}),material:i}}_initMaterialAndTextures(e,t,i,s,r){const o=this._stage.renderView,a=e=>{this._gpuMemoryEstimate-=e,this._texMemoryEstimate-=e,r.memory-=e},n=i.map((e=>(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_66__.createTexture)(e,t,s,o,this._compressionTracker,a)));this._stage.addTextures(n);let l=null;return this._collection.updateMaterial(e,(e=>{l=(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_66__.configureMaterial)(e,t,n,i,this.view.stage.renderView.textures,{rendererTextureUsage:this.rendererTextureUsage,usePBR:this._usePBR,isIntegratedMesh:this._isIntegratedMesh,slicePlaneEnabled:this.slicePlaneEnabled,viewSpatialReference:this.view.spatialReference}),this._updateMaterialOverlay(e)})),{textures:n,texturePromise:l}}_getGeometryParameters(e){return new _webgl_engine_collections_Component_SourceGeometry_js__WEBPACK_IMPORTED_MODULE_86__.GeometryParameters(this._hasVertexColors,e.hasTexture?e.hasRegions?_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_88__.TextureCoordinateType.Atlas:_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_88__.TextureCoordinateType.Default:_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_88__.TextureCoordinateType.None,e.hasNormals,this._shadeNormals,this._applySSAO)}_addData(e,t,i){let s=this._addTasks.get(e.index);if(s)s.attributeInfo=t;else{const r=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.createResolver)();s=new Xt(t,null,r.promise),this._addTasks.set(e.index,s),i().then(r.resolve,r.reject).then((()=>this._addTasks.delete(e.index))).catch((t=>{throw this._addTasks.delete(e.index),t}))}return s.promise}_clearAddTasks(){this._addTasks.forEach((e=>{null!=e.meta&&(this._cacheGPUData(e.meta),e.meta=null)})),this._addTasks.clear()}_clippingAreaChanged(){const e=this.view.renderSpatialReference,t=this.i3slayer.spatialReference,i=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_34__.create)();this._renderClippingArea=(0,_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_81__.toBoundingRect)(this.view.clippingArea,i,e)?i:null;const s=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_34__.create)();this._layerClippingArea=(0,_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_81__.toBoundingRect)(this.view.clippingArea,s,t)?s:null,this._filterChange(),this._controller&&this._controller.updateClippingArea(this.view.clippingArea),this._isIntegratedMesh&&this._modificationsChanged()}get hasGeometryFilter(){return!1}_geometryFilterChange(){const e=this.hasGeometryFilter;this._controller.geometryFilterChanged(e),this._applyFilters(e),this._assertFeatureIdNodeCounts(e)}_assertFeatureIdNodeCounts(e){e&&!this._featureIdCounts?(this._featureIdCounts=_i(this._nodeId2Meta.values()),this._filteredIdCounts=_i(this._nodeId2Meta.values(),ui.Filtered),this._weaklyRemovedIdCounts=_i(this._nodeId2Meta.values(),ui.WeaklyRemoved),this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_11__.watch)((()=>this._controller.updating),(e=>{!e&&this._needFilterResolve&&(this.multiGeometryFilterResolve(),this._needFilterResolve=!1,this.notifyUpdate())}),{sync:!0}),"updateFinished")):!e&&this._featureIdCounts&&(this._featureIdCounts=null,this._filteredIdCounts=null,this._weaklyRemovedIdCounts=null,this._mismatchShow=null,this._mismatchHide=null,this.removeHandles("updateFinished"),this._needFilterResolve=!1,this.notifyUpdate())}_updateFeatureIdCounts(e,t){this._featureIdCounts&&(this._needFilterResolve=!0,ci(this._featureIdCounts,e.featureIds,t),ci(this._filteredIdCounts,e.filteredIds,t),ci(this._weaklyRemovedIdCounts,e.weaklyRemovedIds,t))}_updateFilteredIdCounts(e,t,i){this._filteredIdCounts&&(this._needFilterResolve=!0,ci(this._filteredIdCounts,t,-1),ci(this._filteredIdCounts,e.filteredIds,1),ci(this._weaklyRemovedIdCounts,i,-1),ci(this._weaklyRemovedIdCounts,e.weaklyRemovedIds,1))}_checkFeatureIdNodeCountInvariant(){const e=null!=this._featureIdCounts;if(this.hasGeometryFilter!==e&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).error("checkFeatureIdNodeCountInvariant()","LayerView should have feature id node counts if and only if it has a geometry filter",{layerView:this,hasNodeCounts:e}),!this._featureIdCounts||!this._filteredIdCounts)return;const t=_i(this._nodeId2Meta.values());(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_7__.equals)(this._featureIdCounts,t)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).error("checkFeatureIdNodeCountInvariant()","Incorrect _featureIdCounts",{layerView:this,counts:this._featureIdCounts,expected:t});const i=_i(this._nodeId2Meta.values(),ui.Filtered);(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_7__.equals)(this._filteredIdCounts,i)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).error("checkFeatureIdNodeCountInvariant()","Incorrect _filteredIdCounts",{layerView:this,counts:this._filteredIdCounts,expected:i});const s=_i(this._nodeId2Meta.values(),ui.WeaklyRemoved);(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_7__.equals)(this._weaklyRemovedIdCounts,s)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).error("checkFeatureIdNodeCountInvariant()","Incorrect _weaklyRemovedIdCounts",{layerView:this,counts:this._weaklyRemovedIdCounts,expected:i})}multiGeometryFilterResolve(){if(!this._featureIdCounts||!this._filteredIdCounts)return;let e=null,t=null;for(const[i,s]of this._filteredIdCounts){const r=this._featureIdCounts.get(i);if(r!==s){s+(this._weaklyRemovedIdCounts?.get(i)??0)===r?(e??=new Set,e.add(i)):(t??=new Set,t.add(i))}}(0,_core_SetUtils_js__WEBPACK_IMPORTED_MODULE_13__.equals)(e,this._mismatchShow)&&(0,_core_SetUtils_js__WEBPACK_IMPORTED_MODULE_13__.equals)(t,this._mismatchHide)||(this._mismatchShow=e,this._mismatchHide=t,this._nodeId2Meta.forEach((e=>{if(!e?.filteredIds)return;const t=hi(e,this._mismatchShow,this._mismatchHide);this._collection.setAllComponentVisibilities(e.objectHandle,t),this._visibleGeometryChanged(e,Ht.UPDATE)})))}_filterChange(){this._applyFilters(this.hasGeometryFilter)}_applyFilters(e){this._filters=this.getFilters(),e?this._controller&&this._controller.requestUpdate():this._nodeId2Meta.forEach((e=>{e&&this._applyFiltersToNode(e)&&(this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,Ht.UPDATE))}))}getFilters(){const e=[],t=this._renderClippingArea;return null!=t&&e.push(((e,i)=>this._boundingRectFilter(e,i,t))),e}addSqlFilter(e,t,i){if(null!=t){const s=t.fieldNames;e.push(((e,r)=>this._sqlFilter(e,r,t,s,i)))}}_sqlFilter(e,t,i,s,r){const o={},a=this._createLayerGraphic(o),n=this.i3slayer.objectIdField,l=t.featureIds,d=t.attributeInfo?.attributeData;s.every((e=>e===n||null!=d?.[e]))&&(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.filterInPlace)(e,l,(e=>{o[n]=l[e];for(const i of s)i!==n&&(o[i]=d?(0,_i3s_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_62__.getCachedAttributeValue)(d[i],e):null);try{return i.testFeature(a)}catch(t){return r(t),!1}}))}_boundingRectNodeTest(e,t){return (0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_29__.projectBoundingSphere)(e.node.serviceMbsInIndexSR,this._controller.crsIndex,qt,this.view.renderSpatialReference),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.intersectBoundingRectWithMbs)(t,qt)}_boundingRectFeatureTest(e,t,i){return this._collection.getComponentAabb(e.objectHandle,t,Ut),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_33__.toRect)(Ut,kt),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_34__.intersects)(i,kt)}_boundingRectFilter(e,t,i){const s=this._collection,r=this._boundingRectNodeTest(t,i);if(r===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.MbsIntersectResult.INSIDE)return;if(r===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.MbsIntersectResult.OUTSIDE)return void(e.length=0);const o=s.getComponentCount(t.objectHandle);if(o.invisible+o.visible!==t.featureIds.length)return;const a=this._transformClippingArea(Lt,i,t.objectHandle);(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.filterInPlace)(e,t.featureIds,(e=>this._boundingRectFeatureTest(t,e,a)))}_transformClippingArea(e,t,i){const s=this._collection.getObjectTransform(i),r=s.position,o=s.rotationScale;return e[0]=(t[0]-r[0])/o[0],e[1]=(t[1]-r[1])/o[4],e[2]=(t[2]-r[0])/o[0],e[3]=(t[3]-r[1])/o[4],e}async _addOrUpdateEdgeRendering(e,t=!0){const i=e.objectHandle,{hasEdges:s,perFeatureEdgeMaterials:r}=this._getFilteredEdgeMaterials(e);s&&!this._edgeView&&(this._edgeView=await this._stage.renderer.loadEdgeView());const o=this._edgeView;if(!o)return null;const a=o.hasObject(i);if(s){if(a){if(this.nodeCrossfadingEnabled){Yt(r,this.getNodeOpacity(e))}return o.updateAllComponentMaterials(i,r,this.slicePlaneEnabled,t).catch((e=>this._logEdgeViewError(e,this.i3slayer.title))),o.updateObjectVisibility(i,!0).catch((e=>this._logEdgeViewError(e,this.i3slayer.title))),o.updateAllVerticalOffsets(i,e.elevationOffsets).catch((e=>this._logEdgeViewError(e,this.i3slayer.title))),o}const s=await this._collection.addEdges(i,o,r,this.slicePlaneEnabled,e.elevationOffsets);return e.edgeMemoryUsage=s,e.node.memory+=s,o}return a&&(e.node.memory-=e.edgeMemoryUsage,e.edgeMemoryUsage=0,o.removeObject(i)),null}_applyFiltersToNode(e){const{filteredIds:t,weaklyRemovedIds:i}=e,s=this._applyFiltersToNodeComponents(e);return this._updateFilteredIdCounts(e,t,i),s&&this._labeler?.applyFilterChange(e),s}_applyFiltersToNodeComponents(e){const t=this._collection,i=t.getComponentCount(e.objectHandle),s=null!=e.filteredIds,r=0===i.invisible;if(t.setAllComponentVisibilities(e.objectHandle,"all"),0===this._filters.length)return e.filteredIds=null,!r;if(null!=e.filteredIds&&e.appliedFilters===this._filters||(e.weaklyRemovedIds=null,e.filteredIds=di(e,this._filters),e.appliedFilters=this._filters),s&&e.filteredIds===e.featureIds&&(!this._mismatchHide||e.filteredIds.every((e=>!this._mismatchHide?.has(e)))))return!r;const o=hi(e,this._mismatchShow,this._mismatchHide);return t.setAllComponentVisibilities(e.objectHandle,o),!0}_removeAllNodeDataFromStage(e=this.elevationOffset){this._nodeId2Meta.forEach(((t,i)=>this._removeNodeStageData(i,e))),this._nodeId2MetaReloading.forEach(((t,i)=>this._removeNodeStageData(i,e,this._nodeId2MetaReloading))),this._elevationTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._elevationTask)}removeNode(e){const t=this.elevationOffset;this._removeNodeStageData(e,t),this._removeNodeStageData(e,t,this._nodeId2MetaReloading),null!=this._elevationTask&&this._elevationTask.remove(e)}_removeNodeStageData(e,t,i=this._nodeId2Meta){i.has(e)&&this._controller.updateLoadStatus(e,!1);const s=i.get(e);null!=s?(this._collection.setObjectVisibility(s.objectHandle,!1),null!=this._edgeView&&this._edgeView.hasObject(s.objectHandle)&&this._edgeView.updateObjectVisibility(s.objectHandle,!1).catch((e=>this._logEdgeViewError(e,this.i3slayer.title))),this._visibleGeometryChanged(s,Ht.REMOVE),null!=this._labeler&&this._labeler.removeNodeMeta(s),i.delete(e),this._highlights.objectDeleted(s),i===this._nodeId2Meta?(this._updateFeatureIdCounts(s,-1),this._cacheGPUData(s,t),this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopNodeFading(s)):this._deleteComponentObject(s),null!=this._treeDebugger&&this._treeDebugger.update()):i.delete(e)}_deleteComponentObject(e){if(null!=this._edgeView&&this._edgeView.removeObject(e.objectHandle),this._memEstimateGeometryRemoved(e.objectHandle),this._collection.destroyObject(e.objectHandle),e.textures)for(const t of e.textures)this._memEstimateTextureRemoved(t),this._stage.removeTexture(t)}updateNodeState(e,t){const i=this._nodeId2Meta.get(e);null!=i&&this._collection.updateMaterial(i.objectHandle,(e=>e.polygonOffsetEnabled=t===_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_67__.NodeState.Hole))}updateNodeIndex(e,t){if(this._nodeId2Meta.has(e)){const i=this._nodeId2Meta.get(e);this._nodeId2Meta.delete(e),this._nodeId2Meta.set(t,i),this.notifyChange("elevationRange")}const i=this._nodeId2MetaReloading.get(e);i&&(this._nodeId2MetaReloading.delete(e),this._nodeId2MetaReloading.set(t,i))}_invalidateAllSymbols(){this._rendererVersion=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.addWraparound)(this._rendererVersion,1),this._controller?.requestUpdate()}_getInvalidRendererVersion(){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.addWraparound)(this._rendererVersion,-1)}async _rendererChange(e){if(this._currentRenderer=e,this.notifyChange("rendererTextureUsage"),this._rendererVersion=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.addWraparound)(this._rendererVersion,1),this._rendererFields=null,this._colorVariable=null,this._opacityVariable=null,this._invalidateAllSymbols(),e&&(this._rendererFields=await e.getRequiredFields(this.i3slayer.fieldsIndex)),this._updateSymbologyFields(),!this._arcade&&e&&"arcadeRequired"in e&&e.arcadeRequired&&(this._arcade=await (0,_support_loadArcade_js__WEBPACK_IMPORTED_MODULE_48__.loadArcade)()),e&&"visualVariables"in e&&e.visualVariables)for(const t of e.visualVariables)"color"===t.type?this._colorVariable=t:"opacity"===t.type?this._opacityVariable=t:_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);if(e)for(const t of e.symbols)"mesh-3d"!==t.type&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);this._controller&&this._controller.requestUpdate()}_getCachedEdgeMaterials(e){return this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e),e.cachedEdgeMaterials}_getComponentParameters(e){this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e);const t=e.cachedSymbology;return(i,s)=>{const r=5*i;(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_24__.s)(s.externalColor,t[r]/255,t[r+1]/255,t[r+2]/255,t[r+3]/255);const o=this._stage.renderView.olidRenderHelper;if(o){const t=e.featureIds[i],r=this.sublayerId?`${this.layerViewUid}_${this.sublayerId}`:this.layerViewUid,a=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_45__.isBasemapLayerView)(this.view,this.uid);o.setUidToObjectAndLayerId(t,t,this.layerId,r,this.layerPopupEnabledAndHasTemplate&&!a,e.node.resources.attributes,i,this.sublayerId),s.objectAndLayerIdColor=o.getObjectAndLayerIdColor({graphicUid:t,layerViewUid:r})}s.externalColorMixMode=t[r+4]&(1<<Ft.CastShadows)-1,s.castShadows=!!(t[r+4]&1<<Ft.CastShadows),s.pickable=!!(t[r+4]&1<<Ft.Pickable),s.elevationOffset=e.elevationOffsets?.[i]??0}}_getSymbolInfo(e,t){const i=e?.getSymbol(t,{arcade:this._arcade});if(!(i instanceof _symbols_MeshSymbol3D_js__WEBPACK_IMPORTED_MODULE_49__["default"]))return null;const s=i.id;if(this._symbolInfos.has(s))return this._symbolInfos.get(s);const r=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.getSymbolInfo)(i);return this._symbolInfos.set(s,r),r}_setSymbologyOverride(e,t){this._symbologyOverride!==e&&(this._symbologyOverride=e,this._symbologyOverrideFields=t,this._invalidateAllSymbols(),this._updateSymbologyFields())}_updateSymbologyFields(){this._symbologyFields=null!=this._symbologyOverrideFields&&this._symbologyOverrideFields.length>0?null!=this._rendererFields&&this._rendererFields.length>0?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_42__.fixFields)(this.i3slayer.fieldsIndex,[...this._rendererFields,...this._symbologyOverrideFields]):this._symbologyOverrideFields:this._rendererFields}_updateCachedRendererData(e){if(e.cachedRendererVersion=this._rendererVersion,!this._hasComponentData)return;const t=this._tmpAttributeOnlyGraphic,i={};t.attributes=i;const s=this._currentRenderer,r=e.attributeInfo?.attributeData,o=e.featureIds?this.i3slayer.objectIdField:null,a=null!=r&&null!=this._symbologyFields&&this._symbologyFields.length>0;let n=null,l=null;if(a&&null!=this._symbologyFields){n=[],l=[];for(const e of this._symbologyFields){const t=r[e];t&&(n.push(e),l.push(t))}}e.cachedSymbology||(e.cachedSymbology=(0,_geometry_support_UByteArray_js__WEBPACK_IMPORTED_MODULE_39__.newUByteArray)(5*e.featureIds.length));const d=new _i3s_SymbologyInfo_js__WEBPACK_IMPORTED_MODULE_74__.SymbologyInfo,h=this.fullOpacity,c=this.nodeCrossfadingEnabled?this.getNodeOpacity(e):h;let u=null,_=_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_90__.Transparency.OPAQUE,m=_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.transparentEdgeMaterial,g=0;for(let f=0;f<e.featureIds.length;f++){if(null!=o&&(i[o]=e.featureIds[f]),a&&n)for(let e=0;e<n.length;e++)i[n[e]]=(0,_i3s_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_62__.getCachedAttributeValue)(l[e],f);const r=s?this._getSymbolInfo(s,t):null;let h,p;if(d.pickable=!0,s&&"visualVariables"in s){if(this._colorVariable){const e=(0,_renderers_visualVariables_support_visualVariableUtils_js__WEBPACK_IMPORTED_MODULE_44__.getColor)(this._colorVariable,t,{color:Bt,arcade:this._arcade});e&&(h=d.color,h[0]=e.r/255,h[1]=e.g/255,h[2]=e.b/255,h[3]=e.a??1,this._opacityVariable||null===e.a||(p=e.a))}this._opacityVariable&&(p=(0,_renderers_visualVariables_support_visualVariableUtils_js__WEBPACK_IMPORTED_MODULE_44__.getOpacity)(this._opacityVariable,t,{arcade:this._arcade}))}if(r?.material){const e=r.material;h=null==h||null==p?(0,_graphics_graphicUtils_js__WEBPACK_IMPORTED_MODULE_57__.overrideColor)(h,p,e.color,e.alpha,Tt,d.color):(0,_graphics_graphicUtils_js__WEBPACK_IMPORTED_MODULE_57__.overrideColor)(h,p,null,null,Tt,d.color)}if(h??=(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_24__.s)(d.color,1,1,1,1),d.colorMixMode=r?.material?.colorMixMode??_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_78__.ColorMixModeEnum.Multiply,d.edgeMaterial=r?.edgeMaterial,this._symbologyOverride?.(t,d),null!=this._nodeColorOverride&&(this._nodeColorOverride(e.node,h),d.colorMixMode=_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_78__.ColorMixModeEnum.Replace),d.pickable&&=h[3]>=_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_93__.alphaCutoff,d.castShadows=r?r.castShadows:d.pickable,null!=d.edgeMaterial){const t=h[3]>=1&&(e.material.isOpaque||d.colorMixMode===_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_78__.ColorMixModeEnum.Replace)?_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_90__.Transparency.OPAQUE:_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_90__.Transparency.TRANSPARENT;d.edgeMaterial===u&&t===_||(m={...d.edgeMaterial,opacity:c,objectTransparency:t},u=d.edgeMaterial,_=t),e.cachedEdgeMaterials[f]=m}else e.cachedEdgeMaterials[f]=_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.transparentEdgeMaterial;e.cachedSymbology[g++]=Math.round(255*h[0]),e.cachedSymbology[g++]=Math.round(255*h[1]),e.cachedSymbology[g++]=Math.round(255*h[2]),e.cachedSymbology[g++]=Math.round(255*h[3]),e.cachedSymbology[g++]=d.colorMixMode|+d.castShadows<<Ft.CastShadows|+d.pickable<<Ft.Pickable}}_getFilteredEdgeMaterials(e){const t=this._getCachedEdgeMaterials(e);this.nodeCrossfadingEnabled||Yt(t,this.fullOpacity);const i=e.filteredIds;if(null==i){return{hasEdges:t.some((e=>e!==_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.transparentEdgeMaterial)),perFeatureEdgeMaterials:t}}let s=0,r=!1;const o=t.map(((t,o)=>e.featureIds[o]!==i[s]?_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.transparentEdgeMaterial:(r=r||t!==_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.transparentEdgeMaterial,s++,t)));return{hasEdges:r,perFeatureEdgeMaterials:o}}_updateComponentData(e){if(!this._hasComponentData)return;const t=e.objectHandle,i=this._getComponentParameters(e);this._collection.setComponentData(t,i),this._stage.renderView.requestRender()}_reloadAll(e=this.elevationOffset){this._removeAllNodeDataFromStage(e),null!=this._controller&&this._controller.restartNodeLoading()}_opacityChange(e){this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopAllNodeFading(),this._nodeId2Meta.forEach((t=>{null!=t&&(this._collection.updateMaterial(t.objectHandle,(t=>t.objectOpacity=e)),Yt(t.cachedEdgeMaterials,e),this._updateEdgeRendering(t))}))}_updateMaterial(e){this._collection.updateMaterial(e.objectHandle,(e=>{e.commonMaterialParameters.hasSlicePlane=this.slicePlaneEnabled,e.usePBR=this._usePBR,this._updateMaterialOverlay(e)}))}_updateMaterialOverlay(e){}_updateEngineObject(e){this._updateComponentData(e),this._applyFiltersToNode(e),this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,Ht.UPDATE)}_slicePlaneEnabledChange(e){this._intersectionHandler&&(this._intersectionHandler.slicePlaneEnabled=e),null!=this._labeler&&(this._labeler.slicePlaneEnabled=e),this._nodeId2Meta.forEach((t=>{null!=t&&(this._collection.updateMaterial(t.objectHandle,(t=>t.commonMaterialParameters.hasSlicePlane=e)),this._updateEdgeRendering(t,!1))}))}_updatePBR(e){this._nodeId2Meta.forEach((t=>{null!=t&&this._collection.updateMaterial(t.objectHandle,(t=>t.usePBR=e))})),this._hasLoadedPBRTextures=!0}get _usePBR(){return this._shadeNormals&&this.view.qualitySettings.physicallyBasedRenderingEnabled}_updateEdgeRendering(e,t=!0){null!=this._edgeView&&this._edgeView.hasObject(e.objectHandle)&&this._addOrUpdateEdgeRendering(e,t)}_forAllNodes(e){this._nodeId2Meta.forEach(e)}_ignoreClientNodeOverriddenFeatures(e){return this.i3sOverrides.hasGeometryChanges?(t,i,s)=>s.node.index>=0&&this.i3sOverrides.featureHasGeometryChanges(t)?_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE:e(t,i,s):e}_forAllFeatures(e,t,i){for(const s of this._nodeId2Meta.values()){if(null==s)continue;if(null!=t){switch(t(s.node.serviceMbsInIndexSR)){case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.EXIT:return;case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.SKIP:continue}}let r=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE;switch(i){case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesMode.ALL:r=this._forAllFeaturesOfNode(s,e);break;case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesMode.VISIBLE_ONLY:r=this._forAllVisibleFeaturesOfNode(s,e);break;case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesMode.QUERYABLE:r=this._forAllQueryableFeaturesOfNode(s,e)}if(r===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.EXIT)return}}_forAllFeaturesOfNode(e,t){let i=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE;const s=e.featureIds;for(let r=0;r<s.length;r++)if(i=t(s[r],r,e),i===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.EXIT)return i;return i}_forAllVisibleFeaturesOfNode(e,t){let i=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE;const s=e.featureIds;return this._collection.forEachVisibleComponent(e.objectHandle,(r=>(i=t(s[r],r,e),i===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE))),i}_forAllQueryableFeaturesOfNode(e,t){const i=this._ignoreClientNodeOverriddenFeatures(t);if(null==this._renderClippingArea)return this._forAllFeaturesOfNode(e,i);const s=this._boundingRectNodeTest(e,this._renderClippingArea);if(s===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.MbsIntersectResult.OUTSIDE)return _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE;if(s===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.MbsIntersectResult.INSIDE)return this._forAllFeaturesOfNode(e,i);const r=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.CONTINUE,o=e.featureIds,a=e.objectHandle,n=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_70__.getClipRect)(this._renderClippingArea,this._collection.getObjectTransform(a));for(let l=0;l<o.length;l++){if(!this._boundingRectFeatureTest(e,l,n))continue;const t=i(o[l],l,e);if(t===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesReturnType.EXIT)return t}return r}_createAttributes(e,t){const i={};null!=t.featureIds&&(i[this._getObjectIdField()]=t.featureIds[e]);const s=t.attributeInfo?.attributeData;if(null!=s)for(const r of Object.keys(s))i[r]=(0,_i3s_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_62__.getCachedAttributeValue)(s[r],e);return i}_createGraphic(e,t){return this._createLayerGraphic(this._createAttributes(e,t))}highlight(e,t){if((0,_support_guards_js__WEBPACK_IMPORTED_MODULE_47__.isQuery)(e))return _support_highlightUtils_js__WEBPACK_IMPORTED_MODULE_76__.emptyHighlightHandle;const s=(0,_support_highlightUtils_js__WEBPACK_IMPORTED_MODULE_76__.normalizeHighlightTargetExceptQuery)(e);if(0===s.length)return _support_highlightUtils_js__WEBPACK_IMPORTED_MODULE_76__.emptyHighlightHandle;const r=t?.name??_support_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_91__.defaultHighlightName,o=s[0]instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]?this._featureIdsFromGraphics(s):"number"==typeof s[0]?s:null;if(!o)return _support_highlightUtils_js__WEBPACK_IMPORTED_MODULE_76__.emptyHighlightHandle;const{set:a,handle:n}=this._highlights.acquireSet(r);return this._highlights.setFeatureIds(a,o),n}_featureIdsFromGraphics(e){const t=this.i3slayer.fieldsIndex,i=this._getObjectIdField();return e.map((e=>(0,_support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_75__.attributeLookup)(t,e.attributes,i)))}resetHighlights(){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.destroyMaybe)(this._highlights),this._highlights=new _i3s_Highlights_js__WEBPACK_IMPORTED_MODULE_60__["default"]({collection:this._collection,forAllFeatures:e=>this._forAllFeatures(e,null,_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ForAllFeaturesMode.ALL),forAllFeaturesOfNode:(e,t)=>this._forAllFeaturesOfNode(e,t)})}_visibleGeometryChanged(e,t){this._elevationProvider&&(null==this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle=(0,_core_scheduling_js__WEBPACK_IMPORTED_MODULE_12__.schedule)((()=>{const{node:t}=e,i=t.visibilityObbInRenderSR??t.geometryObbInRenderSR??t.serviceObbInRenderSR;if(null!=i){const e=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_33__.create)();i.toAaBoundingBox(e),this.emit("visible-geometry-changed",new _ContentGeometryLayerView_js__WEBPACK_IMPORTED_MODULE_51__.ContentGeometryUpdateEvent(e))}else this.emit("visible-geometry-changed");this._visibleGeometryChangedSchedulerHandle=null}))),this._updateSnappingSources(e,t),this._elevationProvider.objectChanged(this._collection.getComponentObb(e.objectHandle)))}get performanceInfo(){return new _I3SMeshViewPerformanceInfo_js__WEBPACK_IMPORTED_MODULE_53__.I3SMeshViewPerformanceInfo(this.usedMemory,this._nodeId2Meta.size,Math.round(this._gpuMemoryEstimate/1048576),Math.round(this._geoMemoryEstimate/1048576),Math.round(this._texMemoryEstimate/1048576),Math.round(this.unloadedMemory/1048576),this._idbCacheEnabled?Math.round(100*this._idbCache.getHitRate()):0)}checkInvariants(){}get test(){}getNodeOpacityByIndex(e){const t=this._nodeId2Meta.get(e);return this.getNodeOpacity(t)}getNodeOpacity(e){return null!=e?this._collection.getMaterial(e.objectHandle).objectOpacity:0}isNodeFullyFadedIn(e){return this._crossfadeHelper.isNodeFullyFadedIn(e)}getNodeCrossfadeMetaData(e){return this._nodeId2Meta.get(e)}getNodeComponentHandle(e){return this._nodeId2Meta.get(e)?.objectHandle}markNodeToRemove(e){this._controller&&this._controller.markNodeToRemove(e)}removeMarkedNodes(){this._controller&&this._controller.removeMarkedNodes()}foreachCrossfadeNode(e){this._nodeId2Meta.forEach(e)}fadeNode(e,t,i){if(!this.nodeCrossfadingEnabled)return;const s=this._nodeId2Meta.get(e);null!=s&&this._crossfadeHelper.fadeNode(e,s,t,i)}setNodeOpacityByIndex(e,t){const i=this._nodeId2Meta.get(e);null!=i&&this._setNodeOpacity(i,t)}_setNodeOpacity(e,t){this._collection.updateMaterial(e.objectHandle,(e=>e.objectOpacity=t)),this._setNodeEdgeOpacity(e,t)}_setNodeEdgeOpacity(e,t){if(null==this._edgeView||!e.cachedEdgeMaterials)return;Yt(e.cachedEdgeMaterials,t);const i=e.objectHandle;this._edgeView.hasObject(i)&&this._edgeView.updateAllComponentOpacities(i,t).catch((e=>this._logEdgeViewError(e,this.i3slayer.title)))}get hasModifications(){return this._isIntegratedMesh&&null!=this._layerClippingArea||this._modifications&&this._modifications.length>0}updateNodeModificationStatus(e){const t=e.length;if(!this.hasModifications||t<=0||!0!==this._i3sWasmLoaded)return;const i=this.uid,s=Qt(e);if(s){const t={context:i,buffer:s.buffer};(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_56__.filterObbsForModificationsSync)(t);const r=new Float64Array(s.buffer);e.forAll(((e,t)=>{const i=r[t],s=(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_56__.interpretObbModificationResults)(i);e.imModificationImpact=s,s!==_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_67__.NodeIMModificationImpact.Unmodified&&this._controller.invalidateGeometryVisibility(e.index)}))}}notifyUpdate(){this.notifyChange("updating")}notifyLODUpdate(){this._controller.notifyLODUpdate()}isUpdating(){return!(!this._controller||!this._controller.updating)||!!this._visibleGeometryChangedSchedulerHandle||null!=this._labeler&&this._labeler.updating||this._crossfadeHelper?.updating||this._i3sWasmLoaded instanceof Promise||this._asyncModuleLoading>0||null!=this._elevationTask&&this._elevationTask.running||this._needFilterResolve||this._compressionTracker.compressing}trackSnappingSources(e){const t={events:e,fetchEdgeLocations:async(e,t,i)=>{const s=this._nodeId2Meta.get(e);if(null==s)throw new Error("invalid-node");const{origin:r,buffer:o}=await this._collection.extractEdgeInformation(s.objectHandle,t,i);return this._snappingLocationsApplyElevation(s,o,r),{type:"components",objectIds:s.featureIds,locations:o,origin:r}},remove:()=>(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.removeUnordered)(this._snappingSourcesTrackers,t)};return this._snappingSourcesTrackers.push(t),this._nodeId2Meta.forEach(((t,i)=>{if(null==t)return;const s=this._controller.getRenderMbs(t.node);s&&e.add(i,s)})),t}_snappingLocationsApplyElevation(e,t,i){if(!e.elevationOffsets||this.elevationInfo.mode===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_55__.ElevationMode.Absolute)return;const s=t.position0,r=t.position1,o=t.componentIndex,a=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__.create)(),n=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__.create)(),l=(e,t)=>{(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.f)(e,e,i),this.view.renderCoordsHelper.worldUpAtPosition(e,n),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.f)(e,e,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.g)(n,n,t)),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.d)(e,e,i)};for(let d=0;d<s.count;d++){const t=e.elevationOffsets[o.get(d)];s.getVec(d,a),l(a,t),s.setVec(d,a),r.getVec(d,a),l(a,t),r.setVec(d,a)}}_updateSnappingSources(e,t){const{index:i}=e.node,s=this._controller.getRenderMbs(e.node);if(null!=s)for(const r of this._snappingSourcesTrackers)t!==Ht.REMOVE&&t!==Ht.UPDATE||r.events.remove(i),t!==Ht.ADD&&t!==Ht.UPDATE||r.events.add(i,s)}_logEdgeViewError(e,t){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn("Error while processing edges. Edges on this layer might not display correctly",t,e)}_indexedDbSizeCheck(e,t){return t.byteSize>Nt?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__["default"].getLogger(this).warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`),!1):t.byteSize>0}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"_hasLoadedPBRTextures",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"_asyncModuleLoading",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"_visibleGeometryChangedSchedulerHandle",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"i3slayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"_controller",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"_labeler",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"contentVisible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)(_support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_83__.updatingProgress)],o.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"updatingProgressValue",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"hasTexturesOrVertexColors",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"rendererTextureUsage",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"elevationOffset",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"elevationInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({type:Boolean})],o.prototype,"slicePlaneEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"supportedTextureEncodings",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({type:[_layers_support_SceneModification_js__WEBPACK_IMPORTED_MODULE_43__["default"]]})],o.prototype,"_modifications",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],o.prototype,"clientGeometry",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"elevationRange",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"fullExtent",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],o.prototype,"_elevationTask",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],o.prototype,"_usePBR",null),o=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_16__.subclass)("esri.views.3d.layers.I3SMeshView3D")],o),o};var Ht;!function(e){e[e.ADD=0]="ADD",e[e.REMOVE=1]="REMOVE",e[e.UPDATE=2]="UPDATE"}(Ht||(Ht={}));const Ut=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_33__.create)(),kt=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_34__.create)(),Lt=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_34__.create)(),Gt=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_82__.Obb,Bt=new _Color_js__WEBPACK_IMPORTED_MODULE_1__["default"]([0,0,0,0]),qt=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_38__.f)(0,0,0,0);function Wt(e){if(null==e)return!1;const t=e.metallicRoughness;return t&&t.baseColorTextureId>=0||t&&t.metallicRoughnessTextureId>=0||e.normalTextureId>=0||e.emissiveTextureId>=0||e.occlusionTextureId>=0}function zt(e){return"geometryData"in e}function Kt(e){return null!=e&&(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_14__.isArrayBuffer)(e.data)}function $t(e,t){let i=1024+e.interleavedVertexData.byteLength+(e.indices?e.indices.byteLength:0)+e.positionData.data.byteLength+e.positionData.indices.byteLength;if(null!=t)for(const s of t)null!=s&&(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_14__.isArrayBuffer)(s.data)&&(i+=s.data.byteLength);return i}function Qt(e){if(0===e.length)return;const t=10*e.length,i=new Float64Array(t);let s=0;return e.forAll((e=>{let t=e.serviceObbInIndexSR;null==t&&(t=Gt,t.center=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_38__.a)(e.serviceMbsInIndexSR),t.halfSize=[e.serviceMbsInIndexSR[3],e.serviceMbsInIndexSR[3],e.serviceMbsInIndexSR[3]]);const r=t.data;i[s++]=r[0],i[s++]=r[1],i[s++]=r[2],i[s++]=r[3],i[s++]=r[4],i[s++]=r[5],i[s++]=r[6],i[s++]=r[7],i[s++]=r[8],i[s++]=r[9]})),i}class Xt{constructor(e,t,i){this.attributeInfo=e,this.meta=t,this.promise=i,this.allowMemCache=!0}}function Yt(e,t){e.forEach((e=>e.opacity=t))}class Jt{constructor(e,t){this.mode=e,this.offset=t}}const Zt=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_23__.create)(),ei=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_33__.create)(),ti="elevation-change",ii="",si="@null",ri="@ECEF",oi=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],ai=new _support_ElevationRange_js__WEBPACK_IMPORTED_MODULE_80__.ElevationRange;function ni(e,t,i){let s=e.elevationRangeMin,r=e.elevationRangeMax;const o=i;if(o>0){t.getCorners(oi);for(const e of oi){const t=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.H)(e)-o;s=Math.min(s,t),r=Math.max(r,t)}}else{t.getCorners(oi);for(const e of oi){const t=e[2];s=Math.min(s,t),r=Math.max(r,t)}}e.expandElevationRangeValues(s,r)}function li(e,t,i){const s=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_38__.a)(t),r=i>0?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_22__.H)(s)-i:s[2],o=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_38__.g)(t);e.expandElevationRangeValues(r-o,r+o)}function di(e,t){const i=e.featureIds.slice();for(const s of t)if(s(i,e),0===i.length)break;return i.length===e.featureIds.length?e.featureIds:i}function hi(e,t,i){const s=new Array,r=e.filteredIds;if(null==r||t?.size||i?.size){if(null!=r){let o=0;e.featureIds.forEach(((e,a)=>{if(r[o]===e)++o;else if(!t?.has(e))return;i?.has(e)||s.push(a)}))}}else e.featureIds.forEach(((e,t)=>{r[s.length]===e&&s.push(t)}));return s}function ci(e,t,i){if(e&&t)for(const s of t){const t=(e.get(s)??0)+i;t>0?e.set(s,t):e.delete(s)}}var ui;function _i(e,t=ui.All){const i=new Map;for(const s of e){ci(i,t===ui.All?s?.featureIds:t===ui.Filtered?s?.filteredIds:s?.weaklyRemovedIds,1)}return i}!function(e){e[e.All=0]="All",e[e.Filtered=1]="Filtered",e[e.WeaklyRemoved=2]="WeaklyRemoved"}(ui||(ui={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ D)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/uid.js */ "./node_modules/@arcgis/core/core/uid.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _renderers_support_RenderingInfo_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../renderers/support/RenderingInfo.js */ "./node_modules/@arcgis/core/renderers/support/RenderingInfo.js");
/* harmony import */ var _symbols_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../symbols/PointSymbol3D.js */ "./node_modules/@arcgis/core/symbols/PointSymbol3D.js");
/* harmony import */ var _graphics_Graphics3DCore_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./graphics/Graphics3DCore.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js");
/* harmony import */ var _graphics_Graphics3DScaleVisibility_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./graphics/Graphics3DScaleVisibility.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js");
/* harmony import */ var _i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./i3s/I3SGeometryUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js");
/* harmony import */ var _support_LimitGraphicsMap_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../support/LimitGraphicsMap.js */ "./node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/* harmony import */ var _support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../support/layerViewUtils.js */ "./node_modules/@arcgis/core/views/support/layerViewUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class w{constructor(e,t){this.meta=e,this.index=t}}class G{constructor(e,t){this.graphic=e,this.geometry=t,this.components=[],this.overridesDirty=!1}}let D=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{get updating(){return this._graphicsCore?.updating??!1}constructor(e){super(e),this.loadedGraphics=new _support_LimitGraphicsMap_js__WEBPACK_IMPORTED_MODULE_22__.LimitGraphicsMap(5e4),this.slicePlaneEnabled=!1,this._renderingInfo=new _renderers_support_RenderingInfo_js__WEBPACK_IMPORTED_MODULE_17__.RenderingInfo(null,new _symbols_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_18__["default"]),this._featuresMap=new Map}initialize(){const e=this.view.basemapTerrain;this._graphicsCore=new _graphics_Graphics3DCore_js__WEBPACK_IMPORTED_MODULE_19__.Graphics3DCore({owner:this,layer:this.layer,preferredUpdatePolicy:_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_23__.UpdatePolicy.ASYNC,elevationFeatureExpressionEnabled:!1,graphicSymbolSupported:!1,getRenderingInfoWithoutRenderer:!0,hasZ:!0,hasM:!1,componentFactories:{deconflictor:e=>this.view.deconflictor.addGraphicsOwner(e),labeler:(e,t)=>this.view.labeler.addGraphicsOwner(e,t,{emptySymbolLabelSupported:!0,elevationInfoOverride:{mode:"absolute-height",offset:0},disablePlacement:{logEntityDescription:"3D Object Scene Layer features"}}),scaleVisibility:(0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_24__.hasLayerBasedScaleVisibility)()?null:(t,r)=>new _graphics_Graphics3DScaleVisibility_js__WEBPACK_IMPORTED_MODULE_20__.Graphics3DScaleVisibility({graphicsCoreOwner:this,layer:this.layer,queryGraphicUIDsInExtent:r,graphicsCore:t,basemapTerrain:e,layerScaleEnabled:!1})}}),this._graphicsCore.initializePromise.then((()=>this._graphicsCore.startCreateGraphics())).catch((()=>{})),this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>this.layer.labelingInfo),((e,t)=>{(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_12__.diff)(e,t)&&this._graphicsCore.updateLabelingInfo()})))}destroy(){this._graphicsCore=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.destroyMaybe)(this._graphicsCore),this.loadedGraphics=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.destroyMaybe)(this.loadedGraphics),this.view=null}addNodeMeta(e,t){let r=0;const o=e.filteredIds,i=this.view.spatialReference,s=[];for(let a=0;a<e.featureIds.length;a++){const p=e.featureIds[a];let c=null==o;if(o&&r<o.length&&p===o[r]&&(c=!0,r++),!this._enabledForFeatureInNode(e,a))continue;const l=this._featuresMap.get(p);if(l){l.components.push(new w(e,a)),this._updateLabelPosition(p);continue}const h=t(a,e),d=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_16__.makeDehydratedPoint)(0,0,0,i),u={objectId:p,uid:(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_8__.generateUID)(),attributes:h,visible:c,geometry:d},m=new G(u,d);m.components.push(new w(e,a)),this._featuresMap.set(p,m),this._updateLabelGeometry(p),s.push(u)}this.loadedGraphics.addMany(s)}updateLabelPositions(e){const t=this.view.renderCoordsHelper;this._forEachGraphic(e,((r,o,i)=>{const s=this._graphicsCore.getGraphics3DGraphicById(o.uid);null!=s&&this._updateLabelGeometry(e.featureIds[r])&&s.alignWithAbsoluteElevation(i.z??0,t,!1)}))}setNodeMetaAttributes(e,t){const r=new Array;this._forEachGraphic(e,((i,s)=>{const a=t(i,e);(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.equalsShallow)(s.attributes,a)||(s.attributes=a,r.push(s.uid))})),this._graphicsCore.updateLabelingInfo(r)}applyFilterChange(e){this._forEachFeature(e,((t,r,o)=>{if(!this._enabledForFeatureInNode(e,t)){const o=e.featureIds[t];switch(this._removeFeature(r,e,t)){case F.REMOVED:this.loadedGraphics.removeManyByObjectId([o]);break;case F.MODIFIED:this._updateLabelPosition(o)}return}const i=r.graphic,s=i.visible;s!==o&&(i.visible=o,C.graphic=i,C.property="visible",C.oldValue=s,C.newValue=o,this._graphicsCore.graphicUpdateHandler(C))}))}removeNodeMeta(e){const t=[];this._forEachGraphic(e,(r=>{const o=e.featureIds[r],i=this._featuresMap.get(o);if(!i)return;switch(this._removeFeature(i,e,r)){case F.MODIFIED:this._updateLabelPosition(o);break;case F.REMOVED:t.push(o)}})),this.loadedGraphics.removeManyByObjectId(t)}_removeFeature(e,t,o){const i=e.components.length;return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.filterInPlace)(e.components,(e=>!(e.meta===t&&e.index===o))),0===e.components.length?(this._featuresMap.delete(t.featureIds[o]),F.REMOVED):i!==e.components.length?F.MODIFIED:F.UNMODIFIED}getRenderingInfo(){return this._renderingInfo}notifyGraphicGeometryChanged(){}notifyGraphicVisibilityChanged(){}_updateLabelPosition(e){const t=this._featuresMap.get(e);t&&this._updateLabelGeometry(e)&&(this.loadedGraphics.removeManyByObjectId([e]),this.loadedGraphics.addMany([t.graphic]))}_updateLabelGeometry(e){const t=this._featuresMap.get(e);if(!t)return!1;const r=t.geometry,o=this.view.spatialReference,s=this.view.renderCoordsHelper,a=r.x,n=r.y,p=r.z??0,c=t.components.length,l=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.newDoubleArray)(c*_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_21__.boundingBoxCornersPointsStride);let u=0;for(const{meta:i,index:h}of t.components)(0,_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_21__.boundingBoxCornerPoints)(h,this.collection,i.objectHandle,l,u),u+=_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_21__.boundingBoxCornersPointsStride;return (0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_13__.projectBuffer)(l,s.spatialReference,0,l,o,0),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__.fromBuffer)(l,O),r.x=(O[0]+O[3])/2,r.y=(O[1]+O[4])/2,r.z=O[5],!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.floatEqualUlp)(r.x,a)||!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.floatEqualUlp)(r.y,n)||!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.floatEqualUlp)(r.z,p)}_forEachGraphic(e,t){this._forEachFeature(e,((r,{graphic:o,geometry:i},s)=>{this._enabledForFeatureInNode(e,r)&&t(r,o,i,s)}))}_forEachFeature(e,t){let r=0;for(let o=0;o<e.featureIds.length;o++){const i=this._featuresMap.get(e.featureIds[o]);let s=null==e.filteredIds;e.filteredIds&&e.filteredIds[r]===e.featureIds[o]&&(s=!0,r++),i&&t(o,i,s)}}_enabledForFeatureInNode(e,t){return e.node.index<0||!this.overrides?.featureHasGeometryChanges(e.featureIds[t])}get updatePolicy(){return this._graphicsCore.effectiveUpdatePolicy}get usedMemory(){return this._graphicsCore.usedMemory}get unloadedMemoryEstimate(){return this._graphicsCore.unprocessedMemoryEstimate}get test(){}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"collection",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"loadedGraphics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"overrides",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"layerViewUid",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"slicePlaneEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],D.prototype,"_graphicsCore",void 0),D=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__.subclass)("esri.views.3d.layers.I3SMeshViewLabeler")],D);const C={graphic:null,property:null,oldValue:null,newValue:null};var F;!function(e){e[e.UNMODIFIED=0]="UNMODIFIED",e[e.MODIFIED=1]="MODIFIED",e[e.REMOVED=2]="REMOVED"}(F||(F={}));const O=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewPerformanceInfo.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewPerformanceInfo.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SMeshViewPerformanceInfo: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _support_LayerViewPerformanceInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./support/LayerViewPerformanceInfo.js */ "./node_modules/@arcgis/core/views/3d/layers/support/LayerViewPerformanceInfo.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _support_LayerViewPerformanceInfo_js__WEBPACK_IMPORTED_MODULE_0__.LayerViewPerformanceInfo{constructor(t,e,r,s,o,i,p){super(t,0,0,0,e),this.gpuMB=r,this.geometryMB=s,this.textureMB=o,this.unloadedMB=i,this.idbHitRate=p}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ElevationMode: () => (/* binding */ E),
/* harmony export */   ForAllFeaturesMode: () => (/* binding */ n),
/* harmony export */   ForAllFeaturesReturnType: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n,o,E;!function(n){n[n.VISIBLE_ONLY=0]="VISIBLE_ONLY",n[n.ALL=1]="ALL",n[n.QUERYABLE=2]="QUERYABLE"}(n||(n={})),function(n){n[n.EXIT=0]="EXIT",n[n.CONTINUE=1]="CONTINUE",n[n.SKIP=2]="SKIP"}(o||(o={})),function(n){n[n.Absolute=0]="Absolute",n[n.RelativeToGround=1]="RelativeToGround",n[n.OnTheGround=2]="OnTheGround"}(E||(E={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   destroyContext: () => (/* binding */ g),
/* harmony export */   dracoDecompressPointCloudData: () => (/* binding */ m),
/* harmony export */   filterObbsForModifications: () => (/* binding */ y),
/* harmony export */   filterObbsForModificationsSync: () => (/* binding */ S),
/* harmony export */   initialize: () => (/* binding */ P),
/* harmony export */   interpretObbModificationResults: () => (/* binding */ L),
/* harmony export */   process: () => (/* binding */ u),
/* harmony export */   project: () => (/* binding */ h),
/* harmony export */   setLegacySchema: () => (/* binding */ d),
/* harmony export */   setModifications: () => (/* binding */ p),
/* harmony export */   setModificationsSync: () => (/* binding */ j),
/* harmony export */   test: () => (/* binding */ M),
/* harmony export */   transformNormals: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_MeshGeoreferencedVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/MeshGeoreferencedVertexSpace.js */ "./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedVertexSpace.js");
/* harmony import */ var _geometry_support_MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/MeshLocalVertexSpace.js */ "./node_modules/@arcgis/core/geometry/support/MeshLocalVertexSpace.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../libs/i3s/enums.js */ "./node_modules/@arcgis/core/libs/i3s/enums.js");
/* harmony import */ var _libs_i3s_I3SModule_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../libs/i3s/I3SModule.js */ "./node_modules/@arcgis/core/libs/i3s/I3SModule.js");
/* harmony import */ var _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./I3SMeshWorkerHandle.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshWorkerHandle.js");
/* harmony import */ var _i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./i3s/I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function u(e){E=await U();const r=[e.geometryBuffer];return{result:A(E,e,r),transferList:r}}async function m(e){E=await U();const r=[e.geometryBuffer],{geometryBuffer:t}=e,o=t.byteLength,n=E._malloc(o),s=new Uint8Array(E.HEAPU8.buffer,n,o);s.set(new Uint8Array(t));const i=E.dracoDecompressPointCloudData(n,s.byteLength);if(E._free(n),i.error.length>0)throw new Error(`i3s.wasm: ${i.error}`);const a=i.featureIds?.length>0?i.featureIds.slice():null,f=i.positions.slice();return a&&r.push(a.buffer),r.push(f.buffer),{result:{positions:f,featureIds:a},transferList:r}}async function y(e){await U(),S(e);const r={buffer:e.buffer};return{result:r,transferList:[r.buffer]}}async function p(e){await U(),j(e)}async function d(e){E=await U(),E.setLegacySchema(e.context,e.jsonSchema)}async function h(e){const{localMatrix:n,origin:s,positions:i,vertexSpace:a}=e,f=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromJSON(e.inSpatialReference),c=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromJSON(e.outSpatialReference);let l;const[{projectBuffer:u},{initializeProjection:m}]=await Promise.all([Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js")),Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/projectionUtils.js */ "./node_modules/@arcgis/core/geometry/projectionUtils.js"))]);await m(f,c);const y=[0,0,0];if(!u(s,f,0,y,c,0))throw new Error("Failed to project");if("georeferenced"===a.type&&null==a.origin){if(l=new Float64Array(i.length),!u(i,f,0,l,c,0,l.length/3))throw new Error("Failed to project")}else{const e="georeferenced"===a.type?_geometry_support_MeshGeoreferencedVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__["default"].fromJSON(a):_geometry_support_MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromJSON(a),{projectMeshVertexPositions:r}=await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_meshUtils_vertexSpaceConversion_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_support_meshUtils_projectMeshVertexPositions_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/support/meshUtils/projectMeshVertexPositions.js */ "./node_modules/@arcgis/core/geometry/support/meshUtils/projectMeshVertexPositions.js")),s=r({vertexAttributes:{position:i},transform:n?{localMatrix:n}:void 0,vertexSpace:e,spatialReference:f},c);if(!s)throw new Error("Failed to project");l=s}const p=l.length,[d,h,b]=y;for(let r=0;r<p;r+=3)l[r]-=d,l[r+1]-=h,l[r+2]-=b;return{result:{projected:l,original:i,projectedOrigin:y},transferList:[l.buffer,i.buffer]}}async function b({normalMatrix:r,normals:t}){const o=new Float32Array(t.length);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,t,r),(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.hasScaling)(r)&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.n)(o,o),{result:{transformed:o,original:t},transferList:[o.buffer,t.buffer]}}function g(e){x(e)}let w,E;function j(e){if(!E)return;const r=e.modifications,t=E._malloc(8*r.length),o=new Float64Array(E.HEAPU8.buffer,t,r.length);for(let n=0;n<r.length;++n)o[n]=r[n];E.setModifications(e.context,t,r.length,e.isGeodetic),E._free(t)}function A(e,r,t){const{context:o,globalTrafo:n,mbs:s,obbData:a,elevationOffset:l,geometryBuffer:u,geometryDescriptor:m,indexToVertexProjector:y,vertexToRenderProjector:p}=r,d=e._malloc(u.byteLength),h=33,b=e._malloc(h*Float64Array.BYTES_PER_ELEMENT),g=new Uint8Array(e.HEAPU8.buffer,d,u.byteLength);g.set(new Uint8Array(u));const w=new Float64Array(e.HEAPU8.buffer,b,h);_(w,[NaN,NaN,NaN]);let E=w.byteOffset+3*w.BYTES_PER_ELEMENT,j=new Float64Array(w.buffer,E);_(j,n),E+=16*w.BYTES_PER_ELEMENT,j=new Float64Array(w.buffer,E),_(j,s),E+=4*w.BYTES_PER_ELEMENT,a&&(j=new Float64Array(w.buffer,E),_(j,a));const A=m,L={isDraco:!1,isLegacy:!1,color:r.layouts.some((e=>e.some((e=>"color"===e.name)))),normal:r.needNormals&&r.layouts.some((e=>e.some((e=>"normalCompressed"===e.name)))),uv0:r.layouts.some((e=>e.some((e=>"uv0"===e.name)))),uvRegion:r.layouts.some((e=>e.some((e=>"uvRegion"===e.name)))),featureIndex:A.featureIndex},S=e.process(o,!!r.obbData,d,g.byteLength,A,L,b,l,y,p,r.normalReferenceFrame);if(e._free(b),e._free(d),S.error.length>0)throw new Error(`i3s.wasm: ${S.error}`);if(S.discarded)return null;const x=S.componentOffsets.length>0?S.componentOffsets.slice():null,P=S.featureIds.length>0?S.featureIds.slice():null,U=S.anchorIds.length>0?Array.from(S.anchorIds):null,M=S.anchors.length>0?Array.from(S.anchors):null,N=S.interleavedVertedData.slice().buffer,I=S.indicesType===_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.IndexType.Int16?new Uint16Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/2).slice():new Uint32Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/4).slice(),F=S.positions.slice(),{buffer:T,byteOffset:B,byteLength:O}=S.positionIndices,R=S.positionIndicesType===_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.IndexType.Int16?new Uint16Array(T,B,O/2).slice():new Uint32Array(T,B,O/4).slice(),v=new _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_7__.TransformedGeometry(r.layouts[0],N,I,S.hasColors,S.hasModifications,{data:F,indices:R});return P&&t.push(P.buffer),x&&t.push(x.buffer),t.push(N),t.push(I.buffer),t.push(F.buffer),t.push(R.buffer),new _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_7__.TransformedData(x,P,U,M,v,n,S.obb)}function L(e){return 0===e?_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_8__.NodeIMModificationImpact.Unmodified:1===e?_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_8__.NodeIMModificationImpact.PotentiallyModified:2===e?_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_8__.NodeIMModificationImpact.Culled:_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_8__.NodeIMModificationImpact.Unknown}function S(e){if(!E)return;const{context:r,buffer:t}=e,o=E._malloc(t.byteLength),n=t.byteLength/Float64Array.BYTES_PER_ELEMENT,s=new Float64Array(E.HEAPU8.buffer,o,n),i=new Float64Array(t);s.set(i),E.filterOBBs(r,o,n),i.set(s),E._free(o)}function x(e){E&&0===E.destroy(e)&&(E=null)}function _(e,r){for(let t=0;t<r.length;++t)e[t]=r[t]}async function P(){E||await U()}async function U(){return E||(E=await(w??=(0,_libs_i3s_I3SModule_js__WEBPACK_IMPORTED_MODULE_6__.get)())),E}const M={transform:(e,r)=>E&&A(E,e,r),destroy:x};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../II3SMeshView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h{constructor(t){this.highlightName=t,this.ids=new Set}}class l{constructor({collection:t,forAllFeatures:e,forAllFeaturesOfNode:i}){this._highlights=new Map,this._collection=t,this._forAllFeatures=e,this._forAllFeaturesOfNode=i}destroy(){this._highlights.forEach((t=>t.forEach((t=>this._releaseSet(t))))),this._highlights=null}acquireSet(s){const l=new h(s);(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__.getOrCreateMapValue)(this._highlights,s,(()=>[])).push(l);const o=(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__.makeHandle)((()=>{const e=this._highlights?.get(s);e&&(this._releaseSet(l),(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.removeUnordered)(e,l))}));return{set:l,handle:o}}setFeatureIds(t,e){e.forEach((e=>t.ids.add(e))),this._initializeSet(t)}_initializeSet(t){this._forAllFeatures(((e,i,h)=>(t.ids.has(e)&&this._collection.addComponentHighlight(h.objectHandle,i,t.highlightName),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_3__.ForAllFeaturesReturnType.CONTINUE)))}_releaseSet(t){this._forAllFeatures(((e,i,h)=>(t.ids.has(e)&&this._collection.removeComponentHighlight(h.objectHandle,i,t.highlightName),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_3__.ForAllFeaturesReturnType.CONTINUE)))}objectCreated(t){this._highlights.forEach(((e,i)=>{e.forEach((e=>{this._forAllFeaturesOfNode(t,((h,l)=>(e.ids.has(h)&&this._collection.addComponentHighlight(t.objectHandle,l,i),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_3__.ForAllFeaturesReturnType.CONTINUE)))}))}))}objectDeleted(t){this._collection.clearHighlights(t.objectHandle)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SAsyncElevationUpdater: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../II3SMeshView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js");
/* harmony import */ var _graphics_ExtentSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../graphics/ExtentSet.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let a=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(t,e,s,r){super({}),this._updateExtent=e,this._updateNode=s,this._getElevationMode=r,this.running=!1,this._extentSet=new _graphics_ExtentSet_js__WEBPACK_IMPORTED_MODULE_8__.ExtentSet,this._nodeSet=new Set;const i=this._taskPriority,n=t.registerTask(this._taskPriority,this);this.addHandles(n),this._task=n,this._lastTaskPriority=i}get _taskPriority(){const t=this._getElevationMode();return t&&t===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_7__.ElevationMode.RelativeToGround?_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_9__.TaskPriority.ELEVATION_ALIGNMENT_SCENE:_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_9__.TaskPriority.ELEVATION_ALIGNMENT}_updateTaskPriority(){const t=this._taskPriority;t!==this._lastTaskPriority&&(this._task.priority=t,this._lastTaskPriority=t)}addExtent(t){this._extentSet.add(t),this._updateTaskPriority(),this.running=!0}schedule(t){this._nodeSet.add(t),this._updateTaskPriority(),this.running=!0}remove(t){this._nodeSet.delete(t),this._updateRunning()}runTask(t){const e=this._extentSet;for(t.run((()=>e.merge(t)));!e.empty&&!t.done;){const s=this._updateExtent(e.pop());null!=s&&s.forAll((t=>this.schedule(t))),t.madeProgress()}if(t.done)return;const s=this._nodeSet;for(const r of s)if(s.delete(r),this._updateNode(r),t.madeProgress(),t.done)break;this._updateRunning()}_updateRunning(){this.running=this._nodeSet.size>0||this._extentSet.size>0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],a.prototype,"running",void 0),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.i3s.I3SAsyncElevationUpdater")],a);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SCrossfadeHelper: () => (/* binding */ i),
/* harmony export */   NodeCrossfadeMetaData: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_scheduling_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/scheduling.js */ "./node_modules/@arcgis/core/core/scheduling.js");
/* harmony import */ var _support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/I3SLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(){this.lodCrossfadeSignedDuration=0}}class i{constructor(e){this._view=e,this._preRenderFrameTaskHandle=null,this._currentFrameStartTime=null,this._numFadingNodes=0}destroy(){this._preRenderFrameTaskHandle?.remove(),this._preRenderFrameTaskHandle=null,this._view=null}get updating(){return this._numFadingNodes>0}stopNodeFading(s){null!=s.lodCrossfadeProgress&&(this._numFadingNodes--,s.lodCrossfadeProgress=null,0===this._numFadingNodes&&(null!=this._preRenderFrameTaskHandle&&(this._preRenderFrameTaskHandle=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.removeMaybe)(this._preRenderFrameTaskHandle)),this._view.notifyLODUpdate(),this._view.notifyUpdate()))}_startNodeFading(e,d,o){0===this._numFadingNodes&&(this._preRenderFrameTaskHandle=(0,_core_scheduling_js__WEBPACK_IMPORTED_MODULE_1__.addFrameTask)({preRender:e=>this._updateAllNodeFading(e)}),this._view.notifyLODUpdate()),null==e.lodCrossfadeProgress&&(this._numFadingNodes++,this._view.notifyUpdate()),e.lodCrossfadeSignedDuration=o,e.lodCrossfadeProgress=d}_updateAllNodeFading(e){const s=this._view.nodeCrossfadingEnabled;this._view.foreachCrossfadeNode(((d,o)=>{if(null!=d?.lodCrossfadeProgress){const i=d.lodCrossfadeSignedDuration,t=i>0?this._view.fullOpacity:0,r=e.deltaTime/i,a=d.lodCrossfadeProgress+Math.abs(r),n=!s||a>=1||0===i,l=t-(n?0:i>0?1:-1)*(1-a);n?(this.stopNodeFading(d),i<0&&this._view.markNodeToRemove(o)):d.lodCrossfadeProgress=a,this._view.setNodeOpacityByIndex(o,l)}})),this._view.removeMarkedNodes()}stopAllNodeFading(){this._view.foreachCrossfadeNode(((e,s)=>{if(null!=e?.lodCrossfadeProgress){this.stopNodeFading(e);const d=e.lodCrossfadeSignedDuration;d<0&&this._view.markNodeToRemove(s);const o=d>0?this._view.fullOpacity:0;this._view.setNodeOpacityByIndex(s,o)}})),this._view.removeMarkedNodes()}fadeNode(e,s,o,i){null==this._currentFrameStartTime&&(this._currentFrameStartTime=Date.now());const r=this._view,a=r.nodeCrossfadingEnabled,n=o===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn?r.fullOpacity:0,l=a?i?o===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn?r.lodCrossfadeinDuration:r.lodCrossfadeoutDuration:r.lodCrossfadeUncoveredDuration:0,h=this._view.getNodeOpacityByIndex(e);if(a&&h!==n&&l>0){const e=1-Math.abs(n-h);this._startNodeFading(s,e,t(o)*l)}else this.stopNodeFading(s),this._view.setNodeOpacityByIndex(e,n),o===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeOut&&this._view.removeNode(e)}isNodeFullyFadedIn(e){const s=this._view.getNodeCrossfadeMetaData(e);return null==s||null==s.lodCrossfadeProgress&&this._view.getNodeOpacityByIndex(e)===this._view.fullOpacity}}function t(e){return e===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn?1:-1}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   boundingBoxCornerPoints: () => (/* binding */ i),
/* harmony export */   boundingBoxCornersPointsStride: () => (/* binding */ p),
/* harmony export */   createGetFeatureExtent: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec3f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function f(o,r,t){const m=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_4__.newDoubleArray)(24);return c=>{const f=c.meta.featureExtents,p=new Float64Array(f.buffer,6*c.index*Float64Array.BYTES_PER_ELEMENT,6);return p[0]===Number.POSITIVE_INFINITY&&(i(c.index,t,c.meta.objectHandle,m,0),(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__.projectBuffer)(m,r,0,m,o,0)?(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.fromBuffer)(m,p):(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.set)(p,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.zero)),p}}function i(t,e,n,a,s){const m=e.getComponentAabb(n,t,u),c=e.getObjectTransform(n);for(let f=0;f<8;++f)j[0]=1&f?m[0]:m[3],j[1]=2&f?m[1]:m[4],j[2]=4&f?m[2]:m[5],(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.o)(j,j,c.rotationScale),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.f)(j,j,c.position),a[s++]=j[0],a[s++]=j[1],a[s++]=j[2];return a}const p=24,u=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.create)(),j=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SIntersectionHandler: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _Intersector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Intersector.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Intersector.js");
/* harmony import */ var _webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/* harmony import */ var _webgl_engine_lib_IntersectorResult_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorResult.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorResult.js");
/* harmony import */ var _webgl_engine_lib_IntersectorType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorType.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorType.js");
/* harmony import */ var _webgl_engine_lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl-engine/lib/RayIntersections.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RayIntersections.js");
/* harmony import */ var _webgl_engine_lib_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl-engine/lib/verticalOffsetUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c{constructor(e){this.type=_webgl_engine_lib_IntersectorType_js__WEBPACK_IMPORTED_MODULE_5__.IntersectorType.I3S,this._needVerticalOffset=!1,this.layerViewUid=e.layerViewUid,this.sublayerId=e.sublayerId,this._collection=e.collection,this._traverseNodeHierarchy=e.traverseNodeHierarchy,this.slicePlaneEnabled=e.slicePlaneEnabled,this.isGround=e.isGround}updateElevationAlignState(t,i){this._needVerticalOffset=t&&i===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_0__.ViewingMode.Global}intersect(e,s,c,d,u,b){const f=e.results,m=e.options.store===_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_3__.StoreResults.ALL,h=e.ray.direction,p=e.tolerance;let y=e=>e,g=e=>e;const I=(0,_webgl_engine_lib_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_7__.getVerticalOffsetI3S)(e.verticalOffset??(this._needVerticalOffset?0:null));null!=e.verticalOffset&&null!=I&&(y=e=>I.applyToMbs(e),g=e=>I.applyToObb(e));const R=new _webgl_engine_lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_6__.MeshIntersectionOptions(b,e.options.normalRequired),w=(n,l)=>{if(0===n.childrenLoaded)return!1;const o=n.serviceObbInRenderSR?.isValid?n.serviceObbInRenderSR:null;return!(o&&!g(o).intersectRay(c,h,p))&&(!l||!o&&(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__.isValidMbs)(n.serviceMbsInRenderSR)&&!a(y(n.serviceMbsInRenderSR),c,h,p)||null!=n.geometryObbInRenderSR&&!g(n.geometryObbInRenderSR).intersectRay(c,h,p)||this._collection.intersect(l,c,d,p,I,R,((t,l,o,a)=>{if(l<0||null!=s&&!s(c,d,l))return;const u=e=>{const r=new _Intersector_js__WEBPACK_IMPORTED_MODULE_2__.I3sTarget(this.layerViewUid,this.sublayerId,n.index,t,a);e.set(this.type,r,l,o)};if(this.isGround&&(null==f.ground.distance||l<f.ground.distance)&&u(f.ground),!e.options.isFiltered&&((null==f.min.distance||l<f.min.distance)&&u(f.min),(null==f.max.distance||l>f.max.distance)&&u(f.max),m)){const t=new _webgl_engine_lib_IntersectorResult_js__WEBPACK_IMPORTED_MODULE_4__.IntersectorResult(e.ray);u(t),e.results.all.push(t)}})),!0)};this._traverseNodeHierarchy(w)}}function a(e,t,i,n=0){const r=e[3]+n,s=t[0]-e[0],l=t[1]-e[1],o=t[2]-e[2],c=i[0],a=i[1],d=i[2],u=c*s+a*l+d*o;return u*u-(c*c+a*a+d*d)*(s*s+l*l+o*o-r*r)>=0}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IDBCache: () => (/* binding */ i),
/* harmony export */   whenRequest: () => (/* binding */ c),
/* harmony export */   whenTransaction: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/ByteSizeUnit.js */ "./node_modules/@arcgis/core/core/ByteSizeUnit.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=14;class i{constructor(t,s,r=o){this._version=r,this._db=null,this._quotaReductionPromise=null,this._gcCounter=0,this._hit=0,this._miss=0,this._destroyed=!1,this.gcFrequency=50,this.maxByteSize=_core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__.ByteSizeUnit.GIGABYTES,this.quotaReductionFactor=.2,this._dbName=t,this._storeName=s}init(){return Promise.resolve().then((()=>{const e=indexedDB.open(this._dbName,this._version);return e.onupgradeneeded=t=>{const s=e.result,r=e.transaction,o=s.objectStoreNames.contains(this._storeName)?r.objectStore(this._storeName):s.createObjectStore(this._storeName),i=s.objectStoreNames.contains("last_access")?r.objectStore("last_access"):s.createObjectStore("last_access");i.indexNames.contains("date")||i.createIndex("date","date",{unique:!1}),i.indexNames.contains("byteSize")||i.createIndex("byteSize","byteSize",{unique:!1}),t.oldVersion<this._version&&(o.clear(),i.clear())},c(e)})).then((e=>{this._destroyed?e.close():this._db=e}))}destroy(){this._db&&(this._db.close(),this._db=null),this._destroyed=!0}get initialized(){return null!=this._db}getHitRate(){return this._hit/(this._hit+this._miss)}put(e,s){if(null==this._db)return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("indexedb:not-initialized","IndexedDB Cache is not initialized"));return(null!=this._quotaReductionPromise?this._quotaReductionPromise:Promise.resolve()).then((()=>this._put(e,s))).catch((t=>{if(t&&"QuotaExceededError"===t.name)return null==this._quotaReductionPromise&&(this._quotaReductionPromise=this._getCacheSize().then((e=>this._removeLeastRecentlyAccessed(s.byteSize+Math.ceil(e*this.quotaReductionFactor)))),this._quotaReductionPromise.then((()=>this._quotaReductionPromise=null),(()=>this._quotaReductionPromise=null))),this._quotaReductionPromise.then((()=>this._put(e,s)));throw t})).then((()=>{this._gcCounter--,this._gcCounter<0&&null!=this._db&&(this._gcCounter=this.gcFrequency,this._getCacheSize().then((e=>this._removeLeastRecentlyAccessed(e-this.maxByteSize))))}))}get(e,t){const o=this._db;if(null==o)return Promise.resolve(void 0);let i=null;return Promise.resolve().then((()=>{const r=o.transaction(this._storeName,"readonly");i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.onAbort)(t,(()=>{r.abort()}));return c(r.objectStore(this._storeName).get(e))})).then((t=>{if(null==t)++this._miss;else if(this._db){++this._hit;this._db.transaction("last_access","readwrite").objectStore("last_access").put({date:Date.now(),byteSize:t.byteSize},e)}return null!=i&&i.remove(),t})).catch((()=>{++this._miss,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(t),null!=i&&i.remove()}))}remove(e){const t=this._db;return null==t?Promise.resolve():Promise.resolve().then((async()=>{const s=t.transaction([this._storeName,"last_access"],"readwrite"),r=s.objectStore(this._storeName),o=s.objectStore("last_access"),i=r.delete(e),a=o.delete(e);await Promise.all([c(i),c(a),n(s)])}))}_put(e,t){const s=this._db;if(null==s)return Promise.resolve();const r=s.transaction([this._storeName,"last_access"],"readwrite"),o=r.objectStore(this._storeName),i=r.objectStore("last_access"),a=o.put(t,e),l=i.put({date:Date.now(),byteSize:t.byteSize},e);return Promise.all([c(a),c(l),n(r)])}_removeLeastRecentlyAccessed(e){if(e<=0||!this._db)return Promise.resolve();const t=this._db.transaction([this._storeName,"last_access"],"readwrite"),s=t.objectStore(this._storeName),r=t.objectStore("last_access");let o=0;const i=r.index("date").openCursor(null,"next");return i.onsuccess=()=>{const t=i.result;null!=t&&(null!=t.value.byteSize&&(o+=t.value.byteSize),s.delete(t.primaryKey),r.delete(t.primaryKey),o<e&&t.continue())},n(t)}_getCacheSize(){const e=this._db;if(null==e)return Promise.resolve(0);const t=e.transaction("last_access"),s=t.objectStore("last_access");let r=0;const o=s.index("byteSize").openKeyCursor();return o.onsuccess=()=>{const e=o.result;if(!e)return;const t=e.key;null!=t&&(r+=t),e.continue()},n(t).then((()=>r))}}function n(e){return new Promise(((t,s)=>{e.oncomplete=()=>t(),e.onerror=()=>s(e.error),e.onabort=()=>s(e.error)}))}function c(e){return new Promise(((t,s)=>{"done"===e.readyState?null!=e.error?s(e.error):t(e.result):(e.onsuccess=()=>t(e.result),e.onerror=()=>s(e.error))}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IDBMockCache: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t=new WeakMap;class s{constructor(s,e){switch(this._miss=0,this._hit=0,this.initialized=!0,e){case"layer":this._data=new Map;break;case"view":{const e=t.get(s);if(e){this._data=e;break}const i=new Map;this._data=i,t.set(s,i)}}}init(){return Promise.resolve()}async get(t,s){if(this._data.has(t))return this._hit++,this._data.get(t)??void 0;this._miss++}destroy(){}put(t,s){return this._data.set(t,s),Promise.resolve()}remove(t){return this._data.delete(t),Promise.resolve()}getHitRate(){return this._hit/(this._hit+this._miss)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/SymbologyInfo.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/SymbologyInfo.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbologyInfo: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/libs/gl-matrix-2/factories/vec4f64.js */ "./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");
/* harmony import */ var _support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/symbolColorUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this.color=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.create)(),this.castShadows=!0,this.pickable=!0,this.colorMixMode=_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_1__.ColorMixModeEnum.Multiply}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/attributeUtils.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/attributeUtils.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   attributeLookup: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,t,e){if(!e||null==t)return null;if(!n)return r(t,e);const o=n.get(e);return o?t[o.name]:null}function r(n,r){const t=r.toLowerCase();for(const e in n)if(e.toLowerCase()===t)return n[e];return null}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/support/GraphicsMap.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/support/GraphicsMap.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsMap: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(...arguments),this._map=new Map}clear(){if(this._map.size>0){const e=this.toArray();this._map.clear(),this.emit("change",{added:[],removed:e})}}get length(){return this._map.size}get(e){return this._map.get(e)}addMany(e){if(0===e.length)return;const t=new Set;for(let s=0;s<e.length;s++){const r=e[s],o=r.objectId,n=this._map.get(o);n?(t.add(o),r!==n&&(e[s]=n),n.refCount||(n.refCount=0),++n.refCount):(r.refCount=1,this._map.set(o,r))}const r=t.size>0?e.filter((e=>!t.has(e.objectId))):e;r.length>0&&this.emit("change",{added:r,removed:[]})}removeMany(e){const t=[];for(const r of e){const e=r.objectId,s=this._map.get(e);null!=s&&(!s.refCount||--s.refCount<=0)&&(this._map.delete(e),t.push(r))}t.length>0&&this.emit("change",{added:[],removed:t})}removeManyByObjectId(e){const t=[];for(const r of e){const e=this._map.get(r);null!=e&&(!e.refCount||--e.refCount<=0)&&(this._map.delete(r),t.push(e))}t.length>0&&this.emit("change",{added:[],removed:t})}toArray(){return[...this._map.values()]}find(e){return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.findInMap)(this._map,e)}some(e){return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.someMap)(this._map,e)}forEach(e){this._map.forEach((t=>e(t)))}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LimitGraphicsMap: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _GraphicsMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GraphicsMap.js */ "./node_modules/@arcgis/core/views/3d/support/GraphicsMap.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(e){super(),this._limit=e,this._all=new _GraphicsMap_js__WEBPACK_IMPORTED_MODULE_2__.GraphicsMap,this._active=new r(this),this._pending=new Map,this._handle=this._all.on("change",(e=>this._handleChanges(e)))}destroy(){this._handle.remove()}get length(){return this._active.length}toArray(){return this._active.toArray()}find(e){return this._active.find(e)}some(e){return this._active.some(e)}forEach(e){this._active.forEach(e)}addMany(e){this._all.addMany(e)}removeManyByObjectId(e){this._all.removeManyByObjectId(e)}_handleChanges(e){let t=e.removed;if(this._pending.size>0){t=new Array;for(const s of e.removed)this._pending.delete(s.objectId)||t.push(s)}let s=this._limit-this._active.length+t.length;s<e.added.length&&(this._active.removeMany(t),t=[],a.reset(1-this._limit/(this._active.length+e.added.length)),this._active.forEach((e=>{a.sample()&&(t.push(e),this._pending.set(e.objectId,e))})),s=this._limit-this._active.length+t.length);let i=e.added;if(s<e.added.length){i=new Array,a.reset(s/e.added.length);for(const t of e.added)a.sample()?i.push(t):this._pending.set(t.objectId,t)}const n=s-i.length;n>0&&this._pending.size>0&&(a.reset(n/this._pending.size),this._pending.forEach((e=>{a.sample()&&(i.push(e),this._pending.delete(e.objectId))}))),this._active.addAndRemove(i,t)}}class h{constructor(){this._percentage=1,this._last=-1,this._index=0}reset(e){this._percentage=e,this._last=-1}sample(){const e=Math.floor(this._index*this._percentage);return++this._index,e!==this._last&&(this._last=e,!0)}}const a=new h;class r{constructor(e){this._parent=e,this._map=new Map}get length(){return this._map.size}forEach(e){this._map.forEach((t=>e(t)))}find(e){return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.findInMap)(this._map,e)}some(e){return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.someMap)(this._map,e)}toArray(){return Array.from(this._map.values())}addAndRemove(e,t){for(const s of e)this._map.set(s.objectId,s);for(const s of t)this._map.delete(s.objectId);(e.length>0||t.length>0)&&this._parent.emit("change",{added:e,removed:t})}removeMany(e){for(const t of e)this._map.delete(t.objectId);e.length>0&&this._parent.emit("change",{added:[],removed:e})}}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfM2RfbGF5ZXJzX0kzU01lc2hWaWV3M0RfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDa0UsbUJBQW1CLFVBQVUsdUVBQUMsdURBQWtGOzs7Ozs7Ozs7Ozs7Ozs7O0FDSmxMO0FBQ0E7QUFDQTtBQUNBO0FBQzhDLGFBQWEsNkJBQTZCLG1OQUE2Qix3QkFBd0IsVUFBVSxJQUFJLFdBQVcsMkNBQTJDLEVBQUUsY0FBYyxnQkFBZ0IsUUFBUSxNQUFNLGNBQWMsT0FBTyx1REFBQyxrQkFBa0IsRUFBRSxHQUFHLE1BQXVCOzs7Ozs7Ozs7Ozs7Ozs7QUNKblU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGVBQWUscUJBQTZEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnBGO0FBQ0E7QUFDQTtBQUNBO0FBQ29oTyxtQkFBbUIsaUJBQWlCLDhFQUFFLENBQUMsK0JBQStCLHVRQUF1USxtQkFBbUIsd0JBQXdCLHFCQUFxQiw4SEFBOEgsT0FBTyxhQUFhLDREQUE0RCxXQUFXLEdBQUcsbUJBQW1CLCtEQUFDLGtCQUFrQixzQkFBc0IsY0FBYyx1RkFBdUYsOEVBQUMsbUpBQW1KLDZGQUFFLG8wQkFBbzBCLG1EQUFDLDJCQUEyQiwyRUFBRSxPQUFPLDhCQUE4QixTQUFTLDZCQUE2QixTQUFTLG9DQUFvQyxTQUFTLG1CQUFtQixnQkFBZ0IsY0FBYyx1Q0FBdUMsaUJBQWlCLFlBQVksd0JBQXdCLDZDQUE2QyxxQkFBcUIsMkVBQTJFLDBFQUFFLENBQUMsb0JBQW9CLDhEQUE4RCw0QkFBNEIsNkNBQTZDLGdDQUFnQyx1RkFBdUYsMkJBQTJCLE9BQU8sdUVBQUUsaUVBQWlFLHdEQUFFLGdCQUFnQix3REFB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Tyw0REFBQyxjQUFjLFFBQVEsT0FBTywwREFBQyxjQUFjLFdBQVcsOEJBQXVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKaHZDO0FBQ0E7QUFDQTtBQUNBO0FBQzBKLGdCQUFnQix3REFBQyxDQUFDLGVBQWUsb0NBQW9DLHdEQUFDLGdIQUFnSCxVQUFVLHNCQUFzQixhQUFhLDJCQUEyQixVQUFVLDhCQUE4QixRQUFRLDRCQUE0QixRQUFRLDRCQUE0QixXQUFXLHdCQUF3QixXQUFXLHFCQUFxQix3QkFBd0Isa0NBQWtDLGtCQUFrQixnQkFBZ0IseUJBQXlCLFlBQVkscUVBQXFFLCtDQUErQyx5SUFBeUksd0RBQXdELCtDQUErQyxjQUFjLHFCQUFxQixzQ0FBc0MsNEVBQTRFLG1CQUFtQixxRkFBcUYseURBQXlELG9DQUFvQyxRQUFRLGNBQWMsK0NBQStDLFNBQVMsaUNBQWlDLFNBQVMsaURBQWlELHVEQUF1RCxjQUFjLFFBQVEsZUFBZSxpQ0FBaUMsYUFBYSxzQkFBc0IsV0FBVyw2QkFBNkIsUUFBUSxPQUFPLDREQUFDLGNBQWMsUUFBUSxPQUFPLDBEQUFDLGNBQWMsVUFBVSxzQ0FBc0Msa0JBQWtCLDZDQUE2Qyw4Q0FBOEMsc0RBQXNELGtCQUFrQixFQUFFLGNBQWMsOENBQThDLHdDQUF3QyxtQkFBbUIsR0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9VQnl0ZUFycmF5LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9saWJzL2kzcy9JM1NNb2R1bGUuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9Db250ZW50R2VvbWV0cnlMYXllclZpZXcuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9JM1NNZXNoVmlldzNELmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvSTNTTWVzaFZpZXdMYWJlbGVyLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvSTNTTWVzaFZpZXdQZXJmb3JtYW5jZUluZm8uanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9JSTNTTWVzaFZpZXczRC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL1NjZW5lTGF5ZXJXb3JrZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSGlnaGxpZ2h0cy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NBc3luY0VsZXZhdGlvblVwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTQ3Jvc3NmYWRlSGVscGVyLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0dlb21ldHJ5VXRpbC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NJbnRlcnNlY3Rpb25IYW5kbGVyLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0lEQkNhY2hlLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0lEQk1vY2tDYWNoZS5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9TeW1ib2xvZ3lJbmZvLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvc3VwcG9ydC9hdHRyaWJ1dGVVdGlscy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvc3VwcG9ydC9HcmFwaGljc01hcC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvc3VwcG9ydC9MaW1pdEdyYXBoaWNzTWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7bmF0aXZlQXJyYXlNYXhTaXplIGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS90eXBlZEFycmF5VXRpbC5qc1wiO2Z1bmN0aW9uIGUoZSxuPSExKXtyZXR1cm4gZTw9cj9uP25ldyBBcnJheShlKS5maWxsKDApOm5ldyBBcnJheShlKTpuZXcgVWludDhBcnJheShlKX1leHBvcnR7ZSBhcyBuZXdVQnl0ZUFycmF5fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0QXNzZXRVcmwgYXMgdH1mcm9tXCIuLi8uLi9hc3NldHMuanNcIjtmdW5jdGlvbiBlKCl7cmV0dXJuIG58fChuPW5ldyBQcm9taXNlKCh0PT5pbXBvcnQoXCIuLi8uLi9jaHVua3MvaTNzLmpzXCIpLnRoZW4oKHQ9PnQuaSkpLnRoZW4oKCh7ZGVmYXVsdDplfSk9Pntjb25zdCBuPWUoe2xvY2F0ZUZpbGU6aSxvblJ1bnRpbWVJbml0aWFsaXplZDooKT0+dChuKX0pO2RlbGV0ZSBuLnRoZW59KSkpKS5jYXRjaCgodD0+e3Rocm93IHR9KSkpLG59ZnVuY3Rpb24gaShlKXtyZXR1cm4gdChgZXNyaS9saWJzL2kzcy8ke2V9YCl9bGV0IG47ZXhwb3J0e2UgYXMgZ2V0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBye2NvbnN0cnVjdG9yKHIpe3RoaXMucmVuZGVyQm91bmRzPXJ9fWV4cG9ydHtyIGFzIENvbnRlbnRHZW9tZXRyeVVwZGF0ZUV2ZW50fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9Db2xvci5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL0dyYXBoaWMuanNcIjtpbXBvcnR7cmVtb3ZlVW5vcmRlcmVkIGFzIHMsaXNTb21lIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e0J5dGVTaXplVW5pdCBhcyBvfWZyb21cIi4uLy4uLy4uL2NvcmUvQnl0ZVNpemVVbml0LmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2VxdWFscyBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIGx9ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydCBkIGZyb21cIi4uLy4uLy4uL2NvcmUvUG9vbGVkQXJyYXkuanNcIjtpbXBvcnR7aWdub3JlQWJvcnRFcnJvcnMgYXMgaCxpc0Fib3J0RXJyb3IgYXMgYyx0aHJvd0lmQWJvcnRlZCBhcyB1LGNyZWF0ZVJlc29sdmVyIGFzIF99ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7aW5pdGlhbCBhcyBtLHdhdGNoIGFzIGd9ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3NjaGVkdWxlIGFzIGZ9ZnJvbVwiLi4vLi4vLi4vY29yZS9zY2hlZHVsaW5nLmpzXCI7aW1wb3J0e2VxdWFscyBhcyBwfWZyb21cIi4uLy4uLy4uL2NvcmUvU2V0VXRpbHMuanNcIjtpbXBvcnR7aXNBcnJheUJ1ZmZlciBhcyB5fWZyb21cIi4uLy4uLy4uL2NvcmUvdHlwZWRBcnJheVV0aWwuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgYn1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIEl9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtmcm9tTWF0NCBhcyB2LGludmVydCBhcyBDfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9tYXRoL21hdDMuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIE19ZnJvbVwiLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy9tYXQzZjY0LmpzXCI7aW1wb3J0e211bHRpcGx5IGFzIHcsZ2V0VHJhbnNsYXRpb24gYXMgeH1mcm9tXCIuLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvbWF0aC9tYXQ0LmpzXCI7aW1wb3J0e2Nsb25lIGFzIEUsY3JlYXRlIGFzIFJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy9tYXQ0ZjY0LmpzXCI7aW1wb3J0e2Zyb21WYWx1ZXMgYXMgT31mcm9tXCIuLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3F1YXRmNjQuanNcIjtpbXBvcnR7aSBhcyBqLHQgYXMgUyxvIGFzIEEsYSBhcyBULGYgYXMgRCxnIGFzIEYsZCBhcyBWLEggYXMgTn1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdmVjMzIuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIFB9ZnJvbVwiLi4vLi4vLi4vY29yZS9saWJzL2dsLW1hdHJpeC0yL2ZhY3Rvcmllcy92ZWMzZjY0LmpzXCI7aW1wb3J0e3MgYXMgSH1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdmVjNDIuanNcIjtpbXBvcnR7ZnJvbVZhbHVlcyBhcyBVfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjNGY2NC5qc1wiO2ltcG9ydHtVcGRhdGluZ0hhbmRsZXMgYXMga31mcm9tXCIuLi8uLi8uLi9jb3JlL3N1cHBvcnQvVXBkYXRpbmdIYW5kbGVzLmpzXCI7aW1wb3J0e2dldFNwaGVyaWNhbFBDUEYgYXMgTH1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zcGF0aWFsUmVmZXJlbmNlRWxsaXBzb2lkVXRpbHMuanNcIjtpbXBvcnR7bG9jYWxMaW5lYXJTY2FsZUZhY3RvcnMgYXMgR31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL2xvY2FsTGluZWFyU2NhbGVGYWN0b3JzLmpzXCI7aW1wb3J0e3Byb2plY3RCb3VuZGluZ1NwaGVyZSBhcyBCfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJvdW5kaW5nU3BoZXJlLmpzXCI7aW1wb3J0e3Byb2plY3RCdWZmZXIgYXMgcX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCdWZmZXIuanNcIjtpbXBvcnR7Z2V0UHJvamVjdG9yTmFtZSBhcyBXfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdG9ycy5qc1wiO2ltcG9ydHtwcm9qZWN0VmVjdG9yVG9WZWN0b3IgYXMgen1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RWZWN0b3JUb1ZlY3Rvci5qc1wiO2ltcG9ydHtmcm9tQnVmZmVyIGFzIEssY3JlYXRlIGFzICQsdG9SZWN0IGFzIFF9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBYLGludGVyc2VjdHMgYXMgWX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e25ld0RvdWJsZUFycmF5IGFzIEp9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9Eb3VibGVBcnJheS5qc1wiO2ltcG9ydHtjb21wYWN0RmxvYXRBcnJheSBhcyBafWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRmxvYXRBcnJheS5qc1wiO2ltcG9ydHtjb21wYWN0SW5kaWNlcyBhcyBlZX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L0luZGljZXMuanNcIjtpbXBvcnR7YSBhcyB0ZSxmIGFzIGllLGcgYXMgc2V9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3NwaGVyZS5qc1wiO2ltcG9ydHtuZXdVQnl0ZUFycmF5IGFzIHJlfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvVUJ5dGVBcnJheS5qc1wiO2ltcG9ydHtmYWxsYmFja09iamVjdElEQXR0cmlidXRlIGFzIG9lfWZyb21cIi4uLy4uLy4uL2xheWVycy9MYXllckNvbnN0YW50cy5qc1wiO2ltcG9ydCBhZSBmcm9tXCIuLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvY29udHJvbGxlcnMvSTNTT25EZW1hbmRDb250cm9sbGVyLmpzXCI7aW1wb3J0e2ZpeEZpZWxkcyBhcyBuZX1mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9maWVsZFV0aWxzLmpzXCI7aW1wb3J0IGxlIGZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L1NjZW5lTW9kaWZpY2F0aW9uLmpzXCI7aW1wb3J0e2dldENvbG9yIGFzIGRlLGdldE9wYWNpdHkgYXMgaGV9ZnJvbVwiLi4vLi4vLi4vcmVuZGVyZXJzL3Zpc3VhbFZhcmlhYmxlcy9zdXBwb3J0L3Zpc3VhbFZhcmlhYmxlVXRpbHMuanNcIjtpbXBvcnR7aXNCYXNlbWFwTGF5ZXJWaWV3IGFzIGNlfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYmFzZW1hcFV0aWxzLmpzXCI7aW1wb3J0e2dldEVsZXZhdGlvbk9mZnNldCBhcyB1ZX1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2VsZXZhdGlvbkluZm9VdGlscy5qc1wiO2ltcG9ydHtpc1F1ZXJ5IGFzIF9lfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvZ3VhcmRzLmpzXCI7aW1wb3J0e2xvYWRBcmNhZGUgYXMgbWV9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9sb2FkQXJjYWRlLmpzXCI7aW1wb3J0IGdlIGZyb21cIi4uLy4uLy4uL3N5bWJvbHMvTWVzaFN5bWJvbDNELmpzXCI7aW1wb3J0IGZlIGZyb21cIi4uLy4uLy4uL3N5bWJvbHMvU2ltcGxlRmlsbFN5bWJvbC5qc1wiO2ltcG9ydHtDb250ZW50R2VvbWV0cnlVcGRhdGVFdmVudCBhcyBwZX1mcm9tXCIuL0NvbnRlbnRHZW9tZXRyeUxheWVyVmlldy5qc1wiO2ltcG9ydCB5ZSBmcm9tXCIuL0kzU01lc2hWaWV3TGFiZWxlci5qc1wiO2ltcG9ydHtJM1NNZXNoVmlld1BlcmZvcm1hbmNlSW5mbyBhcyBiZX1mcm9tXCIuL0kzU01lc2hWaWV3UGVyZm9ybWFuY2VJbmZvLmpzXCI7aW1wb3J0e0kzU01lc2hXb3JrZXJIYW5kbGUgYXMgSWUsdG9XYXNtTW9kaWZpY2F0aW9uIGFzIHZlfWZyb21cIi4vSTNTTWVzaFdvcmtlckhhbmRsZS5qc1wiO2ltcG9ydHtFbGV2YXRpb25Nb2RlIGFzIENlLEZvckFsbEZlYXR1cmVzUmV0dXJuVHlwZSBhcyBNZSxGb3JBbGxGZWF0dXJlc01vZGUgYXMgd2V9ZnJvbVwiLi9JSTNTTWVzaFZpZXczRC5qc1wiO2ltcG9ydHtpbml0aWFsaXplIGFzIHhlLHNldE1vZGlmaWNhdGlvbnNTeW5jIGFzIEVlLGZpbHRlck9iYnNGb3JNb2RpZmljYXRpb25zU3luYyBhcyBSZSxpbnRlcnByZXRPYmJNb2RpZmljYXRpb25SZXN1bHRzIGFzIE9lfWZyb21cIi4vU2NlbmVMYXllcldvcmtlci5qc1wiO2ltcG9ydHtvdmVycmlkZUNvbG9yIGFzIGplfWZyb21cIi4vZ3JhcGhpY3MvZ3JhcGhpY1V0aWxzLmpzXCI7aW1wb3J0e2FyZUxhYmVsc1Zpc2libGUgYXMgU2V9ZnJvbVwiLi9ncmFwaGljcy9MYWJlbGVyLmpzXCI7aW1wb3J0e1RleHR1cmVVc2FnZSBhcyBBZSxUZXh0dXJlRW5jb2RpbmcgYXMgVGV9ZnJvbVwiLi9pM3MvZW51bXMuanNcIjtpbXBvcnQgRGUgZnJvbVwiLi9pM3MvSGlnaGxpZ2h0cy5qc1wiO2ltcG9ydHtJM1NBc3luY0VsZXZhdGlvblVwZGF0ZXIgYXMgRmV9ZnJvbVwiLi9pM3MvSTNTQXN5bmNFbGV2YXRpb25VcGRhdGVyLmpzXCI7aW1wb3J0e2dldENhY2hlZEF0dHJpYnV0ZVZhbHVlIGFzIFZlfWZyb21cIi4vaTNzL0kzU0JpbmFyeVJlYWRlci5qc1wiO2ltcG9ydHtJM1NDcm9zc2ZhZGVIZWxwZXIgYXMgTmUsTm9kZUNyb3NzZmFkZU1ldGFEYXRhIGFzIFBlfWZyb21cIi4vaTNzL0kzU0Nyb3NzZmFkZUhlbHBlci5qc1wiO2ltcG9ydHtib3VuZGluZ0JveENvcm5lclBvaW50cyBhcyBIZX1mcm9tXCIuL2kzcy9JM1NHZW9tZXRyeVV0aWwuanNcIjtpbXBvcnR7STNTSW50ZXJzZWN0aW9uSGFuZGxlciBhcyBVZX1mcm9tXCIuL2kzcy9JM1NJbnRlcnNlY3Rpb25IYW5kbGVyLmpzXCI7aW1wb3J0e2dldFN1cHBvcnRlZEVuY29kaW5ncyBhcyBrZSxzZWxlY3RFbmNvZGluZyBhcyBMZSxkZWZhdWx0TWF0ZXJpYWwgYXMgR2UsY3JlYXRlVGV4dHVyZSBhcyBCZSxjb25maWd1cmVNYXRlcmlhbCBhcyBxZX1mcm9tXCIuL2kzcy9JM1NNYXRlcmlhbFV0aWwuanNcIjtpbXBvcnR7Tm9kZUlNTW9kaWZpY2F0aW9uSW1wYWN0IGFzIFdlLE5vZGVTdGF0ZSBhcyB6ZX1mcm9tXCIuL2kzcy9JM1NOb2RlLmpzXCI7aW1wb3J0e0kzU092ZXJyaWRlcyBhcyBLZX1mcm9tXCIuL2kzcy9JM1NPdmVycmlkZXMuanNcIjtpbXBvcnR7Y29tcHV0ZUdsb2JhbFRyYW5zZm9ybWF0aW9uIGFzICRlfWZyb21cIi4vaTNzL0kzU1Byb2plY3Rpb25VdGlsLmpzXCI7aW1wb3J0e3JlbmRlcmVyTmVlZHNUZXh0dXJlcyBhcyBRZSxjaGVja1NjZW5lTGF5ZXJWYWxpZCBhcyBYZSxjaGVja1NjZW5lTGF5ZXJDb21wYXRpYmxlV2l0aFZpZXcgYXMgWWUsd2hlbkdyYXBoaWNBdHRyaWJ1dGVzIGFzIEplLGNvbXB1dGVWaXNpYmlsaXR5T2JiIGFzIFplLGZpbHRlckluUGxhY2UgYXMgZXQsaW50ZXJzZWN0Qm91bmRpbmdSZWN0V2l0aE1icyBhcyB0dCxNYnNJbnRlcnNlY3RSZXN1bHQgYXMgaXQsYWRkV3JhcGFyb3VuZCBhcyBzdCxnZXRTeW1ib2xJbmZvIGFzIHJ0LHRyYW5zcGFyZW50RWRnZU1hdGVyaWFsIGFzIG90LGdldENsaXBSZWN0IGFzIGF0fWZyb21cIi4vaTNzL0kzU1V0aWwuanNcIjtpbXBvcnR7SURCQ2FjaGUgYXMgbnR9ZnJvbVwiLi9pM3MvSURCQ2FjaGUuanNcIjtpbXBvcnR7SURCTW9ja0NhY2hlIGFzIGx0fWZyb21cIi4vaTNzL0lEQk1vY2tDYWNoZS5qc1wiO2ltcG9ydHtMYXllckVsZXZhdGlvblByb3ZpZGVyIGFzIGR0fWZyb21cIi4vaTNzL0xheWVyRWxldmF0aW9uUHJvdmlkZXIuanNcIjtpbXBvcnR7U3ltYm9sb2d5SW5mbyBhcyBodH1mcm9tXCIuL2kzcy9TeW1ib2xvZ3lJbmZvLmpzXCI7aW1wb3J0e2F0dHJpYnV0ZUxvb2t1cCBhcyBjdH1mcm9tXCIuL3N1cHBvcnQvYXR0cmlidXRlVXRpbHMuanNcIjtpbXBvcnR7ZW1wdHlIaWdobGlnaHRIYW5kbGUgYXMgdXQsbm9ybWFsaXplSGlnaGxpZ2h0VGFyZ2V0RXhjZXB0UXVlcnkgYXMgX3R9ZnJvbVwiLi9zdXBwb3J0L2hpZ2hsaWdodFV0aWxzLmpzXCI7aW1wb3J0e21ha2VTY2hlZHVsZUZ1bmN0aW9uIGFzIG10fWZyb21cIi4vc3VwcG9ydC9tYWtlU2NoZWR1bGVGdW5jdGlvbi5qc1wiO2ltcG9ydHtDb2xvck1peE1vZGVFbnVtIGFzIGd0fWZyb21cIi4vc3VwcG9ydC9zeW1ib2xDb2xvclV0aWxzLmpzXCI7aW1wb3J0e2RlYnVnRmxhZ3MgYXMgZnR9ZnJvbVwiLi4vc3VwcG9ydC9kZWJ1Z0ZsYWdzLmpzXCI7aW1wb3J0e0VsZXZhdGlvblJhbmdlIGFzIHB0fWZyb21cIi4uL3N1cHBvcnQvRWxldmF0aW9uUmFuZ2UuanNcIjtpbXBvcnR7dG9Cb3VuZGluZ1JlY3QgYXMgeXR9ZnJvbVwiLi4vc3VwcG9ydC9leHRlbnRVdGlscy5qc1wiO2ltcG9ydHtPYmIgYXMgYnR9ZnJvbVwiLi4vc3VwcG9ydC9vcmllbnRlZEJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e3VwZGF0aW5nUHJvZ3Jlc3MgYXMgSXR9ZnJvbVwiLi4vc3VwcG9ydC91cGRhdGluZ1Byb3BlcnRpZXMuanNcIjtpbXBvcnR7Z2xMYXlvdXQgYXMgdnR9ZnJvbVwiLi4vc3VwcG9ydC9idWZmZXIvZ2xVdGlsLmpzXCI7aW1wb3J0e09iamVjdFBhcmFtZXRlcnMgYXMgQ3R9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2NvbGxlY3Rpb25zL0NvbXBvbmVudC9PYmplY3RQYXJhbWV0ZXJzLmpzXCI7aW1wb3J0e2NyZWF0ZVZlcnRleEJ1ZmZlckxheW91dCBhcyBNdCxHZW9tZXRyeVBhcmFtZXRlcnMgYXMgd3R9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2NvbGxlY3Rpb25zL0NvbXBvbmVudC9Tb3VyY2VHZW9tZXRyeS5qc1wiO2ltcG9ydHtUcmFuc2Zvcm0gYXMgeHR9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2NvbGxlY3Rpb25zL0NvbXBvbmVudC9UcmFuc2Zvcm0uanNcIjtpbXBvcnR7VGV4dHVyZUNvb3JkaW5hdGVUeXBlIGFzIEV0fWZyb21cIi4uL3dlYmdsLWVuZ2luZS9jb3JlL3NoYWRlckxpYnJhcnkvYXR0cmlidXRlcy9UZXh0dXJlQ29vcmRpbmF0ZUF0dHJpYnV0ZS5nbHNsLmpzXCI7aW1wb3J0e2xvYWRCYXNpc1RyYW5zY29kZXIgYXMgUnR9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2xpYi9CYXNpc1V0aWwuanNcIjtpbXBvcnR7VHJhbnNwYXJlbmN5IGFzIE90fWZyb21cIi4uL3dlYmdsLWVuZ2luZS9saWIvZWRnZVJlbmRlcmluZy9pbnRlcmZhY2VzLmpzXCI7aW1wb3J0e2RlZmF1bHRIaWdobGlnaHROYW1lIGFzIGp0fWZyb21cIi4uLy4uL3N1cHBvcnQvSGlnaGxpZ2h0RGVmYXVsdHMuanNcIjtpbXBvcnR7VGV4dHVyZUNvbXByZXNzaW9uVHJhY2tlciBhcyBTdH1mcm9tXCIuLi8uLi9zdXBwb3J0L1RleHR1cmVDb21wcmVzc2lvblRyYWNrZXIuanNcIjtpbXBvcnR7YWxwaGFDdXRvZmYgYXMgQXR9ZnJvbVwiLi4vLi4vLi4vd2Vic2NlbmUvc3VwcG9ydC9BbHBoYUN1dG9mZi5qc1wiO2NvbnN0IFR0PVsxLDEsMSwxXTtjbGFzcyBEdCBleHRlbmRzIFBle2NvbnN0cnVjdG9yKGUsdCxpLHMscixvLGEsbixsKXtzdXBlcigpLHRoaXMubm9kZT1lLHRoaXMuZmVhdHVyZUlkcz10LHRoaXMub2JqZWN0SGFuZGxlPWksdGhpcy5jYWNoZWRSZW5kZXJlclZlcnNpb249cyx0aGlzLmF0dHJpYnV0ZUluZm89cix0aGlzLm1hdGVyaWFsPW8sdGhpcy50ZXh0dXJlcz1hLHRoaXMuYW5jaG9ySWRzPW4sdGhpcy5hbmNob3JzPWwsdGhpcy5jYWNoZWRFbGV2YXRpb25BbmNob3JzPW51bGwsdGhpcy5jYWNoZWRFZGdlTWF0ZXJpYWxzPW5ldyBBcnJheSx0aGlzLmVkZ2VNZW1vcnlVc2FnZT0wfWdldCBjYWNoZWRNZW1vcnkoKXtyZXR1cm4gdGhpcy5ub2RlLm1lbW9yeX1nZXQgZmVhdHVyZUV4dGVudHMoKXtyZXR1cm4gdGhpcy5fZmVhdHVyZUV4dGVudHM/Pz1uZXcgRmxvYXQ2NEFycmF5KDYqdGhpcy5mZWF0dXJlSWRzLmxlbmd0aCkuZmlsbChOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLHRoaXMuX2ZlYXR1cmVFeHRlbnRzfX12YXIgRnQ7IWZ1bmN0aW9uKGUpe2VbZS5DYXN0U2hhZG93cz00XT1cIkNhc3RTaGFkb3dzXCIsZVtlLlBpY2thYmxlPTVdPVwiUGlja2FibGVcIn0oRnR8fChGdD17fSkpO2NvbnN0IFZ0PTI2LE50PTEwMCpvLk1FR0FCWVRFUyxQdD10PT57bGV0IG89Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9hcHBseVNTQU89ITAsdGhpcy5fc2hhZGVOb3JtYWxzPSEwLHRoaXMuX3VwZGF0aW5nSGFuZGxlcz1uZXcgayx0aGlzLl9ub2RlSWQyTWV0YT1uZXcgTWFwLHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nPW5ldyBNYXAsdGhpcy5faTNzV2FzbUxvYWRlZD0hMSx0aGlzLl9zbmFwcGluZ1NvdXJjZXNUcmFja2Vycz1bXSx0aGlzLl9jb21wcmVzc2lvblRyYWNrZXI9bmV3IFN0LHRoaXMuX2hhc0xvYWRlZFBCUlRleHR1cmVzPSExLHRoaXMuX2FzeW5jTW9kdWxlTG9hZGluZz0wLHRoaXMuX2FkZFRhc2tzPW5ldyBNYXAsdGhpcy5fY3VycmVudFJlbmRlcmVyPW51bGwsdGhpcy5fcmVuZGVyZXJWZXJzaW9uPTAsdGhpcy5fY29sb3JWYXJpYWJsZT1udWxsLHRoaXMuX29wYWNpdHlWYXJpYWJsZT1udWxsLHRoaXMuX3JlbmRlcmVyRmllbGRzPW51bGwsdGhpcy5fc3ltYm9sb2d5RmllbGRzPW51bGwsdGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGU9bnVsbCx0aGlzLl9zeW1ib2xvZ3lPdmVycmlkZUZpZWxkcz1udWxsLHRoaXMuX3N5bWJvbEluZm9zPW5ldyBNYXAsdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsLHRoaXMuX2hhc0NvbXBvbmVudERhdGE9ITEsdGhpcy5faGFzVmVydGV4Q29sb3JzPSExLHRoaXMuX25vZGVDb2xvck92ZXJyaWRlPW51bGwsdGhpcy51cGRhdGluZz0hMCx0aGlzLmhvbGVGaWxsaW5nPVwiYXV0b1wiLHRoaXMuX2hhc0NvbG9ycz0hMSx0aGlzLl9oYXNUZXh0dXJlcz0hMSx0aGlzLl9oYXNEYXRhPSExLHRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ9ITEsdGhpcy5fbW9kaWZpY2F0aW9ucz1uZXcgQXJyYXksdGhpcy5pZ25vcmVzTWVtb3J5RmFjdG9yPSExLHRoaXMuX2xheWVyVXJsPVwiXCIsdGhpcy5fY2FjaGVLZXlTdWZmaXg9bnVsbCx0aGlzLl9wbGFuZXRSYWRpdXNJbkdsb2JhbE1vZGU9MCx0aGlzLl9lbGV2YXRpb25UYXNrPW51bGwsdGhpcy5fbmVlZEZpbHRlclJlc29sdmU9ITEsdGhpcy5fZmlsdGVycz1bXSx0aGlzLl9hcmNhZGU9bnVsbCx0aGlzLl90bXBBdHRyaWJ1dGVPbmx5R3JhcGhpYz1uZXcgaSx0aGlzLl9jcm9zc2ZhZGVIZWxwZXI9bmV3IE5lKHRoaXMpfWdldCBsb2RDcm9zc2ZhZGVvdXREdXJhdGlvbigpe3JldHVybiAwfWdldCBsb2RDcm9zc2ZhZGVpbkR1cmF0aW9uKCl7cmV0dXJuIDB9Z2V0IGxvZENyb3NzZmFkZVVuY292ZXJlZER1cmF0aW9uKCl7cmV0dXJuIDB9Z2V0IGxheWVyVmlld1VpZCgpe3JldHVybiB0aGlzLnVpZH1nZXQgbGF5ZXJJZCgpe3JldHVybiB0aGlzLmkzc2xheWVyJiZ0aGlzLmkzc2xheWVyLmlkfWdldCBzdWJsYXllcklkKCl7cmV0dXJuIG51bGx9Z2V0IF9pc0ludGVncmF0ZWRNZXNoKCl7cmV0dXJuXCJpbnRlZ3JhdGVkLW1lc2hcIj09PXRoaXMuaTNzbGF5ZXIudHlwZX1nZXQgY29udGVudFZpc2libGUoKXtyZXR1cm4hdGhpcy5zdXNwZW5kZWQmJnRoaXMuX2NvbnRyb2xsZXI/LnJvb3ROb2RlVmlzaWJsZSYmdGhpcy5mdWxsT3BhY2l0eT5BdH1nZXQgbGVnZW5kRW5hYmxlZCgpe3JldHVybiB0aGlzLmNvbnRlbnRWaXNpYmxlJiYhMD09PXRoaXMuaTNzbGF5ZXI/LmxlZ2VuZEVuYWJsZWR9Z2V0IHVwZGF0aW5nUHJvZ3Jlc3NWYWx1ZSgpe3JldHVybiB0aGlzLl9jb250cm9sbGVyPy51cGRhdGluZ1Byb2dyZXNzPz8wfWdldCBoYXNUZXh0dXJlc09yVmVydGV4Q29sb3JzKCl7cmV0dXJuIHRoaXMuX2hhc0RhdGE/dGhpcy5faGFzVGV4dHVyZXN8fHRoaXMuX2hhc0NvbG9ycz9cInllc1wiOlwicHJvYmFibHktbm90XCI6XCJ1bmtub3duXCJ9Z2V0IHJlbmRlcmVyVGV4dHVyZVVzYWdlKCl7cmV0dXJuIFFlKHRoaXMuX2N1cnJlbnRSZW5kZXJlcik/dGhpcy5fdXNlUEJSfHx0aGlzLl9oYXNMb2FkZWRQQlJUZXh0dXJlcz9BZS5BbGxUZXh0dXJlc1BCUjpBZS5BbGxUZXh0dXJlczp0aGlzLl91c2VQQlJ8fHRoaXMuX2hhc0xvYWRlZFBCUlRleHR1cmVzP0FlLkdlb21ldHJ5VGV4dHVyZXNQQlI6QWUuR2VvbWV0cnlUZXh0dXJlc31nZXQgZWxldmF0aW9uT2Zmc2V0KCl7Y29uc3QgZT1udWxsIT10aGlzLmkzc2xheWVyP3RoaXMuaTNzbGF5ZXIuZWxldmF0aW9uSW5mbzpudWxsO3JldHVybiBudWxsIT1lJiZcImFic29sdXRlLWhlaWdodFwiPT09ZS5tb2RlP3VlKGUsdGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlKTowfWdldCBlbGV2YXRpb25JbmZvKCl7Y29uc3QgZT1udWxsIT10aGlzLmkzc2xheWVyP3RoaXMuaTNzbGF5ZXIuZWxldmF0aW9uSW5mbzpudWxsO2lmKG51bGw9PWUpcmV0dXJuIG5ldyBKdChDZS5BYnNvbHV0ZSwwKTtjb25zdCB0PXVlKGUsdGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlKTtzd2l0Y2goZS5tb2RlKXtjYXNlXCJhYnNvbHV0ZS1oZWlnaHRcIjpyZXR1cm4gbmV3IEp0KENlLkFic29sdXRlLHQpO2Nhc2VcInJlbGF0aXZlLXRvLWdyb3VuZFwiOnJldHVybiBuZXcgSnQoQ2UuUmVsYXRpdmVUb0dyb3VuZCx0KTtjYXNlXCJvbi10aGUtZ3JvdW5kXCI6cmV0dXJuIG5ldyBKdChDZS5PblRoZUdyb3VuZCwwKTtkZWZhdWx0OnJldHVybiBuZXcgSnQoQ2UuQWJzb2x1dGUsMCl9fWdldCBzdXBwb3J0ZWRUZXh0dXJlRW5jb2RpbmdzKCl7cmV0dXJuIGtlKHRoaXMudmlldy5zdGFnZS5yZW5kZXJWaWV3LmNhcGFiaWxpdGllcyl9Z2V0IGNsaWVudEdlb21ldHJ5KCl7cmV0dXJuIHRoaXMuaTNzT3ZlcnJpZGVzLmdlb21ldHJ5T3ZlcnJpZGVzfWdldCBlbGV2YXRpb25SYW5nZSgpe2NvbnN0IGU9dGhpcy5fbm9kZUlkMk1ldGEsdD1uZXcgcHQ7Zm9yKGNvbnN0IGkgb2YgZS52YWx1ZXMoKSl7aWYobnVsbD09aSljb250aW51ZTtjb25zdHtub2RlOntzZXJ2aWNlTWJzSW5JbmRleFNSOmV9fT1pLFtzLHIsbyxhXT1lO3QuZXhwYW5kRWxldmF0aW9uUmFuZ2VWYWx1ZXMoby1hLG8rYSl9cmV0dXJuIHQuZWxldmF0aW9uUmFuZ2VWYWxpZD90Om51bGx9Z2V0IGZ1bGxFeHRlbnQoKXtyZXR1cm4gdGhpcy5pM3NsYXllci5mdWxsRXh0ZW50fWluaXRpYWxpemUoKXtjb25zdCBlPWhhcyhcImVuYWJsZS1mZWF0dXJlOmlkYi1tb2NrLWNhY2hlXCIpO3RoaXMuX2lkYkNhY2hlPWU/bmV3IGx0KHRoaXMudmlldyxlKTpuZXcgbnQoXCJlc3JpLXNjZW5lbGF5ZXItY2FjaGVcIixcImdlb21ldHJpZXNcIiksdGhpcy5fcHJlTG9hZEJhc2lzKCksdGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKHRoaXMuaTNzbGF5ZXIuaW5kZXhJbmZvKTtjb25zdCB0PXRoaXMudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIsaT10Lm1lbW9yeUNvbnRyb2xsZXI7dGhpcy5pM3NPdmVycmlkZXM9bmV3IEtlKHt2aWV3OnRoaXMudmlldyxsYXllcjp0aGlzLmkzc2xheWVyLG1lbW9yeUNvbnRyb2xsZXI6aX0pLHRoaXMuX3dvcmtlcj1uZXcgSWUobXQodCkpLHRoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZSh0aGlzLl93b3JrZXIucHJvbWlzZSk7Y29uc3Qgcz10aGlzLmkzc2xheWVyLnN0b3JlO3RoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZSh0aGlzLl93b3JrZXIuc2V0TGVnYWN5U2NoZW1hKHRoaXMudWlkLHMuZGVmYXVsdEdlb21ldHJ5U2NoZW1hKS5jYXRjaChoKSksWGUodGhpcy5pM3NsYXllciksWWUodGhpcy5pM3NsYXllcix0aGlzLnZpZXcpLHRoaXMuX2xheWVyVXJsPXRoaXMuaTNzbGF5ZXIucGFyc2VkVXJsLnBhdGgsdGhpcy5fY29udHJvbGxlcj1uZXcgYWUoe2xheWVyVmlldzp0aGlzLHdvcmtlcjp0aGlzLl93b3JrZXJ9KSx0aGlzLl9ncHVNZW1vcnlFc3RpbWF0ZT0wLHRoaXMuX3RleE1lbW9yeUVzdGltYXRlPTAsdGhpcy5fZ2VvTWVtb3J5RXN0aW1hdGU9MCx0aGlzLl9zdGFnZT10aGlzLnZpZXcuc3RhZ2UsdGhpcy5fY29sbGVjdGlvbj10aGlzLl9zdGFnZS5yZW5kZXJWaWV3LmNvbXBvbmVudE9iamVjdENvbGxlY3Rpb24sdGhpcy5yZXNldEhpZ2hsaWdodHMoKTtjb25zdCByPXMuZGVmYXVsdEdlb21ldHJ5U2NoZW1hO2lmKHRoaXMuX2lzSW50ZWdyYXRlZE1lc2h8fCFyKXRoaXMuX2hhc0NvbXBvbmVudERhdGE9ITE7ZWxzZXtjb25zdCBlPXIuZmVhdHVyZUF0dHJpYnV0ZXM7dGhpcy5faGFzQ29tcG9uZW50RGF0YT0hIShlJiZlLmZhY2VSYW5nZSYmZS5pZCl9dGhpcy5faGFzVmVydGV4Q29sb3JzPW51bGwhPShyPy52ZXJ0ZXhBdHRyaWJ1dGVzLmNvbG9yPz9udWxsKSYmIXRoaXMuaTNzbGF5ZXIuY2FjaGVkRHJhd2luZ0luZm8/LmNvbG9yO2NvbnN0IG89dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5tZW1vcnlDb250cm9sbGVyLm5ld0NhY2hlKGBzbC0ke3RoaXMudWlkfWAsKGU9PnRoaXMuX2RlbGV0ZUNvbXBvbmVudE9iamVjdChlKSkpO3RoaXMuX21lbUNhY2hlPW87Y29uc3Qgbj10aGlzLl9jb250cm9sbGVyLGQ9dGhpcy5fbm9kZUlkMk1ldGEsYz10aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZyx1PWU9Pntjb25zdCB0PW4uaW5kZXg7aWYoIXQpcmV0dXJuO2NvbnN0IGk9dC5yb290Tm9kZTtpZighaSlyZXR1cm47Y29uc3Qgcz10PT57Y29uc3QgaT10LmluZGV4LHM9ZC5nZXQoaSl8fGMuZ2V0KGkpO3JldHVybiBlKHQscz8ub2JqZWN0SGFuZGxlPz9udWxsKX07dC50cmF2ZXJzZShpLHMpfTt0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyPW5ldyBVZSh7bGF5ZXJWaWV3VWlkOnRoaXMubGF5ZXJWaWV3VWlkLHN1YmxheWVySWQ6dGhpcy5zdWJsYXllcklkLGNvbGxlY3Rpb246dGhpcy5fY29sbGVjdGlvbixzbGljZVBsYW5lRW5hYmxlZDp0aGlzLnNsaWNlUGxhbmVFbmFibGVkLGlzR3JvdW5kOnRoaXMuX2lzSW50ZWdyYXRlZE1lc2gsdHJhdmVyc2VOb2RlSGllcmFyY2h5OnV9KSx0aGlzLl9lbGV2YXRpb25Qcm92aWRlcj1uZXcgZHQoe3ZpZXc6dGhpcy52aWV3LGxheWVyRWxldmF0aW9uU291cmNlOnRoaXMsaW50ZXJzZWN0aW9uSGFuZGxlcjp0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyfSksdGhpcy5faGFzTG9hZGVkUEJSVGV4dHVyZXM9dGhpcy5fdXNlUEJSLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLnZpZXcuY2xpcHBpbmdBcmVhKSwoKCk9PnRoaXMuX2NsaXBwaW5nQXJlYUNoYW5nZWQoKSksbSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuZnVsbE9wYWNpdHkpLChlPT50aGlzLl9vcGFjaXR5Q2hhbmdlKGUpKSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuc2xpY2VQbGFuZUVuYWJsZWQpLChlPT50aGlzLl9zbGljZVBsYW5lRW5hYmxlZENoYW5nZShlKSkpLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLmVsZXZhdGlvbk9mZnNldCksKChlLHQpPT57dGhpcy5fcmVsb2FkQWxsKHQpLHRoaXMuX2NvbnRyb2xsZXIuaW52YWxpZGF0ZVZpc2liaWxpdHlPYmJzKCl9KSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuZWxldmF0aW9uSW5mbyksKChlLHQpPT50aGlzLl9lbGV2YXRpb25JbmZvQ2hhbmdlZChlLHQpKSxtKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+IXRoaXMuc3VzcGVuZGVkJiZ0aGlzLmVsZXZhdGlvbkluZm8ubW9kZSE9PUNlLkFic29sdXRlKSwoKGUsdCk9PntlP3RoaXMuYWRkSGFuZGxlcyh0aGlzLnZpZXcuYmFzZW1hcFRlcnJhaW4ub24oXCJlbGV2YXRpb24tY2hhbmdlXCIsKCh7ZXh0ZW50OmV9KT0+dGhpcy5fZW5zdXJlRWxldmF0aW9uVGFzaygpLmFkZEV4dGVudChlKSkpLHRpKTp0JiZ0aGlzLnJlbW92ZUhhbmRsZXModGkpfSksbSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuX3VzZVBCUiksKGU9PnRoaXMuX3VwZGF0ZVBCUihlKSkpO2NvbnN0IF89KCk9Pnt0aGlzLl9yZWxvYWRBbGwoKSx0aGlzLmNsZWFyTWVtQ2FjaGUoKX07dGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMucmVuZGVyZXJUZXh0dXJlVXNhZ2UpLF8pLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLmNvbnRlbnRWaXNpYmxlKSwoZT0+dGhpcy5fY29udGVudFZpc2libGVDaGFuZ2VkKGUpKSxtKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5pM3NsYXllci5sYWJlbHNWaXNpYmxlKSwoKCk9PnRoaXMuX2xhYmVsaW5nQ2hhbmdlZCgpKSxtKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5pM3NsYXllci5sYWJlbGluZ0luZm8pLCgoKT0+dGhpcy5fbGFiZWxpbmdDaGFuZ2VkKCkpLG0pLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLl9tb2RpZmljYXRpb25zKSwoKCk9PnRoaXMuX21vZGlmaWNhdGlvbnNDaGFuZ2VkKCkpLG0pLHRoaXMuYWRkSGFuZGxlcyhbZygoKCk9PmZ0LkkzU19UUkVFX1NIT1dfVElMRVMpLChlPT57aWYoZSYmIXRoaXMuX3RyZWVEZWJ1Z2dlcil7Y29uc3QgZT10aGlzLl9jb250cm9sbGVyLmNyc0luZGV4O2ltcG9ydChcIi4vc3VwcG9ydC9JM1NUcmVlRGVidWdnZXIuanNcIikudGhlbigoKHtJM1NUcmVlRGVidWdnZXI6dH0pPT57IXRoaXMuX3RyZWVEZWJ1Z2dlciYmZnQuSTNTX1RSRUVfU0hPV19USUxFUyYmKHRoaXMuX3RyZWVEZWJ1Z2dlcj1uZXcgdCh7bHY6dGhpcyx2aWV3OnRoaXMudmlldyxub2RlU1I6ZX0pKX0pKX1lbHNlIGV8fGZ0LkkzU19UUkVFX1NIT1dfVElMRVN8fCh0aGlzLl90cmVlRGVidWdnZXI9bCh0aGlzLl90cmVlRGVidWdnZXIpKX0pLG0pLGcoKCgpPT5mdC5JM1NfU0hPV19NT0RJRklDQVRJT05TKSwoKCk9PnRoaXMuX3Nob3dNb2RpZmljYXRpb25zKCkpLG0pXSksdGhpcy5fY2FjaGVLZXlTdWZmaXg9dGhpcy5fZ2V0Q2FjaGVLZXlTdWZmaXgoKSx0aGlzLl9pZGJDYWNoZS5pbml0KCkuY2F0Y2goKGU9PmEuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oYEZhaWxlZCB0byBpbml0aWFsaXplIEluZGV4ZWREQiBjYWNoZTogJHtlfWApKSk7Y29uc3R7dmlldzpmfT10aGlzLHt2aWV3aW5nTW9kZTpwLHJlbmRlckNvb3Jkc0hlbHBlcjp5fT1mO3RoaXMuX3BsYW5ldFJhZGl1c0luR2xvYmFsTW9kZT1cImxvY2FsXCI9PT1wPzA6eS5yZWZlcmVuY2VFbGxpcHNvaWQucmFkaXVzfWRlc3Ryb3koKXt0aGlzLl9jbGVhckFkZFRhc2tzKCksdGhpcy5fZWxldmF0aW9uVGFzaz1sKHRoaXMuX2VsZXZhdGlvblRhc2spLHRoaXMuaTNzT3ZlcnJpZGVzPWwodGhpcy5pM3NPdmVycmlkZXMpLHRoaXMuX2VsZXZhdGlvblByb3ZpZGVyJiYodGhpcy5fZWxldmF0aW9uUHJvdmlkZXIub2JqZWN0c0NoYW5nZWQodGhpcy5nZXRWaXNpYmxlT2JicygpKSx0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIudW5yZWdpc3Rlcih0aGlzLl9lbGV2YXRpb25Qcm92aWRlciksdGhpcy5fZWxldmF0aW9uUHJvdmlkZXI9bnVsbCksdGhpcy5faW50ZXJzZWN0aW9uSGFuZGxlciYmKHRoaXMuX3N0YWdlLnZpZXcuc2NlbmVJbnRlcnNlY3Rpb25IZWxwZXIucmVtb3ZlSW50ZXJzZWN0aW9uSGFuZGxlcih0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyKSx0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyPW51bGwpO2NvbnN0IGU9dGhpcy5fd29ya2VyO2UmJihlLmRlc3Ryb3lDb250ZXh0KHRoaXMudWlkKS50aGVuKCgoKT0+ZS5kZXN0cm95KCkpKSx0aGlzLl93b3JrZXI9bnVsbCksdGhpcy5fcmVtb3ZlQWxsTm9kZURhdGFGcm9tU3RhZ2UoKSx0aGlzLl9tZW1DYWNoZT1sKHRoaXMuX21lbUNhY2hlKSx0aGlzLl9jb2xsZWN0aW9uPW51bGwsdGhpcy5fc3RhZ2U9bnVsbCx0aGlzLl9lZGdlVmlldz1udWxsLHRoaXMuX2xhYmVsZXI9bCh0aGlzLl9sYWJlbGVyKSx0aGlzLl90cmVlRGVidWdnZXI9bCh0aGlzLl90cmVlRGVidWdnZXIpLHRoaXMuX2NvbnRyb2xsZXI9bCh0aGlzLl9jb250cm9sbGVyKSx0aGlzLl9oaWdobGlnaHRzLmRlc3Ryb3koKSx0aGlzLl9ub2RlSWQyTWV0YS5jbGVhcigpLHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLmNsZWFyKCksdGhpcy5fY3Jvc3NmYWRlSGVscGVyPWwodGhpcy5fY3Jvc3NmYWRlSGVscGVyKSx0aGlzLmVtaXQoXCJ2aXNpYmxlLWdlb21ldHJ5LWNoYW5nZWRcIiksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZSYmKHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWRTY2hlZHVsZXJIYW5kbGUucmVtb3ZlKCksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsKSx0aGlzLl91cGRhdGluZ0hhbmRsZXM9bCh0aGlzLl91cGRhdGluZ0hhbmRsZXMpfV9tZW1Fc3RpbWF0ZVRleHR1cmVBZGRlZChlKXtjb25zdCB0PWUudXNlZE1lbW9yeTtyZXR1cm4gdGhpcy5fZ3B1TWVtb3J5RXN0aW1hdGUrPXQsdGhpcy5fdGV4TWVtb3J5RXN0aW1hdGUrPXQsdH1fbWVtRXN0aW1hdGVUZXh0dXJlUmVtb3ZlZChlKXtpZihudWxsIT1lKXtjb25zdCB0PWUudXNlZE1lbW9yeTt0aGlzLl9ncHVNZW1vcnlFc3RpbWF0ZS09dCx0aGlzLl90ZXhNZW1vcnlFc3RpbWF0ZS09dH19X21lbUVzdGltYXRlR2VvbWV0cnlBZGRlZChlKXtjb25zdCB0PXRoaXMuX2NvbGxlY3Rpb24uZ2V0T2JqZWN0R1BVTWVtb3J5VXNhZ2UoZSk7cmV0dXJuIHRoaXMuX2dwdU1lbW9yeUVzdGltYXRlKz10LHRoaXMuX2dlb01lbW9yeUVzdGltYXRlKz10LHR9X21lbUVzdGltYXRlR2VvbWV0cnlSZW1vdmVkKGUpe2NvbnN0IHQ9dGhpcy5fY29sbGVjdGlvbi5nZXRPYmplY3RHUFVNZW1vcnlVc2FnZShlKTt0aGlzLl9ncHVNZW1vcnlFc3RpbWF0ZS09dCx0aGlzLl9nZW9NZW1vcnlFc3RpbWF0ZS09dH1pc05vZGVMb2FkZWQoZSl7cmV0dXJuIHRoaXMuX25vZGVJZDJNZXRhLmhhcyhlKX1pc05vZGVSZWxvYWRpbmcoZSl7cmV0dXJuIHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLmhhcyhlKX1nZXQgdXNlZE1lbW9yeSgpe2xldCBlPW51bGwhPXRoaXMuX2xhYmVsZXI/dGhpcy5fbGFiZWxlci51c2VkTWVtb3J5OjA7cmV0dXJuIHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKHQ9PmUrPW51bGwhPXQ/dC5ub2RlLm1lbW9yeTowKSksdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuZm9yRWFjaCgodD0+ZSs9bnVsbCE9dD90Lm5vZGUubWVtb3J5OjApKSxlfWdldCB1bmxvYWRlZE1lbW9yeSgpe3JldHVybihudWxsIT10aGlzLl9jb250cm9sbGVyP3RoaXMuX2NvbnRyb2xsZXIudW5sb2FkZWRNZW1vcnlFc3RpbWF0ZTowKSsobnVsbCE9dGhpcy5fbGFiZWxlcj90aGlzLl9sYWJlbGVyLnVubG9hZGVkTWVtb3J5RXN0aW1hdGU6MCl9X2xhYmVsaW5nQ2hhbmdlZCgpe2lmKCEoU2UodGhpcy5pM3NsYXllcikmJnRoaXMuX3N1cHBvcnRzTGFiZWxpbmcpKXJldHVybiB2b2lkKG51bGwhPXRoaXMuX2xhYmVsZXImJih0aGlzLl9sYWJlbGVyLmRlc3Ryb3koKSx0aGlzLl9sYWJlbGVyPW51bGwpKTtpZihudWxsIT10aGlzLl9sYWJlbGVyKXJldHVybjtjb25zdCBlPW5ldyB5ZSh7dmlldzp0aGlzLnZpZXcsbGF5ZXI6dGhpcy5pM3NsYXllcixjb2xsZWN0aW9uOnRoaXMuX2NvbGxlY3Rpb24sb3ZlcnJpZGVzOnRoaXMuaTNzT3ZlcnJpZGVzLGxheWVyVmlld1VpZDp0aGlzLnVpZH0pO3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKHQ9Pm51bGwhPXQmJnRoaXMuX2FkZE1ldGFUb0xhYmVsZXIoZSx0KSkpLHRoaXMuX2xhYmVsZXI9ZX1fbG9hZEFzeW5jTW9kdWxlKGUpe3JldHVybisrdGhpcy5fYXN5bmNNb2R1bGVMb2FkaW5nLGUudGhlbigoZT0+KC0tdGhpcy5fYXN5bmNNb2R1bGVMb2FkaW5nLGUpKSwoZT0+e3Rocm93LS10aGlzLl9hc3luY01vZHVsZUxvYWRpbmcsZX0pKX1fbW9kaWZpY2F0aW9uc0NoYW5nZWQoKXtpZighdGhpcy5faTNzV2FzbUxvYWRlZCYmdGhpcy5oYXNNb2RpZmljYXRpb25zKXJldHVybiB0aGlzLl9pM3NXYXNtTG9hZGVkPXhlKCkudGhlbigoKCk9Pnt0aGlzLl9pM3NXYXNtTG9hZGVkPSEwLHRoaXMuX21vZGlmaWNhdGlvbnNDaGFuZ2VkKCksdGhpcy5ub3RpZnlVcGRhdGUoKX0pKSx2b2lkIHRoaXMubm90aWZ5VXBkYXRlKCk7aWYoITAhPT10aGlzLl9pM3NXYXNtTG9hZGVkKXJldHVybjtjb25zdCBlPXRoaXMudWlkLHQ9dGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlO3RoaXMuX3dvcmtlci5zZXRNb2RpZmljYXRpb25zKGUsdGhpcy5fbGF5ZXJDbGlwcGluZ0FyZWEsdGhpcy5fbW9kaWZpY2F0aW9ucyx0KTtjb25zdCBpPXZlKHRoaXMuX2xheWVyQ2xpcHBpbmdBcmVhLHRoaXMuX21vZGlmaWNhdGlvbnMsdCk7RWUoe2NvbnRleHQ6ZSxtb2RpZmljYXRpb25zOmksaXNHZW9kZXRpYzp0LmlzR2VvZ3JhcGhpY30pLHRoaXMuX2NvbnRyb2xsZXIubW9kaWZpY2F0aW9uc0NoYW5nZWQoKTtjb25zdCBzPXRoaXMuaGFzTW9kaWZpY2F0aW9ucz9uZXcgZDpudWxsO3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKChlLHQpPT57bnVsbD09ZT8odGhpcy5fbm9kZUlkMk1ldGEuZGVsZXRlKHQpLHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlTG9hZFN0YXR1cyh0LCExKSk6ZS5ub2RlLmhhc01vZGlmaWNhdGlvbnM/KHRoaXMuX3VwZGF0ZUZlYXR1cmVJZENvdW50cyhlLC0xKSx0aGlzLl9ub2RlSWQyTWV0YS5kZWxldGUodCksdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuc2V0KHQsZSkpOm51bGwhPXMmJnMucHVzaChlLm5vZGUpfSkpLHRoaXMubm90aWZ5Q2hhbmdlKFwiZWxldmF0aW9uUmFuZ2VcIiksbnVsbCE9cyYmdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuZm9yRWFjaCgoZT0+cy5wdXNoKGUubm9kZSkpKSxudWxsIT1zJiZzLmxlbmd0aD4wJiYodGhpcy51cGRhdGVOb2RlTW9kaWZpY2F0aW9uU3RhdHVzKHMpLHMuZm9yQWxsKChlPT57aWYoZS5pbU1vZGlmaWNhdGlvbkltcGFjdCE9PVdlLkN1bGxlZCl7Y29uc3QgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pbmRleCk7dGhpcy5fY29udHJvbGxlci5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUuaW5kZXgpLG51bGwhPXQ/KHRoaXMuX3VwZGF0ZUZlYXR1cmVJZENvdW50cyh0LC0xKSx0aGlzLl9ub2RlSWQyTWV0YS5kZWxldGUoZS5pbmRleCksdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuc2V0KGUuaW5kZXgsdCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJlbGV2YXRpb25SYW5nZVwiKSk6dGhpcy5fbm9kZUlkMk1ldGEuaGFzKGUuaW5kZXgpJiYodGhpcy5fbm9kZUlkMk1ldGEuZGVsZXRlKGUuaW5kZXgpLHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlTG9hZFN0YXR1cyhlLmluZGV4LCExKSl9fSkpKSx0aGlzLmNsZWFyTWVtQ2FjaGUoKSx0aGlzLl9jb250cm9sbGVyLnJlc3RhcnROb2RlTG9hZGluZygpLHRoaXMuX3Nob3dNb2RpZmljYXRpb25zKCl9X3Nob3dNb2RpZmljYXRpb25zKCl7aWYobnVsbCE9dGhpcy5fbW9kaWZpY2F0aW9uR3JhcGhpY3MmJih0aGlzLnZpZXcuZ3JhcGhpY3MucmVtb3ZlTWFueSh0aGlzLl9tb2RpZmljYXRpb25HcmFwaGljcyksdGhpcy5fbW9kaWZpY2F0aW9uR3JhcGhpY3M9bnVsbCksIWZ0LkkzU19TSE9XX01PRElGSUNBVElPTlN8fDA9PT10aGlzLl9tb2RpZmljYXRpb25zLmxlbmd0aClyZXR1cm47Y29uc3QgZT17Y2xpcDpbMjI3LDIyNyw3OSwuOF0sbWFzazpbMjI3LDEzOSw3OSwuOF0scmVwbGFjZTpbMTM5LDIyNyw3OSwuOF19LHQ9e291dGxpbmU6e2NvbG9yOlsyNTUsMjU1LDI1NV0sd2lkdGg6MX19O3RoaXMuX21vZGlmaWNhdGlvbkdyYXBoaWNzPVtdO2Zvcihjb25zdCBzIG9mIHRoaXMuX21vZGlmaWNhdGlvbnMpe2NvbnN0IHI9cy5nZW9tZXRyeTtyLnNwYXRpYWxSZWZlcmVuY2U9dGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlO2NvbnN0IG89bmV3IGZlKHsuLi50LGNvbG9yOmVbcy50eXBlXX0pO3RoaXMuX21vZGlmaWNhdGlvbkdyYXBoaWNzLnB1c2gobmV3IGkoe2dlb21ldHJ5OnIsc3ltYm9sOm99KSl9dGhpcy52aWV3LmdyYXBoaWNzLmFkZE1hbnkodGhpcy5fbW9kaWZpY2F0aW9uR3JhcGhpY3MpfV9hZGRNZXRhVG9MYWJlbGVyKGUsdCl7ZS5hZGROb2RlTWV0YSh0LCgoZSx0KT0+dGhpcy5fY3JlYXRlQXR0cmlidXRlcyhlLHQpKSl9X2NvbnRlbnRWaXNpYmxlQ2hhbmdlZChlKXtlPyh0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIucmVnaXN0ZXIodGhpcy5fZWxldmF0aW9uQ29udGV4dCx0aGlzLl9lbGV2YXRpb25Qcm92aWRlciksdGhpcy5fc3RhZ2Uudmlldy5zY2VuZUludGVyc2VjdGlvbkhlbHBlci5hZGRJbnRlcnNlY3Rpb25IYW5kbGVyKHRoaXMuX2ludGVyc2VjdGlvbkhhbmRsZXIpKToodGhpcy5fcmVtb3ZlQWxsTm9kZURhdGFGcm9tU3RhZ2UoKSx0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXImJnRoaXMudmlldy5lbGV2YXRpb25Qcm92aWRlci51bnJlZ2lzdGVyKHRoaXMuX2VsZXZhdGlvblByb3ZpZGVyKSx0aGlzLl9zdGFnZS52aWV3LnNjZW5lSW50ZXJzZWN0aW9uSGVscGVyLnJlbW92ZUludGVyc2VjdGlvbkhhbmRsZXIodGhpcy5faW50ZXJzZWN0aW9uSGFuZGxlcikpfWdldExvYWRlZEF0dHJpYnV0ZXMoZSl7Y29uc3QgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7aWYobnVsbCE9dD8uYXR0cmlidXRlSW5mbylyZXR1cm4gdC5hdHRyaWJ1dGVJbmZvLmxvYWRlZEF0dHJpYnV0ZXN9Z2V0QXR0cmlidXRlRGF0YShlKXtjb25zdCB0PXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTtpZihudWxsIT10Py5hdHRyaWJ1dGVJbmZvKXJldHVybiB0LmF0dHJpYnV0ZUluZm8uYXR0cmlidXRlRGF0YX1zZXRBdHRyaWJ1dGVEYXRhKGUsdCl7Y29uc3QgaT10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7bnVsbCE9aT8uYXR0cmlidXRlSW5mbyYmKGkuYXR0cmlidXRlSW5mby5hdHRyaWJ1dGVEYXRhPXQsdGhpcy5fYXR0cmlidXRlVmFsdWVzQ2hhbmdlZChpKSl9YXN5bmMgdXBkYXRlQXR0cmlidXRlcyhlLHQsaSl7Y29uc3Qgcz10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7bnVsbCE9cyYmKGF3YWl0IHRoaXMuaTNzT3ZlcnJpZGVzLmFwcGx5QXR0cmlidXRlT3ZlcnJpZGVzKHMuZmVhdHVyZUlkcyx0LGksdGhpcy5fY29udHJvbGxlci5yZXF1aXJlZEF0dHJpYnV0ZXMpLHMuYXR0cmlidXRlSW5mbz10LHRoaXMuX2NvbnRyb2xsZXIucmVzY2hlZHVsZSgoKCk9Pnt0aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk9PT1zJiZ0aGlzLl9hdHRyaWJ1dGVWYWx1ZXNDaGFuZ2VkKHMpfSksaSkuY2F0Y2goKGU9PntjKGUpfHxhLmdldExvZ2dlcih0aGlzKS53YXJuKFwiRXJyb3Igd2hpbGUgdXBkYXRpbmcgYXR0cmlidXRlIHZhbHVlcy4gTGF5ZXIgbWlnaHQgbm90IGRpc3BsYXkgY29ycmVjdGx5LlwiLGUpfSkpKX1fYXR0cmlidXRlVmFsdWVzQ2hhbmdlZChlKXtlLmNhY2hlZFJlbmRlcmVyVmVyc2lvbj10aGlzLl9nZXRJbnZhbGlkUmVuZGVyZXJWZXJzaW9uKCksZS5hcHBsaWVkRmlsdGVycz1udWxsLG51bGwhPXRoaXMuX2xhYmVsZXImJnRoaXMuX2xhYmVsZXIuc2V0Tm9kZU1ldGFBdHRyaWJ1dGVzKGUsKChlLHQpPT50aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKGUsdCkpKSx0aGlzLl91cGRhdGVFbmdpbmVPYmplY3QoZSl9Y2xlYXJNZW1DYWNoZSgpe251bGwhPXRoaXMuX21lbUNhY2hlJiZ0aGlzLl9tZW1DYWNoZS5jbGVhcigpLHRoaXMuX2FkZFRhc2tzLmZvckVhY2goKGU9PmUuYWxsb3dNZW1DYWNoZT0hMSkpfWdldFZpc2libGVOb2Rlcygpe2NvbnN0IGU9bmV3IEFycmF5O3JldHVybiB0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKCh0PT5udWxsIT10JiZlLnB1c2godC5ub2RlKSkpLGV9Z2V0VmlzaWJsZU9iYnMoKXtjb25zdCBlPW5ldyBBcnJheTtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgodD0+dCYmZS5wdXNoKHRoaXMuX2NvbGxlY3Rpb24uZ2V0Q29tcG9uZW50T2JiKHQub2JqZWN0SGFuZGxlKSkpKSxlfWdldExvYWRlZE5vZGVJbmRpY2VzKGUpe3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKCh0LGkpPT5lLnB1c2goaSkpKSx0aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5mb3JFYWNoKCgodCxpKT0+ZS5wdXNoKGkpKSl9X3ByZUxvYWRCYXNpcygpeyFoYXMoXCJkaXNhYmxlLWZlYXR1cmU6aTNzLWJhc2lzXCIpJiYwIT09KHRoaXMuc3VwcG9ydGVkVGV4dHVyZUVuY29kaW5ncyZUZS5CYXNpcykmJnRoaXMuaTNzbGF5ZXIudGV4dHVyZVNldERlZmluaXRpb25zPy5zb21lKChlPT5lLmZvcm1hdHMuc29tZSgoZT0+XCJiYXNpc1wiPT09ZS5mb3JtYXR8fFwia3R4MlwiPT09ZS5mb3JtYXQpKSkpJiZSdCgpfV9nZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoZSx0KXtyZXR1cm4gdnQoTXQodGhpcy5fZ2V0R2VvbWV0cnlQYXJhbWV0ZXJzKHtoYXNUZXh0dXJlOld0KGUucGFyYW1zLm1hdGVyaWFsKSxoYXNOb3JtYWxzOnQubm9ybWFsLGhhc1JlZ2lvbnM6dC51dlJlZ2lvbn0pKSl9X2dldE9iamVjdElkRmllbGQoKXtyZXR1cm4gdGhpcy5pM3NsYXllci5vYmplY3RJZEZpZWxkfHxvZX1fZ2V0R2xvYmFsSWRGaWVsZCgpe3JldHVybiB0aGlzLmkzc2xheWVyLmdsb2JhbElkRmllbGR9X2ZpbmRHcmFwaGljTm9kZUFuZEluZGV4KGUpe2NvbnN0IHQ9Y3QodGhpcy5pM3NsYXllci5maWVsZHNJbmRleCxlLmF0dHJpYnV0ZXMsdGhpcy5fZ2V0T2JqZWN0SWRGaWVsZCgpKTtmb3IoY29uc3QgaSBvZiB0aGlzLl9ub2RlSWQyTWV0YS52YWx1ZXMoKSl7Y29uc3QgZT1pPy5mZWF0dXJlSWRzLmluZGV4T2YodCk7aWYobnVsbCE9ZSYmZT49MClyZXR1cm57bm9kZTppLm5vZGUsaW5kZXg6ZX19cmV0dXJuIG51bGx9X2dldEdyYXBoaWNJbmRpY2VzKGUsdCl7Y29uc3QgaT10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pbmRleCk7aWYobnVsbD09aSlyZXR1cm5bXTtjb25zdCBzPVtdLHI9dGhpcy5fZ2V0T2JqZWN0SWRGaWVsZCgpLG89dGhpcy5pM3NsYXllci5maWVsZHNJbmRleDtmb3IoY29uc3QgYSBvZiB0KXtjb25zdCBlPWN0KG8sYS5hdHRyaWJ1dGVzLHIpLHQ9aS5mZWF0dXJlSWRzLmluZGV4T2YoZSk7LTEhPT10JiZzLnB1c2godCl9cmV0dXJuIHN9d2hlbkdyYXBoaWNCb3VuZHMoZSl7Y29uc3QgdD10aGlzLl9maW5kR3JhcGhpY05vZGVBbmRJbmRleChlKTtpZighdClyZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtjb25zdCBpPXRoaXMuZ2V0QUFCQih0Lm5vZGUuaW5kZXgsdC5pbmRleCk7cmV0dXJuIG51bGw9PWk/UHJvbWlzZS5yZWplY3QoKTpQcm9taXNlLnJlc29sdmUoe2JvdW5kaW5nQm94Omksc2NyZWVuU3BhY2VPYmplY3RzOltdfSl9Z2V0QUFCQkZyb21JbnRlcnNlY3RvclRhcmdldChlKXtyZXR1cm4gbnVsbD09ZS5ub2RlSW5kZXh8fG51bGw9PWUuY29tcG9uZW50SW5kZXg/bnVsbDp0aGlzLmdldEFBQkIoZS5ub2RlSW5kZXgsZS5jb21wb25lbnRJbmRleCl9Z2V0QUFCQihlLHQpe2NvbnN0IGk9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO2lmKG51bGw9PWk/LmZlYXR1cmVJZHN8fHQ+PWkuZmVhdHVyZUlkcy5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3Qgcz1pLm9iamVjdEhhbmRsZSxyPUhlKHQsdGhpcy5fY29sbGVjdGlvbixzLEooMjQpLDApLG89dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UsYT10aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZTtyZXR1cm4gcShyLG8sMCxyLGEsMCk/SyhyKTpudWxsfXdoZW5HcmFwaGljQXR0cmlidXRlcyhlLHQpe3JldHVybiBKZSh0aGlzLmkzc2xheWVyLGUsdGhpcy5fZ2V0T2JqZWN0SWRGaWVsZCgpLHQsKCgpPT5bLi4udGhpcy5fbm9kZUlkMk1ldGEudmFsdWVzKCldLmZpbHRlcihyKSkpfWdldEdyYXBoaWNGcm9tSW50ZXJzZWN0b3JUYXJnZXQoZSx0KXtpZihudWxsPT1lLm5vZGVJbmRleHx8bnVsbD09ZS5jb21wb25lbnRJbmRleClyZXR1cm4gbnVsbDtjb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhLmdldChlLm5vZGVJbmRleCk7aWYobnVsbD09aT8uZmVhdHVyZUlkc3x8ZS5jb21wb25lbnRJbmRleD49aS5mZWF0dXJlSWRzLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBzPXRoaXMuX2NyZWF0ZUxheWVyR3JhcGhpYyh0aGlzLl9jcmVhdGVBdHRyaWJ1dGVzKGUuY29tcG9uZW50SW5kZXgsaSkpO3JldHVybiB0LmRlZmVyPyh0LmRlZmVyKChhc3luYygpPT4ocy5nZW9tZXRyeT0oYXdhaXQgaW1wb3J0KFwiLi9pM3MvbWVzaFV0aWxzLmpzXCIpKS5jcmVhdGVNZXNoKHtsYXllclZpZXc6dGhpcyxub2RlSW5kZXg6ZS5ub2RlSW5kZXgsZmVhdHVyZUluZGV4OmUuY29tcG9uZW50SW5kZXh9KSxzKSkpLG51bGwpOnN9X2dldENhY2hlS2V5KGUpe3JldHVybmAke3RoaXMuX2xheWVyVXJsfS92JHtWdH0vJHtlfSR7dGhpcy5fY2FjaGVLZXlTdWZmaXh9YH1fZ2V0Q2FjaGVLZXlTdWZmaXgoKXtjb25zdCBlPXRoaXMudmlldy5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlO2lmKG51bGw9PWUpcmV0dXJuIHNpO2lmKGU9PT1MKGUpKXJldHVybiByaTtyZXR1cm4gdGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlLmVxdWFscyhlKT9paTpudWxsIT1lLndraWQ/YEAke2Uud2tpZH1gOm51bGx9X2dldE1lbUNhY2hlS2V5KGUsdD10aGlzLmVsZXZhdGlvbk9mZnNldCl7cmV0dXJuIGUrXCIjXCIrdH1nZXQgX2lkYkNhY2hlRW5hYmxlZCgpe3JldHVybiF0aGlzLl9jb250cm9sbGVyLmRpc2FibGVJREJDYWNoZSYmIXRoaXMuaGFzTW9kaWZpY2F0aW9ucyYmMD09PXRoaXMuZWxldmF0aW9uT2Zmc2V0JiZudWxsIT10aGlzLl9jYWNoZUtleVN1ZmZpeH1sb2FkQ2FjaGVkR1BVRGF0YShlKXtyZXR1cm4gbnVsbCE9dGhpcy5fbWVtQ2FjaGU/dGhpcy5fbWVtQ2FjaGUucG9wKHRoaXMuX2dldE1lbUNhY2hlS2V5KGUpKTpudWxsfWRlbGV0ZUNhY2hlZEdQVURhdGEoZSl7bnVsbCE9ZSYmdGhpcy5fZGVsZXRlQ29tcG9uZW50T2JqZWN0KGUpfV9jYWNoZUdQVURhdGEoZSx0PXRoaXMuZWxldmF0aW9uT2Zmc2V0KXtpZihudWxsPT10aGlzLl9tZW1DYWNoZSlyZXR1cm4gdm9pZCB0aGlzLl9kZWxldGVDb21wb25lbnRPYmplY3QoZSk7Y29uc3QgaT10aGlzLl9jb250cm9sbGVyLmluZGV4RGVwdGgtZS5ub2RlLmxldmVsO3RoaXMuX21lbUNhY2hlLnB1dCh0aGlzLl9nZXRNZW1DYWNoZUtleShlLm5vZGUuaW5kZXgsdCksZSxpKX1sb2FkTWlzc2luZ1RleHR1cmVzKGUsdCxpLHMpe2NvbnN0IHI9ZT8uZmlsdGVyKCgoZSxpKT0+e2lmKDA9PT0oZS51c2FnZSZ0aGlzLnJlbmRlcmVyVGV4dHVyZVVzYWdlKSlyZXR1cm4hMTtpZihudWxsPT10KXJldHVybiEwO2NvbnN0IHM9TGUoZS5lbmNvZGluZ3MsdGhpcy5zdXBwb3J0ZWRUZXh0dXJlRW5jb2RpbmdzKSxyPXRbaV07cmV0dXJuISEobnVsbD09cj8uZGF0YXx8cyYmci5lbmNvZGluZyE9PXMuZW5jb2RpbmcpfSkpPz9bXTtyZXR1cm4gMD09PXIubGVuZ3RoP1Byb21pc2UucmVzb2x2ZSghMSk6aShyLHMpLnRoZW4oKGk9PntsZXQgcz0wO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7cisrKXM8aS5sZW5ndGgmJmlbc10uaWQ9PT1lW3JdLmlkJiYodFtyXT1pW3NdLHMrKyk7cmV0dXJuITB9KSl9bG9hZENhY2hlZE5vZGVEYXRhKGUsdCxpKXtyZXR1cm4gdGhpcy5faWRiQ2FjaGVFbmFibGVkP3RoaXMuX2lkYkNhY2hlLmdldCh0aGlzLl9nZXRDYWNoZUtleShlLmlkKSx0KS50aGVuKChzPT5udWxsPT1zP251bGw6cy5ub2RlVmVyc2lvbiE9PWUudmVyc2lvbj8odGhpcy5faWRiQ2FjaGUucmVtb3ZlKHRoaXMuX2dldENhY2hlS2V5KGUuaWQpKSxudWxsKToodGhpcy5lbGV2YXRpb25JbmZvLm1vZGU9PT1DZS5BYnNvbHV0ZSYmKGUuZ2VvbWV0cnlPYmJJblJlbmRlclNSPWJ0LmZyb21EYXRhKHMuZ2VvbWV0cnlPYmJEYXRhKSksdGhpcy5sb2FkTWlzc2luZ1RleHR1cmVzKHMucmVxdWlyZWRUZXh0dXJlcyxzLnRleHR1cmVEYXRhLGksdCkudGhlbigoaT0+KGkmJnRoaXMuX2lkYkNhY2hlLmluaXRpYWxpemVkJiZudWxsIT1zLnRleHR1cmVEYXRhJiYocy5ieXRlU2l6ZT0kdChzLnRyYW5zZm9ybWVkR2VvbWV0cnkscy50ZXh0dXJlRGF0YSkscy50ZXh0dXJlRGF0YS5ldmVyeShLdCkmJnRoaXMuX2luZGV4ZWREYlNpemVDaGVjayhlLHMpJiZ0aGlzLl9pZGJDYWNoZS5wdXQodGhpcy5fZ2V0Q2FjaGVLZXkoZS5pZCkscykuY2F0Y2goKHQ9PmEuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oYEZhaWxlZCB0byB1cGRhdGUgbm9kZSB3aXRoIHRleHR1cmVzIGluIEluZGV4ZWREQiBjYWNoZTogJHtlLmlkfTogJHt0fWApKSkpLHUodCkscykpKSkpKTpQcm9taXNlLnJlc29sdmUobnVsbCl9YWRkTm9kZShlLHQsaSl7cmV0dXJuIHp0KHQpP251bGw9PXQuZ2VvbWV0cnlCdWZmZXI/KHRoaXMuX2FkZE5vZGVNZXRhKGUuaW5kZXgsbnVsbCksUHJvbWlzZS5yZXNvbHZlKCkpOnRoaXMuX2FkZERhdGEoZSx0LmF0dHJpYnV0ZURhdGFJbmZvLCgoKT0+dGhpcy5fdHJhbnNmb3JtTm9kZShlLHQsaSkudGhlbigocz0+dGhpcy5fc2FmZVJlc2NoZWR1bGUoKCgpPT57aWYobnVsbD09cylyZXR1cm4gZS5oYXNNb2RpZmljYXRpb25zPSExLHRoaXMuX2FkZENhY2hlZE5vZGVEYXRhKGUsbnVsbCxpKTtlLmhhc01vZGlmaWNhdGlvbnM9cy50cmFuc2Zvcm1lZEdlb21ldHJ5Lmhhc01vZGlmaWNhdGlvbnM7Y29uc3R7b2JiOnIsY29tcG9uZW50T2Zmc2V0czpvLGZlYXR1cmVJZHM6bixhbmNob3JJZHM6bCxhbmNob3JzOmQsdHJhbnNmb3JtZWRHZW9tZXRyeTpoLGdsb2JhbFRyYWZvOmN9PXMsdT1qKFp0LHIuY2VudGVyLngsci5jZW50ZXIueSxyLmNlbnRlci56KTtTKHUsdSxjKTtjb25zdCBfPW5ldyBidCh1LFtyLmV4dGVudHMueCxyLmV4dGVudHMueSxyLmV4dGVudHMuel0sTyhyLm9yaWVudGF0aW9uLngsci5vcmllbnRhdGlvbi55LHIub3JpZW50YXRpb24ueixyLm9yaWVudGF0aW9uLncpKTt0aGlzLmVsZXZhdGlvbkluZm8ubW9kZT09PUNlLkFic29sdXRlJiYoZS5nZW9tZXRyeU9iYkluUmVuZGVyU1I9XyksdC5nZW9tZXRyeURhdGEuY29tcG9uZW50T2Zmc2V0cz1vLG4mJih0Lmdlb21ldHJ5RGF0YS5mZWF0dXJlSWRzPUFycmF5LmZyb20obikpLHQuZ2VvbWV0cnlEYXRhLmFuY2hvcklkcz1sLHQuZ2VvbWV0cnlEYXRhLmFuY2hvcnM9ZDtjb25zdCBtPXtub2RlVmVyc2lvbjplLnZlcnNpb24sZ2VvbWV0cnlEYXRhOnQuZ2VvbWV0cnlEYXRhLHJlcXVpcmVkVGV4dHVyZXM6dC5yZXF1aXJlZFRleHR1cmVzLHRleHR1cmVEYXRhOnQudGV4dHVyZURhdGEsdHJhbnNmb3JtZWRHZW9tZXRyeTpoLGdsb2JhbFRyYWZvOmMsZ2VvbWV0cnlPYmJEYXRhOl8uZGF0YSxieXRlU2l6ZTokdChoLHQudGV4dHVyZURhdGEpfTtpZih0aGlzLl9pZGJDYWNoZUVuYWJsZWQmJnRoaXMuX2lkYkNhY2hlLmluaXRpYWxpemVkJiZ0aGlzLl9pbmRleGVkRGJTaXplQ2hlY2soZSxtKSl7Y29uc3QgdD1udWxsIT1tLnRleHR1cmVEYXRhP20udGV4dHVyZURhdGEubWFwKChlPT5LdChlKT9lOm51bGwpKTpudWxsO3RoaXMuX2lkYkNhY2hlLnB1dCh0aGlzLl9nZXRDYWNoZUtleShlLmlkKSx7Li4ubSx0ZXh0dXJlRGF0YTp0fSkuY2F0Y2goKHQ9PmEuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oYEZhaWxlZCB0byBzdG9yZSBub2RlIGluIEluZGV4ZWREQiBjYWNoZTogJHtlLmlkfTogJHt0fWApKSl9cmV0dXJuIHRoaXMuX2FkZENhY2hlZE5vZGVEYXRhKGUsbSxpKX0pLGkpKSkpKTpQcm9taXNlLnJlamVjdCgpfWdldEVsZXZhdGlvblJhbmdlKGUpe2NvbnN0IHQ9bmV3IHB0LGk9dGhpcy5fY29udHJvbGxlcix7aW5kZXg6c309aTtpZighcylyZXR1cm4gdDtjb25zdHtyb290Tm9kZTpyfT1zO2lmKCFyKXJldHVybiB0O2NvbnN0IG89dGhpcy5fbm9kZUlkMk1ldGEsYT1lWzNdLG49aS52aWV3cG9ydFF1ZXJpZXMsbD10aGlzLl9wbGFuZXRSYWRpdXNJbkdsb2JhbE1vZGUse3ZpZXc6ZH09dGhpcyx7cmVuZGVyQ29vcmRzSGVscGVyOmh9PWQsYz1oLnJlZmVyZW5jZUVsbGlwc29pZC5yYWRpdXMsdT10aGlzLl9jb2xsZWN0aW9uLF89aT0+e2NvbnN0e2NoaWxkcmVuTG9hZGVkOnN9PWk7aWYoMD09PXMpcmV0dXJuITE7Y29uc3Qgcj1uLmdldEFuZFVwZGF0ZVZpc2liaWxpdHlPYmJJblJlbmRlclNSKGkpO2xldCBkPW51bGwsXz0tMTtpZihyKXtpZihfPXIucmFkaXVzLCFyLmludGVyc2VjdFNwaGVyZVdpdGhNQlMoZSxfKSlyZXR1cm4hMX1lbHNlIGQ9bi5nZXRTZXJ2aWNlTWJzSW5SZW5kZXJTUihpKSxkJiYoXz1kWzNdKTtpZihfPj0wJiZhPj0xKl8pcmV0dXJuIG51bGwhPXI/bmkodCxyLGwpOm51bGwhPWQmJmRbM10+PTAmJmxpKHQsZCxsKSwhMTtjb25zdCBtPWFpO2lmKG0uZWxldmF0aW9uUmFuZ2VNaW49MS8wLG0uZWxldmF0aW9uUmFuZ2VNYXg9LTEvMCwobnVsbCE9cnx8bnVsbCE9ZCkmJihudWxsIT1yP25pKG0scixsKTpudWxsIT1kJiZsaShtLGQsbCksbS5lbGV2YXRpb25SYW5nZU1pbj49dC5lbGV2YXRpb25SYW5nZU1pbiYmbS5lbGV2YXRpb25SYW5nZU1heDw9dC5lbGV2YXRpb25SYW5nZU1heCkpcmV0dXJuITE7Y29uc3QgZz1vLmdldChpLmluZGV4KTtpZihnKXtjb25zdHtnZW9tZXRyeU9iYkluUmVuZGVyU1I6c309aTtpZighc3x8cy5pbnRlcnNlY3RTcGhlcmVXaXRoTUJTKGUpKXtpZihzKXtpZihhPjAqcy5yYWRpdXMpcmV0dXJuIG5pKHQscyxsKSwhMX1jb25zdHtvYmplY3RIYW5kbGU6ZX09ZyxpPXUuZ2V0T2JqZWN0VHJhbnNmb3JtKGUpLHI9aC5nZXRBbHRpdHVkZShpLnBvc2l0aW9uKTt1LmV4cGFuZFJhbmdlV2l0aENvbXBvbmVudE9iamVjdEVsZXZhdGlvblJhbmdlKGUscixjLHQpfX1yZXR1cm4gcy0oZz8xOjApPjB9O3JldHVybiBzLnRyYXZlcnNlKHIsXyksdH1jb21wdXRlVmlzaWJpbGl0eU9iYihlKXtyZXR1cm4gWmUoZSx0aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSx0aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LHRoaXMuaTNzbGF5ZXIuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLmVsZXZhdGlvbk9mZnNldCx0aGlzLl9tb2RpZmljYXRpb25zLHRoaXMudmlldy5yZW5kZXJDb29yZHNIZWxwZXIuc3BoZXJpY2FsUENQRil9X3RyYW5zZm9ybU5vZGUoZSx0LGkpe2NvbnN0IHM9dC5nZW9tZXRyeURhdGEuZ2VvbWV0cmllcz8/W10scj1uZXcgQXJyYXkocy5sZW5ndGgpO2ZvcihsZXQgZj0wO2Y8cy5sZW5ndGg7KytmKXJbZl09dGhpcy5fZ2V0VmVydGV4QnVmZmVyTGF5b3V0KHNbZl0sdC5nZW9tZXRyeURlc2NyaXB0b3IpO2NvbnN0IG89dGhpcy5pM3NsYXllci5ub3JtYWxSZWZlcmVuY2VGcmFtZSxhPXQubm9ybWFsUmVmZXJlbmNlRnJhbWU/P28/P1wibm9uZVwiLG49ZS5zZXJ2aWNlTWJzSW5JbmRleFNSLGw9dGhpcy5lbGV2YXRpb25PZmZzZXQsZD10aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LGg9dGhpcy5fY29udHJvbGxlci5jcnNWZXJ0ZXgsYz10aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSx1PSRlKG4sbCxhLGQsYyksXz1XKGQsaCksbT1XKGgsYyk7aWYobnVsbD09X3x8bnVsbD09bSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO2NvbnN0IGc9e2NvbnRleHQ6dGhpcy51aWQsZ2VvbWV0cnlCdWZmZXI6dC5nZW9tZXRyeUJ1ZmZlcixnZW9tZXRyeURhdGE6dC5nZW9tZXRyeURhdGEsZ2VvbWV0cnlEZXNjcmlwdG9yOnQuZ2VvbWV0cnlEZXNjcmlwdG9yLGxheW91dHM6cixnbG9iYWxUcmFmbzp1LG1iczpuLG9iYkRhdGE6ZS5zZXJ2aWNlT2JiSW5JbmRleFNSPy5kYXRhLGVsZXZhdGlvbk9mZnNldDpsLG5lZWROb3JtYWxzOnRoaXMuX2NvbnRyb2xsZXIuaXNNZXNoUHlyYW1pZCxub3JtYWxSZWZlcmVuY2VGcmFtZTphLGluZGV4VG9WZXJ0ZXhQcm9qZWN0b3I6Xyx2ZXJ0ZXhUb1JlbmRlclByb2plY3RvcjptfTtyZXR1cm4gdGhpcy5fd29ya2VyLmludm9rZShnLGkpfWdldCBfc3VwcG9ydHNOb2RlQ3Jvc3NGYWRpbmcoKXtyZXR1cm4hdGhpcy52aWV3Py5zdGFnZT8ucmVuZGVyZXIuc2hhZG93c0VuYWJsZWR9Z2V0IG5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQoKXtyZXR1cm4gdGhpcy5fc3VwcG9ydHNOb2RlQ3Jvc3NGYWRpbmcmJih0aGlzLmxvZENyb3NzZmFkZWluRHVyYXRpb24+MHx8dGhpcy5sb2RDcm9zc2ZhZGVvdXREdXJhdGlvbj4wfHx0aGlzLmxvZENyb3NzZmFkZVVuY292ZXJlZER1cmF0aW9uPjApfWdldCBub2RlRmFkZW91dEVuYWJsZWQoKXtyZXR1cm4gdGhpcy5fc3VwcG9ydHNOb2RlQ3Jvc3NGYWRpbmcmJnRoaXMubG9kQ3Jvc3NmYWRlb3V0RHVyYXRpb24+MH1fc2V0TmV3Tm9kZU9wYWNpdHkoZSl7Y29uc3QgdD10aGlzLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQ/MDp0aGlzLmZ1bGxPcGFjaXR5O3RoaXMuX3NldE5vZGVPcGFjaXR5KGUsdCl9YWRkQ2FjaGVkR1BVRGF0YShlLHQsaSl7aWYodGhpcy5lbGV2YXRpb25JbmZvLm1vZGU9PT1DZS5BYnNvbHV0ZSYmKGUuZ2VvbWV0cnlPYmJJblJlbmRlclNSPXRoaXMuX2NvbGxlY3Rpb24uZ2V0Q29tcG9uZW50T2JiKHQub2JqZWN0SGFuZGxlKS5jbG9uZSgpKSwhdGhpcy5fY29udHJvbGxlci5pc0dlb21ldHJ5VmlzaWJsZShlKSlyZXR1cm4gdm9pZCB0aGlzLl9jYWNoZUdQVURhdGEodCk7bnVsbCE9dGhpcy5fbGFiZWxlciYmdGhpcy5fYWRkTWV0YVRvTGFiZWxlcih0aGlzLl9sYWJlbGVyLHQpO2NvbnN0IHM9ZS5pbmRleDt0aGlzLl9hZGROb2RlTWV0YShzLHQpLHRoaXMudXBkYXRlTm9kZVN0YXRlKHMsaSksdGhpcy5fY29sbGVjdGlvbi5zZXRPYmplY3RWaXNpYmlsaXR5KHQub2JqZWN0SGFuZGxlLCEwKSx0aGlzLl91cGRhdGVNYXRlcmlhbCh0KSx0aGlzLl9zZXROZXdOb2RlT3BhY2l0eSh0KSx0aGlzLmVsZXZhdGlvbkluZm8ubW9kZSE9PUNlLkFic29sdXRlJiZ0aGlzLl9lbnN1cmVFbGV2YXRpb25UYXNrKCkuc2NoZWR1bGUocyksdGhpcy5fdXBkYXRlRW5naW5lT2JqZWN0KHQpLHRoaXMuX2hpZ2hsaWdodHMub2JqZWN0Q3JlYXRlZCh0KSxudWxsIT10aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKX1hZGRDYWNoZWROb2RlRGF0YShlLHQsaSxzKXtyZXR1cm4gdGhpcy5fYWRkRGF0YShlLGksKCgpPT50aGlzLl9hZGRDYWNoZWROb2RlRGF0YShlLHQscykpKX1hc3luYyBkZWxldGVDYWNoZWROb2RlRGF0YShlKXtpZih0aGlzLl9pZGJDYWNoZUVuYWJsZWQpcmV0dXJuIHRoaXMuX2lkYkNhY2hlLnJlbW92ZSh0aGlzLl9nZXRDYWNoZUtleShlKSl9YXN5bmMgX2FkZENhY2hlZE5vZGVEYXRhKGUsdCxpKXtpZighdGhpcy5jb250ZW50VmlzaWJsZXx8IXRoaXMuX2NvbnRyb2xsZXIuaXNHZW9tZXRyeVZpc2libGUoZSkpcmV0dXJuIHZvaWQgdGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShlLmluZGV4LHRoaXMuZWxldmF0aW9uT2Zmc2V0LHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nKTtpZihudWxsPT10KXJldHVybiB2b2lkIHRoaXMuX2FkZE5vZGVNZXRhKGUuaW5kZXgsbnVsbCk7Y29uc3Qgcz10aGlzLl9hZGRUYXNrcy5nZXQoZS5pbmRleCkse2dlb21ldHJ5RGF0YTpyLHRyYW5zZm9ybWVkR2VvbWV0cnk6byxnbG9iYWxUcmFmbzpufT10O2F3YWl0IHRoaXMuaTNzT3ZlcnJpZGVzLmFwcGx5QXR0cmlidXRlT3ZlcnJpZGVzKHIuZmVhdHVyZUlkcyxzLmF0dHJpYnV0ZUluZm8saSx0aGlzLl9jb250cm9sbGVyLnJlcXVpcmVkQXR0cmlidXRlcyk7Y29uc3QgbD1udWxsIT10LnRleHR1cmVEYXRhP3QudGV4dHVyZURhdGEuZmlsdGVyKChlPT5udWxsIT1lJiYwIT09KGUudXNhZ2UmdGhpcy5yZW5kZXJlclRleHR1cmVVc2FnZSkpKTpbXTshaGFzKFwiZGlzYWJsZS1mZWF0dXJlOmkzcy1iYXNpc1wiKSYmbC5zb21lKChlPT5udWxsIT1lJiYoZS5lbmNvZGluZz09PVRlLkJhc2lzfHxlLmVuY29kaW5nPT09VGUuS1RYMikpKSYmYXdhaXQgUnQoKSxlLm1lbW9yeT0wO2NvbnN0e2NvbXBvbmVudE9mZnNldHM6ZCxnZW9tZXRyaWVzOmgsZmVhdHVyZUlkczpjLGFuY2hvcklkczp1LGFuY2hvcnM6X309cixtPXRoaXMuX2NvbGxlY3Rpb24sZz1oWzBdLHtsYXlvdXQ6ZixpbmRpY2VzOnAsaW50ZXJsZWF2ZWRWZXJ0ZXhEYXRhOnkscG9zaXRpb25EYXRhOmIsaGFzQ29sb3JzOkl9PW8se21hdGVyaWFsOk8sZ2VvbWV0cnlQYXJhbWV0ZXJzOmp9PXRoaXMuX21hdGVyaWFsUGFyYW1ldGVycyhnLGYpLFM9ZHx8bmV3IFVpbnQzMkFycmF5KFswLHA/cC5sZW5ndGg6eS5ieXRlTGVuZ3RoL2ZbMF0uc3RyaWRlXSksRD17dmVydGljZXM6e2RhdGE6eSxjb3VudDp5LmJ5dGVMZW5ndGgvZlswXS5zdHJpZGUsbGF5b3V0UGFyYW1ldGVyczpqfSxwb3NpdGlvbkRhdGE6e3Bvc2l0aW9uczpaKGIuZGF0YSksaW5kaWNlczplZShiLmluZGljZXMpfSxpbmRpY2VzOnAsY29tcG9uZW50T2Zmc2V0czpTfSxGPWcudHJhbnNmb3JtYXRpb24/RShnLnRyYW5zZm9ybWF0aW9uKTpSKCk7dyhGLG4sRik7Y29uc3QgVj14KFAoKSxGKSxOPXYoTSgpLEYpLEg9dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2Usaz10aGlzLnZpZXcuYmFzZW1hcFRlcnJhaW4uc3BhdGlhbFJlZmVyZW5jZSxMPWJ0LmZyb21EYXRhKHQuZ2VvbWV0cnlPYmJEYXRhKS5jZW50ZXIsQj1bMSwxLDFdO0coTCxILEIsayl8fGEuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yT25jZShcIlVuc3VwcG9ydGVkIGNvb3JkaW5hdGUgc3lzdGVtIGZvciBJTSBvdmVybGF5XCIpO2NvbnN0IHE9UCgpO3ooTCxILHEsayk7Y29uc3QgVz1NKCk7QyhXLE4pO2NvbnN0IEs9UCgpO0EoSyxUKEssTCxWKSxXKTtjb25zdCAkPXFbMF0tS1swXSpCWzBdLFE9cVsxXS1LWzFdKkJbMV0sWD1tLmNyZWF0ZU9iamVjdChuZXcgQ3QoVSgkLFEsQlswXSxCWzFdKSxuZXcgeHQoVixOKSxidC5mcm9tRGF0YSh0Lmdlb21ldHJ5T2JiRGF0YSksRCkpLFk9ai50ZXh0dXJlQ29vcmRpbmF0ZXM9PT1FdC5BdGxhcyx7dGV4dHVyZXM6Six0ZXh0dXJlUHJvbWlzZTp0ZX09dGhpcy5faW5pdE1hdGVyaWFsQW5kVGV4dHVyZXMoWCxPLGwsWSxlKTtlLm1lbW9yeSs9dGhpcy5fbWVtRXN0aW1hdGVHZW9tZXRyeUFkZGVkKFgpLGUubWVtb3J5Kz1KLnJlZHVjZSgoKGUsdCk9PmUrKG51bGwhPXQ/dGhpcy5fbWVtRXN0aW1hdGVUZXh0dXJlQWRkZWQodCk6MCkpLDApO2NvbnN0IGllPSEhTy5oYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZSxzZT1cImJsZW5kXCIhPT1PLmFscGhhTW9kZSYmTy5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3JbM10+PTEscmU9bmV3IER0KGUsYyxYLHRoaXMuX2dldEludmFsaWRSZW5kZXJlclZlcnNpb24oKSxzLmF0dHJpYnV0ZUluZm8se2hhc1BhcmFtZXRlcnNGcm9tU291cmNlOmllLGlzT3BhcXVlOnNlfSxKLHUsXyk7cy5tZXRhPXJlLHRoaXMuX2hhc1RleHR1cmVzfHw9dC5yZXF1aXJlZFRleHR1cmVzPy5zb21lKCgoe3VzYWdlOmV9KT0+MCE9PShlJkFlLkNvbG9yVGV4dHVyZXMpKSl8fCEhZS5yZXNvdXJjZXMudGV4dHVyZSx0aGlzLl9oYXNEYXRhPSEwLHRoaXMuX2hhc0NvbG9yc3x8PUksdGhpcy5ub3RpZnlDaGFuZ2UoXCJoYXNUZXh0dXJlc09yVmVydGV4Q29sb3JzXCIpO2NvbnN0IG9lPXRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ7cmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcocmUpLHRlXSkudGhlbigoKFt0LHNdKT0+KHRoaXMuX2FkZFRhc2tzLmhhcyhlLmluZGV4KSYmdD8udXBkYXRlT2JqZWN0VmlzaWJpbGl0eShyZS5vYmplY3RIYW5kbGUsITEpLmNhdGNoKChlPT50aGlzLl9sb2dFZGdlVmlld0Vycm9yKGUsdGhpcy5pM3NsYXllci50aXRsZSkpKSx0aGlzLl9zYWZlUmVzY2hlZHVsZSgoKCk9Pntjb25zdCBpPXRoaXMuX2FkZFRhc2tzLmdldChlLmluZGV4KTtpZighaSlyZXR1cm47aWYodGhpcy5fYWRkTm9kZU1ldGEoZS5pbmRleCxyZSksaS5tZXRhPW51bGwsIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuIHZvaWQgdGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShlLmluZGV4LHRoaXMuZWxldmF0aW9uT2Zmc2V0KTttLnNldE9iamVjdFZpc2liaWxpdHkoWCwhMCksdD8udXBkYXRlT2JqZWN0VmlzaWJpbGl0eShyZS5vYmplY3RIYW5kbGUsITApLmNhdGNoKChlPT50aGlzLl9sb2dFZGdlVmlld0Vycm9yKGUsdGhpcy5pM3NsYXllci50aXRsZSkpKSxyZS5hdHRyaWJ1dGVJbmZvPWkuYXR0cmlidXRlSW5mbztjb25zdCBzPXJlLmNhY2hlZFJlbmRlcmVyVmVyc2lvbiE9PXRoaXMuX3JlbmRlcmVyVmVyc2lvbixyPW9lIT09dGhpcy5zbGljZVBsYW5lRW5hYmxlZDt0aGlzLl91cGRhdGVFbGV2YXRpb25PZmZzZXRzKHJlKTtjb25zdCBvPXJlLmVsZXZhdGlvbk9mZnNldHM7dGhpcy5fdXBkYXRlQ29tcG9uZW50RGF0YShyZSk7Y29uc3QgYT10aGlzLl9hcHBseUZpbHRlcnNUb05vZGUocmUpOyhzfHxudWxsIT10JiYocnx8YXx8bykpJiZ0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcocmUpLG51bGwhPXRoaXMuX2xhYmVsZXImJnRoaXMuX2FkZE1ldGFUb0xhYmVsZXIodGhpcy5fbGFiZWxlcixyZSksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZChyZSxIdC5BREQpLHRoaXMuX2hpZ2hsaWdodHMub2JqZWN0Q3JlYXRlZChyZSksdGhpcy5fdXBkYXRlTWF0ZXJpYWwocmUpLHRoaXMuX3NldE5ld05vZGVPcGFjaXR5KHJlKSxudWxsIT10aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKX0pLGkpKSkpLmNhdGNoKChlPT57Y29uc3R7bWV0YTp0LGFsbG93TWVtQ2FjaGU6aX09czt0aHJvdyBzLm1ldGE9bnVsbCx0JiZpP3RoaXMuX2NhY2hlR1BVRGF0YSh0KTp0JiZ0aGlzLl9kZWxldGVDb21wb25lbnRPYmplY3QodCksZX0pKX1fYWRkTm9kZU1ldGEoZSx0KXtpZih0aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUsdGhpcy5lbGV2YXRpb25PZmZzZXQsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcpLHRoaXMuX25vZGVJZDJNZXRhLmhhcyhlKSl7YS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJSZW1vdmluZyBkdXBsaWNhdGVkIG5vZGVcIik7Y29uc3QgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7dCYmKHRoaXMuX2RlbGV0ZUNvbXBvbmVudE9iamVjdCh0KSx0aGlzLl91cGRhdGVGZWF0dXJlSWRDb3VudHModCwtMSkpfWVsc2UgdGhpcy5fY29udHJvbGxlci51cGRhdGVMb2FkU3RhdHVzKGUsITApO3QmJih0LmxvZENyb3NzZmFkZVByb2dyZXNzPW51bGwsdGhpcy5ub2RlQ3Jvc3NmYWRpbmdFbmFibGVkJiZZdCh0LmNhY2hlZEVkZ2VNYXRlcmlhbHMsMCksdGhpcy5fdXBkYXRlRmVhdHVyZUlkQ291bnRzKHQsMSkpLHRoaXMuX25vZGVJZDJNZXRhLnNldChlLHQpLHRoaXMubm90aWZ5Q2hhbmdlKFwiZWxldmF0aW9uUmFuZ2VcIil9X3VwZGF0ZUVsZXZhdGlvbk9mZnNldHMoZSl7Y29uc3QgdD10aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSxpPXRoaXMuX2NvbnRyb2xsZXIuY3JzSW5kZXgscz10aGlzLmVsZXZhdGlvbkluZm8scj10aGlzLnZpZXcuYmFzZW1hcFRlcnJhaW4sbz1yLnNwYXRpYWxSZWZlcmVuY2UsYT1zLm1vZGU7aWYobnVsbD09dHx8bnVsbD09b3x8YT09PUNlLkFic29sdXRlKXJldHVybiB2b2lkKGUuZWxldmF0aW9uT2Zmc2V0cz1udWxsKTtjb25zdCBuPXRoaXMuX2NvbGxlY3Rpb24uZ2V0T2JqZWN0VHJhbnNmb3JtKGUub2JqZWN0SGFuZGxlKTtlLmVsZXZhdGlvbk9mZnNldHM9ZS5lbGV2YXRpb25PZmZzZXRzPz9bXTtjb25zdCBsPVp0LGQ9ZWksaD1hPT09Q2UuT25UaGVHcm91bmQsYz10aGlzLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyLHU9ZS5mZWF0dXJlSWRzLmxlbmd0aCxfPSgoKT0+e2lmKGUuY2FjaGVkRWxldmF0aW9uQW5jaG9ycylyZXR1cm4gZS5jYWNoZWRFbGV2YXRpb25BbmNob3JzO2NvbnN0IHM9SigzKnUpO2UuY2FjaGVkRWxldmF0aW9uQW5jaG9ycz1zO2ZvcihsZXQgcj0wO3I8dTtyKyspe2NvbnN0IGE9MypyLGg9ZS5hbmNob3JJZHM/LmluZGV4T2Yocik/Py0xO2UuYW5jaG9ycyYmaD49MD8oaihsLGUuYW5jaG9yc1szKmhdLGUuYW5jaG9yc1szKmgrMV0sZS5hbmNob3JzWzMqaCsyXSksRChsLGwsdGUoZS5ub2RlLnNlcnZpY2VNYnNJbkluZGV4U1IpKSx6KGwsaSxsLG8pLHNbYV09bFswXSxzW2ErMV09bFsxXSxzW2ErMl09Yy5nZXRBbHRpdHVkZShsKSk6KHRoaXMuX2NvbGxlY3Rpb24uZ2V0Q29tcG9uZW50QWFiYihlLm9iamVjdEhhbmRsZSxyLGQsITApLGoobCwoZFswXStkWzNdKS8yLChkWzFdK2RbNF0pLzIsZFsyXSksQShsLGwsbi5yb3RhdGlvblNjYWxlKSxEKGwsbCxuLnBvc2l0aW9uKSxzW2ErMl09Yy5nZXRBbHRpdHVkZShsKSx6KGwsdCxsLG8pLHNbYV09bFswXSxzW2ErMV09bFsxXSl9cmV0dXJuIHN9KSgpLG09cy5vZmZzZXQsZz1lLmVsZXZhdGlvbk9mZnNldHMsZj0oZSx0KT0+e2NvbnN0IGk9aD9fWzMqZSsyXTowO2dbZV09bSsodD8/MCktaX07ci5nZXRFbGV2YXRpb25zKF8sdSxmKX1fZW5zdXJlRWxldmF0aW9uVGFzaygpe3JldHVybiBudWxsIT10aGlzLl9lbGV2YXRpb25UYXNrfHwodGhpcy5fZWxldmF0aW9uVGFzaz1uZXcgRmUodGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5zY2hlZHVsZXIsKGU9PnRoaXMuX2NvbnRyb2xsZXIudXBkYXRlRWxldmF0aW9uQ2hhbmdlZChlLHRoaXMudmlldy5iYXNlbWFwVGVycmFpbi5zcGF0aWFsUmVmZXJlbmNlKT8uZmlsdGVySW5QbGFjZSgoZT0+bnVsbCE9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpKSkpLChlPT50aGlzLl9ub2RlRWxldmF0aW9uQWxpZ25tZW50Q2hhbmdlZCh0aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSkpKSwoKCk9PnRoaXMuZWxldmF0aW9uSW5mbz8ubW9kZSkpKSx0aGlzLl9lbGV2YXRpb25UYXNrfV9lbGV2YXRpb25JbmZvQ2hhbmdlZChlLHQpe2NvbnN0IGk9ZS5tb2RlIT09Q2UuQWJzb2x1dGUscz0hIXQmJnQhPT1lJiZ0Lm1vZGUhPT1DZS5BYnNvbHV0ZTt0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyLnVwZGF0ZUVsZXZhdGlvbkFsaWduU3RhdGUoaSx0aGlzLnZpZXcuc3RhdGUudmlld2luZ01vZGUpLGkmJiFzJiZ0aGlzLl9jb250cm9sbGVyLnJlbW92ZUFsbEdlb21ldHJ5T2JicygpLHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKGU9PnRoaXMuX25vZGVFbGV2YXRpb25BbGlnbm1lbnRDaGFuZ2VkKGUpKSl9X25vZGVFbGV2YXRpb25BbGlnbm1lbnRDaGFuZ2VkKGUpe251bGwhPWUmJih0aGlzLl91cGRhdGVFbGV2YXRpb25PZmZzZXRzKGUpLHRoaXMuX3VwZGF0ZUNvbXBvbmVudERhdGEoZSksdGhpcy5fdXBkYXRlRWRnZVJlbmRlcmluZyhlKSxudWxsIT10aGlzLl9sYWJlbGVyJiZ0aGlzLl9sYWJlbGVyLnVwZGF0ZUxhYmVsUG9zaXRpb25zKGUpLHRoaXMuX3VwZGF0ZVNuYXBwaW5nU291cmNlcyhlLEh0LlVQREFURSksdGhpcy5fZWxldmF0aW9uUHJvdmlkZXIub2JqZWN0Q2hhbmdlZCh0aGlzLl9jb2xsZWN0aW9uLmdldENvbXBvbmVudE9iYihlLm9iamVjdEhhbmRsZSkpKX1fc2FmZVJlc2NoZWR1bGUoZSx0KXtyZXR1cm4gdSh0KSx0aGlzLl9jb250cm9sbGVyLnJlc2NoZWR1bGUoZSx0KX1fbWF0ZXJpYWxQYXJhbWV0ZXJzKGUsdCl7Y29uc3QgaT1udWxsIT1lLnBhcmFtcy5tYXRlcmlhbD9lLnBhcmFtcy5tYXRlcmlhbDpHZSgpLHM9dC5zb21lKChlPT5cInV2UmVnaW9uXCI9PT1lLm5hbWUpKSxyPXQuc29tZSgoZT0+XCJub3JtYWxDb21wcmVzc2VkXCI9PT1lLm5hbWUpKSxvPVd0KGkpO3JldHVybntnZW9tZXRyeVBhcmFtZXRlcnM6dGhpcy5fZ2V0R2VvbWV0cnlQYXJhbWV0ZXJzKHtoYXNUZXh0dXJlOm8saGFzTm9ybWFsczpyLGhhc1JlZ2lvbnM6c30pLG1hdGVyaWFsOml9fV9pbml0TWF0ZXJpYWxBbmRUZXh0dXJlcyhlLHQsaSxzLHIpe2NvbnN0IG89dGhpcy5fc3RhZ2UucmVuZGVyVmlldyxhPWU9Pnt0aGlzLl9ncHVNZW1vcnlFc3RpbWF0ZS09ZSx0aGlzLl90ZXhNZW1vcnlFc3RpbWF0ZS09ZSxyLm1lbW9yeS09ZX0sbj1pLm1hcCgoZT0+QmUoZSx0LHMsbyx0aGlzLl9jb21wcmVzc2lvblRyYWNrZXIsYSkpKTt0aGlzLl9zdGFnZS5hZGRUZXh0dXJlcyhuKTtsZXQgbD1udWxsO3JldHVybiB0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKGUsKGU9PntsPXFlKGUsdCxuLGksdGhpcy52aWV3LnN0YWdlLnJlbmRlclZpZXcudGV4dHVyZXMse3JlbmRlcmVyVGV4dHVyZVVzYWdlOnRoaXMucmVuZGVyZXJUZXh0dXJlVXNhZ2UsdXNlUEJSOnRoaXMuX3VzZVBCUixpc0ludGVncmF0ZWRNZXNoOnRoaXMuX2lzSW50ZWdyYXRlZE1lc2gsc2xpY2VQbGFuZUVuYWJsZWQ6dGhpcy5zbGljZVBsYW5lRW5hYmxlZCx2aWV3U3BhdGlhbFJlZmVyZW5jZTp0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZX0pLHRoaXMuX3VwZGF0ZU1hdGVyaWFsT3ZlcmxheShlKX0pKSx7dGV4dHVyZXM6bix0ZXh0dXJlUHJvbWlzZTpsfX1fZ2V0R2VvbWV0cnlQYXJhbWV0ZXJzKGUpe3JldHVybiBuZXcgd3QodGhpcy5faGFzVmVydGV4Q29sb3JzLGUuaGFzVGV4dHVyZT9lLmhhc1JlZ2lvbnM/RXQuQXRsYXM6RXQuRGVmYXVsdDpFdC5Ob25lLGUuaGFzTm9ybWFscyx0aGlzLl9zaGFkZU5vcm1hbHMsdGhpcy5fYXBwbHlTU0FPKX1fYWRkRGF0YShlLHQsaSl7bGV0IHM9dGhpcy5fYWRkVGFza3MuZ2V0KGUuaW5kZXgpO2lmKHMpcy5hdHRyaWJ1dGVJbmZvPXQ7ZWxzZXtjb25zdCByPV8oKTtzPW5ldyBYdCh0LG51bGwsci5wcm9taXNlKSx0aGlzLl9hZGRUYXNrcy5zZXQoZS5pbmRleCxzKSxpKCkudGhlbihyLnJlc29sdmUsci5yZWplY3QpLnRoZW4oKCgpPT50aGlzLl9hZGRUYXNrcy5kZWxldGUoZS5pbmRleCkpKS5jYXRjaCgodD0+e3Rocm93IHRoaXMuX2FkZFRhc2tzLmRlbGV0ZShlLmluZGV4KSx0fSkpfXJldHVybiBzLnByb21pc2V9X2NsZWFyQWRkVGFza3MoKXt0aGlzLl9hZGRUYXNrcy5mb3JFYWNoKChlPT57bnVsbCE9ZS5tZXRhJiYodGhpcy5fY2FjaGVHUFVEYXRhKGUubWV0YSksZS5tZXRhPW51bGwpfSkpLHRoaXMuX2FkZFRhc2tzLmNsZWFyKCl9X2NsaXBwaW5nQXJlYUNoYW5nZWQoKXtjb25zdCBlPXRoaXMudmlldy5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlLHQ9dGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlLGk9WCgpO3RoaXMuX3JlbmRlckNsaXBwaW5nQXJlYT15dCh0aGlzLnZpZXcuY2xpcHBpbmdBcmVhLGksZSk/aTpudWxsO2NvbnN0IHM9WCgpO3RoaXMuX2xheWVyQ2xpcHBpbmdBcmVhPXl0KHRoaXMudmlldy5jbGlwcGluZ0FyZWEscyx0KT9zOm51bGwsdGhpcy5fZmlsdGVyQ2hhbmdlKCksdGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci51cGRhdGVDbGlwcGluZ0FyZWEodGhpcy52aWV3LmNsaXBwaW5nQXJlYSksdGhpcy5faXNJbnRlZ3JhdGVkTWVzaCYmdGhpcy5fbW9kaWZpY2F0aW9uc0NoYW5nZWQoKX1nZXQgaGFzR2VvbWV0cnlGaWx0ZXIoKXtyZXR1cm4hMX1fZ2VvbWV0cnlGaWx0ZXJDaGFuZ2UoKXtjb25zdCBlPXRoaXMuaGFzR2VvbWV0cnlGaWx0ZXI7dGhpcy5fY29udHJvbGxlci5nZW9tZXRyeUZpbHRlckNoYW5nZWQoZSksdGhpcy5fYXBwbHlGaWx0ZXJzKGUpLHRoaXMuX2Fzc2VydEZlYXR1cmVJZE5vZGVDb3VudHMoZSl9X2Fzc2VydEZlYXR1cmVJZE5vZGVDb3VudHMoZSl7ZSYmIXRoaXMuX2ZlYXR1cmVJZENvdW50cz8odGhpcy5fZmVhdHVyZUlkQ291bnRzPV9pKHRoaXMuX25vZGVJZDJNZXRhLnZhbHVlcygpKSx0aGlzLl9maWx0ZXJlZElkQ291bnRzPV9pKHRoaXMuX25vZGVJZDJNZXRhLnZhbHVlcygpLHVpLkZpbHRlcmVkKSx0aGlzLl93ZWFrbHlSZW1vdmVkSWRDb3VudHM9X2kodGhpcy5fbm9kZUlkMk1ldGEudmFsdWVzKCksdWkuV2Vha2x5UmVtb3ZlZCksdGhpcy5hZGRIYW5kbGVzKGcoKCgpPT50aGlzLl9jb250cm9sbGVyLnVwZGF0aW5nKSwoZT0+eyFlJiZ0aGlzLl9uZWVkRmlsdGVyUmVzb2x2ZSYmKHRoaXMubXVsdGlHZW9tZXRyeUZpbHRlclJlc29sdmUoKSx0aGlzLl9uZWVkRmlsdGVyUmVzb2x2ZT0hMSx0aGlzLm5vdGlmeVVwZGF0ZSgpKX0pLHtzeW5jOiEwfSksXCJ1cGRhdGVGaW5pc2hlZFwiKSk6IWUmJnRoaXMuX2ZlYXR1cmVJZENvdW50cyYmKHRoaXMuX2ZlYXR1cmVJZENvdW50cz1udWxsLHRoaXMuX2ZpbHRlcmVkSWRDb3VudHM9bnVsbCx0aGlzLl93ZWFrbHlSZW1vdmVkSWRDb3VudHM9bnVsbCx0aGlzLl9taXNtYXRjaFNob3c9bnVsbCx0aGlzLl9taXNtYXRjaEhpZGU9bnVsbCx0aGlzLnJlbW92ZUhhbmRsZXMoXCJ1cGRhdGVGaW5pc2hlZFwiKSx0aGlzLl9uZWVkRmlsdGVyUmVzb2x2ZT0hMSx0aGlzLm5vdGlmeVVwZGF0ZSgpKX1fdXBkYXRlRmVhdHVyZUlkQ291bnRzKGUsdCl7dGhpcy5fZmVhdHVyZUlkQ291bnRzJiYodGhpcy5fbmVlZEZpbHRlclJlc29sdmU9ITAsY2kodGhpcy5fZmVhdHVyZUlkQ291bnRzLGUuZmVhdHVyZUlkcyx0KSxjaSh0aGlzLl9maWx0ZXJlZElkQ291bnRzLGUuZmlsdGVyZWRJZHMsdCksY2kodGhpcy5fd2Vha2x5UmVtb3ZlZElkQ291bnRzLGUud2Vha2x5UmVtb3ZlZElkcyx0KSl9X3VwZGF0ZUZpbHRlcmVkSWRDb3VudHMoZSx0LGkpe3RoaXMuX2ZpbHRlcmVkSWRDb3VudHMmJih0aGlzLl9uZWVkRmlsdGVyUmVzb2x2ZT0hMCxjaSh0aGlzLl9maWx0ZXJlZElkQ291bnRzLHQsLTEpLGNpKHRoaXMuX2ZpbHRlcmVkSWRDb3VudHMsZS5maWx0ZXJlZElkcywxKSxjaSh0aGlzLl93ZWFrbHlSZW1vdmVkSWRDb3VudHMsaSwtMSksY2kodGhpcy5fd2Vha2x5UmVtb3ZlZElkQ291bnRzLGUud2Vha2x5UmVtb3ZlZElkcywxKSl9X2NoZWNrRmVhdHVyZUlkTm9kZUNvdW50SW52YXJpYW50KCl7Y29uc3QgZT1udWxsIT10aGlzLl9mZWF0dXJlSWRDb3VudHM7aWYodGhpcy5oYXNHZW9tZXRyeUZpbHRlciE9PWUmJmEuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiY2hlY2tGZWF0dXJlSWROb2RlQ291bnRJbnZhcmlhbnQoKVwiLFwiTGF5ZXJWaWV3IHNob3VsZCBoYXZlIGZlYXR1cmUgaWQgbm9kZSBjb3VudHMgaWYgYW5kIG9ubHkgaWYgaXQgaGFzIGEgZ2VvbWV0cnkgZmlsdGVyXCIse2xheWVyVmlldzp0aGlzLGhhc05vZGVDb3VudHM6ZX0pLCF0aGlzLl9mZWF0dXJlSWRDb3VudHN8fCF0aGlzLl9maWx0ZXJlZElkQ291bnRzKXJldHVybjtjb25zdCB0PV9pKHRoaXMuX25vZGVJZDJNZXRhLnZhbHVlcygpKTtuKHRoaXMuX2ZlYXR1cmVJZENvdW50cyx0KXx8YS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJjaGVja0ZlYXR1cmVJZE5vZGVDb3VudEludmFyaWFudCgpXCIsXCJJbmNvcnJlY3QgX2ZlYXR1cmVJZENvdW50c1wiLHtsYXllclZpZXc6dGhpcyxjb3VudHM6dGhpcy5fZmVhdHVyZUlkQ291bnRzLGV4cGVjdGVkOnR9KTtjb25zdCBpPV9pKHRoaXMuX25vZGVJZDJNZXRhLnZhbHVlcygpLHVpLkZpbHRlcmVkKTtuKHRoaXMuX2ZpbHRlcmVkSWRDb3VudHMsaSl8fGEuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiY2hlY2tGZWF0dXJlSWROb2RlQ291bnRJbnZhcmlhbnQoKVwiLFwiSW5jb3JyZWN0IF9maWx0ZXJlZElkQ291bnRzXCIse2xheWVyVmlldzp0aGlzLGNvdW50czp0aGlzLl9maWx0ZXJlZElkQ291bnRzLGV4cGVjdGVkOml9KTtjb25zdCBzPV9pKHRoaXMuX25vZGVJZDJNZXRhLnZhbHVlcygpLHVpLldlYWtseVJlbW92ZWQpO24odGhpcy5fd2Vha2x5UmVtb3ZlZElkQ291bnRzLHMpfHxhLmdldExvZ2dlcih0aGlzKS5lcnJvcihcImNoZWNrRmVhdHVyZUlkTm9kZUNvdW50SW52YXJpYW50KClcIixcIkluY29ycmVjdCBfd2Vha2x5UmVtb3ZlZElkQ291bnRzXCIse2xheWVyVmlldzp0aGlzLGNvdW50czp0aGlzLl93ZWFrbHlSZW1vdmVkSWRDb3VudHMsZXhwZWN0ZWQ6aX0pfW11bHRpR2VvbWV0cnlGaWx0ZXJSZXNvbHZlKCl7aWYoIXRoaXMuX2ZlYXR1cmVJZENvdW50c3x8IXRoaXMuX2ZpbHRlcmVkSWRDb3VudHMpcmV0dXJuO2xldCBlPW51bGwsdD1udWxsO2Zvcihjb25zdFtpLHNdb2YgdGhpcy5fZmlsdGVyZWRJZENvdW50cyl7Y29uc3Qgcj10aGlzLl9mZWF0dXJlSWRDb3VudHMuZ2V0KGkpO2lmKHIhPT1zKXtzKyh0aGlzLl93ZWFrbHlSZW1vdmVkSWRDb3VudHM/LmdldChpKT8/MCk9PT1yPyhlPz89bmV3IFNldCxlLmFkZChpKSk6KHQ/Pz1uZXcgU2V0LHQuYWRkKGkpKX19cChlLHRoaXMuX21pc21hdGNoU2hvdykmJnAodCx0aGlzLl9taXNtYXRjaEhpZGUpfHwodGhpcy5fbWlzbWF0Y2hTaG93PWUsdGhpcy5fbWlzbWF0Y2hIaWRlPXQsdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgoZT0+e2lmKCFlPy5maWx0ZXJlZElkcylyZXR1cm47Y29uc3QgdD1oaShlLHRoaXMuX21pc21hdGNoU2hvdyx0aGlzLl9taXNtYXRjaEhpZGUpO3RoaXMuX2NvbGxlY3Rpb24uc2V0QWxsQ29tcG9uZW50VmlzaWJpbGl0aWVzKGUub2JqZWN0SGFuZGxlLHQpLHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWQoZSxIdC5VUERBVEUpfSkpKX1fZmlsdGVyQ2hhbmdlKCl7dGhpcy5fYXBwbHlGaWx0ZXJzKHRoaXMuaGFzR2VvbWV0cnlGaWx0ZXIpfV9hcHBseUZpbHRlcnMoZSl7dGhpcy5fZmlsdGVycz10aGlzLmdldEZpbHRlcnMoKSxlP3RoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIucmVxdWVzdFVwZGF0ZSgpOnRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKGU9PntlJiZ0aGlzLl9hcHBseUZpbHRlcnNUb05vZGUoZSkmJih0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcoZSksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZChlLEh0LlVQREFURSkpfSkpfWdldEZpbHRlcnMoKXtjb25zdCBlPVtdLHQ9dGhpcy5fcmVuZGVyQ2xpcHBpbmdBcmVhO3JldHVybiBudWxsIT10JiZlLnB1c2goKChlLGkpPT50aGlzLl9ib3VuZGluZ1JlY3RGaWx0ZXIoZSxpLHQpKSksZX1hZGRTcWxGaWx0ZXIoZSx0LGkpe2lmKG51bGwhPXQpe2NvbnN0IHM9dC5maWVsZE5hbWVzO2UucHVzaCgoKGUscik9PnRoaXMuX3NxbEZpbHRlcihlLHIsdCxzLGkpKSl9fV9zcWxGaWx0ZXIoZSx0LGkscyxyKXtjb25zdCBvPXt9LGE9dGhpcy5fY3JlYXRlTGF5ZXJHcmFwaGljKG8pLG49dGhpcy5pM3NsYXllci5vYmplY3RJZEZpZWxkLGw9dC5mZWF0dXJlSWRzLGQ9dC5hdHRyaWJ1dGVJbmZvPy5hdHRyaWJ1dGVEYXRhO3MuZXZlcnkoKGU9PmU9PT1ufHxudWxsIT1kPy5bZV0pKSYmZXQoZSxsLChlPT57b1tuXT1sW2VdO2Zvcihjb25zdCBpIG9mIHMpaSE9PW4mJihvW2ldPWQ/VmUoZFtpXSxlKTpudWxsKTt0cnl7cmV0dXJuIGkudGVzdEZlYXR1cmUoYSl9Y2F0Y2godCl7cmV0dXJuIHIodCksITF9fSkpfV9ib3VuZGluZ1JlY3ROb2RlVGVzdChlLHQpe3JldHVybiBCKGUubm9kZS5zZXJ2aWNlTWJzSW5JbmRleFNSLHRoaXMuX2NvbnRyb2xsZXIuY3JzSW5kZXgscXQsdGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UpLHR0KHQscXQpfV9ib3VuZGluZ1JlY3RGZWF0dXJlVGVzdChlLHQsaSl7cmV0dXJuIHRoaXMuX2NvbGxlY3Rpb24uZ2V0Q29tcG9uZW50QWFiYihlLm9iamVjdEhhbmRsZSx0LFV0KSxRKFV0LGt0KSxZKGksa3QpfV9ib3VuZGluZ1JlY3RGaWx0ZXIoZSx0LGkpe2NvbnN0IHM9dGhpcy5fY29sbGVjdGlvbixyPXRoaXMuX2JvdW5kaW5nUmVjdE5vZGVUZXN0KHQsaSk7aWYocj09PWl0LklOU0lERSlyZXR1cm47aWYocj09PWl0Lk9VVFNJREUpcmV0dXJuIHZvaWQoZS5sZW5ndGg9MCk7Y29uc3Qgbz1zLmdldENvbXBvbmVudENvdW50KHQub2JqZWN0SGFuZGxlKTtpZihvLmludmlzaWJsZStvLnZpc2libGUhPT10LmZlYXR1cmVJZHMubGVuZ3RoKXJldHVybjtjb25zdCBhPXRoaXMuX3RyYW5zZm9ybUNsaXBwaW5nQXJlYShMdCxpLHQub2JqZWN0SGFuZGxlKTtldChlLHQuZmVhdHVyZUlkcywoZT0+dGhpcy5fYm91bmRpbmdSZWN0RmVhdHVyZVRlc3QodCxlLGEpKSl9X3RyYW5zZm9ybUNsaXBwaW5nQXJlYShlLHQsaSl7Y29uc3Qgcz10aGlzLl9jb2xsZWN0aW9uLmdldE9iamVjdFRyYW5zZm9ybShpKSxyPXMucG9zaXRpb24sbz1zLnJvdGF0aW9uU2NhbGU7cmV0dXJuIGVbMF09KHRbMF0tclswXSkvb1swXSxlWzFdPSh0WzFdLXJbMV0pL29bNF0sZVsyXT0odFsyXS1yWzBdKS9vWzBdLGVbM109KHRbM10tclsxXSkvb1s0XSxlfWFzeW5jIF9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcoZSx0PSEwKXtjb25zdCBpPWUub2JqZWN0SGFuZGxlLHtoYXNFZGdlczpzLHBlckZlYXR1cmVFZGdlTWF0ZXJpYWxzOnJ9PXRoaXMuX2dldEZpbHRlcmVkRWRnZU1hdGVyaWFscyhlKTtzJiYhdGhpcy5fZWRnZVZpZXcmJih0aGlzLl9lZGdlVmlldz1hd2FpdCB0aGlzLl9zdGFnZS5yZW5kZXJlci5sb2FkRWRnZVZpZXcoKSk7Y29uc3Qgbz10aGlzLl9lZGdlVmlldztpZighbylyZXR1cm4gbnVsbDtjb25zdCBhPW8uaGFzT2JqZWN0KGkpO2lmKHMpe2lmKGEpe2lmKHRoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZCl7WXQocix0aGlzLmdldE5vZGVPcGFjaXR5KGUpKX1yZXR1cm4gby51cGRhdGVBbGxDb21wb25lbnRNYXRlcmlhbHMoaSxyLHRoaXMuc2xpY2VQbGFuZUVuYWJsZWQsdCkuY2F0Y2goKGU9PnRoaXMuX2xvZ0VkZ2VWaWV3RXJyb3IoZSx0aGlzLmkzc2xheWVyLnRpdGxlKSkpLG8udXBkYXRlT2JqZWN0VmlzaWJpbGl0eShpLCEwKS5jYXRjaCgoZT0+dGhpcy5fbG9nRWRnZVZpZXdFcnJvcihlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksby51cGRhdGVBbGxWZXJ0aWNhbE9mZnNldHMoaSxlLmVsZXZhdGlvbk9mZnNldHMpLmNhdGNoKChlPT50aGlzLl9sb2dFZGdlVmlld0Vycm9yKGUsdGhpcy5pM3NsYXllci50aXRsZSkpKSxvfWNvbnN0IHM9YXdhaXQgdGhpcy5fY29sbGVjdGlvbi5hZGRFZGdlcyhpLG8scix0aGlzLnNsaWNlUGxhbmVFbmFibGVkLGUuZWxldmF0aW9uT2Zmc2V0cyk7cmV0dXJuIGUuZWRnZU1lbW9yeVVzYWdlPXMsZS5ub2RlLm1lbW9yeSs9cyxvfXJldHVybiBhJiYoZS5ub2RlLm1lbW9yeS09ZS5lZGdlTWVtb3J5VXNhZ2UsZS5lZGdlTWVtb3J5VXNhZ2U9MCxvLnJlbW92ZU9iamVjdChpKSksbnVsbH1fYXBwbHlGaWx0ZXJzVG9Ob2RlKGUpe2NvbnN0e2ZpbHRlcmVkSWRzOnQsd2Vha2x5UmVtb3ZlZElkczppfT1lLHM9dGhpcy5fYXBwbHlGaWx0ZXJzVG9Ob2RlQ29tcG9uZW50cyhlKTtyZXR1cm4gdGhpcy5fdXBkYXRlRmlsdGVyZWRJZENvdW50cyhlLHQsaSkscyYmdGhpcy5fbGFiZWxlcj8uYXBwbHlGaWx0ZXJDaGFuZ2UoZSksc31fYXBwbHlGaWx0ZXJzVG9Ob2RlQ29tcG9uZW50cyhlKXtjb25zdCB0PXRoaXMuX2NvbGxlY3Rpb24saT10LmdldENvbXBvbmVudENvdW50KGUub2JqZWN0SGFuZGxlKSxzPW51bGwhPWUuZmlsdGVyZWRJZHMscj0wPT09aS5pbnZpc2libGU7aWYodC5zZXRBbGxDb21wb25lbnRWaXNpYmlsaXRpZXMoZS5vYmplY3RIYW5kbGUsXCJhbGxcIiksMD09PXRoaXMuX2ZpbHRlcnMubGVuZ3RoKXJldHVybiBlLmZpbHRlcmVkSWRzPW51bGwsIXI7aWYobnVsbCE9ZS5maWx0ZXJlZElkcyYmZS5hcHBsaWVkRmlsdGVycz09PXRoaXMuX2ZpbHRlcnN8fChlLndlYWtseVJlbW92ZWRJZHM9bnVsbCxlLmZpbHRlcmVkSWRzPWRpKGUsdGhpcy5fZmlsdGVycyksZS5hcHBsaWVkRmlsdGVycz10aGlzLl9maWx0ZXJzKSxzJiZlLmZpbHRlcmVkSWRzPT09ZS5mZWF0dXJlSWRzJiYoIXRoaXMuX21pc21hdGNoSGlkZXx8ZS5maWx0ZXJlZElkcy5ldmVyeSgoZT0+IXRoaXMuX21pc21hdGNoSGlkZT8uaGFzKGUpKSkpKXJldHVybiFyO2NvbnN0IG89aGkoZSx0aGlzLl9taXNtYXRjaFNob3csdGhpcy5fbWlzbWF0Y2hIaWRlKTtyZXR1cm4gdC5zZXRBbGxDb21wb25lbnRWaXNpYmlsaXRpZXMoZS5vYmplY3RIYW5kbGUsbyksITB9X3JlbW92ZUFsbE5vZGVEYXRhRnJvbVN0YWdlKGU9dGhpcy5lbGV2YXRpb25PZmZzZXQpe3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKCh0LGkpPT50aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGksZSkpKSx0aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5mb3JFYWNoKCgodCxpKT0+dGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShpLGUsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcpKSksdGhpcy5fZWxldmF0aW9uVGFzaz1sKHRoaXMuX2VsZXZhdGlvblRhc2spfXJlbW92ZU5vZGUoZSl7Y29uc3QgdD10aGlzLmVsZXZhdGlvbk9mZnNldDt0aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUsdCksdGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShlLHQsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcpLG51bGwhPXRoaXMuX2VsZXZhdGlvblRhc2smJnRoaXMuX2VsZXZhdGlvblRhc2sucmVtb3ZlKGUpfV9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUsdCxpPXRoaXMuX25vZGVJZDJNZXRhKXtpLmhhcyhlKSYmdGhpcy5fY29udHJvbGxlci51cGRhdGVMb2FkU3RhdHVzKGUsITEpO2NvbnN0IHM9aS5nZXQoZSk7bnVsbCE9cz8odGhpcy5fY29sbGVjdGlvbi5zZXRPYmplY3RWaXNpYmlsaXR5KHMub2JqZWN0SGFuZGxlLCExKSxudWxsIT10aGlzLl9lZGdlVmlldyYmdGhpcy5fZWRnZVZpZXcuaGFzT2JqZWN0KHMub2JqZWN0SGFuZGxlKSYmdGhpcy5fZWRnZVZpZXcudXBkYXRlT2JqZWN0VmlzaWJpbGl0eShzLm9iamVjdEhhbmRsZSwhMSkuY2F0Y2goKGU9PnRoaXMuX2xvZ0VkZ2VWaWV3RXJyb3IoZSx0aGlzLmkzc2xheWVyLnRpdGxlKSkpLHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWQocyxIdC5SRU1PVkUpLG51bGwhPXRoaXMuX2xhYmVsZXImJnRoaXMuX2xhYmVsZXIucmVtb3ZlTm9kZU1ldGEocyksaS5kZWxldGUoZSksdGhpcy5faGlnaGxpZ2h0cy5vYmplY3REZWxldGVkKHMpLGk9PT10aGlzLl9ub2RlSWQyTWV0YT8odGhpcy5fdXBkYXRlRmVhdHVyZUlkQ291bnRzKHMsLTEpLHRoaXMuX2NhY2hlR1BVRGF0YShzLHQpLHRoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZCYmdGhpcy5fY3Jvc3NmYWRlSGVscGVyLnN0b3BOb2RlRmFkaW5nKHMpKTp0aGlzLl9kZWxldGVDb21wb25lbnRPYmplY3QocyksbnVsbCE9dGhpcy5fdHJlZURlYnVnZ2VyJiZ0aGlzLl90cmVlRGVidWdnZXIudXBkYXRlKCkpOmkuZGVsZXRlKGUpfV9kZWxldGVDb21wb25lbnRPYmplY3QoZSl7aWYobnVsbCE9dGhpcy5fZWRnZVZpZXcmJnRoaXMuX2VkZ2VWaWV3LnJlbW92ZU9iamVjdChlLm9iamVjdEhhbmRsZSksdGhpcy5fbWVtRXN0aW1hdGVHZW9tZXRyeVJlbW92ZWQoZS5vYmplY3RIYW5kbGUpLHRoaXMuX2NvbGxlY3Rpb24uZGVzdHJveU9iamVjdChlLm9iamVjdEhhbmRsZSksZS50ZXh0dXJlcylmb3IoY29uc3QgdCBvZiBlLnRleHR1cmVzKXRoaXMuX21lbUVzdGltYXRlVGV4dHVyZVJlbW92ZWQodCksdGhpcy5fc3RhZ2UucmVtb3ZlVGV4dHVyZSh0KX11cGRhdGVOb2RlU3RhdGUoZSx0KXtjb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTtudWxsIT1pJiZ0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKGkub2JqZWN0SGFuZGxlLChlPT5lLnBvbHlnb25PZmZzZXRFbmFibGVkPXQ9PT16ZS5Ib2xlKSl9dXBkYXRlTm9kZUluZGV4KGUsdCl7aWYodGhpcy5fbm9kZUlkMk1ldGEuaGFzKGUpKXtjb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTt0aGlzLl9ub2RlSWQyTWV0YS5kZWxldGUoZSksdGhpcy5fbm9kZUlkMk1ldGEuc2V0KHQsaSksdGhpcy5ub3RpZnlDaGFuZ2UoXCJlbGV2YXRpb25SYW5nZVwiKX1jb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLmdldChlKTtpJiYodGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuZGVsZXRlKGUpLHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLnNldCh0LGkpKX1faW52YWxpZGF0ZUFsbFN5bWJvbHMoKXt0aGlzLl9yZW5kZXJlclZlcnNpb249c3QodGhpcy5fcmVuZGVyZXJWZXJzaW9uLDEpLHRoaXMuX2NvbnRyb2xsZXI/LnJlcXVlc3RVcGRhdGUoKX1fZ2V0SW52YWxpZFJlbmRlcmVyVmVyc2lvbigpe3JldHVybiBzdCh0aGlzLl9yZW5kZXJlclZlcnNpb24sLTEpfWFzeW5jIF9yZW5kZXJlckNoYW5nZShlKXtpZih0aGlzLl9jdXJyZW50UmVuZGVyZXI9ZSx0aGlzLm5vdGlmeUNoYW5nZShcInJlbmRlcmVyVGV4dHVyZVVzYWdlXCIpLHRoaXMuX3JlbmRlcmVyVmVyc2lvbj1zdCh0aGlzLl9yZW5kZXJlclZlcnNpb24sMSksdGhpcy5fcmVuZGVyZXJGaWVsZHM9bnVsbCx0aGlzLl9jb2xvclZhcmlhYmxlPW51bGwsdGhpcy5fb3BhY2l0eVZhcmlhYmxlPW51bGwsdGhpcy5faW52YWxpZGF0ZUFsbFN5bWJvbHMoKSxlJiYodGhpcy5fcmVuZGVyZXJGaWVsZHM9YXdhaXQgZS5nZXRSZXF1aXJlZEZpZWxkcyh0aGlzLmkzc2xheWVyLmZpZWxkc0luZGV4KSksdGhpcy5fdXBkYXRlU3ltYm9sb2d5RmllbGRzKCksIXRoaXMuX2FyY2FkZSYmZSYmXCJhcmNhZGVSZXF1aXJlZFwiaW4gZSYmZS5hcmNhZGVSZXF1aXJlZCYmKHRoaXMuX2FyY2FkZT1hd2FpdCBtZSgpKSxlJiZcInZpc3VhbFZhcmlhYmxlc1wiaW4gZSYmZS52aXN1YWxWYXJpYWJsZXMpZm9yKGNvbnN0IHQgb2YgZS52aXN1YWxWYXJpYWJsZXMpXCJjb2xvclwiPT09dC50eXBlP3RoaXMuX2NvbG9yVmFyaWFibGU9dDpcIm9wYWNpdHlcIj09PXQudHlwZT90aGlzLl9vcGFjaXR5VmFyaWFibGU9dDphLmdldExvZ2dlcih0aGlzKS53YXJuKGBVbnN1cHBvcnRlZCB2aXN1YWwgdmFyaWFibGUgdHlwZSBmb3IgM0QgT2JqZWN0IFNjZW5lIFNlcnZpY2VzOiAke3QudHlwZX1gKTtpZihlKWZvcihjb25zdCB0IG9mIGUuc3ltYm9scylcIm1lc2gtM2RcIiE9PXQudHlwZSYmYS5nZXRMb2dnZXIodGhpcykuZXJyb3IoYFN5bWJvbHMgb2YgdHlwZSAnJHt0LnR5cGV9JyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgM0QgT2JqZWN0IFNjZW5lIFNlcnZpY2VzLmApO3RoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIucmVxdWVzdFVwZGF0ZSgpfV9nZXRDYWNoZWRFZGdlTWF0ZXJpYWxzKGUpe3JldHVybiB0aGlzLl9oYXNDb21wb25lbnREYXRhJiZlLmNhY2hlZFJlbmRlcmVyVmVyc2lvbiE9PXRoaXMuX3JlbmRlcmVyVmVyc2lvbiYmdGhpcy5fdXBkYXRlQ2FjaGVkUmVuZGVyZXJEYXRhKGUpLGUuY2FjaGVkRWRnZU1hdGVyaWFsc31fZ2V0Q29tcG9uZW50UGFyYW1ldGVycyhlKXt0aGlzLl9oYXNDb21wb25lbnREYXRhJiZlLmNhY2hlZFJlbmRlcmVyVmVyc2lvbiE9PXRoaXMuX3JlbmRlcmVyVmVyc2lvbiYmdGhpcy5fdXBkYXRlQ2FjaGVkUmVuZGVyZXJEYXRhKGUpO2NvbnN0IHQ9ZS5jYWNoZWRTeW1ib2xvZ3k7cmV0dXJuKGkscyk9Pntjb25zdCByPTUqaTtIKHMuZXh0ZXJuYWxDb2xvcix0W3JdLzI1NSx0W3IrMV0vMjU1LHRbcisyXS8yNTUsdFtyKzNdLzI1NSk7Y29uc3Qgbz10aGlzLl9zdGFnZS5yZW5kZXJWaWV3Lm9saWRSZW5kZXJIZWxwZXI7aWYobyl7Y29uc3QgdD1lLmZlYXR1cmVJZHNbaV0scj10aGlzLnN1YmxheWVySWQ/YCR7dGhpcy5sYXllclZpZXdVaWR9XyR7dGhpcy5zdWJsYXllcklkfWA6dGhpcy5sYXllclZpZXdVaWQsYT1jZSh0aGlzLnZpZXcsdGhpcy51aWQpO28uc2V0VWlkVG9PYmplY3RBbmRMYXllcklkKHQsdCx0aGlzLmxheWVySWQscix0aGlzLmxheWVyUG9wdXBFbmFibGVkQW5kSGFzVGVtcGxhdGUmJiFhLGUubm9kZS5yZXNvdXJjZXMuYXR0cmlidXRlcyxpLHRoaXMuc3VibGF5ZXJJZCkscy5vYmplY3RBbmRMYXllcklkQ29sb3I9by5nZXRPYmplY3RBbmRMYXllcklkQ29sb3Ioe2dyYXBoaWNVaWQ6dCxsYXllclZpZXdVaWQ6cn0pfXMuZXh0ZXJuYWxDb2xvck1peE1vZGU9dFtyKzRdJigxPDxGdC5DYXN0U2hhZG93cyktMSxzLmNhc3RTaGFkb3dzPSEhKHRbcis0XSYxPDxGdC5DYXN0U2hhZG93cykscy5waWNrYWJsZT0hISh0W3IrNF0mMTw8RnQuUGlja2FibGUpLHMuZWxldmF0aW9uT2Zmc2V0PWUuZWxldmF0aW9uT2Zmc2V0cz8uW2ldPz8wfX1fZ2V0U3ltYm9sSW5mbyhlLHQpe2NvbnN0IGk9ZT8uZ2V0U3ltYm9sKHQse2FyY2FkZTp0aGlzLl9hcmNhZGV9KTtpZighKGkgaW5zdGFuY2VvZiBnZSkpcmV0dXJuIG51bGw7Y29uc3Qgcz1pLmlkO2lmKHRoaXMuX3N5bWJvbEluZm9zLmhhcyhzKSlyZXR1cm4gdGhpcy5fc3ltYm9sSW5mb3MuZ2V0KHMpO2NvbnN0IHI9cnQoaSk7cmV0dXJuIHRoaXMuX3N5bWJvbEluZm9zLnNldChzLHIpLHJ9X3NldFN5bWJvbG9neU92ZXJyaWRlKGUsdCl7dGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGUhPT1lJiYodGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGU9ZSx0aGlzLl9zeW1ib2xvZ3lPdmVycmlkZUZpZWxkcz10LHRoaXMuX2ludmFsaWRhdGVBbGxTeW1ib2xzKCksdGhpcy5fdXBkYXRlU3ltYm9sb2d5RmllbGRzKCkpfV91cGRhdGVTeW1ib2xvZ3lGaWVsZHMoKXt0aGlzLl9zeW1ib2xvZ3lGaWVsZHM9bnVsbCE9dGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGVGaWVsZHMmJnRoaXMuX3N5bWJvbG9neU92ZXJyaWRlRmllbGRzLmxlbmd0aD4wP251bGwhPXRoaXMuX3JlbmRlcmVyRmllbGRzJiZ0aGlzLl9yZW5kZXJlckZpZWxkcy5sZW5ndGg+MD9uZSh0aGlzLmkzc2xheWVyLmZpZWxkc0luZGV4LFsuLi50aGlzLl9yZW5kZXJlckZpZWxkcywuLi50aGlzLl9zeW1ib2xvZ3lPdmVycmlkZUZpZWxkc10pOnRoaXMuX3N5bWJvbG9neU92ZXJyaWRlRmllbGRzOnRoaXMuX3JlbmRlcmVyRmllbGRzfV91cGRhdGVDYWNoZWRSZW5kZXJlckRhdGEoZSl7aWYoZS5jYWNoZWRSZW5kZXJlclZlcnNpb249dGhpcy5fcmVuZGVyZXJWZXJzaW9uLCF0aGlzLl9oYXNDb21wb25lbnREYXRhKXJldHVybjtjb25zdCB0PXRoaXMuX3RtcEF0dHJpYnV0ZU9ubHlHcmFwaGljLGk9e307dC5hdHRyaWJ1dGVzPWk7Y29uc3Qgcz10aGlzLl9jdXJyZW50UmVuZGVyZXIscj1lLmF0dHJpYnV0ZUluZm8/LmF0dHJpYnV0ZURhdGEsbz1lLmZlYXR1cmVJZHM/dGhpcy5pM3NsYXllci5vYmplY3RJZEZpZWxkOm51bGwsYT1udWxsIT1yJiZudWxsIT10aGlzLl9zeW1ib2xvZ3lGaWVsZHMmJnRoaXMuX3N5bWJvbG9neUZpZWxkcy5sZW5ndGg+MDtsZXQgbj1udWxsLGw9bnVsbDtpZihhJiZudWxsIT10aGlzLl9zeW1ib2xvZ3lGaWVsZHMpe249W10sbD1bXTtmb3IoY29uc3QgZSBvZiB0aGlzLl9zeW1ib2xvZ3lGaWVsZHMpe2NvbnN0IHQ9cltlXTt0JiYobi5wdXNoKGUpLGwucHVzaCh0KSl9fWUuY2FjaGVkU3ltYm9sb2d5fHwoZS5jYWNoZWRTeW1ib2xvZ3k9cmUoNSplLmZlYXR1cmVJZHMubGVuZ3RoKSk7Y29uc3QgZD1uZXcgaHQsaD10aGlzLmZ1bGxPcGFjaXR5LGM9dGhpcy5ub2RlQ3Jvc3NmYWRpbmdFbmFibGVkP3RoaXMuZ2V0Tm9kZU9wYWNpdHkoZSk6aDtsZXQgdT1udWxsLF89T3QuT1BBUVVFLG09b3QsZz0wO2ZvcihsZXQgZj0wO2Y8ZS5mZWF0dXJlSWRzLmxlbmd0aDtmKyspe2lmKG51bGwhPW8mJihpW29dPWUuZmVhdHVyZUlkc1tmXSksYSYmbilmb3IobGV0IGU9MDtlPG4ubGVuZ3RoO2UrKylpW25bZV1dPVZlKGxbZV0sZik7Y29uc3Qgcj1zP3RoaXMuX2dldFN5bWJvbEluZm8ocyx0KTpudWxsO2xldCBoLHA7aWYoZC5waWNrYWJsZT0hMCxzJiZcInZpc3VhbFZhcmlhYmxlc1wiaW4gcyl7aWYodGhpcy5fY29sb3JWYXJpYWJsZSl7Y29uc3QgZT1kZSh0aGlzLl9jb2xvclZhcmlhYmxlLHQse2NvbG9yOkJ0LGFyY2FkZTp0aGlzLl9hcmNhZGV9KTtlJiYoaD1kLmNvbG9yLGhbMF09ZS5yLzI1NSxoWzFdPWUuZy8yNTUsaFsyXT1lLmIvMjU1LGhbM109ZS5hPz8xLHRoaXMuX29wYWNpdHlWYXJpYWJsZXx8bnVsbD09PWUuYXx8KHA9ZS5hKSl9dGhpcy5fb3BhY2l0eVZhcmlhYmxlJiYocD1oZSh0aGlzLl9vcGFjaXR5VmFyaWFibGUsdCx7YXJjYWRlOnRoaXMuX2FyY2FkZX0pKX1pZihyPy5tYXRlcmlhbCl7Y29uc3QgZT1yLm1hdGVyaWFsO2g9bnVsbD09aHx8bnVsbD09cD9qZShoLHAsZS5jb2xvcixlLmFscGhhLFR0LGQuY29sb3IpOmplKGgscCxudWxsLG51bGwsVHQsZC5jb2xvcil9aWYoaD8/PUgoZC5jb2xvciwxLDEsMSwxKSxkLmNvbG9yTWl4TW9kZT1yPy5tYXRlcmlhbD8uY29sb3JNaXhNb2RlPz9ndC5NdWx0aXBseSxkLmVkZ2VNYXRlcmlhbD1yPy5lZGdlTWF0ZXJpYWwsdGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGU/Lih0LGQpLG51bGwhPXRoaXMuX25vZGVDb2xvck92ZXJyaWRlJiYodGhpcy5fbm9kZUNvbG9yT3ZlcnJpZGUoZS5ub2RlLGgpLGQuY29sb3JNaXhNb2RlPWd0LlJlcGxhY2UpLGQucGlja2FibGUmJj1oWzNdPj1BdCxkLmNhc3RTaGFkb3dzPXI/ci5jYXN0U2hhZG93czpkLnBpY2thYmxlLG51bGwhPWQuZWRnZU1hdGVyaWFsKXtjb25zdCB0PWhbM10+PTEmJihlLm1hdGVyaWFsLmlzT3BhcXVlfHxkLmNvbG9yTWl4TW9kZT09PWd0LlJlcGxhY2UpP090Lk9QQVFVRTpPdC5UUkFOU1BBUkVOVDtkLmVkZ2VNYXRlcmlhbD09PXUmJnQ9PT1ffHwobT17Li4uZC5lZGdlTWF0ZXJpYWwsb3BhY2l0eTpjLG9iamVjdFRyYW5zcGFyZW5jeTp0fSx1PWQuZWRnZU1hdGVyaWFsLF89dCksZS5jYWNoZWRFZGdlTWF0ZXJpYWxzW2ZdPW19ZWxzZSBlLmNhY2hlZEVkZ2VNYXRlcmlhbHNbZl09b3Q7ZS5jYWNoZWRTeW1ib2xvZ3lbZysrXT1NYXRoLnJvdW5kKDI1NSpoWzBdKSxlLmNhY2hlZFN5bWJvbG9neVtnKytdPU1hdGgucm91bmQoMjU1KmhbMV0pLGUuY2FjaGVkU3ltYm9sb2d5W2crK109TWF0aC5yb3VuZCgyNTUqaFsyXSksZS5jYWNoZWRTeW1ib2xvZ3lbZysrXT1NYXRoLnJvdW5kKDI1NSpoWzNdKSxlLmNhY2hlZFN5bWJvbG9neVtnKytdPWQuY29sb3JNaXhNb2RlfCtkLmNhc3RTaGFkb3dzPDxGdC5DYXN0U2hhZG93c3wrZC5waWNrYWJsZTw8RnQuUGlja2FibGV9fV9nZXRGaWx0ZXJlZEVkZ2VNYXRlcmlhbHMoZSl7Y29uc3QgdD10aGlzLl9nZXRDYWNoZWRFZGdlTWF0ZXJpYWxzKGUpO3RoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZHx8WXQodCx0aGlzLmZ1bGxPcGFjaXR5KTtjb25zdCBpPWUuZmlsdGVyZWRJZHM7aWYobnVsbD09aSl7cmV0dXJue2hhc0VkZ2VzOnQuc29tZSgoZT0+ZSE9PW90KSkscGVyRmVhdHVyZUVkZ2VNYXRlcmlhbHM6dH19bGV0IHM9MCxyPSExO2NvbnN0IG89dC5tYXAoKCh0LG8pPT5lLmZlYXR1cmVJZHNbb10hPT1pW3NdP290OihyPXJ8fHQhPT1vdCxzKyssdCkpKTtyZXR1cm57aGFzRWRnZXM6cixwZXJGZWF0dXJlRWRnZU1hdGVyaWFsczpvfX1fdXBkYXRlQ29tcG9uZW50RGF0YShlKXtpZighdGhpcy5faGFzQ29tcG9uZW50RGF0YSlyZXR1cm47Y29uc3QgdD1lLm9iamVjdEhhbmRsZSxpPXRoaXMuX2dldENvbXBvbmVudFBhcmFtZXRlcnMoZSk7dGhpcy5fY29sbGVjdGlvbi5zZXRDb21wb25lbnREYXRhKHQsaSksdGhpcy5fc3RhZ2UucmVuZGVyVmlldy5yZXF1ZXN0UmVuZGVyKCl9X3JlbG9hZEFsbChlPXRoaXMuZWxldmF0aW9uT2Zmc2V0KXt0aGlzLl9yZW1vdmVBbGxOb2RlRGF0YUZyb21TdGFnZShlKSxudWxsIT10aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnJlc3RhcnROb2RlTG9hZGluZygpfV9vcGFjaXR5Q2hhbmdlKGUpe3RoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZCYmdGhpcy5fY3Jvc3NmYWRlSGVscGVyLnN0b3BBbGxOb2RlRmFkaW5nKCksdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgodD0+e251bGwhPXQmJih0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKHQub2JqZWN0SGFuZGxlLCh0PT50Lm9iamVjdE9wYWNpdHk9ZSkpLFl0KHQuY2FjaGVkRWRnZU1hdGVyaWFscyxlKSx0aGlzLl91cGRhdGVFZGdlUmVuZGVyaW5nKHQpKX0pKX1fdXBkYXRlTWF0ZXJpYWwoZSl7dGhpcy5fY29sbGVjdGlvbi51cGRhdGVNYXRlcmlhbChlLm9iamVjdEhhbmRsZSwoZT0+e2UuY29tbW9uTWF0ZXJpYWxQYXJhbWV0ZXJzLmhhc1NsaWNlUGxhbmU9dGhpcy5zbGljZVBsYW5lRW5hYmxlZCxlLnVzZVBCUj10aGlzLl91c2VQQlIsdGhpcy5fdXBkYXRlTWF0ZXJpYWxPdmVybGF5KGUpfSkpfV91cGRhdGVNYXRlcmlhbE92ZXJsYXkoZSl7fV91cGRhdGVFbmdpbmVPYmplY3QoZSl7dGhpcy5fdXBkYXRlQ29tcG9uZW50RGF0YShlKSx0aGlzLl9hcHBseUZpbHRlcnNUb05vZGUoZSksdGhpcy5fYWRkT3JVcGRhdGVFZGdlUmVuZGVyaW5nKGUpLHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWQoZSxIdC5VUERBVEUpfV9zbGljZVBsYW5lRW5hYmxlZENoYW5nZShlKXt0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyJiYodGhpcy5faW50ZXJzZWN0aW9uSGFuZGxlci5zbGljZVBsYW5lRW5hYmxlZD1lKSxudWxsIT10aGlzLl9sYWJlbGVyJiYodGhpcy5fbGFiZWxlci5zbGljZVBsYW5lRW5hYmxlZD1lKSx0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKCh0PT57bnVsbCE9dCYmKHRoaXMuX2NvbGxlY3Rpb24udXBkYXRlTWF0ZXJpYWwodC5vYmplY3RIYW5kbGUsKHQ9PnQuY29tbW9uTWF0ZXJpYWxQYXJhbWV0ZXJzLmhhc1NsaWNlUGxhbmU9ZSkpLHRoaXMuX3VwZGF0ZUVkZ2VSZW5kZXJpbmcodCwhMSkpfSkpfV91cGRhdGVQQlIoZSl7dGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgodD0+e251bGwhPXQmJnRoaXMuX2NvbGxlY3Rpb24udXBkYXRlTWF0ZXJpYWwodC5vYmplY3RIYW5kbGUsKHQ9PnQudXNlUEJSPWUpKX0pKSx0aGlzLl9oYXNMb2FkZWRQQlJUZXh0dXJlcz0hMH1nZXQgX3VzZVBCUigpe3JldHVybiB0aGlzLl9zaGFkZU5vcm1hbHMmJnRoaXMudmlldy5xdWFsaXR5U2V0dGluZ3MucGh5c2ljYWxseUJhc2VkUmVuZGVyaW5nRW5hYmxlZH1fdXBkYXRlRWRnZVJlbmRlcmluZyhlLHQ9ITApe251bGwhPXRoaXMuX2VkZ2VWaWV3JiZ0aGlzLl9lZGdlVmlldy5oYXNPYmplY3QoZS5vYmplY3RIYW5kbGUpJiZ0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcoZSx0KX1fZm9yQWxsTm9kZXMoZSl7dGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaChlKX1faWdub3JlQ2xpZW50Tm9kZU92ZXJyaWRkZW5GZWF0dXJlcyhlKXtyZXR1cm4gdGhpcy5pM3NPdmVycmlkZXMuaGFzR2VvbWV0cnlDaGFuZ2VzPyh0LGkscyk9PnMubm9kZS5pbmRleD49MCYmdGhpcy5pM3NPdmVycmlkZXMuZmVhdHVyZUhhc0dlb21ldHJ5Q2hhbmdlcyh0KT9NZS5DT05USU5VRTplKHQsaSxzKTplfV9mb3JBbGxGZWF0dXJlcyhlLHQsaSl7Zm9yKGNvbnN0IHMgb2YgdGhpcy5fbm9kZUlkMk1ldGEudmFsdWVzKCkpe2lmKG51bGw9PXMpY29udGludWU7aWYobnVsbCE9dCl7c3dpdGNoKHQocy5ub2RlLnNlcnZpY2VNYnNJbkluZGV4U1IpKXtjYXNlIE1lLkVYSVQ6cmV0dXJuO2Nhc2UgTWUuU0tJUDpjb250aW51ZX19bGV0IHI9TWUuQ09OVElOVUU7c3dpdGNoKGkpe2Nhc2Ugd2UuQUxMOnI9dGhpcy5fZm9yQWxsRmVhdHVyZXNPZk5vZGUocyxlKTticmVhaztjYXNlIHdlLlZJU0lCTEVfT05MWTpyPXRoaXMuX2ZvckFsbFZpc2libGVGZWF0dXJlc09mTm9kZShzLGUpO2JyZWFrO2Nhc2Ugd2UuUVVFUllBQkxFOnI9dGhpcy5fZm9yQWxsUXVlcnlhYmxlRmVhdHVyZXNPZk5vZGUocyxlKX1pZihyPT09TWUuRVhJVClyZXR1cm59fV9mb3JBbGxGZWF0dXJlc09mTm9kZShlLHQpe2xldCBpPU1lLkNPTlRJTlVFO2NvbnN0IHM9ZS5mZWF0dXJlSWRzO2ZvcihsZXQgcj0wO3I8cy5sZW5ndGg7cisrKWlmKGk9dChzW3JdLHIsZSksaT09PU1lLkVYSVQpcmV0dXJuIGk7cmV0dXJuIGl9X2ZvckFsbFZpc2libGVGZWF0dXJlc09mTm9kZShlLHQpe2xldCBpPU1lLkNPTlRJTlVFO2NvbnN0IHM9ZS5mZWF0dXJlSWRzO3JldHVybiB0aGlzLl9jb2xsZWN0aW9uLmZvckVhY2hWaXNpYmxlQ29tcG9uZW50KGUub2JqZWN0SGFuZGxlLChyPT4oaT10KHNbcl0scixlKSxpPT09TWUuQ09OVElOVUUpKSksaX1fZm9yQWxsUXVlcnlhYmxlRmVhdHVyZXNPZk5vZGUoZSx0KXtjb25zdCBpPXRoaXMuX2lnbm9yZUNsaWVudE5vZGVPdmVycmlkZGVuRmVhdHVyZXModCk7aWYobnVsbD09dGhpcy5fcmVuZGVyQ2xpcHBpbmdBcmVhKXJldHVybiB0aGlzLl9mb3JBbGxGZWF0dXJlc09mTm9kZShlLGkpO2NvbnN0IHM9dGhpcy5fYm91bmRpbmdSZWN0Tm9kZVRlc3QoZSx0aGlzLl9yZW5kZXJDbGlwcGluZ0FyZWEpO2lmKHM9PT1pdC5PVVRTSURFKXJldHVybiBNZS5DT05USU5VRTtpZihzPT09aXQuSU5TSURFKXJldHVybiB0aGlzLl9mb3JBbGxGZWF0dXJlc09mTm9kZShlLGkpO2NvbnN0IHI9TWUuQ09OVElOVUUsbz1lLmZlYXR1cmVJZHMsYT1lLm9iamVjdEhhbmRsZSxuPWF0KHRoaXMuX3JlbmRlckNsaXBwaW5nQXJlYSx0aGlzLl9jb2xsZWN0aW9uLmdldE9iamVjdFRyYW5zZm9ybShhKSk7Zm9yKGxldCBsPTA7bDxvLmxlbmd0aDtsKyspe2lmKCF0aGlzLl9ib3VuZGluZ1JlY3RGZWF0dXJlVGVzdChlLGwsbikpY29udGludWU7Y29uc3QgdD1pKG9bbF0sbCxlKTtpZih0PT09TWUuRVhJVClyZXR1cm4gdH1yZXR1cm4gcn1fY3JlYXRlQXR0cmlidXRlcyhlLHQpe2NvbnN0IGk9e307bnVsbCE9dC5mZWF0dXJlSWRzJiYoaVt0aGlzLl9nZXRPYmplY3RJZEZpZWxkKCldPXQuZmVhdHVyZUlkc1tlXSk7Y29uc3Qgcz10LmF0dHJpYnV0ZUluZm8/LmF0dHJpYnV0ZURhdGE7aWYobnVsbCE9cylmb3IoY29uc3QgciBvZiBPYmplY3Qua2V5cyhzKSlpW3JdPVZlKHNbcl0sZSk7cmV0dXJuIGl9X2NyZWF0ZUdyYXBoaWMoZSx0KXtyZXR1cm4gdGhpcy5fY3JlYXRlTGF5ZXJHcmFwaGljKHRoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoZSx0KSl9aGlnaGxpZ2h0KGUsdCl7aWYoX2UoZSkpcmV0dXJuIHV0O2NvbnN0IHM9X3QoZSk7aWYoMD09PXMubGVuZ3RoKXJldHVybiB1dDtjb25zdCByPXQ/Lm5hbWU/P2p0LG89c1swXWluc3RhbmNlb2YgaT90aGlzLl9mZWF0dXJlSWRzRnJvbUdyYXBoaWNzKHMpOlwibnVtYmVyXCI9PXR5cGVvZiBzWzBdP3M6bnVsbDtpZighbylyZXR1cm4gdXQ7Y29uc3R7c2V0OmEsaGFuZGxlOm59PXRoaXMuX2hpZ2hsaWdodHMuYWNxdWlyZVNldChyKTtyZXR1cm4gdGhpcy5faGlnaGxpZ2h0cy5zZXRGZWF0dXJlSWRzKGEsbyksbn1fZmVhdHVyZUlkc0Zyb21HcmFwaGljcyhlKXtjb25zdCB0PXRoaXMuaTNzbGF5ZXIuZmllbGRzSW5kZXgsaT10aGlzLl9nZXRPYmplY3RJZEZpZWxkKCk7cmV0dXJuIGUubWFwKChlPT5jdCh0LGUuYXR0cmlidXRlcyxpKSkpfXJlc2V0SGlnaGxpZ2h0cygpe2wodGhpcy5faGlnaGxpZ2h0cyksdGhpcy5faGlnaGxpZ2h0cz1uZXcgRGUoe2NvbGxlY3Rpb246dGhpcy5fY29sbGVjdGlvbixmb3JBbGxGZWF0dXJlczplPT50aGlzLl9mb3JBbGxGZWF0dXJlcyhlLG51bGwsd2UuQUxMKSxmb3JBbGxGZWF0dXJlc09mTm9kZTooZSx0KT0+dGhpcy5fZm9yQWxsRmVhdHVyZXNPZk5vZGUoZSx0KX0pfV92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkKGUsdCl7dGhpcy5fZWxldmF0aW9uUHJvdmlkZXImJihudWxsPT10aGlzLl92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkU2NoZWR1bGVySGFuZGxlJiYodGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1mKCgoKT0+e2NvbnN0e25vZGU6dH09ZSxpPXQudmlzaWJpbGl0eU9iYkluUmVuZGVyU1I/P3QuZ2VvbWV0cnlPYmJJblJlbmRlclNSPz90LnNlcnZpY2VPYmJJblJlbmRlclNSO2lmKG51bGwhPWkpe2NvbnN0IGU9JCgpO2kudG9BYUJvdW5kaW5nQm94KGUpLHRoaXMuZW1pdChcInZpc2libGUtZ2VvbWV0cnktY2hhbmdlZFwiLG5ldyBwZShlKSl9ZWxzZSB0aGlzLmVtaXQoXCJ2aXNpYmxlLWdlb21ldHJ5LWNoYW5nZWRcIik7dGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsfSkpKSx0aGlzLl91cGRhdGVTbmFwcGluZ1NvdXJjZXMoZSx0KSx0aGlzLl9lbGV2YXRpb25Qcm92aWRlci5vYmplY3RDaGFuZ2VkKHRoaXMuX2NvbGxlY3Rpb24uZ2V0Q29tcG9uZW50T2JiKGUub2JqZWN0SGFuZGxlKSkpfWdldCBwZXJmb3JtYW5jZUluZm8oKXtyZXR1cm4gbmV3IGJlKHRoaXMudXNlZE1lbW9yeSx0aGlzLl9ub2RlSWQyTWV0YS5zaXplLE1hdGgucm91bmQodGhpcy5fZ3B1TWVtb3J5RXN0aW1hdGUvMTA0ODU3NiksTWF0aC5yb3VuZCh0aGlzLl9nZW9NZW1vcnlFc3RpbWF0ZS8xMDQ4NTc2KSxNYXRoLnJvdW5kKHRoaXMuX3RleE1lbW9yeUVzdGltYXRlLzEwNDg1NzYpLE1hdGgucm91bmQodGhpcy51bmxvYWRlZE1lbW9yeS8xMDQ4NTc2KSx0aGlzLl9pZGJDYWNoZUVuYWJsZWQ/TWF0aC5yb3VuZCgxMDAqdGhpcy5faWRiQ2FjaGUuZ2V0SGl0UmF0ZSgpKTowKX1jaGVja0ludmFyaWFudHMoKXt9Z2V0IHRlc3QoKXt9Z2V0Tm9kZU9wYWNpdHlCeUluZGV4KGUpe2NvbnN0IHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO3JldHVybiB0aGlzLmdldE5vZGVPcGFjaXR5KHQpfWdldE5vZGVPcGFjaXR5KGUpe3JldHVybiBudWxsIT1lP3RoaXMuX2NvbGxlY3Rpb24uZ2V0TWF0ZXJpYWwoZS5vYmplY3RIYW5kbGUpLm9iamVjdE9wYWNpdHk6MH1pc05vZGVGdWxseUZhZGVkSW4oZSl7cmV0dXJuIHRoaXMuX2Nyb3NzZmFkZUhlbHBlci5pc05vZGVGdWxseUZhZGVkSW4oZSl9Z2V0Tm9kZUNyb3NzZmFkZU1ldGFEYXRhKGUpe3JldHVybiB0aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSl9Z2V0Tm9kZUNvbXBvbmVudEhhbmRsZShlKXtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpPy5vYmplY3RIYW5kbGV9bWFya05vZGVUb1JlbW92ZShlKXt0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLm1hcmtOb2RlVG9SZW1vdmUoZSl9cmVtb3ZlTWFya2VkTm9kZXMoKXt0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnJlbW92ZU1hcmtlZE5vZGVzKCl9Zm9yZWFjaENyb3NzZmFkZU5vZGUoZSl7dGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaChlKX1mYWRlTm9kZShlLHQsaSl7aWYoIXRoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZClyZXR1cm47Y29uc3Qgcz10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7bnVsbCE9cyYmdGhpcy5fY3Jvc3NmYWRlSGVscGVyLmZhZGVOb2RlKGUscyx0LGkpfXNldE5vZGVPcGFjaXR5QnlJbmRleChlLHQpe2NvbnN0IGk9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO251bGwhPWkmJnRoaXMuX3NldE5vZGVPcGFjaXR5KGksdCl9X3NldE5vZGVPcGFjaXR5KGUsdCl7dGhpcy5fY29sbGVjdGlvbi51cGRhdGVNYXRlcmlhbChlLm9iamVjdEhhbmRsZSwoZT0+ZS5vYmplY3RPcGFjaXR5PXQpKSx0aGlzLl9zZXROb2RlRWRnZU9wYWNpdHkoZSx0KX1fc2V0Tm9kZUVkZ2VPcGFjaXR5KGUsdCl7aWYobnVsbD09dGhpcy5fZWRnZVZpZXd8fCFlLmNhY2hlZEVkZ2VNYXRlcmlhbHMpcmV0dXJuO1l0KGUuY2FjaGVkRWRnZU1hdGVyaWFscyx0KTtjb25zdCBpPWUub2JqZWN0SGFuZGxlO3RoaXMuX2VkZ2VWaWV3Lmhhc09iamVjdChpKSYmdGhpcy5fZWRnZVZpZXcudXBkYXRlQWxsQ29tcG9uZW50T3BhY2l0aWVzKGksdCkuY2F0Y2goKGU9PnRoaXMuX2xvZ0VkZ2VWaWV3RXJyb3IoZSx0aGlzLmkzc2xheWVyLnRpdGxlKSkpfWdldCBoYXNNb2RpZmljYXRpb25zKCl7cmV0dXJuIHRoaXMuX2lzSW50ZWdyYXRlZE1lc2gmJm51bGwhPXRoaXMuX2xheWVyQ2xpcHBpbmdBcmVhfHx0aGlzLl9tb2RpZmljYXRpb25zJiZ0aGlzLl9tb2RpZmljYXRpb25zLmxlbmd0aD4wfXVwZGF0ZU5vZGVNb2RpZmljYXRpb25TdGF0dXMoZSl7Y29uc3QgdD1lLmxlbmd0aDtpZighdGhpcy5oYXNNb2RpZmljYXRpb25zfHx0PD0wfHwhMCE9PXRoaXMuX2kzc1dhc21Mb2FkZWQpcmV0dXJuO2NvbnN0IGk9dGhpcy51aWQscz1RdChlKTtpZihzKXtjb25zdCB0PXtjb250ZXh0OmksYnVmZmVyOnMuYnVmZmVyfTtSZSh0KTtjb25zdCByPW5ldyBGbG9hdDY0QXJyYXkocy5idWZmZXIpO2UuZm9yQWxsKCgoZSx0KT0+e2NvbnN0IGk9clt0XSxzPU9lKGkpO2UuaW1Nb2RpZmljYXRpb25JbXBhY3Q9cyxzIT09V2UuVW5tb2RpZmllZCYmdGhpcy5fY29udHJvbGxlci5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUuaW5kZXgpfSkpfX1ub3RpZnlVcGRhdGUoKXt0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpfW5vdGlmeUxPRFVwZGF0ZSgpe3RoaXMuX2NvbnRyb2xsZXIubm90aWZ5TE9EVXBkYXRlKCl9aXNVcGRhdGluZygpe3JldHVybiEoIXRoaXMuX2NvbnRyb2xsZXJ8fCF0aGlzLl9jb250cm9sbGVyLnVwZGF0aW5nKXx8ISF0aGlzLl92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkU2NoZWR1bGVySGFuZGxlfHxudWxsIT10aGlzLl9sYWJlbGVyJiZ0aGlzLl9sYWJlbGVyLnVwZGF0aW5nfHx0aGlzLl9jcm9zc2ZhZGVIZWxwZXI/LnVwZGF0aW5nfHx0aGlzLl9pM3NXYXNtTG9hZGVkIGluc3RhbmNlb2YgUHJvbWlzZXx8dGhpcy5fYXN5bmNNb2R1bGVMb2FkaW5nPjB8fG51bGwhPXRoaXMuX2VsZXZhdGlvblRhc2smJnRoaXMuX2VsZXZhdGlvblRhc2sucnVubmluZ3x8dGhpcy5fbmVlZEZpbHRlclJlc29sdmV8fHRoaXMuX2NvbXByZXNzaW9uVHJhY2tlci5jb21wcmVzc2luZ310cmFja1NuYXBwaW5nU291cmNlcyhlKXtjb25zdCB0PXtldmVudHM6ZSxmZXRjaEVkZ2VMb2NhdGlvbnM6YXN5bmMoZSx0LGkpPT57Y29uc3Qgcz10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7aWYobnVsbD09cyl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkLW5vZGVcIik7Y29uc3R7b3JpZ2luOnIsYnVmZmVyOm99PWF3YWl0IHRoaXMuX2NvbGxlY3Rpb24uZXh0cmFjdEVkZ2VJbmZvcm1hdGlvbihzLm9iamVjdEhhbmRsZSx0LGkpO3JldHVybiB0aGlzLl9zbmFwcGluZ0xvY2F0aW9uc0FwcGx5RWxldmF0aW9uKHMsbyxyKSx7dHlwZTpcImNvbXBvbmVudHNcIixvYmplY3RJZHM6cy5mZWF0dXJlSWRzLGxvY2F0aW9uczpvLG9yaWdpbjpyfX0scmVtb3ZlOigpPT5zKHRoaXMuX3NuYXBwaW5nU291cmNlc1RyYWNrZXJzLHQpfTtyZXR1cm4gdGhpcy5fc25hcHBpbmdTb3VyY2VzVHJhY2tlcnMucHVzaCh0KSx0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKCgodCxpKT0+e2lmKG51bGw9PXQpcmV0dXJuO2NvbnN0IHM9dGhpcy5fY29udHJvbGxlci5nZXRSZW5kZXJNYnModC5ub2RlKTtzJiZlLmFkZChpLHMpfSkpLHR9X3NuYXBwaW5nTG9jYXRpb25zQXBwbHlFbGV2YXRpb24oZSx0LGkpe2lmKCFlLmVsZXZhdGlvbk9mZnNldHN8fHRoaXMuZWxldmF0aW9uSW5mby5tb2RlPT09Q2UuQWJzb2x1dGUpcmV0dXJuO2NvbnN0IHM9dC5wb3NpdGlvbjAscj10LnBvc2l0aW9uMSxvPXQuY29tcG9uZW50SW5kZXgsYT1QKCksbj1QKCksbD0oZSx0KT0+e0QoZSxlLGkpLHRoaXMudmlldy5yZW5kZXJDb29yZHNIZWxwZXIud29ybGRVcEF0UG9zaXRpb24oZSxuKSxEKGUsZSxGKG4sbix0KSksVihlLGUsaSl9O2ZvcihsZXQgZD0wO2Q8cy5jb3VudDtkKyspe2NvbnN0IHQ9ZS5lbGV2YXRpb25PZmZzZXRzW28uZ2V0KGQpXTtzLmdldFZlYyhkLGEpLGwoYSx0KSxzLnNldFZlYyhkLGEpLHIuZ2V0VmVjKGQsYSksbChhLHQpLHIuc2V0VmVjKGQsYSl9fV91cGRhdGVTbmFwcGluZ1NvdXJjZXMoZSx0KXtjb25zdHtpbmRleDppfT1lLm5vZGUscz10aGlzLl9jb250cm9sbGVyLmdldFJlbmRlck1icyhlLm5vZGUpO2lmKG51bGwhPXMpZm9yKGNvbnN0IHIgb2YgdGhpcy5fc25hcHBpbmdTb3VyY2VzVHJhY2tlcnMpdCE9PUh0LlJFTU9WRSYmdCE9PUh0LlVQREFURXx8ci5ldmVudHMucmVtb3ZlKGkpLHQhPT1IdC5BREQmJnQhPT1IdC5VUERBVEV8fHIuZXZlbnRzLmFkZChpLHMpfV9sb2dFZGdlVmlld0Vycm9yKGUsdCl7YyhlKXx8YS5nZXRMb2dnZXIodGhpcykud2FybihcIkVycm9yIHdoaWxlIHByb2Nlc3NpbmcgZWRnZXMuIEVkZ2VzIG9uIHRoaXMgbGF5ZXIgbWlnaHQgbm90IGRpc3BsYXkgY29ycmVjdGx5XCIsdCxlKX1faW5kZXhlZERiU2l6ZUNoZWNrKGUsdCl7cmV0dXJuIHQuYnl0ZVNpemU+TnQ/KGEuZ2V0TG9nZ2VyKHRoaXMpLndhcm4oYE5vZGUgaXMgdG9vIGJpZyB0byBzdG9yZSBpbiBJbmRleGVkREIgY2FjaGU6ICR7ZS5pZH0gKCR7dC5ieXRlU2l6ZX0gYnl0ZXMpYCksITEpOnQuYnl0ZVNpemU+MH19O3JldHVybiBlKFtiKCldLG8ucHJvdG90eXBlLFwiX2hhc0xvYWRlZFBCUlRleHR1cmVzXCIsdm9pZCAwKSxlKFtiKCldLG8ucHJvdG90eXBlLFwiX2FzeW5jTW9kdWxlTG9hZGluZ1wiLHZvaWQgMCksZShbYigpXSxvLnByb3RvdHlwZSxcIl92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkU2NoZWR1bGVySGFuZGxlXCIsdm9pZCAwKSxlKFtiKCldLG8ucHJvdG90eXBlLFwidmlld1wiLHZvaWQgMCksZShbYigpXSxvLnByb3RvdHlwZSxcImkzc2xheWVyXCIsdm9pZCAwKSxlKFtiKCldLG8ucHJvdG90eXBlLFwiX2NvbnRyb2xsZXJcIix2b2lkIDApLGUoW2IoKV0sby5wcm90b3R5cGUsXCJfbGFiZWxlclwiLHZvaWQgMCksZShbYigpXSxvLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsdm9pZCAwKSxlKFtiKCldLG8ucHJvdG90eXBlLFwic3VzcGVuZGVkXCIsdm9pZCAwKSxlKFtiKCldLG8ucHJvdG90eXBlLFwiY29udGVudFZpc2libGVcIixudWxsKSxlKFtiKHtyZWFkT25seTohMH0pXSxvLnByb3RvdHlwZSxcImxlZ2VuZEVuYWJsZWRcIixudWxsKSxlKFtiKEl0KV0sby5wcm90b3R5cGUsXCJ1cGRhdGluZ1Byb2dyZXNzXCIsdm9pZCAwKSxlKFtiKCldLG8ucHJvdG90eXBlLFwidXBkYXRpbmdQcm9ncmVzc1ZhbHVlXCIsbnVsbCksZShbYigpXSxvLnByb3RvdHlwZSxcImhhc1RleHR1cmVzT3JWZXJ0ZXhDb2xvcnNcIixudWxsKSxlKFtiKCldLG8ucHJvdG90eXBlLFwicmVuZGVyZXJUZXh0dXJlVXNhZ2VcIixudWxsKSxlKFtiKCldLG8ucHJvdG90eXBlLFwiZWxldmF0aW9uT2Zmc2V0XCIsbnVsbCksZShbYigpXSxvLnByb3RvdHlwZSxcImVsZXZhdGlvbkluZm9cIixudWxsKSxlKFtiKHt0eXBlOkJvb2xlYW59KV0sby5wcm90b3R5cGUsXCJzbGljZVBsYW5lRW5hYmxlZFwiLHZvaWQgMCksZShbYigpXSxvLnByb3RvdHlwZSxcInN1cHBvcnRlZFRleHR1cmVFbmNvZGluZ3NcIixudWxsKSxlKFtiKHt0eXBlOltsZV19KV0sby5wcm90b3R5cGUsXCJfbW9kaWZpY2F0aW9uc1wiLHZvaWQgMCksZShbYih7cmVhZE9ubHk6ITB9KV0sby5wcm90b3R5cGUsXCJjbGllbnRHZW9tZXRyeVwiLG51bGwpLGUoW2IoKV0sby5wcm90b3R5cGUsXCJlbGV2YXRpb25SYW5nZVwiLG51bGwpLGUoW2IoKV0sby5wcm90b3R5cGUsXCJmdWxsRXh0ZW50XCIsbnVsbCksZShbYigpXSxvLnByb3RvdHlwZSxcIl9lbGV2YXRpb25UYXNrXCIsdm9pZCAwKSxlKFtiKHtyZWFkT25seTohMH0pXSxvLnByb3RvdHlwZSxcIl91c2VQQlJcIixudWxsKSxvPWUoW0koXCJlc3JpLnZpZXdzLjNkLmxheWVycy5JM1NNZXNoVmlldzNEXCIpXSxvKSxvfTt2YXIgSHQ7IWZ1bmN0aW9uKGUpe2VbZS5BREQ9MF09XCJBRERcIixlW2UuUkVNT1ZFPTFdPVwiUkVNT1ZFXCIsZVtlLlVQREFURT0yXT1cIlVQREFURVwifShIdHx8KEh0PXt9KSk7Y29uc3QgVXQ9JCgpLGt0PVgoKSxMdD1YKCksR3Q9bmV3IGJ0LEJ0PW5ldyB0KFswLDAsMCwwXSkscXQ9aWUoMCwwLDAsMCk7ZnVuY3Rpb24gV3QoZSl7aWYobnVsbD09ZSlyZXR1cm4hMTtjb25zdCB0PWUubWV0YWxsaWNSb3VnaG5lc3M7cmV0dXJuIHQmJnQuYmFzZUNvbG9yVGV4dHVyZUlkPj0wfHx0JiZ0Lm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZUlkPj0wfHxlLm5vcm1hbFRleHR1cmVJZD49MHx8ZS5lbWlzc2l2ZVRleHR1cmVJZD49MHx8ZS5vY2NsdXNpb25UZXh0dXJlSWQ+PTB9ZnVuY3Rpb24genQoZSl7cmV0dXJuXCJnZW9tZXRyeURhdGFcImluIGV9ZnVuY3Rpb24gS3QoZSl7cmV0dXJuIG51bGwhPWUmJnkoZS5kYXRhKX1mdW5jdGlvbiAkdChlLHQpe2xldCBpPTEwMjQrZS5pbnRlcmxlYXZlZFZlcnRleERhdGEuYnl0ZUxlbmd0aCsoZS5pbmRpY2VzP2UuaW5kaWNlcy5ieXRlTGVuZ3RoOjApK2UucG9zaXRpb25EYXRhLmRhdGEuYnl0ZUxlbmd0aCtlLnBvc2l0aW9uRGF0YS5pbmRpY2VzLmJ5dGVMZW5ndGg7aWYobnVsbCE9dClmb3IoY29uc3QgcyBvZiB0KW51bGwhPXMmJnkocy5kYXRhKSYmKGkrPXMuZGF0YS5ieXRlTGVuZ3RoKTtyZXR1cm4gaX1mdW5jdGlvbiBRdChlKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9MTAqZS5sZW5ndGgsaT1uZXcgRmxvYXQ2NEFycmF5KHQpO2xldCBzPTA7cmV0dXJuIGUuZm9yQWxsKChlPT57bGV0IHQ9ZS5zZXJ2aWNlT2JiSW5JbmRleFNSO251bGw9PXQmJih0PUd0LHQuY2VudGVyPXRlKGUuc2VydmljZU1ic0luSW5kZXhTUiksdC5oYWxmU2l6ZT1bZS5zZXJ2aWNlTWJzSW5JbmRleFNSWzNdLGUuc2VydmljZU1ic0luSW5kZXhTUlszXSxlLnNlcnZpY2VNYnNJbkluZGV4U1JbM11dKTtjb25zdCByPXQuZGF0YTtpW3MrK109clswXSxpW3MrK109clsxXSxpW3MrK109clsyXSxpW3MrK109clszXSxpW3MrK109cls0XSxpW3MrK109cls1XSxpW3MrK109cls2XSxpW3MrK109cls3XSxpW3MrK109cls4XSxpW3MrK109cls5XX0pKSxpfWNsYXNzIFh0e2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLmF0dHJpYnV0ZUluZm89ZSx0aGlzLm1ldGE9dCx0aGlzLnByb21pc2U9aSx0aGlzLmFsbG93TWVtQ2FjaGU9ITB9fWZ1bmN0aW9uIFl0KGUsdCl7ZS5mb3JFYWNoKChlPT5lLm9wYWNpdHk9dCkpfWNsYXNzIEp0e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5tb2RlPWUsdGhpcy5vZmZzZXQ9dH19Y29uc3QgWnQ9UCgpLGVpPSQoKSx0aT1cImVsZXZhdGlvbi1jaGFuZ2VcIixpaT1cIlwiLHNpPVwiQG51bGxcIixyaT1cIkBFQ0VGXCIsb2k9W1swLDAsMF0sWzAsMCwwXSxbMCwwLDBdLFswLDAsMF0sWzAsMCwwXSxbMCwwLDBdLFswLDAsMF0sWzAsMCwwXV0sYWk9bmV3IHB0O2Z1bmN0aW9uIG5pKGUsdCxpKXtsZXQgcz1lLmVsZXZhdGlvblJhbmdlTWluLHI9ZS5lbGV2YXRpb25SYW5nZU1heDtjb25zdCBvPWk7aWYobz4wKXt0LmdldENvcm5lcnMob2kpO2Zvcihjb25zdCBlIG9mIG9pKXtjb25zdCB0PU4oZSktbztzPU1hdGgubWluKHMsdCkscj1NYXRoLm1heChyLHQpfX1lbHNle3QuZ2V0Q29ybmVycyhvaSk7Zm9yKGNvbnN0IGUgb2Ygb2kpe2NvbnN0IHQ9ZVsyXTtzPU1hdGgubWluKHMsdCkscj1NYXRoLm1heChyLHQpfX1lLmV4cGFuZEVsZXZhdGlvblJhbmdlVmFsdWVzKHMscil9ZnVuY3Rpb24gbGkoZSx0LGkpe2NvbnN0IHM9dGUodCkscj1pPjA/TihzKS1pOnNbMl0sbz1zZSh0KTtlLmV4cGFuZEVsZXZhdGlvblJhbmdlVmFsdWVzKHItbyxyK28pfWZ1bmN0aW9uIGRpKGUsdCl7Y29uc3QgaT1lLmZlYXR1cmVJZHMuc2xpY2UoKTtmb3IoY29uc3QgcyBvZiB0KWlmKHMoaSxlKSwwPT09aS5sZW5ndGgpYnJlYWs7cmV0dXJuIGkubGVuZ3RoPT09ZS5mZWF0dXJlSWRzLmxlbmd0aD9lLmZlYXR1cmVJZHM6aX1mdW5jdGlvbiBoaShlLHQsaSl7Y29uc3Qgcz1uZXcgQXJyYXkscj1lLmZpbHRlcmVkSWRzO2lmKG51bGw9PXJ8fHQ/LnNpemV8fGk/LnNpemUpe2lmKG51bGwhPXIpe2xldCBvPTA7ZS5mZWF0dXJlSWRzLmZvckVhY2goKChlLGEpPT57aWYocltvXT09PWUpKytvO2Vsc2UgaWYoIXQ/LmhhcyhlKSlyZXR1cm47aT8uaGFzKGUpfHxzLnB1c2goYSl9KSl9fWVsc2UgZS5mZWF0dXJlSWRzLmZvckVhY2goKChlLHQpPT57cltzLmxlbmd0aF09PT1lJiZzLnB1c2godCl9KSk7cmV0dXJuIHN9ZnVuY3Rpb24gY2koZSx0LGkpe2lmKGUmJnQpZm9yKGNvbnN0IHMgb2YgdCl7Y29uc3QgdD0oZS5nZXQocyk/PzApK2k7dD4wP2Uuc2V0KHMsdCk6ZS5kZWxldGUocyl9fXZhciB1aTtmdW5jdGlvbiBfaShlLHQ9dWkuQWxsKXtjb25zdCBpPW5ldyBNYXA7Zm9yKGNvbnN0IHMgb2YgZSl7Y2koaSx0PT09dWkuQWxsP3M/LmZlYXR1cmVJZHM6dD09PXVpLkZpbHRlcmVkP3M/LmZpbHRlcmVkSWRzOnM/LndlYWtseVJlbW92ZWRJZHMsMSl9cmV0dXJuIGl9IWZ1bmN0aW9uKGUpe2VbZS5BbGw9MF09XCJBbGxcIixlW2UuRmlsdGVyZWQ9MV09XCJGaWx0ZXJlZFwiLGVbZS5XZWFrbHlSZW1vdmVkPTJdPVwiV2Vha2x5UmVtb3ZlZFwifSh1aXx8KHVpPXt9KSk7ZXhwb3J0e1B0IGFzIEkzU01lc2hWaWV3M0R9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnR7ZmlsdGVySW5QbGFjZSBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7ZXF1YWxzU2hhbGxvdyBhcyBvfWZyb21cIi4uLy4uLy4uL2NvcmUvbGFuZy5qc1wiO2ltcG9ydHtmbG9hdEVxdWFsVWxwIGFzIGl9ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXRoVXRpbHMuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHt3YXRjaCBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtnZW5lcmF0ZVVJRCBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvdWlkLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHB9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgY31mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2RpZmYgYXMgbH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kaWZmVXRpbHMuanNcIjtpbXBvcnR7cHJvamVjdEJ1ZmZlciBhcyBofWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJ1ZmZlci5qc1wiO2ltcG9ydHtmcm9tQnVmZmVyIGFzIGQsY3JlYXRlIGFzIHV9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e25ld0RvdWJsZUFycmF5IGFzIG19ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9Eb3VibGVBcnJheS5qc1wiO2ltcG9ydHttYWtlRGVoeWRyYXRlZFBvaW50IGFzIGZ9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRQb2ludC5qc1wiO2ltcG9ydHtSZW5kZXJpbmdJbmZvIGFzIGd9ZnJvbVwiLi4vLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvUmVuZGVyaW5nSW5mby5qc1wiO2ltcG9ydCB5IGZyb21cIi4uLy4uLy4uL3N5bWJvbHMvUG9pbnRTeW1ib2wzRC5qc1wiO2ltcG9ydHtHcmFwaGljczNEQ29yZSBhcyBifWZyb21cIi4vZ3JhcGhpY3MvR3JhcGhpY3MzRENvcmUuanNcIjtpbXBvcnR7R3JhcGhpY3MzRFNjYWxlVmlzaWJpbGl0eSBhcyBJfWZyb21cIi4vZ3JhcGhpY3MvR3JhcGhpY3MzRFNjYWxlVmlzaWJpbGl0eS5qc1wiO2ltcG9ydHtib3VuZGluZ0JveENvcm5lcnNQb2ludHNTdHJpZGUgYXMgXyxib3VuZGluZ0JveENvcm5lclBvaW50cyBhcyB2fWZyb21cIi4vaTNzL0kzU0dlb21ldHJ5VXRpbC5qc1wiO2ltcG9ydHtMaW1pdEdyYXBoaWNzTWFwIGFzIE19ZnJvbVwiLi4vc3VwcG9ydC9MaW1pdEdyYXBoaWNzTWFwLmpzXCI7aW1wb3J0e1VwZGF0ZVBvbGljeSBhcyBFfWZyb21cIi4uL3dlYmdsLWVuZ2luZS9saWIvVXBkYXRlUG9saWN5LmpzXCI7aW1wb3J0e2hhc0xheWVyQmFzZWRTY2FsZVZpc2liaWxpdHkgYXMgan1mcm9tXCIuLi8uLi9zdXBwb3J0L2xheWVyVmlld1V0aWxzLmpzXCI7Y2xhc3Mgd3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMubWV0YT1lLHRoaXMuaW5kZXg9dH19Y2xhc3MgR3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuZ3JhcGhpYz1lLHRoaXMuZ2VvbWV0cnk9dCx0aGlzLmNvbXBvbmVudHM9W10sdGhpcy5vdmVycmlkZXNEaXJ0eT0hMX19bGV0IEQ9Y2xhc3MgZXh0ZW5kcyB0e2dldCB1cGRhdGluZygpe3JldHVybiB0aGlzLl9ncmFwaGljc0NvcmU/LnVwZGF0aW5nPz8hMX1jb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmxvYWRlZEdyYXBoaWNzPW5ldyBNKDVlNCksdGhpcy5zbGljZVBsYW5lRW5hYmxlZD0hMSx0aGlzLl9yZW5kZXJpbmdJbmZvPW5ldyBnKG51bGwsbmV3IHkpLHRoaXMuX2ZlYXR1cmVzTWFwPW5ldyBNYXB9aW5pdGlhbGl6ZSgpe2NvbnN0IGU9dGhpcy52aWV3LmJhc2VtYXBUZXJyYWluO3RoaXMuX2dyYXBoaWNzQ29yZT1uZXcgYih7b3duZXI6dGhpcyxsYXllcjp0aGlzLmxheWVyLHByZWZlcnJlZFVwZGF0ZVBvbGljeTpFLkFTWU5DLGVsZXZhdGlvbkZlYXR1cmVFeHByZXNzaW9uRW5hYmxlZDohMSxncmFwaGljU3ltYm9sU3VwcG9ydGVkOiExLGdldFJlbmRlcmluZ0luZm9XaXRob3V0UmVuZGVyZXI6ITAsaGFzWjohMCxoYXNNOiExLGNvbXBvbmVudEZhY3Rvcmllczp7ZGVjb25mbGljdG9yOmU9PnRoaXMudmlldy5kZWNvbmZsaWN0b3IuYWRkR3JhcGhpY3NPd25lcihlKSxsYWJlbGVyOihlLHQpPT50aGlzLnZpZXcubGFiZWxlci5hZGRHcmFwaGljc093bmVyKGUsdCx7ZW1wdHlTeW1ib2xMYWJlbFN1cHBvcnRlZDohMCxlbGV2YXRpb25JbmZvT3ZlcnJpZGU6e21vZGU6XCJhYnNvbHV0ZS1oZWlnaHRcIixvZmZzZXQ6MH0sZGlzYWJsZVBsYWNlbWVudDp7bG9nRW50aXR5RGVzY3JpcHRpb246XCIzRCBPYmplY3QgU2NlbmUgTGF5ZXIgZmVhdHVyZXNcIn19KSxzY2FsZVZpc2liaWxpdHk6aigpP251bGw6KHQscik9Pm5ldyBJKHtncmFwaGljc0NvcmVPd25lcjp0aGlzLGxheWVyOnRoaXMubGF5ZXIscXVlcnlHcmFwaGljVUlEc0luRXh0ZW50OnIsZ3JhcGhpY3NDb3JlOnQsYmFzZW1hcFRlcnJhaW46ZSxsYXllclNjYWxlRW5hYmxlZDohMX0pfX0pLHRoaXMuX2dyYXBoaWNzQ29yZS5pbml0aWFsaXplUHJvbWlzZS50aGVuKCgoKT0+dGhpcy5fZ3JhcGhpY3NDb3JlLnN0YXJ0Q3JlYXRlR3JhcGhpY3MoKSkpLmNhdGNoKCgoKT0+e30pKSx0aGlzLmFkZEhhbmRsZXMoYSgoKCk9PnRoaXMubGF5ZXIubGFiZWxpbmdJbmZvKSwoKGUsdCk9PntsKGUsdCkmJnRoaXMuX2dyYXBoaWNzQ29yZS51cGRhdGVMYWJlbGluZ0luZm8oKX0pKSl9ZGVzdHJveSgpe3RoaXMuX2dyYXBoaWNzQ29yZT1zKHRoaXMuX2dyYXBoaWNzQ29yZSksdGhpcy5sb2FkZWRHcmFwaGljcz1zKHRoaXMubG9hZGVkR3JhcGhpY3MpLHRoaXMudmlldz1udWxsfWFkZE5vZGVNZXRhKGUsdCl7bGV0IHI9MDtjb25zdCBvPWUuZmlsdGVyZWRJZHMsaT10aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSxzPVtdO2ZvcihsZXQgYT0wO2E8ZS5mZWF0dXJlSWRzLmxlbmd0aDthKyspe2NvbnN0IHA9ZS5mZWF0dXJlSWRzW2FdO2xldCBjPW51bGw9PW87aWYobyYmcjxvLmxlbmd0aCYmcD09PW9bcl0mJihjPSEwLHIrKyksIXRoaXMuX2VuYWJsZWRGb3JGZWF0dXJlSW5Ob2RlKGUsYSkpY29udGludWU7Y29uc3QgbD10aGlzLl9mZWF0dXJlc01hcC5nZXQocCk7aWYobCl7bC5jb21wb25lbnRzLnB1c2gobmV3IHcoZSxhKSksdGhpcy5fdXBkYXRlTGFiZWxQb3NpdGlvbihwKTtjb250aW51ZX1jb25zdCBoPXQoYSxlKSxkPWYoMCwwLDAsaSksdT17b2JqZWN0SWQ6cCx1aWQ6bigpLGF0dHJpYnV0ZXM6aCx2aXNpYmxlOmMsZ2VvbWV0cnk6ZH0sbT1uZXcgRyh1LGQpO20uY29tcG9uZW50cy5wdXNoKG5ldyB3KGUsYSkpLHRoaXMuX2ZlYXR1cmVzTWFwLnNldChwLG0pLHRoaXMuX3VwZGF0ZUxhYmVsR2VvbWV0cnkocCkscy5wdXNoKHUpfXRoaXMubG9hZGVkR3JhcGhpY3MuYWRkTWFueShzKX11cGRhdGVMYWJlbFBvc2l0aW9ucyhlKXtjb25zdCB0PXRoaXMudmlldy5yZW5kZXJDb29yZHNIZWxwZXI7dGhpcy5fZm9yRWFjaEdyYXBoaWMoZSwoKHIsbyxpKT0+e2NvbnN0IHM9dGhpcy5fZ3JhcGhpY3NDb3JlLmdldEdyYXBoaWNzM0RHcmFwaGljQnlJZChvLnVpZCk7bnVsbCE9cyYmdGhpcy5fdXBkYXRlTGFiZWxHZW9tZXRyeShlLmZlYXR1cmVJZHNbcl0pJiZzLmFsaWduV2l0aEFic29sdXRlRWxldmF0aW9uKGkuej8/MCx0LCExKX0pKX1zZXROb2RlTWV0YUF0dHJpYnV0ZXMoZSx0KXtjb25zdCByPW5ldyBBcnJheTt0aGlzLl9mb3JFYWNoR3JhcGhpYyhlLCgoaSxzKT0+e2NvbnN0IGE9dChpLGUpO28ocy5hdHRyaWJ1dGVzLGEpfHwocy5hdHRyaWJ1dGVzPWEsci5wdXNoKHMudWlkKSl9KSksdGhpcy5fZ3JhcGhpY3NDb3JlLnVwZGF0ZUxhYmVsaW5nSW5mbyhyKX1hcHBseUZpbHRlckNoYW5nZShlKXt0aGlzLl9mb3JFYWNoRmVhdHVyZShlLCgodCxyLG8pPT57aWYoIXRoaXMuX2VuYWJsZWRGb3JGZWF0dXJlSW5Ob2RlKGUsdCkpe2NvbnN0IG89ZS5mZWF0dXJlSWRzW3RdO3N3aXRjaCh0aGlzLl9yZW1vdmVGZWF0dXJlKHIsZSx0KSl7Y2FzZSBGLlJFTU9WRUQ6dGhpcy5sb2FkZWRHcmFwaGljcy5yZW1vdmVNYW55QnlPYmplY3RJZChbb10pO2JyZWFrO2Nhc2UgRi5NT0RJRklFRDp0aGlzLl91cGRhdGVMYWJlbFBvc2l0aW9uKG8pfXJldHVybn1jb25zdCBpPXIuZ3JhcGhpYyxzPWkudmlzaWJsZTtzIT09byYmKGkudmlzaWJsZT1vLEMuZ3JhcGhpYz1pLEMucHJvcGVydHk9XCJ2aXNpYmxlXCIsQy5vbGRWYWx1ZT1zLEMubmV3VmFsdWU9byx0aGlzLl9ncmFwaGljc0NvcmUuZ3JhcGhpY1VwZGF0ZUhhbmRsZXIoQykpfSkpfXJlbW92ZU5vZGVNZXRhKGUpe2NvbnN0IHQ9W107dGhpcy5fZm9yRWFjaEdyYXBoaWMoZSwocj0+e2NvbnN0IG89ZS5mZWF0dXJlSWRzW3JdLGk9dGhpcy5fZmVhdHVyZXNNYXAuZ2V0KG8pO2lmKCFpKXJldHVybjtzd2l0Y2godGhpcy5fcmVtb3ZlRmVhdHVyZShpLGUscikpe2Nhc2UgRi5NT0RJRklFRDp0aGlzLl91cGRhdGVMYWJlbFBvc2l0aW9uKG8pO2JyZWFrO2Nhc2UgRi5SRU1PVkVEOnQucHVzaChvKX19KSksdGhpcy5sb2FkZWRHcmFwaGljcy5yZW1vdmVNYW55QnlPYmplY3RJZCh0KX1fcmVtb3ZlRmVhdHVyZShlLHQsbyl7Y29uc3QgaT1lLmNvbXBvbmVudHMubGVuZ3RoO3JldHVybiByKGUuY29tcG9uZW50cywoZT0+IShlLm1ldGE9PT10JiZlLmluZGV4PT09bykpKSwwPT09ZS5jb21wb25lbnRzLmxlbmd0aD8odGhpcy5fZmVhdHVyZXNNYXAuZGVsZXRlKHQuZmVhdHVyZUlkc1tvXSksRi5SRU1PVkVEKTppIT09ZS5jb21wb25lbnRzLmxlbmd0aD9GLk1PRElGSUVEOkYuVU5NT0RJRklFRH1nZXRSZW5kZXJpbmdJbmZvKCl7cmV0dXJuIHRoaXMuX3JlbmRlcmluZ0luZm99bm90aWZ5R3JhcGhpY0dlb21ldHJ5Q2hhbmdlZCgpe31ub3RpZnlHcmFwaGljVmlzaWJpbGl0eUNoYW5nZWQoKXt9X3VwZGF0ZUxhYmVsUG9zaXRpb24oZSl7Y29uc3QgdD10aGlzLl9mZWF0dXJlc01hcC5nZXQoZSk7dCYmdGhpcy5fdXBkYXRlTGFiZWxHZW9tZXRyeShlKSYmKHRoaXMubG9hZGVkR3JhcGhpY3MucmVtb3ZlTWFueUJ5T2JqZWN0SWQoW2VdKSx0aGlzLmxvYWRlZEdyYXBoaWNzLmFkZE1hbnkoW3QuZ3JhcGhpY10pKX1fdXBkYXRlTGFiZWxHZW9tZXRyeShlKXtjb25zdCB0PXRoaXMuX2ZlYXR1cmVzTWFwLmdldChlKTtpZighdClyZXR1cm4hMTtjb25zdCByPXQuZ2VvbWV0cnksbz10aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSxzPXRoaXMudmlldy5yZW5kZXJDb29yZHNIZWxwZXIsYT1yLngsbj1yLnkscD1yLno/PzAsYz10LmNvbXBvbmVudHMubGVuZ3RoLGw9bShjKl8pO2xldCB1PTA7Zm9yKGNvbnN0e21ldGE6aSxpbmRleDpofW9mIHQuY29tcG9uZW50cyl2KGgsdGhpcy5jb2xsZWN0aW9uLGkub2JqZWN0SGFuZGxlLGwsdSksdSs9XztyZXR1cm4gaChsLHMuc3BhdGlhbFJlZmVyZW5jZSwwLGwsbywwKSxkKGwsTyksci54PShPWzBdK09bM10pLzIsci55PShPWzFdK09bNF0pLzIsci56PU9bNV0sIWkoci54LGEpfHwhaShyLnksbil8fCFpKHIueixwKX1fZm9yRWFjaEdyYXBoaWMoZSx0KXt0aGlzLl9mb3JFYWNoRmVhdHVyZShlLCgocix7Z3JhcGhpYzpvLGdlb21ldHJ5Oml9LHMpPT57dGhpcy5fZW5hYmxlZEZvckZlYXR1cmVJbk5vZGUoZSxyKSYmdChyLG8saSxzKX0pKX1fZm9yRWFjaEZlYXR1cmUoZSx0KXtsZXQgcj0wO2ZvcihsZXQgbz0wO288ZS5mZWF0dXJlSWRzLmxlbmd0aDtvKyspe2NvbnN0IGk9dGhpcy5fZmVhdHVyZXNNYXAuZ2V0KGUuZmVhdHVyZUlkc1tvXSk7bGV0IHM9bnVsbD09ZS5maWx0ZXJlZElkcztlLmZpbHRlcmVkSWRzJiZlLmZpbHRlcmVkSWRzW3JdPT09ZS5mZWF0dXJlSWRzW29dJiYocz0hMCxyKyspLGkmJnQobyxpLHMpfX1fZW5hYmxlZEZvckZlYXR1cmVJbk5vZGUoZSx0KXtyZXR1cm4gZS5ub2RlLmluZGV4PDB8fCF0aGlzLm92ZXJyaWRlcz8uZmVhdHVyZUhhc0dlb21ldHJ5Q2hhbmdlcyhlLmZlYXR1cmVJZHNbdF0pfWdldCB1cGRhdGVQb2xpY3koKXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3NDb3JlLmVmZmVjdGl2ZVVwZGF0ZVBvbGljeX1nZXQgdXNlZE1lbW9yeSgpe3JldHVybiB0aGlzLl9ncmFwaGljc0NvcmUudXNlZE1lbW9yeX1nZXQgdW5sb2FkZWRNZW1vcnlFc3RpbWF0ZSgpe3JldHVybiB0aGlzLl9ncmFwaGljc0NvcmUudW5wcm9jZXNzZWRNZW1vcnlFc3RpbWF0ZX1nZXQgdGVzdCgpe319O2UoW3AoKV0sRC5wcm90b3R5cGUsXCJ2aWV3XCIsdm9pZCAwKSxlKFtwKCldLEQucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLGUoW3AoKV0sRC5wcm90b3R5cGUsXCJjb2xsZWN0aW9uXCIsdm9pZCAwKSxlKFtwKCldLEQucHJvdG90eXBlLFwibG9hZGVkR3JhcGhpY3NcIix2b2lkIDApLGUoW3AoKV0sRC5wcm90b3R5cGUsXCJvdmVycmlkZXNcIix2b2lkIDApLGUoW3AoKV0sRC5wcm90b3R5cGUsXCJsYXllclZpZXdVaWRcIix2b2lkIDApLGUoW3AoKV0sRC5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLG51bGwpLGUoW3AoKV0sRC5wcm90b3R5cGUsXCJzbGljZVBsYW5lRW5hYmxlZFwiLHZvaWQgMCksZShbcCgpXSxELnByb3RvdHlwZSxcIl9ncmFwaGljc0NvcmVcIix2b2lkIDApLEQ9ZShbYyhcImVzcmkudmlld3MuM2QubGF5ZXJzLkkzU01lc2hWaWV3TGFiZWxlclwiKV0sRCk7Y29uc3QgQz17Z3JhcGhpYzpudWxsLHByb3BlcnR5Om51bGwsb2xkVmFsdWU6bnVsbCxuZXdWYWx1ZTpudWxsfTt2YXIgRjshZnVuY3Rpb24oZSl7ZVtlLlVOTU9ESUZJRUQ9MF09XCJVTk1PRElGSUVEXCIsZVtlLk1PRElGSUVEPTFdPVwiTU9ESUZJRURcIixlW2UuUkVNT1ZFRD0yXT1cIlJFTU9WRURcIn0oRnx8KEY9e30pKTtjb25zdCBPPXUoKTtleHBvcnR7RCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7TGF5ZXJWaWV3UGVyZm9ybWFuY2VJbmZvIGFzIHR9ZnJvbVwiLi9zdXBwb3J0L0xheWVyVmlld1BlcmZvcm1hbmNlSW5mby5qc1wiO2NsYXNzIGUgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKHQsZSxyLHMsbyxpLHApe3N1cGVyKHQsMCwwLDAsZSksdGhpcy5ncHVNQj1yLHRoaXMuZ2VvbWV0cnlNQj1zLHRoaXMudGV4dHVyZU1CPW8sdGhpcy51bmxvYWRlZE1CPWksdGhpcy5pZGJIaXRSYXRlPXB9fWV4cG9ydHtlIGFzIEkzU01lc2hWaWV3UGVyZm9ybWFuY2VJbmZvfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbixvLEU7IWZ1bmN0aW9uKG4pe25bbi5WSVNJQkxFX09OTFk9MF09XCJWSVNJQkxFX09OTFlcIixuW24uQUxMPTFdPVwiQUxMXCIsbltuLlFVRVJZQUJMRT0yXT1cIlFVRVJZQUJMRVwifShufHwobj17fSkpLGZ1bmN0aW9uKG4pe25bbi5FWElUPTBdPVwiRVhJVFwiLG5bbi5DT05USU5VRT0xXT1cIkNPTlRJTlVFXCIsbltuLlNLSVA9Ml09XCJTS0lQXCJ9KG98fChvPXt9KSksZnVuY3Rpb24obil7bltuLkFic29sdXRlPTBdPVwiQWJzb2x1dGVcIixuW24uUmVsYXRpdmVUb0dyb3VuZD0xXT1cIlJlbGF0aXZlVG9Hcm91bmRcIixuW24uT25UaGVHcm91bmQ9Ml09XCJPblRoZUdyb3VuZFwifShFfHwoRT17fSkpO2V4cG9ydHtFIGFzIEVsZXZhdGlvbk1vZGUsbiBhcyBGb3JBbGxGZWF0dXJlc01vZGUsbyBhcyBGb3JBbGxGZWF0dXJlc1JldHVyblR5cGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtoYXNTY2FsaW5nIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXRoVXRpbHMuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9NZXNoR2VvcmVmZXJlbmNlZFZlcnRleFNwYWNlLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9NZXNoTG9jYWxWZXJ0ZXhTcGFjZS5qc1wiO2ltcG9ydHtiIGFzIG4sbiBhcyBzfWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMzLmpzXCI7aW1wb3J0e0luZGV4VHlwZSBhcyBpfWZyb21cIi4uLy4uLy4uL2xpYnMvaTNzL2VudW1zLmpzXCI7aW1wb3J0e2dldCBhcyBhfWZyb21cIi4uLy4uLy4uL2xpYnMvaTNzL0kzU01vZHVsZS5qc1wiO2ltcG9ydHtUcmFuc2Zvcm1lZEdlb21ldHJ5IGFzIGYsVHJhbnNmb3JtZWREYXRhIGFzIGN9ZnJvbVwiLi9JM1NNZXNoV29ya2VySGFuZGxlLmpzXCI7aW1wb3J0e05vZGVJTU1vZGlmaWNhdGlvbkltcGFjdCBhcyBsfWZyb21cIi4vaTNzL0kzU05vZGUuanNcIjthc3luYyBmdW5jdGlvbiB1KGUpe0U9YXdhaXQgVSgpO2NvbnN0IHI9W2UuZ2VvbWV0cnlCdWZmZXJdO3JldHVybntyZXN1bHQ6QShFLGUsciksdHJhbnNmZXJMaXN0OnJ9fWFzeW5jIGZ1bmN0aW9uIG0oZSl7RT1hd2FpdCBVKCk7Y29uc3Qgcj1bZS5nZW9tZXRyeUJ1ZmZlcl0se2dlb21ldHJ5QnVmZmVyOnR9PWUsbz10LmJ5dGVMZW5ndGgsbj1FLl9tYWxsb2Mobykscz1uZXcgVWludDhBcnJheShFLkhFQVBVOC5idWZmZXIsbixvKTtzLnNldChuZXcgVWludDhBcnJheSh0KSk7Y29uc3QgaT1FLmRyYWNvRGVjb21wcmVzc1BvaW50Q2xvdWREYXRhKG4scy5ieXRlTGVuZ3RoKTtpZihFLl9mcmVlKG4pLGkuZXJyb3IubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKGBpM3Mud2FzbTogJHtpLmVycm9yfWApO2NvbnN0IGE9aS5mZWF0dXJlSWRzPy5sZW5ndGg+MD9pLmZlYXR1cmVJZHMuc2xpY2UoKTpudWxsLGY9aS5wb3NpdGlvbnMuc2xpY2UoKTtyZXR1cm4gYSYmci5wdXNoKGEuYnVmZmVyKSxyLnB1c2goZi5idWZmZXIpLHtyZXN1bHQ6e3Bvc2l0aW9uczpmLGZlYXR1cmVJZHM6YX0sdHJhbnNmZXJMaXN0OnJ9fWFzeW5jIGZ1bmN0aW9uIHkoZSl7YXdhaXQgVSgpLFMoZSk7Y29uc3Qgcj17YnVmZmVyOmUuYnVmZmVyfTtyZXR1cm57cmVzdWx0OnIsdHJhbnNmZXJMaXN0OltyLmJ1ZmZlcl19fWFzeW5jIGZ1bmN0aW9uIHAoZSl7YXdhaXQgVSgpLGooZSl9YXN5bmMgZnVuY3Rpb24gZChlKXtFPWF3YWl0IFUoKSxFLnNldExlZ2FjeVNjaGVtYShlLmNvbnRleHQsZS5qc29uU2NoZW1hKX1hc3luYyBmdW5jdGlvbiBoKGUpe2NvbnN0e2xvY2FsTWF0cml4Om4sb3JpZ2luOnMscG9zaXRpb25zOmksdmVydGV4U3BhY2U6YX09ZSxmPXIuZnJvbUpTT04oZS5pblNwYXRpYWxSZWZlcmVuY2UpLGM9ci5mcm9tSlNPTihlLm91dFNwYXRpYWxSZWZlcmVuY2UpO2xldCBsO2NvbnN0W3twcm9qZWN0QnVmZmVyOnV9LHtpbml0aWFsaXplUHJvamVjdGlvbjptfV09YXdhaXQgUHJvbWlzZS5hbGwoW2ltcG9ydChcIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJ1ZmZlci5qc1wiKSxpbXBvcnQoXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uVXRpbHMuanNcIildKTthd2FpdCBtKGYsYyk7Y29uc3QgeT1bMCwwLDBdO2lmKCF1KHMsZiwwLHksYywwKSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcHJvamVjdFwiKTtpZihcImdlb3JlZmVyZW5jZWRcIj09PWEudHlwZSYmbnVsbD09YS5vcmlnaW4pe2lmKGw9bmV3IEZsb2F0NjRBcnJheShpLmxlbmd0aCksIXUoaSxmLDAsbCxjLDAsbC5sZW5ndGgvMykpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHByb2plY3RcIil9ZWxzZXtjb25zdCBlPVwiZ2VvcmVmZXJlbmNlZFwiPT09YS50eXBlP3QuZnJvbUpTT04oYSk6by5mcm9tSlNPTihhKSx7cHJvamVjdE1lc2hWZXJ0ZXhQb3NpdGlvbnM6cn09YXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVXRpbHMvcHJvamVjdE1lc2hWZXJ0ZXhQb3NpdGlvbnMuanNcIikscz1yKHt2ZXJ0ZXhBdHRyaWJ1dGVzOntwb3NpdGlvbjppfSx0cmFuc2Zvcm06bj97bG9jYWxNYXRyaXg6bn06dm9pZCAwLHZlcnRleFNwYWNlOmUsc3BhdGlhbFJlZmVyZW5jZTpmfSxjKTtpZighcyl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcHJvamVjdFwiKTtsPXN9Y29uc3QgcD1sLmxlbmd0aCxbZCxoLGJdPXk7Zm9yKGxldCByPTA7cjxwO3IrPTMpbFtyXS09ZCxsW3IrMV0tPWgsbFtyKzJdLT1iO3JldHVybntyZXN1bHQ6e3Byb2plY3RlZDpsLG9yaWdpbmFsOmkscHJvamVjdGVkT3JpZ2luOnl9LHRyYW5zZmVyTGlzdDpbbC5idWZmZXIsaS5idWZmZXJdfX1hc3luYyBmdW5jdGlvbiBiKHtub3JtYWxNYXRyaXg6cixub3JtYWxzOnR9KXtjb25zdCBvPW5ldyBGbG9hdDMyQXJyYXkodC5sZW5ndGgpO3JldHVybiBuKG8sdCxyKSxlKHIpJiZzKG8sbykse3Jlc3VsdDp7dHJhbnNmb3JtZWQ6byxvcmlnaW5hbDp0fSx0cmFuc2Zlckxpc3Q6W28uYnVmZmVyLHQuYnVmZmVyXX19ZnVuY3Rpb24gZyhlKXt4KGUpfWxldCB3LEU7ZnVuY3Rpb24gaihlKXtpZighRSlyZXR1cm47Y29uc3Qgcj1lLm1vZGlmaWNhdGlvbnMsdD1FLl9tYWxsb2MoOCpyLmxlbmd0aCksbz1uZXcgRmxvYXQ2NEFycmF5KEUuSEVBUFU4LmJ1ZmZlcix0LHIubGVuZ3RoKTtmb3IobGV0IG49MDtuPHIubGVuZ3RoOysrbilvW25dPXJbbl07RS5zZXRNb2RpZmljYXRpb25zKGUuY29udGV4dCx0LHIubGVuZ3RoLGUuaXNHZW9kZXRpYyksRS5fZnJlZSh0KX1mdW5jdGlvbiBBKGUscix0KXtjb25zdHtjb250ZXh0Om8sZ2xvYmFsVHJhZm86bixtYnM6cyxvYmJEYXRhOmEsZWxldmF0aW9uT2Zmc2V0OmwsZ2VvbWV0cnlCdWZmZXI6dSxnZW9tZXRyeURlc2NyaXB0b3I6bSxpbmRleFRvVmVydGV4UHJvamVjdG9yOnksdmVydGV4VG9SZW5kZXJQcm9qZWN0b3I6cH09cixkPWUuX21hbGxvYyh1LmJ5dGVMZW5ndGgpLGg9MzMsYj1lLl9tYWxsb2MoaCpGbG9hdDY0QXJyYXkuQllURVNfUEVSX0VMRU1FTlQpLGc9bmV3IFVpbnQ4QXJyYXkoZS5IRUFQVTguYnVmZmVyLGQsdS5ieXRlTGVuZ3RoKTtnLnNldChuZXcgVWludDhBcnJheSh1KSk7Y29uc3Qgdz1uZXcgRmxvYXQ2NEFycmF5KGUuSEVBUFU4LmJ1ZmZlcixiLGgpO18odyxbTmFOLE5hTixOYU5dKTtsZXQgRT13LmJ5dGVPZmZzZXQrMyp3LkJZVEVTX1BFUl9FTEVNRU5ULGo9bmV3IEZsb2F0NjRBcnJheSh3LmJ1ZmZlcixFKTtfKGosbiksRSs9MTYqdy5CWVRFU19QRVJfRUxFTUVOVCxqPW5ldyBGbG9hdDY0QXJyYXkody5idWZmZXIsRSksXyhqLHMpLEUrPTQqdy5CWVRFU19QRVJfRUxFTUVOVCxhJiYoaj1uZXcgRmxvYXQ2NEFycmF5KHcuYnVmZmVyLEUpLF8oaixhKSk7Y29uc3QgQT1tLEw9e2lzRHJhY286ITEsaXNMZWdhY3k6ITEsY29sb3I6ci5sYXlvdXRzLnNvbWUoKGU9PmUuc29tZSgoZT0+XCJjb2xvclwiPT09ZS5uYW1lKSkpKSxub3JtYWw6ci5uZWVkTm9ybWFscyYmci5sYXlvdXRzLnNvbWUoKGU9PmUuc29tZSgoZT0+XCJub3JtYWxDb21wcmVzc2VkXCI9PT1lLm5hbWUpKSkpLHV2MDpyLmxheW91dHMuc29tZSgoZT0+ZS5zb21lKChlPT5cInV2MFwiPT09ZS5uYW1lKSkpKSx1dlJlZ2lvbjpyLmxheW91dHMuc29tZSgoZT0+ZS5zb21lKChlPT5cInV2UmVnaW9uXCI9PT1lLm5hbWUpKSkpLGZlYXR1cmVJbmRleDpBLmZlYXR1cmVJbmRleH0sUz1lLnByb2Nlc3MobywhIXIub2JiRGF0YSxkLGcuYnl0ZUxlbmd0aCxBLEwsYixsLHkscCxyLm5vcm1hbFJlZmVyZW5jZUZyYW1lKTtpZihlLl9mcmVlKGIpLGUuX2ZyZWUoZCksUy5lcnJvci5sZW5ndGg+MCl0aHJvdyBuZXcgRXJyb3IoYGkzcy53YXNtOiAke1MuZXJyb3J9YCk7aWYoUy5kaXNjYXJkZWQpcmV0dXJuIG51bGw7Y29uc3QgeD1TLmNvbXBvbmVudE9mZnNldHMubGVuZ3RoPjA/Uy5jb21wb25lbnRPZmZzZXRzLnNsaWNlKCk6bnVsbCxQPVMuZmVhdHVyZUlkcy5sZW5ndGg+MD9TLmZlYXR1cmVJZHMuc2xpY2UoKTpudWxsLFU9Uy5hbmNob3JJZHMubGVuZ3RoPjA/QXJyYXkuZnJvbShTLmFuY2hvcklkcyk6bnVsbCxNPVMuYW5jaG9ycy5sZW5ndGg+MD9BcnJheS5mcm9tKFMuYW5jaG9ycyk6bnVsbCxOPVMuaW50ZXJsZWF2ZWRWZXJ0ZWREYXRhLnNsaWNlKCkuYnVmZmVyLEk9Uy5pbmRpY2VzVHlwZT09PWkuSW50MTY/bmV3IFVpbnQxNkFycmF5KFMuaW5kaWNlcy5idWZmZXIsUy5pbmRpY2VzLmJ5dGVPZmZzZXQsUy5pbmRpY2VzLmJ5dGVMZW5ndGgvMikuc2xpY2UoKTpuZXcgVWludDMyQXJyYXkoUy5pbmRpY2VzLmJ1ZmZlcixTLmluZGljZXMuYnl0ZU9mZnNldCxTLmluZGljZXMuYnl0ZUxlbmd0aC80KS5zbGljZSgpLEY9Uy5wb3NpdGlvbnMuc2xpY2UoKSx7YnVmZmVyOlQsYnl0ZU9mZnNldDpCLGJ5dGVMZW5ndGg6T309Uy5wb3NpdGlvbkluZGljZXMsUj1TLnBvc2l0aW9uSW5kaWNlc1R5cGU9PT1pLkludDE2P25ldyBVaW50MTZBcnJheShULEIsTy8yKS5zbGljZSgpOm5ldyBVaW50MzJBcnJheShULEIsTy80KS5zbGljZSgpLHY9bmV3IGYoci5sYXlvdXRzWzBdLE4sSSxTLmhhc0NvbG9ycyxTLmhhc01vZGlmaWNhdGlvbnMse2RhdGE6RixpbmRpY2VzOlJ9KTtyZXR1cm4gUCYmdC5wdXNoKFAuYnVmZmVyKSx4JiZ0LnB1c2goeC5idWZmZXIpLHQucHVzaChOKSx0LnB1c2goSS5idWZmZXIpLHQucHVzaChGLmJ1ZmZlciksdC5wdXNoKFIuYnVmZmVyKSxuZXcgYyh4LFAsVSxNLHYsbixTLm9iYil9ZnVuY3Rpb24gTChlKXtyZXR1cm4gMD09PWU/bC5Vbm1vZGlmaWVkOjE9PT1lP2wuUG90ZW50aWFsbHlNb2RpZmllZDoyPT09ZT9sLkN1bGxlZDpsLlVua25vd259ZnVuY3Rpb24gUyhlKXtpZighRSlyZXR1cm47Y29uc3R7Y29udGV4dDpyLGJ1ZmZlcjp0fT1lLG89RS5fbWFsbG9jKHQuYnl0ZUxlbmd0aCksbj10LmJ5dGVMZW5ndGgvRmxvYXQ2NEFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULHM9bmV3IEZsb2F0NjRBcnJheShFLkhFQVBVOC5idWZmZXIsbyxuKSxpPW5ldyBGbG9hdDY0QXJyYXkodCk7cy5zZXQoaSksRS5maWx0ZXJPQkJzKHIsbyxuKSxpLnNldChzKSxFLl9mcmVlKG8pfWZ1bmN0aW9uIHgoZSl7RSYmMD09PUUuZGVzdHJveShlKSYmKEU9bnVsbCl9ZnVuY3Rpb24gXyhlLHIpe2ZvcihsZXQgdD0wO3Q8ci5sZW5ndGg7Kyt0KWVbdF09clt0XX1hc3luYyBmdW5jdGlvbiBQKCl7RXx8YXdhaXQgVSgpfWFzeW5jIGZ1bmN0aW9uIFUoKXtyZXR1cm4gRXx8KEU9YXdhaXQodz8/PWEoKSkpLEV9Y29uc3QgTT17dHJhbnNmb3JtOihlLHIpPT5FJiZBKEUsZSxyKSxkZXN0cm95Onh9O2V4cG9ydHtnIGFzIGRlc3Ryb3lDb250ZXh0LG0gYXMgZHJhY29EZWNvbXByZXNzUG9pbnRDbG91ZERhdGEseSBhcyBmaWx0ZXJPYmJzRm9yTW9kaWZpY2F0aW9ucyxTIGFzIGZpbHRlck9iYnNGb3JNb2RpZmljYXRpb25zU3luYyxQIGFzIGluaXRpYWxpemUsTCBhcyBpbnRlcnByZXRPYmJNb2RpZmljYXRpb25SZXN1bHRzLHUgYXMgcHJvY2VzcyxoIGFzIHByb2plY3QsZCBhcyBzZXRMZWdhY3lTY2hlbWEscCBhcyBzZXRNb2RpZmljYXRpb25zLGogYXMgc2V0TW9kaWZpY2F0aW9uc1N5bmMsTSBhcyB0ZXN0LGIgYXMgdHJhbnNmb3JtTm9ybWFsc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3JlbW92ZVVub3JkZXJlZCBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHttYWtlSGFuZGxlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYW5kbGVVdGlscy5qc1wiO2ltcG9ydHtnZXRPckNyZWF0ZU1hcFZhbHVlIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9NYXBVdGlscy5qc1wiO2ltcG9ydHtGb3JBbGxGZWF0dXJlc1JldHVyblR5cGUgYXMgc31mcm9tXCIuLi9JSTNTTWVzaFZpZXczRC5qc1wiO2NsYXNzIGh7Y29uc3RydWN0b3IodCl7dGhpcy5oaWdobGlnaHROYW1lPXQsdGhpcy5pZHM9bmV3IFNldH19Y2xhc3MgbHtjb25zdHJ1Y3Rvcih7Y29sbGVjdGlvbjp0LGZvckFsbEZlYXR1cmVzOmUsZm9yQWxsRmVhdHVyZXNPZk5vZGU6aX0pe3RoaXMuX2hpZ2hsaWdodHM9bmV3IE1hcCx0aGlzLl9jb2xsZWN0aW9uPXQsdGhpcy5fZm9yQWxsRmVhdHVyZXM9ZSx0aGlzLl9mb3JBbGxGZWF0dXJlc09mTm9kZT1pfWRlc3Ryb3koKXt0aGlzLl9oaWdobGlnaHRzLmZvckVhY2goKHQ9PnQuZm9yRWFjaCgodD0+dGhpcy5fcmVsZWFzZVNldCh0KSkpKSksdGhpcy5faGlnaGxpZ2h0cz1udWxsfWFjcXVpcmVTZXQocyl7Y29uc3QgbD1uZXcgaChzKTtpKHRoaXMuX2hpZ2hsaWdodHMscywoKCk9PltdKSkucHVzaChsKTtjb25zdCBvPWUoKCgpPT57Y29uc3QgZT10aGlzLl9oaWdobGlnaHRzPy5nZXQocyk7ZSYmKHRoaXMuX3JlbGVhc2VTZXQobCksdChlLGwpKX0pKTtyZXR1cm57c2V0OmwsaGFuZGxlOm99fXNldEZlYXR1cmVJZHModCxlKXtlLmZvckVhY2goKGU9PnQuaWRzLmFkZChlKSkpLHRoaXMuX2luaXRpYWxpemVTZXQodCl9X2luaXRpYWxpemVTZXQodCl7dGhpcy5fZm9yQWxsRmVhdHVyZXMoKChlLGksaCk9Pih0Lmlkcy5oYXMoZSkmJnRoaXMuX2NvbGxlY3Rpb24uYWRkQ29tcG9uZW50SGlnaGxpZ2h0KGgub2JqZWN0SGFuZGxlLGksdC5oaWdobGlnaHROYW1lKSxzLkNPTlRJTlVFKSkpfV9yZWxlYXNlU2V0KHQpe3RoaXMuX2ZvckFsbEZlYXR1cmVzKCgoZSxpLGgpPT4odC5pZHMuaGFzKGUpJiZ0aGlzLl9jb2xsZWN0aW9uLnJlbW92ZUNvbXBvbmVudEhpZ2hsaWdodChoLm9iamVjdEhhbmRsZSxpLHQuaGlnaGxpZ2h0TmFtZSkscy5DT05USU5VRSkpKX1vYmplY3RDcmVhdGVkKHQpe3RoaXMuX2hpZ2hsaWdodHMuZm9yRWFjaCgoKGUsaSk9PntlLmZvckVhY2goKGU9Pnt0aGlzLl9mb3JBbGxGZWF0dXJlc09mTm9kZSh0LCgoaCxsKT0+KGUuaWRzLmhhcyhoKSYmdGhpcy5fY29sbGVjdGlvbi5hZGRDb21wb25lbnRIaWdobGlnaHQodC5vYmplY3RIYW5kbGUsbCxpKSxzLkNPTlRJTlVFKSkpfSkpfSkpfW9iamVjdERlbGV0ZWQodCl7dGhpcy5fY29sbGVjdGlvbi5jbGVhckhpZ2hsaWdodHModC5vYmplY3RIYW5kbGUpfX1leHBvcnR7bCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL1JhbmRvbUxDRy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7RWxldmF0aW9uTW9kZSBhcyBpfWZyb21cIi4uL0lJM1NNZXNoVmlldzNELmpzXCI7aW1wb3J0e0V4dGVudFNldCBhcyBvfWZyb21cIi4uL2dyYXBoaWNzL0V4dGVudFNldC5qc1wiO2ltcG9ydHtUYXNrUHJpb3JpdHkgYXMgbn1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2xldCBhPWNsYXNzIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcih0LGUscyxyKXtzdXBlcih7fSksdGhpcy5fdXBkYXRlRXh0ZW50PWUsdGhpcy5fdXBkYXRlTm9kZT1zLHRoaXMuX2dldEVsZXZhdGlvbk1vZGU9cix0aGlzLnJ1bm5pbmc9ITEsdGhpcy5fZXh0ZW50U2V0PW5ldyBvLHRoaXMuX25vZGVTZXQ9bmV3IFNldDtjb25zdCBpPXRoaXMuX3Rhc2tQcmlvcml0eSxuPXQucmVnaXN0ZXJUYXNrKHRoaXMuX3Rhc2tQcmlvcml0eSx0aGlzKTt0aGlzLmFkZEhhbmRsZXMobiksdGhpcy5fdGFzaz1uLHRoaXMuX2xhc3RUYXNrUHJpb3JpdHk9aX1nZXQgX3Rhc2tQcmlvcml0eSgpe2NvbnN0IHQ9dGhpcy5fZ2V0RWxldmF0aW9uTW9kZSgpO3JldHVybiB0JiZ0PT09aS5SZWxhdGl2ZVRvR3JvdW5kP24uRUxFVkFUSU9OX0FMSUdOTUVOVF9TQ0VORTpuLkVMRVZBVElPTl9BTElHTk1FTlR9X3VwZGF0ZVRhc2tQcmlvcml0eSgpe2NvbnN0IHQ9dGhpcy5fdGFza1ByaW9yaXR5O3QhPT10aGlzLl9sYXN0VGFza1ByaW9yaXR5JiYodGhpcy5fdGFzay5wcmlvcml0eT10LHRoaXMuX2xhc3RUYXNrUHJpb3JpdHk9dCl9YWRkRXh0ZW50KHQpe3RoaXMuX2V4dGVudFNldC5hZGQodCksdGhpcy5fdXBkYXRlVGFza1ByaW9yaXR5KCksdGhpcy5ydW5uaW5nPSEwfXNjaGVkdWxlKHQpe3RoaXMuX25vZGVTZXQuYWRkKHQpLHRoaXMuX3VwZGF0ZVRhc2tQcmlvcml0eSgpLHRoaXMucnVubmluZz0hMH1yZW1vdmUodCl7dGhpcy5fbm9kZVNldC5kZWxldGUodCksdGhpcy5fdXBkYXRlUnVubmluZygpfXJ1blRhc2sodCl7Y29uc3QgZT10aGlzLl9leHRlbnRTZXQ7Zm9yKHQucnVuKCgoKT0+ZS5tZXJnZSh0KSkpOyFlLmVtcHR5JiYhdC5kb25lOyl7Y29uc3Qgcz10aGlzLl91cGRhdGVFeHRlbnQoZS5wb3AoKSk7bnVsbCE9cyYmcy5mb3JBbGwoKHQ9PnRoaXMuc2NoZWR1bGUodCkpKSx0Lm1hZGVQcm9ncmVzcygpfWlmKHQuZG9uZSlyZXR1cm47Y29uc3Qgcz10aGlzLl9ub2RlU2V0O2Zvcihjb25zdCByIG9mIHMpaWYocy5kZWxldGUociksdGhpcy5fdXBkYXRlTm9kZShyKSx0Lm1hZGVQcm9ncmVzcygpLHQuZG9uZSlicmVhazt0aGlzLl91cGRhdGVSdW5uaW5nKCl9X3VwZGF0ZVJ1bm5pbmcoKXt0aGlzLnJ1bm5pbmc9dGhpcy5fbm9kZVNldC5zaXplPjB8fHRoaXMuX2V4dGVudFNldC5zaXplPjB9fTt0KFtzKCldLGEucHJvdG90eXBlLFwicnVubmluZ1wiLHZvaWQgMCksYT10KFtyKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuaTNzLkkzU0FzeW5jRWxldmF0aW9uVXBkYXRlclwiKV0sYSk7ZXhwb3J0e2EgYXMgSTNTQXN5bmNFbGV2YXRpb25VcGRhdGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cmVtb3ZlTWF5YmUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2FkZEZyYW1lVGFzayBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc2NoZWR1bGluZy5qc1wiO2ltcG9ydHtGYWRlRGlyZWN0aW9uIGFzIGR9ZnJvbVwiLi4vc3VwcG9ydC9JM1NMYXllclZpZXcuanNcIjtjbGFzcyBve2NvbnN0cnVjdG9yKCl7dGhpcy5sb2RDcm9zc2ZhZGVTaWduZWREdXJhdGlvbj0wfX1jbGFzcyBpe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3ZpZXc9ZSx0aGlzLl9wcmVSZW5kZXJGcmFtZVRhc2tIYW5kbGU9bnVsbCx0aGlzLl9jdXJyZW50RnJhbWVTdGFydFRpbWU9bnVsbCx0aGlzLl9udW1GYWRpbmdOb2Rlcz0wfWRlc3Ryb3koKXt0aGlzLl9wcmVSZW5kZXJGcmFtZVRhc2tIYW5kbGU/LnJlbW92ZSgpLHRoaXMuX3ByZVJlbmRlckZyYW1lVGFza0hhbmRsZT1udWxsLHRoaXMuX3ZpZXc9bnVsbH1nZXQgdXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5fbnVtRmFkaW5nTm9kZXM+MH1zdG9wTm9kZUZhZGluZyhzKXtudWxsIT1zLmxvZENyb3NzZmFkZVByb2dyZXNzJiYodGhpcy5fbnVtRmFkaW5nTm9kZXMtLSxzLmxvZENyb3NzZmFkZVByb2dyZXNzPW51bGwsMD09PXRoaXMuX251bUZhZGluZ05vZGVzJiYobnVsbCE9dGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlJiYodGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlPWUodGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlKSksdGhpcy5fdmlldy5ub3RpZnlMT0RVcGRhdGUoKSx0aGlzLl92aWV3Lm5vdGlmeVVwZGF0ZSgpKSl9X3N0YXJ0Tm9kZUZhZGluZyhlLGQsbyl7MD09PXRoaXMuX251bUZhZGluZ05vZGVzJiYodGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlPXMoe3ByZVJlbmRlcjplPT50aGlzLl91cGRhdGVBbGxOb2RlRmFkaW5nKGUpfSksdGhpcy5fdmlldy5ub3RpZnlMT0RVcGRhdGUoKSksbnVsbD09ZS5sb2RDcm9zc2ZhZGVQcm9ncmVzcyYmKHRoaXMuX251bUZhZGluZ05vZGVzKyssdGhpcy5fdmlldy5ub3RpZnlVcGRhdGUoKSksZS5sb2RDcm9zc2ZhZGVTaWduZWREdXJhdGlvbj1vLGUubG9kQ3Jvc3NmYWRlUHJvZ3Jlc3M9ZH1fdXBkYXRlQWxsTm9kZUZhZGluZyhlKXtjb25zdCBzPXRoaXMuX3ZpZXcubm9kZUNyb3NzZmFkaW5nRW5hYmxlZDt0aGlzLl92aWV3LmZvcmVhY2hDcm9zc2ZhZGVOb2RlKCgoZCxvKT0+e2lmKG51bGwhPWQ/LmxvZENyb3NzZmFkZVByb2dyZXNzKXtjb25zdCBpPWQubG9kQ3Jvc3NmYWRlU2lnbmVkRHVyYXRpb24sdD1pPjA/dGhpcy5fdmlldy5mdWxsT3BhY2l0eTowLHI9ZS5kZWx0YVRpbWUvaSxhPWQubG9kQ3Jvc3NmYWRlUHJvZ3Jlc3MrTWF0aC5hYnMociksbj0hc3x8YT49MXx8MD09PWksbD10LShuPzA6aT4wPzE6LTEpKigxLWEpO24/KHRoaXMuc3RvcE5vZGVGYWRpbmcoZCksaTwwJiZ0aGlzLl92aWV3Lm1hcmtOb2RlVG9SZW1vdmUobykpOmQubG9kQ3Jvc3NmYWRlUHJvZ3Jlc3M9YSx0aGlzLl92aWV3LnNldE5vZGVPcGFjaXR5QnlJbmRleChvLGwpfX0pKSx0aGlzLl92aWV3LnJlbW92ZU1hcmtlZE5vZGVzKCl9c3RvcEFsbE5vZGVGYWRpbmcoKXt0aGlzLl92aWV3LmZvcmVhY2hDcm9zc2ZhZGVOb2RlKCgoZSxzKT0+e2lmKG51bGwhPWU/LmxvZENyb3NzZmFkZVByb2dyZXNzKXt0aGlzLnN0b3BOb2RlRmFkaW5nKGUpO2NvbnN0IGQ9ZS5sb2RDcm9zc2ZhZGVTaWduZWREdXJhdGlvbjtkPDAmJnRoaXMuX3ZpZXcubWFya05vZGVUb1JlbW92ZShzKTtjb25zdCBvPWQ+MD90aGlzLl92aWV3LmZ1bGxPcGFjaXR5OjA7dGhpcy5fdmlldy5zZXROb2RlT3BhY2l0eUJ5SW5kZXgocyxvKX19KSksdGhpcy5fdmlldy5yZW1vdmVNYXJrZWROb2RlcygpfWZhZGVOb2RlKGUscyxvLGkpe251bGw9PXRoaXMuX2N1cnJlbnRGcmFtZVN0YXJ0VGltZSYmKHRoaXMuX2N1cnJlbnRGcmFtZVN0YXJ0VGltZT1EYXRlLm5vdygpKTtjb25zdCByPXRoaXMuX3ZpZXcsYT1yLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQsbj1vPT09ZC5GYWRlSW4/ci5mdWxsT3BhY2l0eTowLGw9YT9pP289PT1kLkZhZGVJbj9yLmxvZENyb3NzZmFkZWluRHVyYXRpb246ci5sb2RDcm9zc2ZhZGVvdXREdXJhdGlvbjpyLmxvZENyb3NzZmFkZVVuY292ZXJlZER1cmF0aW9uOjAsaD10aGlzLl92aWV3LmdldE5vZGVPcGFjaXR5QnlJbmRleChlKTtpZihhJiZoIT09biYmbD4wKXtjb25zdCBlPTEtTWF0aC5hYnMobi1oKTt0aGlzLl9zdGFydE5vZGVGYWRpbmcocyxlLHQobykqbCl9ZWxzZSB0aGlzLnN0b3BOb2RlRmFkaW5nKHMpLHRoaXMuX3ZpZXcuc2V0Tm9kZU9wYWNpdHlCeUluZGV4KGUsbiksbz09PWQuRmFkZU91dCYmdGhpcy5fdmlldy5yZW1vdmVOb2RlKGUpfWlzTm9kZUZ1bGx5RmFkZWRJbihlKXtjb25zdCBzPXRoaXMuX3ZpZXcuZ2V0Tm9kZUNyb3NzZmFkZU1ldGFEYXRhKGUpO3JldHVybiBudWxsPT1zfHxudWxsPT1zLmxvZENyb3NzZmFkZVByb2dyZXNzJiZ0aGlzLl92aWV3LmdldE5vZGVPcGFjaXR5QnlJbmRleChlKT09PXRoaXMuX3ZpZXcuZnVsbE9wYWNpdHl9fWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGU9PT1kLkZhZGVJbj8xOi0xfWV4cG9ydHtpIGFzIEkzU0Nyb3NzZmFkZUhlbHBlcixvIGFzIE5vZGVDcm9zc2ZhZGVNZXRhRGF0YX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e28sZiBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xpYnMvZ2wtbWF0cml4LTIvZmFjdG9yaWVzL3ZlYzNmNjQuanNcIjtpbXBvcnR7cHJvamVjdEJ1ZmZlciBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJ1ZmZlci5qc1wiO2ltcG9ydHtmcm9tQnVmZmVyIGFzIG4sc2V0IGFzIGEsemVybyBhcyBzLGNyZWF0ZSBhcyBtfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtuZXdEb3VibGVBcnJheSBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRG91YmxlQXJyYXkuanNcIjtmdW5jdGlvbiBmKG8scix0KXtjb25zdCBtPWMoMjQpO3JldHVybiBjPT57Y29uc3QgZj1jLm1ldGEuZmVhdHVyZUV4dGVudHMscD1uZXcgRmxvYXQ2NEFycmF5KGYuYnVmZmVyLDYqYy5pbmRleCpGbG9hdDY0QXJyYXkuQllURVNfUEVSX0VMRU1FTlQsNik7cmV0dXJuIHBbMF09PT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkmJihpKGMuaW5kZXgsdCxjLm1ldGEub2JqZWN0SGFuZGxlLG0sMCksZShtLHIsMCxtLG8sMCk/bihtLHApOmEocCxzKSkscH19ZnVuY3Rpb24gaSh0LGUsbixhLHMpe2NvbnN0IG09ZS5nZXRDb21wb25lbnRBYWJiKG4sdCx1KSxjPWUuZ2V0T2JqZWN0VHJhbnNmb3JtKG4pO2ZvcihsZXQgZj0wO2Y8ODsrK2YpalswXT0xJmY/bVswXTptWzNdLGpbMV09MiZmP21bMV06bVs0XSxqWzJdPTQmZj9tWzJdOm1bNV0sbyhqLGosYy5yb3RhdGlvblNjYWxlKSxyKGosaixjLnBvc2l0aW9uKSxhW3MrK109alswXSxhW3MrK109alsxXSxhW3MrK109alsyXTtyZXR1cm4gYX1jb25zdCBwPTI0LHU9bSgpLGo9dCgpO2V4cG9ydHtpIGFzIGJvdW5kaW5nQm94Q29ybmVyUG9pbnRzLHAgYXMgYm91bmRpbmdCb3hDb3JuZXJzUG9pbnRzU3RyaWRlLGYgYXMgY3JlYXRlR2V0RmVhdHVyZUV4dGVudH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e1ZpZXdpbmdNb2RlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vVmlld2luZ01vZGUuanNcIjtpbXBvcnR7aXNWYWxpZE1icyBhcyB0fWZyb21cIi4vSTNTVXRpbC5qc1wiO2ltcG9ydHtJM3NUYXJnZXQgYXMgaX1mcm9tXCIuL0ludGVyc2VjdG9yLmpzXCI7aW1wb3J0e1N0b3JlUmVzdWx0cyBhcyBufWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvSW50ZXJzZWN0b3JJbnRlcmZhY2VzLmpzXCI7aW1wb3J0e0ludGVyc2VjdG9yUmVzdWx0IGFzIHJ9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9JbnRlcnNlY3RvclJlc3VsdC5qc1wiO2ltcG9ydHtJbnRlcnNlY3RvclR5cGUgYXMgc31mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL0ludGVyc2VjdG9yVHlwZS5qc1wiO2ltcG9ydHtNZXNoSW50ZXJzZWN0aW9uT3B0aW9ucyBhcyBsfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvUmF5SW50ZXJzZWN0aW9ucy5qc1wiO2ltcG9ydHtnZXRWZXJ0aWNhbE9mZnNldEkzUyBhcyBvfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvdmVydGljYWxPZmZzZXRVdGlscy5qc1wiO2NsYXNzIGN7Y29uc3RydWN0b3IoZSl7dGhpcy50eXBlPXMuSTNTLHRoaXMuX25lZWRWZXJ0aWNhbE9mZnNldD0hMSx0aGlzLmxheWVyVmlld1VpZD1lLmxheWVyVmlld1VpZCx0aGlzLnN1YmxheWVySWQ9ZS5zdWJsYXllcklkLHRoaXMuX2NvbGxlY3Rpb249ZS5jb2xsZWN0aW9uLHRoaXMuX3RyYXZlcnNlTm9kZUhpZXJhcmNoeT1lLnRyYXZlcnNlTm9kZUhpZXJhcmNoeSx0aGlzLnNsaWNlUGxhbmVFbmFibGVkPWUuc2xpY2VQbGFuZUVuYWJsZWQsdGhpcy5pc0dyb3VuZD1lLmlzR3JvdW5kfXVwZGF0ZUVsZXZhdGlvbkFsaWduU3RhdGUodCxpKXt0aGlzLl9uZWVkVmVydGljYWxPZmZzZXQ9dCYmaT09PWUuR2xvYmFsfWludGVyc2VjdChlLHMsYyxkLHUsYil7Y29uc3QgZj1lLnJlc3VsdHMsbT1lLm9wdGlvbnMuc3RvcmU9PT1uLkFMTCxoPWUucmF5LmRpcmVjdGlvbixwPWUudG9sZXJhbmNlO2xldCB5PWU9PmUsZz1lPT5lO2NvbnN0IEk9byhlLnZlcnRpY2FsT2Zmc2V0Pz8odGhpcy5fbmVlZFZlcnRpY2FsT2Zmc2V0PzA6bnVsbCkpO251bGwhPWUudmVydGljYWxPZmZzZXQmJm51bGwhPUkmJih5PWU9PkkuYXBwbHlUb01icyhlKSxnPWU9PkkuYXBwbHlUb09iYihlKSk7Y29uc3QgUj1uZXcgbChiLGUub3B0aW9ucy5ub3JtYWxSZXF1aXJlZCksdz0obixsKT0+e2lmKDA9PT1uLmNoaWxkcmVuTG9hZGVkKXJldHVybiExO2NvbnN0IG89bi5zZXJ2aWNlT2JiSW5SZW5kZXJTUj8uaXNWYWxpZD9uLnNlcnZpY2VPYmJJblJlbmRlclNSOm51bGw7cmV0dXJuIShvJiYhZyhvKS5pbnRlcnNlY3RSYXkoYyxoLHApKSYmKCFsfHwhbyYmdChuLnNlcnZpY2VNYnNJblJlbmRlclNSKSYmIWEoeShuLnNlcnZpY2VNYnNJblJlbmRlclNSKSxjLGgscCl8fG51bGwhPW4uZ2VvbWV0cnlPYmJJblJlbmRlclNSJiYhZyhuLmdlb21ldHJ5T2JiSW5SZW5kZXJTUikuaW50ZXJzZWN0UmF5KGMsaCxwKXx8dGhpcy5fY29sbGVjdGlvbi5pbnRlcnNlY3QobCxjLGQscCxJLFIsKCh0LGwsbyxhKT0+e2lmKGw8MHx8bnVsbCE9cyYmIXMoYyxkLGwpKXJldHVybjtjb25zdCB1PWU9Pntjb25zdCByPW5ldyBpKHRoaXMubGF5ZXJWaWV3VWlkLHRoaXMuc3VibGF5ZXJJZCxuLmluZGV4LHQsYSk7ZS5zZXQodGhpcy50eXBlLHIsbCxvKX07aWYodGhpcy5pc0dyb3VuZCYmKG51bGw9PWYuZ3JvdW5kLmRpc3RhbmNlfHxsPGYuZ3JvdW5kLmRpc3RhbmNlKSYmdShmLmdyb3VuZCksIWUub3B0aW9ucy5pc0ZpbHRlcmVkJiYoKG51bGw9PWYubWluLmRpc3RhbmNlfHxsPGYubWluLmRpc3RhbmNlKSYmdShmLm1pbiksKG51bGw9PWYubWF4LmRpc3RhbmNlfHxsPmYubWF4LmRpc3RhbmNlKSYmdShmLm1heCksbSkpe2NvbnN0IHQ9bmV3IHIoZS5yYXkpO3UodCksZS5yZXN1bHRzLmFsbC5wdXNoKHQpfX0pKSwhMCl9O3RoaXMuX3RyYXZlcnNlTm9kZUhpZXJhcmNoeSh3KX19ZnVuY3Rpb24gYShlLHQsaSxuPTApe2NvbnN0IHI9ZVszXStuLHM9dFswXS1lWzBdLGw9dFsxXS1lWzFdLG89dFsyXS1lWzJdLGM9aVswXSxhPWlbMV0sZD1pWzJdLHU9YypzK2EqbCtkKm87cmV0dXJuIHUqdS0oYypjK2EqYStkKmQpKihzKnMrbCpsK28qby1yKnIpPj0wfWV4cG9ydHtjIGFzIEkzU0ludGVyc2VjdGlvbkhhbmRsZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtCeXRlU2l6ZVVuaXQgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0J5dGVTaXplVW5pdC5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7b25BYm9ydCBhcyBzLHRocm93SWZBYm9ydGVkIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtjb25zdCBvPTE0O2NsYXNzIGl7Y29uc3RydWN0b3IodCxzLHI9byl7dGhpcy5fdmVyc2lvbj1yLHRoaXMuX2RiPW51bGwsdGhpcy5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlPW51bGwsdGhpcy5fZ2NDb3VudGVyPTAsdGhpcy5faGl0PTAsdGhpcy5fbWlzcz0wLHRoaXMuX2Rlc3Ryb3llZD0hMSx0aGlzLmdjRnJlcXVlbmN5PTUwLHRoaXMubWF4Qnl0ZVNpemU9ZS5HSUdBQllURVMsdGhpcy5xdW90YVJlZHVjdGlvbkZhY3Rvcj0uMix0aGlzLl9kYk5hbWU9dCx0aGlzLl9zdG9yZU5hbWU9c31pbml0KCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCgpPT57Y29uc3QgZT1pbmRleGVkREIub3Blbih0aGlzLl9kYk5hbWUsdGhpcy5fdmVyc2lvbik7cmV0dXJuIGUub251cGdyYWRlbmVlZGVkPXQ9Pntjb25zdCBzPWUucmVzdWx0LHI9ZS50cmFuc2FjdGlvbixvPXMub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0aGlzLl9zdG9yZU5hbWUpP3Iub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKTpzLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMuX3N0b3JlTmFtZSksaT1zLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJsYXN0X2FjY2Vzc1wiKT9yLm9iamVjdFN0b3JlKFwibGFzdF9hY2Nlc3NcIik6cy5jcmVhdGVPYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpO2kuaW5kZXhOYW1lcy5jb250YWlucyhcImRhdGVcIil8fGkuY3JlYXRlSW5kZXgoXCJkYXRlXCIsXCJkYXRlXCIse3VuaXF1ZTohMX0pLGkuaW5kZXhOYW1lcy5jb250YWlucyhcImJ5dGVTaXplXCIpfHxpLmNyZWF0ZUluZGV4KFwiYnl0ZVNpemVcIixcImJ5dGVTaXplXCIse3VuaXF1ZTohMX0pLHQub2xkVmVyc2lvbjx0aGlzLl92ZXJzaW9uJiYoby5jbGVhcigpLGkuY2xlYXIoKSl9LGMoZSl9KSkudGhlbigoZT0+e3RoaXMuX2Rlc3Ryb3llZD9lLmNsb3NlKCk6dGhpcy5fZGI9ZX0pKX1kZXN0cm95KCl7dGhpcy5fZGImJih0aGlzLl9kYi5jbG9zZSgpLHRoaXMuX2RiPW51bGwpLHRoaXMuX2Rlc3Ryb3llZD0hMH1nZXQgaW5pdGlhbGl6ZWQoKXtyZXR1cm4gbnVsbCE9dGhpcy5fZGJ9Z2V0SGl0UmF0ZSgpe3JldHVybiB0aGlzLl9oaXQvKHRoaXMuX2hpdCt0aGlzLl9taXNzKX1wdXQoZSxzKXtpZihudWxsPT10aGlzLl9kYilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoXCJpbmRleGVkYjpub3QtaW5pdGlhbGl6ZWRcIixcIkluZGV4ZWREQiBDYWNoZSBpcyBub3QgaW5pdGlhbGl6ZWRcIikpO3JldHVybihudWxsIT10aGlzLl9xdW90YVJlZHVjdGlvblByb21pc2U/dGhpcy5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlOlByb21pc2UucmVzb2x2ZSgpKS50aGVuKCgoKT0+dGhpcy5fcHV0KGUscykpKS5jYXRjaCgodD0+e2lmKHQmJlwiUXVvdGFFeGNlZWRlZEVycm9yXCI9PT10Lm5hbWUpcmV0dXJuIG51bGw9PXRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZSYmKHRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZT10aGlzLl9nZXRDYWNoZVNpemUoKS50aGVuKChlPT50aGlzLl9yZW1vdmVMZWFzdFJlY2VudGx5QWNjZXNzZWQocy5ieXRlU2l6ZStNYXRoLmNlaWwoZSp0aGlzLnF1b3RhUmVkdWN0aW9uRmFjdG9yKSkpKSx0aGlzLl9xdW90YVJlZHVjdGlvblByb21pc2UudGhlbigoKCk9PnRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZT1udWxsKSwoKCk9PnRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZT1udWxsKSkpLHRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZS50aGVuKCgoKT0+dGhpcy5fcHV0KGUscykpKTt0aHJvdyB0fSkpLnRoZW4oKCgpPT57dGhpcy5fZ2NDb3VudGVyLS0sdGhpcy5fZ2NDb3VudGVyPDAmJm51bGwhPXRoaXMuX2RiJiYodGhpcy5fZ2NDb3VudGVyPXRoaXMuZ2NGcmVxdWVuY3ksdGhpcy5fZ2V0Q2FjaGVTaXplKCkudGhlbigoZT0+dGhpcy5fcmVtb3ZlTGVhc3RSZWNlbnRseUFjY2Vzc2VkKGUtdGhpcy5tYXhCeXRlU2l6ZSkpKSl9KSl9Z2V0KGUsdCl7Y29uc3Qgbz10aGlzLl9kYjtpZihudWxsPT1vKXJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTtsZXQgaT1udWxsO3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgoKT0+e2NvbnN0IHI9by50cmFuc2FjdGlvbih0aGlzLl9zdG9yZU5hbWUsXCJyZWFkb25seVwiKTtpPXModCwoKCk9PntyLmFib3J0KCl9KSk7cmV0dXJuIGMoci5vYmplY3RTdG9yZSh0aGlzLl9zdG9yZU5hbWUpLmdldChlKSl9KSkudGhlbigodD0+e2lmKG51bGw9PXQpKyt0aGlzLl9taXNzO2Vsc2UgaWYodGhpcy5fZGIpeysrdGhpcy5faGl0O3RoaXMuX2RiLnRyYW5zYWN0aW9uKFwibGFzdF9hY2Nlc3NcIixcInJlYWR3cml0ZVwiKS5vYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpLnB1dCh7ZGF0ZTpEYXRlLm5vdygpLGJ5dGVTaXplOnQuYnl0ZVNpemV9LGUpfXJldHVybiBudWxsIT1pJiZpLnJlbW92ZSgpLHR9KSkuY2F0Y2goKCgpPT57Kyt0aGlzLl9taXNzLHIodCksbnVsbCE9aSYmaS5yZW1vdmUoKX0pKX1yZW1vdmUoZSl7Y29uc3QgdD10aGlzLl9kYjtyZXR1cm4gbnVsbD09dD9Qcm9taXNlLnJlc29sdmUoKTpQcm9taXNlLnJlc29sdmUoKS50aGVuKChhc3luYygpPT57Y29uc3Qgcz10LnRyYW5zYWN0aW9uKFt0aGlzLl9zdG9yZU5hbWUsXCJsYXN0X2FjY2Vzc1wiXSxcInJlYWR3cml0ZVwiKSxyPXMub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKSxvPXMub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKSxpPXIuZGVsZXRlKGUpLGE9by5kZWxldGUoZSk7YXdhaXQgUHJvbWlzZS5hbGwoW2MoaSksYyhhKSxuKHMpXSl9KSl9X3B1dChlLHQpe2NvbnN0IHM9dGhpcy5fZGI7aWYobnVsbD09cylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3Qgcj1zLnRyYW5zYWN0aW9uKFt0aGlzLl9zdG9yZU5hbWUsXCJsYXN0X2FjY2Vzc1wiXSxcInJlYWR3cml0ZVwiKSxvPXIub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKSxpPXIub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKSxhPW8ucHV0KHQsZSksbD1pLnB1dCh7ZGF0ZTpEYXRlLm5vdygpLGJ5dGVTaXplOnQuYnl0ZVNpemV9LGUpO3JldHVybiBQcm9taXNlLmFsbChbYyhhKSxjKGwpLG4ocildKX1fcmVtb3ZlTGVhc3RSZWNlbnRseUFjY2Vzc2VkKGUpe2lmKGU8PTB8fCF0aGlzLl9kYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3QgdD10aGlzLl9kYi50cmFuc2FjdGlvbihbdGhpcy5fc3RvcmVOYW1lLFwibGFzdF9hY2Nlc3NcIl0sXCJyZWFkd3JpdGVcIikscz10Lm9iamVjdFN0b3JlKHRoaXMuX3N0b3JlTmFtZSkscj10Lm9iamVjdFN0b3JlKFwibGFzdF9hY2Nlc3NcIik7bGV0IG89MDtjb25zdCBpPXIuaW5kZXgoXCJkYXRlXCIpLm9wZW5DdXJzb3IobnVsbCxcIm5leHRcIik7cmV0dXJuIGkub25zdWNjZXNzPSgpPT57Y29uc3QgdD1pLnJlc3VsdDtudWxsIT10JiYobnVsbCE9dC52YWx1ZS5ieXRlU2l6ZSYmKG8rPXQudmFsdWUuYnl0ZVNpemUpLHMuZGVsZXRlKHQucHJpbWFyeUtleSksci5kZWxldGUodC5wcmltYXJ5S2V5KSxvPGUmJnQuY29udGludWUoKSl9LG4odCl9X2dldENhY2hlU2l6ZSgpe2NvbnN0IGU9dGhpcy5fZGI7aWYobnVsbD09ZSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDApO2NvbnN0IHQ9ZS50cmFuc2FjdGlvbihcImxhc3RfYWNjZXNzXCIpLHM9dC5vYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpO2xldCByPTA7Y29uc3Qgbz1zLmluZGV4KFwiYnl0ZVNpemVcIikub3BlbktleUN1cnNvcigpO3JldHVybiBvLm9uc3VjY2Vzcz0oKT0+e2NvbnN0IGU9by5yZXN1bHQ7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9ZS5rZXk7bnVsbCE9dCYmKHIrPXQpLGUuY29udGludWUoKX0sbih0KS50aGVuKCgoKT0+cikpfX1mdW5jdGlvbiBuKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQscyk9PntlLm9uY29tcGxldGU9KCk9PnQoKSxlLm9uZXJyb3I9KCk9PnMoZS5lcnJvciksZS5vbmFib3J0PSgpPT5zKGUuZXJyb3IpfSkpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxzKT0+e1wiZG9uZVwiPT09ZS5yZWFkeVN0YXRlP251bGwhPWUuZXJyb3I/cyhlLmVycm9yKTp0KGUucmVzdWx0KTooZS5vbnN1Y2Nlc3M9KCk9PnQoZS5yZXN1bHQpLGUub25lcnJvcj0oKT0+cyhlLmVycm9yKSl9KSl9ZXhwb3J0e2kgYXMgSURCQ2FjaGUsYyBhcyB3aGVuUmVxdWVzdCxuIGFzIHdoZW5UcmFuc2FjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdD1uZXcgV2Vha01hcDtjbGFzcyBze2NvbnN0cnVjdG9yKHMsZSl7c3dpdGNoKHRoaXMuX21pc3M9MCx0aGlzLl9oaXQ9MCx0aGlzLmluaXRpYWxpemVkPSEwLGUpe2Nhc2VcImxheWVyXCI6dGhpcy5fZGF0YT1uZXcgTWFwO2JyZWFrO2Nhc2VcInZpZXdcIjp7Y29uc3QgZT10LmdldChzKTtpZihlKXt0aGlzLl9kYXRhPWU7YnJlYWt9Y29uc3QgaT1uZXcgTWFwO3RoaXMuX2RhdGE9aSx0LnNldChzLGkpfX19aW5pdCgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1hc3luYyBnZXQodCxzKXtpZih0aGlzLl9kYXRhLmhhcyh0KSlyZXR1cm4gdGhpcy5faGl0KyssdGhpcy5fZGF0YS5nZXQodCk/P3ZvaWQgMDt0aGlzLl9taXNzKyt9ZGVzdHJveSgpe31wdXQodCxzKXtyZXR1cm4gdGhpcy5fZGF0YS5zZXQodCxzKSxQcm9taXNlLnJlc29sdmUoKX1yZW1vdmUodCl7cmV0dXJuIHRoaXMuX2RhdGEuZGVsZXRlKHQpLFByb21pc2UucmVzb2x2ZSgpfWdldEhpdFJhdGUoKXtyZXR1cm4gdGhpcy5faGl0Lyh0aGlzLl9oaXQrdGhpcy5fbWlzcyl9fWV4cG9ydHtzIGFzIElEQk1vY2tDYWNoZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbGlicy9nbC1tYXRyaXgtMi9mYWN0b3JpZXMvdmVjNGY2NC5qc1wiO2ltcG9ydHtDb2xvck1peE1vZGVFbnVtIGFzIHN9ZnJvbVwiLi4vc3VwcG9ydC9zeW1ib2xDb2xvclV0aWxzLmpzXCI7Y2xhc3MgdHtjb25zdHJ1Y3Rvcigpe3RoaXMuY29sb3I9bygpLHRoaXMuY2FzdFNoYWRvd3M9ITAsdGhpcy5waWNrYWJsZT0hMCx0aGlzLmNvbG9yTWl4TW9kZT1zLk11bHRpcGx5fX1leHBvcnR7dCBhcyBTeW1ib2xvZ3lJbmZvfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBuKG4sdCxlKXtpZighZXx8bnVsbD09dClyZXR1cm4gbnVsbDtpZighbilyZXR1cm4gcih0LGUpO2NvbnN0IG89bi5nZXQoZSk7cmV0dXJuIG8/dFtvLm5hbWVdOm51bGx9ZnVuY3Rpb24gcihuLHIpe2NvbnN0IHQ9ci50b0xvd2VyQ2FzZSgpO2Zvcihjb25zdCBlIGluIG4paWYoZS50b0xvd2VyQ2FzZSgpPT09dClyZXR1cm4gbltlXTtyZXR1cm4gbnVsbH1leHBvcnR7biBhcyBhdHRyaWJ1dGVMb29rdXB9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzMvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2NvcmUvRXZlbnRlZC5qc1wiO2ltcG9ydHtmaW5kSW5NYXAgYXMgdCxzb21lTWFwIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9NYXBVdGlscy5qc1wiO2NsYXNzIHMgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9tYXA9bmV3IE1hcH1jbGVhcigpe2lmKHRoaXMuX21hcC5zaXplPjApe2NvbnN0IGU9dGhpcy50b0FycmF5KCk7dGhpcy5fbWFwLmNsZWFyKCksdGhpcy5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOltdLHJlbW92ZWQ6ZX0pfX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX21hcC5zaXplfWdldChlKXtyZXR1cm4gdGhpcy5fbWFwLmdldChlKX1hZGRNYW55KGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm47Y29uc3QgdD1uZXcgU2V0O2ZvcihsZXQgcz0wO3M8ZS5sZW5ndGg7cysrKXtjb25zdCByPWVbc10sbz1yLm9iamVjdElkLG49dGhpcy5fbWFwLmdldChvKTtuPyh0LmFkZChvKSxyIT09biYmKGVbc109biksbi5yZWZDb3VudHx8KG4ucmVmQ291bnQ9MCksKytuLnJlZkNvdW50KTooci5yZWZDb3VudD0xLHRoaXMuX21hcC5zZXQobyxyKSl9Y29uc3Qgcj10LnNpemU+MD9lLmZpbHRlcigoZT0+IXQuaGFzKGUub2JqZWN0SWQpKSk6ZTtyLmxlbmd0aD4wJiZ0aGlzLmVtaXQoXCJjaGFuZ2VcIix7YWRkZWQ6cixyZW1vdmVkOltdfSl9cmVtb3ZlTWFueShlKXtjb25zdCB0PVtdO2Zvcihjb25zdCByIG9mIGUpe2NvbnN0IGU9ci5vYmplY3RJZCxzPXRoaXMuX21hcC5nZXQoZSk7bnVsbCE9cyYmKCFzLnJlZkNvdW50fHwtLXMucmVmQ291bnQ8PTApJiYodGhpcy5fbWFwLmRlbGV0ZShlKSx0LnB1c2gocikpfXQubGVuZ3RoPjAmJnRoaXMuZW1pdChcImNoYW5nZVwiLHthZGRlZDpbXSxyZW1vdmVkOnR9KX1yZW1vdmVNYW55QnlPYmplY3RJZChlKXtjb25zdCB0PVtdO2Zvcihjb25zdCByIG9mIGUpe2NvbnN0IGU9dGhpcy5fbWFwLmdldChyKTtudWxsIT1lJiYoIWUucmVmQ291bnR8fC0tZS5yZWZDb3VudDw9MCkmJih0aGlzLl9tYXAuZGVsZXRlKHIpLHQucHVzaChlKSl9dC5sZW5ndGg+MCYmdGhpcy5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOltdLHJlbW92ZWQ6dH0pfXRvQXJyYXkoKXtyZXR1cm5bLi4udGhpcy5fbWFwLnZhbHVlcygpXX1maW5kKGUpe3JldHVybiB0KHRoaXMuX21hcCxlKX1zb21lKGUpe3JldHVybiByKHRoaXMuX21hcCxlKX1mb3JFYWNoKGUpe3RoaXMuX21hcC5mb3JFYWNoKCh0PT5lKHQpKSl9fWV4cG9ydHtzIGFzIEdyYXBoaWNzTWFwfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi9jb3JlL0V2ZW50ZWQuanNcIjtpbXBvcnR7ZmluZEluTWFwIGFzIHQsc29tZU1hcCBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7R3JhcGhpY3NNYXAgYXMgaX1mcm9tXCIuL0dyYXBoaWNzTWFwLmpzXCI7Y2xhc3MgbiBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9saW1pdD1lLHRoaXMuX2FsbD1uZXcgaSx0aGlzLl9hY3RpdmU9bmV3IHIodGhpcyksdGhpcy5fcGVuZGluZz1uZXcgTWFwLHRoaXMuX2hhbmRsZT10aGlzLl9hbGwub24oXCJjaGFuZ2VcIiwoZT0+dGhpcy5faGFuZGxlQ2hhbmdlcyhlKSkpfWRlc3Ryb3koKXt0aGlzLl9oYW5kbGUucmVtb3ZlKCl9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9hY3RpdmUubGVuZ3RofXRvQXJyYXkoKXtyZXR1cm4gdGhpcy5fYWN0aXZlLnRvQXJyYXkoKX1maW5kKGUpe3JldHVybiB0aGlzLl9hY3RpdmUuZmluZChlKX1zb21lKGUpe3JldHVybiB0aGlzLl9hY3RpdmUuc29tZShlKX1mb3JFYWNoKGUpe3RoaXMuX2FjdGl2ZS5mb3JFYWNoKGUpfWFkZE1hbnkoZSl7dGhpcy5fYWxsLmFkZE1hbnkoZSl9cmVtb3ZlTWFueUJ5T2JqZWN0SWQoZSl7dGhpcy5fYWxsLnJlbW92ZU1hbnlCeU9iamVjdElkKGUpfV9oYW5kbGVDaGFuZ2VzKGUpe2xldCB0PWUucmVtb3ZlZDtpZih0aGlzLl9wZW5kaW5nLnNpemU+MCl7dD1uZXcgQXJyYXk7Zm9yKGNvbnN0IHMgb2YgZS5yZW1vdmVkKXRoaXMuX3BlbmRpbmcuZGVsZXRlKHMub2JqZWN0SWQpfHx0LnB1c2gocyl9bGV0IHM9dGhpcy5fbGltaXQtdGhpcy5fYWN0aXZlLmxlbmd0aCt0Lmxlbmd0aDtzPGUuYWRkZWQubGVuZ3RoJiYodGhpcy5fYWN0aXZlLnJlbW92ZU1hbnkodCksdD1bXSxhLnJlc2V0KDEtdGhpcy5fbGltaXQvKHRoaXMuX2FjdGl2ZS5sZW5ndGgrZS5hZGRlZC5sZW5ndGgpKSx0aGlzLl9hY3RpdmUuZm9yRWFjaCgoZT0+e2Euc2FtcGxlKCkmJih0LnB1c2goZSksdGhpcy5fcGVuZGluZy5zZXQoZS5vYmplY3RJZCxlKSl9KSkscz10aGlzLl9saW1pdC10aGlzLl9hY3RpdmUubGVuZ3RoK3QubGVuZ3RoKTtsZXQgaT1lLmFkZGVkO2lmKHM8ZS5hZGRlZC5sZW5ndGgpe2k9bmV3IEFycmF5LGEucmVzZXQocy9lLmFkZGVkLmxlbmd0aCk7Zm9yKGNvbnN0IHQgb2YgZS5hZGRlZClhLnNhbXBsZSgpP2kucHVzaCh0KTp0aGlzLl9wZW5kaW5nLnNldCh0Lm9iamVjdElkLHQpfWNvbnN0IG49cy1pLmxlbmd0aDtuPjAmJnRoaXMuX3BlbmRpbmcuc2l6ZT4wJiYoYS5yZXNldChuL3RoaXMuX3BlbmRpbmcuc2l6ZSksdGhpcy5fcGVuZGluZy5mb3JFYWNoKChlPT57YS5zYW1wbGUoKSYmKGkucHVzaChlKSx0aGlzLl9wZW5kaW5nLmRlbGV0ZShlLm9iamVjdElkKSl9KSkpLHRoaXMuX2FjdGl2ZS5hZGRBbmRSZW1vdmUoaSx0KX19Y2xhc3MgaHtjb25zdHJ1Y3Rvcigpe3RoaXMuX3BlcmNlbnRhZ2U9MSx0aGlzLl9sYXN0PS0xLHRoaXMuX2luZGV4PTB9cmVzZXQoZSl7dGhpcy5fcGVyY2VudGFnZT1lLHRoaXMuX2xhc3Q9LTF9c2FtcGxlKCl7Y29uc3QgZT1NYXRoLmZsb29yKHRoaXMuX2luZGV4KnRoaXMuX3BlcmNlbnRhZ2UpO3JldHVybisrdGhpcy5faW5kZXgsZSE9PXRoaXMuX2xhc3QmJih0aGlzLl9sYXN0PWUsITApfX1jb25zdCBhPW5ldyBoO2NsYXNzIHJ7Y29uc3RydWN0b3IoZSl7dGhpcy5fcGFyZW50PWUsdGhpcy5fbWFwPW5ldyBNYXB9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9tYXAuc2l6ZX1mb3JFYWNoKGUpe3RoaXMuX21hcC5mb3JFYWNoKCh0PT5lKHQpKSl9ZmluZChlKXtyZXR1cm4gdCh0aGlzLl9tYXAsZSl9c29tZShlKXtyZXR1cm4gcyh0aGlzLl9tYXAsZSl9dG9BcnJheSgpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuX21hcC52YWx1ZXMoKSl9YWRkQW5kUmVtb3ZlKGUsdCl7Zm9yKGNvbnN0IHMgb2YgZSl0aGlzLl9tYXAuc2V0KHMub2JqZWN0SWQscyk7Zm9yKGNvbnN0IHMgb2YgdCl0aGlzLl9tYXAuZGVsZXRlKHMub2JqZWN0SWQpOyhlLmxlbmd0aD4wfHx0Lmxlbmd0aD4wKSYmdGhpcy5fcGFyZW50LmVtaXQoXCJjaGFuZ2VcIix7YWRkZWQ6ZSxyZW1vdmVkOnR9KX1yZW1vdmVNYW55KGUpe2Zvcihjb25zdCB0IG9mIGUpdGhpcy5fbWFwLmRlbGV0ZSh0Lm9iamVjdElkKTtlLmxlbmd0aD4wJiZ0aGlzLl9wYXJlbnQuZW1pdChcImNoYW5nZVwiLHthZGRlZDpbXSxyZW1vdmVkOmV9KX19ZXhwb3J0e24gYXMgTGltaXRHcmFwaGljc01hcH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=