export const __webpack_id__ = "vendors-node_modules_arcgis_core_layers_save_featureLayerUtils_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_layers_save_featureLayerUtils_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/layers/save/featureLayerUtils.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/featureLayerUtils.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   save: () => (/* binding */ ce),
/* harmony export */   saveAll: () => (/* binding */ ue),
/* harmony export */   saveAllAs: () => (/* binding */ pe),
/* harmony export */   saveAs: () => (/* binding */ ye)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/save/utils.js");
/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _support_fetchService_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/fetchService.js */ "./node_modules/@arcgis/core/layers/support/fetchService.js");
/* harmony import */ var _support_layerUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g="Feature Service",E="feature-layer-utils",P=`${E}-save`,O=`${E}-save-as`,A=`${E}-saveall`,x=`${E}-saveall-as`;function N(e){return{isValid:(0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_7__.isLayerWithFeatureLayerSource)(e)&&(!("dynamicDataSource"in e)||!e.dynamicDataSource),errorMessage:"Feature layer should be a layer or table in a map or feature service"}}function $(e,r){const a=(0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_8__.createForItemWrite)(e,"portal-item");return r?.isTable&&(a.layerContainerType="tables"),a}function j(e){const r=$(e),a=$(e);return a.layerContainerType="tables",{forLayers:r,forTables:a}}function U(e){const r=[],a=[];for(const{layer:t,layerJSON:n}of e)R(t)?a.push(n):r.push(n);return{layers:r,tables:a}}function R(e,r){return e.isTable}function C(e){return U([e])}async function J(e,r){return/\/\d+\/?$/.test(e.url)?C(r[0]):G(r,e)}async function G(e,r){if(e.reverse(),!r)return U(e);const a=await _(r,e);for(const t of e)V(t.layer,t.layerJSON,a);return M(a,e),a}async function _(e,r){let a=await e.fetchData("json");if(D(a)&&!(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.hasTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.HOSTED_SERVICE))return a;a||={},F(a);const{layer:{url:t,customParameters:n,apiKey:s}}=r[0];return await B(a,{url:t??"",customParameters:n,apiKey:s},r.map((e=>e.layer.layerId))),a}function D(e){return!!(e&&Array.isArray(e.layers)&&Array.isArray(e.tables))}function F(e){e.layers||=[],e.tables||=[]}function M(e,r){const a=[],t=[];for(const{layer:n}of r){const{isTable:e,layerId:r}=n;e?t.push(r):a.push(r)}Y(e.layers,a),Y(e.tables,t)}function Y(r,a){if(r.length<2)return;const t=[];for(const{id:e}of r)t.push(e);(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.equals)(t.sort(k),a.slice().sort(k))&&r.sort(((e,r)=>{const t=a.indexOf(e.id),n=a.indexOf(r.id);return t<n?-1:t>n?1:0}))}function k(e,r){return e<r?-1:e>r?1:0}async function B(e,r,a){const{url:t,customParameters:n,apiKey:s}=r,{serviceJSON:o,layersJSON:l}=await (0,_support_fetchService_js__WEBPACK_IMPORTED_MODULE_6__.fetchFeatureService)(t,{customParameters:n,apiKey:s}),i=K(e.layers,o.layers,a),c=K(e.tables,o.tables,a);e.layers=i.itemResources,e.tables=c.itemResources;const u=[...i.added,...c.added],y=l?[...l.layers,...l.tables]:[];await z(e,u,t,y)}function K(e,a,t){const n=(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.difference)(e,a,((e,r)=>e.id===r.id));e=e.filter((e=>!n.removed.some((r=>r.id===e.id))));const s=n.added;return s.forEach((({id:r})=>{e.push({id:r})})),{itemResources:e,added:s.filter((({id:e})=>!t.includes(e)))}}async function z(e,r,a,t){const n=await H(r),s=r.map((({id:e,type:r})=>new(n.get(r))({url:a,layerId:e,sourceJSON:t.find((({id:r})=>r===e))})));await Promise.allSettled(s.map((e=>e.load()))),s.forEach((r=>{const{layerId:a,loaded:t,defaultPopupTemplate:n}=r;if(!t||null==n)return;const s={id:a,popupInfo:n.toJSON()};V(r,"ArcGISFeatureLayer"===r.operationalLayerType?s:{...s,layerType:r.operationalLayerType},e)}))}async function H(e){const r=[];e.forEach((({type:e})=>{switch((0,_support_fetchService_js__WEBPACK_IMPORTED_MODULE_6__.getLayerModuleType)(e)){case"CatalogLayer":r.push(Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_layers_graphics_editingSupport_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_graphics_sources_FeatureLayerSource_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_layers_CatalogLayer_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../CatalogLayer.js */ "./node_modules/@arcgis/core/layers/CatalogLayer.js")).then((e=>e.default)));break;case"FeatureLayer":r.push(Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../FeatureLayer.js */ "./node_modules/@arcgis/core/layers/FeatureLayer.js")).then((e=>e.default)));break;case"OrientedImageryLayer":r.push(__webpack_require__.e(/*! import() */ "vendors-node_modules_arcgis_core_layers_OrientedImageryLayer_js").then(__webpack_require__.bind(__webpack_require__, /*! ../OrientedImageryLayer.js */ "./node_modules/@arcgis/core/layers/OrientedImageryLayer.js")).then((e=>e.default)))}}));const a=await Promise.all(r),t=new Map;return e.forEach((({type:e},r)=>{t.set(e,a[r])})),t}function V(e,r,a){e.isTable?q(a.tables,r):q(a.layers,r)}function q(e,r){const a=e.findIndex((({id:e})=>e===r.id));-1===a?e.push(r):e[a]=r}function Q(e,r){if(!e.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:missing-parameters`,"'layers' array should contain at least one feature layer")}function W(e,r){const a=e.map((e=>e.portalItem.id));if(new Set(a).size>1)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:invalid-parameters`,"All layers in the 'layers' array should be loaded from the same portal item")}function X(e,r){const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:invalid-parameters`,"'layers' array should contain only one instance each of layer or table in a feature service")}async function Z(e){Q(e,A),await Promise.all(e.map((e=>e.load())));for(const r of e)(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.ensureLayerConfig)(r,A,N),(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.ensureItemConfig)({layer:r,itemType:g,errorNamePrefix:A});W(e,A),X(e,A)}function ee(e){if(!("layerType"in e))return!!e.charts?.length;switch(e.layerType){case"OrientedImageryLayer":return!!e.charts?.length;case"SubtypeGroupLayer":return!!e.layers.some((e=>!!e.charts?.length));case"SubtypeGroupTable":return!!e.tables.some((e=>!!e.charts?.length));case"CatalogLayer":return!!e.footprintLayer?.charts?.length}}function re(e,r){let a=0,t=0,n=0,s=0;for(const o of[...r.layers,...r.tables])if(ee(o)&&s++,"layerType"in o)switch(o.layerType){case"OrientedImageryLayer":a++;break;case"SubtypeGroupLayer":t++;break;case"SubtypeGroupTable":n++}(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.ORIENTED_IMAGERY_LAYER,a>0),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.SUBTYPE_GROUP_LAYER,t>0),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.SUBTYPE_GROUP_TABLE,n>0),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.CHARTS,s>0)}function ae(e,r,a){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.removeTypeKeyword)(r,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.METADATA),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(r,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.MULTI_LAYER,e.length>1),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(r,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.SINGLE_LAYER,1===e.length),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.toggleTypeKeyword)(r,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.typeKeyword.TABLE,a.tables.length>0&&0===a.layers.length),re(r,a)}async function te(e,r,a){re(r,a)}async function ne(e,r,a){const{url:t,layerId:n,title:s,fullExtent:o,isTable:l}=e,i=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__.parse)(t);r.url=("FeatureServer"===i?.serverType?t:`${t}/${n}`)??null,r.title||=s,r.extent=null,l||null==o||(r.extent=await (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.getWGS84ExtentForItem)(o)),ae([e],r,a)}function se(e,r){for(const o of e){const a=o.parsedUrl.path,n=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__.parse)(a),s=n?.url.path;if(!s)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:invalid-parameters`,(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.createErrorMessage)(o,`has unsupported url pattern: ${a}`),{layer:o});const l=n?.serverType;if("FeatureServer"!==l&&"MapServer"!==l)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:invalid-parameters`,(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.createErrorMessage)(o,`has unsupported server type: ${l}`),{layer:o});if("MapServer"===l&&e.length>1)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:invalid-parameters`,"Only one layer or table in a map service can be saved")}const a=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__.parse)(e[0].parsedUrl.path),n=a?.url.path,s=e.every((e=>{const r=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__.parse)(e.parsedUrl.path);return r?.url.path===n}));if(!s)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`${r}:invalid-parameters`,"'layers' array should only contain layers or tables that belong to the same feature service")}async function oe(e){Q(e,x),await Promise.all(e.map((e=>e.load())));for(const r of e)(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.ensureLayerConfig)(r,x,N);se(e,x),X(e,x)}function le(e,r){re(e,r),(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.setCommonItemProperties)(e)}async function ie(e,r,t){let n=0;for(const{isTable:a}of e)a||n++;const s=e[0].parsedUrl.path,o=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__.parse)(s);if(r.url="FeatureServer"===o?.serverType?o.url.path:s,r.title||=o.title,r.extent=null,n>0){const t=e.map((e=>e.fullExtent)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome).reduce(((e,r)=>e.clone().union(r)));t&&(r.extent=await (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.getWGS84ExtentForItem)(t))}ae(e,r,t),(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.setCommonItemProperties)(r)}async function ce(e,r){return (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.save)({layer:e,itemType:g,validateLayer:N,createJSONContext:r=>$(r,e),createItemData:(e,r)=>J(r,[e]),errorNamePrefix:P,setItemProperties:te},r)}async function ue(e,r){await Z(e);const a=e[0].portalItem,t=j(a),s=await Promise.all(e.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.getLayerJSON)(e,e.isTable?t.forTables:t.forLayers,r)))),o=await J(a,e.map(((e,r)=>({layer:e,layerJSON:s[r]}))));return le(a,o),await a.update({data:o}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_3__.updateOrigins)(t.forLayers),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_3__.updateOrigins)(t.forTables),a.clone()}async function ye(e,r,a){return (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.saveAs)({layer:e,itemType:g,validateLayer:N,createJSONContext:r=>$(r,e),createItemData:(e,r)=>Promise.resolve(C(e)),errorNamePrefix:O,newItem:r,setItemProperties:ne},a)}async function pe(e,r,a){await oe(e);const t=(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.getPortalItem)({itemType:g,errorNamePrefix:x,newItem:r}),s=j(t),o=await Promise.all(e.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.getLayerJSON)(e,e.isTable?s.forTables:s.forLayers,a)))),u=await G(e.map(((e,r)=>({layer:e,layerJSON:o[r]}))));await ie(e,t,u),await (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.addItem)(t,u,a);for(const n of e)n.portalItem=t.clone();return (0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_3__.updateOrigins)(s.forLayers),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_3__.updateOrigins)(s.forTables),t}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/save/utils.js":
/*!********************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/save/utils.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addItem: () => (/* binding */ v),
/* harmony export */   createErrorMessage: () => (/* binding */ m),
/* harmony export */   ensureItemConfig: () => (/* binding */ f),
/* harmony export */   ensureLayerConfig: () => (/* binding */ p),
/* harmony export */   getLayerJSON: () => (/* binding */ w),
/* harmony export */   getPortalItem: () => (/* binding */ d),
/* harmony export */   save: () => (/* binding */ P),
/* harmony export */   saveAs: () => (/* binding */ $),
/* harmony export */   setCommonItemProperties: () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webdoc/support/saveUtils.js */ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(t,r,a){const o=a(t);if(!o.isValid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${r}:invalid-parameters`,o.errorMessage,{layer:t})}async function l(e){const{layer:t,errorNamePrefix:r,validateLayer:a}=e;await t.load(),p(t,r,a)}function m(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function c(t){const{item:r,errorNamePrefix:a,layer:o,validateItem:i}=t;if(u(t),i){const t=i(r);if(!t.isValid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:invalid-parameters`,t.errorMessage,{layer:o})}}function u(t){const{item:r,itemType:a,additionalItemType:o,errorNamePrefix:i,layer:n}=t,s=[a];if(o&&s.push(o),!s.includes(r.type)){const t=s.map((e=>`'${e}'`)).join(", ");throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${i}:portal-item-wrong-type`,`Portal item type should be one of: "${t}"`,{item:r,layer:n})}}function f(t){const{layer:r,errorNamePrefix:a}=t,{portalItem:o}=r;if(!o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:portal-item-not-set`,m(r,"requires the portalItem property to be set"));if(!o.loaded)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${a}:portal-item-not-loaded`,m(r,"cannot be saved to a portal item that does not exist or is inaccessible"));c({...t,item:o})}function d(e){const{newItem:t,itemType:o}=e;let i=_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_3__["default"].from(t);return i.id&&(i=i.clone(),i.id=null),i.type??=o,i.portal??=_portal_Portal_js__WEBPACK_IMPORTED_MODULE_2__["default"].getDefault(),c({...e,item:i}),i}function y(e){return (0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_4__.createForItemWrite)(e,"portal-item")}async function w(e,t,r){"beforeSave"in e&&"function"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return await Promise.all(t.resources?.pendingOperations??[]),(0,_webdoc_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_6__.evaluateWriteErrors)(t,{errorName:"layer-write:unsupported"},r),a}function I(e){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__.addTypeKeyword)(e,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_5__.typeKeyword.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}async function v(e,t,r){const a=e.portal;await a.signIn(),await a.user.addItem({item:e,data:t,folder:r?.folder})}async function P(e,r){const{layer:a,createItemData:o,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await l(e),f(e);const m=a.portalItem,c=i?i(m):y(m),u=await w(a,c,{...r,supplementalUnsupportedErrors:p}),d=await o({layer:a,layerJSON:u},m);return await(n?.(a,m,d)),I(m),await m.update({data:d}),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__.updateOrigins)(c),await(s?.(m,c)),m}async function $(e,r){const{layer:a,createItemData:o,createJSONContext:i,setItemProperties:n,saveResources:s,supplementalUnsupportedErrors:p}=e;await l(e);const m=d(e),c=i?i(m):y(m),u=await w(a,c,{...r,supplementalUnsupportedErrors:p}),f=await o({layer:a,layerJSON:u},m);return await n(a,m,f),I(m),await v(m,f,r),a.portalItem=m,(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_1__.updateOrigins)(c),await(s?.(m,c)),m}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX3NhdmVfZmVhdHVyZUxheWVyVXRpbHNfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDMDFCLHVEQUF1RCxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLGFBQWEsY0FBYyxPQUFPLFFBQVEscUZBQUMsNklBQTZJLGdCQUFnQixRQUFRLGtGQUFDLGtCQUFrQixxREFBcUQsY0FBYyxvQkFBb0Isc0NBQXNDLHlCQUF5QixjQUFjLGdCQUFnQixVQUFVLG9CQUFvQiw4QkFBOEIsT0FBTyxtQkFBbUIsZ0JBQWdCLGlCQUFpQixjQUFjLGNBQWMsc0JBQXNCLDZDQUE2QyxzQkFBc0IsOEJBQThCLHFCQUFxQiwwQ0FBMEMsZ0JBQWdCLHNCQUFzQixnQ0FBZ0MsVUFBVSxrRkFBQyxHQUFHLDJFQUFDLDBCQUEwQixNQUFNLE1BQU0sTUFBTSxPQUFPLG1DQUFtQyxNQUFNLGtCQUFrQixzQ0FBc0MsZ0NBQWdDLGNBQWMsOERBQThELGNBQWMsNEJBQTRCLGdCQUFnQixnQkFBZ0IsVUFBVSxRQUFRLE1BQU0sTUFBTSxvQkFBb0IsR0FBRyxzQkFBc0IsNEJBQTRCLGdCQUFnQixxQkFBcUIsV0FBVyxVQUFVLEtBQUssZUFBZSwyREFBQywrQ0FBK0MsMENBQTBDLHNCQUFzQixHQUFHLGdCQUFnQixzQkFBc0Isd0JBQXdCLE1BQU0sa0NBQWtDLElBQUksMkJBQTJCLE9BQU8sNkVBQUMsSUFBSSw0QkFBNEIsb0RBQW9ELGtEQUFrRCxpRUFBaUUsaUJBQWlCLGtCQUFrQixRQUFRLCtEQUFDLDJCQUEyQixtREFBbUQsZ0JBQWdCLG9CQUFvQixLQUFLLElBQUksUUFBUSxLQUFLLEVBQUUsSUFBSSxrQ0FBa0MsS0FBSyxxQkFBcUIsMEJBQTBCLDhCQUE4QixZQUFZLGtCQUFrQixxQ0FBcUMsS0FBSyxXQUFXLElBQUksOERBQThELE1B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cUMsUUFBUSxHQUFHLGNBQWMsTUFBTSxpRUFBaUUsU0FBUyxxQ0FBcUMsc0JBQXNCLEVBQUUsZ0JBQWdCLFVBQVUsc0RBQUMsSUFBSSxFQUFFLGdFQUFnRSxFQUFFLElBQUksZUFBZSxHQUFHLGNBQWMsTUFBTSwwQkFBMEIsSUFBSSxhQUFhLEdBQUcsZ0JBQWdCLHNEQUFDLElBQUksRUFBRSx5RUFBeUUsdUJBQXVCLHNEQUFDLElBQUksRUFBRSx5R0FBeUcsR0FBRyxZQUFZLEVBQUUsY0FBYyxNQUFNLHFCQUFxQixHQUFHLE1BQU0sNkRBQUMsU0FBUywyREFBMkQseURBQUMsaUJBQWlCLFlBQVksSUFBSSxjQUFjLE9BQU8sa0ZBQUMsa0JBQWtCLHdCQUF3Qix3RUFBd0Usa0JBQWtCLElBQUksNkRBQTZELGlGQUFDLElBQUksb0NBQW9DLE1BQU0sY0FBYyxrRkFBQyxHQUFHLDJFQUFDLDRGQUE0Rix3QkFBd0IsaUJBQWlCLHVDQUF1QywrQkFBK0IsRUFBRSxzQkFBc0IsTUFBTSxpSEFBaUgsR0FBRyxnQkFBZ0Isa0RBQWtELHFDQUFxQyxhQUFhLG9CQUFvQixJQUFJLDhDQUE4QyxPQUFPLEVBQUUsbUZBQUMsc0JBQXNCLHNCQUFzQixNQUFNLGlIQUFpSCxHQUFHLFdBQVcsMENBQTBDLHFDQUFxQyxhQUFhLG9CQUFvQixJQUFJLHlEQUF5RCxtRkFBQyxzQkFBd00iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3NhdmUvZmVhdHVyZUxheWVyVXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zYXZlL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZXF1YWxzIGFzIGUsZGlmZmVyZW5jZSBhcyByLGlzU29tZSBhcyBhfWZyb21cIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3VwZGF0ZU9yaWdpbnMgYXMgbn1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9vcmlnaW5VdGlscy5qc1wiO2ltcG9ydHtzYXZlIGFzIHMsc2F2ZUFzIGFzIG8sZ2V0TGF5ZXJKU09OIGFzIGwsZ2V0UG9ydGFsSXRlbSBhcyBpLGFkZEl0ZW0gYXMgYyxlbnN1cmVMYXllckNvbmZpZyBhcyB1LGVuc3VyZUl0ZW1Db25maWcgYXMgeSxzZXRDb21tb25JdGVtUHJvcGVydGllcyBhcyBwLGNyZWF0ZUVycm9yTWVzc2FnZSBhcyBmfWZyb21cIi4vdXRpbHMuanNcIjtpbXBvcnR7cGFyc2UgYXMgbX1mcm9tXCIuLi9zdXBwb3J0L2FyY2dpc0xheWVyVXJsLmpzXCI7aW1wb3J0e2ZldGNoRmVhdHVyZVNlcnZpY2UgYXMgZCxnZXRMYXllck1vZHVsZVR5cGUgYXMgaH1mcm9tXCIuLi9zdXBwb3J0L2ZldGNoU2VydmljZS5qc1wiO2ltcG9ydHtpc0xheWVyV2l0aEZlYXR1cmVMYXllclNvdXJjZSBhcyBifWZyb21cIi4uL3N1cHBvcnQvbGF5ZXJVdGlscy5qc1wiO2ltcG9ydHtjcmVhdGVGb3JJdGVtV3JpdGUgYXMgd31mcm9tXCIuLi8uLi9wb3J0YWwvc3VwcG9ydC9qc29uQ29udGV4dC5qc1wiO2ltcG9ydHtnZXRXR1M4NEV4dGVudEZvckl0ZW0gYXMgVCx0b2dnbGVUeXBlS2V5d29yZCBhcyB2LHR5cGVLZXl3b3JkIGFzIFMscmVtb3ZlVHlwZUtleXdvcmQgYXMgTCxoYXNUeXBlS2V5d29yZCBhcyBJfWZyb21cIi4uLy4uL3BvcnRhbC9zdXBwb3J0L3BvcnRhbEl0ZW1VdGlscy5qc1wiO2NvbnN0IGc9XCJGZWF0dXJlIFNlcnZpY2VcIixFPVwiZmVhdHVyZS1sYXllci11dGlsc1wiLFA9YCR7RX0tc2F2ZWAsTz1gJHtFfS1zYXZlLWFzYCxBPWAke0V9LXNhdmVhbGxgLHg9YCR7RX0tc2F2ZWFsbC1hc2A7ZnVuY3Rpb24gTihlKXtyZXR1cm57aXNWYWxpZDpiKGUpJiYoIShcImR5bmFtaWNEYXRhU291cmNlXCJpbiBlKXx8IWUuZHluYW1pY0RhdGFTb3VyY2UpLGVycm9yTWVzc2FnZTpcIkZlYXR1cmUgbGF5ZXIgc2hvdWxkIGJlIGEgbGF5ZXIgb3IgdGFibGUgaW4gYSBtYXAgb3IgZmVhdHVyZSBzZXJ2aWNlXCJ9fWZ1bmN0aW9uICQoZSxyKXtjb25zdCBhPXcoZSxcInBvcnRhbC1pdGVtXCIpO3JldHVybiByPy5pc1RhYmxlJiYoYS5sYXllckNvbnRhaW5lclR5cGU9XCJ0YWJsZXNcIiksYX1mdW5jdGlvbiBqKGUpe2NvbnN0IHI9JChlKSxhPSQoZSk7cmV0dXJuIGEubGF5ZXJDb250YWluZXJUeXBlPVwidGFibGVzXCIse2ZvckxheWVyczpyLGZvclRhYmxlczphfX1mdW5jdGlvbiBVKGUpe2NvbnN0IHI9W10sYT1bXTtmb3IoY29uc3R7bGF5ZXI6dCxsYXllckpTT046bn1vZiBlKVIodCk/YS5wdXNoKG4pOnIucHVzaChuKTtyZXR1cm57bGF5ZXJzOnIsdGFibGVzOmF9fWZ1bmN0aW9uIFIoZSxyKXtyZXR1cm4gZS5pc1RhYmxlfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIFUoW2VdKX1hc3luYyBmdW5jdGlvbiBKKGUscil7cmV0dXJuL1xcL1xcZCtcXC8/JC8udGVzdChlLnVybCk/QyhyWzBdKTpHKHIsZSl9YXN5bmMgZnVuY3Rpb24gRyhlLHIpe2lmKGUucmV2ZXJzZSgpLCFyKXJldHVybiBVKGUpO2NvbnN0IGE9YXdhaXQgXyhyLGUpO2Zvcihjb25zdCB0IG9mIGUpVih0LmxheWVyLHQubGF5ZXJKU09OLGEpO3JldHVybiBNKGEsZSksYX1hc3luYyBmdW5jdGlvbiBfKGUscil7bGV0IGE9YXdhaXQgZS5mZXRjaERhdGEoXCJqc29uXCIpO2lmKEQoYSkmJiFJKGUsUy5IT1NURURfU0VSVklDRSkpcmV0dXJuIGE7YXx8PXt9LEYoYSk7Y29uc3R7bGF5ZXI6e3VybDp0LGN1c3RvbVBhcmFtZXRlcnM6bixhcGlLZXk6c319PXJbMF07cmV0dXJuIGF3YWl0IEIoYSx7dXJsOnQ/P1wiXCIsY3VzdG9tUGFyYW1ldGVyczpuLGFwaUtleTpzfSxyLm1hcCgoZT0+ZS5sYXllci5sYXllcklkKSkpLGF9ZnVuY3Rpb24gRChlKXtyZXR1cm4hIShlJiZBcnJheS5pc0FycmF5KGUubGF5ZXJzKSYmQXJyYXkuaXNBcnJheShlLnRhYmxlcykpfWZ1bmN0aW9uIEYoZSl7ZS5sYXllcnN8fD1bXSxlLnRhYmxlc3x8PVtdfWZ1bmN0aW9uIE0oZSxyKXtjb25zdCBhPVtdLHQ9W107Zm9yKGNvbnN0e2xheWVyOm59b2Ygcil7Y29uc3R7aXNUYWJsZTplLGxheWVySWQ6cn09bjtlP3QucHVzaChyKTphLnB1c2gocil9WShlLmxheWVycyxhKSxZKGUudGFibGVzLHQpfWZ1bmN0aW9uIFkocixhKXtpZihyLmxlbmd0aDwyKXJldHVybjtjb25zdCB0PVtdO2Zvcihjb25zdHtpZDplfW9mIHIpdC5wdXNoKGUpO2UodC5zb3J0KGspLGEuc2xpY2UoKS5zb3J0KGspKSYmci5zb3J0KCgoZSxyKT0+e2NvbnN0IHQ9YS5pbmRleE9mKGUuaWQpLG49YS5pbmRleE9mKHIuaWQpO3JldHVybiB0PG4/LTE6dD5uPzE6MH0pKX1mdW5jdGlvbiBrKGUscil7cmV0dXJuIGU8cj8tMTplPnI/MTowfWFzeW5jIGZ1bmN0aW9uIEIoZSxyLGEpe2NvbnN0e3VybDp0LGN1c3RvbVBhcmFtZXRlcnM6bixhcGlLZXk6c309cix7c2VydmljZUpTT046byxsYXllcnNKU09OOmx9PWF3YWl0IGQodCx7Y3VzdG9tUGFyYW1ldGVyczpuLGFwaUtleTpzfSksaT1LKGUubGF5ZXJzLG8ubGF5ZXJzLGEpLGM9SyhlLnRhYmxlcyxvLnRhYmxlcyxhKTtlLmxheWVycz1pLml0ZW1SZXNvdXJjZXMsZS50YWJsZXM9Yy5pdGVtUmVzb3VyY2VzO2NvbnN0IHU9Wy4uLmkuYWRkZWQsLi4uYy5hZGRlZF0seT1sP1suLi5sLmxheWVycywuLi5sLnRhYmxlc106W107YXdhaXQgeihlLHUsdCx5KX1mdW5jdGlvbiBLKGUsYSx0KXtjb25zdCBuPXIoZSxhLCgoZSxyKT0+ZS5pZD09PXIuaWQpKTtlPWUuZmlsdGVyKChlPT4hbi5yZW1vdmVkLnNvbWUoKHI9PnIuaWQ9PT1lLmlkKSkpKTtjb25zdCBzPW4uYWRkZWQ7cmV0dXJuIHMuZm9yRWFjaCgoKHtpZDpyfSk9PntlLnB1c2goe2lkOnJ9KX0pKSx7aXRlbVJlc291cmNlczplLGFkZGVkOnMuZmlsdGVyKCgoe2lkOmV9KT0+IXQuaW5jbHVkZXMoZSkpKX19YXN5bmMgZnVuY3Rpb24geihlLHIsYSx0KXtjb25zdCBuPWF3YWl0IEgocikscz1yLm1hcCgoKHtpZDplLHR5cGU6cn0pPT5uZXcobi5nZXQocikpKHt1cmw6YSxsYXllcklkOmUsc291cmNlSlNPTjp0LmZpbmQoKCh7aWQ6cn0pPT5yPT09ZSkpfSkpKTthd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocy5tYXAoKGU9PmUubG9hZCgpKSkpLHMuZm9yRWFjaCgocj0+e2NvbnN0e2xheWVySWQ6YSxsb2FkZWQ6dCxkZWZhdWx0UG9wdXBUZW1wbGF0ZTpufT1yO2lmKCF0fHxudWxsPT1uKXJldHVybjtjb25zdCBzPXtpZDphLHBvcHVwSW5mbzpuLnRvSlNPTigpfTtWKHIsXCJBcmNHSVNGZWF0dXJlTGF5ZXJcIj09PXIub3BlcmF0aW9uYWxMYXllclR5cGU/czp7Li4ucyxsYXllclR5cGU6ci5vcGVyYXRpb25hbExheWVyVHlwZX0sZSl9KSl9YXN5bmMgZnVuY3Rpb24gSChlKXtjb25zdCByPVtdO2UuZm9yRWFjaCgoKHt0eXBlOmV9KT0+e3N3aXRjaChoKGUpKXtjYXNlXCJDYXRhbG9nTGF5ZXJcIjpyLnB1c2goaW1wb3J0KFwiLi4vQ2F0YWxvZ0xheWVyLmpzXCIpLnRoZW4oKGU9PmUuZGVmYXVsdCkpKTticmVhaztjYXNlXCJGZWF0dXJlTGF5ZXJcIjpyLnB1c2goaW1wb3J0KFwiLi4vRmVhdHVyZUxheWVyLmpzXCIpLnRoZW4oKGU9PmUuZGVmYXVsdCkpKTticmVhaztjYXNlXCJPcmllbnRlZEltYWdlcnlMYXllclwiOnIucHVzaChpbXBvcnQoXCIuLi9PcmllbnRlZEltYWdlcnlMYXllci5qc1wiKS50aGVuKChlPT5lLmRlZmF1bHQpKSl9fSkpO2NvbnN0IGE9YXdhaXQgUHJvbWlzZS5hbGwociksdD1uZXcgTWFwO3JldHVybiBlLmZvckVhY2goKCh7dHlwZTplfSxyKT0+e3Quc2V0KGUsYVtyXSl9KSksdH1mdW5jdGlvbiBWKGUscixhKXtlLmlzVGFibGU/cShhLnRhYmxlcyxyKTpxKGEubGF5ZXJzLHIpfWZ1bmN0aW9uIHEoZSxyKXtjb25zdCBhPWUuZmluZEluZGV4KCgoe2lkOmV9KT0+ZT09PXIuaWQpKTstMT09PWE/ZS5wdXNoKHIpOmVbYV09cn1mdW5jdGlvbiBRKGUscil7aWYoIWUubGVuZ3RoKXRocm93IG5ldyB0KGAke3J9Om1pc3NpbmctcGFyYW1ldGVyc2AsXCInbGF5ZXJzJyBhcnJheSBzaG91bGQgY29udGFpbiBhdCBsZWFzdCBvbmUgZmVhdHVyZSBsYXllclwiKX1mdW5jdGlvbiBXKGUscil7Y29uc3QgYT1lLm1hcCgoZT0+ZS5wb3J0YWxJdGVtLmlkKSk7aWYobmV3IFNldChhKS5zaXplPjEpdGhyb3cgbmV3IHQoYCR7cn06aW52YWxpZC1wYXJhbWV0ZXJzYCxcIkFsbCBsYXllcnMgaW4gdGhlICdsYXllcnMnIGFycmF5IHNob3VsZCBiZSBsb2FkZWQgZnJvbSB0aGUgc2FtZSBwb3J0YWwgaXRlbVwiKX1mdW5jdGlvbiBYKGUscil7Y29uc3QgYT1lLm1hcCgoZT0+ZS5sYXllcklkKSk7aWYobmV3IFNldChhKS5zaXplIT09YS5sZW5ndGgpdGhyb3cgbmV3IHQoYCR7cn06aW52YWxpZC1wYXJhbWV0ZXJzYCxcIidsYXllcnMnIGFycmF5IHNob3VsZCBjb250YWluIG9ubHkgb25lIGluc3RhbmNlIGVhY2ggb2YgbGF5ZXIgb3IgdGFibGUgaW4gYSBmZWF0dXJlIHNlcnZpY2VcIil9YXN5bmMgZnVuY3Rpb24gWihlKXtRKGUsQSksYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGU9PmUubG9hZCgpKSkpO2Zvcihjb25zdCByIG9mIGUpdShyLEEsTikseSh7bGF5ZXI6cixpdGVtVHlwZTpnLGVycm9yTmFtZVByZWZpeDpBfSk7VyhlLEEpLFgoZSxBKX1mdW5jdGlvbiBlZShlKXtpZighKFwibGF5ZXJUeXBlXCJpbiBlKSlyZXR1cm4hIWUuY2hhcnRzPy5sZW5ndGg7c3dpdGNoKGUubGF5ZXJUeXBlKXtjYXNlXCJPcmllbnRlZEltYWdlcnlMYXllclwiOnJldHVybiEhZS5jaGFydHM/Lmxlbmd0aDtjYXNlXCJTdWJ0eXBlR3JvdXBMYXllclwiOnJldHVybiEhZS5sYXllcnMuc29tZSgoZT0+ISFlLmNoYXJ0cz8ubGVuZ3RoKSk7Y2FzZVwiU3VidHlwZUdyb3VwVGFibGVcIjpyZXR1cm4hIWUudGFibGVzLnNvbWUoKGU9PiEhZS5jaGFydHM/Lmxlbmd0aCkpO2Nhc2VcIkNhdGFsb2dMYXllclwiOnJldHVybiEhZS5mb290cHJpbnRMYXllcj8uY2hhcnRzPy5sZW5ndGh9fWZ1bmN0aW9uIHJlKGUscil7bGV0IGE9MCx0PTAsbj0wLHM9MDtmb3IoY29uc3QgbyBvZlsuLi5yLmxheWVycywuLi5yLnRhYmxlc10paWYoZWUobykmJnMrKyxcImxheWVyVHlwZVwiaW4gbylzd2l0Y2goby5sYXllclR5cGUpe2Nhc2VcIk9yaWVudGVkSW1hZ2VyeUxheWVyXCI6YSsrO2JyZWFrO2Nhc2VcIlN1YnR5cGVHcm91cExheWVyXCI6dCsrO2JyZWFrO2Nhc2VcIlN1YnR5cGVHcm91cFRhYmxlXCI6bisrfXYoZSxTLk9SSUVOVEVEX0lNQUdFUllfTEFZRVIsYT4wKSx2KGUsUy5TVUJUWVBFX0dST1VQX0xBWUVSLHQ+MCksdihlLFMuU1VCVFlQRV9HUk9VUF9UQUJMRSxuPjApLHYoZSxTLkNIQVJUUyxzPjApfWZ1bmN0aW9uIGFlKGUscixhKXtMKHIsUy5NRVRBREFUQSksdihyLFMuTVVMVElfTEFZRVIsZS5sZW5ndGg+MSksdihyLFMuU0lOR0xFX0xBWUVSLDE9PT1lLmxlbmd0aCksdihyLFMuVEFCTEUsYS50YWJsZXMubGVuZ3RoPjAmJjA9PT1hLmxheWVycy5sZW5ndGgpLHJlKHIsYSl9YXN5bmMgZnVuY3Rpb24gdGUoZSxyLGEpe3JlKHIsYSl9YXN5bmMgZnVuY3Rpb24gbmUoZSxyLGEpe2NvbnN0e3VybDp0LGxheWVySWQ6bix0aXRsZTpzLGZ1bGxFeHRlbnQ6byxpc1RhYmxlOmx9PWUsaT1tKHQpO3IudXJsPShcIkZlYXR1cmVTZXJ2ZXJcIj09PWk/LnNlcnZlclR5cGU/dDpgJHt0fS8ke259YCk/P251bGwsci50aXRsZXx8PXMsci5leHRlbnQ9bnVsbCxsfHxudWxsPT1vfHwoci5leHRlbnQ9YXdhaXQgVChvKSksYWUoW2VdLHIsYSl9ZnVuY3Rpb24gc2UoZSxyKXtmb3IoY29uc3QgbyBvZiBlKXtjb25zdCBhPW8ucGFyc2VkVXJsLnBhdGgsbj1tKGEpLHM9bj8udXJsLnBhdGg7aWYoIXMpdGhyb3cgbmV3IHQoYCR7cn06aW52YWxpZC1wYXJhbWV0ZXJzYCxmKG8sYGhhcyB1bnN1cHBvcnRlZCB1cmwgcGF0dGVybjogJHthfWApLHtsYXllcjpvfSk7Y29uc3QgbD1uPy5zZXJ2ZXJUeXBlO2lmKFwiRmVhdHVyZVNlcnZlclwiIT09bCYmXCJNYXBTZXJ2ZXJcIiE9PWwpdGhyb3cgbmV3IHQoYCR7cn06aW52YWxpZC1wYXJhbWV0ZXJzYCxmKG8sYGhhcyB1bnN1cHBvcnRlZCBzZXJ2ZXIgdHlwZTogJHtsfWApLHtsYXllcjpvfSk7aWYoXCJNYXBTZXJ2ZXJcIj09PWwmJmUubGVuZ3RoPjEpdGhyb3cgbmV3IHQoYCR7cn06aW52YWxpZC1wYXJhbWV0ZXJzYCxcIk9ubHkgb25lIGxheWVyIG9yIHRhYmxlIGluIGEgbWFwIHNlcnZpY2UgY2FuIGJlIHNhdmVkXCIpfWNvbnN0IGE9bShlWzBdLnBhcnNlZFVybC5wYXRoKSxuPWE/LnVybC5wYXRoLHM9ZS5ldmVyeSgoZT0+e2NvbnN0IHI9bShlLnBhcnNlZFVybC5wYXRoKTtyZXR1cm4gcj8udXJsLnBhdGg9PT1ufSkpO2lmKCFzKXRocm93IG5ldyB0KGAke3J9OmludmFsaWQtcGFyYW1ldGVyc2AsXCInbGF5ZXJzJyBhcnJheSBzaG91bGQgb25seSBjb250YWluIGxheWVycyBvciB0YWJsZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHNhbWUgZmVhdHVyZSBzZXJ2aWNlXCIpfWFzeW5jIGZ1bmN0aW9uIG9lKGUpe1EoZSx4KSxhd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZT0+ZS5sb2FkKCkpKSk7Zm9yKGNvbnN0IHIgb2YgZSl1KHIseCxOKTtzZShlLHgpLFgoZSx4KX1mdW5jdGlvbiBsZShlLHIpe3JlKGUscikscChlKX1hc3luYyBmdW5jdGlvbiBpZShlLHIsdCl7bGV0IG49MDtmb3IoY29uc3R7aXNUYWJsZTphfW9mIGUpYXx8bisrO2NvbnN0IHM9ZVswXS5wYXJzZWRVcmwucGF0aCxvPW0ocyk7aWYoci51cmw9XCJGZWF0dXJlU2VydmVyXCI9PT1vPy5zZXJ2ZXJUeXBlP28udXJsLnBhdGg6cyxyLnRpdGxlfHw9by50aXRsZSxyLmV4dGVudD1udWxsLG4+MCl7Y29uc3QgdD1lLm1hcCgoZT0+ZS5mdWxsRXh0ZW50KSkuZmlsdGVyKGEpLnJlZHVjZSgoKGUscik9PmUuY2xvbmUoKS51bmlvbihyKSkpO3QmJihyLmV4dGVudD1hd2FpdCBUKHQpKX1hZShlLHIsdCkscChyKX1hc3luYyBmdW5jdGlvbiBjZShlLHIpe3JldHVybiBzKHtsYXllcjplLGl0ZW1UeXBlOmcsdmFsaWRhdGVMYXllcjpOLGNyZWF0ZUpTT05Db250ZXh0OnI9PiQocixlKSxjcmVhdGVJdGVtRGF0YTooZSxyKT0+SihyLFtlXSksZXJyb3JOYW1lUHJlZml4OlAsc2V0SXRlbVByb3BlcnRpZXM6dGV9LHIpfWFzeW5jIGZ1bmN0aW9uIHVlKGUscil7YXdhaXQgWihlKTtjb25zdCBhPWVbMF0ucG9ydGFsSXRlbSx0PWooYSkscz1hd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZT0+bChlLGUuaXNUYWJsZT90LmZvclRhYmxlczp0LmZvckxheWVycyxyKSkpKSxvPWF3YWl0IEooYSxlLm1hcCgoKGUscik9Pih7bGF5ZXI6ZSxsYXllckpTT046c1tyXX0pKSkpO3JldHVybiBsZShhLG8pLGF3YWl0IGEudXBkYXRlKHtkYXRhOm99KSxhd2FpdCBQcm9taXNlLmFsbChlLnNsaWNlKDEpLm1hcCgoZT0+ZS5wb3J0YWxJdGVtLnJlbG9hZCgpKSkpLG4odC5mb3JMYXllcnMpLG4odC5mb3JUYWJsZXMpLGEuY2xvbmUoKX1hc3luYyBmdW5jdGlvbiB5ZShlLHIsYSl7cmV0dXJuIG8oe2xheWVyOmUsaXRlbVR5cGU6Zyx2YWxpZGF0ZUxheWVyOk4sY3JlYXRlSlNPTkNvbnRleHQ6cj0+JChyLGUpLGNyZWF0ZUl0ZW1EYXRhOihlLHIpPT5Qcm9taXNlLnJlc29sdmUoQyhlKSksZXJyb3JOYW1lUHJlZml4Ok8sbmV3SXRlbTpyLHNldEl0ZW1Qcm9wZXJ0aWVzOm5lfSxhKX1hc3luYyBmdW5jdGlvbiBwZShlLHIsYSl7YXdhaXQgb2UoZSk7Y29uc3QgdD1pKHtpdGVtVHlwZTpnLGVycm9yTmFtZVByZWZpeDp4LG5ld0l0ZW06cn0pLHM9aih0KSxvPWF3YWl0IFByb21pc2UuYWxsKGUubWFwKChlPT5sKGUsZS5pc1RhYmxlP3MuZm9yVGFibGVzOnMuZm9yTGF5ZXJzLGEpKSkpLHU9YXdhaXQgRyhlLm1hcCgoKGUscik9Pih7bGF5ZXI6ZSxsYXllckpTT046b1tyXX0pKSkpO2F3YWl0IGllKGUsdCx1KSxhd2FpdCBjKHQsdSxhKTtmb3IoY29uc3QgbiBvZiBlKW4ucG9ydGFsSXRlbT10LmNsb25lKCk7cmV0dXJuIG4ocy5mb3JMYXllcnMpLG4ocy5mb3JUYWJsZXMpLHR9ZXhwb3J0e2NlIGFzIHNhdmUsdWUgYXMgc2F2ZUFsbCxwZSBhcyBzYXZlQWxsQXMseWUgYXMgc2F2ZUFzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMzL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3VwZGF0ZU9yaWdpbnMgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9vcmlnaW5VdGlscy5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWwuanNcIjtpbXBvcnQgYSBmcm9tXCIuLi8uLi9wb3J0YWwvUG9ydGFsSXRlbS5qc1wiO2ltcG9ydHtjcmVhdGVGb3JJdGVtV3JpdGUgYXMgb31mcm9tXCIuLi8uLi9wb3J0YWwvc3VwcG9ydC9qc29uQ29udGV4dC5qc1wiO2ltcG9ydHthZGRUeXBlS2V5d29yZCBhcyBpLHR5cGVLZXl3b3JkIGFzIG59ZnJvbVwiLi4vLi4vcG9ydGFsL3N1cHBvcnQvcG9ydGFsSXRlbVV0aWxzLmpzXCI7aW1wb3J0e2V2YWx1YXRlV3JpdGVFcnJvcnMgYXMgc31mcm9tXCIuLi8uLi93ZWJkb2Mvc3VwcG9ydC9zYXZlVXRpbHMuanNcIjtmdW5jdGlvbiBwKHQscixhKXtjb25zdCBvPWEodCk7aWYoIW8uaXNWYWxpZCl0aHJvdyBuZXcgZShgJHtyfTppbnZhbGlkLXBhcmFtZXRlcnNgLG8uZXJyb3JNZXNzYWdlLHtsYXllcjp0fSl9YXN5bmMgZnVuY3Rpb24gbChlKXtjb25zdHtsYXllcjp0LGVycm9yTmFtZVByZWZpeDpyLHZhbGlkYXRlTGF5ZXI6YX09ZTthd2FpdCB0LmxvYWQoKSxwKHQscixhKX1mdW5jdGlvbiBtKGUsdCl7cmV0dXJuYExheWVyICh0aXRsZTogJHtlLnRpdGxlfSwgaWQ6ICR7ZS5pZH0pIG9mIHR5cGUgJyR7ZS5kZWNsYXJlZENsYXNzfScgJHt0fWB9ZnVuY3Rpb24gYyh0KXtjb25zdHtpdGVtOnIsZXJyb3JOYW1lUHJlZml4OmEsbGF5ZXI6byx2YWxpZGF0ZUl0ZW06aX09dDtpZih1KHQpLGkpe2NvbnN0IHQ9aShyKTtpZighdC5pc1ZhbGlkKXRocm93IG5ldyBlKGAke2F9OmludmFsaWQtcGFyYW1ldGVyc2AsdC5lcnJvck1lc3NhZ2Use2xheWVyOm99KX19ZnVuY3Rpb24gdSh0KXtjb25zdHtpdGVtOnIsaXRlbVR5cGU6YSxhZGRpdGlvbmFsSXRlbVR5cGU6byxlcnJvck5hbWVQcmVmaXg6aSxsYXllcjpufT10LHM9W2FdO2lmKG8mJnMucHVzaChvKSwhcy5pbmNsdWRlcyhyLnR5cGUpKXtjb25zdCB0PXMubWFwKChlPT5gJyR7ZX0nYCkpLmpvaW4oXCIsIFwiKTt0aHJvdyBuZXcgZShgJHtpfTpwb3J0YWwtaXRlbS13cm9uZy10eXBlYCxgUG9ydGFsIGl0ZW0gdHlwZSBzaG91bGQgYmUgb25lIG9mOiBcIiR7dH1cImAse2l0ZW06cixsYXllcjpufSl9fWZ1bmN0aW9uIGYodCl7Y29uc3R7bGF5ZXI6cixlcnJvck5hbWVQcmVmaXg6YX09dCx7cG9ydGFsSXRlbTpvfT1yO2lmKCFvKXRocm93IG5ldyBlKGAke2F9OnBvcnRhbC1pdGVtLW5vdC1zZXRgLG0ocixcInJlcXVpcmVzIHRoZSBwb3J0YWxJdGVtIHByb3BlcnR5IHRvIGJlIHNldFwiKSk7aWYoIW8ubG9hZGVkKXRocm93IG5ldyBlKGAke2F9OnBvcnRhbC1pdGVtLW5vdC1sb2FkZWRgLG0ocixcImNhbm5vdCBiZSBzYXZlZCB0byBhIHBvcnRhbCBpdGVtIHRoYXQgZG9lcyBub3QgZXhpc3Qgb3IgaXMgaW5hY2Nlc3NpYmxlXCIpKTtjKHsuLi50LGl0ZW06b30pfWZ1bmN0aW9uIGQoZSl7Y29uc3R7bmV3SXRlbTp0LGl0ZW1UeXBlOm99PWU7bGV0IGk9YS5mcm9tKHQpO3JldHVybiBpLmlkJiYoaT1pLmNsb25lKCksaS5pZD1udWxsKSxpLnR5cGU/Pz1vLGkucG9ydGFsPz89ci5nZXREZWZhdWx0KCksYyh7Li4uZSxpdGVtOml9KSxpfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIG8oZSxcInBvcnRhbC1pdGVtXCIpfWFzeW5jIGZ1bmN0aW9uIHcoZSx0LHIpe1wiYmVmb3JlU2F2ZVwiaW4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5iZWZvcmVTYXZlJiZhd2FpdCBlLmJlZm9yZVNhdmUoKTtjb25zdCBhPWUud3JpdGUoe30sdCk7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKHQucmVzb3VyY2VzPy5wZW5kaW5nT3BlcmF0aW9ucz8/W10pLHModCx7ZXJyb3JOYW1lOlwibGF5ZXItd3JpdGU6dW5zdXBwb3J0ZWRcIn0sciksYX1mdW5jdGlvbiBJKGUpe2koZSxuLkpTQVBJKSxlLnR5cGVLZXl3b3JkcyYmKGUudHlwZUtleXdvcmRzPWUudHlwZUtleXdvcmRzLmZpbHRlcigoKGUsdCxyKT0+ci5pbmRleE9mKGUpPT09dCkpKX1hc3luYyBmdW5jdGlvbiB2KGUsdCxyKXtjb25zdCBhPWUucG9ydGFsO2F3YWl0IGEuc2lnbkluKCksYXdhaXQgYS51c2VyLmFkZEl0ZW0oe2l0ZW06ZSxkYXRhOnQsZm9sZGVyOnI/LmZvbGRlcn0pfWFzeW5jIGZ1bmN0aW9uIFAoZSxyKXtjb25zdHtsYXllcjphLGNyZWF0ZUl0ZW1EYXRhOm8sY3JlYXRlSlNPTkNvbnRleHQ6aSxzZXRJdGVtUHJvcGVydGllczpuLHNhdmVSZXNvdXJjZXM6cyxzdXBwbGVtZW50YWxVbnN1cHBvcnRlZEVycm9yczpwfT1lO2F3YWl0IGwoZSksZihlKTtjb25zdCBtPWEucG9ydGFsSXRlbSxjPWk/aShtKTp5KG0pLHU9YXdhaXQgdyhhLGMsey4uLnIsc3VwcGxlbWVudGFsVW5zdXBwb3J0ZWRFcnJvcnM6cH0pLGQ9YXdhaXQgbyh7bGF5ZXI6YSxsYXllckpTT046dX0sbSk7cmV0dXJuIGF3YWl0KG4/LihhLG0sZCkpLEkobSksYXdhaXQgbS51cGRhdGUoe2RhdGE6ZH0pLHQoYyksYXdhaXQocz8uKG0sYykpLG19YXN5bmMgZnVuY3Rpb24gJChlLHIpe2NvbnN0e2xheWVyOmEsY3JlYXRlSXRlbURhdGE6byxjcmVhdGVKU09OQ29udGV4dDppLHNldEl0ZW1Qcm9wZXJ0aWVzOm4sc2F2ZVJlc291cmNlczpzLHN1cHBsZW1lbnRhbFVuc3VwcG9ydGVkRXJyb3JzOnB9PWU7YXdhaXQgbChlKTtjb25zdCBtPWQoZSksYz1pP2kobSk6eShtKSx1PWF3YWl0IHcoYSxjLHsuLi5yLHN1cHBsZW1lbnRhbFVuc3VwcG9ydGVkRXJyb3JzOnB9KSxmPWF3YWl0IG8oe2xheWVyOmEsbGF5ZXJKU09OOnV9LG0pO3JldHVybiBhd2FpdCBuKGEsbSxmKSxJKG0pLGF3YWl0IHYobSxmLHIpLGEucG9ydGFsSXRlbT1tLHQoYyksYXdhaXQocz8uKG0sYykpLG19ZXhwb3J0e3YgYXMgYWRkSXRlbSxtIGFzIGNyZWF0ZUVycm9yTWVzc2FnZSxmIGFzIGVuc3VyZUl0ZW1Db25maWcscCBhcyBlbnN1cmVMYXllckNvbmZpZyx3IGFzIGdldExheWVySlNPTixkIGFzIGdldFBvcnRhbEl0ZW0sUCBhcyBzYXZlLCQgYXMgc2F2ZUFzLEkgYXMgc2V0Q29tbW9uSXRlbVByb3BlcnRpZXN9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9