export const __webpack_id__ = "node_modules_esri_calcite-components_dist_chunks_interactive_js-node_modules_esri_calcite-com-d57773";
export const __webpack_ids__ = ["node_modules_esri_calcite-components_dist_chunks_interactive_js-node_modules_esri_calcite-com-d57773"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/component.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/component.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ componentFocusable),
/* harmony export */   g: () => (/* binding */ getIconScale),
/* harmony export */   i: () => (/* binding */ isHidden),
/* harmony export */   w: () => (/* binding */ warnIfMissingRequiredProp)
/* harmony export */ });
/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logger.js */ "./node_modules/@esri/calcite-components/dist/chunks/logger.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

function getIconScale(componentScale) {
  return componentScale === "l" ? "m" : "s";
}
function warnIfMissingRequiredProp(component, newProp, deprecatedProp) {
  if (!component[newProp] && !component[deprecatedProp]) {
    _logger_js__WEBPACK_IMPORTED_MODULE_0__.l.warn(`[${component.el.localName}] "${newProp.toString()}" or "${deprecatedProp.toString()}" is required.`);
  }
}
function isHidden(el) {
  return el.hidden || el.itemHidden;
}
async function componentFocusable(component) {
  await component.componentOnReady();
  await component.updateComplete;
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/interactive.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/interactive.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ InteractiveContainer),
/* harmony export */   u: () => (/* binding */ updateHostInteraction)
/* harmony export */ });
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */


function interceptedClick() {
  const { disabled } = this;
  if (!disabled) {
    HTMLElement.prototype.click.call(this);
  }
}
function onPointerDown(event) {
  const interactiveElement = event.target;
  if (interactiveElement.disabled) {
    event.preventDefault();
  }
}
const nonBubblingWhenDisabledMouseEvents = ["mousedown", "mouseup", "click"];
function onNonBubblingWhenDisabledMouseEvent(event) {
  const interactiveElement = event.target;
  if (interactiveElement.disabled) {
    event.stopImmediatePropagation();
    event.preventDefault();
  }
}
const captureOnlyOptions = { capture: true };
function updateHostInteraction(component) {
  if (component.disabled) {
    component.el.setAttribute("aria-disabled", "true");
    if (component.el.contains(document.activeElement)) {
      document.activeElement.blur();
    }
    blockInteraction(component);
    return;
  }
  restoreInteraction(component);
  component.el.removeAttribute("aria-disabled");
}
function blockInteraction(component) {
  component.el.click = interceptedClick;
  addInteractionListeners(component.el);
}
function addInteractionListeners(element) {
  element.addEventListener("pointerdown", onPointerDown, captureOnlyOptions);
  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.addEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));
}
function restoreInteraction(component) {
  delete component.el.click;
  removeInteractionListeners(component.el);
}
function removeInteractionListeners(element) {
  element.removeEventListener("pointerdown", onPointerDown, captureOnlyOptions);
  nonBubblingWhenDisabledMouseEvents.forEach((event) => element.removeEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));
}
const CSS = {
  container: "interaction-container"
};
const InteractiveContainer = ({ children, disabled }) => (0,lit_html__WEBPACK_IMPORTED_MODULE_0__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_1__.safeClassMap)(CSS.container)} .inert=${disabled}>${children}</div>`;



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/key.js":
/*!******************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/key.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ isActivationKey),
/* harmony export */   n: () => (/* binding */ numberKeys)
/* harmony export */ });
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */
function isActivationKey(key) {
  return key === "Enter" || key === " ";
}
const numberKeys = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/logger.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/logger.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ logger)
/* harmony export */ });
/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

const loggedDeprecations = /* @__PURE__ */ new Set();
const logLevels = {
  trace: 0,
  debug: 1,
  info: 2,
  warn: 4,
  error: 8,
  off: 10
};
function willLog(level) {
  return logLevels[level] >= logLevels[_runtime_js__WEBPACK_IMPORTED_MODULE_0__.l];
}
function forwardToConsole(level, ...data) {
  if (!willLog(level)) {
    return;
  }
  const badgeTemplate = "%ccalcite";
  const badgeStyle = "background: #007AC2; color: #fff; border-radius: 4px; padding: 2px 4px;";
  console[level].call(this, badgeTemplate, badgeStyle, ...data);
}
let listFormatter;
const logger = {
  debug: (message) => forwardToConsole("debug", message),
  info: (message) => forwardToConsole("info", message),
  warn: (message) => forwardToConsole("warn", message),
  error: (message) => forwardToConsole("error", message),
  trace: (message) => forwardToConsole("trace", message),
  deprecated
};
function deprecated(context, { component, name, suggested, removalVersion }) {
  const key = `${context}:${context === "component" ? "" : component}${name}`;
  if (loggedDeprecations.has(key)) {
    return;
  }
  loggedDeprecations.add(key);
  const multiSuggestions = Array.isArray(suggested);
  if (multiSuggestions && !listFormatter) {
    listFormatter = new Intl.ListFormat("en", { style: "long", type: "disjunction" });
  }
  const message = `[${name}] ${context} is deprecated and will be removed in ${removalVersion === "future" ? `a future version` : `v${removalVersion}`}.${suggested ? ` Use ${multiSuggestions ? listFormatter.format(suggested.map((suggestion) => `"${suggestion}"`)) : `"${suggested}"`} instead.` : ""}`;
  forwardToConsole("warn", message);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/observers.js":
/*!************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/observers.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ createObserver),
/* harmony export */   u: () => (/* binding */ updateRefObserver)
/* harmony export */ });
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */

function createObserver(type, callback, options) {
  if (lit__WEBPACK_IMPORTED_MODULE_0__.isServer) {
    return void 0;
  }
  const Observer = getObserver(type);
  return new Observer(callback, options);
}
function getObserver(type) {
  class ExtendedMutationObserver extends window.MutationObserver {
    constructor(callback) {
      super(callback);
      this.observedEntry = [];
      this.callback = callback;
    }
    observe(target, options) {
      this.observedEntry.push({ target, options });
      return super.observe(target, options);
    }
    unobserve(target) {
      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);
      this.observedEntry = [];
      this.callback(super.takeRecords(), this);
      this.disconnect();
      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));
    }
  }
  return function() {
    return type === "intersection" ? window.IntersectionObserver : type === "mutation" ? ExtendedMutationObserver : window.ResizeObserver;
  }();
}
function updateRefObserver(observer, oldTarget, target, options) {
  if (!observer) {
    return;
  }
  if (oldTarget) {
    observer.unobserve(oldTarget);
  }
  if (!target) {
    return;
  }
  if (observer instanceof MutationObserver) {
    observer.observe(target, options);
    return;
  }
  observer.observe(target);
}



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ useSetFocus)
/* harmony export */ });
/* harmony import */ var _arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/lumina/controllers */ "./node_modules/@arcgis/lumina/dist/controllers/index.js");
/* harmony import */ var _component_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component.js */ "./node_modules/@esri/calcite-components/dist/chunks/component.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */



const useSetFocus = () => {
  return (0,_arcgis_lumina_controllers__WEBPACK_IMPORTED_MODULE_0__.makeGenericController)((component, controller) => {
    let abortController;
    function handleFocusOut() {
      abortController?.abort();
    }
    controller.onLoad(() => {
      component.listen("focus", () => {
        abortController = new AbortController();
        component.el.addEventListener("focusout", handleFocusOut, { signal: abortController.signal });
      });
    });
    controller.onDisconnected(() => {
      component.el.removeEventListener("focusout", handleFocusOut);
    });
    return async (getFocusTarget, options) => {
      if (component.disabled) {
        return;
      }
      const focusConfig = toFocusConfig(getFocusTarget());
      if (!focusConfig) {
        return;
      }
      const { target, includeContainer, strategy } = focusConfig;
      const rootNode = (0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.k)(component.el);
      const currentActiveElement = rootNode.activeElement;
      await (0,_component_js__WEBPACK_IMPORTED_MODULE_1__.c)(component);
      const focusAlreadyChanged = currentActiveElement !== rootNode.activeElement;
      if (focusAlreadyChanged || abortController && !abortController?.signal.aborted) {
        return;
      }
      component.el.removeEventListener("focus", handleFocusOut);
      return (0,_dom_js__WEBPACK_IMPORTED_MODULE_2__.b)(target, includeContainer, strategy, component.el, options);
    };
  });
};
function isFocusOverride(focusTarget) {
  return "target" in focusTarget && ("includeContainer" in focusTarget || "strategy" in focusTarget);
}
function toFocusConfig(focusTarget) {
  if (!focusTarget) {
    return;
  }
  return isFocusOverride(focusTarget) ? focusTarget : { target: focusTarget };
}



/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfY2h1bmtzX2ludGVyYWN0aXZlX2pzLW5vZGVfbW9kdWxlc19lc3JpX2NhbGNpdGUtY29tLWQ1Nzc3My5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseUNBQU0sVUFBVSx1QkFBdUIsS0FBSyxtQkFBbUIsUUFBUSwwQkFBMEI7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUU7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3hCRjtBQUNBO0FBQ0E7QUFDZ0M7QUFDYztBQUM5QztBQUNBLFVBQVUsV0FBVztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msb0JBQW9CLEtBQUssOENBQUksY0FBYyw0REFBWSxpQkFBaUIsU0FBUyxTQUFTLEdBQUcsU0FBUztBQUlwSTs7Ozs7Ozs7Ozs7Ozs7OztBQzdERjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFOzs7Ozs7Ozs7Ozs7Ozs7O0FDVkY7QUFDQTtBQUNBO0FBQzZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBDQUFRO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxhQUFhLG9CQUFvQixpQkFBaUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw0Q0FBNEM7QUFDM0UsaUJBQWlCLFFBQVEsR0FBRyx5Q0FBeUMsRUFBRSxLQUFLO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxvQ0FBb0M7QUFDcEY7QUFDQSxzQkFBc0IsS0FBSyxJQUFJLFNBQVMsdUNBQXVDLHVEQUF1RCxlQUFlLEVBQUUsR0FBRyxvQkFBb0IsMEVBQTBFLFdBQVcsV0FBVyxVQUFVLElBQUksZUFBZTtBQUMzUztBQUNBO0FBR0U7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaERGO0FBQ0E7QUFDQTtBQUMrQjtBQUMvQjtBQUNBLE1BQU0seUNBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckRGO0FBQ0E7QUFDQTtBQUNtRTtBQUNWO0FBQ007QUFDL0Q7QUFDQSxTQUFTLGlGQUFxQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxnQ0FBZ0M7QUFDcEcsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHFDQUFxQztBQUNuRCx1QkFBdUIsMENBQVc7QUFDbEM7QUFDQSxZQUFZLGdEQUFrQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwwQ0FBWTtBQUN6QjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jaHVua3MvY29tcG9uZW50LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9pbnRlcmFjdGl2ZS5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jaHVua3Mva2V5LmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NodW5rcy9sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL29ic2VydmVycy5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jaHVua3MvdXNlU2V0Rm9jdXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGwgYXMgbG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLmpzXCI7XG5mdW5jdGlvbiBnZXRJY29uU2NhbGUoY29tcG9uZW50U2NhbGUpIHtcbiAgcmV0dXJuIGNvbXBvbmVudFNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCI7XG59XG5mdW5jdGlvbiB3YXJuSWZNaXNzaW5nUmVxdWlyZWRQcm9wKGNvbXBvbmVudCwgbmV3UHJvcCwgZGVwcmVjYXRlZFByb3ApIHtcbiAgaWYgKCFjb21wb25lbnRbbmV3UHJvcF0gJiYgIWNvbXBvbmVudFtkZXByZWNhdGVkUHJvcF0pIHtcbiAgICBsb2dnZXIud2FybihgWyR7Y29tcG9uZW50LmVsLmxvY2FsTmFtZX1dIFwiJHtuZXdQcm9wLnRvU3RyaW5nKCl9XCIgb3IgXCIke2RlcHJlY2F0ZWRQcm9wLnRvU3RyaW5nKCl9XCIgaXMgcmVxdWlyZWQuYCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gIHJldHVybiBlbC5oaWRkZW4gfHwgZWwuaXRlbUhpZGRlbjtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbXBvbmVudEZvY3VzYWJsZShjb21wb25lbnQpIHtcbiAgYXdhaXQgY29tcG9uZW50LmNvbXBvbmVudE9uUmVhZHkoKTtcbiAgYXdhaXQgY29tcG9uZW50LnVwZGF0ZUNvbXBsZXRlO1xufVxuZXhwb3J0IHtcbiAgY29tcG9uZW50Rm9jdXNhYmxlIGFzIGMsXG4gIGdldEljb25TY2FsZSBhcyBnLFxuICBpc0hpZGRlbiBhcyBpLFxuICB3YXJuSWZNaXNzaW5nUmVxdWlyZWRQcm9wIGFzIHdcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gXCJsaXQtaHRtbFwiO1xuaW1wb3J0IHsgc2FmZUNsYXNzTWFwIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5mdW5jdGlvbiBpbnRlcmNlcHRlZENsaWNrKCkge1xuICBjb25zdCB7IGRpc2FibGVkIH0gPSB0aGlzO1xuICBpZiAoIWRpc2FibGVkKSB7XG4gICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmNsaWNrLmNhbGwodGhpcyk7XG4gIH1cbn1cbmZ1bmN0aW9uIG9uUG9pbnRlckRvd24oZXZlbnQpIHtcbiAgY29uc3QgaW50ZXJhY3RpdmVFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICBpZiAoaW50ZXJhY3RpdmVFbGVtZW50LmRpc2FibGVkKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxufVxuY29uc3Qgbm9uQnViYmxpbmdXaGVuRGlzYWJsZWRNb3VzZUV2ZW50cyA9IFtcIm1vdXNlZG93blwiLCBcIm1vdXNldXBcIiwgXCJjbGlja1wiXTtcbmZ1bmN0aW9uIG9uTm9uQnViYmxpbmdXaGVuRGlzYWJsZWRNb3VzZUV2ZW50KGV2ZW50KSB7XG4gIGNvbnN0IGludGVyYWN0aXZlRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgaWYgKGludGVyYWN0aXZlRWxlbWVudC5kaXNhYmxlZCkge1xuICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbn1cbmNvbnN0IGNhcHR1cmVPbmx5T3B0aW9ucyA9IHsgY2FwdHVyZTogdHJ1ZSB9O1xuZnVuY3Rpb24gdXBkYXRlSG9zdEludGVyYWN0aW9uKGNvbXBvbmVudCkge1xuICBpZiAoY29tcG9uZW50LmRpc2FibGVkKSB7XG4gICAgY29tcG9uZW50LmVsLnNldEF0dHJpYnV0ZShcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGlmIChjb21wb25lbnQuZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICBibG9ja0ludGVyYWN0aW9uKGNvbXBvbmVudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlc3RvcmVJbnRlcmFjdGlvbihjb21wb25lbnQpO1xuICBjb21wb25lbnQuZWwucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiKTtcbn1cbmZ1bmN0aW9uIGJsb2NrSW50ZXJhY3Rpb24oY29tcG9uZW50KSB7XG4gIGNvbXBvbmVudC5lbC5jbGljayA9IGludGVyY2VwdGVkQ2xpY2s7XG4gIGFkZEludGVyYWN0aW9uTGlzdGVuZXJzKGNvbXBvbmVudC5lbCk7XG59XG5mdW5jdGlvbiBhZGRJbnRlcmFjdGlvbkxpc3RlbmVycyhlbGVtZW50KSB7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIG9uUG9pbnRlckRvd24sIGNhcHR1cmVPbmx5T3B0aW9ucyk7XG4gIG5vbkJ1YmJsaW5nV2hlbkRpc2FibGVkTW91c2VFdmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgb25Ob25CdWJibGluZ1doZW5EaXNhYmxlZE1vdXNlRXZlbnQsIGNhcHR1cmVPbmx5T3B0aW9ucykpO1xufVxuZnVuY3Rpb24gcmVzdG9yZUludGVyYWN0aW9uKGNvbXBvbmVudCkge1xuICBkZWxldGUgY29tcG9uZW50LmVsLmNsaWNrO1xuICByZW1vdmVJbnRlcmFjdGlvbkxpc3RlbmVycyhjb21wb25lbnQuZWwpO1xufVxuZnVuY3Rpb24gcmVtb3ZlSW50ZXJhY3Rpb25MaXN0ZW5lcnMoZWxlbWVudCkge1xuICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCBvblBvaW50ZXJEb3duLCBjYXB0dXJlT25seU9wdGlvbnMpO1xuICBub25CdWJibGluZ1doZW5EaXNhYmxlZE1vdXNlRXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIG9uTm9uQnViYmxpbmdXaGVuRGlzYWJsZWRNb3VzZUV2ZW50LCBjYXB0dXJlT25seU9wdGlvbnMpKTtcbn1cbmNvbnN0IENTUyA9IHtcbiAgY29udGFpbmVyOiBcImludGVyYWN0aW9uLWNvbnRhaW5lclwiXG59O1xuY29uc3QgSW50ZXJhY3RpdmVDb250YWluZXIgPSAoeyBjaGlsZHJlbiwgZGlzYWJsZWQgfSkgPT4gaHRtbGA8ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKENTUy5jb250YWluZXIpfSAuaW5lcnQ9JHtkaXNhYmxlZH0+JHtjaGlsZHJlbn08L2Rpdj5gO1xuZXhwb3J0IHtcbiAgSW50ZXJhY3RpdmVDb250YWluZXIgYXMgSSxcbiAgdXBkYXRlSG9zdEludGVyYWN0aW9uIGFzIHVcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuZnVuY3Rpb24gaXNBY3RpdmF0aW9uS2V5KGtleSkge1xuICByZXR1cm4ga2V5ID09PSBcIkVudGVyXCIgfHwga2V5ID09PSBcIiBcIjtcbn1cbmNvbnN0IG51bWJlcktleXMgPSBbXCIwXCIsIFwiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCJdO1xuZXhwb3J0IHtcbiAgaXNBY3RpdmF0aW9uS2V5IGFzIGksXG4gIG51bWJlcktleXMgYXMgblxufTtcbiIsIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyBsIGFzIGxvZ0xldmVsIH0gZnJvbSBcIi4vcnVudGltZS5qc1wiO1xuY29uc3QgbG9nZ2VkRGVwcmVjYXRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmNvbnN0IGxvZ0xldmVscyA9IHtcbiAgdHJhY2U6IDAsXG4gIGRlYnVnOiAxLFxuICBpbmZvOiAyLFxuICB3YXJuOiA0LFxuICBlcnJvcjogOCxcbiAgb2ZmOiAxMFxufTtcbmZ1bmN0aW9uIHdpbGxMb2cobGV2ZWwpIHtcbiAgcmV0dXJuIGxvZ0xldmVsc1tsZXZlbF0gPj0gbG9nTGV2ZWxzW2xvZ0xldmVsXTtcbn1cbmZ1bmN0aW9uIGZvcndhcmRUb0NvbnNvbGUobGV2ZWwsIC4uLmRhdGEpIHtcbiAgaWYgKCF3aWxsTG9nKGxldmVsKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBiYWRnZVRlbXBsYXRlID0gXCIlY2NhbGNpdGVcIjtcbiAgY29uc3QgYmFkZ2VTdHlsZSA9IFwiYmFja2dyb3VuZDogIzAwN0FDMjsgY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDRweDsgcGFkZGluZzogMnB4IDRweDtcIjtcbiAgY29uc29sZVtsZXZlbF0uY2FsbCh0aGlzLCBiYWRnZVRlbXBsYXRlLCBiYWRnZVN0eWxlLCAuLi5kYXRhKTtcbn1cbmxldCBsaXN0Rm9ybWF0dGVyO1xuY29uc3QgbG9nZ2VyID0ge1xuICBkZWJ1ZzogKG1lc3NhZ2UpID0+IGZvcndhcmRUb0NvbnNvbGUoXCJkZWJ1Z1wiLCBtZXNzYWdlKSxcbiAgaW5mbzogKG1lc3NhZ2UpID0+IGZvcndhcmRUb0NvbnNvbGUoXCJpbmZvXCIsIG1lc3NhZ2UpLFxuICB3YXJuOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcIndhcm5cIiwgbWVzc2FnZSksXG4gIGVycm9yOiAobWVzc2FnZSkgPT4gZm9yd2FyZFRvQ29uc29sZShcImVycm9yXCIsIG1lc3NhZ2UpLFxuICB0cmFjZTogKG1lc3NhZ2UpID0+IGZvcndhcmRUb0NvbnNvbGUoXCJ0cmFjZVwiLCBtZXNzYWdlKSxcbiAgZGVwcmVjYXRlZFxufTtcbmZ1bmN0aW9uIGRlcHJlY2F0ZWQoY29udGV4dCwgeyBjb21wb25lbnQsIG5hbWUsIHN1Z2dlc3RlZCwgcmVtb3ZhbFZlcnNpb24gfSkge1xuICBjb25zdCBrZXkgPSBgJHtjb250ZXh0fToke2NvbnRleHQgPT09IFwiY29tcG9uZW50XCIgPyBcIlwiIDogY29tcG9uZW50fSR7bmFtZX1gO1xuICBpZiAobG9nZ2VkRGVwcmVjYXRpb25zLmhhcyhrZXkpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxvZ2dlZERlcHJlY2F0aW9ucy5hZGQoa2V5KTtcbiAgY29uc3QgbXVsdGlTdWdnZXN0aW9ucyA9IEFycmF5LmlzQXJyYXkoc3VnZ2VzdGVkKTtcbiAgaWYgKG11bHRpU3VnZ2VzdGlvbnMgJiYgIWxpc3RGb3JtYXR0ZXIpIHtcbiAgICBsaXN0Rm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChcImVuXCIsIHsgc3R5bGU6IFwibG9uZ1wiLCB0eXBlOiBcImRpc2p1bmN0aW9uXCIgfSk7XG4gIH1cbiAgY29uc3QgbWVzc2FnZSA9IGBbJHtuYW1lfV0gJHtjb250ZXh0fSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gJHtyZW1vdmFsVmVyc2lvbiA9PT0gXCJmdXR1cmVcIiA/IGBhIGZ1dHVyZSB2ZXJzaW9uYCA6IGB2JHtyZW1vdmFsVmVyc2lvbn1gfS4ke3N1Z2dlc3RlZCA/IGAgVXNlICR7bXVsdGlTdWdnZXN0aW9ucyA/IGxpc3RGb3JtYXR0ZXIuZm9ybWF0KHN1Z2dlc3RlZC5tYXAoKHN1Z2dlc3Rpb24pID0+IGBcIiR7c3VnZ2VzdGlvbn1cImApKSA6IGBcIiR7c3VnZ2VzdGVkfVwiYH0gaW5zdGVhZC5gIDogXCJcIn1gO1xuICBmb3J3YXJkVG9Db25zb2xlKFwid2FyblwiLCBtZXNzYWdlKTtcbn1cbmV4cG9ydCB7XG4gIGxvZ2dlciBhcyBsXG59O1xuIiwiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvZGV2L0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG52My4zLjMgKi9cbmltcG9ydCB7IGlzU2VydmVyIH0gZnJvbSBcImxpdFwiO1xuZnVuY3Rpb24gY3JlYXRlT2JzZXJ2ZXIodHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgaWYgKGlzU2VydmVyKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBjb25zdCBPYnNlcnZlciA9IGdldE9ic2VydmVyKHR5cGUpO1xuICByZXR1cm4gbmV3IE9ic2VydmVyKGNhbGxiYWNrLCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyKHR5cGUpIHtcbiAgY2xhc3MgRXh0ZW5kZWRNdXRhdGlvbk9ic2VydmVyIGV4dGVuZHMgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICBzdXBlcihjYWxsYmFjayk7XG4gICAgICB0aGlzLm9ic2VydmVkRW50cnkgPSBbXTtcbiAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgb2JzZXJ2ZSh0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeS5wdXNoKHsgdGFyZ2V0LCBvcHRpb25zIH0pO1xuICAgICAgcmV0dXJuIHN1cGVyLm9ic2VydmUodGFyZ2V0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgdW5vYnNlcnZlKHRhcmdldCkge1xuICAgICAgY29uc3QgbmV3T2JzZXJ2ZWRFbnRyaWVzID0gdGhpcy5vYnNlcnZlZEVudHJ5LmZpbHRlcigob2JzZXJ2ZWQpID0+IG9ic2VydmVkLnRhcmdldCAhPT0gdGFyZ2V0KTtcbiAgICAgIHRoaXMub2JzZXJ2ZWRFbnRyeSA9IFtdO1xuICAgICAgdGhpcy5jYWxsYmFjayhzdXBlci50YWtlUmVjb3JkcygpLCB0aGlzKTtcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgbmV3T2JzZXJ2ZWRFbnRyaWVzLmZvckVhY2goKG9ic2VydmVkKSA9PiB0aGlzLm9ic2VydmUob2JzZXJ2ZWQudGFyZ2V0LCBvYnNlcnZlZC5vcHRpb25zKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHlwZSA9PT0gXCJpbnRlcnNlY3Rpb25cIiA/IHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlciA6IHR5cGUgPT09IFwibXV0YXRpb25cIiA/IEV4dGVuZGVkTXV0YXRpb25PYnNlcnZlciA6IHdpbmRvdy5SZXNpemVPYnNlcnZlcjtcbiAgfSgpO1xufVxuZnVuY3Rpb24gdXBkYXRlUmVmT2JzZXJ2ZXIob2JzZXJ2ZXIsIG9sZFRhcmdldCwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gIGlmICghb2JzZXJ2ZXIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKG9sZFRhcmdldCkge1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZShvbGRUYXJnZXQpO1xuICB9XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvYnNlcnZlciBpbnN0YW5jZW9mIE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTtcbn1cbmV4cG9ydCB7XG4gIGNyZWF0ZU9ic2VydmVyIGFzIGMsXG4gIHVwZGF0ZVJlZk9ic2VydmVyIGFzIHVcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgbWFrZUdlbmVyaWNDb250cm9sbGVyIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hL2NvbnRyb2xsZXJzXCI7XG5pbXBvcnQgeyBjIGFzIGNvbXBvbmVudEZvY3VzYWJsZSB9IGZyb20gXCIuL2NvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgayBhcyBnZXRSb290Tm9kZSwgYiBhcyBmb2N1c0VsZW1lbnQgfSBmcm9tIFwiLi9kb20uanNcIjtcbmNvbnN0IHVzZVNldEZvY3VzID0gKCkgPT4ge1xuICByZXR1cm4gbWFrZUdlbmVyaWNDb250cm9sbGVyKChjb21wb25lbnQsIGNvbnRyb2xsZXIpID0+IHtcbiAgICBsZXQgYWJvcnRDb250cm9sbGVyO1xuICAgIGZ1bmN0aW9uIGhhbmRsZUZvY3VzT3V0KCkge1xuICAgICAgYWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgIH1cbiAgICBjb250cm9sbGVyLm9uTG9hZCgoKSA9PiB7XG4gICAgICBjb21wb25lbnQubGlzdGVuKFwiZm9jdXNcIiwgKCkgPT4ge1xuICAgICAgICBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGNvbXBvbmVudC5lbC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgaGFuZGxlRm9jdXNPdXQsIHsgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgY29udHJvbGxlci5vbkRpc2Nvbm5lY3RlZCgoKSA9PiB7XG4gICAgICBjb21wb25lbnQuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIGhhbmRsZUZvY3VzT3V0KTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXN5bmMgKGdldEZvY3VzVGFyZ2V0LCBvcHRpb25zKSA9PiB7XG4gICAgICBpZiAoY29tcG9uZW50LmRpc2FibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZvY3VzQ29uZmlnID0gdG9Gb2N1c0NvbmZpZyhnZXRGb2N1c1RhcmdldCgpKTtcbiAgICAgIGlmICghZm9jdXNDb25maWcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB0YXJnZXQsIGluY2x1ZGVDb250YWluZXIsIHN0cmF0ZWd5IH0gPSBmb2N1c0NvbmZpZztcbiAgICAgIGNvbnN0IHJvb3ROb2RlID0gZ2V0Um9vdE5vZGUoY29tcG9uZW50LmVsKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVFbGVtZW50ID0gcm9vdE5vZGUuYWN0aXZlRWxlbWVudDtcbiAgICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZShjb21wb25lbnQpO1xuICAgICAgY29uc3QgZm9jdXNBbHJlYWR5Q2hhbmdlZCA9IGN1cnJlbnRBY3RpdmVFbGVtZW50ICE9PSByb290Tm9kZS5hY3RpdmVFbGVtZW50O1xuICAgICAgaWYgKGZvY3VzQWxyZWFkeUNoYW5nZWQgfHwgYWJvcnRDb250cm9sbGVyICYmICFhYm9ydENvbnRyb2xsZXI/LnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudC5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgaGFuZGxlRm9jdXNPdXQpO1xuICAgICAgcmV0dXJuIGZvY3VzRWxlbWVudCh0YXJnZXQsIGluY2x1ZGVDb250YWluZXIsIHN0cmF0ZWd5LCBjb21wb25lbnQuZWwsIG9wdGlvbnMpO1xuICAgIH07XG4gIH0pO1xufTtcbmZ1bmN0aW9uIGlzRm9jdXNPdmVycmlkZShmb2N1c1RhcmdldCkge1xuICByZXR1cm4gXCJ0YXJnZXRcIiBpbiBmb2N1c1RhcmdldCAmJiAoXCJpbmNsdWRlQ29udGFpbmVyXCIgaW4gZm9jdXNUYXJnZXQgfHwgXCJzdHJhdGVneVwiIGluIGZvY3VzVGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIHRvRm9jdXNDb25maWcoZm9jdXNUYXJnZXQpIHtcbiAgaWYgKCFmb2N1c1RhcmdldCkge1xuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gaXNGb2N1c092ZXJyaWRlKGZvY3VzVGFyZ2V0KSA/IGZvY3VzVGFyZ2V0IDogeyB0YXJnZXQ6IGZvY3VzVGFyZ2V0IH07XG59XG5leHBvcnQge1xuICB1c2VTZXRGb2N1cyBhcyB1XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9