export const __webpack_id__ = "vendors-node_modules_esri_calcite-components_dist_components_calcite-tooltip_index_js";
export const __webpack_ids__ = ["vendors-node_modules_esri_calcite-components_dist_components_calcite-tooltip_index_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@esri/calcite-components/dist/chunks/FloatingArrow.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/chunks/FloatingArrow.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ FloatingArrow)
/* harmony export */ });
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/directives/keyed.js */ "./node_modules/lit/directives/keyed.js");
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */




const CSS = {
  arrow: "calcite-floating-ui-arrow",
  arrowStroke: "calcite-floating-ui-arrow__stroke"
};
const DEFAULTS = {
  width: 12,
  height: 6,
  strokeWidth: 1
};
const FloatingArrow = ({ floatingLayout, key, ref: ref$1 }) => {
  const { width, height, strokeWidth } = DEFAULTS;
  const svgX = width / 2;
  const isVertical = floatingLayout === "vertical";
  const dValue = `M0,0 H${width} L${width - svgX},${height} Q${svgX},${height} ${svgX},${height} Z`;
  return (0,lit_directives_keyed_js__WEBPACK_IMPORTED_MODULE_1__.keyed)(key, (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<svg aria-hidden=true class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)(CSS.arrow)} height=${width} viewBox=${`0 0 ${width} ${width + (!isVertical ? strokeWidth : 0)}`} width=${width + (isVertical ? strokeWidth : 0)} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_0__.ref)(ref$1)}>${(0,lit_html__WEBPACK_IMPORTED_MODULE_2__.svg)`${(0,lit_html__WEBPACK_IMPORTED_MODULE_2__.svg)`<path class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)(CSS.arrowStroke)} d=${dValue ?? lit_html__WEBPACK_IMPORTED_MODULE_2__.nothing} fill=none stroke-width=${strokeWidth + 1} />` || ""}<path d=${dValue ?? lit_html__WEBPACK_IMPORTED_MODULE_2__.nothing} stroke=none />`}</svg>`);
};



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tooltip/customElement.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tooltip/customElement.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tooltip: () => (/* binding */ Tooltip)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@esri/calcite-components/dist/chunks/runtime.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lit/directives/ref.js */ "./node_modules/lit/directives/ref.js");
/* harmony import */ var _chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/floating-ui.js */ "./node_modules/@esri/calcite-components/dist/chunks/floating-ui.js");
/* harmony import */ var _chunks_guid_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/guid.js */ "./node_modules/@esri/calcite-components/dist/chunks/guid.js");
/* harmony import */ var _chunks_openCloseComponent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/openCloseComponent.js */ "./node_modules/@esri/calcite-components/dist/chunks/openCloseComponent.js");
/* harmony import */ var _chunks_FloatingArrow_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../chunks/FloatingArrow.js */ "./node_modules/@esri/calcite-components/dist/chunks/FloatingArrow.js");
/* harmony import */ var _chunks_dom_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/dom.js */ "./node_modules/@esri/calcite-components/dist/chunks/dom.js");
/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */









const CSS = {
  positionContainer: "position-container",
  container: "container"
};
const idPrefix = "calcite-tooltip";
const IDS = {
  host: (id) => `${idPrefix}-${id}`
};
const TOOLTIP_OPEN_DELAY_MS = 300;
const TOOLTIP_QUICK_OPEN_DELAY_MS = TOOLTIP_OPEN_DELAY_MS / 3;
const TOOLTIP_CLOSE_DELAY_MS = TOOLTIP_OPEN_DELAY_MS * 1.5;
const ARIA_DESCRIBED_BY = "aria-describedby";
function getEffectiveReferenceElement(tooltip) {
  const { referenceElement } = tooltip;
  return (typeof referenceElement === "string" ? (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_8__.q)(tooltip, { id: referenceElement }) : referenceElement) || null;
}
class TooltipManager {
  constructor() {
    this.registeredElements = /* @__PURE__ */ new WeakMap();
    this.registeredShadowRootCounts = /* @__PURE__ */ new WeakMap();
    this.hoverOpenTimeout = null;
    this.hoverCloseTimeout = null;
    this.activeTooltip = null;
    this.registeredElementCount = 0;
    this.clickedTooltip = null;
    this.hoveredTooltip = null;
    this.queryTooltip = (composedPath) => {
      const { registeredElements } = this;
      const registeredElement = composedPath.find((pathEl) => registeredElements.has(pathEl));
      return registeredElements.get(registeredElement);
    };
    this.keyDownHandler = (event) => {
      if (event.key === "Escape" && !event.defaultPrevented) {
        const { activeTooltip } = this;
        if (activeTooltip?.open) {
          this.clearHoverTimeout();
          this.closeActiveTooltip();
          const referenceElement = getEffectiveReferenceElement(activeTooltip);
          const composedPath = event.composedPath();
          if (referenceElement instanceof Element && composedPath.includes(referenceElement) || composedPath.includes(activeTooltip)) {
            event.preventDefault();
          }
        }
      }
    };
    this.pointerLeaveHandler = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      this.clearHoverTimeout();
      this.closeHoveredTooltip();
    };
    this.pointerMoveHandler = (event) => {
      if (event.defaultPrevented) {
        this.closeHoveredTooltip();
        return;
      }
      const composedPath = event.composedPath();
      const tooltip = this.queryTooltip(composedPath);
      if (this.pathHasOpenTooltip(tooltip, composedPath)) {
        this.clearHoverTimeout();
        return;
      }
      if (tooltip === this.clickedTooltip) {
        return;
      }
      if (tooltip !== this.hoveredTooltip) {
        this.clearHoverOpenTimeout();
      }
      this.hoveredTooltip = tooltip;
      if (tooltip) {
        this.openHoveredTooltip(tooltip);
      } else if (this.activeTooltip?.open) {
        this.closeHoveredTooltip();
      }
      this.clickedTooltip = null;
    };
    this.clickHandler = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      this.clickedTooltip = null;
      const composedPath = event.composedPath();
      const tooltip = this.queryTooltip(composedPath);
      if (this.pathHasOpenTooltip(tooltip, composedPath)) {
        this.clearHoverTimeout();
        return;
      }
      this.closeActiveTooltip();
      if (!tooltip) {
        return;
      }
      this.clearHoverTimeout();
      if (tooltip.closeOnClick) {
        this.clickedTooltip = tooltip;
        this.toggleTooltip(tooltip, false);
        return;
      }
      this.toggleTooltip(tooltip, true);
    };
    this.blurHandler = () => {
      this.closeActiveTooltip();
    };
    this.focusInHandler = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      const composedPath = event.composedPath();
      const tooltip = this.queryTooltip(composedPath);
      if (this.pathHasOpenTooltip(tooltip, composedPath)) {
        this.clearHoverTimeout();
        return;
      }
      if (tooltip === this.clickedTooltip) {
        return;
      }
      this.clickedTooltip = null;
      this.closeTooltipIfNotActive(tooltip);
      if (!tooltip) {
        return;
      }
      this.toggleFocusedTooltip(tooltip, true);
    };
    this.openHoveredTooltip = (tooltip) => {
      this.hoverOpenTimeout = window.setTimeout(
        () => {
          if (this.hoverOpenTimeout === null || tooltip !== this.hoveredTooltip) {
            return;
          }
          this.clearHoverCloseTimeout();
          this.closeTooltipIfNotActive(tooltip);
          this.toggleTooltip(tooltip, true);
        },
        this.activeTooltip?.open ? TOOLTIP_QUICK_OPEN_DELAY_MS : TOOLTIP_OPEN_DELAY_MS
      );
    };
    this.closeHoveredTooltip = () => {
      this.hoverCloseTimeout = window.setTimeout(() => {
        if (this.hoverCloseTimeout === null) {
          return;
        }
        this.closeActiveTooltip();
      }, TOOLTIP_CLOSE_DELAY_MS);
    };
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  registerElement(referenceEl, tooltip) {
    this.registeredElementCount++;
    this.registeredElements.set(referenceEl, tooltip);
    const shadowRoot = this.getReferenceElShadowRootNode(referenceEl);
    if (shadowRoot) {
      this.registerShadowRoot(shadowRoot);
    }
    if (this.registeredElementCount === 1) {
      this.addListeners();
    }
  }
  unregisterElement(referenceEl) {
    const shadowRoot = this.getReferenceElShadowRootNode(referenceEl);
    if (shadowRoot) {
      this.unregisterShadowRoot(shadowRoot);
    }
    if (this.registeredElements.delete(referenceEl)) {
      this.registeredElementCount--;
    }
    if (this.registeredElementCount === 0) {
      this.removeListeners();
    }
  }
  pathHasOpenTooltip(tooltip, composedPath) {
    const { activeTooltip } = this;
    return activeTooltip?.open && composedPath.includes(activeTooltip) || tooltip?.open && composedPath.includes(tooltip);
  }
  addShadowListeners(shadowRoot) {
    shadowRoot.addEventListener("focusin", this.focusInHandler);
  }
  removeShadowListeners(shadowRoot) {
    shadowRoot.removeEventListener("focusin", this.focusInHandler);
  }
  addListeners() {
    window.addEventListener("keydown", this.keyDownHandler);
    window.addEventListener("pointermove", this.pointerMoveHandler);
    window.addEventListener("click", this.clickHandler);
    window.addEventListener("focusin", this.focusInHandler);
    window.addEventListener("blur", this.blurHandler);
    document.addEventListener("pointerleave", this.pointerLeaveHandler);
  }
  removeListeners() {
    window.removeEventListener("keydown", this.keyDownHandler);
    window.removeEventListener("pointermove", this.pointerMoveHandler);
    window.removeEventListener("click", this.clickHandler);
    window.removeEventListener("focusin", this.focusInHandler);
    window.removeEventListener("blur", this.blurHandler);
    document.removeEventListener("pointerleave", this.pointerLeaveHandler);
  }
  clearHoverOpenTimeout() {
    window.clearTimeout(this.hoverOpenTimeout);
    this.hoverOpenTimeout = null;
  }
  clearHoverCloseTimeout() {
    window.clearTimeout(this.hoverCloseTimeout);
    this.hoverCloseTimeout = null;
  }
  clearHoverTimeout() {
    this.clearHoverOpenTimeout();
    this.clearHoverCloseTimeout();
  }
  closeTooltipIfNotActive(tooltip) {
    if (this.activeTooltip !== tooltip) {
      this.closeActiveTooltip();
    }
  }
  closeActiveTooltip() {
    const { activeTooltip } = this;
    if (activeTooltip?.open) {
      this.toggleTooltip(activeTooltip, false);
    }
  }
  toggleFocusedTooltip(tooltip, open) {
    if (open) {
      this.clearHoverTimeout();
    }
    this.toggleTooltip(tooltip, open);
  }
  toggleTooltip(tooltip, open) {
    tooltip.open = open;
    this.activeTooltip = open ? tooltip : null;
  }
  registerShadowRoot(shadowRoot) {
    const { registeredShadowRootCounts } = this;
    const count = registeredShadowRootCounts.get(shadowRoot);
    const newCount = Math.min((typeof count === "number" ? count : 0) + 1, 1);
    if (newCount === 1) {
      this.addShadowListeners(shadowRoot);
    }
    registeredShadowRootCounts.set(shadowRoot, newCount);
  }
  unregisterShadowRoot(shadowRoot) {
    const { registeredShadowRootCounts } = this;
    const count = registeredShadowRootCounts.get(shadowRoot);
    const newCount = Math.max((typeof count === "number" ? count : 1) - 1, 0);
    if (newCount === 0) {
      this.removeShadowListeners(shadowRoot);
    }
    registeredShadowRootCounts.set(shadowRoot, newCount);
  }
  getReferenceElShadowRootNode(referenceEl) {
    return referenceEl instanceof Element ? (0,_chunks_dom_js__WEBPACK_IMPORTED_MODULE_8__.c)(referenceEl) : null;
  }
}
const styles = (0,lit__WEBPACK_IMPORTED_MODULE_1__.css)`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{display:contents;--calcite-floating-ui-z-index: var(--calcite-tooltip-z-index, var(--calcite-z-index-tooltip))}.position-container{inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.position-container{opacity:0;inset-block-start:0;left:0}}.position-container{max-inline-size:var(--calcite-tooltip-max-size-x, 20rem);max-block-size:20rem}.position-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.position-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.position-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.position-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.position-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.position-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}.container{position:relative;overflow:hidden;padding:.75rem 1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;border-radius:var(--calcite-tooltip-corner-radius, var(--calcite-corner-radius-round));color:var(--calcite-tooltip-text-color, var(--calcite-color-text-1));text-align:start}.position-container .calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-tooltip-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-tooltip-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-tooltip-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-tooltip-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-tooltip-border-color, var(--calcite-color-border-3))}:host([hidden]){display:none}[hidden]{display:none}`;
const manager = new TooltipManager();
class Tooltip extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  constructor() {
    super(...arguments);
    this.arrowRef = (0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.createRef)();
    this.guid = IDS.host((0,_chunks_guid_js__WEBPACK_IMPORTED_MODULE_5__.g)());
    this.transitionProp = "opacity";
    this.floatingLayout = "vertical";
    this.closeOnClick = false;
    this.offsetDistance = _chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.d;
    this.offsetSkidding = 0;
    this.open = false;
    this.overlayPositioning = "absolute";
    this.placement = "auto";
    this.calciteTooltipBeforeClose = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.calciteTooltipBeforeOpen = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.calciteTooltipClose = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
    this.calciteTooltipOpen = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)({ cancelable: false });
  }
  static {
    this.properties = { floatingLayout: [16, {}, { state: true }], referenceEl: [16, {}, { state: true }], closeOnClick: [7, {}, { reflect: true, type: Boolean }], label: 1, offsetDistance: [11, {}, { type: Number, reflect: true }], offsetSkidding: [11, {}, { reflect: true, type: Number }], open: [7, {}, { reflect: true, type: Boolean }], overlayPositioning: [3, {}, { reflect: true }], placement: [3, {}, { reflect: true }], referenceElement: 1 };
  }
  static {
    this.styles = styles;
  }
  async reposition(delayed = false) {
    const { referenceEl, placement, overlayPositioning, offsetDistance, offsetSkidding, arrowRef, floatingEl } = this;
    return (0,_chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.r)(this, {
      floatingEl,
      referenceEl,
      overlayPositioning,
      placement,
      offsetDistance,
      offsetSkidding,
      arrowEl: arrowRef.value,
      type: "tooltip"
    }, delayed);
  }
  connectedCallback() {
    super.connectedCallback();
    this.setUpReferenceElement(true);
  }
  willUpdate(changes) {
    if (changes.has("offsetDistance") && (this.hasUpdated || this.offsetDistance !== _chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.d) || changes.has("offsetSkidding") && (this.hasUpdated || this.offsetSkidding !== 0) || changes.has("overlayPositioning") && (this.hasUpdated || this.overlayPositioning !== "absolute") || changes.has("placement") && (this.hasUpdated || this.placement !== "auto")) {
      this.reposition(true);
    }
    if (changes.has("open") && (this.hasUpdated || this.open !== false)) {
      this.openHandler();
    }
    if (changes.has("referenceElement")) {
      this.setUpReferenceElement();
    }
  }
  loaded() {
    if (this.referenceElement && !this.referenceEl) {
      this.setUpReferenceElement();
    }
  }
  disconnectedCallback() {
    super.disconnectedCallback();
    this.removeReferences();
    (0,_chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.a)(this);
  }
  openHandler() {
    (0,_chunks_openCloseComponent_js__WEBPACK_IMPORTED_MODULE_6__.t)(this);
    this.reposition(true);
  }
  onBeforeOpen() {
    this.calciteTooltipBeforeOpen.emit();
  }
  onOpen() {
    this.calciteTooltipOpen.emit();
  }
  onBeforeClose() {
    this.calciteTooltipBeforeClose.emit();
  }
  onClose() {
    this.calciteTooltipClose.emit();
    (0,_chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.h)(this);
  }
  setFloatingEl(el) {
    this.floatingEl = el;
    if (el) {
      requestAnimationFrame(() => this.setUpReferenceElement());
    }
  }
  setTransitionEl(el) {
    if (!el) {
      return;
    }
    this.transitionEl = el;
  }
  setUpReferenceElement(warn = true) {
    this.removeReferences();
    this.referenceEl = getEffectiveReferenceElement(this.el);
    (0,_chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    const { el, referenceElement, referenceEl } = this;
    if (warn && referenceElement && !referenceEl) {
      console.warn(`${el.tagName}: reference-element id "${referenceElement}" was not found.`, {
        el
      });
    }
    this.addReferences();
  }
  getId() {
    return this.el.id || this.guid;
  }
  addReferences() {
    const { referenceEl } = this;
    if (!referenceEl) {
      return;
    }
    const id = this.getId();
    if ("setAttribute" in referenceEl) {
      referenceEl.setAttribute(ARIA_DESCRIBED_BY, id);
    }
    manager.registerElement(referenceEl, this.el);
  }
  removeReferences() {
    const { referenceEl } = this;
    if (!referenceEl) {
      return;
    }
    if ("removeAttribute" in referenceEl) {
      referenceEl.removeAttribute(ARIA_DESCRIBED_BY);
    }
    manager.unregisterElement(referenceEl);
  }
  render() {
    const { referenceEl, label, open, floatingLayout } = this;
    const displayed = referenceEl && open;
    const hidden = !displayed;
    this.el.inert = hidden;
    this.el.ariaLabel = label;
    this.el.ariaLive = "polite";
    (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.setAttribute)(this.el, "id", this.getId());
    this.el.role = "tooltip";
    return (0,lit__WEBPACK_IMPORTED_MODULE_1__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.positionContainer)} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.setFloatingEl)}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)({
      [_chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.F.animation]: true,
      [_chunks_floating_ui_js__WEBPACK_IMPORTED_MODULE_4__.F.animationActive]: displayed
    })} ${(0,lit_directives_ref_js__WEBPACK_IMPORTED_MODULE_3__.ref)(this.setTransitionEl)}>${(0,_chunks_FloatingArrow_js__WEBPACK_IMPORTED_MODULE_7__.F)({ floatingLayout, ref: this.arrowRef })}<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.safeClassMap)(CSS.container)}><slot></slot></div></div></div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("calcite-tooltip", Tooltip);



/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-tooltip/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-tooltip/index.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Tooltip: () => (/* reexport safe */ _customElement_js__WEBPACK_IMPORTED_MODULE_0__.Tooltip)
/* harmony export */ });
/* harmony import */ var _customElement_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./customElement.js */ "./node_modules/@esri/calcite-components/dist/components/calcite-tooltip/customElement.js");


/***/ }),

/***/ "./node_modules/lit-html/development/directives/keyed.js":
/*!***************************************************************!*\
  !*** ./node_modules/lit-html/development/directives/keyed.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   keyed: () => (/* binding */ keyed)
/* harmony export */ });
/* harmony import */ var _lit_html_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lit-html.js */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var _directive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../directive.js */ "./node_modules/lit-html/development/directive.js");
/* harmony import */ var _directive_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../directive-helpers.js */ "./node_modules/lit-html/development/directive-helpers.js");
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */



class Keyed extends _directive_js__WEBPACK_IMPORTED_MODULE_1__.Directive {
    constructor() {
        super(...arguments);
        this.key = _lit_html_js__WEBPACK_IMPORTED_MODULE_0__.nothing;
    }
    render(k, v) {
        this.key = k;
        return v;
    }
    update(part, [k, v]) {
        if (k !== this.key) {
            // Clear the part before returning a value. The one-arg form of
            // setCommittedValue sets the value to a sentinel which forces a
            // commit the next render.
            (0,_directive_helpers_js__WEBPACK_IMPORTED_MODULE_2__.setCommittedValue)(part);
            this.key = k;
        }
        return v;
    }
}
/**
 * Associates a renderable value with a unique key. When the key changes, the
 * previous DOM is removed and disposed before rendering the next value, even
 * if the value - such as a template - is the same.
 *
 * This is useful for forcing re-renders of stateful components, or working
 * with code that expects new data to generate new HTML elements, such as some
 * animation techniques.
 */
const keyed = (0,_directive_js__WEBPACK_IMPORTED_MODULE_1__.directive)(Keyed);
//# sourceMappingURL=keyed.js.map

/***/ }),

/***/ "./node_modules/lit/directives/keyed.js":
/*!**********************************************!*\
  !*** ./node_modules/lit/directives/keyed.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   keyed: () => (/* reexport safe */ lit_html_directives_keyed_js__WEBPACK_IMPORTED_MODULE_0__.keyed)
/* harmony export */ });
/* harmony import */ var lit_html_directives_keyed_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit-html/directives/keyed.js */ "./node_modules/lit-html/development/directives/keyed.js");

//# sourceMappingURL=keyed.js.map


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX2NhbGNpdGUtdG9vbHRpcF9pbmRleF9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDNEM7QUFDSTtBQUNGO0FBQ0E7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlDQUFpQztBQUMxRCxVQUFVLDZCQUE2QjtBQUN2QztBQUNBO0FBQ0EsMEJBQTBCLE9BQU8sR0FBRyxhQUFhLEdBQUcsUUFBUSxHQUFHLEtBQUssR0FBRyxRQUFRLEVBQUUsS0FBSyxHQUFHLFFBQVE7QUFDakcsU0FBUyw4REFBSyxNQUFNLDhDQUFJLCtCQUErQiw0REFBWSxhQUFhLFNBQVMsT0FBTyxVQUFVLE9BQU8sT0FBTyxFQUFFLHdDQUF3QyxHQUFHLFFBQVEsd0NBQXdDLEVBQUUsMERBQUcsUUFBUSxHQUFHLDZDQUFHLEdBQUcsNkNBQUcsZUFBZSw0REFBWSxtQkFBbUIsSUFBSSxVQUFVLDZDQUFPLEVBQUUseUJBQXlCLGlCQUFpQixVQUFVLFVBQVUsVUFBVSw2Q0FBTyxFQUFFLGdCQUFnQjtBQUNwWjtBQUdFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN6QkY7QUFDQTtBQUNBO0FBQzZEO0FBQzdCO0FBQ3FEO0FBQzlCO0FBQzZIO0FBQ25JO0FBQ3lCO0FBQ1A7QUFDa0I7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFNBQVMsR0FBRyxHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsbUJBQW1CO0FBQzdCLGlEQUFpRCxpREFBaUIsWUFBWSxzQkFBc0I7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQkFBcUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkJBQTZCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZCQUE2QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGlEQUFpQjtBQUM3RDtBQUNBO0FBQ0EsZUFBZSx3Q0FBRyxPQUFPLHdIQUF3SCxNQUFNLGlCQUFpQiw4RkFBOEYsb0JBQW9CLHdCQUF3QixhQUFhLHNCQUFzQixxQkFBcUIsb0JBQW9CLE9BQU8sMkNBQTJDLGdCQUFnQixvQkFBb0IsVUFBVSxvQkFBb0IsUUFBUSxvQkFBb0IseURBQXlELHFCQUFxQiw4Q0FBOEMsa0JBQWtCLDBEQUEwRCwyREFBMkQsbUNBQW1DLFVBQVUsOEJBQThCLCtCQUErQixxQkFBcUIsc0VBQXNFLHVCQUF1QixtRUFBbUUsc0JBQXNCLG9FQUFvRSxTQUFTLHFFQUFxRSxVQUFVLHNFQUFzRSxVQUFVLG9CQUFvQixPQUFPLGdCQUFnQixzRUFBc0UsV0FBVywyQkFBMkIsb0JBQW9CLGtCQUFrQiwwQ0FBMEMsdUNBQXVDLG1DQUFtQyxxQ0FBcUMsV0FBVyxrQkFBa0IsZ0JBQWdCLG9CQUFvQixzQ0FBc0Msa0JBQWtCLDhDQUE4QyxxQkFBcUIsc0JBQXNCLHVGQUF1RixxRUFBcUUsaUJBQWlCLDhDQUE4QyxpQkFBaUIsbUJBQW1CLDRGQUE0RixnRkFBZ0YsdUZBQXVGLDJCQUEyQixnRkFBZ0YsbUNBQW1DLDBFQUEwRSxnQkFBZ0IsYUFBYSxTQUFTLGFBQWE7QUFDdm1GO0FBQ0Esc0JBQXNCLHNEQUFVO0FBQ2hDO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQVM7QUFDN0IseUJBQXlCLGtEQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBcUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsMkRBQVcsR0FBRyxtQkFBbUI7QUFDdEUsb0NBQW9DLDJEQUFXLEdBQUcsbUJBQW1CO0FBQ3JFLCtCQUErQiwyREFBVyxHQUFHLG1CQUFtQjtBQUNoRSw4QkFBOEIsMkRBQVcsR0FBRyxtQkFBbUI7QUFDL0Q7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUIsSUFBSSxhQUFhLHVCQUF1QixJQUFJLGFBQWEsdUJBQXVCLElBQUksOEJBQThCLG9DQUFvQyxJQUFJLDZCQUE2QiwwQkFBMEIsSUFBSSw2QkFBNkIsZUFBZSxJQUFJLDhCQUE4Qiw2QkFBNkIsSUFBSSxlQUFlLG9CQUFvQixJQUFJLGVBQWU7QUFDemE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUdBQW1HO0FBQy9HLFdBQVcseURBQVU7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUYscURBQXFCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHlEQUFvQjtBQUN4QjtBQUNBO0FBQ0EsSUFBSSxnRUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseURBQWM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHlEQUFpQjtBQUNyQixZQUFZLG9DQUFvQztBQUNoRDtBQUNBLHNCQUFzQixXQUFXLDBCQUEwQixpQkFBaUI7QUFDNUU7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwyQ0FBMkM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNERBQVk7QUFDaEI7QUFDQSxXQUFXLHlDQUFJLGNBQWMsNERBQVkseUJBQXlCLEVBQUUsMERBQUcscUJBQXFCLGNBQWMsNERBQVk7QUFDdEgsT0FBTyxxREFBVztBQUNsQixPQUFPLHFEQUFXO0FBQ2xCLEtBQUssR0FBRyxFQUFFLDBEQUFHLHVCQUF1QixHQUFHLDJEQUFhLEdBQUcsb0NBQW9DLEVBQUUsYUFBYSw0REFBWSxnQkFBZ0I7QUFDdEk7QUFDQTtBQUNBLHFEQUFhO0FBR1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBRTdaRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lDO0FBQ2U7QUFDSTtBQUM1RCxvQkFBb0Isb0RBQVM7QUFDN0I7QUFDQTtBQUNBLG1CQUFtQixpREFBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0VBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxjQUFjLHdEQUFTO0FBQzlCLGlDOzs7Ozs7Ozs7Ozs7Ozs7QUN0QzBDO0FBQzFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL0Zsb2F0aW5nQXJyb3cuanMiLCJ3ZWJwYWNrOi8vcHJlY2lzaW9uZmFybXMvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLXRvb2x0aXAvY3VzdG9tRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtdG9vbHRpcC9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmVjaXNpb25mYXJtcy8uL25vZGVfbW9kdWxlcy9saXQtaHRtbC9kZXZlbG9wbWVudC9kaXJlY3RpdmVzL2tleWVkLmpzIiwid2VicGFjazovL3ByZWNpc2lvbmZhcm1zLy4vbm9kZV9tb2R1bGVzL2xpdC9kaXJlY3RpdmVzL2tleWVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL2Rldi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxudjMuMy4zICovXG5pbXBvcnQgeyByZWYgfSBmcm9tIFwibGl0L2RpcmVjdGl2ZXMvcmVmLmpzXCI7XG5pbXBvcnQgeyBrZXllZCB9IGZyb20gXCJsaXQvZGlyZWN0aXZlcy9rZXllZC5qc1wiO1xuaW1wb3J0IHsgbm90aGluZywgc3ZnLCBodG1sIH0gZnJvbSBcImxpdC1odG1sXCI7XG5pbXBvcnQgeyBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmNvbnN0IENTUyA9IHtcbiAgYXJyb3c6IFwiY2FsY2l0ZS1mbG9hdGluZy11aS1hcnJvd1wiLFxuICBhcnJvd1N0cm9rZTogXCJjYWxjaXRlLWZsb2F0aW5nLXVpLWFycm93X19zdHJva2VcIlxufTtcbmNvbnN0IERFRkFVTFRTID0ge1xuICB3aWR0aDogMTIsXG4gIGhlaWdodDogNixcbiAgc3Ryb2tlV2lkdGg6IDFcbn07XG5jb25zdCBGbG9hdGluZ0Fycm93ID0gKHsgZmxvYXRpbmdMYXlvdXQsIGtleSwgcmVmOiByZWYkMSB9KSA9PiB7XG4gIGNvbnN0IHsgd2lkdGgsIGhlaWdodCwgc3Ryb2tlV2lkdGggfSA9IERFRkFVTFRTO1xuICBjb25zdCBzdmdYID0gd2lkdGggLyAyO1xuICBjb25zdCBpc1ZlcnRpY2FsID0gZmxvYXRpbmdMYXlvdXQgPT09IFwidmVydGljYWxcIjtcbiAgY29uc3QgZFZhbHVlID0gYE0wLDAgSCR7d2lkdGh9IEwke3dpZHRoIC0gc3ZnWH0sJHtoZWlnaHR9IFEke3N2Z1h9LCR7aGVpZ2h0fSAke3N2Z1h9LCR7aGVpZ2h0fSBaYDtcbiAgcmV0dXJuIGtleWVkKGtleSwgaHRtbGA8c3ZnIGFyaWEtaGlkZGVuPXRydWUgY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmFycm93KX0gaGVpZ2h0PSR7d2lkdGh9IHZpZXdCb3g9JHtgMCAwICR7d2lkdGh9ICR7d2lkdGggKyAoIWlzVmVydGljYWwgPyBzdHJva2VXaWR0aCA6IDApfWB9IHdpZHRoPSR7d2lkdGggKyAoaXNWZXJ0aWNhbCA/IHN0cm9rZVdpZHRoIDogMCl9ICR7cmVmKHJlZiQxKX0+JHtzdmdgJHtzdmdgPHBhdGggY2xhc3M9JHtzYWZlQ2xhc3NNYXAoQ1NTLmFycm93U3Ryb2tlKX0gZD0ke2RWYWx1ZSA/PyBub3RoaW5nfSBmaWxsPW5vbmUgc3Ryb2tlLXdpZHRoPSR7c3Ryb2tlV2lkdGggKyAxfSAvPmAgfHwgXCJcIn08cGF0aCBkPSR7ZFZhbHVlID8/IG5vdGhpbmd9IHN0cm9rZT1ub25lIC8+YH08L3N2Zz5gKTtcbn07XG5leHBvcnQge1xuICBGbG9hdGluZ0Fycm93IGFzIEZcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9kZXYvTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbnYzLjMuMyAqL1xuaW1wb3J0IHsgYyBhcyBjdXN0b21FbGVtZW50IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBjc3MsIGh0bWwgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBjcmVhdGVFdmVudCwgc2V0QXR0cmlidXRlLCBzYWZlQ2xhc3NNYXAgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGNyZWF0ZVJlZiwgcmVmIH0gZnJvbSBcImxpdC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgZCBhcyBkZWZhdWx0T2Zmc2V0RGlzdGFuY2UsIHIgYXMgcmVwb3NpdGlvbiwgYSBhcyBkaXNjb25uZWN0RmxvYXRpbmdVSSwgaCBhcyBoaWRlRmxvYXRpbmdVSSwgYyBhcyBjb25uZWN0RmxvYXRpbmdVSSwgRiBhcyBGbG9hdGluZ0NTUyB9IGZyb20gXCIuLi8uLi9jaHVua3MvZmxvYXRpbmctdWkuanNcIjtcbmltcG9ydCB7IGcgYXMgZ3VpZCB9IGZyb20gXCIuLi8uLi9jaHVua3MvZ3VpZC5qc1wiO1xuaW1wb3J0IHsgdCBhcyB0b2dnbGVPcGVuQ2xvc2UgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL29wZW5DbG9zZUNvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgRiBhcyBGbG9hdGluZ0Fycm93IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9GbG9hdGluZ0Fycm93LmpzXCI7XG5pbXBvcnQgeyBxIGFzIHF1ZXJ5RWxlbWVudFJvb3RzLCBjIGFzIGdldFNoYWRvd1Jvb3ROb2RlIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9kb20uanNcIjtcbmNvbnN0IENTUyA9IHtcbiAgcG9zaXRpb25Db250YWluZXI6IFwicG9zaXRpb24tY29udGFpbmVyXCIsXG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIlxufTtcbmNvbnN0IGlkUHJlZml4ID0gXCJjYWxjaXRlLXRvb2x0aXBcIjtcbmNvbnN0IElEUyA9IHtcbiAgaG9zdDogKGlkKSA9PiBgJHtpZFByZWZpeH0tJHtpZH1gXG59O1xuY29uc3QgVE9PTFRJUF9PUEVOX0RFTEFZX01TID0gMzAwO1xuY29uc3QgVE9PTFRJUF9RVUlDS19PUEVOX0RFTEFZX01TID0gVE9PTFRJUF9PUEVOX0RFTEFZX01TIC8gMztcbmNvbnN0IFRPT0xUSVBfQ0xPU0VfREVMQVlfTVMgPSBUT09MVElQX09QRU5fREVMQVlfTVMgKiAxLjU7XG5jb25zdCBBUklBX0RFU0NSSUJFRF9CWSA9IFwiYXJpYS1kZXNjcmliZWRieVwiO1xuZnVuY3Rpb24gZ2V0RWZmZWN0aXZlUmVmZXJlbmNlRWxlbWVudCh0b29sdGlwKSB7XG4gIGNvbnN0IHsgcmVmZXJlbmNlRWxlbWVudCB9ID0gdG9vbHRpcDtcbiAgcmV0dXJuICh0eXBlb2YgcmVmZXJlbmNlRWxlbWVudCA9PT0gXCJzdHJpbmdcIiA/IHF1ZXJ5RWxlbWVudFJvb3RzKHRvb2x0aXAsIHsgaWQ6IHJlZmVyZW5jZUVsZW1lbnQgfSkgOiByZWZlcmVuY2VFbGVtZW50KSB8fCBudWxsO1xufVxuY2xhc3MgVG9vbHRpcE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlZ2lzdGVyZWRFbGVtZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuICAgIHRoaXMucmVnaXN0ZXJlZFNoYWRvd1Jvb3RDb3VudHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgICB0aGlzLmhvdmVyT3BlblRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuaG92ZXJDbG9zZVRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlVG9vbHRpcCA9IG51bGw7XG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudENvdW50ID0gMDtcbiAgICB0aGlzLmNsaWNrZWRUb29sdGlwID0gbnVsbDtcbiAgICB0aGlzLmhvdmVyZWRUb29sdGlwID0gbnVsbDtcbiAgICB0aGlzLnF1ZXJ5VG9vbHRpcCA9IChjb21wb3NlZFBhdGgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVnaXN0ZXJlZEVsZW1lbnRzIH0gPSB0aGlzO1xuICAgICAgY29uc3QgcmVnaXN0ZXJlZEVsZW1lbnQgPSBjb21wb3NlZFBhdGguZmluZCgocGF0aEVsKSA9PiByZWdpc3RlcmVkRWxlbWVudHMuaGFzKHBhdGhFbCkpO1xuICAgICAgcmV0dXJuIHJlZ2lzdGVyZWRFbGVtZW50cy5nZXQocmVnaXN0ZXJlZEVsZW1lbnQpO1xuICAgIH07XG4gICAgdGhpcy5rZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICBjb25zdCB7IGFjdGl2ZVRvb2x0aXAgfSA9IHRoaXM7XG4gICAgICAgIGlmIChhY3RpdmVUb29sdGlwPy5vcGVuKSB7XG4gICAgICAgICAgdGhpcy5jbGVhckhvdmVyVGltZW91dCgpO1xuICAgICAgICAgIHRoaXMuY2xvc2VBY3RpdmVUb29sdGlwKCk7XG4gICAgICAgICAgY29uc3QgcmVmZXJlbmNlRWxlbWVudCA9IGdldEVmZmVjdGl2ZVJlZmVyZW5jZUVsZW1lbnQoYWN0aXZlVG9vbHRpcCk7XG4gICAgICAgICAgY29uc3QgY29tcG9zZWRQYXRoID0gZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gICAgICAgICAgaWYgKHJlZmVyZW5jZUVsZW1lbnQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGNvbXBvc2VkUGF0aC5pbmNsdWRlcyhyZWZlcmVuY2VFbGVtZW50KSB8fCBjb21wb3NlZFBhdGguaW5jbHVkZXMoYWN0aXZlVG9vbHRpcCkpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnBvaW50ZXJMZWF2ZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xlYXJIb3ZlclRpbWVvdXQoKTtcbiAgICAgIHRoaXMuY2xvc2VIb3ZlcmVkVG9vbHRpcCgpO1xuICAgIH07XG4gICAgdGhpcy5wb2ludGVyTW92ZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHRoaXMuY2xvc2VIb3ZlcmVkVG9vbHRpcCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLnF1ZXJ5VG9vbHRpcChjb21wb3NlZFBhdGgpO1xuICAgICAgaWYgKHRoaXMucGF0aEhhc09wZW5Ub29sdGlwKHRvb2x0aXAsIGNvbXBvc2VkUGF0aCkpIHtcbiAgICAgICAgdGhpcy5jbGVhckhvdmVyVGltZW91dCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodG9vbHRpcCA9PT0gdGhpcy5jbGlja2VkVG9vbHRpcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodG9vbHRpcCAhPT0gdGhpcy5ob3ZlcmVkVG9vbHRpcCkge1xuICAgICAgICB0aGlzLmNsZWFySG92ZXJPcGVuVGltZW91dCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5ob3ZlcmVkVG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgICBpZiAodG9vbHRpcCkge1xuICAgICAgICB0aGlzLm9wZW5Ib3ZlcmVkVG9vbHRpcCh0b29sdGlwKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUb29sdGlwPy5vcGVuKSB7XG4gICAgICAgIHRoaXMuY2xvc2VIb3ZlcmVkVG9vbHRpcCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jbGlja2VkVG9vbHRpcCA9IG51bGw7XG4gICAgfTtcbiAgICB0aGlzLmNsaWNrSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5jbGlja2VkVG9vbHRpcCA9IG51bGw7XG4gICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLnF1ZXJ5VG9vbHRpcChjb21wb3NlZFBhdGgpO1xuICAgICAgaWYgKHRoaXMucGF0aEhhc09wZW5Ub29sdGlwKHRvb2x0aXAsIGNvbXBvc2VkUGF0aCkpIHtcbiAgICAgICAgdGhpcy5jbGVhckhvdmVyVGltZW91dCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmNsb3NlQWN0aXZlVG9vbHRpcCgpO1xuICAgICAgaWYgKCF0b29sdGlwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xlYXJIb3ZlclRpbWVvdXQoKTtcbiAgICAgIGlmICh0b29sdGlwLmNsb3NlT25DbGljaykge1xuICAgICAgICB0aGlzLmNsaWNrZWRUb29sdGlwID0gdG9vbHRpcDtcbiAgICAgICAgdGhpcy50b2dnbGVUb29sdGlwKHRvb2x0aXAsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy50b2dnbGVUb29sdGlwKHRvb2x0aXAsIHRydWUpO1xuICAgIH07XG4gICAgdGhpcy5ibHVySGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VBY3RpdmVUb29sdGlwKCk7XG4gICAgfTtcbiAgICB0aGlzLmZvY3VzSW5IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjb21wb3NlZFBhdGggPSBldmVudC5jb21wb3NlZFBhdGgoKTtcbiAgICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLnF1ZXJ5VG9vbHRpcChjb21wb3NlZFBhdGgpO1xuICAgICAgaWYgKHRoaXMucGF0aEhhc09wZW5Ub29sdGlwKHRvb2x0aXAsIGNvbXBvc2VkUGF0aCkpIHtcbiAgICAgICAgdGhpcy5jbGVhckhvdmVyVGltZW91dCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodG9vbHRpcCA9PT0gdGhpcy5jbGlja2VkVG9vbHRpcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmNsaWNrZWRUb29sdGlwID0gbnVsbDtcbiAgICAgIHRoaXMuY2xvc2VUb29sdGlwSWZOb3RBY3RpdmUodG9vbHRpcCk7XG4gICAgICBpZiAoIXRvb2x0aXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy50b2dnbGVGb2N1c2VkVG9vbHRpcCh0b29sdGlwLCB0cnVlKTtcbiAgICB9O1xuICAgIHRoaXMub3BlbkhvdmVyZWRUb29sdGlwID0gKHRvb2x0aXApID0+IHtcbiAgICAgIHRoaXMuaG92ZXJPcGVuVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuaG92ZXJPcGVuVGltZW91dCA9PT0gbnVsbCB8fCB0b29sdGlwICE9PSB0aGlzLmhvdmVyZWRUb29sdGlwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuY2xlYXJIb3ZlckNsb3NlVGltZW91dCgpO1xuICAgICAgICAgIHRoaXMuY2xvc2VUb29sdGlwSWZOb3RBY3RpdmUodG9vbHRpcCk7XG4gICAgICAgICAgdGhpcy50b2dnbGVUb29sdGlwKHRvb2x0aXAsIHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2x0aXA/Lm9wZW4gPyBUT09MVElQX1FVSUNLX09QRU5fREVMQVlfTVMgOiBUT09MVElQX09QRU5fREVMQVlfTVNcbiAgICAgICk7XG4gICAgfTtcbiAgICB0aGlzLmNsb3NlSG92ZXJlZFRvb2x0aXAgPSAoKSA9PiB7XG4gICAgICB0aGlzLmhvdmVyQ2xvc2VUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ob3ZlckNsb3NlVGltZW91dCA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlQWN0aXZlVG9vbHRpcCgpO1xuICAgICAgfSwgVE9PTFRJUF9DTE9TRV9ERUxBWV9NUyk7XG4gICAgfTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVnaXN0ZXJFbGVtZW50KHJlZmVyZW5jZUVsLCB0b29sdGlwKSB7XG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudENvdW50Kys7XG4gICAgdGhpcy5yZWdpc3RlcmVkRWxlbWVudHMuc2V0KHJlZmVyZW5jZUVsLCB0b29sdGlwKTtcbiAgICBjb25zdCBzaGFkb3dSb290ID0gdGhpcy5nZXRSZWZlcmVuY2VFbFNoYWRvd1Jvb3ROb2RlKHJlZmVyZW5jZUVsKTtcbiAgICBpZiAoc2hhZG93Um9vdCkge1xuICAgICAgdGhpcy5yZWdpc3RlclNoYWRvd1Jvb3Qoc2hhZG93Um9vdCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRFbGVtZW50Q291bnQgPT09IDEpIHtcbiAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG4gICAgfVxuICB9XG4gIHVucmVnaXN0ZXJFbGVtZW50KHJlZmVyZW5jZUVsKSB7XG4gICAgY29uc3Qgc2hhZG93Um9vdCA9IHRoaXMuZ2V0UmVmZXJlbmNlRWxTaGFkb3dSb290Tm9kZShyZWZlcmVuY2VFbCk7XG4gICAgaWYgKHNoYWRvd1Jvb3QpIHtcbiAgICAgIHRoaXMudW5yZWdpc3RlclNoYWRvd1Jvb3Qoc2hhZG93Um9vdCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRFbGVtZW50cy5kZWxldGUocmVmZXJlbmNlRWwpKSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyZWRFbGVtZW50Q291bnQtLTtcbiAgICB9XG4gICAgaWYgKHRoaXMucmVnaXN0ZXJlZEVsZW1lbnRDb3VudCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH1cbiAgcGF0aEhhc09wZW5Ub29sdGlwKHRvb2x0aXAsIGNvbXBvc2VkUGF0aCkge1xuICAgIGNvbnN0IHsgYWN0aXZlVG9vbHRpcCB9ID0gdGhpcztcbiAgICByZXR1cm4gYWN0aXZlVG9vbHRpcD8ub3BlbiAmJiBjb21wb3NlZFBhdGguaW5jbHVkZXMoYWN0aXZlVG9vbHRpcCkgfHwgdG9vbHRpcD8ub3BlbiAmJiBjb21wb3NlZFBhdGguaW5jbHVkZXModG9vbHRpcCk7XG4gIH1cbiAgYWRkU2hhZG93TGlzdGVuZXJzKHNoYWRvd1Jvb3QpIHtcbiAgICBzaGFkb3dSb290LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIHRoaXMuZm9jdXNJbkhhbmRsZXIpO1xuICB9XG4gIHJlbW92ZVNoYWRvd0xpc3RlbmVycyhzaGFkb3dSb290KSB7XG4gICAgc2hhZG93Um9vdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLmZvY3VzSW5IYW5kbGVyKTtcbiAgfVxuICBhZGRMaXN0ZW5lcnMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5RG93bkhhbmRsZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5wb2ludGVyTW92ZUhhbmRsZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCB0aGlzLmZvY3VzSW5IYW5kbGVyKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5ibHVySGFuZGxlcik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsZWF2ZVwiLCB0aGlzLnBvaW50ZXJMZWF2ZUhhbmRsZXIpO1xuICB9XG4gIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5rZXlEb3duSGFuZGxlcik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLnBvaW50ZXJNb3ZlSGFuZGxlcik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrSGFuZGxlcik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsIHRoaXMuZm9jdXNJbkhhbmRsZXIpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmJsdXJIYW5kbGVyKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmxlYXZlXCIsIHRoaXMucG9pbnRlckxlYXZlSGFuZGxlcik7XG4gIH1cbiAgY2xlYXJIb3Zlck9wZW5UaW1lb3V0KCkge1xuICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5ob3Zlck9wZW5UaW1lb3V0KTtcbiAgICB0aGlzLmhvdmVyT3BlblRpbWVvdXQgPSBudWxsO1xuICB9XG4gIGNsZWFySG92ZXJDbG9zZVRpbWVvdXQoKSB7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmhvdmVyQ2xvc2VUaW1lb3V0KTtcbiAgICB0aGlzLmhvdmVyQ2xvc2VUaW1lb3V0ID0gbnVsbDtcbiAgfVxuICBjbGVhckhvdmVyVGltZW91dCgpIHtcbiAgICB0aGlzLmNsZWFySG92ZXJPcGVuVGltZW91dCgpO1xuICAgIHRoaXMuY2xlYXJIb3ZlckNsb3NlVGltZW91dCgpO1xuICB9XG4gIGNsb3NlVG9vbHRpcElmTm90QWN0aXZlKHRvb2x0aXApIHtcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sdGlwICE9PSB0b29sdGlwKSB7XG4gICAgICB0aGlzLmNsb3NlQWN0aXZlVG9vbHRpcCgpO1xuICAgIH1cbiAgfVxuICBjbG9zZUFjdGl2ZVRvb2x0aXAoKSB7XG4gICAgY29uc3QgeyBhY3RpdmVUb29sdGlwIH0gPSB0aGlzO1xuICAgIGlmIChhY3RpdmVUb29sdGlwPy5vcGVuKSB7XG4gICAgICB0aGlzLnRvZ2dsZVRvb2x0aXAoYWN0aXZlVG9vbHRpcCwgZmFsc2UpO1xuICAgIH1cbiAgfVxuICB0b2dnbGVGb2N1c2VkVG9vbHRpcCh0b29sdGlwLCBvcGVuKSB7XG4gICAgaWYgKG9wZW4pIHtcbiAgICAgIHRoaXMuY2xlYXJIb3ZlclRpbWVvdXQoKTtcbiAgICB9XG4gICAgdGhpcy50b2dnbGVUb29sdGlwKHRvb2x0aXAsIG9wZW4pO1xuICB9XG4gIHRvZ2dsZVRvb2x0aXAodG9vbHRpcCwgb3Blbikge1xuICAgIHRvb2x0aXAub3BlbiA9IG9wZW47XG4gICAgdGhpcy5hY3RpdmVUb29sdGlwID0gb3BlbiA/IHRvb2x0aXAgOiBudWxsO1xuICB9XG4gIHJlZ2lzdGVyU2hhZG93Um9vdChzaGFkb3dSb290KSB7XG4gICAgY29uc3QgeyByZWdpc3RlcmVkU2hhZG93Um9vdENvdW50cyB9ID0gdGhpcztcbiAgICBjb25zdCBjb3VudCA9IHJlZ2lzdGVyZWRTaGFkb3dSb290Q291bnRzLmdldChzaGFkb3dSb290KTtcbiAgICBjb25zdCBuZXdDb3VudCA9IE1hdGgubWluKCh0eXBlb2YgY291bnQgPT09IFwibnVtYmVyXCIgPyBjb3VudCA6IDApICsgMSwgMSk7XG4gICAgaWYgKG5ld0NvdW50ID09PSAxKSB7XG4gICAgICB0aGlzLmFkZFNoYWRvd0xpc3RlbmVycyhzaGFkb3dSb290KTtcbiAgICB9XG4gICAgcmVnaXN0ZXJlZFNoYWRvd1Jvb3RDb3VudHMuc2V0KHNoYWRvd1Jvb3QsIG5ld0NvdW50KTtcbiAgfVxuICB1bnJlZ2lzdGVyU2hhZG93Um9vdChzaGFkb3dSb290KSB7XG4gICAgY29uc3QgeyByZWdpc3RlcmVkU2hhZG93Um9vdENvdW50cyB9ID0gdGhpcztcbiAgICBjb25zdCBjb3VudCA9IHJlZ2lzdGVyZWRTaGFkb3dSb290Q291bnRzLmdldChzaGFkb3dSb290KTtcbiAgICBjb25zdCBuZXdDb3VudCA9IE1hdGgubWF4KCh0eXBlb2YgY291bnQgPT09IFwibnVtYmVyXCIgPyBjb3VudCA6IDEpIC0gMSwgMCk7XG4gICAgaWYgKG5ld0NvdW50ID09PSAwKSB7XG4gICAgICB0aGlzLnJlbW92ZVNoYWRvd0xpc3RlbmVycyhzaGFkb3dSb290KTtcbiAgICB9XG4gICAgcmVnaXN0ZXJlZFNoYWRvd1Jvb3RDb3VudHMuc2V0KHNoYWRvd1Jvb3QsIG5ld0NvdW50KTtcbiAgfVxuICBnZXRSZWZlcmVuY2VFbFNoYWRvd1Jvb3ROb2RlKHJlZmVyZW5jZUVsKSB7XG4gICAgcmV0dXJuIHJlZmVyZW5jZUVsIGluc3RhbmNlb2YgRWxlbWVudCA/IGdldFNoYWRvd1Jvb3ROb2RlKHJlZmVyZW5jZUVsKSA6IG51bGw7XG4gIH1cbn1cbmNvbnN0IHN0eWxlcyA9IGNzc2A6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtY29sb3ItZm9jdXM6IHZhciggLS1jYWxjaXRlLWNvbG9yLWZvY3VzLCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJyYW5kKSkgKX06aG9zdHtkaXNwbGF5OmNvbnRlbnRzOy0tY2FsY2l0ZS1mbG9hdGluZy11aS16LWluZGV4OiB2YXIoLS1jYWxjaXRlLXRvb2x0aXAtei1pbmRleCwgdmFyKC0tY2FsY2l0ZS16LWluZGV4LXRvb2x0aXApKX0ucG9zaXRpb24tY29udGFpbmVye2lubGluZS1zaXplOm1heC1jb250ZW50O2Rpc3BsYXk6bm9uZTttYXgtaW5saW5lLXNpemU6MTAwdnc7bWF4LWJsb2NrLXNpemU6MTAwdmg7aW5zZXQtYmxvY2stc3RhcnQ6MDtsZWZ0OjA7ei1pbmRleDp2YXIoLS1jYWxjaXRlLWZsb2F0aW5nLXVpLXotaW5kZXgpfUBzdGFydGluZy1zdHlsZXsucG9zaXRpb24tY29udGFpbmVye29wYWNpdHk6MDtpbnNldC1ibG9jay1zdGFydDowO2xlZnQ6MH19LnBvc2l0aW9uLWNvbnRhaW5lcnttYXgtaW5saW5lLXNpemU6dmFyKC0tY2FsY2l0ZS10b29sdGlwLW1heC1zaXplLXgsIDIwcmVtKTttYXgtYmxvY2stc2l6ZToyMHJlbX0ucG9zaXRpb24tY29udGFpbmVyIC5jYWxjaXRlLWZsb2F0aW5nLXVpLWFuaW17cG9zaXRpb246cmVsYXRpdmU7dHJhbnNpdGlvbi1kdXJhdGlvbjp2YXIoLS1jYWxjaXRlLWZsb2F0aW5nLXVpLXRyYW5zaXRpb24pO3RyYW5zaXRpb24tcHJvcGVydHk6aW5zZXQtYmxvY2stc3RhcnQsbGVmdCxvcGFjaXR5LGRpc3BsYXk7dHJhbnNpdGlvbi1iZWhhdmlvcjphbGxvdy1kaXNjcmV0ZTtvcGFjaXR5OjA7Ym94LXNoYWRvdzowIDAgMTZweCAjMDAwMDAwMjk7ei1pbmRleDp2YXIoLS1jYWxjaXRlLXotaW5kZXgpO2JvcmRlci1yYWRpdXM6LjI1cmVtfS5wb3NpdGlvbi1jb250YWluZXJbZGF0YS1wbGFjZW1lbnRePWJvdHRvbV0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtpbnNldC1ibG9jay1zdGFydDotNXB4fS5wb3NpdGlvbi1jb250YWluZXJbZGF0YS1wbGFjZW1lbnRePXRvcF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtpbnNldC1ibG9jay1zdGFydDo1cHh9LnBvc2l0aW9uLWNvbnRhaW5lcltkYXRhLXBsYWNlbWVudF49bGVmdF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtsZWZ0OjVweH0ucG9zaXRpb24tY29udGFpbmVyW2RhdGEtcGxhY2VtZW50Xj1yaWdodF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtsZWZ0Oi01cHh9LnBvc2l0aW9uLWNvbnRhaW5lcltkYXRhLXBsYWNlbWVudF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbS0tYWN0aXZle29wYWNpdHk6MTtpbnNldC1ibG9jay1zdGFydDowO2xlZnQ6MH1Ac3RhcnRpbmctc3R5bGV7LnBvc2l0aW9uLWNvbnRhaW5lcltkYXRhLXBsYWNlbWVudF0gLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbS0tYWN0aXZle29wYWNpdHk6MH19LmNhbGNpdGUtZmxvYXRpbmctdWktYXJyb3d7cG9pbnRlci1ldmVudHM6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OmNhbGModmFyKC0tY2FsY2l0ZS16LWluZGV4KSAqIC0xKTtmaWxsOnZhcigtLWNhbGNpdGUtY29sb3ItZm9yZWdyb3VuZC0xKX0uY2FsY2l0ZS1mbG9hdGluZy11aS1hcnJvd19fc3Ryb2tle3N0cm9rZTp2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKX0uY29udGFpbmVye3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOi43NXJlbSAxcmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MS4zNzU7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pO3dvcmQtd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZDtib3JkZXItcmFkaXVzOnZhcigtLWNhbGNpdGUtdG9vbHRpcC1jb3JuZXItcmFkaXVzLCB2YXIoLS1jYWxjaXRlLWNvcm5lci1yYWRpdXMtcm91bmQpKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXRvb2x0aXAtdGV4dC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci10ZXh0LTEpKTt0ZXh0LWFsaWduOnN0YXJ0fS5wb3NpdGlvbi1jb250YWluZXIgLmNhbGNpdGUtZmxvYXRpbmctdWktYW5pbXtib3JkZXItd2lkdGg6MXB4O2JvcmRlci1zdHlsZTpzb2xpZDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdG9vbHRpcC1iYWNrZ3JvdW5kLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWZvcmVncm91bmQtMSkpO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXRvb2x0aXAtYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1jYWxjaXRlLXRvb2x0aXAtY29ybmVyLXJhZGl1cywgdmFyKC0tY2FsY2l0ZS1jb3JuZXItcmFkaXVzLXJvdW5kKSl9LmNhbGNpdGUtZmxvYXRpbmctdWktYXJyb3d7ZmlsbDp2YXIoLS1jYWxjaXRlLXRvb2x0aXAtYmFja2dyb3VuZC1jb2xvciwgdmFyKC0tY2FsY2l0ZS1jb2xvci1mb3JlZ3JvdW5kLTEpKX0uY2FsY2l0ZS1mbG9hdGluZy11aS1hcnJvd19fc3Ryb2tle3N0cm9rZTp2YXIoLS1jYWxjaXRlLXRvb2x0aXAtYm9yZGVyLWNvbG9yLCB2YXIoLS1jYWxjaXRlLWNvbG9yLWJvcmRlci0zKSl9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9YDtcbmNvbnN0IG1hbmFnZXIgPSBuZXcgVG9vbHRpcE1hbmFnZXIoKTtcbmNsYXNzIFRvb2x0aXAgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICB0aGlzLmFycm93UmVmID0gY3JlYXRlUmVmKCk7XG4gICAgdGhpcy5ndWlkID0gSURTLmhvc3QoZ3VpZCgpKTtcbiAgICB0aGlzLnRyYW5zaXRpb25Qcm9wID0gXCJvcGFjaXR5XCI7XG4gICAgdGhpcy5mbG9hdGluZ0xheW91dCA9IFwidmVydGljYWxcIjtcbiAgICB0aGlzLmNsb3NlT25DbGljayA9IGZhbHNlO1xuICAgIHRoaXMub2Zmc2V0RGlzdGFuY2UgPSBkZWZhdWx0T2Zmc2V0RGlzdGFuY2U7XG4gICAgdGhpcy5vZmZzZXRTa2lkZGluZyA9IDA7XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgdGhpcy5vdmVybGF5UG9zaXRpb25pbmcgPSBcImFic29sdXRlXCI7XG4gICAgdGhpcy5wbGFjZW1lbnQgPSBcImF1dG9cIjtcbiAgICB0aGlzLmNhbGNpdGVUb29sdGlwQmVmb3JlQ2xvc2UgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZVRvb2x0aXBCZWZvcmVPcGVuID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgICB0aGlzLmNhbGNpdGVUb29sdGlwQ2xvc2UgPSBjcmVhdGVFdmVudCh7IGNhbmNlbGFibGU6IGZhbHNlIH0pO1xuICAgIHRoaXMuY2FsY2l0ZVRvb2x0aXBPcGVuID0gY3JlYXRlRXZlbnQoeyBjYW5jZWxhYmxlOiBmYWxzZSB9KTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgZmxvYXRpbmdMYXlvdXQ6IFsxNiwge30sIHsgc3RhdGU6IHRydWUgfV0sIHJlZmVyZW5jZUVsOiBbMTYsIHt9LCB7IHN0YXRlOiB0cnVlIH1dLCBjbG9zZU9uQ2xpY2s6IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBsYWJlbDogMSwgb2Zmc2V0RGlzdGFuY2U6IFsxMSwge30sIHsgdHlwZTogTnVtYmVyLCByZWZsZWN0OiB0cnVlIH1dLCBvZmZzZXRTa2lkZGluZzogWzExLCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBOdW1iZXIgfV0sIG9wZW46IFs3LCB7fSwgeyByZWZsZWN0OiB0cnVlLCB0eXBlOiBCb29sZWFuIH1dLCBvdmVybGF5UG9zaXRpb25pbmc6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCBwbGFjZW1lbnQ6IFszLCB7fSwgeyByZWZsZWN0OiB0cnVlIH1dLCByZWZlcmVuY2VFbGVtZW50OiAxIH07XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgfVxuICBhc3luYyByZXBvc2l0aW9uKGRlbGF5ZWQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgcmVmZXJlbmNlRWwsIHBsYWNlbWVudCwgb3ZlcmxheVBvc2l0aW9uaW5nLCBvZmZzZXREaXN0YW5jZSwgb2Zmc2V0U2tpZGRpbmcsIGFycm93UmVmLCBmbG9hdGluZ0VsIH0gPSB0aGlzO1xuICAgIHJldHVybiByZXBvc2l0aW9uKHRoaXMsIHtcbiAgICAgIGZsb2F0aW5nRWwsXG4gICAgICByZWZlcmVuY2VFbCxcbiAgICAgIG92ZXJsYXlQb3NpdGlvbmluZyxcbiAgICAgIHBsYWNlbWVudCxcbiAgICAgIG9mZnNldERpc3RhbmNlLFxuICAgICAgb2Zmc2V0U2tpZGRpbmcsXG4gICAgICBhcnJvd0VsOiBhcnJvd1JlZi52YWx1ZSxcbiAgICAgIHR5cGU6IFwidG9vbHRpcFwiXG4gICAgfSwgZGVsYXllZCk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLnNldFVwUmVmZXJlbmNlRWxlbWVudCh0cnVlKTtcbiAgfVxuICB3aWxsVXBkYXRlKGNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJvZmZzZXREaXN0YW5jZVwiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMub2Zmc2V0RGlzdGFuY2UgIT09IGRlZmF1bHRPZmZzZXREaXN0YW5jZSkgfHwgY2hhbmdlcy5oYXMoXCJvZmZzZXRTa2lkZGluZ1wiKSAmJiAodGhpcy5oYXNVcGRhdGVkIHx8IHRoaXMub2Zmc2V0U2tpZGRpbmcgIT09IDApIHx8IGNoYW5nZXMuaGFzKFwib3ZlcmxheVBvc2l0aW9uaW5nXCIpICYmICh0aGlzLmhhc1VwZGF0ZWQgfHwgdGhpcy5vdmVybGF5UG9zaXRpb25pbmcgIT09IFwiYWJzb2x1dGVcIikgfHwgY2hhbmdlcy5oYXMoXCJwbGFjZW1lbnRcIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLnBsYWNlbWVudCAhPT0gXCJhdXRvXCIpKSB7XG4gICAgICB0aGlzLnJlcG9zaXRpb24odHJ1ZSk7XG4gICAgfVxuICAgIGlmIChjaGFuZ2VzLmhhcyhcIm9wZW5cIikgJiYgKHRoaXMuaGFzVXBkYXRlZCB8fCB0aGlzLm9wZW4gIT09IGZhbHNlKSkge1xuICAgICAgdGhpcy5vcGVuSGFuZGxlcigpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlcy5oYXMoXCJyZWZlcmVuY2VFbGVtZW50XCIpKSB7XG4gICAgICB0aGlzLnNldFVwUmVmZXJlbmNlRWxlbWVudCgpO1xuICAgIH1cbiAgfVxuICBsb2FkZWQoKSB7XG4gICAgaWYgKHRoaXMucmVmZXJlbmNlRWxlbWVudCAmJiAhdGhpcy5yZWZlcmVuY2VFbCkge1xuICAgICAgdGhpcy5zZXRVcFJlZmVyZW5jZUVsZW1lbnQoKTtcbiAgICB9XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLnJlbW92ZVJlZmVyZW5jZXMoKTtcbiAgICBkaXNjb25uZWN0RmxvYXRpbmdVSSh0aGlzKTtcbiAgfVxuICBvcGVuSGFuZGxlcigpIHtcbiAgICB0b2dnbGVPcGVuQ2xvc2UodGhpcyk7XG4gICAgdGhpcy5yZXBvc2l0aW9uKHRydWUpO1xuICB9XG4gIG9uQmVmb3JlT3BlbigpIHtcbiAgICB0aGlzLmNhbGNpdGVUb29sdGlwQmVmb3JlT3Blbi5lbWl0KCk7XG4gIH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY2FsY2l0ZVRvb2x0aXBPcGVuLmVtaXQoKTtcbiAgfVxuICBvbkJlZm9yZUNsb3NlKCkge1xuICAgIHRoaXMuY2FsY2l0ZVRvb2x0aXBCZWZvcmVDbG9zZS5lbWl0KCk7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNhbGNpdGVUb29sdGlwQ2xvc2UuZW1pdCgpO1xuICAgIGhpZGVGbG9hdGluZ1VJKHRoaXMpO1xuICB9XG4gIHNldEZsb2F0aW5nRWwoZWwpIHtcbiAgICB0aGlzLmZsb2F0aW5nRWwgPSBlbDtcbiAgICBpZiAoZWwpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnNldFVwUmVmZXJlbmNlRWxlbWVudCgpKTtcbiAgICB9XG4gIH1cbiAgc2V0VHJhbnNpdGlvbkVsKGVsKSB7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnRyYW5zaXRpb25FbCA9IGVsO1xuICB9XG4gIHNldFVwUmVmZXJlbmNlRWxlbWVudCh3YXJuID0gdHJ1ZSkge1xuICAgIHRoaXMucmVtb3ZlUmVmZXJlbmNlcygpO1xuICAgIHRoaXMucmVmZXJlbmNlRWwgPSBnZXRFZmZlY3RpdmVSZWZlcmVuY2VFbGVtZW50KHRoaXMuZWwpO1xuICAgIGNvbm5lY3RGbG9hdGluZ1VJKHRoaXMpO1xuICAgIGNvbnN0IHsgZWwsIHJlZmVyZW5jZUVsZW1lbnQsIHJlZmVyZW5jZUVsIH0gPSB0aGlzO1xuICAgIGlmICh3YXJuICYmIHJlZmVyZW5jZUVsZW1lbnQgJiYgIXJlZmVyZW5jZUVsKSB7XG4gICAgICBjb25zb2xlLndhcm4oYCR7ZWwudGFnTmFtZX06IHJlZmVyZW5jZS1lbGVtZW50IGlkIFwiJHtyZWZlcmVuY2VFbGVtZW50fVwiIHdhcyBub3QgZm91bmQuYCwge1xuICAgICAgICBlbFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuYWRkUmVmZXJlbmNlcygpO1xuICB9XG4gIGdldElkKCkge1xuICAgIHJldHVybiB0aGlzLmVsLmlkIHx8IHRoaXMuZ3VpZDtcbiAgfVxuICBhZGRSZWZlcmVuY2VzKCkge1xuICAgIGNvbnN0IHsgcmVmZXJlbmNlRWwgfSA9IHRoaXM7XG4gICAgaWYgKCFyZWZlcmVuY2VFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpZCA9IHRoaXMuZ2V0SWQoKTtcbiAgICBpZiAoXCJzZXRBdHRyaWJ1dGVcIiBpbiByZWZlcmVuY2VFbCkge1xuICAgICAgcmVmZXJlbmNlRWwuc2V0QXR0cmlidXRlKEFSSUFfREVTQ1JJQkVEX0JZLCBpZCk7XG4gICAgfVxuICAgIG1hbmFnZXIucmVnaXN0ZXJFbGVtZW50KHJlZmVyZW5jZUVsLCB0aGlzLmVsKTtcbiAgfVxuICByZW1vdmVSZWZlcmVuY2VzKCkge1xuICAgIGNvbnN0IHsgcmVmZXJlbmNlRWwgfSA9IHRoaXM7XG4gICAgaWYgKCFyZWZlcmVuY2VFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoXCJyZW1vdmVBdHRyaWJ1dGVcIiBpbiByZWZlcmVuY2VFbCkge1xuICAgICAgcmVmZXJlbmNlRWwucmVtb3ZlQXR0cmlidXRlKEFSSUFfREVTQ1JJQkVEX0JZKTtcbiAgICB9XG4gICAgbWFuYWdlci51bnJlZ2lzdGVyRWxlbWVudChyZWZlcmVuY2VFbCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgcmVmZXJlbmNlRWwsIGxhYmVsLCBvcGVuLCBmbG9hdGluZ0xheW91dCB9ID0gdGhpcztcbiAgICBjb25zdCBkaXNwbGF5ZWQgPSByZWZlcmVuY2VFbCAmJiBvcGVuO1xuICAgIGNvbnN0IGhpZGRlbiA9ICFkaXNwbGF5ZWQ7XG4gICAgdGhpcy5lbC5pbmVydCA9IGhpZGRlbjtcbiAgICB0aGlzLmVsLmFyaWFMYWJlbCA9IGxhYmVsO1xuICAgIHRoaXMuZWwuYXJpYUxpdmUgPSBcInBvbGl0ZVwiO1xuICAgIHNldEF0dHJpYnV0ZSh0aGlzLmVsLCBcImlkXCIsIHRoaXMuZ2V0SWQoKSk7XG4gICAgdGhpcy5lbC5yb2xlID0gXCJ0b29sdGlwXCI7XG4gICAgcmV0dXJuIGh0bWxgPGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MucG9zaXRpb25Db250YWluZXIpfSAke3JlZih0aGlzLnNldEZsb2F0aW5nRWwpfT48ZGl2IGNsYXNzPSR7c2FmZUNsYXNzTWFwKHtcbiAgICAgIFtGbG9hdGluZ0NTUy5hbmltYXRpb25dOiB0cnVlLFxuICAgICAgW0Zsb2F0aW5nQ1NTLmFuaW1hdGlvbkFjdGl2ZV06IGRpc3BsYXllZFxuICAgIH0pfSAke3JlZih0aGlzLnNldFRyYW5zaXRpb25FbCl9PiR7RmxvYXRpbmdBcnJvdyh7IGZsb2F0aW5nTGF5b3V0LCByZWY6IHRoaXMuYXJyb3dSZWYgfSl9PGRpdiBjbGFzcz0ke3NhZmVDbGFzc01hcChDU1MuY29udGFpbmVyKX0+PHNsb3Q+PC9zbG90PjwvZGl2PjwvZGl2PjwvZGl2PmA7XG4gIH1cbn1cbmN1c3RvbUVsZW1lbnQoXCJjYWxjaXRlLXRvb2x0aXBcIiwgVG9vbHRpcCk7XG5leHBvcnQge1xuICBUb29sdGlwXG59O1xuIiwiZXhwb3J0ICogZnJvbSBcIi4vY3VzdG9tRWxlbWVudC5qc1wiOyIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuaW1wb3J0IHsgbm90aGluZyB9IGZyb20gJy4uL2xpdC1odG1sLmpzJztcbmltcG9ydCB7IGRpcmVjdGl2ZSwgRGlyZWN0aXZlLCB9IGZyb20gJy4uL2RpcmVjdGl2ZS5qcyc7XG5pbXBvcnQgeyBzZXRDb21taXR0ZWRWYWx1ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZS1oZWxwZXJzLmpzJztcbmNsYXNzIEtleWVkIGV4dGVuZHMgRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5rZXkgPSBub3RoaW5nO1xuICAgIH1cbiAgICByZW5kZXIoaywgdikge1xuICAgICAgICB0aGlzLmtleSA9IGs7XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgICB1cGRhdGUocGFydCwgW2ssIHZdKSB7XG4gICAgICAgIGlmIChrICE9PSB0aGlzLmtleSkge1xuICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHBhcnQgYmVmb3JlIHJldHVybmluZyBhIHZhbHVlLiBUaGUgb25lLWFyZyBmb3JtIG9mXG4gICAgICAgICAgICAvLyBzZXRDb21taXR0ZWRWYWx1ZSBzZXRzIHRoZSB2YWx1ZSB0byBhIHNlbnRpbmVsIHdoaWNoIGZvcmNlcyBhXG4gICAgICAgICAgICAvLyBjb21taXQgdGhlIG5leHQgcmVuZGVyLlxuICAgICAgICAgICAgc2V0Q29tbWl0dGVkVmFsdWUocGFydCk7XG4gICAgICAgICAgICB0aGlzLmtleSA9IGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHY7XG4gICAgfVxufVxuLyoqXG4gKiBBc3NvY2lhdGVzIGEgcmVuZGVyYWJsZSB2YWx1ZSB3aXRoIGEgdW5pcXVlIGtleS4gV2hlbiB0aGUga2V5IGNoYW5nZXMsIHRoZVxuICogcHJldmlvdXMgRE9NIGlzIHJlbW92ZWQgYW5kIGRpc3Bvc2VkIGJlZm9yZSByZW5kZXJpbmcgdGhlIG5leHQgdmFsdWUsIGV2ZW5cbiAqIGlmIHRoZSB2YWx1ZSAtIHN1Y2ggYXMgYSB0ZW1wbGF0ZSAtIGlzIHRoZSBzYW1lLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBmb3JjaW5nIHJlLXJlbmRlcnMgb2Ygc3RhdGVmdWwgY29tcG9uZW50cywgb3Igd29ya2luZ1xuICogd2l0aCBjb2RlIHRoYXQgZXhwZWN0cyBuZXcgZGF0YSB0byBnZW5lcmF0ZSBuZXcgSFRNTCBlbGVtZW50cywgc3VjaCBhcyBzb21lXG4gKiBhbmltYXRpb24gdGVjaG5pcXVlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGtleWVkID0gZGlyZWN0aXZlKEtleWVkKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtleWVkLmpzLm1hcCIsImV4cG9ydCpmcm9tXCJsaXQtaHRtbC9kaXJlY3RpdmVzL2tleWVkLmpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZXllZC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==