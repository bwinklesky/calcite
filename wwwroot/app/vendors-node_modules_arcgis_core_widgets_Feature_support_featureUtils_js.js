export const __webpack_id__ = "vendors-node_modules_arcgis_core_widgets_Feature_support_featureUtils_js";
export const __webpack_ids__ = ["vendors-node_modules_arcgis_core_widgets_Feature_support_featureUtils_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   applyTextFormattingHTML: () => (/* binding */ le),
/* harmony export */   createFieldInfoMap: () => (/* binding */ ie),
/* harmony export */   findRelatedLayer: () => (/* binding */ Te),
/* harmony export */   findUtilityNetwork: () => (/* binding */ Fe),
/* harmony export */   fixTokens: () => (/* binding */ Q),
/* harmony export */   formatAttributes: () => (/* binding */ se),
/* harmony export */   formatEditInfo: () => (/* binding */ ne),
/* harmony export */   formatValueToFieldInfo: () => (/* binding */ W),
/* harmony export */   getAllFieldInfos: () => (/* binding */ oe),
/* harmony export */   getFieldInfo: () => (/* binding */ ee),
/* harmony export */   getFieldInfoLabel: () => (/* binding */ A),
/* harmony export */   getFixedFieldName: () => (/* binding */ M),
/* harmony export */   getFixedFieldNames: () => (/* binding */ R),
/* harmony export */   getSourceLayer: () => (/* binding */ L),
/* harmony export */   graphicCallback: () => (/* binding */ q),
/* harmony export */   htmlEntities: () => (/* binding */ ae),
/* harmony export */   isAssociatedFeatureSupportedLayer: () => (/* binding */ K),
/* harmony export */   isExpressionField: () => (/* binding */ E),
/* harmony export */   isFeatureSupportedLayer: () => (/* binding */ H),
/* harmony export */   isGraphicForRelatableFeatureSupportedLayer: () => (/* binding */ V),
/* harmony export */   isRelatableFeatureSupportedLayer: () => (/* binding */ J),
/* harmony export */   isRelatableLayer: () => (/* binding */ B),
/* harmony export */   isRelatedField: () => (/* binding */ pe),
/* harmony export */   preLayerQueryCallback: () => (/* binding */ Ie),
/* harmony export */   preRequestCallback: () => (/* binding */ we),
/* harmony export */   querySourceLayer: () => (/* binding */ fe),
/* harmony export */   queryUpdatedFeature: () => (/* binding */ de),
/* harmony export */   shouldOpenInNewTab: () => (/* binding */ x),
/* harmony export */   substituteAttributes: () => (/* binding */ z),
/* harmony export */   substituteFieldsInLinksAndAttributes: () => (/* binding */ D)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/string.js */ "./node_modules/@arcgis/core/core/string.js");
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../intl/date.js */ "./node_modules/@arcgis/core/intl/date.js");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../intl/number.js */ "./node_modules/@arcgis/core/intl/number.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../smartMapping/support/utils.js */ "./node_modules/@arcgis/core/smartMapping/support/utils.js");
/* harmony import */ var _support_loadArcade_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../support/loadArcade.js */ "./node_modules/@arcgis/core/support/loadArcade.js");
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../time/timeZoneUtils.js */ "./node_modules/@arcgis/core/time/timeZoneUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const y="esri.widgets.Feature.support.featureUtils",m=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(y),b=/href=(""|'')/gi,g=/(\{([^{\r\n]+)\})/g,h=/'/g,I=/^\s*expression\//i,w=/(\n)/gi,T=/[\u00A0-\u9999<>&]/gim,F=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,N=/^(?:mailto:|tel:)/,j="relationships/",Z=(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_3__.convertDateFormatToIntlOptions)("short-date-short-time");function L(e){if(null!=e)return(e.sourceLayer||e.layer)??void 0}async function q({type:e,value:t,event:r}){try{return"function"==typeof t?t(r):await t}catch(n){return void m().error("error",`An error occurred when calling the "${e}" function`,{error:n,graphic:r.graphic,value:t})}}function x(e=""){if(e)return!N.test(e.trim().toLowerCase())}function E(e){return!!e&&I.test(e)}function v(e,t){if(!t||!E(t)||!e)return;const r=t.replace(I,"").toLowerCase();return e.find((({name:e})=>e.toLowerCase()===r))}function A(e,t){const r=v(t,e?.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function C(e,t){const r=t.get(e.toLowerCase());return`{${r?.fieldName||e}}`}function U(e){return e.replaceAll(b,"")}function M(e,t){const r=k(t,e);return r?r.name:e}function R(e,t){return e&&e.map((e=>M(e,t)))}function k(e,t){return e&&"function"==typeof e.getField&&t?e.getField(t)??null:null}function $(e){return`${e}`.trim()}function D({attributes:e,globalAttributes:t,layer:r,text:n,expressionAttributes:i,fieldInfoMap:o}){return n?z({formattedAttributes:t,template:P(n,{...t,...i,...e},r),fieldInfoMap:o}):""}function z({formattedAttributes:e,template:r,fieldInfoMap:n}){return $(U((0,_core_string_js__WEBPACK_IMPORTED_MODULE_2__.replace)((0,_core_string_js__WEBPACK_IMPORTED_MODULE_2__.replace)(r,(e=>C(e,n))),e)))}function O(e,t,r=!1){const n=t[e];if("string"==typeof n){const i="%27",o=(r?encodeURIComponent(n):n).replaceAll(h,i);t[e]=o}}function G(e,t=!1){const r={...e};return Object.keys(r).forEach((e=>O(e,r,t))),r}function S(e,r,n){const i=(r=$(r))&&"{"!==r[0];return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_2__.replace)(e,G(n,i||!1))}function Q(e,t){return e.replaceAll(g,((e,r,n)=>{const i=k(t,n);return i?`{${i.name}}`:r}))}function P(e,t,r){const n=Q(e,r);return n?n.replaceAll(F,((e,r,n)=>S(e,r||n,t))):n}function _(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function H(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&("feature"===e.type||"scene"===e.type||"subtype-group"===e.type||"subtype-sublayer"===e.type||"sublayer"===e.type)&&"when"in e}function B(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function J(e){return H(e)&&B(e)}function K(e){return!(!(e&&"object"==typeof e&&"createQuery"in e&&"getField"in e&&"queryFeatureCount"in e&&"queryFeatures"in e&&"queryObjectIds"in e&&"capabilities"in e&&"fields"in e&&"fieldsIndex"in e&&"type"in e)||"feature"!==e.type&&"subtype-group"!==e.type&&"subtype-sublayer"!==e.type&&"sublayer"!==e.type||!("when"in e))&&("subtype-sublayer"===e.type&&"parent"in e&&e.parent&&"object"==typeof e.parent?"globalIdField"in e.parent:"globalIdField"in e)}function V(e){return!!e&&"object"==typeof e&&"sourceLayer"in e&&J(e.sourceLayer)}function W(e,t){const{fieldInfos:r,fieldName:n,preventPlacesFormatting:l,layer:u,timeZone:s}=t,c=ee(r,n),d=k(u,n);if(c&&!(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_5__.isRasterPixelValueField)(n)){const t=d?.type,r=c.format?.dateFormat;if("date"===t||"date-only"===t||"time-only"===t||"timestamp-offset"===t||r)return (0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_7__.formatAnyDate)(e,{format:r,fieldType:t,timeZoneOptions:{layerTimeZone:u&&"preferredTimeZone"in u?u.preferredTimeZone:null,viewTimeZone:s,datesInUnknownTimezone:!(!u||!("datesInUnknownTimezone"in u))&&!!u.datesInUnknownTimezone}})}const p=c?.format;return"string"==typeof e&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_5__.isRasterPixelValueField)(n)&&p?X(e,p):"string"==typeof(e=_(e,p))||null==e||null==p?le(e):(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(e,l?{...(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.convertNumberFormatToIntlOptions)(p),minimumFractionDigits:0,maximumFractionDigits:20}:(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.convertNumberFormatToIntlOptions)(p))}function X(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?Y(e,",",", ",t):e.includes(";")?Y(e,";","; ",t):e.includes(" ")?Y(e," "," ",t):(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(Number(e),(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.convertNumberFormatToIntlOptions)(t))}function Y(e,t,r,n){return e.trim().split(t).map((e=>(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(Number(e),(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.convertNumberFormatToIntlOptions)(n)))).join(r)}function ee(e,t){if(e?.length&&t)return e.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))}function te({fieldName:e,graphic:t,layer:r}){if(pe(e))return null;if(!r||"function"!=typeof r.getFeatureType)return null;const{typeIdField:n}=r;if(!n||e!==n)return null;const i=r.getFeatureType(t);return i?i.name:null}function re({fieldName:e,value:t,graphic:r,layer:n}){if(pe(e))return null;if(!n||"function"!=typeof n.getFieldDomain)return null;const i=r&&n.getFieldDomain(e,{feature:r,excludeImpliedDomains:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-widget-legacy-field-domain-calculation")});return i&&"coded-value"===i.type?i.getName(t):null}function ne(e,t,r,i){const{creatorField:o,creationDateField:a,editorField:l,editDateField:u}=e;if(!t)return;const s=(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_9__.getTimeZoneFormattingOptions)(i&&"preferredTimeZone"in i?i.preferredTimeZone:null,!(!i||!("datesInUnknownTimezone"in i))&&!!i.datesInUnknownTimezone,r,Z,"date"),f={...Z,...s},c=t[u];if("number"==typeof c){const e=t[l];return{type:"edit",date:(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_3__.formatDate)(c,f),user:e}}const d=t[a];if("number"==typeof d){const e=t[o];return{type:"create",date:(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_3__.formatDate)(d,f),user:e}}return null}function ie(e,t){const r=new Map;if(!e)return r;for(const n of e){if(!n.fieldName)continue;const e=M(n.fieldName,t);n.fieldName=e,r.set(e.toLowerCase(),n)}return r}function oe(e){const t=[];if(!e)return t;const{fieldInfos:r,content:n}=e;return r&&t.push(...r),n&&Array.isArray(n)?(n.forEach((e=>{if("fields"===e.type){const r=e?.fieldInfos;r&&t.push(...r)}})),t):t}function ae(e){return e.replaceAll(T,(e=>`&#${e.charCodeAt(0)};`))}function le(e){return"string"==typeof e?e.replaceAll(w,'<br class="esri-text-new-line" />'):e}function ue(e){const{value:t,fieldName:r,fieldInfos:n,fieldInfoMap:i,layer:o,graphic:a,timeZone:l}=e;if(null==t)return"";const s=re({fieldName:r,value:t,graphic:a,layer:o});if(s)return s;const d=te({fieldName:r,graphic:a,layer:o});if(d)return d;if(i.get(r.toLowerCase()))return W(t,{fieldInfos:n||Array.from(i.values()),fieldName:r,layer:o,timeZone:l});const p=o?.fieldsIndex?.get(r);return p&&((0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_7__.isAnyDateField)(p)||(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_5__.isTimeOnlyField)(p))?(0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_7__.formatAnyDate)(t,{fieldType:p.type,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:l,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}}):le(t)}function se({fieldInfos:e,attributes:t,layer:r,graphic:n,fieldInfoMap:i,relatedInfos:o,timeZone:a}){const l={};return o?.forEach((t=>be({attributes:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:e,layer:r,timeZone:a}))),t&&Object.keys(t).forEach((o=>{const u=t[o];l[o]=ue({fieldName:o,fieldInfos:e,fieldInfoMap:i,layer:r,value:u,graphic:n,timeZone:a})})),l}async function fe(e,t){const{layer:r,graphic:n,outFields:i,objectIds:o,returnGeometry:a,spatialReference:l}=e,u=o[0];if("number"!=typeof u&&"string"!=typeof u){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:r,graphic:n,objectId:u,requiredFields:i};return m().warn(e,t),null}if(!(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_6__.getEffectiveLayerCapabilities)(r)?.operations?.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:r,graphic:n,requiredFields:i,returnGeometry:a};return m().warn(e,t),null}const f=r.createQuery();f.objectIds=o,f.outFields=i?.length?i:[r.objectIdField],f.returnGeometry=!!a,f.returnZ=!!a,f.returnM=!!a,f.outSpatialReference=l;return(await r.queryFeatures(f,t)).features[0]}async function ce(e){if(!e.expressionInfos?.length)return!1;const t=await (0,_support_loadArcade_js__WEBPACK_IMPORTED_MODULE_8__.loadArcade)(),{arcadeUtils:{hasGeometryFunctions:r}}=t;return r(e)}async function de({graphic:e,popupTemplate:t,layer:r,spatialReference:n},i){if(!r||!t)return;if("function"==typeof r.load&&await r.load(i),!e.attributes)return;const o=r.objectIdField,a=e.attributes[o];if(null==a)return;const u=[a],s=await t.getRequiredFields(r.fieldsIndex),f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_5__.featureHasFields)(e,s),c=f?[]:s.includes(o)?s:[...s,o],d=t.returnGeometry||await ce(t);if(f&&!d)return;const p=await fe({layer:r,graphic:e,outFields:c,objectIds:u,returnGeometry:d,spatialReference:n},i);p&&(p.geometry&&(e.geometry=p.geometry),p.attributes&&(e.attributes={...e.attributes,...p.attributes}))}function pe(e=""){return!!e&&e.includes(j)}function ye(e){return e?`${j}${e.layerId}/${e.fieldName}`:""}function me({attributes:e,graphic:t,relatedInfo:r,fieldInfos:n,fieldInfoMap:i,layer:o,timeZone:a}){e&&t&&r&&Object.keys(t.attributes).forEach((l=>{const u=ye({layerId:r.relation.id.toString(),fieldName:l}),s=t.attributes[l];e[u]=ue({fieldName:u,fieldInfos:n,fieldInfoMap:i,layer:o,value:s,graphic:t,timeZone:a})}))}function be({attributes:e,relatedInfo:t,fieldInfoMap:r,fieldInfos:n,layer:i,timeZone:o}){e&&t&&(t.relatedFeatures?.forEach((a=>me({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:r,fieldInfos:n,layer:i,timeZone:o}))),t.relatedStatsFeatures?.forEach((a=>me({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:r,fieldInfos:n,layer:i,timeZone:o}))))}const ge=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},he=({layer:e,method:t,query:r,definitionExpression:n})=>{if(!e.capabilities?.query?.supportsCacheHint||"attachments"===t)return;const i=null!=r.where?r.where:null,o=null!=r.geometry?r.geometry:null;ge(n)||ge(i)||"extent"===o?.type||"tile"===r.resultType||(r.cacheHint=!0)},Ie=({query:e,layer:t,method:r})=>{he({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})},we=({queryPayload:e,layer:t,method:r})=>{he({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??""}`})};function Te(e,t,r){return e&&t&&r?"sublayer"===t.type?je({layers:t.layer?.allSublayers,map:e,relatedLayer:t,relationship:r})||je({layers:t.layer?.subtables,map:e,relatedLayer:t,relationship:r}):je({layers:e.allLayers,map:e,relatedLayer:t,relationship:r})||je({layers:e.allTables,map:e,relatedLayer:t,relationship:r}):null}function Fe(e,t){return e&&"utilityNetworks"in e&&t?e.utilityNetworks?.find((e=>e.isUtilityLayer(t))):null}function Ne(e,t){return e?.allTables.find((e=>"feature"===e.type&&e.layerId===t.id&&e.url===t.layer?.url))}function je({map:e,relationship:t,relationship:{relatedTableId:r},relatedLayer:n,layers:i}){if(!i)return null;for(const o of i){if("map-image"===o.type){const r=je({layers:o.sublayers,map:e,relatedLayer:n,relationship:t})||je({layers:o.subtables,map:e,relatedLayer:n,relationship:t});if(r)return r;continue}if(!J(o))continue;if("sublayer"===n.type){if(o!==n&&o.id===r)return o.isTable?Ne(e,o):o;continue}const i="scene"===n.type&&n.associatedLayer?n.associatedLayer.url:n.url;if(!i)return null;if("sublayer"!==o.type){if(o!==n&&o.url===i&&o.layerId===r)return o}else if(o!==n&&o.layer?.url===i&&o.id===r)return o.isTable?Ne(e,o):o}return null}


/***/ })

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfd2lkZ2V0c19GZWF0dXJlX3N1cHBvcnRfZmVhdHVyZVV0aWxzX2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeXVCLDBEQUEwRCx1REFBQyx1Q0FBdUMsSUFBSSxTQUFTLDBKQUEwSiw2RUFBQywwQkFBMEIsY0FBYyxrREFBa0Qsa0JBQWtCLHVCQUF1QixFQUFFLElBQUksd0NBQXdDLFNBQVMscUVBQXFFLEVBQUUsYUFBYSxrQ0FBa0MsR0FBRyxpQkFBaUIsMkNBQTJDLGNBQWMscUJBQXFCLGdCQUFnQix3QkFBd0Isc0NBQXNDLGlCQUFpQixPQUFPLHlCQUF5QixnQkFBZ0IsMEJBQTBCLG1EQUFtRCxnQkFBZ0IsK0JBQStCLFFBQVEsRUFBRSxpQkFBaUIsRUFBRSxjQUFjLDBCQUEwQixnQkFBZ0IsZUFBZSxrQkFBa0IsZ0JBQWdCLDZCQUE2QixnQkFBZ0Isb0VBQW9FLGNBQWMsU0FBUyxFQUFFLFNBQVMsWUFBWSxxRkFBcUYsRUFBRSxZQUFZLG9DQUFvQyxlQUFlLG1CQUFtQixLQUFLLFlBQVksZ0RBQWdELEVBQUUsV0FBVyx3REFBQyxDQUFDLHdEQUFDLHFCQUFxQixxQkFBcUIsYUFBYSx1QkFBdUIsNERBQTRELFFBQVEsbUJBQW1CLFNBQVMsTUFBTSwrQ0FBK0Msa0JBQWtCLG9CQUFvQixTQUFTLE9BQU8sd0RBQUMsZUFBZSxnQkFBZ0IsaUNBQWlDLGVBQWUsV0FBVyxFQUFFLFFBQVEsSUFBSSxHQUFHLGtCQUFrQixlQUFlLGtEQUFrRCxnQkFBZ0Isd0ZBQXdGLGtCQUFrQixzQkFBc0IsU0FBUyxjQUFjLDZTQUE2UyxjQUFjLHVMQUF1TCxjQUFjLGtCQUFrQixjQUFjLDBiQUEwYixjQUFjLG1FQUFtRSxnQkFBZ0IsTUFBTSxzRUFBc0Usc0JBQXNCLE9BQU8sc0ZBQUMsS0FBSyx1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bXMvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3dpZGdldHMvRmVhdHVyZS9zdXBwb3J0L2ZlYXR1cmVVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3JlcGxhY2UgYXMgdH1mcm9tXCIuLi8uLi8uLi9jb3JlL3N0cmluZy5qc1wiO2ltcG9ydHtjb252ZXJ0RGF0ZUZvcm1hdFRvSW50bE9wdGlvbnMgYXMgcixmb3JtYXREYXRlIGFzIG59ZnJvbVwiLi4vLi4vLi4vaW50bC9kYXRlLmpzXCI7aW1wb3J0e2Zvcm1hdE51bWJlciBhcyBpLGNvbnZlcnROdW1iZXJGb3JtYXRUb0ludGxPcHRpb25zIGFzIG99ZnJvbVwiLi4vLi4vLi4vaW50bC9udW1iZXIuanNcIjtpbXBvcnR7aXNSYXN0ZXJQaXhlbFZhbHVlRmllbGQgYXMgYSxmZWF0dXJlSGFzRmllbGRzIGFzIGwsaXNUaW1lT25seUZpZWxkIGFzIHV9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2ltcG9ydHtnZXRFZmZlY3RpdmVMYXllckNhcGFiaWxpdGllcyBhcyBzfWZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2xheWVyVXRpbHMuanNcIjtpbXBvcnR7Zm9ybWF0QW55RGF0ZSBhcyBmLGlzQW55RGF0ZUZpZWxkIGFzIGN9ZnJvbVwiLi4vLi4vLi4vc21hcnRNYXBwaW5nL3N1cHBvcnQvdXRpbHMuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBkfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvbG9hZEFyY2FkZS5qc1wiO2ltcG9ydHtnZXRUaW1lWm9uZUZvcm1hdHRpbmdPcHRpb25zIGFzIHB9ZnJvbVwiLi4vLi4vLi4vdGltZS90aW1lWm9uZVV0aWxzLmpzXCI7Y29uc3QgeT1cImVzcmkud2lkZ2V0cy5GZWF0dXJlLnN1cHBvcnQuZmVhdHVyZVV0aWxzXCIsbT0oKT0+ZS5nZXRMb2dnZXIoeSksYj0vaHJlZj0oXCJcInwnJykvZ2ksZz0vKFxceyhbXntcXHJcXG5dKylcXH0pL2csaD0vJy9nLEk9L15cXHMqZXhwcmVzc2lvblxcLy9pLHc9LyhcXG4pL2dpLFQ9L1tcXHUwMEEwLVxcdTk5OTk8PiZdL2dpbSxGPS9ocmVmXFxzKj1cXHMqKD86XCIoW15cIl0rKVwifCcoW14nXSspJykvZ2ksTj0vXig/Om1haWx0bzp8dGVsOikvLGo9XCJyZWxhdGlvbnNoaXBzL1wiLFo9cihcInNob3J0LWRhdGUtc2hvcnQtdGltZVwiKTtmdW5jdGlvbiBMKGUpe2lmKG51bGwhPWUpcmV0dXJuKGUuc291cmNlTGF5ZXJ8fGUubGF5ZXIpPz92b2lkIDB9YXN5bmMgZnVuY3Rpb24gcSh7dHlwZTplLHZhbHVlOnQsZXZlbnQ6cn0pe3RyeXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Qocik6YXdhaXQgdH1jYXRjaChuKXtyZXR1cm4gdm9pZCBtKCkuZXJyb3IoXCJlcnJvclwiLGBBbiBlcnJvciBvY2N1cnJlZCB3aGVuIGNhbGxpbmcgdGhlIFwiJHtlfVwiIGZ1bmN0aW9uYCx7ZXJyb3I6bixncmFwaGljOnIuZ3JhcGhpYyx2YWx1ZTp0fSl9fWZ1bmN0aW9uIHgoZT1cIlwiKXtpZihlKXJldHVybiFOLnRlc3QoZS50cmltKCkudG9Mb3dlckNhc2UoKSl9ZnVuY3Rpb24gRShlKXtyZXR1cm4hIWUmJkkudGVzdChlKX1mdW5jdGlvbiB2KGUsdCl7aWYoIXR8fCFFKHQpfHwhZSlyZXR1cm47Y29uc3Qgcj10LnJlcGxhY2UoSSxcIlwiKS50b0xvd2VyQ2FzZSgpO3JldHVybiBlLmZpbmQoKCh7bmFtZTplfSk9PmUudG9Mb3dlckNhc2UoKT09PXIpKX1mdW5jdGlvbiBBKGUsdCl7Y29uc3Qgcj12KHQsZT8uZmllbGROYW1lKTtyZXR1cm4gcj9yLnRpdGxlfHxudWxsOmU/ZS5sYWJlbHx8ZS5maWVsZE5hbWU6bnVsbH1mdW5jdGlvbiBDKGUsdCl7Y29uc3Qgcj10LmdldChlLnRvTG93ZXJDYXNlKCkpO3JldHVybmB7JHtyPy5maWVsZE5hbWV8fGV9fWB9ZnVuY3Rpb24gVShlKXtyZXR1cm4gZS5yZXBsYWNlQWxsKGIsXCJcIil9ZnVuY3Rpb24gTShlLHQpe2NvbnN0IHI9ayh0LGUpO3JldHVybiByP3IubmFtZTplfWZ1bmN0aW9uIFIoZSx0KXtyZXR1cm4gZSYmZS5tYXAoKGU9Pk0oZSx0KSkpfWZ1bmN0aW9uIGsoZSx0KXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5nZXRGaWVsZCYmdD9lLmdldEZpZWxkKHQpPz9udWxsOm51bGx9ZnVuY3Rpb24gJChlKXtyZXR1cm5gJHtlfWAudHJpbSgpfWZ1bmN0aW9uIEQoe2F0dHJpYnV0ZXM6ZSxnbG9iYWxBdHRyaWJ1dGVzOnQsbGF5ZXI6cix0ZXh0Om4sZXhwcmVzc2lvbkF0dHJpYnV0ZXM6aSxmaWVsZEluZm9NYXA6b30pe3JldHVybiBuP3ooe2Zvcm1hdHRlZEF0dHJpYnV0ZXM6dCx0ZW1wbGF0ZTpQKG4sey4uLnQsLi4uaSwuLi5lfSxyKSxmaWVsZEluZm9NYXA6b30pOlwiXCJ9ZnVuY3Rpb24geih7Zm9ybWF0dGVkQXR0cmlidXRlczplLHRlbXBsYXRlOnIsZmllbGRJbmZvTWFwOm59KXtyZXR1cm4gJChVKHQodChyLChlPT5DKGUsbikpKSxlKSkpfWZ1bmN0aW9uIE8oZSx0LHI9ITEpe2NvbnN0IG49dFtlXTtpZihcInN0cmluZ1wiPT10eXBlb2Ygbil7Y29uc3QgaT1cIiUyN1wiLG89KHI/ZW5jb2RlVVJJQ29tcG9uZW50KG4pOm4pLnJlcGxhY2VBbGwoaCxpKTt0W2VdPW99fWZ1bmN0aW9uIEcoZSx0PSExKXtjb25zdCByPXsuLi5lfTtyZXR1cm4gT2JqZWN0LmtleXMocikuZm9yRWFjaCgoZT0+TyhlLHIsdCkpKSxyfWZ1bmN0aW9uIFMoZSxyLG4pe2NvbnN0IGk9KHI9JChyKSkmJlwie1wiIT09clswXTtyZXR1cm4gdChlLEcobixpfHwhMSkpfWZ1bmN0aW9uIFEoZSx0KXtyZXR1cm4gZS5yZXBsYWNlQWxsKGcsKChlLHIsbik9Pntjb25zdCBpPWsodCxuKTtyZXR1cm4gaT9geyR7aS5uYW1lfX1gOnJ9KSl9ZnVuY3Rpb24gUChlLHQscil7Y29uc3Qgbj1RKGUscik7cmV0dXJuIG4/bi5yZXBsYWNlQWxsKEYsKChlLHIsbik9PlMoZSxyfHxuLHQpKSk6bn1mdW5jdGlvbiBfKGUsdCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJnQmJm51bGw9PXQuZGF0ZUZvcm1hdCYmKG51bGwhPXQucGxhY2VzfHxudWxsIT10LmRpZ2l0U2VwYXJhdG9yKSl7Y29uc3QgdD1OdW1iZXIoZSk7aWYoIWlzTmFOKHQpKXJldHVybiB0fXJldHVybiBlfWZ1bmN0aW9uIEgoZSl7cmV0dXJuIG51bGwhPWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImZpZWxkc0luZGV4XCJpbiBlJiZcImdlb21ldHJ5VHlwZVwiaW4gZSYmXCJnZXRGaWVsZFwiaW4gZSYmXCJsb2FkXCJpbiBlJiZcImxvYWRlZFwiaW4gZSYmXCJvYmplY3RJZEZpZWxkXCJpbiBlJiZcInNwYXRpYWxSZWZlcmVuY2VcImluIGUmJlwidHlwZVwiaW4gZSYmKFwiZmVhdHVyZVwiPT09ZS50eXBlfHxcInNjZW5lXCI9PT1lLnR5cGV8fFwic3VidHlwZS1ncm91cFwiPT09ZS50eXBlfHxcInN1YnR5cGUtc3VibGF5ZXJcIj09PWUudHlwZXx8XCJzdWJsYXllclwiPT09ZS50eXBlKSYmXCJ3aGVuXCJpbiBlfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIG51bGwhPWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImNyZWF0ZVF1ZXJ5XCJpbiBlJiZcInF1ZXJ5RmVhdHVyZUNvdW50XCJpbiBlJiZcInF1ZXJ5T2JqZWN0SWRzXCJpbiBlJiZcInF1ZXJ5UmVsYXRlZEZlYXR1cmVzXCJpbiBlJiZcInF1ZXJ5UmVsYXRlZEZlYXR1cmVzQ291bnRcImluIGUmJlwicmVsYXRpb25zaGlwc1wiaW4gZX1mdW5jdGlvbiBKKGUpe3JldHVybiBIKGUpJiZCKGUpfWZ1bmN0aW9uIEsoZSl7cmV0dXJuISghKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImNyZWF0ZVF1ZXJ5XCJpbiBlJiZcImdldEZpZWxkXCJpbiBlJiZcInF1ZXJ5RmVhdHVyZUNvdW50XCJpbiBlJiZcInF1ZXJ5RmVhdHVyZXNcImluIGUmJlwicXVlcnlPYmplY3RJZHNcImluIGUmJlwiY2FwYWJpbGl0aWVzXCJpbiBlJiZcImZpZWxkc1wiaW4gZSYmXCJmaWVsZHNJbmRleFwiaW4gZSYmXCJ0eXBlXCJpbiBlKXx8XCJmZWF0dXJlXCIhPT1lLnR5cGUmJlwic3VidHlwZS1ncm91cFwiIT09ZS50eXBlJiZcInN1YnR5cGUtc3VibGF5ZXJcIiE9PWUudHlwZSYmXCJzdWJsYXllclwiIT09ZS50eXBlfHwhKFwid2hlblwiaW4gZSkpJiYoXCJzdWJ0eXBlLXN1YmxheWVyXCI9PT1lLnR5cGUmJlwicGFyZW50XCJpbiBlJiZlLnBhcmVudCYmXCJvYmplY3RcIj09dHlwZW9mIGUucGFyZW50P1wiZ2xvYmFsSWRGaWVsZFwiaW4gZS5wYXJlbnQ6XCJnbG9iYWxJZEZpZWxkXCJpbiBlKX1mdW5jdGlvbiBWKGUpe3JldHVybiEhZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJlwic291cmNlTGF5ZXJcImluIGUmJkooZS5zb3VyY2VMYXllcil9ZnVuY3Rpb24gVyhlLHQpe2NvbnN0e2ZpZWxkSW5mb3M6cixmaWVsZE5hbWU6bixwcmV2ZW50UGxhY2VzRm9ybWF0dGluZzpsLGxheWVyOnUsdGltZVpvbmU6c309dCxjPWVlKHIsbiksZD1rKHUsbik7aWYoYyYmIWEobikpe2NvbnN0IHQ9ZD8udHlwZSxyPWMuZm9ybWF0Py5kYXRlRm9ybWF0O2lmKFwiZGF0ZVwiPT09dHx8XCJkYXRlLW9ubHlcIj09PXR8fFwidGltZS1vbmx5XCI9PT10fHxcInRpbWVzdGFtcC1vZmZzZXRcIj09PXR8fHIpcmV0dXJuIGYoZSx7Zm9ybWF0OnIsZmllbGRUeXBlOnQsdGltZVpvbmVPcHRpb25zOntsYXllclRpbWVab25lOnUmJlwicHJlZmVycmVkVGltZVpvbmVcImluIHU/dS5wcmVmZXJyZWRUaW1lWm9uZTpudWxsLHZpZXdUaW1lWm9uZTpzLGRhdGVzSW5Vbmtub3duVGltZXpvbmU6ISghdXx8IShcImRhdGVzSW5Vbmtub3duVGltZXpvbmVcImluIHUpKSYmISF1LmRhdGVzSW5Vbmtub3duVGltZXpvbmV9fSl9Y29uc3QgcD1jPy5mb3JtYXQ7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJmEobikmJnA/WChlLHApOlwic3RyaW5nXCI9PXR5cGVvZihlPV8oZSxwKSl8fG51bGw9PWV8fG51bGw9PXA/bGUoZSk6aShlLGw/ey4uLm8ocCksbWluaW11bUZyYWN0aW9uRGlnaXRzOjAsbWF4aW11bUZyYWN0aW9uRGlnaXRzOjIwfTpvKHApKX1mdW5jdGlvbiBYKGUsdCl7cmV0dXJuIGU9ZS50cmltKCksL1xcZHsyfS1cXGR7Mn0vLnRlc3QoZSk/ZTplLmluY2x1ZGVzKFwiLFwiKT9ZKGUsXCIsXCIsXCIsIFwiLHQpOmUuaW5jbHVkZXMoXCI7XCIpP1koZSxcIjtcIixcIjsgXCIsdCk6ZS5pbmNsdWRlcyhcIiBcIik/WShlLFwiIFwiLFwiIFwiLHQpOmkoTnVtYmVyKGUpLG8odCkpfWZ1bmN0aW9uIFkoZSx0LHIsbil7cmV0dXJuIGUudHJpbSgpLnNwbGl0KHQpLm1hcCgoZT0+aShOdW1iZXIoZSksbyhuKSkpKS5qb2luKHIpfWZ1bmN0aW9uIGVlKGUsdCl7aWYoZT8ubGVuZ3RoJiZ0KXJldHVybiBlLmZpbmQoKGU9PmUuZmllbGROYW1lPy50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpKSl9ZnVuY3Rpb24gdGUoe2ZpZWxkTmFtZTplLGdyYXBoaWM6dCxsYXllcjpyfSl7aWYocGUoZSkpcmV0dXJuIG51bGw7aWYoIXJ8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIuZ2V0RmVhdHVyZVR5cGUpcmV0dXJuIG51bGw7Y29uc3R7dHlwZUlkRmllbGQ6bn09cjtpZighbnx8ZSE9PW4pcmV0dXJuIG51bGw7Y29uc3QgaT1yLmdldEZlYXR1cmVUeXBlKHQpO3JldHVybiBpP2kubmFtZTpudWxsfWZ1bmN0aW9uIHJlKHtmaWVsZE5hbWU6ZSx2YWx1ZTp0LGdyYXBoaWM6cixsYXllcjpufSl7aWYocGUoZSkpcmV0dXJuIG51bGw7aWYoIW58fFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4uZ2V0RmllbGREb21haW4pcmV0dXJuIG51bGw7Y29uc3QgaT1yJiZuLmdldEZpZWxkRG9tYWluKGUse2ZlYXR1cmU6cixleGNsdWRlSW1wbGllZERvbWFpbnM6aGFzKFwiZXNyaS13aWRnZXQtbGVnYWN5LWZpZWxkLWRvbWFpbi1jYWxjdWxhdGlvblwiKX0pO3JldHVybiBpJiZcImNvZGVkLXZhbHVlXCI9PT1pLnR5cGU/aS5nZXROYW1lKHQpOm51bGx9ZnVuY3Rpb24gbmUoZSx0LHIsaSl7Y29uc3R7Y3JlYXRvckZpZWxkOm8sY3JlYXRpb25EYXRlRmllbGQ6YSxlZGl0b3JGaWVsZDpsLGVkaXREYXRlRmllbGQ6dX09ZTtpZighdClyZXR1cm47Y29uc3Qgcz1wKGkmJlwicHJlZmVycmVkVGltZVpvbmVcImluIGk/aS5wcmVmZXJyZWRUaW1lWm9uZTpudWxsLCEoIWl8fCEoXCJkYXRlc0luVW5rbm93blRpbWV6b25lXCJpbiBpKSkmJiEhaS5kYXRlc0luVW5rbm93blRpbWV6b25lLHIsWixcImRhdGVcIiksZj17Li4uWiwuLi5zfSxjPXRbdV07aWYoXCJudW1iZXJcIj09dHlwZW9mIGMpe2NvbnN0IGU9dFtsXTtyZXR1cm57dHlwZTpcImVkaXRcIixkYXRlOm4oYyxmKSx1c2VyOmV9fWNvbnN0IGQ9dFthXTtpZihcIm51bWJlclwiPT10eXBlb2YgZCl7Y29uc3QgZT10W29dO3JldHVybnt0eXBlOlwiY3JlYXRlXCIsZGF0ZTpuKGQsZiksdXNlcjplfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBpZShlLHQpe2NvbnN0IHI9bmV3IE1hcDtpZighZSlyZXR1cm4gcjtmb3IoY29uc3QgbiBvZiBlKXtpZighbi5maWVsZE5hbWUpY29udGludWU7Y29uc3QgZT1NKG4uZmllbGROYW1lLHQpO24uZmllbGROYW1lPWUsci5zZXQoZS50b0xvd2VyQ2FzZSgpLG4pfXJldHVybiByfWZ1bmN0aW9uIG9lKGUpe2NvbnN0IHQ9W107aWYoIWUpcmV0dXJuIHQ7Y29uc3R7ZmllbGRJbmZvczpyLGNvbnRlbnQ6bn09ZTtyZXR1cm4gciYmdC5wdXNoKC4uLnIpLG4mJkFycmF5LmlzQXJyYXkobik/KG4uZm9yRWFjaCgoZT0+e2lmKFwiZmllbGRzXCI9PT1lLnR5cGUpe2NvbnN0IHI9ZT8uZmllbGRJbmZvcztyJiZ0LnB1c2goLi4ucil9fSkpLHQpOnR9ZnVuY3Rpb24gYWUoZSl7cmV0dXJuIGUucmVwbGFjZUFsbChULChlPT5gJiMke2UuY2hhckNvZGVBdCgwKX07YCkpfWZ1bmN0aW9uIGxlKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP2UucmVwbGFjZUFsbCh3LCc8YnIgY2xhc3M9XCJlc3JpLXRleHQtbmV3LWxpbmVcIiAvPicpOmV9ZnVuY3Rpb24gdWUoZSl7Y29uc3R7dmFsdWU6dCxmaWVsZE5hbWU6cixmaWVsZEluZm9zOm4sZmllbGRJbmZvTWFwOmksbGF5ZXI6byxncmFwaGljOmEsdGltZVpvbmU6bH09ZTtpZihudWxsPT10KXJldHVyblwiXCI7Y29uc3Qgcz1yZSh7ZmllbGROYW1lOnIsdmFsdWU6dCxncmFwaGljOmEsbGF5ZXI6b30pO2lmKHMpcmV0dXJuIHM7Y29uc3QgZD10ZSh7ZmllbGROYW1lOnIsZ3JhcGhpYzphLGxheWVyOm99KTtpZihkKXJldHVybiBkO2lmKGkuZ2V0KHIudG9Mb3dlckNhc2UoKSkpcmV0dXJuIFcodCx7ZmllbGRJbmZvczpufHxBcnJheS5mcm9tKGkudmFsdWVzKCkpLGZpZWxkTmFtZTpyLGxheWVyOm8sdGltZVpvbmU6bH0pO2NvbnN0IHA9bz8uZmllbGRzSW5kZXg/LmdldChyKTtyZXR1cm4gcCYmKGMocCl8fHUocCkpP2YodCx7ZmllbGRUeXBlOnAudHlwZSx0aW1lWm9uZU9wdGlvbnM6e2xheWVyVGltZVpvbmU6byYmXCJwcmVmZXJyZWRUaW1lWm9uZVwiaW4gbz9vLnByZWZlcnJlZFRpbWVab25lOm51bGwsdmlld1RpbWVab25lOmwsZGF0ZXNJblVua25vd25UaW1lem9uZTohKCFvfHwhKFwiZGF0ZXNJblVua25vd25UaW1lem9uZVwiaW4gbykpJiYhIW8uZGF0ZXNJblVua25vd25UaW1lem9uZX19KTpsZSh0KX1mdW5jdGlvbiBzZSh7ZmllbGRJbmZvczplLGF0dHJpYnV0ZXM6dCxsYXllcjpyLGdyYXBoaWM6bixmaWVsZEluZm9NYXA6aSxyZWxhdGVkSW5mb3M6byx0aW1lWm9uZTphfSl7Y29uc3QgbD17fTtyZXR1cm4gbz8uZm9yRWFjaCgodD0+YmUoe2F0dHJpYnV0ZXM6bCxyZWxhdGVkSW5mbzp0LGZpZWxkSW5mb01hcDppLGZpZWxkSW5mb3M6ZSxsYXllcjpyLHRpbWVab25lOmF9KSkpLHQmJk9iamVjdC5rZXlzKHQpLmZvckVhY2goKG89Pntjb25zdCB1PXRbb107bFtvXT11ZSh7ZmllbGROYW1lOm8sZmllbGRJbmZvczplLGZpZWxkSW5mb01hcDppLGxheWVyOnIsdmFsdWU6dSxncmFwaGljOm4sdGltZVpvbmU6YX0pfSkpLGx9YXN5bmMgZnVuY3Rpb24gZmUoZSx0KXtjb25zdHtsYXllcjpyLGdyYXBoaWM6bixvdXRGaWVsZHM6aSxvYmplY3RJZHM6byxyZXR1cm5HZW9tZXRyeTphLHNwYXRpYWxSZWZlcmVuY2U6bH09ZSx1PW9bMF07aWYoXCJudW1iZXJcIiE9dHlwZW9mIHUmJlwic3RyaW5nXCIhPXR5cGVvZiB1KXtjb25zdCBlPVwiQ291bGQgbm90IHF1ZXJ5IHJlcXVpcmVkIGZpZWxkcyBmb3IgdGhlIHNwZWNpZmllZCBmZWF0dXJlLiBUaGUgZmVhdHVyZSdzIElEIGlzIGludmFsaWQuXCIsdD17bGF5ZXI6cixncmFwaGljOm4sb2JqZWN0SWQ6dSxyZXF1aXJlZEZpZWxkczppfTtyZXR1cm4gbSgpLndhcm4oZSx0KSxudWxsfWlmKCFzKHIpPy5vcGVyYXRpb25zPy5zdXBwb3J0c1F1ZXJ5KXtjb25zdCBlPVwiVGhlIHNwZWNpZmllZCBsYXllciBjYW5ub3QgYmUgcXVlcmllZC4gVGhlIGZvbGxvd2luZyBmaWVsZHMgd2lsbCBub3QgYmUgYXZhaWxhYmxlLlwiLHQ9e2xheWVyOnIsZ3JhcGhpYzpuLHJlcXVpcmVkRmllbGRzOmkscmV0dXJuR2VvbWV0cnk6YX07cmV0dXJuIG0oKS53YXJuKGUsdCksbnVsbH1jb25zdCBmPXIuY3JlYXRlUXVlcnkoKTtmLm9iamVjdElkcz1vLGYub3V0RmllbGRzPWk/Lmxlbmd0aD9pOltyLm9iamVjdElkRmllbGRdLGYucmV0dXJuR2VvbWV0cnk9ISFhLGYucmV0dXJuWj0hIWEsZi5yZXR1cm5NPSEhYSxmLm91dFNwYXRpYWxSZWZlcmVuY2U9bDtyZXR1cm4oYXdhaXQgci5xdWVyeUZlYXR1cmVzKGYsdCkpLmZlYXR1cmVzWzBdfWFzeW5jIGZ1bmN0aW9uIGNlKGUpe2lmKCFlLmV4cHJlc3Npb25JbmZvcz8ubGVuZ3RoKXJldHVybiExO2NvbnN0IHQ9YXdhaXQgZCgpLHthcmNhZGVVdGlsczp7aGFzR2VvbWV0cnlGdW5jdGlvbnM6cn19PXQ7cmV0dXJuIHIoZSl9YXN5bmMgZnVuY3Rpb24gZGUoe2dyYXBoaWM6ZSxwb3B1cFRlbXBsYXRlOnQsbGF5ZXI6cixzcGF0aWFsUmVmZXJlbmNlOm59LGkpe2lmKCFyfHwhdClyZXR1cm47aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygci5sb2FkJiZhd2FpdCByLmxvYWQoaSksIWUuYXR0cmlidXRlcylyZXR1cm47Y29uc3Qgbz1yLm9iamVjdElkRmllbGQsYT1lLmF0dHJpYnV0ZXNbb107aWYobnVsbD09YSlyZXR1cm47Y29uc3QgdT1bYV0scz1hd2FpdCB0LmdldFJlcXVpcmVkRmllbGRzKHIuZmllbGRzSW5kZXgpLGY9bChlLHMpLGM9Zj9bXTpzLmluY2x1ZGVzKG8pP3M6Wy4uLnMsb10sZD10LnJldHVybkdlb21ldHJ5fHxhd2FpdCBjZSh0KTtpZihmJiYhZClyZXR1cm47Y29uc3QgcD1hd2FpdCBmZSh7bGF5ZXI6cixncmFwaGljOmUsb3V0RmllbGRzOmMsb2JqZWN0SWRzOnUscmV0dXJuR2VvbWV0cnk6ZCxzcGF0aWFsUmVmZXJlbmNlOm59LGkpO3AmJihwLmdlb21ldHJ5JiYoZS5nZW9tZXRyeT1wLmdlb21ldHJ5KSxwLmF0dHJpYnV0ZXMmJihlLmF0dHJpYnV0ZXM9ey4uLmUuYXR0cmlidXRlcywuLi5wLmF0dHJpYnV0ZXN9KSl9ZnVuY3Rpb24gcGUoZT1cIlwiKXtyZXR1cm4hIWUmJmUuaW5jbHVkZXMoail9ZnVuY3Rpb24geWUoZSl7cmV0dXJuIGU/YCR7an0ke2UubGF5ZXJJZH0vJHtlLmZpZWxkTmFtZX1gOlwiXCJ9ZnVuY3Rpb24gbWUoe2F0dHJpYnV0ZXM6ZSxncmFwaGljOnQscmVsYXRlZEluZm86cixmaWVsZEluZm9zOm4sZmllbGRJbmZvTWFwOmksbGF5ZXI6byx0aW1lWm9uZTphfSl7ZSYmdCYmciYmT2JqZWN0LmtleXModC5hdHRyaWJ1dGVzKS5mb3JFYWNoKChsPT57Y29uc3QgdT15ZSh7bGF5ZXJJZDpyLnJlbGF0aW9uLmlkLnRvU3RyaW5nKCksZmllbGROYW1lOmx9KSxzPXQuYXR0cmlidXRlc1tsXTtlW3VdPXVlKHtmaWVsZE5hbWU6dSxmaWVsZEluZm9zOm4sZmllbGRJbmZvTWFwOmksbGF5ZXI6byx2YWx1ZTpzLGdyYXBoaWM6dCx0aW1lWm9uZTphfSl9KSl9ZnVuY3Rpb24gYmUoe2F0dHJpYnV0ZXM6ZSxyZWxhdGVkSW5mbzp0LGZpZWxkSW5mb01hcDpyLGZpZWxkSW5mb3M6bixsYXllcjppLHRpbWVab25lOm99KXtlJiZ0JiYodC5yZWxhdGVkRmVhdHVyZXM/LmZvckVhY2goKGE9Pm1lKHthdHRyaWJ1dGVzOmUsZ3JhcGhpYzphLHJlbGF0ZWRJbmZvOnQsZmllbGRJbmZvTWFwOnIsZmllbGRJbmZvczpuLGxheWVyOmksdGltZVpvbmU6b30pKSksdC5yZWxhdGVkU3RhdHNGZWF0dXJlcz8uZm9yRWFjaCgoYT0+bWUoe2F0dHJpYnV0ZXM6ZSxncmFwaGljOmEscmVsYXRlZEluZm86dCxmaWVsZEluZm9NYXA6cixmaWVsZEluZm9zOm4sbGF5ZXI6aSx0aW1lWm9uZTpvfSkpKSl9Y29uc3QgZ2U9ZT0+e2lmKCFlKXJldHVybiExO2NvbnN0IHQ9ZS50b1VwcGVyQ2FzZSgpO3JldHVybiB0LmluY2x1ZGVzKFwiQ1VSUkVOVF9USU1FU1RBTVBcIil8fHQuaW5jbHVkZXMoXCJDVVJSRU5UX0RBVEVcIil8fHQuaW5jbHVkZXMoXCJDVVJSRU5UX1RJTUVcIil9LGhlPSh7bGF5ZXI6ZSxtZXRob2Q6dCxxdWVyeTpyLGRlZmluaXRpb25FeHByZXNzaW9uOm59KT0+e2lmKCFlLmNhcGFiaWxpdGllcz8ucXVlcnk/LnN1cHBvcnRzQ2FjaGVIaW50fHxcImF0dGFjaG1lbnRzXCI9PT10KXJldHVybjtjb25zdCBpPW51bGwhPXIud2hlcmU/ci53aGVyZTpudWxsLG89bnVsbCE9ci5nZW9tZXRyeT9yLmdlb21ldHJ5Om51bGw7Z2Uobil8fGdlKGkpfHxcImV4dGVudFwiPT09bz8udHlwZXx8XCJ0aWxlXCI9PT1yLnJlc3VsdFR5cGV8fChyLmNhY2hlSGludD0hMCl9LEllPSh7cXVlcnk6ZSxsYXllcjp0LG1ldGhvZDpyfSk9PntoZSh7bGF5ZXI6dCxtZXRob2Q6cixxdWVyeTplLGRlZmluaXRpb25FeHByZXNzaW9uOmAke3QuZGVmaW5pdGlvbkV4cHJlc3Npb259ICR7dC5zZXJ2aWNlRGVmaW5pdGlvbkV4cHJlc3Npb24/P1wiXCJ9YH0pfSx3ZT0oe3F1ZXJ5UGF5bG9hZDplLGxheWVyOnQsbWV0aG9kOnJ9KT0+e2hlKHtsYXllcjp0LG1ldGhvZDpyLHF1ZXJ5OmUsZGVmaW5pdGlvbkV4cHJlc3Npb246YCR7dC5kZWZpbml0aW9uRXhwcmVzc2lvbn0gJHt0LnNlcnZpY2VEZWZpbml0aW9uRXhwcmVzc2lvbj8/XCJcIn1gfSl9O2Z1bmN0aW9uIFRlKGUsdCxyKXtyZXR1cm4gZSYmdCYmcj9cInN1YmxheWVyXCI9PT10LnR5cGU/amUoe2xheWVyczp0LmxheWVyPy5hbGxTdWJsYXllcnMsbWFwOmUscmVsYXRlZExheWVyOnQscmVsYXRpb25zaGlwOnJ9KXx8amUoe2xheWVyczp0LmxheWVyPy5zdWJ0YWJsZXMsbWFwOmUscmVsYXRlZExheWVyOnQscmVsYXRpb25zaGlwOnJ9KTpqZSh7bGF5ZXJzOmUuYWxsTGF5ZXJzLG1hcDplLHJlbGF0ZWRMYXllcjp0LHJlbGF0aW9uc2hpcDpyfSl8fGplKHtsYXllcnM6ZS5hbGxUYWJsZXMsbWFwOmUscmVsYXRlZExheWVyOnQscmVsYXRpb25zaGlwOnJ9KTpudWxsfWZ1bmN0aW9uIEZlKGUsdCl7cmV0dXJuIGUmJlwidXRpbGl0eU5ldHdvcmtzXCJpbiBlJiZ0P2UudXRpbGl0eU5ldHdvcmtzPy5maW5kKChlPT5lLmlzVXRpbGl0eUxheWVyKHQpKSk6bnVsbH1mdW5jdGlvbiBOZShlLHQpe3JldHVybiBlPy5hbGxUYWJsZXMuZmluZCgoZT0+XCJmZWF0dXJlXCI9PT1lLnR5cGUmJmUubGF5ZXJJZD09PXQuaWQmJmUudXJsPT09dC5sYXllcj8udXJsKSl9ZnVuY3Rpb24gamUoe21hcDplLHJlbGF0aW9uc2hpcDp0LHJlbGF0aW9uc2hpcDp7cmVsYXRlZFRhYmxlSWQ6cn0scmVsYXRlZExheWVyOm4sbGF5ZXJzOml9KXtpZighaSlyZXR1cm4gbnVsbDtmb3IoY29uc3QgbyBvZiBpKXtpZihcIm1hcC1pbWFnZVwiPT09by50eXBlKXtjb25zdCByPWplKHtsYXllcnM6by5zdWJsYXllcnMsbWFwOmUscmVsYXRlZExheWVyOm4scmVsYXRpb25zaGlwOnR9KXx8amUoe2xheWVyczpvLnN1YnRhYmxlcyxtYXA6ZSxyZWxhdGVkTGF5ZXI6bixyZWxhdGlvbnNoaXA6dH0pO2lmKHIpcmV0dXJuIHI7Y29udGludWV9aWYoIUoobykpY29udGludWU7aWYoXCJzdWJsYXllclwiPT09bi50eXBlKXtpZihvIT09biYmby5pZD09PXIpcmV0dXJuIG8uaXNUYWJsZT9OZShlLG8pOm87Y29udGludWV9Y29uc3QgaT1cInNjZW5lXCI9PT1uLnR5cGUmJm4uYXNzb2NpYXRlZExheWVyP24uYXNzb2NpYXRlZExheWVyLnVybDpuLnVybDtpZighaSlyZXR1cm4gbnVsbDtpZihcInN1YmxheWVyXCIhPT1vLnR5cGUpe2lmKG8hPT1uJiZvLnVybD09PWkmJm8ubGF5ZXJJZD09PXIpcmV0dXJuIG99ZWxzZSBpZihvIT09biYmby5sYXllcj8udXJsPT09aSYmby5pZD09PXIpcmV0dXJuIG8uaXNUYWJsZT9OZShlLG8pOm99cmV0dXJuIG51bGx9ZXhwb3J0e2xlIGFzIGFwcGx5VGV4dEZvcm1hdHRpbmdIVE1MLGllIGFzIGNyZWF0ZUZpZWxkSW5mb01hcCxUZSBhcyBmaW5kUmVsYXRlZExheWVyLEZlIGFzIGZpbmRVdGlsaXR5TmV0d29yayxRIGFzIGZpeFRva2VucyxzZSBhcyBmb3JtYXRBdHRyaWJ1dGVzLG5lIGFzIGZvcm1hdEVkaXRJbmZvLFcgYXMgZm9ybWF0VmFsdWVUb0ZpZWxkSW5mbyxvZSBhcyBnZXRBbGxGaWVsZEluZm9zLGVlIGFzIGdldEZpZWxkSW5mbyxBIGFzIGdldEZpZWxkSW5mb0xhYmVsLE0gYXMgZ2V0Rml4ZWRGaWVsZE5hbWUsUiBhcyBnZXRGaXhlZEZpZWxkTmFtZXMsTCBhcyBnZXRTb3VyY2VMYXllcixxIGFzIGdyYXBoaWNDYWxsYmFjayxhZSBhcyBodG1sRW50aXRpZXMsSyBhcyBpc0Fzc29jaWF0ZWRGZWF0dXJlU3VwcG9ydGVkTGF5ZXIsRSBhcyBpc0V4cHJlc3Npb25GaWVsZCxIIGFzIGlzRmVhdHVyZVN1cHBvcnRlZExheWVyLFYgYXMgaXNHcmFwaGljRm9yUmVsYXRhYmxlRmVhdHVyZVN1cHBvcnRlZExheWVyLEogYXMgaXNSZWxhdGFibGVGZWF0dXJlU3VwcG9ydGVkTGF5ZXIsQiBhcyBpc1JlbGF0YWJsZUxheWVyLHBlIGFzIGlzUmVsYXRlZEZpZWxkLEllIGFzIHByZUxheWVyUXVlcnlDYWxsYmFjayx3ZSBhcyBwcmVSZXF1ZXN0Q2FsbGJhY2ssZmUgYXMgcXVlcnlTb3VyY2VMYXllcixkZSBhcyBxdWVyeVVwZGF0ZWRGZWF0dXJlLHggYXMgc2hvdWxkT3BlbkluTmV3VGFiLHogYXMgc3Vic3RpdHV0ZUF0dHJpYnV0ZXMsRCBhcyBzdWJzdGl0dXRlRmllbGRzSW5MaW5rc0FuZEF0dHJpYnV0ZXN9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9